{% raw %}
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Superscalar and Out-of-Order Execution - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/en/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/en/" class="nav-item ">
                    <span class="nav-icon">ğŸ </span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">ğŸ’»</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/en/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" selected>
                        English
                    </option>
                    
                    <option value="ko" >
                        í•œêµ­ì–´
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">â˜€ï¸</span>
                    <span class="theme-icon dark">ğŸŒ™</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/en/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/en/Computer_Architecture/">Computer Architecture</a>
    <span class="separator">/</span>
    <span class="current">Superscalar and Out-of-Order Execution</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>Superscalar and Out-of-Order Execution</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/Computer_Architecture/12_Branch_Prediction.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Branch Prediction</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/Computer_Architecture/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/Computer_Architecture/14_Memory_Hierarchy.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Memory Hierarchy</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#1-instruction-level-parallelism-ilp">1. Instruction-Level Parallelism (ILP)</a><ul>
<li><a href="#11-ilp-concept">1.1 ILP Concept</a></li>
<li><a href="#12-data-dependence">1.2 Data Dependence</a><ul>
<li><a href="#raw-read-after-write-true-dependence">RAW (Read After Write) - True Dependence</a></li>
<li><a href="#war-write-after-read-anti-dependence">WAR (Write After Read) - Anti-dependence</a></li>
<li><a href="#waw-write-after-write-output-dependence">WAW (Write After Write) - Output Dependence</a></li>
</ul>
</li>
<li><a href="#13-dependence-graph">1.3 Dependence Graph</a></li>
<li><a href="#14-control-dependence">1.4 Control Dependence</a></li>
</ul>
</li>
<li><a href="#2-superscalar-processors">2. Superscalar Processors</a><ul>
<li><a href="#21-superscalar-concept">2.1 Superscalar Concept</a></li>
<li><a href="#22-superscalar-structure">2.2 Superscalar Structure</a></li>
<li><a href="#23-issue-policies">2.3 Issue Policies</a><ul>
<li><a href="#in-order-issue">In-Order Issue</a></li>
<li><a href="#out-of-order-issue">Out-of-Order Issue</a></li>
</ul>
</li>
<li><a href="#24-diverse-execution-units">2.4 Diverse Execution Units</a></li>
</ul>
</li>
<li><a href="#3-need-for-out-of-order-execution">3. Need for Out-of-Order Execution</a><ul>
<li><a href="#31-limitations-of-in-order-execution">3.1 Limitations of In-Order Execution</a></li>
<li><a href="#32-three-stages-of-ooo-execution">3.2 Three Stages of OoO Execution</a></li>
</ul>
</li>
<li><a href="#4-register-renaming">4. Register Renaming</a><ul>
<li><a href="#41-need-for-renaming">4.1 Need for Renaming</a></li>
<li><a href="#42-renaming-operation">4.2 Renaming Operation</a></li>
<li><a href="#43-register-alias-table-rat">4.3 Register Alias Table (RAT)</a></li>
<li><a href="#44-renaming-algorithm">4.4 Renaming Algorithm</a></li>
</ul>
</li>
<li><a href="#5-tomasulo-algorithm">5. Tomasulo Algorithm</a><ul>
<li><a href="#51-background">5.1 Background</a></li>
<li><a href="#52-key-components">5.2 Key Components</a></li>
<li><a href="#53-reservation-station-structure">5.3 Reservation Station Structure</a></li>
<li><a href="#54-operation-process">5.4 Operation Process</a></li>
<li><a href="#55-example-tomasulo-execution-trace">5.5 Example: Tomasulo Execution Trace</a></li>
</ul>
</li>
<li><a href="#6-reorder-buffer-rob">6. Reorder Buffer (ROB)</a><ul>
<li><a href="#61-need-for-rob">6.1 Need for ROB</a></li>
<li><a href="#62-rob-structure">6.2 ROB Structure</a></li>
<li><a href="#63-integrating-rob-with-tomasulo">6.3 Integrating ROB with Tomasulo</a></li>
<li><a href="#64-commit-process">6.4 Commit Process</a></li>
<li><a href="#65-branch-misprediction-recovery">6.5 Branch Misprediction Recovery</a></li>
</ul>
</li>
<li><a href="#7-modern-processor-implementations">7. Modern Processor Implementations</a><ul>
<li><a href="#71-intel-core-architecture-skylake">7.1 Intel Core Architecture (Skylake)</a></li>
<li><a href="#72-arm-cortex-a77-architecture">7.2 ARM Cortex-A77 Architecture</a></li>
<li><a href="#73-performance-comparison">7.3 Performance Comparison</a></li>
<li><a href="#74-limitations-of-ilp">7.4 Limitations of ILP</a></li>
</ul>
</li>
<li><a href="#8-practice-problems">8. Practice Problems</a><ul>
<li><a href="#basic-problems">Basic Problems</a></li>
<li><a href="#intermediate-problems">Intermediate Problems</a></li>
<li><a href="#advanced-problems">Advanced Problems</a></li>
</ul>
</li>
<li><a href="#next-steps">Next Steps</a></li>
<li><a href="#references">References</a></li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="superscalar-and-out-of-order-execution">Superscalar and Out-of-Order Execution<a class="header-link" href="#superscalar-and-out-of-order-execution" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="header-link" href="#overview" title="Permanent link">&para;</a></h2>
<p>Modern high-performance processors cannot achieve significant performance gains by simply increasing clock speed. Superscalar and Out-of-Order Execution are techniques that exploit Instruction-Level Parallelism (ILP) to execute multiple instructions simultaneously in a single cycle. This lesson covers ILP concepts, superscalar architecture, and the principles and implementation of out-of-order execution.</p>
<p><strong>Difficulty</strong>: â­â­â­â­</p>
<p><strong>Prerequisites</strong>: Pipelining, Branch Prediction, CPU Architecture Basics</p>
<hr />
<h2 id="table-of-contents">Table of Contents<a class="header-link" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#1-instruction-level-parallelism-ilp">Instruction-Level Parallelism (ILP)</a></li>
<li><a href="#2-superscalar-processors">Superscalar Processors</a></li>
<li><a href="#3-need-for-out-of-order-execution">Need for Out-of-Order Execution</a></li>
<li><a href="#4-register-renaming">Register Renaming</a></li>
<li><a href="#5-tomasulo-algorithm">Tomasulo Algorithm</a></li>
<li><a href="#6-reorder-buffer-rob">Reorder Buffer (ROB)</a></li>
<li><a href="#7-modern-processor-implementations">Modern Processor Implementations</a></li>
<li><a href="#8-practice-problems">Practice Problems</a></li>
</ol>
<hr />
<h2 id="1-instruction-level-parallelism-ilp">1. Instruction-Level Parallelism (ILP)<a class="header-link" href="#1-instruction-level-parallelism-ilp" title="Permanent link">&para;</a></h2>
<h3 id="11-ilp-concept">1.1 ILP Concept<a class="header-link" href="#11-ilp-concept" title="Permanent link">&para;</a></h3>
<p>Instruction-Level Parallelism (ILP) refers to the potential parallelism of instructions within a program that can be executed simultaneously.</p>
<div class="highlight"><pre><span></span><code>Sequential vs Parallel Execution:

Sequential Execution:
  Time â†’
  t1    t2    t3    t4    t5    t6
  â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
  â”‚ I1  â”‚ I2  â”‚ I3  â”‚ I4  â”‚ I5  â”‚ I6  â”‚
  â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
  Total 6 cycles

Parallel Execution (ILP = 2):
  Time â†’
  t1    t2    t3
  â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
  â”‚ I1  â”‚ I3  â”‚ I5  â”‚
  â”‚ I2  â”‚ I4  â”‚ I6  â”‚
  â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
  Total 3 cycles
</code></pre></div>

<h3 id="12-data-dependence">1.2 Data Dependence<a class="header-link" href="#12-data-dependence" title="Permanent link">&para;</a></h3>
<p>The most important factor limiting ILP is data dependence.</p>
<h4 id="raw-read-after-write-true-dependence">RAW (Read After Write) - True Dependence<a class="header-link" href="#raw-read-after-write-true-dependence" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="n">I1</span><span class="o">:</span><span class="w"> </span><span class="n">ADD</span><span class="w"> </span><span class="n">R1</span><span class="o">,</span><span class="w"> </span><span class="n">R2</span><span class="o">,</span><span class="w"> </span><span class="n">R3</span><span class="w">    </span><span class="o">;</span><span class="w"> </span><span class="n">R1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">R2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">R3</span>
<span class="n">I2</span><span class="o">:</span><span class="w"> </span><span class="n">SUB</span><span class="w"> </span><span class="n">R4</span><span class="o">,</span><span class="w"> </span><span class="n">R1</span><span class="o">,</span><span class="w"> </span><span class="n">R5</span><span class="w">    </span><span class="o">;</span><span class="w"> </span><span class="n">R4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">R1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">R5</span><span class="w">  </span><span class="o">(</span><span class="n">uses</span><span class="w"> </span><span class="n">R1</span><span class="o">,</span><span class="w"> </span><span class="n">needs</span><span class="w"> </span><span class="n">I1</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">result</span><span class="o">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>I1 â”€â”€â”€â”€â”€â”€â”€â”€â†’ I2
   R1 dependence

I2 can only execute after I1 writes to R1
</code></pre></div>

<h4 id="war-write-after-read-anti-dependence">WAR (Write After Read) - Anti-dependence<a class="header-link" href="#war-write-after-read-anti-dependence" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="n">I1</span><span class="o">:</span><span class="w"> </span><span class="n">ADD</span><span class="w"> </span><span class="n">R1</span><span class="o">,</span><span class="w"> </span><span class="n">R2</span><span class="o">,</span><span class="w"> </span><span class="n">R3</span><span class="w">    </span><span class="o">;</span><span class="w"> </span><span class="n">Read</span><span class="w"> </span><span class="n">R2</span>
<span class="n">I2</span><span class="o">:</span><span class="w"> </span><span class="n">SUB</span><span class="w"> </span><span class="n">R2</span><span class="o">,</span><span class="w"> </span><span class="n">R4</span><span class="o">,</span><span class="w"> </span><span class="n">R5</span><span class="w">    </span><span class="o">;</span><span class="w"> </span><span class="n">Write</span><span class="w"> </span><span class="n">R2</span><span class="w"> </span><span class="o">(</span><span class="n">must</span><span class="w"> </span><span class="n">write</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="n">I1</span><span class="w"> </span><span class="n">reads</span><span class="w"> </span><span class="n">R2</span><span class="o">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="n">I2</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">overwrite</span><span class="w"> </span><span class="n">R2</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">I1</span><span class="w"> </span><span class="n">reads</span><span class="w"> </span><span class="n">it</span>
<span class="err">â†’</span><span class="w"> </span><span class="n">Can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">resolved</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">register</span><span class="w"> </span><span class="n">renaming</span>
</code></pre></div>

<h4 id="waw-write-after-write-output-dependence">WAW (Write After Write) - Output Dependence<a class="header-link" href="#waw-write-after-write-output-dependence" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="n">I1</span><span class="o">:</span><span class="w"> </span><span class="n">ADD</span><span class="w"> </span><span class="n">R1</span><span class="o">,</span><span class="w"> </span><span class="n">R2</span><span class="o">,</span><span class="w"> </span><span class="n">R3</span><span class="w">    </span><span class="o">;</span><span class="w"> </span><span class="n">Write</span><span class="w"> </span><span class="n">R1</span>
<span class="n">I2</span><span class="o">:</span><span class="w"> </span><span class="n">SUB</span><span class="w"> </span><span class="n">R1</span><span class="o">,</span><span class="w"> </span><span class="n">R4</span><span class="o">,</span><span class="w"> </span><span class="n">R5</span><span class="w">    </span><span class="o">;</span><span class="w"> </span><span class="n">Write</span><span class="w"> </span><span class="n">R1</span><span class="w"> </span><span class="o">(</span><span class="n">writing</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">register</span><span class="o">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="n">If</span><span class="w"> </span><span class="n">I2</span><span class="w"> </span><span class="n">completes</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">I1</span><span class="p">,</span><span class="w"> </span><span class="k">final</span><span class="w"> </span><span class="n">R1</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">wrong</span>
<span class="err">â†’</span><span class="w"> </span><span class="n">Can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">resolved</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">register</span><span class="w"> </span><span class="n">renaming</span>
</code></pre></div>

<h3 id="13-dependence-graph">1.3 Dependence Graph<a class="header-link" href="#13-dependence-graph" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Program</span><span class="o">:</span>
<span class="n">I1</span><span class="o">:</span><span class="w"> </span><span class="n">LD</span><span class="w">   </span><span class="n">R1</span><span class="o">,</span><span class="w"> </span><span class="mi">0</span><span class="o">(</span><span class="n">R10</span><span class="o">)</span><span class="w">     </span><span class="o">;</span><span class="w"> </span><span class="n">Load</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">memory</span>
<span class="n">I2</span><span class="o">:</span><span class="w"> </span><span class="n">ADD</span><span class="w">  </span><span class="n">R2</span><span class="o">,</span><span class="w"> </span><span class="n">R1</span><span class="o">,</span><span class="w"> </span><span class="n">R3</span><span class="w">     </span><span class="o">;</span><span class="w"> </span><span class="n">RAW</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">R1</span>
<span class="n">I3</span><span class="o">:</span><span class="w"> </span><span class="n">LD</span><span class="w">   </span><span class="n">R4</span><span class="o">,</span><span class="w"> </span><span class="mi">8</span><span class="o">(</span><span class="n">R10</span><span class="o">)</span><span class="w">     </span><span class="o">;</span><span class="w"> </span><span class="n">Independent</span>
<span class="n">I4</span><span class="o">:</span><span class="w"> </span><span class="n">MUL</span><span class="w">  </span><span class="n">R5</span><span class="o">,</span><span class="w"> </span><span class="n">R4</span><span class="o">,</span><span class="w"> </span><span class="n">R6</span><span class="w">     </span><span class="o">;</span><span class="w"> </span><span class="n">RAW</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">R4</span>
<span class="n">I5</span><span class="o">:</span><span class="w"> </span><span class="n">ADD</span><span class="w">  </span><span class="n">R7</span><span class="o">,</span><span class="w"> </span><span class="n">R2</span><span class="o">,</span><span class="w"> </span><span class="n">R5</span><span class="w">     </span><span class="o">;</span><span class="w"> </span><span class="n">RAW</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">R2</span><span class="o">,</span><span class="w"> </span><span class="n">R5</span>
<span class="n">I6</span><span class="o">:</span><span class="w"> </span><span class="n">ST</span><span class="w">   </span><span class="n">R7</span><span class="o">,</span><span class="w"> </span><span class="mi">16</span><span class="o">(</span><span class="n">R10</span><span class="o">)</span><span class="w">    </span><span class="o">;</span><span class="w"> </span><span class="n">RAW</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">R7</span>

<span class="n">Dependence</span><span class="w"> </span><span class="n">graph</span><span class="o">:</span>
<span class="w">        </span><span class="n">I1</span><span class="w">          </span><span class="n">I3</span>
<span class="w">         </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span>
<span class="w">         </span><span class="err">â–¼</span><span class="w">           </span><span class="err">â–¼</span>
<span class="w">        </span><span class="n">I2</span><span class="w">          </span><span class="n">I4</span>
<span class="w">         </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span>
<span class="w">         </span><span class="err">â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜</span>
<span class="w">               </span><span class="err">â”‚</span>
<span class="w">               </span><span class="err">â–¼</span>
<span class="w">              </span><span class="n">I5</span>
<span class="w">               </span><span class="err">â”‚</span>
<span class="w">               </span><span class="err">â–¼</span>
<span class="w">              </span><span class="n">I6</span>

<span class="n">Parallelizable</span><span class="w"> </span><span class="n">groups</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">Level</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="w"> </span><span class="n">I1</span><span class="o">,</span><span class="w"> </span><span class="n">I3</span><span class="w"> </span><span class="o">(</span><span class="n">can</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">simultaneously</span><span class="o">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">Level</span><span class="w"> </span><span class="mi">2</span><span class="o">:</span><span class="w"> </span><span class="n">I2</span><span class="o">,</span><span class="w"> </span><span class="n">I4</span><span class="w"> </span><span class="o">(</span><span class="n">can</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">simultaneously</span><span class="o">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">Level</span><span class="w"> </span><span class="mi">3</span><span class="o">:</span><span class="w"> </span><span class="n">I5</span>
<span class="o">-</span><span class="w"> </span><span class="n">Level</span><span class="w"> </span><span class="mi">4</span><span class="o">:</span><span class="w"> </span><span class="n">I6</span>

<span class="n">Minimum</span><span class="w"> </span><span class="n">execution</span><span class="w"> </span><span class="n">time</span><span class="o">:</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">levels</span><span class="w"> </span><span class="o">(</span><span class="mi">4</span><span class="w"> </span><span class="n">cycles</span><span class="o">)</span><span class="w"> </span><span class="n">vs</span><span class="w"> </span><span class="n">sequential</span><span class="o">:</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="n">cycles</span>
<span class="n">ILP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="o">/</span><span class="mi">4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.5</span>
</code></pre></div>

<h3 id="14-control-dependence">1.4 Control Dependence<a class="header-link" href="#14-control-dependence" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nt">BEQ</span><span class="w">  </span><span class="nt">R1</span><span class="o">,</span><span class="w"> </span><span class="nt">R2</span><span class="o">,</span><span class="w"> </span><span class="nt">LABEL</span><span class="w">    </span><span class="o">;</span><span class="w"> </span><span class="nt">Branch</span><span class="w"> </span><span class="nt">instruction</span>
<span class="w">      </span><span class="nt">ADD</span><span class="w">  </span><span class="nt">R3</span><span class="o">,</span><span class="w"> </span><span class="nt">R4</span><span class="o">,</span><span class="w"> </span><span class="nt">R5</span><span class="w">       </span><span class="o">;</span><span class="w"> </span><span class="nt">Execute</span><span class="w"> </span><span class="nt">if</span><span class="w"> </span><span class="nt">branch</span><span class="w"> </span><span class="nt">not</span><span class="w"> </span><span class="nt">taken</span>
<span class="w">      </span><span class="o">...</span>
<span class="nt">LABEL</span><span class="o">:</span>
<span class="w">      </span><span class="nt">SUB</span><span class="w">  </span><span class="nt">R6</span><span class="o">,</span><span class="w"> </span><span class="nt">R7</span><span class="o">,</span><span class="w"> </span><span class="nt">R8</span><span class="w">       </span><span class="o">;</span><span class="w"> </span><span class="nt">Execute</span><span class="w"> </span><span class="nt">if</span><span class="w"> </span><span class="nt">branch</span><span class="w"> </span><span class="nt">taken</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>Don&#39;t know which instruction to execute before branch result
â†’ Resolved by branch prediction
</code></pre></div>

<hr />
<h2 id="2-superscalar-processors">2. Superscalar Processors<a class="header-link" href="#2-superscalar-processors" title="Permanent link">&para;</a></h2>
<h3 id="21-superscalar-concept">2.1 Superscalar Concept<a class="header-link" href="#21-superscalar-concept" title="Permanent link">&para;</a></h3>
<p>A superscalar processor can fetch, decode, and execute multiple instructions per cycle.</p>
<div class="highlight"><pre><span></span><code><span class="nv">Scalar</span><span class="w"> </span><span class="nv">vs</span><span class="w"> </span><span class="nv">Superscalar</span>:

<span class="nv">Scalar</span><span class="w"> </span><span class="nv">Pipeline</span><span class="w"> </span><span class="ss">(</span><span class="nv">IPC</span><span class="w"> </span>â‰¤<span class="w"> </span><span class="mi">1</span><span class="ss">)</span>:
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
â”‚<span class="w"> </span><span class="k">IF</span><span class="w">  </span>â”‚<span class="w"> </span><span class="nv">ID</span><span class="w">  </span>â”‚<span class="w"> </span><span class="nv">EX</span><span class="w">  </span>â”‚<span class="w"> </span><span class="nv">MEM</span><span class="w"> </span>â”‚<span class="w"> </span><span class="nv">WB</span><span class="w">  </span>â”‚<span class="w"> </span><span class="nv">I1</span>
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
<span class="w">      </span>â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
<span class="w">      </span>â”‚<span class="w"> </span><span class="k">IF</span><span class="w">  </span>â”‚<span class="w"> </span><span class="nv">ID</span><span class="w">  </span>â”‚<span class="w"> </span><span class="nv">EX</span><span class="w">  </span>â”‚<span class="w"> </span><span class="nv">MEM</span><span class="w"> </span>â”‚<span class="w"> </span><span class="nv">WB</span><span class="w">  </span>â”‚<span class="w"> </span><span class="nv">I2</span>
<span class="w">      </span>â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜

<span class="mi">2</span><span class="o">-</span><span class="nv">way</span><span class="w"> </span><span class="nv">Superscalar</span><span class="w"> </span><span class="ss">(</span><span class="nv">IPC</span><span class="w"> </span>â‰¤<span class="w"> </span><span class="mi">2</span><span class="ss">)</span>:
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
â”‚<span class="w"> </span><span class="k">IF</span><span class="w">  </span>â”‚<span class="w"> </span><span class="nv">ID</span><span class="w">  </span>â”‚<span class="w"> </span><span class="nv">EX</span><span class="w">  </span>â”‚<span class="w"> </span><span class="nv">MEM</span><span class="w"> </span>â”‚<span class="w"> </span><span class="nv">WB</span><span class="w">  </span>â”‚<span class="w"> </span><span class="nv">I1</span>
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚<span class="w"> </span><span class="k">IF</span><span class="w">  </span>â”‚<span class="w"> </span><span class="nv">ID</span><span class="w">  </span>â”‚<span class="w"> </span><span class="nv">EX</span><span class="w">  </span>â”‚<span class="w"> </span><span class="nv">MEM</span><span class="w"> </span>â”‚<span class="w"> </span><span class="nv">WB</span><span class="w">  </span>â”‚<span class="w"> </span><span class="nv">I2</span>
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
<span class="w">      </span>â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
<span class="w">      </span>â”‚<span class="w"> </span><span class="k">IF</span><span class="w">  </span>â”‚<span class="w"> </span><span class="nv">ID</span><span class="w">  </span>â”‚<span class="w"> </span><span class="nv">EX</span><span class="w">  </span>â”‚<span class="w"> </span><span class="nv">MEM</span><span class="w"> </span>â”‚<span class="w"> </span><span class="nv">WB</span><span class="w">  </span>â”‚<span class="w"> </span><span class="nv">I3</span>
<span class="w">      </span>â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
<span class="w">      </span>â”‚<span class="w"> </span><span class="k">IF</span><span class="w">  </span>â”‚<span class="w"> </span><span class="nv">ID</span><span class="w">  </span>â”‚<span class="w"> </span><span class="nv">EX</span><span class="w">  </span>â”‚<span class="w"> </span><span class="nv">MEM</span><span class="w"> </span>â”‚<span class="w"> </span><span class="nv">WB</span><span class="w">  </span>â”‚<span class="w"> </span><span class="nv">I4</span>
<span class="w">      </span>â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="22-superscalar-structure">2.2 Superscalar Structure<a class="header-link" href="#22-superscalar-structure" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     4-way Superscalar Processor                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Instruction Fetch Unit                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚    PC    â”‚â”€â”€â”€â†’â”‚  Instruction Cache (I-Cache)      â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚                              â”‚                            â”‚   â”‚
â”‚  â”‚                    4 instructions/cycle                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                â”‚                                 â”‚
â”‚                                â–¼                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Instruction Decode Unit                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚   â”‚
â”‚  â”‚  â”‚Decoder1â”‚  â”‚Decoder2â”‚  â”‚Decoder3â”‚  â”‚Decoder4â”‚         â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                â”‚                                 â”‚
â”‚                                â–¼                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Issue Unit                             â”‚   â”‚
â”‚  â”‚          (Dependence checking and execution unit alloc)   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                â”‚                                 â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚        â–¼           â–¼          â–¼          â–¼           â–¼         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ALU 1   â”‚â”‚  ALU 2   â”‚â”‚  FPU     â”‚â”‚  Load    â”‚â”‚  Store   â”‚  â”‚
â”‚  â”‚          â”‚â”‚          â”‚â”‚          â”‚â”‚  Unit    â”‚â”‚  Unit    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚        â”‚           â”‚          â”‚          â”‚           â”‚         â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                â”‚                                 â”‚
â”‚                                â–¼                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Write-back / Commit                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="23-issue-policies">2.3 Issue Policies<a class="header-link" href="#23-issue-policies" title="Permanent link">&para;</a></h3>
<h4 id="in-order-issue">In-Order Issue<a class="header-link" href="#in-order-issue" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nt">Instructions</span><span class="w"> </span><span class="nt">issued</span><span class="w"> </span><span class="nt">to</span><span class="w"> </span><span class="nt">execution</span><span class="w"> </span><span class="nt">units</span><span class="w"> </span><span class="nt">in</span><span class="w"> </span><span class="nt">program</span><span class="w"> </span><span class="nt">order</span>

<span class="nt">Program</span><span class="o">:</span>
<span class="nt">I1</span><span class="o">:</span><span class="w"> </span><span class="nt">ADD</span><span class="w"> </span><span class="nt">R1</span><span class="o">,</span><span class="w"> </span><span class="nt">R2</span><span class="o">,</span><span class="w"> </span><span class="nt">R3</span>
<span class="nt">I2</span><span class="o">:</span><span class="w"> </span><span class="nt">MUL</span><span class="w"> </span><span class="nt">R4</span><span class="o">,</span><span class="w"> </span><span class="nt">R1</span><span class="o">,</span><span class="w"> </span><span class="nt">R5</span><span class="w">    </span><span class="o">;</span><span class="w"> </span><span class="nt">Depends</span><span class="w"> </span><span class="nt">on</span><span class="w"> </span><span class="nt">I1</span><span class="w"> </span><span class="o">(</span><span class="nt">stall</span><span class="o">)</span>
<span class="nt">I3</span><span class="o">:</span><span class="w"> </span><span class="nt">SUB</span><span class="w"> </span><span class="nt">R6</span><span class="o">,</span><span class="w"> </span><span class="nt">R7</span><span class="o">,</span><span class="w"> </span><span class="nt">R8</span><span class="w">    </span><span class="o">;</span><span class="w"> </span><span class="nt">Independent</span><span class="w"> </span><span class="nt">but</span><span class="w"> </span><span class="nt">waits</span><span class="w"> </span><span class="nt">behind</span><span class="w"> </span><span class="nt">I2</span>

<span class="nt">Timeline</span><span class="o">:</span>
<span class="nt">Cycle</span><span class="w"> </span><span class="nt">1</span><span class="o">:</span><span class="w"> </span><span class="nt">Issue</span><span class="w"> </span><span class="nt">I1</span>
<span class="nt">Cycle</span><span class="w"> </span><span class="nt">2</span><span class="o">:</span><span class="w"> </span><span class="nt">I1</span><span class="w"> </span><span class="nt">executing</span><span class="o">,</span><span class="w"> </span><span class="nt">I2</span><span class="w"> </span><span class="nt">waiting</span><span class="w"> </span><span class="o">(</span><span class="nt">RAW</span><span class="w"> </span><span class="nt">hazard</span><span class="o">)</span>
<span class="nt">Cycle</span><span class="w"> </span><span class="nt">3</span><span class="o">:</span><span class="w"> </span><span class="nt">Issue</span><span class="w"> </span><span class="nt">I2</span><span class="w"> </span><span class="o">(</span><span class="nt">after</span><span class="w"> </span><span class="nt">I1</span><span class="w"> </span><span class="nt">completes</span><span class="o">)</span>
<span class="nt">Cycle</span><span class="w"> </span><span class="nt">4</span><span class="o">:</span><span class="w"> </span><span class="nt">Issue</span><span class="w"> </span><span class="nt">I3</span>

<span class="nt">Problem</span><span class="o">:</span><span class="w"> </span><span class="nt">I3</span><span class="w"> </span><span class="nt">is</span><span class="w"> </span><span class="nt">independent</span><span class="w"> </span><span class="nt">but</span><span class="w"> </span><span class="nt">delayed</span><span class="w"> </span><span class="nt">by</span><span class="w"> </span><span class="nt">I2</span>
</code></pre></div>

<h4 id="out-of-order-issue">Out-of-Order Issue<a class="header-link" href="#out-of-order-issue" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="n">Independent</span><span class="w"> </span><span class="n">instructions</span><span class="w"> </span><span class="n">issued</span><span class="w"> </span><span class="n">regardless</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">order</span>

<span class="nl">Program:</span>
<span class="nl">I1:</span><span class="w"> </span><span class="n">ADD</span><span class="w"> </span><span class="n">R1</span><span class="p">,</span><span class="w"> </span><span class="n">R2</span><span class="p">,</span><span class="w"> </span><span class="n">R3</span>
<span class="nl">I2:</span><span class="w"> </span><span class="n">MUL</span><span class="w"> </span><span class="n">R4</span><span class="p">,</span><span class="w"> </span><span class="n">R1</span><span class="p">,</span><span class="w"> </span><span class="n">R5</span><span class="w">    </span><span class="p">;</span><span class="w"> </span><span class="n">Depends</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">I1</span>
<span class="nl">I3:</span><span class="w"> </span><span class="n">SUB</span><span class="w"> </span><span class="n">R6</span><span class="p">,</span><span class="w"> </span><span class="n">R7</span><span class="p">,</span><span class="w"> </span><span class="n">R8</span><span class="w">    </span><span class="p">;</span><span class="w"> </span><span class="n">Independent</span>

<span class="nl">Timeline:</span>
<span class="n">Cycle</span><span class="w"> </span><span class="mh">1</span><span class="o">:</span><span class="w"> </span><span class="n">Issue</span><span class="w"> </span><span class="n">I1</span><span class="p">,</span><span class="w"> </span><span class="n">I3</span><span class="w"> </span><span class="p">(</span><span class="n">simultaneous</span><span class="p">)</span>
<span class="n">Cycle</span><span class="w"> </span><span class="mh">2</span><span class="o">:</span><span class="w"> </span><span class="n">I1</span><span class="w"> </span><span class="n">completes</span><span class="p">,</span><span class="w"> </span><span class="n">Issue</span><span class="w"> </span><span class="n">I2</span>
<span class="n">Cycle</span><span class="w"> </span><span class="mh">3</span><span class="o">:</span><span class="w"> </span><span class="n">I2</span><span class="w"> </span><span class="n">executing</span>

<span class="n">Performance</span><span class="w"> </span><span class="nl">gain:</span><span class="w"> </span><span class="n">I3</span><span class="w"> </span><span class="n">doesn</span><span class="p">&#39;</span><span class="n">t</span><span class="w"> </span><span class="k">wait</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">I2</span>
</code></pre></div>

<h3 id="24-diverse-execution-units">2.4 Diverse Execution Units<a class="header-link" href="#24-diverse-execution-units" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>Modern processor execution units example:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Execution Units (Intel Core)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Port 0         â”‚ ALU, FP MUL, FP DIV, Branch    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Port 1         â”‚ ALU, FP ADD, LEA               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Port 2         â”‚ Load (Address Gen)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Port 3         â”‚ Load (Address Gen)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Port 4         â”‚ Store Data                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Port 5         â”‚ ALU, Vector Shuffle, Branch    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Port 6         â”‚ ALU, Branch                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Port 7         â”‚ Store (Address Gen)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Total: 8 ports, max 8 micro-ops per cycle
</code></pre></div>

<hr />
<h2 id="3-need-for-out-of-order-execution">3. Need for Out-of-Order Execution<a class="header-link" href="#3-need-for-out-of-order-execution" title="Permanent link">&para;</a></h2>
<h3 id="31-limitations-of-in-order-execution">3.1 Limitations of In-Order Execution<a class="header-link" href="#31-limitations-of-in-order-execution" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Program</span><span class="o">:</span>
<span class="n">I1</span><span class="o">:</span><span class="w"> </span><span class="n">LD</span><span class="w">   </span><span class="n">R1</span><span class="o">,</span><span class="w"> </span><span class="mi">0</span><span class="o">(</span><span class="n">R10</span><span class="o">)</span><span class="w">     </span><span class="o">;</span><span class="w"> </span><span class="n">Cache</span><span class="w"> </span><span class="n">miss</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="n">cycles</span>
<span class="n">I2</span><span class="o">:</span><span class="w"> </span><span class="n">ADD</span><span class="w">  </span><span class="n">R2</span><span class="o">,</span><span class="w"> </span><span class="n">R1</span><span class="o">,</span><span class="w"> </span><span class="n">R3</span><span class="w">     </span><span class="o">;</span><span class="w"> </span><span class="n">Depends</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">I1</span>
<span class="n">I3</span><span class="o">:</span><span class="w"> </span><span class="n">LD</span><span class="w">   </span><span class="n">R4</span><span class="o">,</span><span class="w"> </span><span class="mi">8</span><span class="o">(</span><span class="n">R10</span><span class="o">)</span><span class="w">     </span><span class="o">;</span><span class="w"> </span><span class="n">Independent</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">cache</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">cycles</span>
<span class="n">I4</span><span class="o">:</span><span class="w"> </span><span class="n">MUL</span><span class="w">  </span><span class="n">R5</span><span class="o">,</span><span class="w"> </span><span class="n">R4</span><span class="o">,</span><span class="w"> </span><span class="n">R6</span><span class="w">     </span><span class="o">;</span><span class="w"> </span><span class="n">Depends</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">I3</span>
<span class="n">I5</span><span class="o">:</span><span class="w"> </span><span class="n">ADD</span><span class="w">  </span><span class="n">R7</span><span class="o">,</span><span class="w"> </span><span class="n">R8</span><span class="o">,</span><span class="w"> </span><span class="n">R9</span><span class="w">     </span><span class="o">;</span><span class="w"> </span><span class="n">Completely</span><span class="w"> </span><span class="n">independent</span>

<span class="n">In</span><span class="o">-</span><span class="n">Order</span><span class="w"> </span><span class="n">Execution</span><span class="o">:</span>
<span class="n">Cycle</span><span class="w"> </span><span class="mi">1</span><span class="o">-</span><span class="mi">100</span><span class="o">:</span><span class="w"> </span><span class="n">I1</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="o">(</span><span class="n">cache</span><span class="w"> </span><span class="n">miss</span><span class="w"> </span><span class="n">wait</span><span class="o">)</span>
<span class="n">Cycle</span><span class="w"> </span><span class="mi">101</span><span class="o">:</span><span class="w">   </span><span class="n">I2</span><span class="w"> </span><span class="n">executes</span>
<span class="n">Cycle</span><span class="w"> </span><span class="mi">102</span><span class="o">-</span><span class="mi">105</span><span class="o">:</span><span class="w"> </span><span class="n">I3</span><span class="w"> </span><span class="n">executes</span>
<span class="n">Cycle</span><span class="w"> </span><span class="mi">106</span><span class="o">:</span><span class="w">   </span><span class="n">I4</span><span class="w"> </span><span class="n">executes</span>
<span class="n">Cycle</span><span class="w"> </span><span class="mi">107</span><span class="o">:</span><span class="w">   </span><span class="n">I5</span><span class="w"> </span><span class="n">executes</span>

<span class="n">Total</span><span class="o">:</span><span class="w"> </span><span class="mi">107</span><span class="w"> </span><span class="n">cycles</span>

<span class="n">Out</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">Order</span><span class="w"> </span><span class="n">Execution</span><span class="o">:</span>
<span class="n">Cycle</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="w">     </span><span class="n">I1</span><span class="w"> </span><span class="n">starts</span><span class="w"> </span><span class="o">(</span><span class="n">cache</span><span class="w"> </span><span class="n">miss</span><span class="o">)</span>
<span class="n">Cycle</span><span class="w"> </span><span class="mi">2</span><span class="o">-</span><span class="mi">5</span><span class="o">:</span><span class="w">   </span><span class="n">I3</span><span class="w"> </span><span class="n">executes</span><span class="w"> </span><span class="o">(</span><span class="n">parallel</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">I1</span><span class="o">)</span>
<span class="n">Cycle</span><span class="w"> </span><span class="mi">6</span><span class="o">:</span><span class="w">     </span><span class="n">I4</span><span class="w"> </span><span class="n">executes</span>
<span class="n">Cycle</span><span class="w"> </span><span class="mi">7</span><span class="o">:</span><span class="w">     </span><span class="n">I5</span><span class="w"> </span><span class="n">executes</span>
<span class="o">...</span>
<span class="n">Cycle</span><span class="w"> </span><span class="mi">100</span><span class="o">:</span><span class="w">   </span><span class="n">I1</span><span class="w"> </span><span class="n">completes</span>
<span class="n">Cycle</span><span class="w"> </span><span class="mi">101</span><span class="o">:</span><span class="w">   </span><span class="n">I2</span><span class="w"> </span><span class="n">executes</span>

<span class="n">Total</span><span class="o">:</span><span class="w"> </span><span class="mi">101</span><span class="w"> </span><span class="n">cycles</span>

<span class="n">Speedup</span><span class="o">:</span><span class="w"> </span><span class="mi">107</span><span class="o">/</span><span class="mi">101</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.06</span><span class="n">x</span><span class="w"> </span><span class="o">(</span><span class="n">simple</span><span class="w"> </span><span class="n">example</span><span class="o">)</span>
<span class="n">Actual</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">much</span><span class="w"> </span><span class="n">larger</span>
</code></pre></div>

<h3 id="32-three-stages-of-ooo-execution">3.2 Three Stages of OoO Execution<a class="header-link" href="#32-three-stages-of-ooo-execution" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">              </span><span class="n">Out</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">Order</span><span class="w"> </span><span class="n">Execution</span><span class="w"> </span><span class="n">Pipeline</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">In</span><span class="o">-</span><span class="n">Order</span><span class="w">       </span><span class="n">Out</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">Order</span><span class="w">       </span><span class="n">In</span><span class="o">-</span><span class="n">Order</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">Front</span><span class="o">-</span><span class="k">end</span><span class="w">      </span><span class="n">Execution</span><span class="w">          </span><span class="n">Back</span><span class="o">-</span><span class="k">end</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">    </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">    </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Fetch</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Issue</span><span class="o">/</span><span class="w">      </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Commit</span><span class="o">/</span><span class="w">     </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Decode</span><span class="w">  </span><span class="err">â”‚â”€â”€â”€â†’â”‚</span><span class="w"> </span><span class="n">Execute</span><span class="w">     </span><span class="err">â”‚â”€â”€â”€â†’â”‚</span><span class="w"> </span><span class="n">Retire</span><span class="w">      </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Rename</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="p">(</span><span class="n">OoO</span><span class="p">)</span><span class="w">       </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="p">(</span><span class="n">In</span><span class="o">-</span><span class="n">Order</span><span class="p">)</span><span class="w">  </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">    </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">    </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Program</span><span class="w"> </span><span class="n">order</span><span class="w">   </span><span class="n">Data</span><span class="w"> </span><span class="n">flow</span><span class="w"> </span><span class="n">order</span><span class="w">    </span><span class="n">Program</span><span class="w"> </span><span class="n">order</span><span class="w">           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                              </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="n">Stage</span><span class="w"> </span><span class="mh">1</span><span class="o">:</span><span class="w"> </span><span class="n">Front</span><span class="o">-</span><span class="k">end</span><span class="w"> </span><span class="p">(</span><span class="n">In</span><span class="o">-</span><span class="n">Order</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">Instruction</span><span class="w"> </span><span class="n">fetch</span><span class="p">,</span><span class="w"> </span><span class="n">decode</span>
<span class="o">-</span><span class="w"> </span><span class="n">Register</span><span class="w"> </span><span class="n">renaming</span>
<span class="o">-</span><span class="w"> </span><span class="n">Insert</span><span class="w"> </span><span class="n">instructions</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">Issue</span><span class="w"> </span><span class="n">Queue</span>

<span class="n">Stage</span><span class="w"> </span><span class="mh">2</span><span class="o">:</span><span class="w"> </span><span class="n">Execution</span><span class="w"> </span><span class="p">(</span><span class="n">Out</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">Order</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">Execute</span><span class="w"> </span><span class="n">instructions</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">operands</span><span class="w"> </span><span class="n">ready</span>
<span class="o">-</span><span class="w"> </span><span class="n">Execution</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">determined</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">dependencies</span>
<span class="o">-</span><span class="w"> </span><span class="n">Parallel</span><span class="w"> </span><span class="n">execution</span><span class="w"> </span><span class="n">across</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="n">units</span>

<span class="n">Stage</span><span class="w"> </span><span class="mh">3</span><span class="o">:</span><span class="w"> </span><span class="n">Back</span><span class="o">-</span><span class="k">end</span><span class="w"> </span><span class="p">(</span><span class="n">In</span><span class="o">-</span><span class="n">Order</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">Commit</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">order</span>
<span class="o">-</span><span class="w"> </span><span class="n">Ensures</span><span class="w"> </span><span class="n">precise</span><span class="w"> </span><span class="n">exception</span><span class="w"> </span><span class="n">handling</span>
<span class="o">-</span><span class="w"> </span><span class="n">Update</span><span class="w"> </span><span class="n">architectural</span><span class="w"> </span><span class="n">registers</span>
</code></pre></div>

<hr />
<h2 id="4-register-renaming">4. Register Renaming<a class="header-link" href="#4-register-renaming" title="Permanent link">&para;</a></h2>
<h3 id="41-need-for-renaming">4.1 Need for Renaming<a class="header-link" href="#41-need-for-renaming" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Program</span><span class="o">:</span>
<span class="n">I1</span><span class="o">:</span><span class="w"> </span><span class="n">ADD</span><span class="w"> </span><span class="n">R1</span><span class="o">,</span><span class="w"> </span><span class="n">R2</span><span class="o">,</span><span class="w"> </span><span class="n">R3</span><span class="w">    </span><span class="o">;</span><span class="w"> </span><span class="n">Write</span><span class="w"> </span><span class="n">R1</span>
<span class="n">I2</span><span class="o">:</span><span class="w"> </span><span class="n">MUL</span><span class="w"> </span><span class="n">R4</span><span class="o">,</span><span class="w"> </span><span class="n">R1</span><span class="o">,</span><span class="w"> </span><span class="n">R5</span><span class="w">    </span><span class="o">;</span><span class="w"> </span><span class="n">Read</span><span class="w"> </span><span class="n">R1</span><span class="w"> </span><span class="o">(</span><span class="n">RAW</span><span class="o">)</span>
<span class="n">I3</span><span class="o">:</span><span class="w"> </span><span class="n">ADD</span><span class="w"> </span><span class="n">R1</span><span class="o">,</span><span class="w"> </span><span class="n">R6</span><span class="o">,</span><span class="w"> </span><span class="n">R7</span><span class="w">    </span><span class="o">;</span><span class="w"> </span><span class="n">Write</span><span class="w"> </span><span class="n">R1</span><span class="w"> </span><span class="o">(</span><span class="n">WAW</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">I1</span><span class="o">)</span>
<span class="n">I4</span><span class="o">:</span><span class="w"> </span><span class="n">SUB</span><span class="w"> </span><span class="n">R8</span><span class="o">,</span><span class="w"> </span><span class="n">R1</span><span class="o">,</span><span class="w"> </span><span class="n">R9</span><span class="w">    </span><span class="o">;</span><span class="w"> </span><span class="n">Read</span><span class="w"> </span><span class="n">R1</span><span class="w"> </span><span class="o">(</span><span class="n">RAW</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">I3</span><span class="o">)</span>

<span class="n">Problem</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">I3</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">able</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">independently</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">I1</span><span class="o">,</span><span class="w"> </span><span class="n">I2</span>
<span class="o">-</span><span class="w"> </span><span class="n">But</span><span class="w"> </span><span class="n">they</span><span class="w"> </span><span class="n">share</span><span class="w"> </span><span class="n">R1</span><span class="o">,</span><span class="w"> </span><span class="n">causing</span><span class="w"> </span><span class="n">WAW</span><span class="w"> </span><span class="n">dependence</span>
<span class="o">-</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">I3</span><span class="w"> </span><span class="n">completes</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">I1</span><span class="o">,</span><span class="w"> </span><span class="n">I2</span><span class="w"> </span><span class="n">reads</span><span class="w"> </span><span class="n">wrong</span><span class="w"> </span><span class="n">value</span>
</code></pre></div>

<h3 id="42-renaming-operation">4.2 Renaming Operation<a class="header-link" href="#42-renaming-operation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Architectural</span><span class="w"> </span><span class="nl">Registers:</span><span class="w"> </span><span class="n">R1</span><span class="o">-</span><span class="n">R8</span><span class="w"> </span><span class="p">(</span><span class="n">programmer</span><span class="o">-</span><span class="n">visible</span><span class="p">)</span>
<span class="n">Physical</span><span class="w"> </span><span class="nl">Registers:</span><span class="w"> </span><span class="n">P1</span><span class="o">-</span><span class="n">P64</span><span class="w"> </span><span class="p">(</span><span class="n">actual</span><span class="w"> </span><span class="n">hardware</span><span class="w"> </span><span class="n">registers</span><span class="p">)</span>

<span class="n">Before</span><span class="w"> </span><span class="nl">renaming:</span>
<span class="nl">I1:</span><span class="w"> </span><span class="n">ADD</span><span class="w"> </span><span class="n">R1</span><span class="p">,</span><span class="w"> </span><span class="n">R2</span><span class="p">,</span><span class="w"> </span><span class="n">R3</span>
<span class="nl">I2:</span><span class="w"> </span><span class="n">MUL</span><span class="w"> </span><span class="n">R4</span><span class="p">,</span><span class="w"> </span><span class="n">R1</span><span class="p">,</span><span class="w"> </span><span class="n">R5</span>
<span class="nl">I3:</span><span class="w"> </span><span class="n">ADD</span><span class="w"> </span><span class="n">R1</span><span class="p">,</span><span class="w"> </span><span class="n">R6</span><span class="p">,</span><span class="w"> </span><span class="n">R7</span>
<span class="nl">I4:</span><span class="w"> </span><span class="n">SUB</span><span class="w"> </span><span class="n">R8</span><span class="p">,</span><span class="w"> </span><span class="n">R1</span><span class="p">,</span><span class="w"> </span><span class="n">R9</span>

<span class="n">After</span><span class="w"> </span><span class="nl">renaming:</span>
<span class="nl">I1:</span><span class="w"> </span><span class="n">ADD</span><span class="w"> </span><span class="n">P10</span><span class="p">,</span><span class="w"> </span><span class="n">P2</span><span class="p">,</span><span class="w"> </span><span class="n">P3</span><span class="w">    </span><span class="p">;</span><span class="w"> </span><span class="n">R1</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">P10</span>
<span class="nl">I2:</span><span class="w"> </span><span class="n">MUL</span><span class="w"> </span><span class="n">P11</span><span class="p">,</span><span class="w"> </span><span class="n">P10</span><span class="p">,</span><span class="w"> </span><span class="n">P5</span><span class="w">   </span><span class="p">;</span><span class="w"> </span><span class="n">R4</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">P11</span><span class="p">,</span><span class="w"> </span><span class="n">R1</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">P10</span>
<span class="nl">I3:</span><span class="w"> </span><span class="n">ADD</span><span class="w"> </span><span class="n">P12</span><span class="p">,</span><span class="w"> </span><span class="n">P6</span><span class="p">,</span><span class="w"> </span><span class="n">P7</span><span class="w">    </span><span class="p">;</span><span class="w"> </span><span class="n">R1</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">P12</span><span class="w"> </span><span class="p">(</span><span class="n">new</span><span class="w"> </span><span class="n">physical</span><span class="w"> </span><span class="n">register</span><span class="o">!</span><span class="p">)</span>
<span class="nl">I4:</span><span class="w"> </span><span class="n">SUB</span><span class="w"> </span><span class="n">P13</span><span class="p">,</span><span class="w"> </span><span class="n">P12</span><span class="p">,</span><span class="w"> </span><span class="n">P9</span><span class="w">   </span><span class="p">;</span><span class="w"> </span><span class="n">R8</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">P13</span><span class="p">,</span><span class="w"> </span><span class="n">R1</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">P12</span>

<span class="nl">Result:</span>
<span class="o">-</span><span class="w"> </span><span class="n">WAW</span><span class="w"> </span><span class="n">dependence</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="n">I1</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">I3</span><span class="w"> </span><span class="n">eliminated</span><span class="w"> </span><span class="p">(</span><span class="n">different</span><span class="w"> </span><span class="n">physical</span><span class="w"> </span><span class="n">regs</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">I2</span><span class="w"> </span><span class="n">reads</span><span class="w"> </span><span class="n">P10</span><span class="w"> </span><span class="p">(</span><span class="n">I1</span><span class="p">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">result</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">I4</span><span class="w"> </span><span class="n">reads</span><span class="w"> </span><span class="n">P12</span><span class="w"> </span><span class="p">(</span><span class="n">I3</span><span class="p">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">result</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">I1</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">I3</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">parallel</span><span class="o">!</span>
</code></pre></div>

<h3 id="43-register-alias-table-rat">4.3 Register Alias Table (RAT)<a class="header-link" href="#43-register-alias-table-rat" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">              </span><span class="n">Register</span><span class="w"> </span><span class="n">Alias</span><span class="w"> </span><span class="n">Table</span><span class="w"> </span><span class="p">(</span><span class="n">RAT</span><span class="p">)</span><span class="w">                  </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Architectural</span><span class="w"> </span><span class="n">Reg</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Physical</span><span class="w"> </span><span class="n">Reg</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Valid</span><span class="w">           </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">        </span><span class="n">R0</span><span class="w">           </span><span class="err">â”‚</span><span class="w">      </span><span class="n">P0</span><span class="w">        </span><span class="err">â”‚</span><span class="w">    </span><span class="mh">1</span><span class="w">             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">        </span><span class="n">R1</span><span class="w">           </span><span class="err">â”‚</span><span class="w">      </span><span class="n">P12</span><span class="w">       </span><span class="err">â”‚</span><span class="w">    </span><span class="mh">0</span><span class="w"> </span><span class="p">(</span><span class="n">pending</span><span class="p">)</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">        </span><span class="n">R2</span><span class="w">           </span><span class="err">â”‚</span><span class="w">      </span><span class="n">P2</span><span class="w">        </span><span class="err">â”‚</span><span class="w">    </span><span class="mh">1</span><span class="w">             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">        </span><span class="n">R3</span><span class="w">           </span><span class="err">â”‚</span><span class="w">      </span><span class="n">P3</span><span class="w">        </span><span class="err">â”‚</span><span class="w">    </span><span class="mh">1</span><span class="w">             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">        </span><span class="n">R4</span><span class="w">           </span><span class="err">â”‚</span><span class="w">      </span><span class="n">P11</span><span class="w">       </span><span class="err">â”‚</span><span class="w">    </span><span class="mh">0</span><span class="w"> </span><span class="p">(</span><span class="n">pending</span><span class="p">)</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">        </span><span class="n">R5</span><span class="w">           </span><span class="err">â”‚</span><span class="w">      </span><span class="n">P5</span><span class="w">        </span><span class="err">â”‚</span><span class="w">    </span><span class="mh">1</span><span class="w">             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">        </span><span class="n">R6</span><span class="w">           </span><span class="err">â”‚</span><span class="w">      </span><span class="n">P6</span><span class="w">        </span><span class="err">â”‚</span><span class="w">    </span><span class="mh">1</span><span class="w">             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">        </span><span class="n">R7</span><span class="w">           </span><span class="err">â”‚</span><span class="w">      </span><span class="n">P7</span><span class="w">        </span><span class="err">â”‚</span><span class="w">    </span><span class="mh">1</span><span class="w">             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">        </span><span class="n">R8</span><span class="w">           </span><span class="err">â”‚</span><span class="w">      </span><span class="n">P13</span><span class="w">       </span><span class="err">â”‚</span><span class="w">    </span><span class="mh">0</span><span class="w"> </span><span class="p">(</span><span class="n">pending</span><span class="p">)</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">        </span><span class="p">...</span><span class="w">          </span><span class="err">â”‚</span><span class="w">      </span><span class="p">...</span><span class="w">       </span><span class="err">â”‚</span><span class="w">    </span><span class="p">...</span><span class="w">           </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="n">Free</span><span class="w"> </span><span class="nl">List:</span><span class="w"> </span><span class="n">P14</span><span class="p">,</span><span class="w"> </span><span class="n">P15</span><span class="p">,</span><span class="w"> </span><span class="n">P16</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="w">  </span><span class="p">(</span><span class="n">available</span><span class="w"> </span><span class="n">physical</span><span class="w"> </span><span class="n">registers</span><span class="p">)</span>
</code></pre></div>

<h3 id="44-renaming-algorithm">4.4 Renaming Algorithm<a class="header-link" href="#44-renaming-algorithm" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Renaming</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="p">(</span><span class="nl">instruction</span><span class="p">:</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="n">Rd</span><span class="p">,</span><span class="w"> </span><span class="n">Rs1</span><span class="p">,</span><span class="w"> </span><span class="n">Rs2</span><span class="p">)</span><span class="err">:</span>

<span class="mf">1.</span><span class="w"> </span><span class="n">Source</span><span class="w"> </span><span class="n">register</span><span class="w"> </span><span class="nl">renaming</span><span class="p">:</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Look</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">physical</span><span class="w"> </span><span class="n">registers</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Rs1</span><span class="p">,</span><span class="w"> </span><span class="n">Rs2</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">RAT</span>

<span class="mf">2.</span><span class="w"> </span><span class="n">Destination</span><span class="w"> </span><span class="n">register</span><span class="w"> </span><span class="nl">renaming</span><span class="p">:</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="k">Allocate</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">physical</span><span class="w"> </span><span class="n">register</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="k">Free</span><span class="w"> </span><span class="n">List</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="k">Update</span><span class="w"> </span><span class="n">RAT</span><span class="w"> </span><span class="n">mapping</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Rd</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">physical</span><span class="w"> </span><span class="n">register</span>

<span class="mf">3.</span><span class="w"> </span><span class="n">Record</span><span class="w"> </span><span class="n">dependence</span><span class="w"> </span><span class="nl">info</span><span class="p">:</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="k">Check</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="n">physical</span><span class="w"> </span><span class="n">registers</span><span class="w"> </span><span class="k">are</span><span class="w"> </span><span class="n">still</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">produced</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Establish</span><span class="w"> </span><span class="n">links</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">producer</span><span class="w"> </span><span class="n">instructions</span>

<span class="nl">Example</span><span class="p">:</span>
<span class="nl">Instruction</span><span class="p">:</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="n">R1</span><span class="p">,</span><span class="w"> </span><span class="n">R2</span><span class="p">,</span><span class="w"> </span><span class="n">R3</span>

<span class="k">Before</span><span class="err">:</span>
<span class="w">  </span><span class="n">RAT</span><span class="o">[</span><span class="n">R1</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P5</span><span class="p">,</span><span class="w"> </span><span class="n">RAT</span><span class="o">[</span><span class="n">R2</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P2</span><span class="p">,</span><span class="w"> </span><span class="n">RAT</span><span class="o">[</span><span class="n">R3</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P3</span>
<span class="w">  </span><span class="k">Free</span><span class="w"> </span><span class="nl">List</span><span class="p">:</span><span class="w"> </span><span class="n">P10</span><span class="p">,</span><span class="w"> </span><span class="n">P11</span><span class="p">,</span><span class="w"> </span><span class="n">P12</span><span class="p">,</span><span class="w"> </span><span class="p">...</span>

<span class="nl">Renaming</span><span class="p">:</span>
<span class="w">  </span><span class="mf">1.</span><span class="w"> </span><span class="n">Rs1</span><span class="p">(</span><span class="n">R2</span><span class="p">)</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">P2</span><span class="p">,</span><span class="w"> </span><span class="n">Rs2</span><span class="p">(</span><span class="n">R3</span><span class="p">)</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">P3</span>
<span class="w">  </span><span class="mf">2.</span><span class="w"> </span><span class="n">Rd</span><span class="p">(</span><span class="n">R1</span><span class="p">)</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">P10</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">allocation</span><span class="p">)</span>
<span class="w">  </span><span class="mf">3.</span><span class="w"> </span><span class="n">RAT</span><span class="o">[</span><span class="n">R1</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P10</span>

<span class="k">After</span><span class="err">:</span>
<span class="w">  </span><span class="n">RAT</span><span class="o">[</span><span class="n">R1</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P10</span><span class="p">,</span><span class="w"> </span><span class="n">RAT</span><span class="o">[</span><span class="n">R2</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P2</span><span class="p">,</span><span class="w"> </span><span class="n">RAT</span><span class="o">[</span><span class="n">R3</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P3</span>
<span class="w">  </span><span class="k">Free</span><span class="w"> </span><span class="nl">List</span><span class="p">:</span><span class="w"> </span><span class="n">P11</span><span class="p">,</span><span class="w"> </span><span class="n">P12</span><span class="p">,</span><span class="w"> </span><span class="p">...</span>

<span class="n">Renamed</span><span class="w"> </span><span class="nl">instruction</span><span class="p">:</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="n">P10</span><span class="p">,</span><span class="w"> </span><span class="n">P2</span><span class="p">,</span><span class="w"> </span><span class="n">P3</span>
</code></pre></div>

<hr />
<h2 id="5-tomasulo-algorithm">5. Tomasulo Algorithm<a class="header-link" href="#5-tomasulo-algorithm" title="Permanent link">&para;</a></h2>
<h3 id="51-background">5.1 Background<a class="header-link" href="#51-background" title="Permanent link">&para;</a></h3>
<p>Algorithm developed by Robert Tomasulo in 1967 for the IBM 360/91 floating-point unit. Forms the basis of modern out-of-order execution processors.</p>
<h3 id="52-key-components">5.2 Key Components<a class="header-link" href="#52-key-components" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Tomasulo Architecture                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   Instruction Queue                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                   â”‚
â”‚                              â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   Issue Logic                             â”‚   â”‚
â”‚  â”‚            (Reservation Station allocation)               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                   â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚            â–¼                                   â–¼                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Reservation Stations â”‚          â”‚  Reservation Stationsâ”‚    â”‚
â”‚  â”‚      (Add/Sub)        â”‚          â”‚      (Mul/Div)       â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ RS1: Op Vj Vk Qj Qk  â”‚          â”‚ RS4: Op Vj Vk Qj Qk  â”‚    â”‚
â”‚  â”‚ RS2: Op Vj Vk Qj Qk  â”‚          â”‚ RS5: Op Vj Vk Qj Qk  â”‚    â”‚
â”‚  â”‚ RS3: Op Vj Vk Qj Qk  â”‚          â”‚ RS6: Op Vj Vk Qj Qk  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚             â”‚                                  â”‚                â”‚
â”‚             â–¼                                  â–¼                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚      FP Adder        â”‚          â”‚     FP Multiplier    â”‚    â”‚
â”‚  â”‚    (2 cycles)        â”‚          â”‚     (10 cycles)      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚             â”‚                                  â”‚                â”‚
â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                               â”‚                                  â”‚
â”‚                               â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   Common Data Bus (CDB)                   â”‚   â”‚
â”‚  â”‚               (Result broadcast)                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                               â”‚                                  â”‚
â”‚                               â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   Register File                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="53-reservation-station-structure">5.3 Reservation Station Structure<a class="header-link" href="#53-reservation-station-structure" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">              </span><span class="nx">Reservation</span><span class="w"> </span><span class="nx">Station</span><span class="w"> </span><span class="nx">Entry</span><span class="w">                       </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nx">Busy</span><span class="w"> </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Op</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Vj</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Vk</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Qj</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Qk</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">A</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">Dest</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">1</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">ADD</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="m m-Double">3.5</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">RS4</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="nx">F2</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="nx">Field</span><span class="w"> </span><span class="nx">descriptions</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Busy</span><span class="p">:</span><span class="w"> </span><span class="nx">Entry</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nx">use</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Op</span><span class="p">:</span><span class="w"> </span><span class="nx">Operation</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">perform</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Vj</span><span class="p">,</span><span class="w"> </span><span class="nx">Vk</span><span class="p">:</span><span class="w"> </span><span class="nx">Source</span><span class="w"> </span><span class="nx">operand</span><span class="w"> </span><span class="nx">values</span><span class="w"> </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="nx">already</span><span class="w"> </span><span class="nx">available</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Qj</span><span class="p">,</span><span class="w"> </span><span class="nx">Qk</span><span class="p">:</span><span class="w"> </span><span class="nx">RS</span><span class="w"> </span><span class="nx">that</span><span class="w"> </span><span class="nx">will</span><span class="w"> </span><span class="nx">produce</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">ready</span><span class="w"> </span><span class="nx">yet</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="nx">A</span><span class="p">:</span><span class="w"> </span><span class="nx">Memory</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="p">(</span><span class="k">for</span><span class="w"> </span><span class="nx">Load</span><span class="o">/</span><span class="nx">Store</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Dest</span><span class="p">:</span><span class="w"> </span><span class="nx">Destination</span><span class="w"> </span><span class="nx">register</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">result</span>
</code></pre></div>

<h3 id="54-operation-process">5.4 Operation Process<a class="header-link" href="#54-operation-process" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>Three-stage processing:

1. Issue
   - Get instruction from Instruction Queue
   - Allocate appropriate Reservation Station
   - Record operand values or producer RS tags

2. Execute
   - Start execution when all operands ready
   - Execute when Qj = 0 AND Qk = 0
   - Perform operation in execution unit

3. Write Result
   - Broadcast result via CDB
   - Waiting RSs receive result
   - Update Register File
</code></pre></div>

<h3 id="55-example-tomasulo-execution-trace">5.5 Example: Tomasulo Execution Trace<a class="header-link" href="#55-example-tomasulo-execution-trace" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nl">Program</span><span class="p">:</span>
<span class="nl">I1</span><span class="p">:</span><span class="w"> </span><span class="n">LD</span><span class="w">   </span><span class="n">F6</span><span class="p">,</span><span class="w"> </span><span class="mi">34</span><span class="p">(</span><span class="n">R2</span><span class="p">)</span>
<span class="nl">I2</span><span class="p">:</span><span class="w"> </span><span class="n">LD</span><span class="w">   </span><span class="n">F2</span><span class="p">,</span><span class="w"> </span><span class="mi">45</span><span class="p">(</span><span class="n">R3</span><span class="p">)</span>
<span class="nl">I3</span><span class="p">:</span><span class="w"> </span><span class="n">MUL</span><span class="w">  </span><span class="n">F0</span><span class="p">,</span><span class="w"> </span><span class="n">F2</span><span class="p">,</span><span class="w"> </span><span class="n">F4</span>
<span class="nl">I4</span><span class="p">:</span><span class="w"> </span><span class="n">SUB</span><span class="w">  </span><span class="n">F8</span><span class="p">,</span><span class="w"> </span><span class="n">F6</span><span class="p">,</span><span class="w"> </span><span class="n">F2</span>
<span class="nl">I5</span><span class="p">:</span><span class="w"> </span><span class="n">DIV</span><span class="w">  </span><span class="n">F10</span><span class="p">,</span><span class="w"> </span><span class="n">F0</span><span class="p">,</span><span class="w"> </span><span class="n">F6</span>
<span class="nl">I6</span><span class="p">:</span><span class="w"> </span><span class="k">ADD</span><span class="w">  </span><span class="n">F6</span><span class="p">,</span><span class="w"> </span><span class="n">F8</span><span class="p">,</span><span class="w"> </span><span class="n">F2</span>

<span class="n">Initial</span><span class="w"> </span><span class="k">state</span><span class="err">:</span>
<span class="w">  </span><span class="n">F4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2.5</span><span class="w"> </span><span class="p">(</span><span class="n">available</span><span class="p">)</span>
<span class="w">  </span><span class="k">Load</span><span class="err">:</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">cycles</span><span class="p">,</span><span class="w"> </span><span class="nl">Mul</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="n">cycles</span><span class="p">,</span><span class="w"> </span><span class="k">Add</span><span class="o">/</span><span class="nl">Sub</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">cycles</span><span class="p">,</span><span class="w"> </span><span class="nl">Div</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="n">cycles</span>

<span class="o">===</span><span class="w"> </span><span class="k">Cycle</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">===</span>
<span class="n">Issue</span><span class="w"> </span><span class="nl">I1</span><span class="p">:</span><span class="w"> </span><span class="n">LD</span><span class="w"> </span><span class="n">F6</span><span class="p">,</span><span class="w"> </span><span class="mi">34</span><span class="p">(</span><span class="n">R2</span><span class="p">)</span>
<span class="w">  </span><span class="nl">Load1</span><span class="p">:</span><span class="w"> </span><span class="n">Busy</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">A</span><span class="o">=</span><span class="mi">34</span><span class="o">+</span><span class="n">R2</span><span class="p">,</span><span class="w"> </span><span class="n">Dest</span><span class="o">=</span><span class="n">F6</span>
<span class="w">  </span><span class="n">Register</span><span class="o">[</span><span class="n">F6</span><span class="o">]</span><span class="err">:</span><span class="w"> </span><span class="n">Qi</span><span class="o">=</span><span class="n">Load1</span>

<span class="o">===</span><span class="w"> </span><span class="k">Cycle</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">===</span>
<span class="n">Issue</span><span class="w"> </span><span class="nl">I2</span><span class="p">:</span><span class="w"> </span><span class="n">LD</span><span class="w"> </span><span class="n">F2</span><span class="p">,</span><span class="w"> </span><span class="mi">45</span><span class="p">(</span><span class="n">R3</span><span class="p">)</span>
<span class="w">  </span><span class="nl">Load2</span><span class="p">:</span><span class="w"> </span><span class="n">Busy</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">A</span><span class="o">=</span><span class="mi">45</span><span class="o">+</span><span class="n">R3</span><span class="p">,</span><span class="w"> </span><span class="n">Dest</span><span class="o">=</span><span class="n">F2</span>
<span class="w">  </span><span class="n">Register</span><span class="o">[</span><span class="n">F2</span><span class="o">]</span><span class="err">:</span><span class="w"> </span><span class="n">Qi</span><span class="o">=</span><span class="n">Load2</span>
<span class="k">Execute</span><span class="w"> </span><span class="nl">I1</span><span class="p">:</span><span class="w"> </span><span class="n">Memory</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">starts</span>

<span class="o">===</span><span class="w"> </span><span class="k">Cycle</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">===</span>
<span class="n">Issue</span><span class="w"> </span><span class="nl">I3</span><span class="p">:</span><span class="w"> </span><span class="n">MUL</span><span class="w"> </span><span class="n">F0</span><span class="p">,</span><span class="w"> </span><span class="n">F2</span><span class="p">,</span><span class="w"> </span><span class="n">F4</span>
<span class="w">  </span><span class="nl">Mult1</span><span class="p">:</span><span class="w"> </span><span class="n">Busy</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">Op</span><span class="o">=</span><span class="n">MUL</span><span class="p">,</span><span class="w"> </span><span class="n">Vk</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span><span class="w"> </span><span class="n">Qj</span><span class="o">=</span><span class="n">Load2</span><span class="p">,</span><span class="w"> </span><span class="n">Dest</span><span class="o">=</span><span class="n">F0</span>
<span class="w">  </span><span class="n">Register</span><span class="o">[</span><span class="n">F0</span><span class="o">]</span><span class="err">:</span><span class="w"> </span><span class="n">Qi</span><span class="o">=</span><span class="n">Mult1</span>
<span class="k">Execute</span><span class="w"> </span><span class="nl">I2</span><span class="p">:</span><span class="w"> </span><span class="n">Memory</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">starts</span>
<span class="k">Write</span><span class="w"> </span><span class="nl">I1</span><span class="p">:</span><span class="w"> </span><span class="n">Broadcast</span><span class="w"> </span><span class="n">F6</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">CDB</span>
<span class="w">  </span><span class="nl">Load1</span><span class="p">:</span><span class="w"> </span><span class="n">Busy</span><span class="o">=</span><span class="mi">0</span>
<span class="w">  </span><span class="n">Register</span><span class="o">[</span><span class="n">F6</span><span class="o">]</span><span class="err">:</span><span class="w"> </span><span class="n">Qi</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">Value</span><span class="o">=</span><span class="n">M</span><span class="o">[</span><span class="n">34+R2</span><span class="o">]</span>

<span class="o">===</span><span class="w"> </span><span class="k">Cycle</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">===</span>
<span class="n">Issue</span><span class="w"> </span><span class="nl">I4</span><span class="p">:</span><span class="w"> </span><span class="n">SUB</span><span class="w"> </span><span class="n">F8</span><span class="p">,</span><span class="w"> </span><span class="n">F6</span><span class="p">,</span><span class="w"> </span><span class="n">F2</span>
<span class="w">  </span><span class="nl">Add1</span><span class="p">:</span><span class="w"> </span><span class="n">Busy</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">Op</span><span class="o">=</span><span class="n">SUB</span><span class="p">,</span><span class="w"> </span><span class="n">Vj</span><span class="o">=</span><span class="n">M</span><span class="o">[</span><span class="n">34+R2</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">Qk</span><span class="o">=</span><span class="n">Load2</span><span class="p">,</span><span class="w"> </span><span class="n">Dest</span><span class="o">=</span><span class="n">F8</span>
<span class="k">Write</span><span class="w"> </span><span class="nl">I2</span><span class="p">:</span><span class="w"> </span><span class="n">Broadcast</span><span class="w"> </span><span class="n">F2</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">CDB</span>
<span class="w">  </span><span class="nl">Mult1</span><span class="p">:</span><span class="w"> </span><span class="n">Vj</span><span class="o">=</span><span class="n">M</span><span class="o">[</span><span class="n">45+R3</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">Qj</span><span class="o">=</span><span class="mi">0</span><span class="w">  </span><span class="p">(</span><span class="k">value</span><span class="w"> </span><span class="n">received</span><span class="p">)</span>
<span class="w">  </span><span class="nl">Add1</span><span class="p">:</span><span class="w"> </span><span class="n">Vk</span><span class="o">=</span><span class="n">M</span><span class="o">[</span><span class="n">45+R3</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">Qk</span><span class="o">=</span><span class="mi">0</span><span class="w">   </span><span class="p">(</span><span class="k">value</span><span class="w"> </span><span class="n">received</span><span class="p">)</span>

<span class="o">===</span><span class="w"> </span><span class="k">Cycle</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">===</span>
<span class="n">Issue</span><span class="w"> </span><span class="nl">I5</span><span class="p">:</span><span class="w"> </span><span class="n">DIV</span><span class="w"> </span><span class="n">F10</span><span class="p">,</span><span class="w"> </span><span class="n">F0</span><span class="p">,</span><span class="w"> </span><span class="n">F6</span>
<span class="w">  </span><span class="nl">Mult2</span><span class="p">:</span><span class="w"> </span><span class="n">Busy</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">Op</span><span class="o">=</span><span class="n">DIV</span><span class="p">,</span><span class="w"> </span><span class="n">Vk</span><span class="o">=</span><span class="n">M</span><span class="o">[</span><span class="n">34+R2</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">Qj</span><span class="o">=</span><span class="n">Mult1</span><span class="p">,</span><span class="w"> </span><span class="n">Dest</span><span class="o">=</span><span class="n">F10</span>
<span class="k">Execute</span><span class="w"> </span><span class="nl">I3</span><span class="p">:</span><span class="w"> </span><span class="n">MUL</span><span class="w"> </span><span class="n">starts</span><span class="w"> </span><span class="p">(</span><span class="n">Vj</span><span class="p">,</span><span class="w"> </span><span class="n">Vk</span><span class="w"> </span><span class="n">ready</span><span class="p">)</span>
<span class="k">Execute</span><span class="w"> </span><span class="nl">I4</span><span class="p">:</span><span class="w"> </span><span class="n">SUB</span><span class="w"> </span><span class="n">starts</span><span class="w"> </span><span class="p">(</span><span class="n">Vj</span><span class="p">,</span><span class="w"> </span><span class="n">Vk</span><span class="w"> </span><span class="n">ready</span><span class="p">)</span>

<span class="o">===</span><span class="w"> </span><span class="k">Cycle</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="o">===</span>
<span class="n">Issue</span><span class="w"> </span><span class="nl">I6</span><span class="p">:</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="n">F6</span><span class="p">,</span><span class="w"> </span><span class="n">F8</span><span class="p">,</span><span class="w"> </span><span class="n">F2</span>
<span class="w">  </span><span class="nl">Add2</span><span class="p">:</span><span class="w"> </span><span class="n">Busy</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">Op</span><span class="o">=</span><span class="k">ADD</span><span class="p">,</span><span class="w"> </span><span class="n">Vk</span><span class="o">=</span><span class="n">M</span><span class="o">[</span><span class="n">45+R3</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">Qj</span><span class="o">=</span><span class="n">Add1</span><span class="p">,</span><span class="w"> </span><span class="n">Dest</span><span class="o">=</span><span class="n">F6</span>
<span class="w">  </span><span class="n">Register</span><span class="o">[</span><span class="n">F6</span><span class="o">]</span><span class="err">:</span><span class="w"> </span><span class="n">Qi</span><span class="o">=</span><span class="n">Add2</span>

<span class="o">===</span><span class="w"> </span><span class="k">Cycle</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="o">===</span>
<span class="k">Write</span><span class="w"> </span><span class="nl">I4</span><span class="p">:</span><span class="w"> </span><span class="n">Broadcast</span><span class="w"> </span><span class="n">F8</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">CDB</span>
<span class="w">  </span><span class="nl">Add2</span><span class="p">:</span><span class="w"> </span><span class="n">Vj</span><span class="o">=</span><span class="p">(</span><span class="n">F6</span><span class="o">-</span><span class="n">F2</span><span class="p">),</span><span class="w"> </span><span class="n">Qj</span><span class="o">=</span><span class="mi">0</span><span class="w">  </span><span class="p">(</span><span class="k">value</span><span class="w"> </span><span class="n">received</span><span class="p">)</span>

<span class="o">===</span><span class="w"> </span><span class="k">Cycle</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="o">===</span>
<span class="k">Execute</span><span class="w"> </span><span class="nl">I6</span><span class="p">:</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="n">starts</span>

<span class="p">...</span><span class="w"> </span><span class="p">(</span><span class="n">continues</span><span class="p">)</span>

<span class="o">===</span><span class="w"> </span><span class="k">Cycle</span><span class="w"> </span><span class="mi">15</span><span class="w"> </span><span class="o">===</span>
<span class="k">Write</span><span class="w"> </span><span class="nl">I3</span><span class="p">:</span><span class="w"> </span><span class="n">MUL</span><span class="w"> </span><span class="n">complete</span><span class="w"> </span><span class="p">(</span><span class="k">cycle</span><span class="w"> </span><span class="mi">5</span><span class="o">+</span><span class="mi">10</span><span class="p">)</span>
<span class="w">  </span><span class="nl">Mult2</span><span class="p">:</span><span class="w"> </span><span class="n">Vj</span><span class="o">=</span><span class="p">(</span><span class="n">F2</span><span class="o">*</span><span class="n">F4</span><span class="p">),</span><span class="w"> </span><span class="n">Qj</span><span class="o">=</span><span class="mi">0</span><span class="w">  </span><span class="p">(</span><span class="k">value</span><span class="w"> </span><span class="n">received</span><span class="p">)</span>

<span class="o">===</span><span class="w"> </span><span class="k">Cycle</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="o">===</span>
<span class="k">Execute</span><span class="w"> </span><span class="nl">I5</span><span class="p">:</span><span class="w"> </span><span class="n">DIV</span><span class="w"> </span><span class="n">starts</span>

<span class="o">===</span><span class="w"> </span><span class="k">Cycle</span><span class="w"> </span><span class="mi">56</span><span class="w"> </span><span class="o">===</span>
<span class="k">Write</span><span class="w"> </span><span class="nl">I5</span><span class="p">:</span><span class="w"> </span><span class="n">DIV</span><span class="w"> </span><span class="n">complete</span><span class="w"> </span><span class="p">(</span><span class="k">cycle</span><span class="w"> </span><span class="mi">16</span><span class="o">+</span><span class="mi">40</span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="6-reorder-buffer-rob">6. Reorder Buffer (ROB)<a class="header-link" href="#6-reorder-buffer-rob" title="Permanent link">&para;</a></h2>
<h3 id="61-need-for-rob">6.1 Need for ROB<a class="header-link" href="#61-need-for-rob" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Problem</span><span class="o">:</span><span class="w"> </span><span class="n">Precise</span><span class="w"> </span><span class="n">exception</span><span class="w"> </span><span class="n">handling</span><span class="w"> </span><span class="n">impossible</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">OoO</span><span class="w"> </span><span class="n">execution</span>

<span class="n">Example</span><span class="o">:</span>
<span class="n">I1</span><span class="o">:</span><span class="w"> </span><span class="n">LD</span><span class="w">   </span><span class="n">R1</span><span class="o">,</span><span class="w"> </span><span class="mi">0</span><span class="o">(</span><span class="n">R2</span><span class="o">)</span><span class="w">     </span><span class="o">;</span><span class="w"> </span><span class="n">May</span><span class="w"> </span><span class="n">cause</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">fault</span>
<span class="n">I2</span><span class="o">:</span><span class="w"> </span><span class="n">ADD</span><span class="w">  </span><span class="n">R3</span><span class="o">,</span><span class="w"> </span><span class="n">R4</span><span class="o">,</span><span class="w"> </span><span class="n">R5</span><span class="w">    </span><span class="o">;</span><span class="w"> </span><span class="n">Completes</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">I1</span>

<span class="n">If</span><span class="w"> </span><span class="n">I2</span><span class="w"> </span><span class="n">completes</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">I1</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">faults</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">I2</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="n">already</span><span class="w"> </span><span class="n">written</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">R3</span>
<span class="o">-</span><span class="w"> </span><span class="n">State</span><span class="w"> </span><span class="n">inconsistent</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="n">exception</span><span class="w"> </span><span class="n">handling</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">restart</span>

<span class="n">Solution</span><span class="o">:</span><span class="w"> </span><span class="n">Reorder</span><span class="w"> </span><span class="n">Buffer</span>
<span class="o">-</span><span class="w"> </span><span class="n">Temporarily</span><span class="w"> </span><span class="n">store</span><span class="w"> </span><span class="n">results</span>
<span class="o">-</span><span class="w"> </span><span class="n">Commit</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">order</span>
<span class="o">-</span><span class="w"> </span><span class="n">Discard</span><span class="w"> </span><span class="n">uncommitted</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">exception</span>
</code></pre></div>

<h3 id="62-rob-structure">6.2 ROB Structure<a class="header-link" href="#62-rob-structure" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Reorder Buffer                            â”‚
â”œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚Entryâ”‚  Busy   â”‚  State   â”‚  Dest   â”‚ Value  â”‚ Instruction  â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1  â”‚    1    â”‚ Commit   â”‚   F6    â”‚  10.5  â”‚ LD F6,34(R2) â”‚
â”‚  2  â”‚    1    â”‚ Commit   â”‚   F2    â”‚   5.0  â”‚ LD F2,45(R3) â”‚
â”‚  3  â”‚    1    â”‚ Execute  â”‚   F0    â”‚   -    â”‚ MUL F0,F2,F4 â”‚
â”‚  4  â”‚    1    â”‚ Write    â”‚   F8    â”‚   5.5  â”‚ SUB F8,F6,F2 â”‚
â”‚  5  â”‚    1    â”‚ Issue    â”‚  F10    â”‚   -    â”‚ DIV F10,F0,F6â”‚
â”‚  6  â”‚    1    â”‚ Issue    â”‚   F6    â”‚   -    â”‚ ADD F6,F8,F2 â”‚
â”‚  7  â”‚    0    â”‚   -      â”‚   -     â”‚   -    â”‚      -       â”‚
â”‚  8  â”‚    0    â”‚   -      â”‚   -     â”‚   -    â”‚      -       â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†‘                                                â†‘
    Head                                             Tail
  (Commit)                                         (Issue)

State:
- Issue: Issued, waiting to execute
- Execute: Executing
- Write: Execution complete, result recorded
- Commit: Ready to commit
</code></pre></div>

<h3 id="63-integrating-rob-with-tomasulo">6.3 Integrating ROB with Tomasulo<a class="header-link" href="#63-integrating-rob-with-tomasulo" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">            </span><span class="n">Modern</span><span class="w"> </span><span class="n">Out</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">Order</span><span class="w"> </span><span class="n">Processor</span><span class="w">                         </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                  </span><span class="n">Instruction</span><span class="w"> </span><span class="n">Fetch</span><span class="o">/</span><span class="n">Decode</span><span class="w">                   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                              </span><span class="err">â”‚</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                              </span><span class="err">â–¼</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                    </span><span class="n">Register</span><span class="w"> </span><span class="n">Rename</span><span class="w">                          </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">              </span><span class="p">(</span><span class="n">RAT</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Physical</span><span class="w"> </span><span class="n">Register</span><span class="w"> </span><span class="n">File</span><span class="p">)</span><span class="w">                 </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                              </span><span class="err">â”‚</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                              </span><span class="err">â–¼</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">              </span><span class="n">Reorder</span><span class="w"> </span><span class="n">Buffer</span><span class="w"> </span><span class="p">(</span><span class="n">ROB</span><span class="p">)</span><span class="w"> </span><span class="n">Allocation</span><span class="w">               </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                  </span><span class="p">(</span><span class="n">Entry</span><span class="w"> </span><span class="n">allocation</span><span class="p">,</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">tracking</span><span class="p">)</span><span class="w">         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                              </span><span class="err">â”‚</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                              </span><span class="err">â–¼</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">              </span><span class="n">Issue</span><span class="w"> </span><span class="n">Queue</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">Reservation</span><span class="w"> </span><span class="n">Stations</span><span class="w">             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                  </span><span class="p">(</span><span class="n">Dependence</span><span class="w"> </span><span class="k">wait</span><span class="p">,</span><span class="w"> </span><span class="n">issue</span><span class="w"> </span><span class="n">control</span><span class="p">)</span><span class="w">           </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                              </span><span class="err">â”‚</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">         </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">         </span><span class="err">â–¼</span><span class="w">                    </span><span class="err">â–¼</span><span class="w">                    </span><span class="err">â–¼</span><span class="w">             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">      </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">      </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Execution</span><span class="w">  </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Execution</span><span class="w">  </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">   </span><span class="n">Memory</span><span class="w">   </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Unit</span><span class="w"> </span><span class="mh">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Unit</span><span class="w"> </span><span class="mh">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">   </span><span class="n">Unit</span><span class="w">     </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">      </span><span class="err">â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">      </span><span class="err">â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">        </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                            </span><span class="err">â”‚</span><span class="w">                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                            </span><span class="err">â–¼</span><span class="w">                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">              </span><span class="n">Write</span><span class="w"> </span><span class="n">Back</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">ROB</span><span class="w">                              </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">              </span><span class="p">(</span><span class="n">Record</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">ROB</span><span class="p">)</span><span class="w">                        </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                            </span><span class="err">â”‚</span><span class="w">                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                            </span><span class="err">â–¼</span><span class="w">                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">              </span><span class="n">Commit</span><span class="w"> </span><span class="p">(</span><span class="n">In</span><span class="o">-</span><span class="n">Order</span><span class="p">)</span><span class="w">                              </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">     </span><span class="p">(</span><span class="n">Update</span><span class="w"> </span><span class="n">architectural</span><span class="w"> </span><span class="n">registers</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">ROB</span><span class="w"> </span><span class="n">Head</span><span class="p">)</span><span class="w">          </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="64-commit-process">6.4 Commit Process<a class="header-link" href="#64-commit-process" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nx">Commit</span><span class="w"> </span><span class="nx">rules</span><span class="p">:</span>
<span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="nx">Only</span><span class="w"> </span><span class="nx">ROB</span><span class="w"> </span><span class="nx">Head</span><span class="w"> </span><span class="nx">instruction</span><span class="w"> </span><span class="nx">can</span><span class="w"> </span><span class="nx">commit</span>
<span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="nx">Instruction</span><span class="w"> </span><span class="nx">must</span><span class="w"> </span><span class="nx">be</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nx">complete</span><span class="w"> </span><span class="nx">state</span>
<span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="nx">All</span><span class="w"> </span><span class="nx">previous</span><span class="w"> </span><span class="nx">instructions</span><span class="w"> </span><span class="nx">must</span><span class="w"> </span><span class="nx">be</span><span class="w"> </span><span class="nx">committed</span>
<span class="mi">4</span><span class="p">.</span><span class="w"> </span><span class="nx">No</span><span class="w"> </span><span class="nx">exception</span><span class="w"> </span><span class="nx">present</span>

<span class="nx">On</span><span class="w"> </span><span class="nx">exception</span><span class="p">:</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nx">I1</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">I2</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">I3</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">I4</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">I5</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">I6</span><span class="w">  </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nx">Done</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Done</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Done</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Exc</span><span class="p">!</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Done</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Done</span><span class="w"> </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
<span class="w">   </span><span class="err">â†‘</span>
<span class="w"> </span><span class="nx">Head</span>

<span class="nx">Exception</span><span class="w"> </span><span class="nx">at</span><span class="w"> </span><span class="nx">I4</span><span class="p">:</span>
<span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="nx">Commit</span><span class="w"> </span><span class="nx">I1</span><span class="p">,</span><span class="w"> </span><span class="nx">I2</span><span class="p">,</span><span class="w"> </span><span class="nx">I3</span><span class="w"> </span><span class="nx">complete</span>
<span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="nx">Exception</span><span class="w"> </span><span class="nx">detected</span><span class="w"> </span><span class="nx">at</span><span class="w"> </span><span class="nx">I4</span>
<span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="nx">Discard</span><span class="w"> </span><span class="nx">I5</span><span class="p">,</span><span class="w"> </span><span class="nx">I6</span><span class="w"> </span><span class="nx">results</span><span class="w"> </span><span class="p">(</span><span class="k">not</span><span class="w"> </span><span class="nx">committed</span><span class="w"> </span><span class="nx">yet</span><span class="p">)</span>
<span class="mi">4</span><span class="p">.</span><span class="w"> </span><span class="nx">Jump</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">exception</span><span class="w"> </span><span class="nx">handler</span><span class="w"> </span><span class="nx">at</span><span class="w"> </span><span class="nx">I4</span><span class="err">&#39;</span><span class="nx">s</span><span class="w"> </span><span class="nx">address</span>
<span class="mi">5</span><span class="p">.</span><span class="w"> </span><span class="nx">Precise</span><span class="w"> </span><span class="nx">exception</span><span class="w"> </span><span class="nx">state</span><span class="w"> </span><span class="nx">maintained</span>
</code></pre></div>

<h3 id="65-branch-misprediction-recovery">6.5 Branch Misprediction Recovery<a class="header-link" href="#65-branch-misprediction-recovery" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>Recovery on branch misprediction:

ROB state:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  I1  â”‚  I2  â”‚  BR  â”‚  I4  â”‚  I5  â”‚  I6  â”‚         â”‚
â”‚ Done â”‚ Done â”‚Mis-Pâ”‚ Done â”‚ Done â”‚ Done â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â†‘           â†‘
 Head        branch

Misprediction confirmed at BR:
1. Commit I1, I2
2. Detect misprediction at BR
3. Flush I4, I5, I6 (speculative execution results)
4. Restore RAT to BR checkpoint (checkpoint or ROB reverse walk)
5. Restart fetch at correct branch target

Recovery mechanisms:
- Checkpoint: Save RAT snapshot at each branch
- Gradual recovery: Walk ROB backwards to restore RAT
</code></pre></div>

<hr />
<h2 id="7-modern-processor-implementations">7. Modern Processor Implementations<a class="header-link" href="#7-modern-processor-implementations" title="Permanent link">&para;</a></h2>
<h3 id="71-intel-core-architecture-skylake">7.1 Intel Core Architecture (Skylake)<a class="header-link" href="#71-intel-core-architecture-skylake" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                </span><span class="n">Intel</span><span class="w"> </span><span class="n">Skylake</span><span class="w"> </span><span class="n">Microarchitecture</span><span class="w">                   </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Front</span><span class="o">-</span><span class="n">end</span><span class="w"> </span><span class="p">(</span><span class="n">In</span><span class="o">-</span><span class="n">Order</span><span class="p">)</span><span class="w">                                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Branch</span><span class="w"> </span><span class="n">prediction</span><span class="p">:</span><span class="w"> </span><span class="mi">32</span><span class="n">KB</span><span class="w"> </span><span class="n">direction</span><span class="w"> </span><span class="n">predictor</span><span class="p">,</span><span class="w"> </span><span class="o">~</span><span class="mi">4</span><span class="n">K</span><span class="w"> </span><span class="n">BTB</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">L1</span><span class="w"> </span><span class="n">I</span><span class="o">-</span><span class="n">Cache</span><span class="p">:</span><span class="w"> </span><span class="mi">32</span><span class="n">KB</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="o">-</span><span class="n">way</span><span class="w">                                 </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Decode</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="o">-</span><span class="n">wide</span><span class="w"> </span><span class="p">(</span><span class="n">complex</span><span class="w"> </span><span class="n">instr</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">micro</span><span class="o">-</span><span class="n">ops</span><span class="p">)</span><span class="w">              </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Micro</span><span class="o">-</span><span class="n">op</span><span class="w"> </span><span class="n">Cache</span><span class="p">:</span><span class="w"> </span><span class="o">~</span><span class="mf">1.5</span><span class="n">K</span><span class="w"> </span><span class="n">micro</span><span class="o">-</span><span class="n">ops</span><span class="w">                         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Allocation</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">micro</span><span class="o">-</span><span class="n">ops</span><span class="o">/</span><span class="n">cycle</span><span class="w">                           </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Out</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">Order</span><span class="w"> </span><span class="n">Engine</span><span class="w">                                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">ROB</span><span class="p">:</span><span class="w"> </span><span class="mi">224</span><span class="w"> </span><span class="n">entries</span><span class="w">                                        </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Scheduler</span><span class="p">:</span><span class="w"> </span><span class="mi">97</span><span class="w"> </span><span class="n">entries</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Physical</span><span class="w"> </span><span class="n">Registers</span><span class="p">:</span><span class="w"> </span><span class="mi">180</span><span class="w"> </span><span class="n">integer</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">168</span><span class="w"> </span><span class="n">vector</span><span class="w">            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Load</span><span class="w"> </span><span class="n">Buffer</span><span class="p">:</span><span class="w"> </span><span class="mi">72</span><span class="w"> </span><span class="n">entries</span><span class="w">                                 </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Store</span><span class="w"> </span><span class="n">Buffer</span><span class="p">:</span><span class="w"> </span><span class="mi">56</span><span class="w"> </span><span class="n">entries</span><span class="w">                                </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Execution</span><span class="w"> </span><span class="n">Units</span><span class="w"> </span><span class="p">(</span><span class="mi">8</span><span class="w"> </span><span class="n">Ports</span><span class="p">)</span><span class="w">                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Port</span><span class="w"> </span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="n">ALU</span><span class="p">,</span><span class="w"> </span><span class="n">FMA</span><span class="p">,</span><span class="w"> </span><span class="n">FP</span><span class="w"> </span><span class="n">Div</span><span class="o">/</span><span class="n">Sqrt</span><span class="p">,</span><span class="w"> </span><span class="n">Branch</span><span class="w">                     </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Port</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="n">ALU</span><span class="p">,</span><span class="w"> </span><span class="n">FMA</span><span class="p">,</span><span class="w"> </span><span class="n">AES</span><span class="w">                                     </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Port</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="n">Load</span><span class="w"> </span><span class="n">AGU</span><span class="w">                                          </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Port</span><span class="w"> </span><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="n">Load</span><span class="w"> </span><span class="n">AGU</span><span class="w">                                          </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Port</span><span class="w"> </span><span class="mi">4</span><span class="p">:</span><span class="w"> </span><span class="n">Store</span><span class="w"> </span><span class="n">Data</span><span class="w">                                        </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Port</span><span class="w"> </span><span class="mi">5</span><span class="p">:</span><span class="w"> </span><span class="n">ALU</span><span class="p">,</span><span class="w"> </span><span class="n">Shuffle</span><span class="p">,</span><span class="w"> </span><span class="n">Branch</span><span class="w">                              </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Port</span><span class="w"> </span><span class="mi">6</span><span class="p">:</span><span class="w"> </span><span class="n">ALU</span><span class="p">,</span><span class="w"> </span><span class="n">Branch</span><span class="w">                                       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Port</span><span class="w"> </span><span class="mi">7</span><span class="p">:</span><span class="w"> </span><span class="n">Store</span><span class="w"> </span><span class="n">AGU</span><span class="w">                                         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Memory</span><span class="w"> </span><span class="n">Subsystem</span><span class="w">                                               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">L1</span><span class="w"> </span><span class="n">D</span><span class="o">-</span><span class="n">Cache</span><span class="p">:</span><span class="w"> </span><span class="mi">32</span><span class="n">KB</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="o">-</span><span class="n">way</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">cycles</span><span class="w">                       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">L2</span><span class="w"> </span><span class="n">Cache</span><span class="p">:</span><span class="w"> </span><span class="mi">256</span><span class="n">KB</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="o">-</span><span class="n">way</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="n">cycles</span><span class="w">                       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">L3</span><span class="w"> </span><span class="n">Cache</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="n">MB</span><span class="o">/</span><span class="n">core</span><span class="p">,</span><span class="w"> </span><span class="mi">16</span><span class="o">-</span><span class="n">way</span><span class="p">,</span><span class="w"> </span><span class="o">~</span><span class="mi">40</span><span class="w"> </span><span class="n">cycles</span><span class="w">                  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Performance</span><span class="w"> </span><span class="n">Metrics</span><span class="w">                                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Theoretical</span><span class="w"> </span><span class="nb">max</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="n">micro</span><span class="o">-</span><span class="n">ops</span><span class="w"> </span><span class="n">execution</span><span class="o">/</span><span class="n">cycle</span><span class="w">            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Actual</span><span class="w"> </span><span class="n">IPC</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="o">-</span><span class="mi">4</span><span class="w"> </span><span class="n">depending</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">workload</span><span class="w">                   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Pipeline</span><span class="w"> </span><span class="n">depth</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="o">-</span><span class="mi">19</span><span class="w"> </span><span class="n">stages</span><span class="w">                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="72-arm-cortex-a77-architecture">7.2 ARM Cortex-A77 Architecture<a class="header-link" href="#72-arm-cortex-a77-architecture" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">                 </span><span class="nv">ARM</span><span class="w"> </span><span class="nv">Cortex</span><span class="o">-</span><span class="nv">A77</span><span class="w"> </span><span class="nv">Microarchitecture</span><span class="w">                 </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                                  </span>â”‚
â”‚<span class="w">  </span><span class="nv">Front</span><span class="o">-</span><span class="k">end</span><span class="w">                                                      </span>â”‚
â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nv">Fetch</span>:<span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="nv">instructions</span><span class="o">/</span><span class="nv">cycle</span><span class="w">                             </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nv">Decode</span>:<span class="w"> </span><span class="mi">4</span><span class="o">-</span><span class="nv">wide</span><span class="w">                                          </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nv">Macro</span><span class="o">-</span><span class="nv">op</span><span class="w"> </span><span class="nv">Cache</span>:<span class="w"> </span><span class="mi">1</span>.<span class="mi">5</span><span class="nv">K</span><span class="w"> </span><span class="nv">entries</span><span class="w">                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nv">Branch</span><span class="w"> </span><span class="nv">prediction</span>:<span class="w"> </span><span class="nv">TAGE</span><span class="o">-</span><span class="nv">based</span><span class="w">                           </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w"> </span>â”‚
â”‚<span class="w">                                                                  </span>â”‚
â”‚<span class="w">  </span><span class="nv">Out</span><span class="o">-</span><span class="nv">of</span><span class="o">-</span><span class="nv">Order</span><span class="w"> </span><span class="nv">Engine</span><span class="w">                                            </span>â”‚
â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nv">ROB</span>:<span class="w"> </span><span class="mi">160</span><span class="w"> </span><span class="nv">entries</span><span class="w">                                        </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nv">Dispatch</span>:<span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="nv">micro</span><span class="o">-</span><span class="nv">ops</span><span class="o">/</span><span class="nv">cycle</span><span class="w">                             </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nv">Issue</span><span class="w"> </span><span class="nv">Queue</span>:<span class="w"> </span><span class="mi">120</span><span class="w"> </span><span class="nv">entries</span><span class="w">                                </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w"> </span>â”‚
â”‚<span class="w">                                                                  </span>â”‚
â”‚<span class="w">  </span><span class="nv">Execution</span><span class="w"> </span><span class="nv">Units</span><span class="w"> </span><span class="ss">(</span><span class="mi">10</span><span class="w"> </span><span class="nv">pipelines</span><span class="ss">)</span><span class="w">                                 </span>â”‚
â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="nv">x</span><span class="w"> </span><span class="nv">Branch</span><span class="w">                                               </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="nv">x</span><span class="w"> </span><span class="nv">Integer</span><span class="w"> </span><span class="nv">ALU</span><span class="w">                                          </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="nv">x</span><span class="w"> </span><span class="nv">Integer</span><span class="w"> </span><span class="nv">Multi</span><span class="o">-</span><span class="nv">Cycle</span><span class="w">                                  </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="nv">x</span><span class="w"> </span><span class="nv">FP</span><span class="o">/</span><span class="nv">NEON</span><span class="w">                                              </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="nv">x</span><span class="w"> </span><span class="nv">Load</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="nv">x</span><span class="w"> </span><span class="nv">Store</span><span class="w">                                      </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w"> </span>â”‚
â”‚<span class="w">                                                                  </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="73-performance-comparison">7.3 Performance Comparison<a class="header-link" href="#73-performance-comparison" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Modern High-Performance Processor Comparison (2024)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     Feature   â”‚  Intel Golden  â”‚   AMD Zen 4   â”‚  Apple M2 P-coreâ”‚
â”‚               â”‚    Cove        â”‚               â”‚               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Decode Width â”‚     6-wide     â”‚    4-wide     â”‚     8-wide    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ROB Size     â”‚    512 entry   â”‚   320 entry   â”‚   ~600 entry  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Issue Width  â”‚    12 ports    â”‚    10 ports   â”‚   ~13 ports   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  L1 I-Cache   â”‚     32KB       â”‚     32KB      â”‚    192KB      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  L1 D-Cache   â”‚     48KB       â”‚     32KB      â”‚    128KB      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  L2 Cache     â”‚    1.25MB      â”‚     1MB       â”‚     16MB      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Actual IPC    â”‚     ~3-4       â”‚     ~3-4      â”‚     ~4-5      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="74-limitations-of-ilp">7.4 Limitations of ILP<a class="header-link" href="#74-limitations-of-ilp" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Limiting</span><span class="w"> </span><span class="n">factors</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">ILP</span><span class="w"> </span><span class="n">exploitation</span><span class="p">:</span>

<span class="mf">1.</span><span class="w"> </span><span class="n">True</span><span class="w"> </span><span class="n">Data</span><span class="w"> </span><span class="n">Dependence</span><span class="w"> </span><span class="p">(</span><span class="n">RAW</span><span class="p">)</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Cannot</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">resolved</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">renaming</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">chains</span><span class="w"> </span><span class="n">determine</span><span class="w"> </span><span class="n">performance</span>

<span class="mf">2.</span><span class="w"> </span><span class="n">Control</span><span class="w"> </span><span class="n">Dependence</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Branch</span><span class="w"> </span><span class="n">prediction</span><span class="w"> </span><span class="n">accuracy</span><span class="w"> </span><span class="n">limits</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="mi">95</span><span class="o">-</span><span class="mi">97</span><span class="o">%</span><span class="p">)</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Pipeline</span><span class="w"> </span><span class="n">flush</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">misprediction</span>

<span class="mf">3.</span><span class="w"> </span><span class="n">Memory</span><span class="w"> </span><span class="n">Dependence</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Load</span><span class="o">-</span><span class="n">Store</span><span class="w"> </span><span class="n">dependence</span><span class="w"> </span><span class="n">detection</span><span class="w"> </span><span class="n">difficulty</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Constraints</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">instruction</span><span class="w"> </span><span class="n">reordering</span>

<span class="mf">4.</span><span class="w"> </span><span class="n">Window</span><span class="w"> </span><span class="n">Size</span><span class="w"> </span><span class="n">Limits</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">ROB</span><span class="p">,</span><span class="w"> </span><span class="n">Issue</span><span class="w"> </span><span class="n">Queue</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">constraints</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Cannot</span><span class="w"> </span><span class="n">exploit</span><span class="w"> </span><span class="n">ILP</span><span class="w"> </span><span class="n">far</span><span class="w"> </span><span class="n">apart</span>

<span class="n">Actual</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">ILP</span><span class="p">:</span>

<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Program</span><span class="w"> </span><span class="n">Type</span><span class="w">        </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Avg</span><span class="w"> </span><span class="n">ILP</span><span class="w">    </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Limiting</span><span class="w"> </span><span class="n">Factor</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Integer</span><span class="w"> </span><span class="p">(</span><span class="n">SPEC</span><span class="w"> </span><span class="n">INT</span><span class="p">)</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="mf">1.5</span><span class="o">-</span><span class="mf">2.5</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Dependency</span><span class="w"> </span><span class="n">chains</span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">FP</span><span class="w"> </span><span class="p">(</span><span class="n">SPEC</span><span class="w"> </span><span class="n">FP</span><span class="p">)</span><span class="w">        </span><span class="err">â”‚</span><span class="w">   </span><span class="mf">2.0</span><span class="o">-</span><span class="mf">4.0</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Memory</span><span class="w"> </span><span class="n">bandwidth</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Media</span><span class="w"> </span><span class="n">processing</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="mf">3.0</span><span class="o">-</span><span class="mf">6.0</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">SIMD</span><span class="w"> </span><span class="n">utilization</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Database</span><span class="w">            </span><span class="err">â”‚</span><span class="w">   </span><span class="mf">1.0</span><span class="o">-</span><span class="mf">2.0</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Branch</span><span class="w"> </span><span class="n">prediction</span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Web</span><span class="w"> </span><span class="n">browser</span><span class="w">         </span><span class="err">â”‚</span><span class="w">   </span><span class="mf">1.5</span><span class="o">-</span><span class="mf">2.5</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Control</span><span class="w"> </span><span class="n">flow</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="8-practice-problems">8. Practice Problems<a class="header-link" href="#8-practice-problems" title="Permanent link">&para;</a></h2>
<h3 id="basic-problems">Basic Problems<a class="header-link" href="#basic-problems" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Classify the data dependence types:
   <code>assembly
   I1: ADD R1, R2, R3
   I2: SUB R4, R1, R5
   I3: MUL R1, R6, R7
   I4: DIV R8, R1, R9</code></p>
</li>
<li>
<p>What is the theoretical maximum IPC in a 3-way superscalar processor?</p>
</li>
<li>
<p>Which dependence types can register renaming resolve?</p>
</li>
<li>(a) RAW</li>
<li>(b) WAR</li>
<li>(c) WAW</li>
<li>(d) Control</li>
</ol>
<h3 id="intermediate-problems">Intermediate Problems<a class="header-link" href="#intermediate-problems" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Apply register renaming to this program:
   <code>assembly
   I1: ADD R1, R2, R3
   I2: MUL R4, R1, R5
   I3: ADD R1, R6, R7
   I4: SUB R8, R1, R4</code>
   (Use physical registers starting from P10)</p>
</li>
<li>
<p>List 3 reasons why ROB is needed.</p>
</li>
<li>
<p>What is the role of CDB (Common Data Bus) in Tomasulo algorithm?</p>
</li>
</ol>
<h3 id="advanced-problems">Advanced Problems<a class="header-link" href="#advanced-problems" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Trace Reservation Station states for this Tomasulo execution:
   <code>assembly
   I1: LD   F2, 0(R1)     ; 3 cycles
   I2: MUL  F4, F2, F0    ; 5 cycles
   I3: ADD  F6, F4, F2    ; 2 cycles</code>
   (Initial: F0 = 2.0, RS: Load1, Mult1, Add1, trace cycles 1-10)</p>
</li>
<li>
<p>Explain ROB-based recovery process on branch misprediction.</p>
</li>
<li>
<p>Why does Intel Skylake have 224 ROB entries? What are the effects of making it larger or smaller?</p>
</li>
</ol>
<details>
<summary>Answers</summary>

1. Dependence classification:
   - I1â†’I2: RAW (R1)
   - I1â†’I3: WAW (R1)
   - I2â†’I3: WAR (R1 - I2 reads, I3 writes)
   - I3â†’I4: RAW (R1)

2. Theoretical max IPC of 3-way superscalar = 3

3. (b) WAR, (c) WAW
   - RAW is true dependence, cannot be resolved
   - Control resolved by branch prediction

4. Register renaming:
   ```assembly
   I1: ADD P10, P2, P3    ; R1 â†’ P10
   I2: MUL P11, P10, P5   ; R4 â†’ P11
   I3: ADD P12, P6, P7    ; R1 â†’ P12 (new register)
   I4: SUB P13, P12, P11  ; R8 â†’ P13
   ```
   I1 and I3 can now execute in parallel

5. ROB needed for:
   - Precise exception handling (in-order commit)
   - Branch misprediction recovery
   - Precise interrupt handling

6. CDB role:
   - Broadcast completed results to all RSs
   - Waiting instructions receive operands
   - Update register file

7. Tomasulo execution trace:
   ```
   Cycle 1: Issue I1 â†’ Load1
   Cycle 2: Execute I1, Issue I2 â†’ Mult1 (Qj=Load1)
   Cycle 3: Execute I1 continues, Issue I3 â†’ Add1 (Qj=Mult1, Qk=Load1)
   Cycle 4: Write I1, Mult1: Vj update, Add1: Vk update
   Cycle 5: Execute I2 starts
   ...
   Cycle 9: Write I2, Add1: Vj update
   Cycle 10: Execute I3 starts
   Cycle 11-12: Execute I3 completes
   ```

8. Branch misprediction recovery:
   - Invalidate results after branch in ROB
   - Restore RAT to branch checkpoint state
   - Restart fetch at correct branch target
   - Pipeline flush

9. ROB size tradeoffs:
   - Larger: More ILP exploitation, tolerates longer memory latency
   - Smaller: Reduced area/power, faster recovery
   - 224 is balance point for memory latency (~100 cycles) and 6-wide issue

</details>

<hr />
<h2 id="next-steps">Next Steps<a class="header-link" href="#next-steps" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="./14_Memory_Hierarchy.md">14_Memory_Hierarchy.md</a> - Memory System Hierarchy and Locality Principles</li>
</ul>
<hr />
<h2 id="references">References<a class="header-link" href="#references" title="Permanent link">&para;</a></h2>
<ul>
<li>Computer Architecture: A Quantitative Approach (Hennessy &amp; Patterson)</li>
<li><a href="https://www.intel.com/content/www/us/en/developer/articles/technical/intel-sdm.html">Intel Optimization Manual</a></li>
<li><a href="https://en.wikichip.org/wiki/WikiChip">WikiChip - Microarchitectures</a></li>
<li><a href="https://www.agner.org/optimize/">Agner Fog's microarchitecture</a></li>
<li>Tomasulo, R.M. "An Efficient Algorithm for Exploiting Multiple Arithmetic Units" (1967)</li>
</ul>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/Computer_Architecture/12_Branch_Prediction.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Branch Prediction</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/Computer_Architecture/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/Computer_Architecture/14_Memory_Hierarchy.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Memory Hierarchy</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">â†‘</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'en';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}