{% raw %}
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Hierarchy - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/en/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/en/" class="nav-item ">
                    <span class="nav-icon">ğŸ </span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">ğŸ’»</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/en/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" selected>
                        English
                    </option>
                    
                    <option value="ko" >
                        í•œêµ­ì–´
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">â˜€ï¸</span>
                    <span class="theme-icon dark">ğŸŒ™</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/en/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/en/Computer_Architecture/">Computer Architecture</a>
    <span class="separator">/</span>
    <span class="current">Memory Hierarchy</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>Memory Hierarchy</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/Computer_Architecture/13_Superscalar_Out_of_Order.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Superscalar and Out-of-Order Execution</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/Computer_Architecture/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/Computer_Architecture/15_Cache_Memory.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Cache Memory</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#1-the-need-for-memory-hierarchy">1. The Need for Memory Hierarchy</a><ul>
<li><a href="#11-cpu-memory-speed-gap">1.1 CPU-Memory Speed Gap</a></li>
<li><a href="#12-ideal-memory-vs-reality">1.2 Ideal Memory vs Reality</a></li>
<li><a href="#13-memory-hierarchy-concept">1.3 Memory Hierarchy Concept</a></li>
</ul>
</li>
<li><a href="#2-principle-of-locality">2. Principle of Locality</a><ul>
<li><a href="#21-what-is-locality">2.1 What is Locality?</a></li>
<li><a href="#22-temporal-locality">2.2 Temporal Locality</a></li>
<li><a href="#23-spatial-locality">2.3 Spatial Locality</a></li>
<li><a href="#24-optimization-using-locality">2.4 Optimization Using Locality</a></li>
<li><a href="#25-working-set">2.5 Working Set</a></li>
</ul>
</li>
<li><a href="#3-memory-technology-comparison">3. Memory Technology Comparison</a><ul>
<li><a href="#31-sram-static-ram">3.1 SRAM (Static RAM)</a></li>
<li><a href="#32-dram-dynamic-ram">3.2 DRAM (Dynamic RAM)</a></li>
<li><a href="#33-flash-memory-ssd">3.3 Flash Memory (SSD)</a></li>
<li><a href="#34-memory-technology-comparison-table">3.4 Memory Technology Comparison Table</a></li>
</ul>
</li>
<li><a href="#4-memory-levels">4. Memory Levels</a><ul>
<li><a href="#41-registers">4.1 Registers</a></li>
<li><a href="#42-cache-memory">4.2 Cache Memory</a></li>
<li><a href="#43-main-memory-dram">4.3 Main Memory (DRAM)</a></li>
<li><a href="#44-secondary-storage">4.4 Secondary Storage</a></li>
</ul>
</li>
<li><a href="#5-memory-bandwidth-and-latency">5. Memory Bandwidth and Latency</a><ul>
<li><a href="#51-bandwidth">5.1 Bandwidth</a></li>
<li><a href="#52-latency">5.2 Latency</a></li>
<li><a href="#53-latency-vs-bandwidth-relationship">5.3 Latency vs Bandwidth Relationship</a></li>
<li><a href="#54-amat-average-memory-access-time">5.4 AMAT (Average Memory Access Time)</a></li>
</ul>
</li>
<li><a href="#6-memory-performance-optimization">6. Memory Performance Optimization</a><ul>
<li><a href="#61-data-layout-optimization">6.1 Data Layout Optimization</a></li>
<li><a href="#62-loop-optimization">6.2 Loop Optimization</a></li>
<li><a href="#63-prefetching">6.3 Prefetching</a></li>
<li><a href="#64-memory-alignment">6.4 Memory Alignment</a></li>
</ul>
</li>
<li><a href="#7-practice-problems">7. Practice Problems</a><ul>
<li><a href="#basic-problems">Basic Problems</a></li>
<li><a href="#intermediate-problems">Intermediate Problems</a></li>
<li><a href="#advanced-problems">Advanced Problems</a></li>
</ul>
</li>
<li><a href="#next-steps">Next Steps</a></li>
<li><a href="#references">References</a></li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="memory-hierarchy">Memory Hierarchy<a class="header-link" href="#memory-hierarchy" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="header-link" href="#overview" title="Permanent link">&para;</a></h2>
<p>In computer systems, the speed gap between the CPU and memory is a major performance bottleneck. The memory hierarchy addresses this problem by optimizing the trade-offs between speed, capacity, and cost. In this lesson, we will learn about the principles of memory hierarchy, the concept of locality, and the characteristics of each memory level.</p>
<p><strong>Difficulty</strong>: â­â­</p>
<p><strong>Prerequisites</strong>: Computer System Overview, CPU Architecture Basics</p>
<hr />
<h2 id="table-of-contents">Table of Contents<a class="header-link" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#1-the-need-for-memory-hierarchy">The Need for Memory Hierarchy</a></li>
<li><a href="#2-principle-of-locality">Principle of Locality</a></li>
<li><a href="#3-memory-technology-comparison">Memory Technology Comparison</a></li>
<li><a href="#4-memory-levels">Memory Levels</a></li>
<li><a href="#5-memory-bandwidth-and-latency">Memory Bandwidth and Latency</a></li>
<li><a href="#6-memory-performance-optimization">Memory Performance Optimization</a></li>
<li><a href="#7-practice-problems">Practice Problems</a></li>
</ol>
<hr />
<h2 id="1-the-need-for-memory-hierarchy">1. The Need for Memory Hierarchy<a class="header-link" href="#1-the-need-for-memory-hierarchy" title="Permanent link">&para;</a></h2>
<h3 id="11-cpu-memory-speed-gap">1.1 CPU-Memory Speed Gap<a class="header-link" href="#11-cpu-memory-speed-gap" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>CPU and Memory Performance Trends (1980-2020):

Performance
  â”‚
  â”‚                                        â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ CPU
  â”‚                                   â—
  â”‚                              â—
  â”‚                         â—
  â”‚                    â—
  â”‚               â—
  â”‚          â—                               â—†â”€â”€â”€â”€â”€â”€â”€â”€â”€ Memory
  â”‚     â—                              â—†
  â”‚ â—                            â—†
  â”‚                        â—†
  â”‚                  â—†
  â”‚            â—†
  â”‚      â—†
  â”‚ â—†
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Year
   1980    1990    2000    2010    2020

CPU: ~50% performance improvement per year (1980-2000)
Memory: ~7% performance improvement per year

Result: &quot;Memory Wall&quot; - Memory becomes the system performance bottleneck
</code></pre></div>

<h3 id="12-ideal-memory-vs-reality">1.2 Ideal Memory vs Reality<a class="header-link" href="#12-ideal-memory-vs-reality" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nx">Ideal</span><span class="w"> </span><span class="nx">Memory</span><span class="p">:</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">Infinite</span><span class="w"> </span><span class="nx">capacity</span><span class="w">                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">Zero</span><span class="w"> </span><span class="nx">access</span><span class="w"> </span><span class="nx">time</span><span class="w">                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">Free</span><span class="w">                                  </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="nx">Reality</span><span class="p">:</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nx">Speed</span><span class="w"> </span><span class="err">â†‘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">Cost</span><span class="w"> </span><span class="err">â†‘</span><span class="p">,</span><span class="w"> </span><span class="nx">Capacity</span><span class="w"> </span><span class="err">â†“</span><span class="w">                               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nx">Capacity</span><span class="w"> </span><span class="err">â†‘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">Cost</span><span class="w"> </span><span class="err">â†‘</span><span class="p">,</span><span class="w"> </span><span class="nx">Speed</span><span class="w"> </span><span class="err">â†“</span><span class="w">                               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nx">Cost</span><span class="w"> </span><span class="err">â†“</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">Speed</span><span class="w"> </span><span class="err">â†“</span><span class="p">,</span><span class="w"> </span><span class="nx">Limited</span><span class="w"> </span><span class="nx">capacity</span><span class="w">                         </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="nx">Solution</span><span class="p">:</span><span class="w"> </span><span class="nx">Memory</span><span class="w"> </span><span class="nx">Hierarchy</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Arrange</span><span class="w"> </span><span class="nx">multiple</span><span class="w"> </span><span class="nx">types</span><span class="w"> </span><span class="nx">of</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">hierarchically</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Fast</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="nx">small</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">close</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">CPU</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Slow</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="nx">large</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">farther</span><span class="w"> </span><span class="nx">away</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Keep</span><span class="w"> </span><span class="nx">frequently</span><span class="w"> </span><span class="nx">used</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nx">fast</span><span class="w"> </span><span class="nx">memory</span>
</code></pre></div>

<h3 id="13-memory-hierarchy-concept">1.3 Memory Hierarchy Concept<a class="header-link" href="#13-memory-hierarchy-concept" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ Registers â”‚  â† Fastest, smallest, most expensive
                        â”‚   ~1KB    â”‚
                        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                              â”‚
                        â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
                        â”‚ L1 Cache  â”‚
                        â”‚  ~64KB    â”‚
                        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     L2 Cache      â”‚
                    â”‚    ~256KB-1MB     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚            L3 Cache               â”‚
            â”‚           ~2-32MB                 â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                   Main Memory                      â”‚
    â”‚                  ~8-128GB                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SSD/HDD                             â”‚
â”‚                     ~256GB-10TB                            â”‚  â† Slowest, largest, cheapest
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Going up: Faster, smaller, more expensive, closer to CPU
Going down: Slower, larger, cheaper, farther from CPU
</code></pre></div>

<hr />
<h2 id="2-principle-of-locality">2. Principle of Locality<a class="header-link" href="#2-principle-of-locality" title="Permanent link">&para;</a></h2>
<h3 id="21-what-is-locality">2.1 What is Locality?<a class="header-link" href="#21-what-is-locality" title="Permanent link">&para;</a></h3>
<p>There are patterns in how programs access memory. This is called <strong>locality</strong>, and it is why memory hierarchy is effective.</p>
<h3 id="22-temporal-locality">2.2 Temporal Locality<a class="header-link" href="#22-temporal-locality" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nl">Definition</span><span class="p">:</span><span class="w"> </span><span class="k">Data</span><span class="w"> </span><span class="n">accessed</span><span class="w"> </span><span class="n">recently</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">likely</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">accessed</span><span class="w"> </span><span class="n">again</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">near</span><span class="w"> </span><span class="n">future</span>

<span class="n">Example</span><span class="w"> </span><span class="mi">1</span><span class="err">:</span><span class="w"> </span><span class="n">Loop</span><span class="w"> </span><span class="n">variables</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1000</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="nf">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="k">array</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">;</span><span class="w">               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="err">}</span><span class="w">                                  </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
<span class="w">  </span><span class="n">Variables</span><span class="w"> </span><span class="s1">&#39;sum&#39;</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="s1">&#39;i&#39;</span><span class="w"> </span><span class="k">are</span><span class="w"> </span><span class="n">accessed</span><span class="w"> </span><span class="mi">1000</span><span class="w"> </span><span class="n">times</span>

<span class="n">Example</span><span class="w"> </span><span class="mi">2</span><span class="err">:</span><span class="w"> </span><span class="n">Frequently</span><span class="w"> </span><span class="k">called</span><span class="w"> </span><span class="n">functions</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">running</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w">                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="n">process_event</span><span class="p">();</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">repeated</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="n">update_state</span><span class="p">();</span><span class="w">   </span><span class="o">//</span><span class="w"> </span><span class="n">repeated</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="err">}</span><span class="w">                                  </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
<span class="w">  </span><span class="k">Function</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">reused</span><span class="w"> </span><span class="n">continuously</span>

<span class="n">Exploiting</span><span class="w"> </span><span class="n">temporal</span><span class="w"> </span><span class="nl">locality</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">Keep</span><span class="w"> </span><span class="n">recently</span><span class="w"> </span><span class="n">accessed</span><span class="w"> </span><span class="k">data</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">cache</span>
<span class="o">-</span><span class="w"> </span><span class="n">Provide</span><span class="w"> </span><span class="n">quickly</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">cache</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">re</span><span class="o">-</span><span class="n">access</span>
</code></pre></div>

<h3 id="23-spatial-locality">2.3 Spatial Locality<a class="header-link" href="#23-spatial-locality" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nl">Definition</span><span class="p">:</span><span class="w"> </span><span class="k">Data</span><span class="w"> </span><span class="n">near</span><span class="w"> </span><span class="n">accessed</span><span class="w"> </span><span class="k">data</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">likely</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">accessed</span><span class="w"> </span><span class="n">soon</span>

<span class="n">Example</span><span class="w"> </span><span class="mi">1</span><span class="err">:</span><span class="w"> </span><span class="n">Sequential</span><span class="w"> </span><span class="k">array</span><span class="w"> </span><span class="n">access</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="nf">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="k">array</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">;</span><span class="w">               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="err">}</span><span class="w">                                  </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="n">Memory</span><span class="w"> </span><span class="nl">layout</span><span class="p">:</span>
<span class="nl">Address</span><span class="p">:</span><span class="w">  </span><span class="mh">0x100</span><span class="w">  </span><span class="mh">0x104</span><span class="w">  </span><span class="mh">0x108</span><span class="w">  </span><span class="mh">0x10C</span><span class="w">  </span><span class="mh">0x110</span><span class="w">  </span><span class="mh">0x114</span>
<span class="w">          </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”</span>
<span class="k">array</span><span class="err">:</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">a</span><span class="o">[</span><span class="n">0</span><span class="o">]</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">a</span><span class="o">[</span><span class="n">1</span><span class="o">]</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">a</span><span class="o">[</span><span class="n">2</span><span class="o">]</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">a</span><span class="o">[</span><span class="n">3</span><span class="o">]</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">a</span><span class="o">[</span><span class="n">4</span><span class="o">]</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">a</span><span class="o">[</span><span class="n">5</span><span class="o">]</span><span class="w"> </span><span class="err">â”‚</span>
<span class="w">          </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜</span>
<span class="w">            </span><span class="err">â†“</span><span class="w">      </span><span class="err">â†“</span><span class="w">      </span><span class="err">â†“</span><span class="w">      </span><span class="err">â†“</span><span class="w">      </span><span class="err">â†“</span><span class="w">      </span><span class="err">â†“</span>
<span class="w">          </span><span class="n">Sequential</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">spatial</span><span class="w"> </span><span class="n">locality</span>

<span class="n">Example</span><span class="w"> </span><span class="mi">2</span><span class="err">:</span><span class="w"> </span><span class="n">Struct</span><span class="w"> </span><span class="n">access</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w"> </span><span class="n">struct</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="nc">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">z</span><span class="p">;</span><span class="w"> </span><span class="err">}</span><span class="p">;</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="n">p</span><span class="p">;</span><span class="w">                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="n">distance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sqrt</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                 </span><span class="n">p</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">p</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">+</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                 </span><span class="n">p</span><span class="p">.</span><span class="n">z</span><span class="o">*</span><span class="n">p</span><span class="p">.</span><span class="n">z</span><span class="p">);</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
<span class="w">  </span><span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">z</span><span class="w"> </span><span class="k">are</span><span class="w"> </span><span class="n">adjacent</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">memory</span>

<span class="n">Exploiting</span><span class="w"> </span><span class="n">spatial</span><span class="w"> </span><span class="nl">locality</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="k">Load</span><span class="w"> </span><span class="k">data</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">cache</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="p">(</span><span class="n">block</span><span class="p">)</span><span class="w"> </span><span class="n">units</span>
<span class="o">-</span><span class="w"> </span><span class="k">Fetch</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="n">adjacent</span><span class="w"> </span><span class="k">data</span><span class="w"> </span><span class="k">at</span><span class="w"> </span><span class="n">once</span>
<span class="o">-</span><span class="w"> </span><span class="mi">64</span><span class="o">-</span><span class="n">byte</span><span class="w"> </span><span class="n">cache</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="n">ints</span><span class="w"> </span><span class="n">included</span>
</code></pre></div>

<h3 id="24-optimization-using-locality">2.4 Optimization Using Locality<a class="header-link" href="#24-optimization-using-locality" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Good</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="p">(</span><span class="n">high</span><span class="w"> </span><span class="n">locality</span><span class="p">)</span><span class="err">:</span>

<span class="o">//</span><span class="w"> </span><span class="k">Row</span><span class="o">-</span><span class="n">major</span><span class="w"> </span><span class="n">traversal</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">matches</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">layout</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="nf">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">matrix</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>

<span class="n">Memory</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="nl">pattern</span><span class="p">:</span>
<span class="o">[</span><span class="n">0,0</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">0,1</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">0,2</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">0,3</span><span class="o">]</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="o">[</span><span class="n">1,0</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">1,1</span><span class="o">]</span><span class="w"> </span><span class="p">...</span>
<span class="w">  </span><span class="err">â†“</span><span class="w">     </span><span class="err">â†“</span><span class="w">     </span><span class="err">â†“</span><span class="w">     </span><span class="err">â†“</span><span class="w">        </span><span class="err">â†“</span><span class="w">     </span><span class="err">â†“</span>
<span class="n">Sequential</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">High</span><span class="w"> </span><span class="n">cache</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="n">rate</span>


<span class="n">Bad</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="p">(</span><span class="n">low</span><span class="w"> </span><span class="n">locality</span><span class="p">)</span><span class="err">:</span>

<span class="o">//</span><span class="w"> </span><span class="k">Column</span><span class="o">-</span><span class="n">major</span><span class="w"> </span><span class="n">traversal</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">mismatches</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">layout</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="nf">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">matrix</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>

<span class="n">Memory</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="nl">pattern</span><span class="p">:</span>
<span class="o">[</span><span class="n">0,0</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">1,0</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">2,0</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">3,0</span><span class="o">]</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="o">[</span><span class="n">0,1</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">1,1</span><span class="o">]</span><span class="w"> </span><span class="p">...</span>
<span class="w">  </span><span class="err">â†“</span><span class="w">     </span><span class="err">â†“</span><span class="w">     </span><span class="err">â†“</span><span class="w">     </span><span class="err">â†“</span><span class="w">        </span><span class="err">â†“</span><span class="w">     </span><span class="err">â†“</span>
<span class="n">Jumping</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="n">elements</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Frequent</span><span class="w"> </span><span class="n">cache</span><span class="w"> </span><span class="n">misses</span>


<span class="n">Performance</span><span class="w"> </span><span class="nf">difference</span><span class="w"> </span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="o">-</span><span class="n">byte</span><span class="w"> </span><span class="n">elements</span><span class="p">)</span><span class="err">:</span>
<span class="o">-</span><span class="w"> </span><span class="k">Row</span><span class="o">-</span><span class="nl">major</span><span class="p">:</span><span class="w"> </span><span class="o">~</span><span class="mi">50</span><span class="n">ms</span>
<span class="o">-</span><span class="w"> </span><span class="k">Column</span><span class="o">-</span><span class="nl">major</span><span class="p">:</span><span class="w"> </span><span class="o">~</span><span class="mi">500</span><span class="n">ms</span><span class="w"> </span><span class="p">(</span><span class="mi">10</span><span class="n">x</span><span class="w"> </span><span class="n">slower</span><span class="p">)</span>
</code></pre></div>

<h3 id="25-working-set">2.5 Working Set<a class="header-link" href="#25-working-set" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nl">Definition</span><span class="p">:</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="n">actively</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">during</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">specific</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">interval</span>

<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                                                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Working</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">changes</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">execution</span><span class="w"> </span><span class="n">phase</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Phase</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="w"> </span><span class="n">Initialization</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Working</span><span class="w"> </span><span class="n">Set</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="n">init</span><span class="w"> </span><span class="n">code</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">[</span><span class="n">config</span><span class="w"> </span><span class="n">data</span><span class="p">]</span><span class="w">                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Size</span><span class="o">:</span><span class="w"> </span><span class="o">~</span><span class="mi">100</span><span class="n">KB</span><span class="w">                                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Phase</span><span class="w"> </span><span class="mi">2</span><span class="o">:</span><span class="w"> </span><span class="n">Data</span><span class="w"> </span><span class="n">Processing</span><span class="w">                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Working</span><span class="w"> </span><span class="n">Set</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="n">processing</span><span class="w"> </span><span class="n">code</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">[</span><span class="n">input</span><span class="w"> </span><span class="n">buffer</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">[</span><span class="n">output</span><span class="p">]</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Size</span><span class="o">:</span><span class="w"> </span><span class="o">~</span><span class="mi">10</span><span class="n">MB</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Phase</span><span class="w"> </span><span class="mi">3</span><span class="o">:</span><span class="w"> </span><span class="n">Result</span><span class="w"> </span><span class="n">Output</span><span class="w">                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Working</span><span class="w"> </span><span class="n">Set</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="n">output</span><span class="w"> </span><span class="n">code</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">[</span><span class="n">output</span><span class="w"> </span><span class="n">buffer</span><span class="p">]</span><span class="w">               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Size</span><span class="o">:</span><span class="w"> </span><span class="o">~</span><span class="mi">500</span><span class="n">KB</span><span class="w">                                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                              </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="n">Cache</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">Working</span><span class="w"> </span><span class="n">Set</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">Working</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">Cache</span><span class="w"> </span><span class="n">size</span><span class="o">:</span><span class="w"> </span><span class="n">High</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="n">rate</span>
<span class="o">-</span><span class="w"> </span><span class="n">Working</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">Cache</span><span class="w"> </span><span class="n">size</span><span class="o">:</span><span class="w"> </span><span class="n">Thrashing</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">occur</span>
</code></pre></div>

<hr />
<h2 id="3-memory-technology-comparison">3. Memory Technology Comparison<a class="header-link" href="#3-memory-technology-comparison" title="Permanent link">&para;</a></h2>
<h3 id="31-sram-static-ram">3.1 SRAM (Static RAM)<a class="header-link" href="#31-sram-static-ram" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">SRAM</span><span class="w"> </span><span class="n">Cell</span><span class="w"> </span><span class="n">Structure</span><span class="w"> </span><span class="p">(</span><span class="mh">6</span><span class="n">T</span><span class="w"> </span><span class="n">SRAM</span><span class="p">)</span><span class="o">:</span>

<span class="w">        </span><span class="n">Vdd</span><span class="w">                         </span><span class="n">Vdd</span>
<span class="w">         </span><span class="err">â”‚</span><span class="w">                           </span><span class="err">â”‚</span>
<span class="w">      </span><span class="err">â”Œâ”€â”€â”´â”€â”€â”</span><span class="w">                     </span><span class="err">â”Œâ”€â”€â”´â”€â”€â”</span>
<span class="w">      </span><span class="err">â”‚</span><span class="w"> </span><span class="n">P1</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                     </span><span class="err">â”‚</span><span class="w"> </span><span class="n">P2</span><span class="w">  </span><span class="err">â”‚</span>
<span class="w">      </span><span class="err">â””â”€â”€â”¬â”€â”€â”˜</span><span class="w">                     </span><span class="err">â””â”€â”€â”¬â”€â”€â”˜</span>
<span class="w">         </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”Œâ”€â”€â”€â”</span><span class="w">            </span><span class="err">â”‚</span>
<span class="w">         </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="w">         </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â””â”€â”€â”€â”˜</span><span class="w">            </span><span class="err">â”‚</span>
<span class="w">      </span><span class="err">â”Œâ”€â”€â”´â”€â”€â”</span><span class="w">                     </span><span class="err">â”Œâ”€â”€â”´â”€â”€â”</span>
<span class="w">      </span><span class="err">â”‚</span><span class="w"> </span><span class="n">N1</span><span class="w">  </span><span class="err">â”‚</span><span class="w">        </span><span class="n">Word</span><span class="w">         </span><span class="err">â”‚</span><span class="w"> </span><span class="n">N2</span><span class="w">  </span><span class="err">â”‚</span>
<span class="w">      </span><span class="err">â””â”€â”€â”¬â”€â”€â”˜</span><span class="w">        </span><span class="n">Line</span><span class="w">         </span><span class="err">â””â”€â”€â”¬â”€â”€â”˜</span>
<span class="w">         </span><span class="err">â”‚</span><span class="w">            </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span>
<span class="w">         </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”Œâ”€â”€â”´â”€â”€â”</span><span class="w">           </span><span class="err">â”‚</span>
<span class="w">         </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span><span class="w"> </span><span class="n">N3</span><span class="w">  </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span>
<span class="w">         </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â””â”€â”€â”¬â”€â”€â”˜</span><span class="w">           </span><span class="err">â”‚</span>
<span class="w">         </span><span class="err">â”‚</span><span class="w">            </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span>
<span class="w">        </span><span class="n">Bit</span><span class="w">         </span><span class="n">GND</span><span class="w">            </span><span class="o">~</span><span class="n">Bit</span>
<span class="w">        </span><span class="n">Line</span><span class="w">                       </span><span class="n">Line</span>

<span class="nl">Characteristics:</span>
<span class="o">-</span><span class="w"> </span><span class="mh">6</span><span class="w"> </span><span class="n">transistors</span><span class="w"> </span><span class="n">store</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="kt">bit</span>
<span class="o">-</span><span class="w"> </span><span class="n">Data</span><span class="w"> </span><span class="n">retained</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">long</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">power</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">supplied</span><span class="w"> </span><span class="p">(</span><span class="n">no</span><span class="w"> </span><span class="n">refresh</span><span class="w"> </span><span class="n">needed</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">Fast</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">speed</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="mh">1</span><span class="o">-</span><span class="mh">2</span><span class="n">ns</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">High</span><span class="w"> </span><span class="n">cost</span><span class="p">,</span><span class="w"> </span><span class="n">low</span><span class="w"> </span><span class="n">density</span>
<span class="o">-</span><span class="w"> </span><span class="nl">Usage:</span><span class="w"> </span><span class="n">Cache</span><span class="w"> </span><span class="n">memory</span><span class="p">,</span><span class="w"> </span><span class="n">register</span><span class="w"> </span><span class="n">files</span>
</code></pre></div>

<h3 id="32-dram-dynamic-ram">3.2 DRAM (Dynamic RAM)<a class="header-link" href="#32-dram-dynamic-ram" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nv">DRAM</span><span class="w"> </span><span class="nv">Cell</span><span class="w"> </span><span class="nv">Structure</span><span class="w"> </span><span class="ss">(</span><span class="mi">1</span><span class="nv">T1C</span><span class="w"> </span><span class="nv">DRAM</span><span class="ss">)</span>:

<span class="w">    </span><span class="nv">Word</span><span class="w"> </span><span class="nv">Line</span>
<span class="w">        </span>â”‚
<span class="w">     </span>â”Œâ”€â”€â”´â”€â”€â”
<span class="w">     </span>â”‚<span class="w">  </span><span class="nv">T</span><span class="w">  </span>â”‚<span class="w"> </span><span class="ss">(</span><span class="nv">transistor</span><span class="ss">)</span>
<span class="w">     </span>â””â”€â”€â”¬â”€â”€â”˜
<span class="w">        </span>â”‚
<span class="w">     </span>â”Œâ”€â”€â”´â”€â”€â”
<span class="w">     </span>â”‚<span class="w">  </span><span class="nv">C</span><span class="w">  </span>â”‚<span class="w"> </span><span class="ss">(</span><span class="nv">capacitor</span><span class="ss">)</span>
<span class="w">     </span>â””â”€â”€â”¬â”€â”€â”˜
<span class="w">        </span>â”‚
<span class="w">    </span><span class="nv">Bit</span><span class="w"> </span><span class="nv">Line</span>

<span class="nv">Characteristics</span>:
<span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nv">transistor</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nv">capacitor</span><span class="w"> </span><span class="nv">stores</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nv">bit</span>
<span class="o">-</span><span class="w"> </span><span class="nv">Periodic</span><span class="w"> </span><span class="nv">refresh</span><span class="w"> </span><span class="nv">needed</span><span class="w"> </span><span class="nv">due</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">capacitor</span><span class="w"> </span><span class="nv">leakage</span><span class="w"> </span><span class="ss">(</span><span class="o">~</span><span class="mi">64</span><span class="nv">ms</span><span class="ss">)</span>
<span class="o">-</span><span class="w"> </span><span class="nv">Slow</span><span class="w"> </span><span class="nv">access</span><span class="w"> </span><span class="nv">speed</span><span class="w"> </span><span class="ss">(</span><span class="o">~</span><span class="mi">50</span><span class="o">-</span><span class="mi">100</span><span class="nv">ns</span><span class="ss">)</span>
<span class="o">-</span><span class="w"> </span><span class="nv">Low</span><span class="w"> </span><span class="nv">cost</span>,<span class="w"> </span><span class="nv">high</span><span class="w"> </span><span class="nv">density</span>
<span class="o">-</span><span class="w"> </span><span class="nv">Usage</span>:<span class="w"> </span><span class="nv">Main</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span><span class="ss">(</span><span class="nv">DDR4</span>,<span class="w"> </span><span class="nv">DDR5</span><span class="ss">)</span>

<span class="nv">DRAM</span><span class="w"> </span><span class="nv">Access</span><span class="w"> </span><span class="nv">Process</span>:
<span class="mi">1</span>.<span class="w"> </span><span class="nv">Row</span><span class="w"> </span><span class="nv">Activate</span><span class="w"> </span><span class="ss">(</span><span class="nv">RAS</span><span class="ss">)</span>:<span class="w"> </span><span class="nv">Select</span><span class="w"> </span><span class="nv">row</span>,<span class="w"> </span><span class="nv">move</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">sense</span><span class="w"> </span><span class="nv">amplifier</span>
<span class="mi">2</span>.<span class="w"> </span><span class="nv">Column</span><span class="w"> </span><span class="nv">Read</span><span class="w"> </span><span class="ss">(</span><span class="nv">CAS</span><span class="ss">)</span>:<span class="w"> </span><span class="nv">Select</span><span class="w"> </span><span class="nv">column</span>,<span class="w"> </span><span class="nv">output</span><span class="w"> </span><span class="nv">data</span>
<span class="mi">3</span>.<span class="w"> </span><span class="nv">Precharge</span>:<span class="w"> </span><span class="nv">Prepare</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">next</span><span class="w"> </span><span class="nv">access</span>

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w"> </span><span class="nv">RAS</span><span class="w"> </span><span class="nv">Latency</span><span class="w"> </span>â”‚<span class="w"> </span><span class="nv">CAS</span><span class="w"> </span><span class="nv">Latency</span><span class="w"> </span>â”‚<span class="w"> </span><span class="nv">Precharge</span><span class="w"> </span>â”‚<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">Total</span><span class="w"> </span><span class="nv">delay</span><span class="w"> </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="w">    </span><span class="o">~</span><span class="mi">15</span><span class="nv">ns</span><span class="w">        </span><span class="o">~</span><span class="mi">15</span><span class="nv">ns</span><span class="w">         </span><span class="o">~</span><span class="mi">15</span><span class="nv">ns</span><span class="w">       </span><span class="o">~</span><span class="mi">45</span><span class="nv">ns</span><span class="o">+</span>
</code></pre></div>

<h3 id="33-flash-memory-ssd">3.3 Flash Memory (SSD)<a class="header-link" href="#33-flash-memory-ssd" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>NAND Flash Structure:

     Word Line 0  Word Line 1  Word Line 2
          â”‚           â”‚           â”‚
    â”Œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”
    â”‚  â”Œâ”€â”€â”´â”€â”€â”     â”Œâ”€â”€â”´â”€â”€â”     â”Œâ”€â”€â”´â”€â”€â”  â”‚
    â”‚  â”‚Cell â”‚     â”‚Cell â”‚     â”‚Cell â”‚  â”‚ String 0
    â”‚  â””â”€â”€â”¬â”€â”€â”˜     â””â”€â”€â”¬â”€â”€â”˜     â””â”€â”€â”¬â”€â”€â”˜  â”‚
    â”‚     â”‚           â”‚           â”‚     â”‚
    â”‚  â”Œâ”€â”€â”´â”€â”€â”     â”Œâ”€â”€â”´â”€â”€â”     â”Œâ”€â”€â”´â”€â”€â”  â”‚
    â”‚  â”‚Cell â”‚     â”‚Cell â”‚     â”‚Cell â”‚  â”‚ String 1
    â”‚  â””â”€â”€â”¬â”€â”€â”˜     â””â”€â”€â”¬â”€â”€â”˜     â””â”€â”€â”¬â”€â”€â”˜  â”‚
    â””â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”˜
          â”‚           â”‚           â”‚
       Bit Line    Bit Line    Bit Line

Characteristics:
- Stores charge in floating gate
- Non-volatile (data retained without power)
- Read: ~25us, Write: ~250us, Erase: ~2ms
- Only block-level erase possible
- Usage: SSD, USB drives, SD cards
</code></pre></div>

<h3 id="34-memory-technology-comparison-table">3.4 Memory Technology Comparison Table<a class="header-link" href="#34-memory-technology-comparison-table" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Property   â”‚   SRAM    â”‚   DRAM    â”‚  NAND     â”‚   HDD     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Access Time  â”‚  1-2ns    â”‚  50-100ns â”‚  25us     â”‚  5-10ms   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Cost/GB      â”‚  ~$5000   â”‚  ~$3-5    â”‚  ~$0.1    â”‚  ~$0.02   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Volatile     â”‚    Yes    â”‚    Yes    â”‚    No     â”‚    No     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Typical Size â”‚  ~32MB    â”‚  ~128GB   â”‚  ~4TB     â”‚  ~20TB    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Density      â”‚    Low    â”‚   High    â”‚ Very High â”‚ Very High â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Power        â”‚   High    â”‚  Medium   â”‚   Low     â”‚   High    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Main Use     â”‚  Cache    â”‚Main Memoryâ”‚   SSD     â”‚Mass Storageâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<hr />
<h2 id="4-memory-levels">4. Memory Levels<a class="header-link" href="#4-memory-levels" title="Permanent link">&para;</a></h2>
<h3 id="41-registers">4.1 Registers<a class="header-link" href="#41-registers" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nl">Location</span><span class="p">:</span><span class="w"> </span><span class="n">Inside</span><span class="w"> </span><span class="n">CPU</span>
<span class="nl">Capacity</span><span class="p">:</span><span class="w"> </span><span class="n">Tens</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">hundreds</span><span class="w"> </span><span class="p">(</span><span class="n">x86</span><span class="o">-</span><span class="mi">64</span><span class="err">:</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="k">general</span><span class="w"> </span><span class="n">purpose</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">others</span><span class="p">)</span>
<span class="nl">Speed</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">cycle</span><span class="w"> </span><span class="p">(</span><span class="mf">0.3</span><span class="n">ns</span><span class="w"> </span><span class="err">@</span><span class="w"> </span><span class="mi">3</span><span class="n">GHz</span><span class="p">)</span>

<span class="n">Register</span><span class="w"> </span><span class="nl">Types</span><span class="p">:</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w"> </span><span class="k">General</span><span class="w"> </span><span class="n">Purpose</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">RAX</span><span class="p">,</span><span class="w"> </span><span class="n">RBX</span><span class="p">,</span><span class="w"> </span><span class="n">RCX</span><span class="p">,</span><span class="w"> </span><span class="n">RDX</span><span class="p">,</span><span class="w"> </span><span class="n">RSI</span><span class="p">,</span><span class="w"> </span><span class="n">RDI</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="n">Program</span><span class="w"> </span><span class="n">Counter</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">RIP</span><span class="w"> </span><span class="p">(</span><span class="n">Instruction</span><span class="w"> </span><span class="n">Pointer</span><span class="p">)</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="n">Stack</span><span class="w"> </span><span class="n">Pointer</span><span class="w">     </span><span class="err">â”‚</span><span class="w"> </span><span class="n">RSP</span><span class="p">,</span><span class="w"> </span><span class="n">RBP</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="n">Flag</span><span class="w"> </span><span class="n">Register</span><span class="w">     </span><span class="err">â”‚</span><span class="w"> </span><span class="n">RFLAGS</span><span class="w"> </span><span class="p">(</span><span class="n">Zero</span><span class="p">,</span><span class="w"> </span><span class="n">Carry</span><span class="p">,</span><span class="w"> </span><span class="nf">Sign</span><span class="p">,</span><span class="w"> </span><span class="p">...)</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="n">Vector</span><span class="w"> </span><span class="n">Registers</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">XMM0</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="n">YMM0</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="n">ZMM0</span><span class="o">-</span><span class="mi">31</span><span class="w"> </span><span class="p">(</span><span class="n">SIMD</span><span class="p">)</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="n">Floating</span><span class="w"> </span><span class="n">Point</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">ST0</span><span class="o">-</span><span class="n">ST7</span><span class="w"> </span><span class="p">(</span><span class="n">x87</span><span class="p">),</span><span class="w"> </span><span class="n">XMM</span><span class="w"> </span><span class="p">(</span><span class="n">SSE</span><span class="p">)</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="n">Register</span><span class="w"> </span><span class="n">vs</span><span class="w"> </span><span class="n">Memory</span><span class="w"> </span><span class="nl">Performance</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">Register</span><span class="w"> </span><span class="k">operation</span><span class="err">:</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="n">R1</span><span class="p">,</span><span class="w"> </span><span class="n">R2</span><span class="p">,</span><span class="w"> </span><span class="n">R3</span><span class="w">  </span><span class="err">â†’</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">cycle</span>
<span class="o">-</span><span class="w"> </span><span class="n">Memory</span><span class="w"> </span><span class="k">operation</span><span class="err">:</span><span class="w">   </span><span class="k">ADD</span><span class="w"> </span><span class="n">R1</span><span class="p">,</span><span class="w"> </span><span class="o">[</span><span class="n">mem</span><span class="o">]</span><span class="w">   </span><span class="err">â†’</span><span class="w"> </span><span class="mi">4</span><span class="o">+</span><span class="w"> </span><span class="n">cycles</span><span class="w"> </span><span class="p">(</span><span class="n">L1</span><span class="w"> </span><span class="n">hit</span><span class="p">)</span>
</code></pre></div>

<h3 id="42-cache-memory">4.2 Cache Memory<a class="header-link" href="#42-cache-memory" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>Cache Hierarchy (Modern CPU):

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Core 0                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚    â”‚
â”‚  â”‚  â”‚ L1 I-Cache   â”‚    â”‚ L1 D-Cache   â”‚               â”‚    â”‚
â”‚  â”‚  â”‚   32KB       â”‚    â”‚   32KB       â”‚               â”‚    â”‚
â”‚  â”‚  â”‚   4 cycles   â”‚    â”‚   4 cycles   â”‚               â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚    â”‚
â”‚  â”‚         â”‚                   â”‚                        â”‚    â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚    â”‚
â”‚  â”‚                   â”‚                                  â”‚    â”‚
â”‚  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚    â”‚
â”‚  â”‚         â”‚     L2 Cache      â”‚                        â”‚    â”‚
â”‚  â”‚         â”‚      256KB        â”‚                        â”‚    â”‚
â”‚  â”‚         â”‚     12 cycles     â”‚                        â”‚    â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                      â”‚                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      â”‚           Core 1                      â”‚
â”‚                      â”‚     (same structure)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚           â”‚     L3 Cache         â”‚                            â”‚
â”‚           â”‚   8-32MB (shared)    â”‚                            â”‚
â”‚           â”‚    40 cycles         â”‚                            â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   Main Memory   â”‚
              â”‚   100+ cycles   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Cache Characteristics Summary:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Level â”‚ Capacity â”‚   Latency     â”‚         Features         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  L1   â”‚  32-64KB â”‚   4 cycles    â”‚ Per-core, I/D split      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  L2   â”‚ 256KB-1MBâ”‚  12 cycles    â”‚ Per-core or shared       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  L3   â”‚  8-64MB  â”‚  40 cycles    â”‚ Shared by all cores      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="43-main-memory-dram">4.3 Main Memory (DRAM)<a class="header-link" href="#43-main-memory-dram" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>Modern Memory System Structure:

          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚               Memory Controller              â”‚
          â”‚          (integrated in CPU or northbridge)  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                   â”‚                   â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚Channel 0â”‚         â”‚Channel 1â”‚         â”‚Channel 2â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚                   â”‚                   â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚ DIMM 0  â”‚         â”‚ DIMM 0  â”‚         â”‚ DIMM 0  â”‚
    â”‚ 16GB    â”‚         â”‚ 16GB    â”‚         â”‚ 16GB    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DDR (Double Data Rate) Evolution:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Gen    â”‚ Clock Speed â”‚ BW/Channel   â”‚     Features      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ DDR3   â”‚  800-2133   â”‚  6.4-17GB/s  â”‚ 1.5V              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ DDR4   â”‚ 1600-3200   â”‚ 12.8-25.6GB/sâ”‚ 1.2V, bank groups â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ DDR5   â”‚ 3200-6400+  â”‚ 25.6-51.2GB/sâ”‚ 1.1V, on-die ECC  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="44-secondary-storage">4.4 Secondary Storage<a class="header-link" href="#44-secondary-storage" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nx">SSD</span><span class="w"> </span><span class="nx">Structure</span><span class="p">:</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                        </span><span class="nx">SSD</span><span class="w"> </span><span class="nx">Controller</span><span class="w">                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Flash</span><span class="w"> </span><span class="nx">Translation</span><span class="w"> </span><span class="nx">Layer</span><span class="w"> </span><span class="p">(</span><span class="nx">FTL</span><span class="p">)</span><span class="w">                        </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">Logical</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">physical</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="nx">translation</span><span class="w">            </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">Wear</span><span class="w"> </span><span class="nx">Leveling</span><span class="w">                                     </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">Garbage</span><span class="w"> </span><span class="nx">Collection</span><span class="w">                                </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">NAND</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">NAND</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">NAND</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">NAND</span><span class="w">    </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Package</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Package</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Package</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Package</span><span class="w"> </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">0</span><span class="w">     </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">1</span><span class="w">     </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">2</span><span class="w">     </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">3</span><span class="w">     </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">NAND</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">NAND</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">NAND</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">NAND</span><span class="w">    </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Package</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Package</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Package</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Package</span><span class="w"> </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">4</span><span class="w">     </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">5</span><span class="w">     </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">6</span><span class="w">     </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">7</span><span class="w">     </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">           </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="nx">HDD</span><span class="w"> </span><span class="nx">vs</span><span class="w"> </span><span class="nx">SSD</span><span class="w"> </span><span class="nx">Comparison</span><span class="p">:</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">    </span><span class="nx">Property</span><span class="w">     </span><span class="err">â”‚</span><span class="w">      </span><span class="nx">HDD</span><span class="w">       </span><span class="err">â”‚</span><span class="w">      </span><span class="nx">SSD</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nx">Sequential</span><span class="w"> </span><span class="nx">Read</span><span class="w"> </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">150</span><span class="w"> </span><span class="nx">MB</span><span class="o">/</span><span class="nx">s</span><span class="w">     </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">500</span><span class="o">-</span><span class="mi">7000</span><span class="w"> </span><span class="nx">MB</span><span class="o">/</span><span class="nx">s</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nx">Random</span><span class="w"> </span><span class="nx">Read</span><span class="w">     </span><span class="err">â”‚</span><span class="w">   </span><span class="m m-Double">0.5</span><span class="w"> </span><span class="nx">MB</span><span class="o">/</span><span class="nx">s</span><span class="w">     </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">50</span><span class="o">-</span><span class="mi">500</span><span class="w"> </span><span class="nx">MB</span><span class="o">/</span><span class="nx">s</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nx">Latency</span><span class="w">         </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">5</span><span class="o">-</span><span class="mi">10</span><span class="w"> </span><span class="nx">ms</span><span class="w">      </span><span class="err">â”‚</span><span class="w">   </span><span class="m m-Double">0.02</span><span class="o">-</span><span class="m m-Double">0.1</span><span class="w"> </span><span class="nx">ms</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nx">IOPS</span><span class="w"> </span><span class="p">(</span><span class="nx">Random</span><span class="p">)</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="o">~</span><span class="mi">200</span><span class="w">        </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">10</span><span class="nx">K</span><span class="o">-</span><span class="mi">1</span><span class="nx">M</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nx">Shock</span><span class="w"> </span><span class="nx">Resistance</span><span class="err">â”‚</span><span class="w">    </span><span class="nx">Weak</span><span class="w">        </span><span class="err">â”‚</span><span class="w">    </span><span class="nx">Strong</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nx">Price</span><span class="w"> </span><span class="nx">per</span><span class="w"> </span><span class="nx">GB</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="err">$</span><span class="m m-Double">0.02</span><span class="w">        </span><span class="err">â”‚</span><span class="w">   </span><span class="err">$</span><span class="m m-Double">0.10</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="5-memory-bandwidth-and-latency">5. Memory Bandwidth and Latency<a class="header-link" href="#5-memory-bandwidth-and-latency" title="Permanent link">&para;</a></h2>
<h3 id="51-bandwidth">5.1 Bandwidth<a class="header-link" href="#51-bandwidth" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Definition</span><span class="o">:</span><span class="w"> </span><span class="n">Amount</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">transferred</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="o">(</span><span class="n">bytes</span><span class="o">/</span><span class="n">second</span><span class="o">)</span>

<span class="n">Calculation</span><span class="o">:</span>
<span class="n">Bandwidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Bus</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="n">Transfer</span><span class="w"> </span><span class="n">Rate</span>

<span class="n">Example</span><span class="w"> </span><span class="o">(</span><span class="n">DDR4</span><span class="o">-</span><span class="mi">3200</span><span class="o">):</span>
<span class="o">-</span><span class="w"> </span><span class="n">Bus</span><span class="w"> </span><span class="n">width</span><span class="o">:</span><span class="w"> </span><span class="mi">64</span><span class="w"> </span><span class="n">bits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="n">bytes</span>
<span class="o">-</span><span class="w"> </span><span class="n">Transfer</span><span class="w"> </span><span class="n">rate</span><span class="o">:</span><span class="w"> </span><span class="mi">3200</span><span class="w"> </span><span class="n">MT</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="o">(</span><span class="n">Mega</span><span class="w"> </span><span class="n">Transfers</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">second</span><span class="o">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">Bandwidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">3200</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">25</span><span class="o">,</span><span class="mi">600</span><span class="w"> </span><span class="n">MB</span><span class="sr">/s = 25.6 GB/s</span><span class="w"> </span><span class="o">(</span><span class="n">per</span><span class="w"> </span><span class="n">channel</span><span class="o">)</span>

<span class="n">Dual</span><span class="w"> </span><span class="n">channel</span><span class="o">:</span><span class="w"> </span><span class="mf">25.6</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">51.2</span><span class="w"> </span><span class="n">GB</span><span class="o">/</span><span class="n">s</span>
<span class="n">Quad</span><span class="w"> </span><span class="n">channel</span><span class="o">:</span><span class="w"> </span><span class="mf">25.6</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">102.4</span><span class="w"> </span><span class="n">GB</span><span class="o">/</span><span class="n">s</span>

<span class="n">Memory</span><span class="w"> </span><span class="n">Bandwidth</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">System</span><span class="o">:</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">        </span><span class="n">System</span><span class="w">           </span><span class="err">â”‚</span><span class="w">       </span><span class="n">Bandwidth</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="n">Desktop</span><span class="w"> </span><span class="o">(</span><span class="n">DDR4</span><span class="o">)</span><span class="w">          </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">25</span><span class="o">-</span><span class="mi">50</span><span class="w"> </span><span class="n">GB</span><span class="o">/</span><span class="n">s</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="n">High</span><span class="o">-</span><span class="n">end</span><span class="w"> </span><span class="n">Workstation</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">100</span><span class="o">-</span><span class="mi">200</span><span class="w"> </span><span class="n">GB</span><span class="o">/</span><span class="n">s</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="n">Server</span><span class="w"> </span><span class="o">(</span><span class="mi">8</span><span class="o">-</span><span class="n">ch</span><span class="w"> </span><span class="n">DDR5</span><span class="o">)</span><span class="w">      </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">300</span><span class="o">-</span><span class="mi">400</span><span class="w"> </span><span class="n">GB</span><span class="o">/</span><span class="n">s</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="n">GPU</span><span class="w"> </span><span class="o">(</span><span class="n">HBM2</span><span class="o">)</span><span class="w">              </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">1</span><span class="o">-</span><span class="mi">2</span><span class="w"> </span><span class="n">TB</span><span class="o">/</span><span class="n">s</span><span class="w">             </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="52-latency">5.2 Latency<a class="header-link" href="#52-latency" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Definition</span><span class="o">:</span><span class="w"> </span><span class="n">Time</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">receipt</span>

<span class="n">Latency</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">Memory</span><span class="w"> </span><span class="n">Level</span><span class="o">:</span>

<span class="n">Level</span><span class="w">       </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Latency</span><span class="w"> </span><span class="o">(</span><span class="n">cycles</span><span class="o">)</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Latency</span><span class="w"> </span><span class="o">(</span><span class="n">ns</span><span class="o">)</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Relative</span><span class="w"> </span><span class="n">Cost</span>
<span class="err">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="n">Registers</span><span class="w">   </span><span class="err">â”‚</span><span class="w">        </span><span class="mi">1</span><span class="w">         </span><span class="err">â”‚</span><span class="w">     </span><span class="o">~</span><span class="mf">0.3</span><span class="w">     </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="n">x</span>
<span class="n">L1</span><span class="w"> </span><span class="n">Cache</span><span class="w">    </span><span class="err">â”‚</span><span class="w">       </span><span class="mi">4</span><span class="o">-</span><span class="mi">5</span><span class="w">        </span><span class="err">â”‚</span><span class="w">     </span><span class="o">~</span><span class="mf">1.5</span><span class="w">     </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">4</span><span class="n">x</span>
<span class="n">L2</span><span class="w"> </span><span class="n">Cache</span><span class="w">    </span><span class="err">â”‚</span><span class="w">      </span><span class="mi">12</span><span class="o">-</span><span class="mi">14</span><span class="w">       </span><span class="err">â”‚</span><span class="w">     </span><span class="o">~</span><span class="mi">4</span><span class="w">       </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">12</span><span class="n">x</span>
<span class="n">L3</span><span class="w"> </span><span class="n">Cache</span><span class="w">    </span><span class="err">â”‚</span><span class="w">      </span><span class="mi">40</span><span class="o">-</span><span class="mi">50</span><span class="w">       </span><span class="err">â”‚</span><span class="w">    </span><span class="o">~</span><span class="mi">15</span><span class="w">       </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">40</span><span class="n">x</span>
<span class="n">Main</span><span class="w"> </span><span class="n">Memory</span><span class="w"> </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">100</span><span class="o">-</span><span class="mi">300</span><span class="w">      </span><span class="err">â”‚</span><span class="w">   </span><span class="o">~</span><span class="mi">60</span><span class="o">-</span><span class="mi">100</span><span class="w">    </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">200</span><span class="n">x</span>
<span class="n">SSD</span><span class="w">         </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">10</span><span class="o">,</span><span class="mi">000</span><span class="o">-</span><span class="mi">50</span><span class="o">,</span><span class="mi">000</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">25</span><span class="o">-</span><span class="mi">100</span><span class="n">us</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">50</span><span class="o">,</span><span class="mi">000</span><span class="n">x</span>
<span class="n">HDD</span><span class="w">         </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">10</span><span class="o">,</span><span class="mi">000</span><span class="o">,</span><span class="mi">000</span><span class="o">+</span><span class="w">      </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">5</span><span class="o">-</span><span class="mi">10</span><span class="n">ms</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">20</span><span class="o">,</span><span class="mi">000</span><span class="o">,</span><span class="mi">000</span><span class="n">x</span>

<span class="n">Visualization</span><span class="o">:</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                                                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="n">L1</span><span class="o">:</span><span class="w">    </span><span class="err">â—</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="n">L2</span><span class="o">:</span><span class="w">    </span><span class="err">â—â—â—</span><span class="w">                                               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="n">L3</span><span class="o">:</span><span class="w">    </span><span class="err">â—â—â—â—â—â—â—â—â—â—â—â—â—</span><span class="w">                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="n">RAM</span><span class="o">:</span><span class="w">   </span><span class="err">â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="n">SSD</span><span class="o">:</span><span class="w">   </span><span class="o">[...]</span><span class="w">                    </span><span class="o">(</span><span class="n">too</span><span class="w"> </span><span class="n">long</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">display</span><span class="o">)</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="n">HDD</span><span class="o">:</span><span class="w">   </span><span class="o">[...]</span><span class="w">                    </span><span class="o">(</span><span class="n">even</span><span class="w"> </span><span class="n">longer</span><span class="o">)</span><span class="w">            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                           </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="53-latency-vs-bandwidth-relationship">5.3 Latency vs Bandwidth Relationship<a class="header-link" href="#53-latency-vs-bandwidth-relationship" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Little</span><span class="s1">&#39;s Law:</span>
<span class="n">Concurrent</span><span class="w"> </span><span class="n">Requests</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Bandwidth</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="n">Latency</span>

<span class="n">Meaning</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Memory</span><span class="w"> </span><span class="n">Systems</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">Multiple</span><span class="w"> </span><span class="n">concurrent</span><span class="w"> </span><span class="n">requests</span><span class="w"> </span><span class="n">needed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">utilize</span><span class="w"> </span><span class="n">bandwidth</span>
<span class="o">-</span><span class="w"> </span><span class="n">Longer</span><span class="w"> </span><span class="n">latency</span><span class="w"> </span><span class="n">requires</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">concurrent</span><span class="w"> </span><span class="n">requests</span>

<span class="n">Example</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">Bandwidth</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class="n">GB</span><span class="o">/</span><span class="n">s</span>
<span class="o">-</span><span class="w"> </span><span class="n">Latency</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="n">ns</span>
<span class="o">-</span><span class="w"> </span><span class="n">Cache</span><span class="w"> </span><span class="n">line</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="w"> </span><span class="n">bytes</span>

<span class="n">Required</span><span class="w"> </span><span class="n">concurrent</span><span class="w"> </span><span class="n">requests</span><span class="p">:</span>
<span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">50</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">10</span><span class="o">^</span><span class="mi">9</span><span class="p">)</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="p">(</span><span class="mi">100</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">10</span><span class="o">^-</span><span class="mi">9</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">64</span>
<span class="o">=</span><span class="w"> </span><span class="mi">78</span><span class="w"> </span><span class="n">concurrent</span><span class="w"> </span><span class="n">requests</span>

<span class="n">Solutions</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">Out</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">order</span><span class="w"> </span><span class="n">execution</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">issue</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="n">loads</span><span class="w"> </span><span class="n">simultaneously</span>
<span class="o">-</span><span class="w"> </span><span class="n">Prefetching</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">advance</span>
<span class="o">-</span><span class="w"> </span><span class="n">Memory</span><span class="w"> </span><span class="n">Level</span><span class="w"> </span><span class="n">Parallelism</span><span class="w"> </span><span class="p">(</span><span class="n">MLP</span><span class="p">)</span><span class="w"> </span><span class="n">utilization</span>
</code></pre></div>

<h3 id="54-amat-average-memory-access-time">5.4 AMAT (Average Memory Access Time)<a class="header-link" href="#54-amat-average-memory-access-time" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Formula</span><span class="o">:</span>
<span class="n">AMAT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Hit</span><span class="w"> </span><span class="n">Time</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">(</span><span class="n">Miss</span><span class="w"> </span><span class="n">Rate</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="n">Miss</span><span class="w"> </span><span class="n">Penalty</span><span class="o">)</span>

<span class="n">Example</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">L1</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="n">time</span><span class="o">:</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">cycles</span>
<span class="o">-</span><span class="w"> </span><span class="n">L1</span><span class="w"> </span><span class="n">miss</span><span class="w"> </span><span class="n">rate</span><span class="o">:</span><span class="w"> </span><span class="mi">5</span><span class="o">%</span>
<span class="o">-</span><span class="w"> </span><span class="n">L2</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="n">time</span><span class="o">:</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="n">cycles</span>
<span class="o">-</span><span class="w"> </span><span class="n">L2</span><span class="w"> </span><span class="n">miss</span><span class="w"> </span><span class="n">rate</span><span class="o">:</span><span class="w"> </span><span class="mi">20</span><span class="o">%</span><span class="w"> </span><span class="o">(</span><span class="n">of</span><span class="w"> </span><span class="n">L1</span><span class="w"> </span><span class="n">misses</span><span class="o">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">Memory</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">time</span><span class="o">:</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="n">cycles</span>

<span class="n">Calculation</span><span class="o">:</span>
<span class="n">AMAT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">0.05</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="o">(</span><span class="mi">12</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">0.20</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">200</span><span class="o">)</span>
<span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">0.05</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="o">(</span><span class="mi">12</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">40</span><span class="o">)</span>
<span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">0.05</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">52</span>
<span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">2.6</span>
<span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="mf">6.6</span><span class="w"> </span><span class="n">cycles</span>

<span class="n">AMAT</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Multi</span><span class="o">-</span><span class="n">level</span><span class="w"> </span><span class="n">Cache</span><span class="o">:</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w"> </span><span class="n">AMAT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T_L1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">MR_L1</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="o">(</span><span class="n">T_L2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">MR_L2</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="o">(</span><span class="n">T_L3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">MR_L3</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="n">T_Mem</span><span class="o">))</span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="6-memory-performance-optimization">6. Memory Performance Optimization<a class="header-link" href="#6-memory-performance-optimization" title="Permanent link">&para;</a></h2>
<h3 id="61-data-layout-optimization">6.1 Data Layout Optimization<a class="header-link" href="#61-data-layout-optimization" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nt">Structure</span><span class="w"> </span><span class="nt">of</span><span class="w"> </span><span class="nt">Arrays</span><span class="w"> </span><span class="o">(</span><span class="nt">SoA</span><span class="o">)</span><span class="w"> </span><span class="nt">vs</span><span class="w"> </span><span class="nt">Array</span><span class="w"> </span><span class="nt">of</span><span class="w"> </span><span class="nt">Structures</span><span class="w"> </span><span class="o">(</span><span class="nt">AoS</span><span class="o">):</span>

<span class="nt">AoS</span><span class="w"> </span><span class="o">(</span><span class="nt">Array</span><span class="w"> </span><span class="nt">of</span><span class="w"> </span><span class="nt">Structures</span><span class="o">):</span>
<span class="nt">struct</span><span class="w"> </span><span class="nt">Particle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">float</span><span class="w"> </span><span class="err">x,</span><span class="w"> </span><span class="err">y,</span><span class="w"> </span><span class="err">z</span><span class="p">;</span><span class="w">      </span><span class="err">//</span><span class="w"> </span><span class="err">12</span><span class="w"> </span><span class="err">bytes</span>
<span class="w">    </span><span class="err">float</span><span class="w"> </span><span class="err">vx,</span><span class="w"> </span><span class="err">vy,</span><span class="w"> </span><span class="err">vz</span><span class="p">;</span><span class="w">   </span><span class="err">//</span><span class="w"> </span><span class="err">12</span><span class="w"> </span><span class="err">bytes</span>
<span class="w">    </span><span class="err">float</span><span class="w"> </span><span class="err">mass</span><span class="p">;</span><span class="w">         </span><span class="err">//</span><span class="w"> </span><span class="err">4</span><span class="w"> </span><span class="err">bytes</span>
<span class="w">    </span><span class="err">int</span><span class="w">   </span><span class="err">id</span><span class="p">;</span><span class="w">           </span><span class="err">//</span><span class="w"> </span><span class="err">4</span><span class="w"> </span><span class="err">bytes</span>
<span class="p">}</span><span class="o">;</span><span class="w">                      </span><span class="o">//</span><span class="w"> </span><span class="nt">Total</span><span class="w"> </span><span class="nt">32</span><span class="w"> </span><span class="nt">bytes</span>

<span class="nt">Particle</span><span class="w"> </span><span class="nt">particles</span><span class="cp">[</span><span class="mi">1000</span><span class="cp">]</span><span class="o">;</span>

<span class="nt">Memory</span><span class="w"> </span><span class="nt">layout</span><span class="o">:</span>
<span class="cp">[</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">,</span><span class="nx">z</span><span class="p">,</span><span class="nx">vx</span><span class="p">,</span><span class="nx">vy</span><span class="p">,</span><span class="nx">vz</span><span class="p">,</span><span class="nx">mass</span><span class="p">,</span><span class="nx">id</span><span class="cp">][</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">,</span><span class="nx">z</span><span class="p">,</span><span class="nx">vx</span><span class="p">,</span><span class="nx">vy</span><span class="p">,</span><span class="nx">vz</span><span class="p">,</span><span class="nx">mass</span><span class="p">,</span><span class="nx">id</span><span class="cp">][</span><span class="nx">...</span><span class="cp">]</span>

<span class="nt">When</span><span class="w"> </span><span class="nt">accessing</span><span class="w"> </span><span class="nt">only</span><span class="w"> </span><span class="nt">x</span><span class="w"> </span><span class="nt">coordinates</span><span class="o">:</span><span class="w"> </span><span class="nt">Only</span><span class="w"> </span><span class="nt">4</span><span class="w"> </span><span class="nt">bytes</span><span class="w"> </span><span class="nt">used</span><span class="w"> </span><span class="nt">per</span><span class="w"> </span><span class="nt">32</span><span class="w"> </span><span class="nt">bytes</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="nt">wasteful</span>


<span class="nt">SoA</span><span class="w"> </span><span class="o">(</span><span class="nt">Structure</span><span class="w"> </span><span class="nt">of</span><span class="w"> </span><span class="nt">Arrays</span><span class="o">):</span>
<span class="nt">struct</span><span class="w"> </span><span class="nt">Particles</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">float</span><span class="w"> </span><span class="err">x</span><span class="cp">[</span><span class="mi">1000</span><span class="cp">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">float</span><span class="w"> </span><span class="err">y</span><span class="cp">[</span><span class="mi">1000</span><span class="cp">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">float</span><span class="w"> </span><span class="err">z</span><span class="cp">[</span><span class="mi">1000</span><span class="cp">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">float</span><span class="w"> </span><span class="err">vx</span><span class="cp">[</span><span class="mi">1000</span><span class="cp">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">float</span><span class="w"> </span><span class="err">vy</span><span class="cp">[</span><span class="mi">1000</span><span class="cp">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">float</span><span class="w"> </span><span class="err">vz</span><span class="cp">[</span><span class="mi">1000</span><span class="cp">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">float</span><span class="w"> </span><span class="err">mass</span><span class="cp">[</span><span class="mi">1000</span><span class="cp">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">int</span><span class="w">   </span><span class="err">id</span><span class="cp">[</span><span class="mi">1000</span><span class="cp">]</span><span class="p">;</span>
<span class="p">}</span><span class="o">;</span>

<span class="nt">Memory</span><span class="w"> </span><span class="nt">layout</span><span class="o">:</span>
<span class="cp">[</span><span class="nx">x0</span><span class="p">,</span><span class="nx">x1</span><span class="p">,</span><span class="nx">x2</span><span class="p">,</span><span class="nx">...</span><span class="cp">][</span><span class="nx">y0</span><span class="p">,</span><span class="nx">y1</span><span class="p">,</span><span class="nx">y2</span><span class="p">,</span><span class="nx">...</span><span class="cp">][</span><span class="nx">z0</span><span class="p">,</span><span class="nx">z1</span><span class="p">,</span><span class="nx">z2</span><span class="p">,</span><span class="nx">...</span><span class="cp">]</span><span class="o">...</span>

<span class="nt">When</span><span class="w"> </span><span class="nt">accessing</span><span class="w"> </span><span class="nt">only</span><span class="w"> </span><span class="nt">x</span><span class="w"> </span><span class="nt">coordinates</span><span class="o">:</span><span class="w"> </span><span class="nt">Contiguous</span><span class="w"> </span><span class="nt">memory</span><span class="w"> </span><span class="nt">access</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="nt">efficient</span>

<span class="nt">Performance</span><span class="w"> </span><span class="nt">difference</span><span class="o">:</span><span class="w"> </span><span class="nt">SoA</span><span class="w"> </span><span class="nt">can</span><span class="w"> </span><span class="nt">be</span><span class="w"> </span><span class="nt">up</span><span class="w"> </span><span class="nt">to</span><span class="w"> </span><span class="nt">4-8x</span><span class="w"> </span><span class="nt">faster</span><span class="w"> </span><span class="o">(</span><span class="nt">with</span><span class="w"> </span><span class="nt">SIMD</span><span class="o">)</span>
</code></pre></div>

<h3 id="62-loop-optimization">6.2 Loop Optimization<a class="header-link" href="#62-loop-optimization" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Loop</span><span class="w"> </span><span class="n">Tiling</span><span class="w"> </span><span class="p">(</span><span class="n">Blocking</span><span class="p">)</span><span class="err">:</span>

<span class="o">//</span><span class="w"> </span><span class="n">Original</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">low</span><span class="w"> </span><span class="n">cache</span><span class="w"> </span><span class="n">efficiency</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">k</span><span class="o">++</span><span class="p">)</span>
<span class="w">            </span><span class="n">C</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">A</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">k</span><span class="o">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">B</span><span class="o">[</span><span class="n">k</span><span class="o">][</span><span class="n">j</span><span class="o">]</span><span class="p">;</span>

<span class="o">//</span><span class="w"> </span><span class="k">With</span><span class="w"> </span><span class="n">tiling</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">cache</span><span class="w"> </span><span class="n">efficiency</span>
<span class="n">#define</span><span class="w"> </span><span class="n">BLOCK</span><span class="w"> </span><span class="mi">64</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">ii</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">ii</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">ii</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">BLOCK</span><span class="p">)</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">jj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">jj</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">jj</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">BLOCK</span><span class="p">)</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">kk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">kk</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">kk</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">BLOCK</span><span class="p">)</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ii</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nf">min</span><span class="p">(</span><span class="n">ii</span><span class="o">+</span><span class="n">BLOCK</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="p">);</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jj</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nf">min</span><span class="p">(</span><span class="n">jj</span><span class="o">+</span><span class="n">BLOCK</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="p">);</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
<span class="w">                    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">kk</span><span class="p">;</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nf">min</span><span class="p">(</span><span class="n">kk</span><span class="o">+</span><span class="n">BLOCK</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="p">);</span><span class="w"> </span><span class="n">k</span><span class="o">++</span><span class="p">)</span>
<span class="w">                        </span><span class="n">C</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">A</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">k</span><span class="o">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">B</span><span class="o">[</span><span class="n">k</span><span class="o">][</span><span class="n">j</span><span class="o">]</span><span class="p">;</span>

<span class="nl">Effect</span><span class="p">:</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nl">Original</span><span class="p">:</span><span class="w"> </span><span class="n">Repeatedly</span><span class="w"> </span><span class="n">accessing</span><span class="w"> </span><span class="n">entire</span><span class="w"> </span><span class="k">large</span><span class="w"> </span><span class="n">matrix</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â†’</span><span class="w"> </span><span class="n">Cache</span><span class="w"> </span><span class="n">thrashing</span><span class="w">                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nl">Tiled</span><span class="p">:</span><span class="w"> </span><span class="n">Completely</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">small</span><span class="w"> </span><span class="n">blocks</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Keep</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">cache</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="n">N</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span><span class="w"> </span><span class="n">BLOCK</span><span class="o">=</span><span class="mi">64</span><span class="err">:</span><span class="w">                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nl">Original</span><span class="p">:</span><span class="w"> </span><span class="o">~</span><span class="mi">10</span><span class="w"> </span><span class="n">seconds</span><span class="w">                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nl">Tiled</span><span class="p">:</span><span class="w"> </span><span class="o">~</span><span class="mi">2</span><span class="w"> </span><span class="n">seconds</span><span class="w"> </span><span class="p">(</span><span class="mi">5</span><span class="n">x</span><span class="w"> </span><span class="n">improvement</span><span class="p">)</span><span class="w">                    </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="63-prefetching">6.3 Prefetching<a class="header-link" href="#63-prefetching" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Hardware</span><span class="w"> </span><span class="nl">Prefetch</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">CPU</span><span class="w"> </span><span class="n">detects</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">patterns</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">automatically</span><span class="w"> </span><span class="n">prefetches</span>
<span class="o">-</span><span class="w"> </span><span class="n">Effective</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">sequential</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">strided</span><span class="w"> </span><span class="n">access</span>
<span class="o">-</span><span class="w"> </span><span class="n">Ineffective</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">irregular</span><span class="w"> </span><span class="n">access</span>

<span class="n">Software</span><span class="w"> </span><span class="nl">Prefetch</span><span class="p">:</span>
<span class="o">//</span><span class="w"> </span><span class="n">Intel</span><span class="w"> </span><span class="n">intrinsic</span><span class="w"> </span><span class="n">example</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">_mm_prefetch</span><span class="p">(</span><span class="o">&amp;</span><span class="k">array</span><span class="o">[</span><span class="n">i + 16</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">_MM_HINT_T0</span><span class="p">);</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">Prefetch</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">L1</span>
<span class="w">    </span><span class="nf">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="k">array</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">;</span>
<span class="err">}</span>

<span class="n">Prefetch</span><span class="w"> </span><span class="n">Distance</span><span class="w"> </span><span class="nl">Calculation</span><span class="p">:</span>
<span class="n">Distance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Memory</span><span class="w"> </span><span class="n">Latency</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nc">Time</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">Loop</span><span class="w"> </span><span class="n">Iteration</span>

<span class="nl">Example</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">Memory</span><span class="w"> </span><span class="nl">latency</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="n">cycles</span>
<span class="o">-</span><span class="w"> </span><span class="nc">Time</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">loop</span><span class="w"> </span><span class="nl">iteration</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">cycles</span>
<span class="o">-</span><span class="w"> </span><span class="n">Prefetch</span><span class="w"> </span><span class="nl">distance</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="n">elements</span><span class="w"> </span><span class="n">ahead</span>

<span class="nl">Cautions</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">Too</span><span class="w"> </span><span class="n">early</span><span class="w"> </span><span class="nl">prefetch</span><span class="p">:</span><span class="w"> </span><span class="n">Evicted</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">cache</span>
<span class="o">-</span><span class="w"> </span><span class="n">Too</span><span class="w"> </span><span class="n">late</span><span class="w"> </span><span class="nl">prefetch</span><span class="p">:</span><span class="w"> </span><span class="k">Data</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">arrived</span>
<span class="o">-</span><span class="w"> </span><span class="n">Unnecessary</span><span class="w"> </span><span class="nl">prefetch</span><span class="p">:</span><span class="w"> </span><span class="n">Cache</span><span class="w"> </span><span class="n">pollution</span>
</code></pre></div>

<h3 id="64-memory-alignment">6.4 Memory Alignment<a class="header-link" href="#64-memory-alignment" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nt">Importance</span><span class="w"> </span><span class="nt">of</span><span class="w"> </span><span class="nt">Alignment</span><span class="o">:</span>

<span class="nt">Aligned</span><span class="w"> </span><span class="nt">access</span><span class="o">:</span>
<span class="nt">Address</span><span class="o">:</span><span class="w"> </span><span class="nt">0x1000</span><span class="w"> </span><span class="o">(</span><span class="nt">64-byte</span><span class="w"> </span><span class="nt">aligned</span><span class="o">)</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">              </span><span class="nt">64-byte</span><span class="w"> </span><span class="nt">cache</span><span class="w"> </span><span class="nt">line</span><span class="w">               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="cp">[</span><span class="kc">All</span><span class="w"> </span><span class="mi">64</span><span class="w"> </span><span class="kt">bytes</span><span class="w"> </span><span class="nx">of</span><span class="w"> </span><span class="kd">data</span><span class="w"> </span><span class="n">fit</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nx">one</span><span class="w"> </span><span class="nx">line</span><span class="cp">]</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
<span class="nt">Access</span><span class="w"> </span><span class="nt">count</span><span class="o">:</span><span class="w"> </span><span class="nt">1</span>

<span class="nt">Unaligned</span><span class="w"> </span><span class="nt">access</span><span class="o">:</span>
<span class="nt">Address</span><span class="o">:</span><span class="w"> </span><span class="nt">0x1020</span><span class="w"> </span><span class="o">(</span><span class="nt">32-byte</span><span class="w"> </span><span class="nt">offset</span><span class="o">)</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nt">Cache</span><span class="w"> </span><span class="nt">Line</span><span class="w"> </span><span class="nt">1</span><span class="w">      </span><span class="err">â”‚</span><span class="w">      </span><span class="nt">Cache</span><span class="w"> </span><span class="nt">Line</span><span class="w"> </span><span class="nt">2</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="cp">[</span><span class="nx">...32</span><span class="w"> </span><span class="kt">bytes</span><span class="nx">...</span><span class="cp">]</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="cp">[</span><span class="nx">...32</span><span class="w"> </span><span class="kt">bytes</span><span class="nx">...</span><span class="cp">]</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
<span class="nt">Access</span><span class="w"> </span><span class="nt">count</span><span class="o">:</span><span class="w"> </span><span class="nt">2</span>

<span class="nt">Alignment</span><span class="w"> </span><span class="nt">Directives</span><span class="o">:</span>
<span class="o">//</span><span class="w"> </span><span class="nt">C</span><span class="o">/</span><span class="nt">C</span><span class="o">++</span>
<span class="nt">struct</span><span class="w"> </span><span class="nt">alignas</span><span class="o">(</span><span class="nt">64</span><span class="o">)</span><span class="w"> </span><span class="nt">CacheLine</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">int</span><span class="w"> </span><span class="err">data</span><span class="cp">[</span><span class="mi">16</span><span class="cp">]</span><span class="p">;</span>
<span class="p">}</span><span class="o">;</span>

<span class="o">//</span><span class="w"> </span><span class="nt">Dynamic</span><span class="w"> </span><span class="nt">allocation</span>
<span class="nt">void</span><span class="o">*</span><span class="w"> </span><span class="nt">ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">aligned_alloc</span><span class="o">(</span><span class="nt">64</span><span class="o">,</span><span class="w"> </span><span class="nt">size</span><span class="o">);</span>
</code></pre></div>

<hr />
<h2 id="7-practice-problems">7. Practice Problems<a class="header-link" href="#7-practice-problems" title="Permanent link">&para;</a></h2>
<h3 id="basic-problems">Basic Problems<a class="header-link" href="#basic-problems" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Explain why memory hierarchy is necessary.</p>
</li>
<li>
<p>Identify temporal and spatial locality in the following code:
   <code>c
   for (i = 0; i &lt; 100; i++) {
       sum += array[i];
   }</code></p>
</li>
<li>
<p>What are 3 major differences between SRAM and DRAM?</p>
</li>
</ol>
<h3 id="intermediate-problems">Intermediate Problems<a class="header-link" href="#intermediate-problems" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>If L1 cache hit time is 4 cycles, miss rate is 8%, and L2 access time is 12 cycles, what is the AMAT?</p>
</li>
<li>
<p>Which code harms spatial locality?
   ```c
   // (a)
   for (i = 0; i &lt; N; i++)
       for (j = 0; j &lt; N; j++)
           sum += a[i][j];</p>
</li>
</ol>
<p>// (b)
   for (j = 0; j &lt; N; j++)
       for (i = 0; i &lt; N; i++)
           sum += a[i][j];
   ```</p>
<ol>
<li>What is the theoretical maximum bandwidth of DDR4-3200 dual channel?</li>
</ol>
<h3 id="advanced-problems">Advanced Problems<a class="header-link" href="#advanced-problems" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Explain the problems and solutions when Working Set size exceeds cache size.</p>
</li>
<li>
<p>Apply loop tiling to optimize the following matrix multiplication code:
   <code>c
   for (i = 0; i &lt; N; i++)
       for (j = 0; j &lt; N; j++)
           for (k = 0; k &lt; N; k++)
               C[i][j] += A[i][k] * B[k][j];</code></p>
</li>
<li>
<p>Calculate the prefetch distance:</p>
</li>
<li>Memory latency: 60ns</li>
<li>CPU clock: 3GHz</li>
<li>Instructions per loop: 10, CPI: 1</li>
</ol>
<details>
<summary>Answers</summary>

1. To bridge the speed gap between CPU and memory. By placing fast, expensive memory close to the CPU and slow, cheap memory farther away, we optimize performance relative to cost.

2. - Temporal locality: Variables `sum`, `i` (accessed 100 times)
   - Spatial locality: `array[i]` (accessing contiguous memory addresses)

3. SRAM vs DRAM:
   - Structure: SRAM 6T, DRAM 1T1C
   - Refresh: SRAM not needed, DRAM needed
   - Speed: SRAM fast (~2ns), DRAM slow (~50ns)
   - Cost/Density: SRAM expensive/low, DRAM cheap/high

4. AMAT = 4 + 0.08 Ã— 12 = 4 + 0.96 = 4.96 cycles

5. (b) Column-major traversal - Arrays are stored row-major in C/C++

6. DDR4-3200: 8 bytes Ã— 3200MT/s Ã— 2 channels = 51.2 GB/s

7. Cache thrashing occurs - needed data is repeatedly replaced
   Solutions: Loop tiling, data layout optimization, algorithm changes

8. With tiling applied:
   ```c
   #define B 64
   for (ii = 0; ii < N; ii += B)
     for (jj = 0; jj < N; jj += B)
       for (kk = 0; kk < N; kk += B)
         for (i = ii; i < ii+B && i < N; i++)
           for (j = jj; j < jj+B && j < N; j++)
             for (k = kk; k < kk+B && k < N; k++)
               C[i][j] += A[i][k] * B[k][j];
   ```

9. Prefetch distance:
   - Memory latency: 60ns Ã— 3GHz = 180 cycles
   - Loop time: 10 instructions Ã— 1 CPI = 10 cycles
   - Distance: 180 / 10 = 18 elements ahead

</details>

<hr />
<h2 id="next-steps">Next Steps<a class="header-link" href="#next-steps" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="./15_Cache_Memory.md">15_Cache_Memory.md</a> - Cache mapping, replacement policies, write policies</li>
</ul>
<hr />
<h2 id="references">References<a class="header-link" href="#references" title="Permanent link">&para;</a></h2>
<ul>
<li>Computer Architecture: A Quantitative Approach (Hennessy &amp; Patterson)</li>
<li>What Every Programmer Should Know About Memory (Ulrich Drepper)</li>
<li><a href="https://software.intel.com/content/www/us/en/develop/articles/intelr-memory-latency-checker.html">Intel Memory Latency Checker</a></li>
<li><a href="https://www.youtube.com/watch?v=p3q5zWCw8J4">Memory hierarchy visualization</a></li>
</ul>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/Computer_Architecture/13_Superscalar_Out_of_Order.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Superscalar and Out-of-Order Execution</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/Computer_Architecture/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/Computer_Architecture/15_Cache_Memory.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Cache Memory</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">â†‘</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'en';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}