{% raw %}
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual Memory - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/en/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/en/" class="nav-item ">
                    <span class="nav-icon">ğŸ </span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">ğŸ’»</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/en/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" selected>
                        English
                    </option>
                    
                    <option value="ko" >
                        í•œêµ­ì–´
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">â˜€ï¸</span>
                    <span class="theme-icon dark">ğŸŒ™</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/en/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/en/Computer_Architecture/">Computer Architecture</a>
    <span class="separator">/</span>
    <span class="current">Virtual Memory</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>Virtual Memory</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/Computer_Architecture/15_Cache_Memory.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Cache Memory</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/Computer_Architecture/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/Computer_Architecture/17_IO_Systems.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">I/O Systems</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#1-the-need-for-virtual-memory">1. The Need for Virtual Memory</a><ul>
<li><a href="#11-problems-before-virtual-memory">1.1 Problems Before Virtual Memory</a></li>
<li><a href="#12-virtual-memory-solutions">1.2 Virtual Memory Solutions</a></li>
</ul>
</li>
<li><a href="#2-address-spaces">2. Address Spaces</a><ul>
<li><a href="#21-virtual-address-vs-physical-address">2.1 Virtual Address vs Physical Address</a></li>
<li><a href="#22-address-space-size">2.2 Address Space Size</a></li>
</ul>
</li>
<li><a href="#3-pages-and-page-frames">3. Pages and Page Frames</a><ul>
<li><a href="#31-paging-concept">3.1 Paging Concept</a></li>
<li><a href="#32-page-size">3.2 Page Size</a></li>
<li><a href="#33-virtual-address-decomposition">3.3 Virtual Address Decomposition</a></li>
</ul>
</li>
<li><a href="#4-page-tables">4. Page Tables</a><ul>
<li><a href="#41-single-level-page-table">4.1 Single-Level Page Table</a></li>
<li><a href="#42-multi-level-page-table">4.2 Multi-Level Page Table</a></li>
<li><a href="#43-4-level-page-table-x86-64">4.3 4-Level Page Table (x86-64)</a></li>
<li><a href="#44-inverted-page-table">4.4 Inverted Page Table</a></li>
</ul>
</li>
<li><a href="#5-tlb-translation-lookaside-buffer">5. TLB (Translation Lookaside Buffer)</a><ul>
<li><a href="#51-need-for-tlb">5.1 Need for TLB</a></li>
<li><a href="#52-tlb-structure">5.2 TLB Structure</a></li>
<li><a href="#53-tlb-operation">5.3 TLB Operation</a></li>
<li><a href="#54-tlb-performance">5.4 TLB Performance</a></li>
</ul>
</li>
<li><a href="#6-page-faults-and-page-replacement">6. Page Faults and Page Replacement</a><ul>
<li><a href="#61-page-fault">6.1 Page Fault</a></li>
<li><a href="#62-page-fault-cost">6.2 Page Fault Cost</a></li>
<li><a href="#63-demand-paging-vs-prepaging">6.3 Demand Paging vs Prepaging</a></li>
</ul>
</li>
<li><a href="#7-page-replacement-algorithms">7. Page Replacement Algorithms</a><ul>
<li><a href="#71-fifo-first-in-first-out">7.1 FIFO (First-In, First-Out)</a></li>
<li><a href="#72-optimal-opt">7.2 Optimal (OPT)</a></li>
<li><a href="#73-lru-least-recently-used">7.3 LRU (Least Recently Used)</a></li>
<li><a href="#74-clock-algorithm-second-chance">7.4 Clock Algorithm (Second Chance)</a></li>
<li><a href="#75-algorithm-comparison">7.5 Algorithm Comparison</a></li>
</ul>
</li>
<li><a href="#8-advanced-topics">8. Advanced Topics</a><ul>
<li><a href="#81-copy-on-write-cow">8.1 Copy-on-Write (COW)</a></li>
<li><a href="#82-memory-mapped-files-mmap">8.2 Memory Mapped Files (mmap)</a></li>
<li><a href="#83-huge-pages">8.3 Huge Pages</a></li>
</ul>
</li>
<li><a href="#9-practice-problems">9. Practice Problems</a><ul>
<li><a href="#basic-problems">Basic Problems</a></li>
<li><a href="#intermediate-problems">Intermediate Problems</a></li>
<li><a href="#advanced-problems">Advanced Problems</a></li>
</ul>
</li>
<li><a href="#next-steps">Next Steps</a></li>
<li><a href="#references">References</a></li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="virtual-memory">Virtual Memory<a class="header-link" href="#virtual-memory" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="header-link" href="#overview" title="Permanent link">&para;</a></h2>
<p>Virtual memory is a core technology that provides programs with a contiguous and independent address space, and enables running programs larger than physical memory. In this lesson, we will learn about virtual memory concepts, page tables, TLB, and page fault handling.</p>
<p><strong>Difficulty</strong>: â­â­â­â­</p>
<p><strong>Prerequisites</strong>: Memory Hierarchy, Cache Memory</p>
<hr />
<h2 id="table-of-contents">Table of Contents<a class="header-link" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#1-the-need-for-virtual-memory">The Need for Virtual Memory</a></li>
<li><a href="#2-address-spaces">Address Spaces</a></li>
<li><a href="#3-pages-and-page-frames">Pages and Page Frames</a></li>
<li><a href="#4-page-tables">Page Tables</a></li>
<li><a href="#5-tlb-translation-lookaside-buffer">TLB (Translation Lookaside Buffer)</a></li>
<li><a href="#6-page-faults-and-page-replacement">Page Faults and Page Replacement</a></li>
<li><a href="#7-page-replacement-algorithms">Page Replacement Algorithms</a></li>
<li><a href="#8-advanced-topics">Advanced Topics</a></li>
<li><a href="#9-practice-problems">Practice Problems</a></li>
</ol>
<hr />
<h2 id="1-the-need-for-virtual-memory">1. The Need for Virtual Memory<a class="header-link" href="#1-the-need-for-virtual-memory" title="Permanent link">&para;</a></h2>
<h3 id="11-problems-before-virtual-memory">1.1 Problems Before Virtual Memory<a class="header-link" href="#11-problems-before-virtual-memory" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Problem</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="n">Memory</span><span class="w"> </span><span class="n">Capacity</span><span class="w"> </span><span class="n">Limitation</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Program</span><span class="w"> </span><span class="n">A</span><span class="p">:</span><span class="w"> </span><span class="n">Needs</span><span class="w"> </span><span class="mi">2</span><span class="n">GB</span><span class="w">                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Physical</span><span class="w"> </span><span class="n">Memory</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="n">GB</span><span class="w">                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â†’</span><span class="w"> </span><span class="n">Cannot</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">Program</span><span class="w"> </span><span class="n">A</span><span class="o">!</span><span class="w">                                    </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="n">Problem</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="n">Memory</span><span class="w"> </span><span class="n">Fragmentation</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Physical</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">state</span><span class="p">:</span><span class="w">                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Used</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Gap</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Used</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Gap</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Used</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Gap</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Used</span><span class="w"> </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">100</span><span class="n">M</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">50</span><span class="n">M</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">200</span><span class="n">M</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">30</span><span class="n">M</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">100</span><span class="n">M</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">70</span><span class="n">M</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">150</span><span class="n">M</span><span class="w"> </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Total</span><span class="w"> </span><span class="n">free</span><span class="w"> </span><span class="n">space</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="n">MB</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="mi">100</span><span class="n">MB</span><span class="w"> </span><span class="n">contiguous</span><span class="w"> </span><span class="n">space</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â†’</span><span class="w"> </span><span class="n">Cannot</span><span class="w"> </span><span class="nb">load</span><span class="w"> </span><span class="mi">100</span><span class="n">MB</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="p">(</span><span class="n">external</span><span class="w"> </span><span class="n">fragmentation</span><span class="p">)</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="n">Problem</span><span class="w"> </span><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="n">Lack</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">Memory</span><span class="w"> </span><span class="n">Protection</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Program</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">Program</span><span class="w"> </span><span class="sa">B</span><span class="s1">&#39;s memory region             â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â†’</span><span class="w"> </span><span class="n">Security</span><span class="w"> </span><span class="n">vulnerability</span><span class="p">,</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">instability</span><span class="w">               </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="n">Problem</span><span class="w"> </span><span class="mi">4</span><span class="p">:</span><span class="w"> </span><span class="n">Relocation</span><span class="w"> </span><span class="n">Problem</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Program</span><span class="w"> </span><span class="n">compiled</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">specific</span><span class="w"> </span><span class="n">address</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â†’</span><span class="w"> </span><span class="n">Cannot</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">use</span><span class="w">                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â†’</span><span class="w"> </span><span class="n">Each</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">needs</span><span class="w"> </span><span class="n">recompilation</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">address</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="12-virtual-memory-solutions">1.2 Virtual Memory Solutions<a class="header-link" href="#12-virtual-memory-solutions" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                    </span><span class="nx">Virtual</span><span class="w"> </span><span class="nx">Memory</span><span class="w"> </span><span class="nx">System</span><span class="w">                     </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nx">Program</span><span class="w"> </span><span class="nx">A</span><span class="w">        </span><span class="nx">Program</span><span class="w"> </span><span class="nx">B</span><span class="w">        </span><span class="nx">Program</span><span class="w"> </span><span class="nx">C</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">      </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">      </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Virtual</span><span class="w"> </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Virtual</span><span class="w"> </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Virtual</span><span class="w"> </span><span class="err">â”‚</span><span class="w">             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Address</span><span class="w"> </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Address</span><span class="w"> </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Address</span><span class="w"> </span><span class="err">â”‚</span><span class="w">             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Space</span><span class="w">  </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Space</span><span class="w">  </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Space</span><span class="w">  </span><span class="err">â”‚</span><span class="w">             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">0</span><span class="o">~</span><span class="mi">4</span><span class="nx">GB</span><span class="w">  </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">0</span><span class="o">~</span><span class="mi">4</span><span class="nx">GB</span><span class="w">  </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">0</span><span class="o">~</span><span class="mi">4</span><span class="nx">GB</span><span class="w">  </span><span class="err">â”‚</span><span class="w">             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜</span><span class="w">      </span><span class="err">â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜</span><span class="w">      </span><span class="err">â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜</span><span class="w">             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span><span class="w">                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">       </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                        </span><span class="err">â”‚</span><span class="w">                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">              </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">    </span><span class="nx">MMU</span><span class="w"> </span><span class="p">(</span><span class="nx">Memory</span><span class="w">     </span><span class="err">â”‚</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Management</span><span class="w"> </span><span class="nx">Unit</span><span class="p">)</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Virtual</span><span class="err">â†’</span><span class="nx">Physical</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">Translation</span><span class="w">      </span><span class="err">â”‚</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">              </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                        </span><span class="err">â”‚</span><span class="w">                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">              </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">Physical</span><span class="w"> </span><span class="nx">Memory</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">      </span><span class="p">(</span><span class="mi">1</span><span class="nx">GB</span><span class="p">,</span><span class="w"> </span><span class="nx">etc</span><span class="p">.)</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">              </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                        </span><span class="err">â”‚</span><span class="w">                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">              </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">    </span><span class="nx">Disk</span><span class="w"> </span><span class="p">(</span><span class="nx">Swap</span><span class="p">)</span><span class="w">    </span><span class="err">â”‚</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">   </span><span class="p">(</span><span class="nx">hundreds</span><span class="w"> </span><span class="nx">GB</span><span class="p">)</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">              </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="nx">Advantages</span><span class="w"> </span><span class="nx">of</span><span class="w"> </span><span class="nx">Virtual</span><span class="w"> </span><span class="nx">Memory</span><span class="p">:</span>
<span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="nx">Capacity</span><span class="w"> </span><span class="nx">Extension</span><span class="p">:</span><span class="w"> </span><span class="nx">Use</span><span class="w"> </span><span class="nx">disk</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">extension</span>
<span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="nx">Memory</span><span class="w"> </span><span class="nx">Protection</span><span class="p">:</span><span class="w"> </span><span class="nx">Each</span><span class="w"> </span><span class="nx">process</span><span class="w"> </span><span class="nx">has</span><span class="w"> </span><span class="nx">independent</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="nx">space</span>
<span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="nx">Memory</span><span class="w"> </span><span class="nx">Sharing</span><span class="p">:</span><span class="w"> </span><span class="nx">Multiple</span><span class="w"> </span><span class="nx">processes</span><span class="w"> </span><span class="nx">can</span><span class="w"> </span><span class="nx">share</span><span class="w"> </span><span class="nx">same</span><span class="w"> </span><span class="nx">physical</span><span class="w"> </span><span class="nx">pages</span>
<span class="mi">4</span><span class="p">.</span><span class="w"> </span><span class="nx">Fragmentation</span><span class="w"> </span><span class="nx">Solved</span><span class="p">:</span><span class="w"> </span><span class="nx">Non</span><span class="o">-</span><span class="nx">contiguous</span><span class="w"> </span><span class="nx">physical</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">appears</span><span class="w"> </span><span class="nx">contiguous</span>
<span class="mi">5</span><span class="p">.</span><span class="w"> </span><span class="nx">Relocation</span><span class="w"> </span><span class="nx">Transparency</span><span class="p">:</span><span class="w"> </span><span class="nx">All</span><span class="w"> </span><span class="nx">programs</span><span class="w"> </span><span class="nx">can</span><span class="w"> </span><span class="nx">start</span><span class="w"> </span><span class="nx">at</span><span class="w"> </span><span class="nx">same</span><span class="w"> </span><span class="kd">virtual</span><span class="w"> </span><span class="nx">address</span>
</code></pre></div>

<hr />
<h2 id="2-address-spaces">2. Address Spaces<a class="header-link" href="#2-address-spaces" title="Permanent link">&para;</a></h2>
<h3 id="21-virtual-address-vs-physical-address">2.1 Virtual Address vs Physical Address<a class="header-link" href="#21-virtual-address-vs-physical-address" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nx">Virtual</span><span class="w"> </span><span class="nx">Address</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Address</span><span class="w"> </span><span class="nx">used</span><span class="w"> </span><span class="nx">by</span><span class="w"> </span><span class="nx">programs</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Address</span><span class="w"> </span><span class="nx">generated</span><span class="w"> </span><span class="nx">by</span><span class="w"> </span><span class="nx">CPU</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Independent</span><span class="w"> </span><span class="nx">space</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">each</span><span class="w"> </span><span class="nx">process</span>

<span class="nx">Physical</span><span class="w"> </span><span class="nx">Address</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Actual</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">hardware</span><span class="w"> </span><span class="nx">address</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Address</span><span class="w"> </span><span class="nx">accessing</span><span class="w"> </span><span class="nx">DRAM</span><span class="w"> </span><span class="nx">chips</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Unique</span><span class="w"> </span><span class="nx">across</span><span class="w"> </span><span class="nx">entire</span><span class="w"> </span><span class="nx">system</span>

<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Process</span><span class="w"> </span><span class="nx">A</span><span class="w">            </span><span class="nx">Process</span><span class="w"> </span><span class="nx">B</span><span class="w">            </span><span class="nx">Physical</span><span class="w"> </span><span class="nx">Mem</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Virtual</span><span class="w"> </span><span class="nx">Addr</span><span class="w"> </span><span class="nx">Space</span><span class="w">   </span><span class="nx">Virtual</span><span class="w"> </span><span class="nx">Addr</span><span class="w"> </span><span class="nx">Space</span><span class="w">                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="mh">0x00000000</span><span class="w">         </span><span class="mh">0x00000000</span><span class="w">         </span><span class="mh">0x00000000</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">      </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">      </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">Code</span><span class="w">    </span><span class="err">â”‚â”€â”€â”€â”€â”€â–¶â”‚</span><span class="w">   </span><span class="nx">Code</span><span class="w">    </span><span class="err">â”‚â”€â”€â”</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Frame</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">      </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">Data</span><span class="w">    </span><span class="err">â”‚â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">Data</span><span class="w">    </span><span class="err">â”‚â”€â”€â”¼â”€â”€â–¶â”‚</span><span class="w">  </span><span class="nx">Frame</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">Heap</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â–¶â”‚</span><span class="w">   </span><span class="nx">Heap</span><span class="w">    </span><span class="err">â”‚â”€â”€â”¼â”€â”€â–¶â”‚</span><span class="w">  </span><span class="nx">Frame</span><span class="w"> </span><span class="mi">2</span><span class="w">  </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">      </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â†“</span><span class="w">     </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â†“</span><span class="w">     </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â–¶â”‚</span><span class="w">  </span><span class="nx">Frame</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â†‘</span><span class="w">     </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â†‘</span><span class="w">     </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Frame</span><span class="w"> </span><span class="mi">4</span><span class="w">  </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">      </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">      </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">Stack</span><span class="w">   </span><span class="err">â”‚â”€â”€â”€â”€â”€â”€â”‚</span><span class="w">   </span><span class="nx">Stack</span><span class="w">   </span><span class="err">â”‚â”€â”€â”€â”€â”€â–¶â”‚</span><span class="w">  </span><span class="nx">Frame</span><span class="w"> </span><span class="mi">5</span><span class="w">  </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">      </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">      </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="mh">0xFFFFFFFF</span><span class="w">         </span><span class="mh">0xFFFFFFFF</span><span class="w">         </span><span class="p">(</span><span class="nx">actual</span><span class="w"> </span><span class="nx">size</span><span class="p">)</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Same</span><span class="w"> </span><span class="kd">virtual</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="mh">0x1000</span><span class="w"> </span><span class="nx">can</span><span class="w"> </span><span class="nx">map</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">different</span><span class="w"> </span><span class="nx">physical</span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">addresses</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="22-address-space-size">2.2 Address Space Size<a class="header-link" href="#22-address-space-size" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="mi">32</span><span class="o">-</span><span class="nx">bit</span><span class="w"> </span><span class="nx">System</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Virtual</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="nx">space</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="o">^</span><span class="mi">32</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">4</span><span class="nx">GB</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Physical</span><span class="w"> </span><span class="nx">memory</span><span class="p">:</span><span class="w"> </span><span class="nx">Actual</span><span class="w"> </span><span class="nx">installed</span><span class="w"> </span><span class="nx">capacity</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">g</span><span class="p">.,</span><span class="w"> </span><span class="mi">4</span><span class="nx">GB</span><span class="p">)</span>

<span class="mi">64</span><span class="o">-</span><span class="nx">bit</span><span class="w"> </span><span class="nx">System</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Theoretical</span><span class="w"> </span><span class="kd">virtual</span><span class="w"> </span><span class="nx">space</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="o">^</span><span class="mi">64</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="nx">exabytes</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Actual</span><span class="w"> </span><span class="nx">implementation</span><span class="w"> </span><span class="p">(</span><span class="nx">x86</span><span class="o">-</span><span class="mi">64</span><span class="p">):</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="mi">48</span><span class="w"> </span><span class="nx">bits</span><span class="w"> </span><span class="nx">used</span><span class="p">:</span><span class="w"> </span><span class="mi">256</span><span class="nx">TB</span><span class="w"> </span><span class="kd">virtual</span><span class="w"> </span><span class="nx">space</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">Physical</span><span class="w"> </span><span class="nx">address</span><span class="p">:</span><span class="w"> </span><span class="nx">Up</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="mi">52</span><span class="w"> </span><span class="nx">bits</span><span class="w"> </span><span class="nx">supported</span><span class="w"> </span><span class="p">(</span><span class="mi">4</span><span class="nx">PB</span><span class="p">)</span>

<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">        </span><span class="nx">x86</span><span class="o">-</span><span class="mi">64</span><span class="w"> </span><span class="nx">Virtual</span><span class="w"> </span><span class="nx">Address</span><span class="w"> </span><span class="nx">Space</span><span class="w"> </span><span class="nx">Layout</span><span class="w"> </span><span class="p">(</span><span class="mi">48</span><span class="o">-</span><span class="nx">bit</span><span class="p">)</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mh">0xFFFF</span><span class="nx">_FFFF_FFFF_FFFF</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">Kernel</span><span class="w"> </span><span class="nx">Space</span><span class="w">    </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">   </span><span class="p">(</span><span class="nx">upper</span><span class="w"> </span><span class="nx">half</span><span class="p">)</span><span class="w">    </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mh">0xFFFF</span><span class="nx">_8000_0000_0000</span><span class="w">  </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">Non</span><span class="o">-</span><span class="nx">Canonical</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="nx">Not</span><span class="w"> </span><span class="nx">usable</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">    </span><span class="p">(</span><span class="nx">hole</span><span class="p">)</span><span class="w">         </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mh">0x0000</span><span class="nx">_7FFF_FFFF_FFFF</span><span class="w">  </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">User</span><span class="w"> </span><span class="nx">Space</span><span class="w">      </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">   </span><span class="p">(</span><span class="nx">lower</span><span class="w"> </span><span class="nx">half</span><span class="p">)</span><span class="w">    </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mh">0x0000</span><span class="nx">_0000_0000_0000</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">128</span><span class="nx">TB</span><span class="w"> </span><span class="nx">available</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">each</span><span class="w"> </span><span class="nx">half</span><span class="w">                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="3-pages-and-page-frames">3. Pages and Page Frames<a class="header-link" href="#3-pages-and-page-frames" title="Permanent link">&para;</a></h2>
<h3 id="31-paging-concept">3.1 Paging Concept<a class="header-link" href="#31-paging-concept" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nx">Page</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Fixed</span><span class="o">-</span><span class="nx">size</span><span class="w"> </span><span class="nx">unit</span><span class="w"> </span><span class="nx">dividing</span><span class="w"> </span><span class="kd">virtual</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="nx">space</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Typically</span><span class="w"> </span><span class="mi">4</span><span class="nx">KB</span><span class="w"> </span><span class="p">(</span><span class="mi">4096</span><span class="w"> </span><span class="nx">bytes</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Management</span><span class="w"> </span><span class="nx">unit</span><span class="w"> </span><span class="nx">of</span><span class="w"> </span><span class="kd">virtual</span><span class="w"> </span><span class="nx">memory</span>

<span class="nx">Page</span><span class="w"> </span><span class="nx">Frame</span><span class="w"> </span><span class="p">(</span><span class="nx">Frame</span><span class="p">):</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Same</span><span class="o">-</span><span class="nx">sized</span><span class="w"> </span><span class="nx">unit</span><span class="w"> </span><span class="nx">dividing</span><span class="w"> </span><span class="nx">physical</span><span class="w"> </span><span class="nx">memory</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Same</span><span class="w"> </span><span class="nx">size</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nx">page</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Management</span><span class="w"> </span><span class="nx">unit</span><span class="w"> </span><span class="nx">of</span><span class="w"> </span><span class="nx">physical</span><span class="w"> </span><span class="nx">memory</span>

<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="nx">Virtual</span><span class="w"> </span><span class="nx">Address</span><span class="w"> </span><span class="nx">Space</span><span class="w">          </span><span class="nx">Physical</span><span class="w"> </span><span class="nx">Memory</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">           </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">Page</span><span class="w"> </span><span class="mi">0</span><span class="w">    </span><span class="err">â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚</span><span class="w">  </span><span class="nx">Frame</span><span class="w"> </span><span class="mi">3</span><span class="w">    </span><span class="err">â”‚</span><span class="w">               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">           </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">Page</span><span class="w"> </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚â”€â”€â”€â”€â”€â”€â”</span><span class="w">    </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Frame</span><span class="w"> </span><span class="mi">0</span><span class="w">    </span><span class="err">â”‚</span><span class="w">               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">      </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">Page</span><span class="w"> </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â””â”€â”€â”€â–¶â”‚</span><span class="w">  </span><span class="nx">Frame</span><span class="w"> </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">           </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">Page</span><span class="w"> </span><span class="mi">3</span><span class="w">    </span><span class="err">â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚</span><span class="w">  </span><span class="nx">Frame</span><span class="w"> </span><span class="mi">4</span><span class="w">    </span><span class="err">â”‚</span><span class="w">               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">           </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">Page</span><span class="w"> </span><span class="mi">4</span><span class="w">    </span><span class="err">â”‚â”€</span><span class="w"> </span><span class="p">(</span><span class="nx">Disk</span><span class="p">)</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Frame</span><span class="w"> </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚â—€â”€</span><span class="nx">Other</span><span class="w"> </span><span class="nx">process</span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">           </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">Page</span><span class="w"> </span><span class="mi">5</span><span class="w">    </span><span class="err">â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚</span><span class="w">  </span><span class="nx">Frame</span><span class="w"> </span><span class="mi">5</span><span class="w">    </span><span class="err">â”‚</span><span class="w">               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">           </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="nx">Frame</span><span class="w"> </span><span class="nx">same</span><span class="w"> </span><span class="nx">size</span><span class="w"> </span><span class="p">(</span><span class="mi">4</span><span class="nx">KB</span><span class="p">)</span><span class="w">                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nx">Mapping</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">arbitrary</span><span class="w"> </span><span class="p">(</span><span class="nx">non</span><span class="o">-</span><span class="nx">contiguous</span><span class="w"> </span><span class="nx">possible</span><span class="p">)</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nx">Some</span><span class="w"> </span><span class="nx">pages</span><span class="w"> </span><span class="nx">may</span><span class="w"> </span><span class="nx">be</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">disk</span><span class="w">                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="32-page-size">3.2 Page Size<a class="header-link" href="#32-page-size" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nv">Common</span><span class="w"> </span><span class="nv">page</span><span class="w"> </span><span class="nv">sizes</span>:
<span class="o">-</span><span class="w"> </span><span class="mi">4</span><span class="nv">KB</span><span class="w"> </span><span class="ss">(</span><span class="mi">2</span><span class="o">^</span><span class="mi">12</span><span class="ss">)</span>:<span class="w"> </span><span class="nv">Most</span><span class="w"> </span><span class="nv">common</span>
<span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="nv">MB</span><span class="w"> </span><span class="ss">(</span><span class="mi">2</span><span class="o">^</span><span class="mi">21</span><span class="ss">)</span>:<span class="w"> </span><span class="nv">Large</span><span class="w"> </span><span class="nv">Page</span><span class="w"> </span><span class="ss">(</span><span class="nv">Huge</span><span class="w"> </span><span class="nv">Page</span><span class="ss">)</span>
<span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="nv">GB</span><span class="w"> </span><span class="ss">(</span><span class="mi">2</span><span class="o">^</span><span class="mi">30</span><span class="ss">)</span>:<span class="w"> </span><span class="nv">Gigantic</span><span class="w"> </span><span class="nv">Page</span>

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">              </span><span class="nv">Page</span><span class="w"> </span><span class="nv">Size</span><span class="w"> </span><span class="nv">Trade</span><span class="o">-</span><span class="nv">offs</span><span class="w">                            </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                </span>â”‚<span class="w">  </span><span class="nv">Small</span><span class="w"> </span><span class="nv">Page</span><span class="w"> </span><span class="ss">(</span><span class="mi">4</span><span class="nv">KB</span><span class="ss">)</span><span class="w"> </span>â”‚<span class="w">   </span><span class="nv">Large</span><span class="w"> </span><span class="nv">Page</span><span class="w"> </span><span class="ss">(</span><span class="mi">2</span><span class="nv">MB</span><span class="ss">)</span><span class="w">     </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w"> </span><span class="nv">Internal</span><span class="w"> </span><span class="nv">Frag</span>.<span class="w"> </span>â”‚<span class="w">      </span><span class="nv">Low</span><span class="w">          </span>â”‚<span class="w">       </span><span class="nv">High</span><span class="w">             </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w"> </span><span class="nv">Page</span><span class="w"> </span><span class="nv">Table</span><span class="w">     </span>â”‚<span class="w">      </span><span class="nv">Large</span><span class="w">        </span>â”‚<span class="w">       </span><span class="nv">Small</span><span class="w">            </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w"> </span><span class="nv">TLB</span><span class="w"> </span><span class="nv">Coverage</span><span class="w">   </span>â”‚<span class="w">      </span><span class="nv">Small</span><span class="w">        </span>â”‚<span class="w">       </span><span class="nv">Large</span><span class="w">            </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w"> </span><span class="nv">Disk</span><span class="w"> </span><span class="nv">Transfer</span><span class="w">  </span>â”‚<span class="w">    </span><span class="nv">Inefficient</span><span class="w">    </span>â”‚<span class="w">      </span><span class="nv">Efficient</span><span class="w">         </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w"> </span><span class="nv">Suitable</span><span class="w"> </span><span class="k">For</span><span class="w">   </span>â”‚<span class="w">  </span><span class="nv">General</span><span class="w"> </span><span class="nv">programs</span><span class="w"> </span>â”‚<span class="w">  </span><span class="nv">Large</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span><span class="nv">apps</span><span class="w">     </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

<span class="nv">Internal</span><span class="w"> </span><span class="nv">fragmentation</span><span class="w"> </span><span class="nv">example</span>:
<span class="o">-</span><span class="w"> </span><span class="nv">Process</span><span class="w"> </span><span class="nv">needs</span><span class="w"> </span><span class="mi">4097</span><span class="w"> </span><span class="nv">bytes</span>
<span class="o">-</span><span class="w"> </span><span class="mi">4</span><span class="nv">KB</span><span class="w"> </span><span class="nv">page</span>:<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nv">pages</span><span class="w"> </span><span class="nv">needed</span><span class="w"> </span><span class="ss">(</span><span class="mi">8</span><span class="nv">KB</span><span class="ss">)</span>,<span class="w"> </span><span class="o">~</span><span class="mi">4</span><span class="nv">KB</span><span class="w"> </span><span class="nv">wasted</span>
<span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="nv">MB</span><span class="w"> </span><span class="nv">page</span>:<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nv">page</span><span class="w"> </span><span class="nv">needed</span><span class="w"> </span><span class="ss">(</span><span class="mi">2</span><span class="nv">MB</span><span class="ss">)</span>,<span class="w"> </span><span class="o">~</span><span class="mi">2</span><span class="nv">MB</span><span class="w"> </span><span class="nv">wasted</span>
</code></pre></div>

<h3 id="33-virtual-address-decomposition">3.3 Virtual Address Decomposition<a class="header-link" href="#33-virtual-address-decomposition" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="mi">4</span><span class="n">KB</span><span class="w"> </span><span class="n">page</span><span class="p">,</span><span class="w"> </span><span class="mi">32</span><span class="o">-</span><span class="n">bit</span><span class="w"> </span><span class="n">virtual</span><span class="w"> </span><span class="n">address</span><span class="o">:</span>

<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">31</span><span class="w">                              </span><span class="mi">12</span><span class="w">  </span><span class="mi">11</span><span class="w">                   </span><span class="mi">0</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="n">Virtual</span><span class="w"> </span><span class="n">Page</span><span class="w"> </span><span class="n">Number</span><span class="w"> </span><span class="p">(</span><span class="n">VPN</span><span class="p">)</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="n">Page</span><span class="w"> </span><span class="n">Offset</span><span class="w">         </span><span class="err">â”‚â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">         </span><span class="p">(</span><span class="mi">20</span><span class="w"> </span><span class="n">bits</span><span class="p">)</span><span class="w">              </span><span class="err">â”‚</span><span class="w">     </span><span class="p">(</span><span class="mi">12</span><span class="w"> </span><span class="n">bits</span><span class="p">)</span><span class="w">          </span><span class="err">â”‚â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="n">Page</span><span class="w"> </span><span class="n">Offset</span><span class="o">:</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="n">bits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Position</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="mi">4</span><span class="n">KB</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="p">(</span><span class="mi">0-4095</span><span class="p">)</span>
<span class="nl">VPN</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="n">bits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="o">^</span><span class="mi">20</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="mi">1</span><span class="w"> </span><span class="n">million</span><span class="w"> </span><span class="n">virtual</span><span class="w"> </span><span class="n">pages</span>

<span class="nl">Example</span><span class="p">:</span><span class="w"> </span><span class="n">Virtual</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="mh">0x12345678</span>
<span class="o">-</span><span class="w"> </span><span class="n">VPN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x12345</span><span class="w"> </span><span class="p">(</span><span class="n">upper</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="n">bits</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">Offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x678</span><span class="w"> </span><span class="p">(</span><span class="n">lower</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="n">bits</span><span class="p">)</span>

<span class="n">Physical</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="n">translation</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">Page</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="n">lookup</span><span class="o">:</span><span class="w"> </span><span class="n">VPN</span><span class="w"> </span><span class="mh">0x12345</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">PFN</span><span class="w"> </span><span class="mh">0x00ABC</span>
<span class="o">-</span><span class="w"> </span><span class="n">Physical</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x00ABC000</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x678</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x00ABC678</span>

<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Virtual</span><span class="w"> </span><span class="n">addr</span><span class="o">:</span><span class="w">  </span><span class="mh">0x12345</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="mh">0x678</span><span class="w">                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                  </span><span class="p">(</span><span class="n">VPN</span><span class="p">)</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="p">(</span><span class="n">Offset</span><span class="p">)</span><span class="w">                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                   </span><span class="err">â†“</span><span class="w">                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">            </span><span class="p">[</span><span class="n">Page</span><span class="w"> </span><span class="n">Table</span><span class="p">]</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                   </span><span class="err">â†“</span><span class="w">                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Physical</span><span class="w"> </span><span class="n">addr</span><span class="o">:</span><span class="w"> </span><span class="mh">0x00ABC</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="mh">0x678</span><span class="w">                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                  </span><span class="p">(</span><span class="n">PFN</span><span class="p">)</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="p">(</span><span class="n">Offset</span><span class="p">)</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="n">Copied</span><span class="w"> </span><span class="n">directly</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="4-page-tables">4. Page Tables<a class="header-link" href="#4-page-tables" title="Permanent link">&para;</a></h2>
<h3 id="41-single-level-page-table">4.1 Single-Level Page Table<a class="header-link" href="#41-single-level-page-table" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nx">Structure</span><span class="p">:</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                    </span><span class="nx">Page</span><span class="w"> </span><span class="nx">Table</span><span class="w">                                </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="nx">Index</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Valid</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">PFN</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Prot</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Other</span><span class="w"> </span><span class="nx">Flags</span><span class="w">                  </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">0</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">1</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="mh">0x003</span><span class="w"> </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">RW</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Present</span><span class="p">,</span><span class="w"> </span><span class="nx">Dirty</span><span class="w">               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">1</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">1</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="mh">0x001</span><span class="w"> </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">R</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Present</span><span class="w">                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">2</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="o">-</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="o">-</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Not</span><span class="w"> </span><span class="nx">Present</span><span class="w"> </span><span class="p">(</span><span class="nx">Disk</span><span class="p">)</span><span class="w">           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">3</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">1</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="mh">0x004</span><span class="w"> </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">RW</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Present</span><span class="w">                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">4</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">1</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="mh">0x002</span><span class="w"> </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">RWX</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Present</span><span class="w">                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="o">...</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="o">...</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="o">...</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="o">...</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="o">...</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="nx">Page</span><span class="w"> </span><span class="nx">Table</span><span class="w"> </span><span class="nx">Entry</span><span class="w"> </span><span class="p">(</span><span class="nx">PTE</span><span class="p">)</span><span class="w"> </span><span class="nx">Structure</span><span class="w"> </span><span class="p">(</span><span class="nx">x86</span><span class="p">,</span><span class="w"> </span><span class="mi">32</span><span class="o">-</span><span class="nx">bit</span><span class="p">):</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">31</span><span class="w">              </span><span class="mi">12</span><span class="w">  </span><span class="mi">11</span><span class="w">    </span><span class="mi">9</span><span class="w">    </span><span class="mi">8</span><span class="w">   </span><span class="mi">7</span><span class="w">   </span><span class="mi">6</span><span class="w">   </span><span class="mi">5</span><span class="w">   </span><span class="mi">4</span><span class="w">   </span><span class="mi">3</span><span class="w">  </span><span class="mi">2</span><span class="w">  </span><span class="mi">1</span><span class="w">  </span><span class="mi">0</span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¤â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Page</span><span class="w"> </span><span class="nx">Frame</span><span class="w">    </span><span class="err">â”‚</span><span class="nx">Reserved</span><span class="err">â”‚</span><span class="w"> </span><span class="nx">G</span><span class="w">  </span><span class="err">â”‚</span><span class="nx">PAT</span><span class="err">â”‚</span><span class="w"> </span><span class="nx">D</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="err">â”‚</span><span class="nx">PCD</span><span class="err">â”‚</span><span class="nx">PWT</span><span class="err">â”‚</span><span class="nx">U</span><span class="w"> </span><span class="err">â”‚</span><span class="nx">W</span><span class="w"> </span><span class="err">â”‚</span><span class="nx">P</span><span class="w"> </span><span class="err">â”‚â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">Number</span><span class="w">       </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="o">/</span><span class="nx">S</span><span class="err">â”‚</span><span class="o">/</span><span class="nx">R</span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”˜â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="nx">P</span><span class="w"> </span><span class="p">(</span><span class="nx">Present</span><span class="p">):</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nx">physical</span><span class="w"> </span><span class="nx">memory</span>
<span class="nx">W</span><span class="o">/</span><span class="nx">R</span><span class="p">:</span><span class="w"> </span><span class="nx">Writable</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">Read</span><span class="o">-</span><span class="nx">only</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="nx">U</span><span class="o">/</span><span class="nx">S</span><span class="p">:</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="nx">accessible</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">Kernel</span><span class="w"> </span><span class="nx">only</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="nx">A</span><span class="w"> </span><span class="p">(</span><span class="nx">Accessed</span><span class="p">):</span><span class="w"> </span><span class="nx">Has</span><span class="w"> </span><span class="nx">been</span><span class="w"> </span><span class="nx">accessed</span><span class="w"> </span><span class="p">(</span><span class="nx">read</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="nx">write</span><span class="p">)</span>
<span class="nx">D</span><span class="w"> </span><span class="p">(</span><span class="nx">Dirty</span><span class="p">):</span><span class="w"> </span><span class="nx">Has</span><span class="w"> </span><span class="nx">been</span><span class="w"> </span><span class="nx">modified</span><span class="w"> </span><span class="p">(</span><span class="nx">written</span><span class="p">)</span>

<span class="nx">Problem</span><span class="p">:</span><span class="w"> </span><span class="nx">Memory</span><span class="w"> </span><span class="nx">waste</span>
<span class="o">-</span><span class="w"> </span><span class="mi">32</span><span class="o">-</span><span class="nx">bit</span><span class="w"> </span><span class="nx">address</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="nx">KB</span><span class="w"> </span><span class="nx">page</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="o">^</span><span class="mi">20</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="nx">M</span><span class="w"> </span><span class="nx">entries</span>
<span class="o">-</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="nx">bytes</span><span class="w"> </span><span class="nx">per</span><span class="w"> </span><span class="nx">entry</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="nx">MB</span><span class="w"> </span><span class="nx">page</span><span class="w"> </span><span class="nx">table</span><span class="w"> </span><span class="nx">per</span><span class="w"> </span><span class="nx">process</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Full</span><span class="w"> </span><span class="nx">table</span><span class="w"> </span><span class="nx">needed</span><span class="w"> </span><span class="nx">even</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">most</span><span class="w"> </span><span class="nx">space</span><span class="w"> </span><span class="nx">unused</span>
</code></pre></div>

<h3 id="42-multi-level-page-table">4.2 Multi-Level Page Table<a class="header-link" href="#42-multi-level-page-table" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="mf">2</span><span class="o">-</span><span class="n">Level</span><span class="w"> </span><span class="n">Page</span><span class="w"> </span><span class="nb">Tab</span><span class="n">le</span><span class="w"> </span><span class="p">(</span><span class="mf">32</span><span class="o">-</span><span class="n">bit</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="n">KB</span><span class="w"> </span><span class="n">page</span><span class="p">):</span>

<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mf">31</span><span class="w">                </span><span class="mf">22</span><span class="w">  </span><span class="mf">21</span><span class="w">              </span><span class="mf">12</span><span class="w">  </span><span class="mf">11</span><span class="w">             </span><span class="mf">0</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Page</span><span class="w"> </span><span class="n">Dir</span><span class="w"> </span><span class="n">Index</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Page</span><span class="w"> </span><span class="nb">Tab</span><span class="n">le</span><span class="w"> </span><span class="n">Index</span><span class="w"> </span><span class="err">â”‚</span><span class="w">   </span><span class="n">Page</span><span class="w"> </span><span class="n">Offset</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="p">(</span><span class="mf">10</span><span class="w"> </span><span class="n">bits</span><span class="p">)</span><span class="w">     </span><span class="err">â”‚</span><span class="w">    </span><span class="p">(</span><span class="mf">10</span><span class="w"> </span><span class="n">bits</span><span class="p">)</span><span class="w">      </span><span class="err">â”‚</span><span class="w">    </span><span class="p">(</span><span class="mf">12</span><span class="w"> </span><span class="n">bits</span><span class="p">)</span><span class="w">     </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="n">Translation</span><span class="w"> </span><span class="n">Process</span><span class="p">:</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">Virtual</span><span class="w"> </span><span class="n">Address</span><span class="p">:</span><span class="w"> </span><span class="err">[</span><span class="n">Dir</span><span class="w"> </span><span class="n">Index</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="nb">Tab</span><span class="n">le</span><span class="w"> </span><span class="n">Index</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="n">Offset</span><span class="err">]</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">            </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                         </span><span class="err">â–¼</span><span class="w">            </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">   </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="n">Page</span><span class="w"> </span><span class="n">Directory</span><span class="w"> </span><span class="p">(</span><span class="mf">4</span><span class="n">KB</span><span class="p">)</span><span class="w">     </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="mf">1024</span><span class="w"> </span><span class="n">entries</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mf">4</span><span class="n">B</span><span class="w">        </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Entry</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">PT0</span><span class="w">      </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Entry</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">PT1</span><span class="w">      </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Entry</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">null</span><span class="w">     </span><span class="err">â”‚â†â”€â”€</span><span class="w"> </span><span class="n">Unused</span><span class="w"> </span><span class="n">regions</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="nb">tab</span><span class="n">le</span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="mf">...</span><span class="w">                </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Entry</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">PTN</span><span class="w">      </span><span class="err">â”‚â”€â”€â”€â”€â”¼â”€â”€â”€â”˜</span><span class="w">           </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">    </span><span class="err">â”‚</span><span class="w">               </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">               </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                  </span><span class="err">â”‚</span><span class="w">                              </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                  </span><span class="err">â–¼</span><span class="w">                              </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">              </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="n">Page</span><span class="w"> </span><span class="nb">Tab</span><span class="n">le</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="p">(</span><span class="mf">4</span><span class="n">KB</span><span class="p">)</span><span class="w">       </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="mf">1024</span><span class="w"> </span><span class="n">entries</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mf">4</span><span class="n">B</span><span class="w">        </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">    </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Entry</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Frame</span><span class="w"> </span><span class="n">X</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Entry</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Frame</span><span class="w"> </span><span class="n">Y</span><span class="w">  </span><span class="err">â”‚â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="mf">...</span><span class="w">                </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">    </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">              </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                  </span><span class="err">â”‚</span><span class="w">                              </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                  </span><span class="err">â–¼</span><span class="w">                              </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">        </span><span class="n">Physical</span><span class="w"> </span><span class="n">Frame</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Physical</span><span class="w"> </span><span class="n">Address</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="n">Advantage</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="nb">tab</span><span class="n">le</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="kr">for</span><span class="w"> </span><span class="n">unused</span><span class="w"> </span><span class="n">regions</span>
<span class="o">-</span><span class="w"> </span><span class="n">Large</span><span class="w"> </span><span class="n">savings</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">virtual</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">empty</span>
</code></pre></div>

<h3 id="43-4-level-page-table-x86-64">4.3 4-Level Page Table (x86-64)<a class="header-link" href="#43-4-level-page-table-x86-64" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="mf">4</span><span class="o">-</span><span class="n">Level</span><span class="w"> </span><span class="n">Page</span><span class="w"> </span><span class="nb">Tab</span><span class="n">le</span><span class="w"> </span><span class="kr">for</span><span class="w"> </span><span class="mf">64</span><span class="o">-</span><span class="n">bit</span><span class="w"> </span><span class="kr">sys</span><span class="n">tems</span><span class="p">:</span>

<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mf">63</span><span class="w">    </span><span class="mf">48</span><span class="w"> </span><span class="mf">47</span><span class="w">    </span><span class="mf">39</span><span class="w"> </span><span class="mf">38</span><span class="w">    </span><span class="mf">30</span><span class="w"> </span><span class="mf">29</span><span class="w">    </span><span class="mf">21</span><span class="w"> </span><span class="mf">20</span><span class="w">    </span><span class="mf">12</span><span class="w"> </span><span class="mf">11</span><span class="w">         </span><span class="mf">0</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Sign</span><span class="w"> </span><span class="err">â”‚</span><span class="w">  </span><span class="n">PML4</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">PDPT</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="n">PD</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="n">PT</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="n">Offset</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Ext</span><span class="w">  </span><span class="err">â”‚</span><span class="p">(</span><span class="mf">9</span><span class="n">bits</span><span class="p">)</span><span class="w"> </span><span class="err">â”‚</span><span class="p">(</span><span class="mf">9</span><span class="n">bits</span><span class="p">)</span><span class="w"> </span><span class="err">â”‚</span><span class="p">(</span><span class="mf">9</span><span class="n">bits</span><span class="p">)</span><span class="w"> </span><span class="err">â”‚</span><span class="p">(</span><span class="mf">9</span><span class="n">bits</span><span class="p">)</span><span class="w"> </span><span class="err">â”‚</span><span class="w">  </span><span class="p">(</span><span class="mf">12</span><span class="n">bits</span><span class="p">)</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="n">PML4</span><span class="p">:</span><span class="w"> </span><span class="n">Page</span><span class="w"> </span><span class="n">Map</span><span class="w"> </span><span class="n">Level</span><span class="w"> </span><span class="mf">4</span>
<span class="n">PDPT</span><span class="p">:</span><span class="w"> </span><span class="n">Page</span><span class="w"> </span><span class="n">Directory</span><span class="w"> </span><span class="n">Pointer</span><span class="w"> </span><span class="nb">Tab</span><span class="n">le</span>
<span class="n">PD</span><span class="p">:</span><span class="w"> </span><span class="n">Page</span><span class="w"> </span><span class="n">Directory</span>
<span class="n">PT</span><span class="p">:</span><span class="w"> </span><span class="n">Page</span><span class="w"> </span><span class="nb">Tab</span><span class="n">le</span>

<span class="n">Translation</span><span class="w"> </span><span class="n">Process</span><span class="p">:</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">CR3</span><span class="w"> </span><span class="n">Register</span><span class="w">                                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span><span class="w">                                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">        </span><span class="err">â–¼</span><span class="w">                                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">      </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">      </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="n">PML4</span><span class="w">   </span><span class="err">â”‚â”€â”€â”€â”€â”€â–¶â”‚</span><span class="w">  </span><span class="n">PDPT</span><span class="w">   </span><span class="err">â”‚â”€â”€â”€â”€â”€â–¶â”‚</span><span class="w">   </span><span class="n">PD</span><span class="w">    </span><span class="err">â”‚</span><span class="w">            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="p">(</span><span class="mf">512</span><span class="n">E</span><span class="p">)</span><span class="w">  </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w"> </span><span class="p">(</span><span class="mf">512</span><span class="n">E</span><span class="p">)</span><span class="w">  </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w"> </span><span class="p">(</span><span class="mf">512</span><span class="n">E</span><span class="p">)</span><span class="w">  </span><span class="err">â”‚</span><span class="w">            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">      </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">      </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                          </span><span class="err">â”‚</span><span class="w">                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                          </span><span class="err">â–¼</span><span class="w">                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                    </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                    </span><span class="err">â”‚</span><span class="w">   </span><span class="n">PT</span><span class="w">    </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                    </span><span class="err">â”‚</span><span class="w"> </span><span class="p">(</span><span class="mf">512</span><span class="n">E</span><span class="p">)</span><span class="w">  </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                    </span><span class="err">â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                         </span><span class="err">â”‚</span><span class="w">                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                         </span><span class="err">â–¼</span><span class="w">                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                              </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                              </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Physical</span><span class="w"> </span><span class="n">Frame</span><span class="w"> </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                              </span><span class="err">â”‚</span><span class="w">   </span><span class="o">+</span><span class="w"> </span><span class="n">Offset</span><span class="w">      </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                              </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Each</span><span class="w"> </span><span class="n">level</span><span class="p">:</span><span class="w"> </span><span class="mf">512</span><span class="w"> </span><span class="n">entries</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mf">8</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4</span><span class="n">KB</span><span class="w">                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Maximum</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">accesses</span><span class="w"> </span><span class="p">(</span><span class="kr">on</span><span class="w"> </span><span class="n">TLB</span><span class="w"> </span><span class="n">miss</span><span class="p">)</span><span class="w">                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="44-inverted-page-table">4.4 Inverted Page Table<a class="header-link" href="#44-inverted-page-table" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nv">Traditional</span><span class="w"> </span><span class="nv">Page</span><span class="w"> </span><span class="nv">Table</span>:
<span class="o">-</span><span class="w"> </span><span class="nv">Entries</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">virtual</span><span class="w"> </span><span class="nv">pages</span>
<span class="o">-</span><span class="w"> </span><span class="nv">Separate</span><span class="w"> </span><span class="nv">table</span><span class="w"> </span><span class="nv">per</span><span class="w"> </span><span class="nv">process</span>

<span class="nv">Inverted</span><span class="w"> </span><span class="nv">Page</span><span class="w"> </span><span class="nv">Table</span>:
<span class="o">-</span><span class="w"> </span><span class="nv">Entries</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">physical</span><span class="w"> </span><span class="nv">frames</span><span class="w"> </span><span class="nv">only</span>
<span class="o">-</span><span class="w"> </span><span class="nv">One</span><span class="w"> </span><span class="nv">table</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">entire</span><span class="w"> </span><span class="nv">system</span>

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">              </span><span class="nv">Inverted</span><span class="w"> </span><span class="nv">Page</span><span class="w"> </span><span class="nv">Table</span><span class="w">                             </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w"> </span><span class="nv">Frame</span><span class="w"> </span>â”‚<span class="w">  </span><span class="nv">PID</span><span class="w">   </span>â”‚<span class="w">     </span><span class="nv">VPN</span><span class="w">      </span>â”‚<span class="w">         </span><span class="nv">Chain</span><span class="w">               </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">   </span><span class="mi">0</span><span class="w">   </span>â”‚<span class="w">   </span><span class="mi">42</span><span class="w">   </span>â”‚<span class="w">   </span><span class="mi">0</span><span class="nv">x12345</span><span class="w">    </span>â”‚<span class="w">         </span><span class="nv">null</span><span class="w">                </span>â”‚
â”‚<span class="w">   </span><span class="mi">1</span><span class="w">   </span>â”‚<span class="w">   </span><span class="mi">17</span><span class="w">   </span>â”‚<span class="w">   </span><span class="mi">0</span><span class="nv">x00ABC</span><span class="w">    </span>â”‚<span class="w">         </span>â†’<span class="w"> </span><span class="mi">5</span><span class="w">                 </span>â”‚
â”‚<span class="w">   </span><span class="mi">2</span><span class="w">   </span>â”‚<span class="w">   </span><span class="mi">42</span><span class="w">   </span>â”‚<span class="w">   </span><span class="mi">0</span><span class="nv">x67890</span><span class="w">    </span>â”‚<span class="w">         </span><span class="nv">null</span><span class="w">                </span>â”‚
â”‚<span class="w">   </span><span class="mi">3</span><span class="w">   </span>â”‚<span class="w">   </span><span class="mi">25</span><span class="w">   </span>â”‚<span class="w">   </span><span class="mi">0</span><span class="nv">x11111</span><span class="w">    </span>â”‚<span class="w">         </span><span class="nv">null</span><span class="w">                </span>â”‚
â”‚<span class="w">   </span><span class="mi">4</span><span class="w">   </span>â”‚<span class="w">   </span><span class="mi">17</span><span class="w">   </span>â”‚<span class="w">   </span><span class="mi">0</span><span class="nv">x00DEF</span><span class="w">    </span>â”‚<span class="w">         </span><span class="nv">null</span><span class="w">                </span>â”‚
â”‚<span class="w">   </span><span class="mi">5</span><span class="w">   </span>â”‚<span class="w">   </span><span class="mi">33</span><span class="w">   </span>â”‚<span class="w">   </span><span class="mi">0</span><span class="nv">x00ABC</span><span class="w">    </span>â”‚<span class="w">         </span><span class="nv">null</span><span class="w"> </span><span class="ss">(</span><span class="nv">hash</span><span class="w"> </span><span class="nv">chain</span><span class="ss">)</span><span class="w">   </span>â”‚
â”‚<span class="w">  </span>...<span class="w">  </span>â”‚<span class="w">  </span>...<span class="w">   </span>â”‚<span class="w">     </span>...<span class="w">      </span>â”‚<span class="w">         </span>...<span class="w">                 </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

<span class="nv">Search</span>:<span class="w"> </span><span class="nv">Hash</span><span class="w"> </span><span class="ss">(</span><span class="nv">PID</span>,<span class="w"> </span><span class="nv">VPN</span><span class="ss">)</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">search</span><span class="w"> </span><span class="nv">table</span>
<span class="o">-</span><span class="w"> </span><span class="nv">Follow</span><span class="w"> </span><span class="nv">chain</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">hash</span><span class="w"> </span><span class="nv">collision</span>
<span class="o">-</span><span class="w"> </span><span class="nv">Advantage</span>:<span class="w"> </span><span class="nv">Memory</span><span class="w"> </span><span class="nv">savings</span><span class="w"> </span><span class="ss">(</span><span class="nv">proportional</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">physical</span><span class="w"> </span><span class="nv">memory</span><span class="ss">)</span>
<span class="o">-</span><span class="w"> </span><span class="nv">Disadvantage</span>:<span class="w"> </span><span class="nv">Search</span><span class="w"> </span><span class="nv">time</span><span class="w"> </span><span class="ss">(</span><span class="nv">hash</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">chain</span><span class="ss">)</span>
</code></pre></div>

<hr />
<h2 id="5-tlb-translation-lookaside-buffer">5. TLB (Translation Lookaside Buffer)<a class="header-link" href="#5-tlb-translation-lookaside-buffer" title="Permanent link">&para;</a></h2>
<h3 id="51-need-for-tlb">5.1 Need for TLB<a class="header-link" href="#51-need-for-tlb" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>Page table access overhead:
- 4-level page table: 4 additional memory accesses
- 4 table lookups before actual data access

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Memory access without TLB:                                 â”‚
â”‚                                                             â”‚
â”‚  1. Access PML4 (memory)                                   â”‚
â”‚  2. Access PDPT (memory)                                   â”‚
â”‚  3. Access PD (memory)                                     â”‚
â”‚  4. Access PT (memory)                                     â”‚
â”‚  5. Access actual data (memory)                            â”‚
â”‚                                                             â”‚
â”‚  Total 5 memory accesses! (400+ cycles)                    â”‚
â”‚                                                             â”‚
â”‚  With TLB hit:                                             â”‚
â”‚  1. TLB lookup (~1 cycle)                                  â”‚
â”‚  2. Access actual data (memory)                            â”‚
â”‚                                                             â”‚
â”‚  Total ~100 cycles (TLB lookup + memory)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="52-tlb-structure">5.2 TLB Structure<a class="header-link" href="#52-tlb-structure" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>TLB (Translation Lookaside Buffer):
- Caches recent translation results
- Fully associative or set associative structure
- Very small (32-1024 entries)
- Very fast (~1 cycle)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         TLB                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ASID â”‚ Valid â”‚   VPN    â”‚   PFN    â”‚    Permissions         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  42  â”‚   1   â”‚ 0x12345  â”‚ 0x00ABC  â”‚    R/W, User           â”‚
â”‚  42  â”‚   1   â”‚ 0x12346  â”‚ 0x00ABD  â”‚    R/W, User           â”‚
â”‚  17  â”‚   1   â”‚ 0x00100  â”‚ 0x00300  â”‚    R, User             â”‚
â”‚  42  â”‚   1   â”‚ 0x7FFFF  â”‚ 0x00123  â”‚    R/W, User           â”‚
â”‚  17  â”‚   1   â”‚ 0x00200  â”‚ 0x00400  â”‚    R/W/X, User         â”‚
â”‚ ...  â”‚  ...  â”‚   ...    â”‚   ...    â”‚    ...                 â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ASID (Address Space ID):
- Distinguishes processes
- Avoids TLB flush on context switch
</code></pre></div>

<h3 id="53-tlb-operation">5.3 TLB Operation<a class="header-link" href="#53-tlb-operation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nx">Address</span><span class="w"> </span><span class="nx">Translation</span><span class="w"> </span><span class="nx">Process</span><span class="p">:</span>

<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nx">CPU</span><span class="w"> </span><span class="nx">generates</span><span class="w"> </span><span class="kd">virtual</span><span class="w"> </span><span class="nx">address</span><span class="w">                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â–¼</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">TLB</span><span class="w"> </span><span class="nx">Lookup</span><span class="w">     </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="nx">Done</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nx">parallel</span><span class="w"> </span><span class="p">(</span><span class="nx">VPN</span><span class="w"> </span><span class="nx">extract</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="nx">TLB</span><span class="p">)</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”</span><span class="w">                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w">                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Hit</span><span class="p">?</span><span class="w">        </span><span class="nx">Miss</span><span class="w">                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w">                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â–¼</span><span class="w">           </span><span class="err">â–¼</span><span class="w">                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">PFN</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Page</span><span class="w"> </span><span class="nx">Table</span><span class="w"> </span><span class="nx">Walk</span><span class="w">                     </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="nx">obtain</span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="p">(</span><span class="nx">done</span><span class="w"> </span><span class="nx">by</span><span class="w"> </span><span class="nx">HW</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="nx">SW</span><span class="p">)</span><span class="w">                  </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”¬â”€â”€â”€â”˜</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="nx">Access</span><span class="w"> </span><span class="nx">PML4</span><span class="w">                      </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="nx">Access</span><span class="w"> </span><span class="nx">PDPT</span><span class="w">                      </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="nx">Access</span><span class="w"> </span><span class="nx">PD</span><span class="w">                        </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">4</span><span class="p">.</span><span class="w"> </span><span class="nx">Access</span><span class="w"> </span><span class="nx">PT</span><span class="w">                        </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">5</span><span class="p">.</span><span class="w"> </span><span class="nx">Store</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nx">TLB</span><span class="w">              </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">                       </span><span class="err">â”‚</span><span class="w">                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                 </span><span class="err">â”‚</span><span class="w">                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                 </span><span class="err">â–¼</span><span class="w">                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="nx">Physical</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">PFN</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">Offset</span><span class="w">                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                 </span><span class="err">â”‚</span><span class="w">                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                 </span><span class="err">â–¼</span><span class="w">                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="nx">Cache</span><span class="o">/</span><span class="nx">Memory</span><span class="w"> </span><span class="nx">access</span><span class="w">                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="54-tlb-performance">5.4 TLB Performance<a class="header-link" href="#54-tlb-performance" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>TLB Hit Rate and AMAT:

Typical TLB hit rate: 99% or higher

AMAT Calculation:
AMAT = TLB_Hit_Rate Ã— (TLB_Time + Mem_Time) +
       TLB_Miss_Rate Ã— (TLB_Time + Walk_Time + Mem_Time)

Example:
<span class="k">-</span> TLB access: 1 cycle
<span class="k">-</span> Page walk: 100 cycles (4 memory accesses)
<span class="k">-</span> Memory access: 100 cycles
<span class="k">-</span> TLB hit rate: 99%

TLB hit: 1 + 100 = 101 cycles
TLB miss: 1 + 100 + 100 = 201 cycles

AMAT = 0.99 Ã— 101 + 0.01 Ã— 201
     = 99.99 + 2.01
     = 102 cycles

Without TLB: 500 cycles (5 memory accesses)
â†’ TLB provides ~5x performance improvement

TLB Coverage:
<span class="k">-</span> 64-entry TLB, 4KB pages: 256KB
<span class="k">-</span> 64-entry TLB, 2MB pages: 128MB
<span class="k">-</span> Large pages increase TLB efficiency
</code></pre></div>

<hr />
<h2 id="6-page-faults-and-page-replacement">6. Page Faults and Page Replacement<a class="header-link" href="#6-page-faults-and-page-replacement" title="Permanent link">&para;</a></h2>
<h3 id="61-page-fault">6.1 Page Fault<a class="header-link" href="#61-page-fault" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Definition</span><span class="o">:</span><span class="w"> </span><span class="n">Situation</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">accessed</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">physical</span><span class="w"> </span><span class="n">memory</span>

<span class="n">Page</span><span class="w"> </span><span class="n">Fault</span><span class="w"> </span><span class="n">Causes</span><span class="o">:</span>
<span class="mi">1</span><span class="o">.</span><span class="w"> </span><span class="n">Page</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">disk</span><span class="w"> </span><span class="o">(</span><span class="n">swapped</span><span class="w"> </span><span class="n">out</span><span class="o">)</span>
<span class="mi">2</span><span class="o">.</span><span class="w"> </span><span class="n">Accessing</span><span class="w"> </span><span class="n">unallocated</span><span class="w"> </span><span class="n">address</span>
<span class="mi">3</span><span class="o">.</span><span class="w"> </span><span class="n">Permission</span><span class="w"> </span><span class="n">violation</span><span class="w"> </span><span class="o">(</span><span class="n">write</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">read</span><span class="o">-</span><span class="n">only</span><span class="w"> </span><span class="n">page</span><span class="o">,</span><span class="w"> </span><span class="n">etc</span><span class="o">.)</span>

<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                  </span><span class="n">Page</span><span class="w"> </span><span class="n">Fault</span><span class="w"> </span><span class="n">Handling</span><span class="w"> </span><span class="n">Process</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">1</span><span class="o">.</span><span class="w"> </span><span class="n">CPU</span><span class="w"> </span><span class="n">accesses</span><span class="w"> </span><span class="n">virtual</span><span class="w"> </span><span class="n">address</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â–¼</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">2</span><span class="o">.</span><span class="w"> </span><span class="n">MMU</span><span class="w"> </span><span class="n">checks</span><span class="w"> </span><span class="n">PTE</span><span class="o">:</span><span class="w"> </span><span class="n">Present</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â–¼</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">3</span><span class="o">.</span><span class="w"> </span><span class="n">Page</span><span class="w"> </span><span class="n">Fault</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="n">raised</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â–¼</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">4</span><span class="o">.</span><span class="w"> </span><span class="n">OS</span><span class="w"> </span><span class="n">Page</span><span class="w"> </span><span class="n">Fault</span><span class="w"> </span><span class="n">Handler</span><span class="w"> </span><span class="n">executes</span><span class="w">                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">                                       </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â–¼</span><span class="w">                                       </span><span class="err">â–¼</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Valid</span><span class="w"> </span><span class="n">access</span><span class="o">?</span><span class="w">                          </span><span class="n">Invalid</span><span class="w"> </span><span class="n">access</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">                                       </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â–¼</span><span class="w">                                       </span><span class="err">â–¼</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">5</span><span class="o">.</span><span class="w"> </span><span class="n">Find</span><span class="w"> </span><span class="n">free</span><span class="w"> </span><span class="n">frame</span><span class="w">                      </span><span class="n">Raise</span><span class="w"> </span><span class="n">SIGSEGV</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="o">(</span><span class="n">replace</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">none</span><span class="o">)</span><span class="w">               </span><span class="o">(</span><span class="n">terminate</span><span class="w"> </span><span class="n">proc</span><span class="o">)</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â–¼</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">6</span><span class="o">.</span><span class="w"> </span><span class="n">Read</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">disk</span><span class="w"> </span><span class="o">(~</span><span class="mi">10</span><span class="n">ms</span><span class="o">)</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â–¼</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">7</span><span class="o">.</span><span class="w"> </span><span class="n">Update</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="o">(</span><span class="n">Present</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="w">                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â–¼</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">8</span><span class="o">.</span><span class="w"> </span><span class="n">Re</span><span class="o">-</span><span class="n">execute</span><span class="w"> </span><span class="n">instruction</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="62-page-fault-cost">6.2 Page Fault Cost<a class="header-link" href="#62-page-fault-cost" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nv">Page</span><span class="w"> </span><span class="nv">Fault</span><span class="w"> </span><span class="nv">Time</span>:
<span class="o">-</span><span class="w"> </span><span class="nv">Disk</span><span class="w"> </span><span class="nv">read</span>:<span class="w"> </span><span class="o">~</span><span class="mi">10</span><span class="nv">ms</span><span class="w"> </span><span class="ss">(</span><span class="nv">HDD</span><span class="ss">)</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="o">~</span><span class="mi">0</span>.<span class="mi">1</span><span class="nv">ms</span><span class="w"> </span><span class="ss">(</span><span class="nv">SSD</span><span class="ss">)</span>
<span class="o">-</span><span class="w"> </span><span class="nv">CPU</span><span class="w"> </span><span class="nv">clock</span>:<span class="w"> </span><span class="mi">3</span><span class="nv">GHz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>.<span class="mi">33</span><span class="nv">ns</span><span class="o">/</span><span class="nv">cycle</span>

<span class="nv">Cycle</span><span class="w"> </span><span class="nv">count</span>:
<span class="o">-</span><span class="w"> </span><span class="nv">HDD</span>:<span class="w"> </span><span class="mi">10</span><span class="nv">ms</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">0</span>.<span class="mi">33</span><span class="nv">ns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span>,<span class="mi">000</span>,<span class="mi">000</span><span class="w"> </span><span class="nv">cycles</span>
<span class="o">-</span><span class="w"> </span><span class="nv">SSD</span>:<span class="w"> </span><span class="mi">0</span>.<span class="mi">1</span><span class="nv">ms</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">0</span>.<span class="mi">33</span><span class="nv">ns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">300</span>,<span class="mi">000</span><span class="w"> </span><span class="nv">cycles</span>

<span class="nv">Normal</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span><span class="nv">access</span>:<span class="w"> </span><span class="o">~</span><span class="mi">100</span><span class="w"> </span><span class="nv">cycles</span>

<span class="nv">Performance</span><span class="w"> </span><span class="nv">Impact</span><span class="w"> </span><span class="nv">Calculation</span>:
<span class="k">For</span><span class="w"> </span><span class="nv">page</span><span class="w"> </span><span class="nv">fault</span><span class="w"> </span><span class="nv">rate</span><span class="w"> </span><span class="nv">p</span>:
<span class="nv">EAT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">(</span><span class="mi">1</span><span class="o">-</span><span class="nv">p</span><span class="ss">)</span><span class="w"> </span>Ã—<span class="w"> </span><span class="mi">100</span><span class="nv">ns</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">p</span><span class="w"> </span>Ã—<span class="w"> </span><span class="mi">10</span><span class="nv">ms</span>
<span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="nv">ns</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">p</span><span class="w"> </span>Ã—<span class="w"> </span><span class="mi">10</span>,<span class="mi">000</span>,<span class="mi">000</span><span class="nv">ns</span>

<span class="nv">To</span><span class="w"> </span><span class="nv">limit</span><span class="w"> </span><span class="nv">performance</span><span class="w"> </span><span class="nv">degradation</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="mi">10</span><span class="o">%</span>:
<span class="mi">110</span><span class="nv">ns</span><span class="w"> </span>â‰¥<span class="w"> </span><span class="mi">100</span><span class="nv">ns</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">p</span><span class="w"> </span>Ã—<span class="w"> </span><span class="mi">10</span>,<span class="mi">000</span>,<span class="mi">000</span><span class="nv">ns</span>
<span class="nv">p</span><span class="w"> </span>â‰¤<span class="w"> </span><span class="mi">0</span>.<span class="mi">000001</span><span class="w"> </span><span class="ss">(</span><span class="nv">one</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">million</span><span class="ss">)</span>

â†’<span class="w"> </span><span class="nv">Page</span><span class="w"> </span><span class="nv">fault</span><span class="w"> </span><span class="nv">rate</span><span class="w"> </span><span class="nv">must</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">very</span><span class="w"> </span><span class="nv">low</span><span class="o">!</span>
</code></pre></div>

<h3 id="63-demand-paging-vs-prepaging">6.3 Demand Paging vs Prepaging<a class="header-link" href="#63-demand-paging-vs-prepaging" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Demand</span><span class="w"> </span><span class="n">Paging</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">Load</span><span class="w"> </span><span class="n">pages</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">needed</span>
<span class="o">-</span><span class="w"> </span><span class="n">Low</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">usage</span><span class="w"> </span><span class="n">initially</span>
<span class="o">-</span><span class="w"> </span><span class="n">Page</span><span class="w"> </span><span class="n">fault</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">access</span>

<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">At</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">start</span><span class="p">:</span><span class="w">                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Code</span><span class="w"> </span><span class="n">pages</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">loaded</span><span class="w">                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Page</span><span class="w"> </span><span class="n">fault</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">instruction</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Only</span><span class="w"> </span><span class="n">needed</span><span class="w"> </span><span class="n">pages</span><span class="w"> </span><span class="n">loaded</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="n">Prepaging</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">Preload</span><span class="w"> </span><span class="n">related</span><span class="w"> </span><span class="n">pages</span>
<span class="o">-</span><span class="w"> </span><span class="n">Reduced</span><span class="w"> </span><span class="n">initial</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">faults</span>
<span class="o">-</span><span class="w"> </span><span class="n">May</span><span class="w"> </span><span class="nb">load</span><span class="w"> </span><span class="n">unused</span><span class="w"> </span><span class="n">pages</span>

<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">At</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">start</span><span class="p">:</span><span class="w">                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Predict</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nb">preload</span><span class="w"> </span><span class="n">Working</span><span class="w"> </span><span class="n">Set</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Preload</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">part</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="n">region</span><span class="w">                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Fewer</span><span class="w"> </span><span class="n">initial</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">faults</span><span class="w">                                </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="7-page-replacement-algorithms">7. Page Replacement Algorithms<a class="header-link" href="#7-page-replacement-algorithms" title="Permanent link">&para;</a></h2>
<h3 id="71-fifo-first-in-first-out">7.1 FIFO (First-In, First-Out)<a class="header-link" href="#71-fifo-first-in-first-out" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Principle</span><span class="o">:</span><span class="w"> </span><span class="n">Replace</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">entered</span><span class="w"> </span><span class="n">first</span>

<span class="n">Example</span><span class="o">:</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">frames</span><span class="o">,</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">5</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span>

<span class="err">â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="n">Ref</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Frame</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Frame</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Frame</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">â”‚</span><span class="n">Result</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">2</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">3</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">4</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">4</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">3</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">replaced</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">4</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">3</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">replaced</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">2</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">4</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">replaced</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">5</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">5</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">replaced</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">5</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Hit</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">2</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">5</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Hit</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">3</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">replaced</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">4</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">3</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">4</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">replaced</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">5</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">3</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">4</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">5</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">replaced</span>
<span class="err">â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="n">Total</span><span class="w"> </span><span class="n">misses</span><span class="o">:</span><span class="w"> </span><span class="mi">10</span><span class="o">,</span><span class="w"> </span><span class="n">Hits</span><span class="o">:</span><span class="w"> </span><span class="mi">2</span>

<span class="n">Belady</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">Anomaly</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">In</span><span class="w"> </span><span class="n">FIFO</span><span class="o">,</span><span class="w"> </span><span class="n">miss</span><span class="w"> </span><span class="n">rate</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">increase</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">frames</span>
<span class="o">-</span><span class="w"> </span><span class="n">Counter</span><span class="o">-</span><span class="n">intuitive</span><span class="w"> </span><span class="n">phenomenon</span>
</code></pre></div>

<h3 id="72-optimal-opt">7.2 Optimal (OPT)<a class="header-link" href="#72-optimal-opt" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Principle</span><span class="o">:</span><span class="w"> </span><span class="n">Replace</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">won</span><span class="err">&#39;</span><span class="n">t</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">longest</span><span class="w"> </span><span class="n">time</span>

<span class="n">Example</span><span class="o">:</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">frames</span><span class="o">,</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">5</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span>

<span class="err">â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="n">Ref</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Frame</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Frame</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Frame</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">â”‚</span><span class="n">Result</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Future</span><span class="w"> </span><span class="n">refs</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">2</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">3</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">4</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">4</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">latest</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">4</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Hit</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">2</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">4</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Hit</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">5</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">5</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">again</span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">5</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Hit</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">2</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">5</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Hit</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">3</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">latest</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">4</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">4</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">3</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">latest</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">5</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">4</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">5</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">again</span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="n">Total</span><span class="w"> </span><span class="n">misses</span><span class="o">:</span><span class="w"> </span><span class="mi">8</span><span class="o">,</span><span class="w"> </span><span class="n">Hits</span><span class="o">:</span><span class="w"> </span><span class="mi">4</span>

<span class="n">Optimal</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">implementable</span><span class="w"> </span><span class="o">(</span><span class="n">requires</span><span class="w"> </span><span class="n">future</span><span class="w"> </span><span class="n">prediction</span><span class="o">)</span>
<span class="err">â†’</span><span class="w"> </span><span class="n">Used</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">benchmark</span>
</code></pre></div>

<h3 id="73-lru-least-recently-used">7.3 LRU (Least Recently Used)<a class="header-link" href="#73-lru-least-recently-used" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Principle</span><span class="o">:</span><span class="w"> </span><span class="n">Replace</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">longest</span><span class="w"> </span><span class="n">ago</span>

<span class="n">Example</span><span class="o">:</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">frames</span><span class="o">,</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">5</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span>

<span class="err">â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="n">Ref</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Frame</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Frame</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Frame</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">â”‚</span><span class="n">Result</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">LRU</span><span class="w"> </span><span class="n">order</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">1</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">2</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="w">            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">3</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">4</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">4</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">3</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="w"> </span><span class="o">(</span><span class="mi">1</span><span class="w"> </span><span class="n">repl</span><span class="o">)</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">4</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">3</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">1</span><span class="w"> </span><span class="o">(</span><span class="mi">2</span><span class="w"> </span><span class="n">repl</span><span class="o">)</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">2</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">4</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">4</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="w"> </span><span class="o">(</span><span class="mi">3</span><span class="w"> </span><span class="n">repl</span><span class="o">)</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">5</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">5</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">5</span><span class="w"> </span><span class="o">(</span><span class="mi">4</span><span class="w"> </span><span class="n">repl</span><span class="o">)</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">5</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Hit</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="mi">5</span><span class="o">,</span><span class="mi">1</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">2</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">5</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Hit</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">5</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">3</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="w"> </span><span class="o">(</span><span class="mi">5</span><span class="w"> </span><span class="n">repl</span><span class="o">)</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">4</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">3</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">4</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="w"> </span><span class="o">(</span><span class="mi">1</span><span class="w"> </span><span class="n">repl</span><span class="o">)</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="mi">5</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">3</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">4</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">5</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Miss</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="w"> </span><span class="o">(</span><span class="mi">2</span><span class="w"> </span><span class="n">repl</span><span class="o">)</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="n">Total</span><span class="w"> </span><span class="n">misses</span><span class="o">:</span><span class="w"> </span><span class="mi">10</span><span class="o">,</span><span class="w"> </span><span class="n">Hits</span><span class="o">:</span><span class="w"> </span><span class="mi">2</span>

<span class="n">Implementation</span><span class="w"> </span><span class="n">methods</span><span class="o">:</span>
<span class="mi">1</span><span class="o">.</span><span class="w"> </span><span class="n">Timestamp</span><span class="o">:</span><span class="w"> </span><span class="n">Record</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">each</span><span class="w"> </span><span class="n">page</span>
<span class="mi">2</span><span class="o">.</span><span class="w"> </span><span class="n">Stack</span><span class="o">:</span><span class="w"> </span><span class="n">Move</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">stack</span><span class="w"> </span><span class="n">top</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">access</span>
<span class="mi">3</span><span class="o">.</span><span class="w"> </span><span class="n">Approximate</span><span class="w"> </span><span class="n">LRU</span><span class="o">:</span><span class="w"> </span><span class="n">Clock</span><span class="w"> </span><span class="n">algorithm</span><span class="o">,</span><span class="w"> </span><span class="n">etc</span><span class="o">.</span>
</code></pre></div>

<h3 id="74-clock-algorithm-second-chance">7.4 Clock Algorithm (Second Chance)<a class="header-link" href="#74-clock-algorithm-second-chance" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Principle</span><span class="o">:</span><span class="w"> </span><span class="n">FIFO</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Reference</span><span class="w"> </span><span class="n">Bit</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">approximate</span><span class="w"> </span><span class="n">LRU</span>

<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">          </span><span class="n">Clock</span><span class="w"> </span><span class="n">Hand</span><span class="w">                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">               </span><span class="err">â†“</span><span class="w">                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">          </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span><span class="n">Page</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span><span class="w"> </span><span class="n">R</span><span class="o">=</span><span class="mi">0</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">R</span><span class="o">=</span><span class="mi">0</span><span class="o">,</span><span class="w"> </span><span class="n">replace</span><span class="w">                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">       </span><span class="err">â”Œâ”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”</span><span class="w">                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”´â”€â”€â”€â”</span><span class="w">      </span><span class="err">â”Œâ”€â”€â”€â”´â”€â”€â”€â”</span><span class="w">                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="n">Page</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="n">Page</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">â”‚</span><span class="w">                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">R</span><span class="o">=</span><span class="mi">1</span><span class="w">   </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w"> </span><span class="n">R</span><span class="o">=</span><span class="mi">1</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">R</span><span class="o">=</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="kd">set</span><span class="w"> </span><span class="n">R</span><span class="o">=</span><span class="mi">0</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">skip</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”¬â”€â”€â”€â”˜</span><span class="w">      </span><span class="err">â””â”€â”€â”€â”¬â”€â”€â”€â”˜</span><span class="w">                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">       </span><span class="err">â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”˜</span><span class="w">                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span><span class="n">Page</span><span class="w"> </span><span class="mi">2</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span><span class="w"> </span><span class="n">R</span><span class="o">=</span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">          </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="n">Algorithm</span><span class="o">:</span>
<span class="mi">1</span><span class="o">.</span><span class="w"> </span><span class="n">Check</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">clock</span><span class="w"> </span><span class="n">hand</span>
<span class="mi">2</span><span class="o">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">R</span><span class="o">=</span><span class="mi">0</span><span class="o">,</span><span class="w"> </span><span class="n">replace</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">page</span>
<span class="mi">3</span><span class="o">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">R</span><span class="o">=</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="kd">set</span><span class="w"> </span><span class="n">R</span><span class="o">=</span><span class="mi">0</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">move</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">next</span><span class="w"> </span><span class="n">page</span>
<span class="mi">4</span><span class="o">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">pages</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">R</span><span class="o">=</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="n">full</span><span class="w"> </span><span class="n">circle</span><span class="w"> </span><span class="n">resets</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">replaces</span><span class="w"> </span><span class="n">R</span><span class="o">=</span><span class="mi">0</span><span class="w"> </span><span class="n">page</span>

<span class="n">Enhanced</span><span class="w"> </span><span class="n">Clock</span><span class="w"> </span><span class="o">(</span><span class="n">NRU</span><span class="o">):</span>
<span class="o">-</span><span class="w"> </span><span class="n">Add</span><span class="w"> </span><span class="n">Modified</span><span class="o">(</span><span class="n">M</span><span class="o">)</span><span class="w"> </span><span class="n">bit</span>
<span class="o">-</span><span class="w"> </span><span class="n">Priority</span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">R</span><span class="o">=</span><span class="mi">0</span><span class="o">,</span><span class="n">M</span><span class="o">=</span><span class="mi">0</span><span class="o">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">(</span><span class="n">R</span><span class="o">=</span><span class="mi">0</span><span class="o">,</span><span class="n">M</span><span class="o">=</span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">(</span><span class="n">R</span><span class="o">=</span><span class="mi">1</span><span class="o">,</span><span class="n">M</span><span class="o">=</span><span class="mi">0</span><span class="o">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">(</span><span class="n">R</span><span class="o">=</span><span class="mi">1</span><span class="o">,</span><span class="n">M</span><span class="o">=</span><span class="mi">1</span><span class="o">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">Modified</span><span class="w"> </span><span class="n">pages</span><span class="w"> </span><span class="n">require</span><span class="w"> </span><span class="n">disk</span><span class="w"> </span><span class="n">write</span><span class="o">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">lower</span><span class="w"> </span><span class="n">priority</span>
</code></pre></div>

<h3 id="75-algorithm-comparison">7.5 Algorithm Comparison<a class="header-link" href="#75-algorithm-comparison" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Algorithm</span><span class="w">    </span><span class="err">â”‚</span><span class="w">     </span><span class="nx">Advantages</span><span class="w">   </span><span class="err">â”‚</span><span class="w">      </span><span class="nx">Disadvantages</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nx">FIFO</span><span class="w">           </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Simple</span><span class="w"> </span><span class="kd">impl</span><span class="p">.</span><span class="w">     </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Belady</span><span class="err">&#39;</span><span class="nx">s</span><span class="w"> </span><span class="nx">Anomaly</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span><span class="w">                  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Unstable</span><span class="w"> </span><span class="nx">performance</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nx">Optimal</span><span class="w">        </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Optimal</span><span class="w"> </span><span class="nx">perf</span><span class="p">.</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Not</span><span class="w"> </span><span class="nx">implementable</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Benchmark</span><span class="w">        </span><span class="err">â”‚</span><span class="w"> </span><span class="p">(</span><span class="nx">requires</span><span class="w"> </span><span class="nx">prediction</span><span class="p">)</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nx">LRU</span><span class="w">            </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Good</span><span class="w"> </span><span class="nx">performance</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">High</span><span class="w"> </span><span class="kd">impl</span><span class="p">.</span><span class="w"> </span><span class="nx">cost</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Stack</span><span class="w"> </span><span class="nx">property</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Hardware</span><span class="w"> </span><span class="nx">support</span><span class="w"> </span><span class="nx">needed</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nx">Clock</span><span class="w">          </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Efficient</span><span class="w"> </span><span class="nx">approx</span><span class="p">.</span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Slightly</span><span class="w"> </span><span class="nx">lower</span><span class="w"> </span><span class="nx">than</span><span class="w"> </span><span class="nx">LRU</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Easy</span><span class="w"> </span><span class="kd">impl</span><span class="p">.</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nx">Working</span><span class="w"> </span><span class="nx">Set</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Prevents</span><span class="w"> </span><span class="nx">thrash</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Hard</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">set</span><span class="w"> </span><span class="nx">parameters</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Adaptive</span><span class="w">         </span><span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="8-advanced-topics">8. Advanced Topics<a class="header-link" href="#8-advanced-topics" title="Permanent link">&para;</a></h2>
<h3 id="81-copy-on-write-cow">8.1 Copy-on-Write (COW)<a class="header-link" href="#81-copy-on-write-cow" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Principle</span><span class="o">:</span><span class="w"> </span><span class="n">Share</span><span class="w"> </span><span class="n">pages</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">fork</span><span class="o">()</span><span class="w"> </span><span class="n">instead</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">copying</span>

<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                     </span><span class="n">Copy</span><span class="o">-</span><span class="n">on</span><span class="o">-</span><span class="n">Write</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Right</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="n">fork</span><span class="o">():</span><span class="w">                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Parent</span><span class="w">                 </span><span class="n">Child</span><span class="w">                               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">           </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Page</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="err">â”‚â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”‚</span><span class="w"> </span><span class="n">Page</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="o">(</span><span class="n">R</span><span class="sr">/O)   â”‚      â”‚    â”‚ (R/</span><span class="n">O</span><span class="o">)</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">      </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Page</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="err">â”‚â”€â”€â”</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”Œâ”€â”€â”‚</span><span class="w"> </span><span class="n">Page</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="o">(</span><span class="n">R</span><span class="sr">/O)   â”‚  â”‚   â”‚ â”‚  â”‚ (R/</span><span class="n">O</span><span class="o">)</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">               </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="w">                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">               </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â–¼</span><span class="w"> </span><span class="err">â”‚</span><span class="w">                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">               </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">               </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="n">Frame</span><span class="err">â”‚</span><span class="w">  </span><span class="n">Physical</span><span class="w"> </span><span class="n">Memory</span><span class="w">                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">               </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="w">  </span><span class="n">A</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="o">(</span><span class="n">shared</span><span class="o">)</span><span class="w">                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">               </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â””â”€â”€â”€â”€â”€â”˜</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">               </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â–²</span><span class="w">                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">               </span><span class="err">â””â”€â”€â”€â”˜</span><span class="w">                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">When</span><span class="w"> </span><span class="n">Child</span><span class="w"> </span><span class="n">writes</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">Page</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="w">                               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">           </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Page</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Page</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="o">(</span><span class="n">R</span><span class="sr">/W)   â”‚           â”‚ (R/</span><span class="n">W</span><span class="o">)</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜</span><span class="w">           </span><span class="err">â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                     </span><span class="err">â”‚</span><span class="w">                               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">       </span><span class="err">â–¼</span><span class="w">                     </span><span class="err">â–¼</span><span class="w">                               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">           </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Frame</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Frame</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â†</span><span class="w"> </span><span class="n">Copy</span><span class="w"> </span><span class="n">created</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="o">(</span><span class="n">original</span><span class="o">)</span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="o">(</span><span class="n">modified</span><span class="o">)</span><span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">           </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="n">Advantages</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">fork</span><span class="o">()</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">fast</span><span class="w"> </span><span class="o">(</span><span class="n">copy</span><span class="w"> </span><span class="n">deferred</span><span class="o">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">Memory</span><span class="w"> </span><span class="n">savings</span><span class="w"> </span><span class="o">(</span><span class="n">stay</span><span class="w"> </span><span class="n">shared</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">read</span><span class="o">-</span><span class="n">only</span><span class="o">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">Efficient</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">exec</span><span class="o">()</span><span class="w"> </span><span class="n">discards</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">pages</span>
</code></pre></div>

<h3 id="82-memory-mapped-files-mmap">8.2 Memory Mapped Files (mmap)<a class="header-link" href="#82-memory-mapped-files-mmap" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Principle</span><span class="p">:</span><span class="w"> </span><span class="n">Map</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">directly</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">virtual</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="n">space</span>

<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Process</span><span class="w"> </span><span class="n">Virtual</span><span class="w"> </span><span class="n">Address</span><span class="w"> </span><span class="n">Space</span><span class="w">         </span><span class="n">Disk</span><span class="w"> </span><span class="n">File</span><span class="w">            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mh">0x40000000</span><span class="w"> </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">     </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">             </span><span class="err">â”‚</span><span class="w">            </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">            </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">             </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Mapped</span><span class="w">    </span><span class="err">â”‚â—€â•â•â•â–¶â”‚</span><span class="w">   </span><span class="n">File</span><span class="w">     </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">             </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Region</span><span class="w">    </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Content</span><span class="w">   </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">             </span><span class="err">â”‚</span><span class="w">            </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">            </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mh">0x40100000</span><span class="w"> </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">     </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Access</span><span class="w"> </span><span class="n">method</span><span class="p">:</span><span class="w">                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Access</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="p">(</span><span class="n">using</span><span class="w"> </span><span class="n">pointers</span><span class="p">)</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Auto</span><span class="o">-</span><span class="nb">load</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">fault</span><span class="w">                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Auto</span><span class="o">-</span><span class="n">write</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">modification</span><span class="w"> </span><span class="p">(</span><span class="ow">or</span><span class="w"> </span><span class="n">explicit</span><span class="w"> </span><span class="n">msync</span><span class="p">)</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="n">Uses</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">Large</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">processing</span>
<span class="o">-</span><span class="w"> </span><span class="n">Shared</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="n">processes</span>
<span class="o">-</span><span class="w"> </span><span class="n">Dynamic</span><span class="w"> </span><span class="n">library</span><span class="w"> </span><span class="n">loading</span>
</code></pre></div>

<h3 id="83-huge-pages">8.3 Huge Pages<a class="header-link" href="#83-huge-pages" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nt">Normal</span><span class="w"> </span><span class="nt">Pages</span><span class="w"> </span><span class="nt">vs</span><span class="w"> </span><span class="nt">Huge</span><span class="w"> </span><span class="nt">Pages</span><span class="o">:</span>

<span class="nt">Normal</span><span class="w"> </span><span class="nt">Page</span><span class="w"> </span><span class="o">(</span><span class="nt">4KB</span><span class="o">):</span>
<span class="nt">-</span><span class="w"> </span><span class="nt">2MB</span><span class="w"> </span><span class="nt">memory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">512</span><span class="w"> </span><span class="nt">pages</span>
<span class="nt">-</span><span class="w"> </span><span class="nt">512</span><span class="w"> </span><span class="nt">TLB</span><span class="w"> </span><span class="nt">entries</span><span class="w"> </span><span class="nt">needed</span><span class="w"> </span><span class="o">(</span><span class="nt">TLB</span><span class="w"> </span><span class="nt">pressure</span><span class="o">)</span>
<span class="nt">-</span><span class="w"> </span><span class="nt">Large</span><span class="w"> </span><span class="nt">page</span><span class="w"> </span><span class="nt">table</span><span class="w"> </span><span class="nt">overhead</span>

<span class="nt">Huge</span><span class="w"> </span><span class="nt">Page</span><span class="w"> </span><span class="o">(</span><span class="nt">2MB</span><span class="o">):</span>
<span class="nt">-</span><span class="w"> </span><span class="nt">2MB</span><span class="w"> </span><span class="nt">memory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">1</span><span class="w"> </span><span class="nt">page</span>
<span class="nt">-</span><span class="w"> </span><span class="nt">Only</span><span class="w"> </span><span class="nt">1</span><span class="w"> </span><span class="nt">TLB</span><span class="w"> </span><span class="nt">entry</span><span class="w"> </span><span class="nt">needed</span>
<span class="nt">-</span><span class="w"> </span><span class="nt">Increased</span><span class="w"> </span><span class="nt">TLB</span><span class="w"> </span><span class="nt">coverage</span>

<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nt">TLB</span><span class="w"> </span><span class="nt">Coverage</span><span class="w"> </span><span class="nt">Comparison</span><span class="w"> </span><span class="o">(</span><span class="nt">64</span><span class="w"> </span><span class="nt">TLB</span><span class="w"> </span><span class="nt">entries</span><span class="o">):</span><span class="w">                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nt">4KB</span><span class="w"> </span><span class="nt">pages</span><span class="o">:</span><span class="w">  </span><span class="nt">64</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="nt">4KB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">256KB</span><span class="w">                               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nt">2MB</span><span class="w"> </span><span class="nt">pages</span><span class="o">:</span><span class="w">  </span><span class="nt">64</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="nt">2MB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">128MB</span><span class="w">                               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nt">1GB</span><span class="w"> </span><span class="nt">pages</span><span class="o">:</span><span class="w">  </span><span class="nt">64</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="nt">1GB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">64GB</span><span class="w">                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nt">Big</span><span class="w"> </span><span class="nt">benefit</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span><span class="nt">databases</span><span class="o">,</span><span class="w"> </span><span class="nt">virtualization</span><span class="o">,</span><span class="w"> </span><span class="nt">large</span><span class="w"> </span><span class="nt">memory</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="nt">Using</span><span class="w"> </span><span class="nt">in</span><span class="w"> </span><span class="nt">Linux</span><span class="o">:</span>
<span class="err">#</span><span class="w"> </span><span class="nt">System</span><span class="w"> </span><span class="nt">configuration</span>
<span class="nt">echo</span><span class="w"> </span><span class="nt">1024</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">/</span><span class="nt">proc</span><span class="o">/</span><span class="nt">sys</span><span class="o">/</span><span class="nt">vm</span><span class="o">/</span><span class="nt">nr_hugepages</span>

<span class="err">#</span><span class="w"> </span><span class="nt">In</span><span class="w"> </span><span class="nt">program</span>
<span class="nt">mmap</span><span class="o">(...,</span><span class="w"> </span><span class="nt">MAP_HUGETLB</span><span class="o">,</span><span class="w"> </span><span class="o">...);</span>
</code></pre></div>

<hr />
<h2 id="9-practice-problems">9. Practice Problems<a class="header-link" href="#9-practice-problems" title="Permanent link">&para;</a></h2>
<h3 id="basic-problems">Basic Problems<a class="header-link" href="#basic-problems" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>What are 3 main advantages of virtual memory?</p>
</li>
<li>
<p>For a 32-bit system with 4KB pages, what is the VPN and Offset of virtual address 0x12345ABC?</p>
</li>
<li>
<p>Explain the role and necessity of TLB.</p>
</li>
</ol>
<h3 id="intermediate-problems">Intermediate Problems<a class="header-link" href="#intermediate-problems" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Calculate the miss count for FIFO and LRU algorithms with the following access order:
   (3 frames, access: 7,0,1,2,0,3,0,4,2,3)</p>
</li>
<li>
<p>How many memory accesses occur on TLB miss with a 2-level page table?</p>
</li>
<li>
<p>Explain the operation principle and advantages of Copy-on-Write.</p>
</li>
</ol>
<h3 id="advanced-problems">Advanced Problems<a class="header-link" href="#advanced-problems" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Why do 64-bit systems use 4-level page tables?</p>
</li>
<li>
<p>Calculate the Effective Access Time for the following scenario:</p>
</li>
<li>TLB hit time: 10ns</li>
<li>TLB hit rate: 98%</li>
<li>Page table walk: 200ns (4 memory accesses)</li>
<li>Memory access: 100ns</li>
<li>Page fault rate: 0.001%</li>
<li>
<p>Page fault handling: 10ms</p>
</li>
<li>
<p>Explain how the Working Set model prevents thrashing.</p>
</li>
</ol>
<details>
<summary>Answers</summary>

1. Virtual Memory Advantages:
   - Run programs larger than physical memory
   - Memory protection (process isolation)
   - Memory sharing (libraries, etc.)
   - Fragmentation solved
   - Relocation transparency

2. Address decomposition (0x12345ABC):
   - VPN = 0x12345 (upper 20 bits)
   - Offset = 0xABC (lower 12 bits)

3. TLB Role:
   - Caches virtual-to-physical address translation results
   - Reduces page table access overhead
   - Necessity: 4-level table = 4 additional memory accesses reduced to 1 cycle

4. Miss count:
   FIFO: 7,0,1,2,0,3,0,4,2,3
   Actual calculation:
   [7,-,-] â†’ [7,0,-] â†’ [7,0,1] â†’ [2,0,1] â†’ Hit â†’ [2,3,1] â†’ [2,3,0] â†’ [4,3,0] â†’ [4,2,0] â†’ [4,2,3]
   FIFO: 9 Miss, 1 Hit

   LRU:
   [7,-,-] â†’ [7,0,-] â†’ [7,0,1] â†’ [2,0,1] â†’ Hit(0) â†’ [2,0,3] â†’ Hit(0) â†’ [4,0,3] â†’ [4,0,2] â†’ [4,3,2]
   LRU: 8 Miss, 2 Hit

5. 2-level page table TLB miss:
   - Page Directory access: 1
   - Page Table access: 1
   - Actual data access: 1
   - Total 3 memory accesses

6. Copy-on-Write:
   - Principle: On fork(), only copy page tables, share actual pages; copy on write
   - Advantages: fork() is fast, memory savings, efficient for exec()

7. 4-level page table reason:
   - 64-bit address space is too large
   - Single level: 2^52 / 4KB Ã— 8B = several PB table
   - Multi-level: Only allocate tables for used regions, saving memory

8. EAT Calculation:
   TLB hit: 10ns + 100ns = 110ns
   TLB miss: 10ns + 200ns + 100ns = 310ns
   Page fault: 10ms = 10,000,000ns

   EAT = 0.98 Ã— 0.99999 Ã— 110 + 0.02 Ã— 0.99999 Ã— 310 + 0.00001 Ã— 10,000,000
       = 107.78 + 6.20 + 100
       â‰ˆ 214ns

9. Working Set Model:
   - Tracks Working Set size of each process
   - If physical memory < sum of all process Working Sets
   - Swap out some processes to give others enough memory
   - Each process guaranteed frames for its Working Set, preventing thrashing

</details>

<hr />
<h2 id="next-steps">Next Steps<a class="header-link" href="#next-steps" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="./17_IO_Systems.md">17_IO_Systems.md</a> - I/O systems, interrupts, DMA</li>
</ul>
<hr />
<h2 id="references">References<a class="header-link" href="#references" title="Permanent link">&para;</a></h2>
<ul>
<li>Operating System Concepts (Silberschatz et al.)</li>
<li>Computer Architecture: A Quantitative Approach (Hennessy &amp; Patterson)</li>
<li><a href="https://www.intel.com/content/www/us/en/developer/articles/technical/intel-sdm.html">Intel Software Developer's Manual - Paging</a></li>
<li><a href="https://www.kernel.org/doc/html/latest/mm/">Linux Kernel Documentation - Memory Management</a></li>
</ul>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/Computer_Architecture/15_Cache_Memory.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Cache Memory</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/Computer_Architecture/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/Computer_Architecture/17_IO_Systems.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">I/O Systems</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">â†‘</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'en';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}