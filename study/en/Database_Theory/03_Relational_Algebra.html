{% raw %}
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relational Algebra - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/en/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/en/" class="nav-item ">
                    <span class="nav-icon">ğŸ </span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">ğŸ’»</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/en/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" selected>
                        English
                    </option>
                    
                    <option value="ko" >
                        í•œêµ­ì–´
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">â˜€ï¸</span>
                    <span class="theme-icon dark">ğŸŒ™</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/en/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/en/Database_Theory/">Database Theory</a>
    <span class="separator">/</span>
    <span class="current">Relational Algebra</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>Relational Algebra</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/Database_Theory/02_Relational_Model.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">The Relational Model</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/Database_Theory/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/Database_Theory/04_ER_Modeling.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">ER Modeling</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#1-overview-of-relational-algebra">1. Overview of Relational Algebra</a><ul>
<li><a href="#what-is-relational-algebra">What Is Relational Algebra?</a></li>
<li><a href="#categories-of-operations">Categories of Operations</a></li>
<li><a href="#running-example-database">Running Example Database</a></li>
</ul>
</li>
<li><a href="#2-unary-operations">2. Unary Operations</a><ul>
<li><a href="#selection-sigma">Selection (sigma)</a></li>
<li><a href="#projection-pi">Projection (pi)</a></li>
<li><a href="#rename-rho">Rename (rho)</a></li>
</ul>
</li>
<li><a href="#3-set-operations">3. Set Operations</a><ul>
<li><a href="#union">Union</a></li>
<li><a href="#set-difference">Set Difference</a></li>
<li><a href="#intersection">Intersection</a></li>
<li><a href="#set-operations-summary">Set Operations Summary</a></li>
</ul>
</li>
<li><a href="#4-binary-operations-cartesian-product-and-joins">4. Binary Operations: Cartesian Product and Joins</a><ul>
<li><a href="#cartesian-product-cross-product">Cartesian Product (Cross Product)</a></li>
<li><a href="#theta-join">Theta Join</a></li>
<li><a href="#equi-join">Equi-Join</a></li>
<li><a href="#natural-join">Natural Join</a></li>
<li><a href="#outer-joins">Outer Joins</a></li>
<li><a href="#join-comparison-summary">Join Comparison Summary</a></li>
<li><a href="#semi-join-and-anti-join">Semi-Join and Anti-Join</a></li>
</ul>
</li>
<li><a href="#5-division">5. Division</a><ul>
<li><a href="#division-expressed-using-fundamental-operations">Division Expressed Using Fundamental Operations</a></li>
<li><a href="#division-example">Division Example</a></li>
</ul>
</li>
<li><a href="#6-additional-operations">6. Additional Operations</a><ul>
<li><a href="#aggregation-and-grouping">Aggregation and Grouping</a></li>
<li><a href="#assignment">Assignment</a></li>
<li><a href="#sorting">Sorting</a></li>
</ul>
</li>
<li><a href="#7-query-trees-and-algebraic-optimization">7. Query Trees and Algebraic Optimization</a><ul>
<li><a href="#query-trees">Query Trees</a></li>
<li><a href="#algebraic-optimization">Algebraic Optimization</a></li>
<li><a href="#key-equivalence-rules">Key Equivalence Rules</a></li>
<li><a href="#optimization-example">Optimization Example</a></li>
<li><a href="#heuristic-optimization-rules">Heuristic Optimization Rules</a></li>
</ul>
</li>
<li><a href="#8-relational-calculus-brief-introduction">8. Relational Calculus (Brief Introduction)</a><ul>
<li><a href="#tuple-relational-calculus-trc">Tuple Relational Calculus (TRC)</a></li>
<li><a href="#domain-relational-calculus-drc">Domain Relational Calculus (DRC)</a></li>
<li><a href="#equivalence-of-algebra-and-calculus">Equivalence of Algebra and Calculus</a></li>
<li><a href="#safety-of-expressions">Safety of Expressions</a></li>
</ul>
</li>
<li><a href="#9-equivalence-with-sql">9. Equivalence with SQL</a><ul>
<li><a href="#operation-by-operation-mapping">Operation-by-Operation Mapping</a></li>
<li><a href="#detailed-sql-equivalences">Detailed SQL Equivalences</a></li>
</ul>
</li>
<li><a href="#10-complete-worked-examples">10. Complete Worked Examples</a><ul>
<li><a href="#example-1-multi-step-query">Example 1: Multi-Step Query</a></li>
<li><a href="#example-2-division-query">Example 2: Division Query</a></li>
<li><a href="#example-3-outer-join">Example 3: Outer Join</a></li>
</ul>
</li>
<li><a href="#11-exercises">11. Exercises</a><ul>
<li><a href="#basic-operations">Basic Operations</a></li>
<li><a href="#join-operations">Join Operations</a></li>
<li><a href="#division">Division</a></li>
<li><a href="#optimization">Optimization</a></li>
<li><a href="#relational-calculus">Relational Calculus</a></li>
<li><a href="#challenge-problems">Challenge Problems</a></li>
</ul>
</li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="relational-algebra">Relational Algebra<a class="header-link" href="#relational-algebra" title="Permanent link">&para;</a></h1>
<p><strong>Previous</strong>: <a href="./02_Relational_Model.md">Relational Model</a> | <strong>Next</strong>: <a href="./04_ER_Modeling.md">ER Modeling</a></p>
<hr />
<p>Relational algebra is the formal query language of the relational model. It provides a collection of operators that take one or two relations as input and produce a new relation as output. Understanding relational algebra is essential because it underlies SQL query processing: every SQL query is internally translated into a relational algebra expression that the query optimizer can then transform and improve.</p>
<h2 id="table-of-contents">Table of Contents<a class="header-link" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#1-overview-of-relational-algebra">Overview of Relational Algebra</a></li>
<li><a href="#2-unary-operations">Unary Operations</a></li>
<li><a href="#3-set-operations">Set Operations</a></li>
<li><a href="#4-binary-operations-cartesian-product-and-joins">Binary Operations: Cartesian Product and Joins</a></li>
<li><a href="#5-division">Division</a></li>
<li><a href="#6-additional-operations">Additional Operations</a></li>
<li><a href="#7-query-trees-and-algebraic-optimization">Query Trees and Algebraic Optimization</a></li>
<li><a href="#8-relational-calculus-brief-introduction">Relational Calculus (Brief Introduction)</a></li>
<li><a href="#9-equivalence-with-sql">Equivalence with SQL</a></li>
<li><a href="#10-complete-worked-examples">Complete Worked Examples</a></li>
<li><a href="#11-exercises">Exercises</a></li>
</ol>
<hr />
<h2 id="1-overview-of-relational-algebra">1. Overview of Relational Algebra<a class="header-link" href="#1-overview-of-relational-algebra" title="Permanent link">&para;</a></h2>
<h3 id="what-is-relational-algebra">What Is Relational Algebra?<a class="header-link" href="#what-is-relational-algebra" title="Permanent link">&para;</a></h3>
<p>Relational algebra is a <strong>procedural</strong> query language: it describes a sequence of operations to compute the desired result. Each operation takes one or more relations and produces a new relation.</p>
<div class="highlight"><pre><span></span><code>Properties:
  - Closure: The result of every operation is a relation
             (enabling composition of operations)
  - Set semantics: Relations are sets (no duplicate tuples)
  - Foundation: Based on set theory and first-order logic
</code></pre></div>

<h3 id="categories-of-operations">Categories of Operations<a class="header-link" href="#categories-of-operations" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">              </span><span class="n">Relational</span><span class="w"> </span><span class="n">Algebra</span><span class="w"> </span><span class="n">Operations</span><span class="w">                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Fundamental</span><span class="w"> </span><span class="p">(</span><span class="n">cannot</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">expressed</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">operations</span><span class="p">):</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">Ïƒ</span><span class="w">  </span><span class="n">Selection</span><span class="w">          </span><span class="p">(</span><span class="n">filter</span><span class="w"> </span><span class="n">rows</span><span class="p">)</span><span class="w">                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">Ï€</span><span class="w">  </span><span class="n">Projection</span><span class="w">         </span><span class="p">(</span><span class="n">choose</span><span class="w"> </span><span class="n">columns</span><span class="p">)</span><span class="w">                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">Ï</span><span class="w">  </span><span class="n">Rename</span><span class="w">             </span><span class="p">(</span><span class="n">rename</span><span class="w"> </span><span class="n">relation</span><span class="o">/</span><span class="n">attributes</span><span class="p">)</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">âˆª</span><span class="w">  </span><span class="n">Union</span><span class="w">              </span><span class="p">(</span><span class="n">combine</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">relations</span><span class="p">)</span><span class="w">            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">âˆ’</span><span class="w">  </span><span class="n">Set</span><span class="w"> </span><span class="n">Difference</span><span class="w">     </span><span class="p">(</span><span class="n">tuples</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">S</span><span class="p">)</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">Ã—</span><span class="w">  </span><span class="n">Cartesian</span><span class="w"> </span><span class="n">Product</span><span class="w">  </span><span class="p">(</span><span class="n">all</span><span class="w"> </span><span class="n">combinations</span><span class="p">)</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Derived</span><span class="w"> </span><span class="p">(</span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">expressed</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">fundamental</span><span class="w"> </span><span class="n">operations</span><span class="p">):</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">â‹ˆ</span><span class="w">  </span><span class="n">Join</span><span class="w"> </span><span class="p">(</span><span class="n">various</span><span class="w"> </span><span class="n">types</span><span class="p">)</span><span class="w">                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">âˆ©</span><span class="w">  </span><span class="n">Intersection</span><span class="w">                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">Ã·</span><span class="w">  </span><span class="n">Division</span><span class="w">                                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">â†</span><span class="w">  </span><span class="n">Assignment</span><span class="w">                                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">Î´</span><span class="w">  </span><span class="n">Duplicate</span><span class="w"> </span><span class="n">elimination</span><span class="w"> </span><span class="p">(</span><span class="k">for</span><span class="w"> </span><span class="n">bag</span><span class="w"> </span><span class="n">semantics</span><span class="p">)</span><span class="w">             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">Î³</span><span class="w">  </span><span class="n">Grouping</span><span class="o">/</span><span class="n">Aggregation</span><span class="w">                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">Ï„</span><span class="w">  </span><span class="n">Sorting</span><span class="w">                                               </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="running-example-database">Running Example Database<a class="header-link" href="#running-example-database" title="Permanent link">&para;</a></h3>
<p>Throughout this lesson, we use the following sample database:</p>
<div class="highlight"><pre><span></span><code>STUDENT:
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
â”‚ sid  â”‚ name      â”‚ year â”‚ dept â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ S001 â”‚ Alice     â”‚  3   â”‚ CS   â”‚
â”‚ S002 â”‚ Bob       â”‚  2   â”‚ CS   â”‚
â”‚ S003 â”‚ Carol     â”‚  4   â”‚ EE   â”‚
â”‚ S004 â”‚ Dave      â”‚  3   â”‚ ME   â”‚
â”‚ S005 â”‚ Eve       â”‚  1   â”‚ CS   â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜

COURSE:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
â”‚ cid   â”‚ title                â”‚ credits â”‚ dept â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ CS101 â”‚ Intro to CS          â”‚ 3       â”‚ CS   â”‚
â”‚ CS301 â”‚ Database Theory      â”‚ 3       â”‚ CS   â”‚
â”‚ CS401 â”‚ Machine Learning     â”‚ 4       â”‚ CS   â”‚
â”‚ EE201 â”‚ Circuit Analysis     â”‚ 3       â”‚ EE   â”‚
â”‚ MA101 â”‚ Calculus I           â”‚ 4       â”‚ MA   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜

ENROLLMENT:
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
â”‚ sid  â”‚ cid   â”‚ grade â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ S001 â”‚ CS101 â”‚ A     â”‚
â”‚ S001 â”‚ CS301 â”‚ A+    â”‚
â”‚ S001 â”‚ MA101 â”‚ B+    â”‚
â”‚ S002 â”‚ CS101 â”‚ B     â”‚
â”‚ S002 â”‚ CS301 â”‚ A-    â”‚
â”‚ S003 â”‚ EE201 â”‚ A     â”‚
â”‚ S003 â”‚ CS101 â”‚ B+    â”‚
â”‚ S004 â”‚ CS101 â”‚ C     â”‚
â”‚ S005 â”‚ CS101 â”‚ A     â”‚
â”‚ S005 â”‚ MA101 â”‚ A-    â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜

INSTRUCTOR:
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ iid  â”‚ name     â”‚ dept â”‚ salary â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ I001 â”‚ Prof. Kimâ”‚ CS   â”‚ 95000  â”‚
â”‚ I002 â”‚ Prof. Leeâ”‚ CS   â”‚ 88000  â”‚
â”‚ I003 â”‚ Prof. Parkâ”‚ EE  â”‚ 92000  â”‚
â”‚ I004 â”‚ Prof. Choiâ”‚ MA  â”‚ 85000  â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<hr />
<h2 id="2-unary-operations">2. Unary Operations<a class="header-link" href="#2-unary-operations" title="Permanent link">&para;</a></h2>
<p>Unary operations take a single relation as input.</p>
<h3 id="selection-sigma">Selection (sigma)<a class="header-link" href="#selection-sigma" title="Permanent link">&para;</a></h3>
<p>The <strong>selection</strong> operation filters rows based on a condition (predicate).</p>
<div class="highlight"><pre><span></span><code><span class="n">Notation</span><span class="o">:</span><span class="w">   </span><span class="err">Ïƒ</span><span class="n">_condition</span><span class="o">(</span><span class="n">R</span><span class="o">)</span>

<span class="n">Output</span><span class="o">:</span><span class="w">     </span><span class="n">A</span><span class="w"> </span><span class="n">relation</span><span class="w"> </span><span class="n">containing</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">tuples</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">R</span>
<span class="w">            </span><span class="n">that</span><span class="w"> </span><span class="n">satisfy</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">condition</span><span class="o">.</span>

<span class="n">Schema</span><span class="o">:</span><span class="w">     </span><span class="n">Same</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="o">(</span><span class="n">all</span><span class="w"> </span><span class="n">attributes</span><span class="w"> </span><span class="n">preserved</span><span class="o">)</span>
</code></pre></div>

<p><strong>Formal definition:</strong></p>
<div class="highlight"><pre><span></span><code>Ïƒ_condition(R) = { t | t âˆˆ R  AND  condition(t) is TRUE }
</code></pre></div>

<p><strong>Examples:</strong></p>
<div class="highlight"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="n">Select</span><span class="w"> </span><span class="n">CS</span><span class="w"> </span><span class="n">students</span><span class="p">:</span>

<span class="w">   </span><span class="n">Ïƒ_</span><span class="err">{</span><span class="n">dept</span><span class="o">=</span><span class="err">&#39;</span><span class="n">CS</span><span class="err">&#39;}</span><span class="p">(</span><span class="n">STUDENT</span><span class="p">)</span>

<span class="w">   </span><span class="n">Result</span><span class="p">:</span>
<span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">sid</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">name</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">year</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">dept</span><span class="w"> </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">S001</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Alice</span><span class="w"> </span><span class="err">â”‚</span><span class="w">  </span><span class="mf">3</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">CS</span><span class="w">   </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">S002</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Bob</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="mf">2</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">CS</span><span class="w">   </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">S005</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Eve</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="mf">1</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">CS</span><span class="w">   </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜</span>


<span class="mf">2.</span><span class="w"> </span><span class="n">Select</span><span class="w"> </span><span class="mf">3</span><span class="n">rd</span><span class="o">-</span><span class="n">year</span><span class="w"> </span><span class="n">CS</span><span class="w"> </span><span class="n">students</span><span class="p">:</span>

<span class="w">   </span><span class="n">Ïƒ_</span><span class="err">{</span><span class="n">dept</span><span class="o">=</span><span class="err">&#39;</span><span class="n">CS</span><span class="err">&#39;</span><span class="w"> </span><span class="ow">AND</span><span class="w"> </span><span class="n">year</span><span class="o">=</span><span class="mf">3</span><span class="err">}</span><span class="p">(</span><span class="n">STUDENT</span><span class="p">)</span>

<span class="w">   </span><span class="n">Result</span><span class="p">:</span>
<span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">sid</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">name</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">year</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">dept</span><span class="w"> </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">S001</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Alice</span><span class="w"> </span><span class="err">â”‚</span><span class="w">  </span><span class="mf">3</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">CS</span><span class="w">   </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜</span>


<span class="mf">3.</span><span class="w"> </span><span class="n">Select</span><span class="w"> </span><span class="n">courses</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="n">credits</span><span class="p">:</span>

<span class="w">   </span><span class="n">Ïƒ_</span><span class="err">{</span><span class="n">credits</span><span class="o">=</span><span class="mf">4</span><span class="err">}</span><span class="p">(</span><span class="n">COURSE</span><span class="p">)</span>

<span class="w">   </span><span class="n">Result</span><span class="p">:</span>
<span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">cid</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">title</span><span class="w">            </span><span class="err">â”‚</span><span class="w"> </span><span class="n">credits</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">dept</span><span class="w"> </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">CS401</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Machine</span><span class="w"> </span><span class="n">Learning</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="mf">4</span><span class="w">       </span><span class="err">â”‚</span><span class="w"> </span><span class="n">CS</span><span class="w">   </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">MA101</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Calculus</span><span class="w"> </span><span class="n">I</span><span class="w">       </span><span class="err">â”‚</span><span class="w"> </span><span class="mf">4</span><span class="w">       </span><span class="err">â”‚</span><span class="w"> </span><span class="n">MA</span><span class="w">   </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<p><strong>Selection conditions can use:</strong>
- Comparison operators: =, â‰ , &lt;, &gt;, â‰¤, â‰¥
- Logical connectives: AND (âˆ§), OR (âˆ¨), NOT (Â¬)
- Attribute names and constants</p>
<h3 id="projection-pi">Projection (pi)<a class="header-link" href="#projection-pi" title="Permanent link">&para;</a></h3>
<p>The <strong>projection</strong> operation selects specific columns (attributes) and removes duplicates.</p>
<div class="highlight"><pre><span></span><code><span class="n">Notation</span><span class="o">:</span><span class="w">   </span><span class="err">Ï€</span><span class="n">_</span><span class="o">{</span><span class="n">attr_list</span><span class="o">}(</span><span class="n">R</span><span class="o">)</span>

<span class="n">Output</span><span class="o">:</span><span class="w">     </span><span class="n">A</span><span class="w"> </span><span class="n">relation</span><span class="w"> </span><span class="n">containing</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">attributes</span><span class="o">,</span>
<span class="w">            </span><span class="k">with</span><span class="w"> </span><span class="n">duplicate</span><span class="w"> </span><span class="n">tuples</span><span class="w"> </span><span class="n">removed</span><span class="o">.</span>

<span class="n">Schema</span><span class="o">:</span><span class="w">     </span><span class="n">Only</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">attributes</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">attr_list</span>
</code></pre></div>

<p><strong>Formal definition:</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">Ï€_</span><span class="err">{</span><span class="n">A1</span><span class="p">,</span><span class="w"> </span><span class="n">A2</span><span class="p">,</span><span class="w"> </span><span class="p">...,</span><span class="w"> </span><span class="n">Ak</span><span class="err">}</span><span class="p">(</span><span class="n">R</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="o">&lt;</span><span class="n">t</span><span class="o">[</span><span class="n">A1</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">t</span><span class="o">[</span><span class="n">A2</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="p">...,</span><span class="w"> </span><span class="n">t</span><span class="o">[</span><span class="n">Ak</span><span class="o">]&gt;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="err">âˆˆ</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="err">}</span>
</code></pre></div>

<p><strong>Examples:</strong></p>
<div class="highlight"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="n">Project</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">departments</span><span class="p">:</span>

<span class="w">   </span><span class="n">Ï€_</span><span class="err">{</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">dept</span><span class="err">}</span><span class="p">(</span><span class="n">STUDENT</span><span class="p">)</span>

<span class="w">   </span><span class="n">Result</span><span class="p">:</span>
<span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">name</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">dept</span><span class="w"> </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Alice</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">CS</span><span class="w">   </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Bob</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">CS</span><span class="w">   </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Carol</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="n">EE</span><span class="w">   </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Dave</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">ME</span><span class="w">   </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Eve</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">CS</span><span class="w">   </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜</span>


<span class="mf">2.</span><span class="w"> </span><span class="n">Project</span><span class="w"> </span><span class="n">distinct</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">STUDENT</span><span class="p">:</span>

<span class="w">   </span><span class="n">Ï€_</span><span class="err">{</span><span class="n">dept</span><span class="err">}</span><span class="p">(</span><span class="n">STUDENT</span><span class="p">)</span>

<span class="w">   </span><span class="n">Result</span><span class="p">:</span>
<span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">dept</span><span class="w"> </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”¤</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">CS</span><span class="w">   </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">EE</span><span class="w">   </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">ME</span><span class="w">   </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”˜</span>
<span class="w">   </span><span class="p">(</span><span class="ow">Not</span><span class="n">e</span><span class="p">:</span><span class="w"> </span><span class="n">CS</span><span class="w"> </span><span class="n">appears</span><span class="w"> </span><span class="kr">on</span><span class="n">ly</span><span class="w"> </span><span class="kr">ON</span><span class="n">CE</span><span class="w"> </span><span class="n">because</span><span class="w"> </span><span class="n">duplicates</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="c1">removed)</span>


<span class="mf">3.</span><span class="w"> </span><span class="n">Compose</span><span class="w"> </span><span class="n">selection</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">projection</span><span class="p">:</span>

<span class="w">   </span><span class="s">&quot;Find names of CS students&quot;</span>
<span class="w">   </span><span class="n">Ï€_</span><span class="err">{</span><span class="n">name</span><span class="err">}</span><span class="p">(</span><span class="n">Ïƒ_</span><span class="err">{</span><span class="n">dept</span><span class="o">=</span><span class="err">&#39;</span><span class="n">CS</span><span class="err">&#39;}</span><span class="p">(</span><span class="n">STUDENT</span><span class="p">))</span>

<span class="w">   </span><span class="kr">Step</span><span class="w"> </span><span class="mf">1</span><span class="p">:</span><span class="w"> </span><span class="n">Ïƒ_</span><span class="err">{</span><span class="n">dept</span><span class="o">=</span><span class="err">&#39;</span><span class="n">CS</span><span class="err">&#39;}</span><span class="p">(</span><span class="n">STUDENT</span><span class="p">)</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="err">{</span><span class="n">Alice</span><span class="o">/</span><span class="n">CS</span><span class="p">,</span><span class="w"> </span><span class="n">Bob</span><span class="o">/</span><span class="n">CS</span><span class="p">,</span><span class="w"> </span><span class="n">Eve</span><span class="o">/</span><span class="n">CS</span><span class="err">}</span>
<span class="w">   </span><span class="kr">Step</span><span class="w"> </span><span class="mf">2</span><span class="p">:</span><span class="w"> </span><span class="n">Ï€_</span><span class="err">{</span><span class="n">name</span><span class="err">}</span><span class="p">(</span><span class="mf">...</span><span class="p">)</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="err">{</span><span class="n">Alice</span><span class="p">,</span><span class="w"> </span><span class="n">Bob</span><span class="p">,</span><span class="w"> </span><span class="n">Eve</span><span class="err">}</span>

<span class="w">   </span><span class="n">Result</span><span class="p">:</span>
<span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">name</span><span class="w">  </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Alice</span><span class="w"> </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Bob</span><span class="w">   </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Eve</span><span class="w">   </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="rename-rho">Rename (rho)<a class="header-link" href="#rename-rho" title="Permanent link">&para;</a></h3>
<p>The <strong>rename</strong> operation changes the name of a relation and/or its attributes.</p>
<div class="highlight"><pre><span></span><code><span class="n">Notation</span><span class="o">:</span><span class="w">   </span><span class="err">Ï</span><span class="n">_</span><span class="o">{</span><span class="n">S</span><span class="o">(</span><span class="n">B1</span><span class="o">,</span><span class="w"> </span><span class="n">B2</span><span class="o">,</span><span class="w"> </span><span class="o">...,</span><span class="w"> </span><span class="n">Bn</span><span class="o">)}(</span><span class="n">R</span><span class="o">)</span>

<span class="w">            </span><span class="n">Renames</span><span class="w"> </span><span class="n">relation</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">attributes</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">B1</span><span class="o">,</span><span class="w"> </span><span class="n">B2</span><span class="o">,</span><span class="w"> </span><span class="o">...,</span><span class="w"> </span><span class="n">Bn</span>

<span class="n">Shorthand</span><span class="o">:</span><span class="w">  </span><span class="err">Ï</span><span class="n">_S</span><span class="o">(</span><span class="n">R</span><span class="o">)</span><span class="w">          </span><span class="o">--</span><span class="w"> </span><span class="n">rename</span><span class="w"> </span><span class="n">relation</span><span class="w"> </span><span class="n">only</span>
<span class="w">            </span><span class="err">Ï</span><span class="n">_</span><span class="o">{(</span><span class="n">B1</span><span class="o">,...,</span><span class="n">Bn</span><span class="o">)}(</span><span class="n">R</span><span class="o">)</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">rename</span><span class="w"> </span><span class="n">attributes</span><span class="w"> </span><span class="n">only</span>
</code></pre></div>

<p><strong>Examples:</strong></p>
<div class="highlight"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="n">Rename</span><span class="w"> </span><span class="n">STUDENT</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span><span class="n">S</span><span class="p">:</span>

<span class="w">   </span><span class="n">Ï_S</span><span class="p">(</span><span class="n">STUDENT</span><span class="p">)</span>
<span class="w">   </span><span class="err">â†’</span><span class="w"> </span><span class="n">Same</span><span class="w"> </span><span class="n">tuples</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">relation</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">called</span><span class="w"> </span><span class="n">S</span>

<span class="mf">2.</span><span class="w"> </span><span class="n">Rename</span><span class="w"> </span><span class="kr">for</span><span class="w"> </span><span class="n">self</span><span class="o">-</span><span class="n">join</span><span class="w"> </span><span class="n">preparation</span><span class="p">:</span>

<span class="w">   </span><span class="n">Ï_</span><span class="err">{</span><span class="n">S1</span><span class="p">(</span><span class="n">sid1</span><span class="p">,</span><span class="w"> </span><span class="n">name1</span><span class="p">,</span><span class="w"> </span><span class="n">year1</span><span class="p">,</span><span class="w"> </span><span class="n">dept1</span><span class="p">)</span><span class="err">}</span><span class="p">(</span><span class="n">STUDENT</span><span class="p">)</span>
<span class="w">   </span><span class="n">Ï_</span><span class="err">{</span><span class="n">S2</span><span class="p">(</span><span class="n">sid2</span><span class="p">,</span><span class="w"> </span><span class="n">name2</span><span class="p">,</span><span class="w"> </span><span class="n">year2</span><span class="p">,</span><span class="w"> </span><span class="n">dept2</span><span class="p">)</span><span class="err">}</span><span class="p">(</span><span class="n">STUDENT</span><span class="p">)</span>

<span class="w">   </span><span class="n">Now</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">join</span><span class="w"> </span><span class="n">S1</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">S2</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">attribute</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">conflicts</span><span class="mf">.</span>

<span class="mf">3.</span><span class="w"> </span><span class="n">Practical</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="n">pairs</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">department</span><span class="p">:</span>

<span class="w">   </span><span class="n">Ïƒ_</span><span class="err">{</span><span class="n">S1</span><span class="mf">.</span><span class="n">dept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">S2</span><span class="mf">.</span><span class="n">dept</span><span class="w"> </span><span class="ow">AND</span><span class="w"> </span><span class="n">S1</span><span class="mf">.</span><span class="n">sid</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">S2</span><span class="mf">.</span><span class="n">sid</span><span class="err">}</span><span class="p">(</span>
<span class="w">       </span><span class="n">Ï_</span><span class="err">{</span><span class="n">S1</span><span class="p">(</span><span class="n">sid1</span><span class="p">,</span><span class="w"> </span><span class="n">name1</span><span class="p">,</span><span class="w"> </span><span class="n">year1</span><span class="p">,</span><span class="w"> </span><span class="n">dept1</span><span class="p">)</span><span class="err">}</span><span class="p">(</span><span class="n">STUDENT</span><span class="p">)</span><span class="w"> </span><span class="err">Ã—</span>
<span class="w">       </span><span class="n">Ï_</span><span class="err">{</span><span class="n">S2</span><span class="p">(</span><span class="n">sid2</span><span class="p">,</span><span class="w"> </span><span class="n">name2</span><span class="p">,</span><span class="w"> </span><span class="n">year2</span><span class="p">,</span><span class="w"> </span><span class="n">dept2</span><span class="p">)</span><span class="err">}</span><span class="p">(</span><span class="n">STUDENT</span><span class="p">)</span>
<span class="w">   </span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="3-set-operations">3. Set Operations<a class="header-link" href="#3-set-operations" title="Permanent link">&para;</a></h2>
<p>Set operations require <strong>union-compatible</strong> (or type-compatible) relations: they must have the same number of attributes, and corresponding attributes must have compatible domains.</p>
<div class="highlight"><pre><span></span><code>Union compatibility:
  R(A1: D1, A2: D2, ..., An: Dn)
  S(B1: D1, B2: D2, ..., Bn: Dn)

  Same number of attributes (n) and compatible domains.
  Attribute names may differ (result uses R&#39;s names by convention).
</code></pre></div>

<h3 id="union">Union<a class="header-link" href="#union" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Notation</span><span class="o">:</span><span class="w">   </span><span class="n">R</span><span class="w"> </span><span class="err">âˆª</span><span class="w"> </span><span class="n">S</span>

<span class="n">Output</span><span class="o">:</span><span class="w">     </span><span class="n">All</span><span class="w"> </span><span class="n">tuples</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">R</span><span class="o">,</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">S</span><span class="o">,</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">both</span><span class="o">.</span>
<span class="w">            </span><span class="n">Duplicates</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">eliminated</span><span class="o">.</span>

<span class="n">R</span><span class="w"> </span><span class="err">âˆª</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="err">âˆˆ</span><span class="w"> </span><span class="n">R</span><span class="w">  </span><span class="n">OR</span><span class="w">  </span><span class="n">t</span><span class="w"> </span><span class="err">âˆˆ</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="o">}</span>
</code></pre></div>

<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code>CS_STUDENTS = Ï€_{sid, name}(Ïƒ_{dept=&#39;CS&#39;}(STUDENT))
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
â”‚ sid  â”‚ name  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ S001 â”‚ Alice â”‚
â”‚ S002 â”‚ Bob   â”‚
â”‚ S005 â”‚ Eve   â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜

YEAR3_STUDENTS = Ï€_{sid, name}(Ïƒ_{year=3}(STUDENT))
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
â”‚ sid  â”‚ name  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ S001 â”‚ Alice â”‚
â”‚ S004 â”‚ Dave  â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜

CS_STUDENTS âˆª YEAR3_STUDENTS =
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
â”‚ sid  â”‚ name  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ S001 â”‚ Alice â”‚  â† appears in both, but listed only once
â”‚ S002 â”‚ Bob   â”‚
â”‚ S005 â”‚ Eve   â”‚
â”‚ S004 â”‚ Dave  â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="set-difference">Set Difference<a class="header-link" href="#set-difference" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Notation</span><span class="o">:</span><span class="w">   </span><span class="n">R</span><span class="w"> </span><span class="err">âˆ’</span><span class="w"> </span><span class="n">S</span><span class="w">  </span><span class="o">(</span><span class="n">or</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="o">\</span><span class="w"> </span><span class="n">S</span><span class="o">)</span>

<span class="n">Output</span><span class="o">:</span><span class="w">     </span><span class="n">Tuples</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">NOT</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">S</span><span class="o">.</span>

<span class="n">R</span><span class="w"> </span><span class="err">âˆ’</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="err">âˆˆ</span><span class="w"> </span><span class="n">R</span><span class="w">  </span><span class="n">AND</span><span class="w">  </span><span class="n">t</span><span class="w"> </span><span class="err">âˆ‰</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="o">}</span>
</code></pre></div>

<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code>&quot;CS students who are NOT in year 3&quot;

CS_STUDENTS âˆ’ YEAR3_STUDENTS =
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
â”‚ sid  â”‚ name â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ S002 â”‚ Bob  â”‚
â”‚ S005 â”‚ Eve  â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜

Note: Alice (S001) is removed because she is in YEAR3_STUDENTS.
Note: R âˆ’ S â‰  S âˆ’ R  (set difference is NOT commutative)

YEAR3_STUDENTS âˆ’ CS_STUDENTS =
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
â”‚ sid  â”‚ name â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ S004 â”‚ Dave â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="intersection">Intersection<a class="header-link" href="#intersection" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Notation</span><span class="o">:</span><span class="w">   </span><span class="n">R</span><span class="w"> </span><span class="err">âˆ©</span><span class="w"> </span><span class="n">S</span>

<span class="n">Output</span><span class="o">:</span><span class="w">     </span><span class="n">Tuples</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">BOTH</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">S</span><span class="o">.</span>

<span class="n">R</span><span class="w"> </span><span class="err">âˆ©</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="err">âˆˆ</span><span class="w"> </span><span class="n">R</span><span class="w">  </span><span class="n">AND</span><span class="w">  </span><span class="n">t</span><span class="w"> </span><span class="err">âˆˆ</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="o">}</span>

<span class="n">Note</span><span class="o">:</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="err">âˆ©</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="err">âˆ’</span><span class="w"> </span><span class="o">(</span><span class="n">R</span><span class="w"> </span><span class="err">âˆ’</span><span class="w"> </span><span class="n">S</span><span class="o">)</span><span class="w">  </span><span class="o">(</span><span class="n">intersection</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">derivable</span><span class="o">)</span>
</code></pre></div>

<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code>&quot;Students who are in CS AND in year 3&quot;

CS_STUDENTS âˆ© YEAR3_STUDENTS =
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
â”‚ sid  â”‚ name  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ S001 â”‚ Alice â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="set-operations-summary">Set Operations Summary<a class="header-link" href="#set-operations-summary" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>     R           S                R âˆª S         R âˆ’ S         R âˆ© S

  â”Œâ”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”
  â”‚ a    â”‚   â”‚ a    â”‚         â”‚ a    â”‚      â”‚ b    â”‚     â”‚ a    â”‚
  â”‚ b    â”‚   â”‚ a    â”‚         â”‚ b    â”‚      â”‚ c    â”‚     â”‚      â”‚
  â”‚ c    â”‚   â”‚ d    â”‚         â”‚ c    â”‚      â””â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”˜
  â””â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”˜         â”‚ d    â”‚
                              â””â”€â”€â”€â”€â”€â”€â”˜

  Venn diagram:
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚  R          â”‚
       â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”
       â”‚      â”‚ Râˆ©S  â”‚      â”‚
       â”‚      â”‚      â”‚   S  â”‚
       â””â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”˜      â”‚
              â”‚             â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  R âˆª S = entire shaded area
  R âˆ’ S = left only (not overlap)
  R âˆ© S = overlap only
  S âˆ’ R = right only (not overlap)
</code></pre></div>

<hr />
<h2 id="4-binary-operations-cartesian-product-and-joins">4. Binary Operations: Cartesian Product and Joins<a class="header-link" href="#4-binary-operations-cartesian-product-and-joins" title="Permanent link">&para;</a></h2>
<h3 id="cartesian-product-cross-product">Cartesian Product (Cross Product)<a class="header-link" href="#cartesian-product-cross-product" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Notation</span><span class="o">:</span><span class="w">   </span><span class="n">R</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="n">S</span>

<span class="n">Output</span><span class="o">:</span><span class="w">     </span><span class="n">Every</span><span class="w"> </span><span class="n">tuple</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">combined</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">every</span><span class="w"> </span><span class="n">tuple</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">S</span><span class="o">.</span>
<span class="w">            </span><span class="n">If</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">tuples</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="n">tuples</span><span class="o">,</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="n">tuples</span><span class="o">.</span>
<span class="w">            </span><span class="n">If</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="n">attributes</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="n">attributes</span><span class="o">,</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="n">attributes</span><span class="o">.</span>
</code></pre></div>

<p><strong>Formal definition:</strong></p>
<div class="highlight"><pre><span></span><code>R Ã— S = { &lt;t_r, t_s&gt; | t_r âˆˆ R  AND  t_s âˆˆ S }
</code></pre></div>

<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code>A = {(a1, b1), (a2, b2)}     B = {(c1, d1), (c2, d2), (c3, d3)}

A Ã— B =
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”
â”‚ A  â”‚ B  â”‚ C  â”‚ D  â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤
â”‚ a1 â”‚ b1 â”‚ c1 â”‚ d1 â”‚
â”‚ a1 â”‚ b1 â”‚ c2 â”‚ d2 â”‚
â”‚ a1 â”‚ b1 â”‚ c3 â”‚ d3 â”‚
â”‚ a2 â”‚ b2 â”‚ c1 â”‚ d1 â”‚
â”‚ a2 â”‚ b2 â”‚ c2 â”‚ d2 â”‚
â”‚ a2 â”‚ b2 â”‚ c3 â”‚ d3 â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜

|A| = 2, |B| = 3, |A Ã— B| = 2 Ã— 3 = 6
</code></pre></div>

<p>The Cartesian product by itself is rarely useful because it produces many meaningless combinations. Its power comes when combined with selection (which gives us joins).</p>
<h3 id="theta-join">Theta Join<a class="header-link" href="#theta-join" title="Permanent link">&para;</a></h3>
<p>A <strong>theta join</strong> combines Cartesian product with selection:</p>
<div class="highlight"><pre><span></span><code><span class="n">Notation</span><span class="o">:</span><span class="w">   </span><span class="n">R</span><span class="w"> </span><span class="err">â‹ˆ</span><span class="n">_Î¸</span><span class="w"> </span><span class="n">S</span><span class="w">   </span><span class="o">(</span><span class="n">where</span><span class="w"> </span><span class="err">Î¸</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">condition</span><span class="o">)</span>

<span class="n">Definition</span><span class="o">:</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="err">â‹ˆ</span><span class="n">_Î¸</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">Ïƒ</span><span class="n">_Î¸</span><span class="o">(</span><span class="n">R</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="n">S</span><span class="o">)</span>

<span class="n">The</span><span class="w"> </span><span class="n">condition</span><span class="w"> </span><span class="err">Î¸</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">comparison</span><span class="o">:</span><span class="w"> </span><span class="o">=,</span><span class="w"> </span><span class="err">â‰ </span><span class="o">,</span><span class="w"> </span><span class="o">&lt;,</span><span class="w"> </span><span class="o">&gt;,</span><span class="w"> </span><span class="err">â‰¤</span><span class="o">,</span><span class="w"> </span><span class="err">â‰¥</span>
</code></pre></div>

<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code>&quot;Find students and courses in the same department&quot;

STUDENT â‹ˆ_{STUDENT.dept = COURSE.dept} COURSE

Equivalent to: Ïƒ_{STUDENT.dept = COURSE.dept}(STUDENT Ã— COURSE)

Result (partial):
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
â”‚ sid  â”‚ name  â”‚ year â”‚ s.deptâ”‚ cid  â”‚ title            â”‚ credits â”‚c.dept â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ S001 â”‚ Alice â”‚  3   â”‚ CS   â”‚ CS101 â”‚ Intro to CS      â”‚ 3       â”‚ CS    â”‚
â”‚ S001 â”‚ Alice â”‚  3   â”‚ CS   â”‚ CS301 â”‚ Database Theory  â”‚ 3       â”‚ CS    â”‚
â”‚ S001 â”‚ Alice â”‚  3   â”‚ CS   â”‚ CS401 â”‚ Machine Learning â”‚ 4       â”‚ CS    â”‚
â”‚ S002 â”‚ Bob   â”‚  2   â”‚ CS   â”‚ CS101 â”‚ Intro to CS      â”‚ 3       â”‚ CS    â”‚
â”‚ S002 â”‚ Bob   â”‚  2   â”‚ CS   â”‚ CS301 â”‚ Database Theory  â”‚ 3       â”‚ CS    â”‚
â”‚ S002 â”‚ Bob   â”‚  2   â”‚ CS   â”‚ CS401 â”‚ Machine Learning â”‚ 4       â”‚ CS    â”‚
â”‚ S003 â”‚ Carol â”‚  4   â”‚ EE   â”‚ EE201 â”‚ Circuit Analysis â”‚ 3       â”‚ EE    â”‚
â”‚ S005 â”‚ Eve   â”‚  1   â”‚ CS   â”‚ CS101 â”‚ Intro to CS      â”‚ 3       â”‚ CS    â”‚
â”‚ S005 â”‚ Eve   â”‚  1   â”‚ CS   â”‚ CS301 â”‚ Database Theory  â”‚ 3       â”‚ CS    â”‚
â”‚ S005 â”‚ Eve   â”‚  1   â”‚ CS   â”‚ CS401 â”‚ Machine Learning â”‚ 4       â”‚ CS    â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜
(Dave/ME has no matching course, so not in result)
</code></pre></div>

<h3 id="equi-join">Equi-Join<a class="header-link" href="#equi-join" title="Permanent link">&para;</a></h3>
<p>An <strong>equi-join</strong> is a theta join where the condition uses only equality (=):</p>
<div class="highlight"><pre><span></span><code>R â‹ˆ_{R.A = S.B} S

All equi-joins are theta joins, but not all theta joins are equi-joins.
A theta join with R.A &gt; S.B is NOT an equi-join.
</code></pre></div>

<h3 id="natural-join">Natural Join<a class="header-link" href="#natural-join" title="Permanent link">&para;</a></h3>
<p>A <strong>natural join</strong> is a special equi-join that:
1. Joins on ALL common attribute names
2. Removes duplicate columns from the result</p>
<div class="highlight"><pre><span></span><code><span class="n">Notation</span><span class="o">:</span><span class="w">   </span><span class="n">R</span><span class="w"> </span><span class="err">â‹ˆ</span><span class="w"> </span><span class="n">S</span><span class="w">   </span><span class="o">(</span><span class="n">no</span><span class="w"> </span><span class="n">subscript</span><span class="o">)</span>

<span class="n">Definition</span><span class="o">:</span><span class="w"> </span><span class="n">Join</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">attributes</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">S</span><span class="o">,</span>
<span class="w">            </span><span class="n">then</span><span class="w"> </span><span class="n">project</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">duplicate</span><span class="w"> </span><span class="n">attribute</span><span class="w"> </span><span class="n">columns</span><span class="o">.</span>
</code></pre></div>

<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code>STUDENT â‹ˆ ENROLLMENT

Common attribute: sid

Step 1: Equi-join on STUDENT.sid = ENROLLMENT.sid
Step 2: Remove duplicate sid column

Result:
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
â”‚ sid  â”‚ name  â”‚ year â”‚ dept â”‚ cid   â”‚ grade â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ S001 â”‚ Alice â”‚  3   â”‚ CS   â”‚ CS101 â”‚ A     â”‚
â”‚ S001 â”‚ Alice â”‚  3   â”‚ CS   â”‚ CS301 â”‚ A+    â”‚
â”‚ S001 â”‚ Alice â”‚  3   â”‚ CS   â”‚ MA101 â”‚ B+    â”‚
â”‚ S002 â”‚ Bob   â”‚  2   â”‚ CS   â”‚ CS101 â”‚ B     â”‚
â”‚ S002 â”‚ Bob   â”‚  2   â”‚ CS   â”‚ CS301 â”‚ A-    â”‚
â”‚ S003 â”‚ Carol â”‚  4   â”‚ EE   â”‚ EE201 â”‚ A     â”‚
â”‚ S003 â”‚ Carol â”‚  4   â”‚ EE   â”‚ CS101 â”‚ B+    â”‚
â”‚ S004 â”‚ Dave  â”‚  3   â”‚ ME   â”‚ CS101 â”‚ C     â”‚
â”‚ S005 â”‚ Eve   â”‚  1   â”‚ CS   â”‚ CS101 â”‚ A     â”‚
â”‚ S005 â”‚ Eve   â”‚  1   â”‚ CS   â”‚ MA101 â”‚ A-    â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜

WARNING: Be careful with natural join when relations share
attribute names unintentionally!

STUDENT(sid, name, year, dept) â‹ˆ COURSE(cid, title, credits, dept)
                          ^^^^                                ^^^^
This joins on &#39;dept&#39;, which may not be what you want!
It matches students with courses in THEIR department.
</code></pre></div>

<h3 id="outer-joins">Outer Joins<a class="header-link" href="#outer-joins" title="Permanent link">&para;</a></h3>
<p>Standard joins discard tuples that do not match. <strong>Outer joins</strong> preserve unmatched tuples by padding them with NULLs.</p>
<div class="highlight"><pre><span></span><code><span class="nx">Three</span><span class="w"> </span><span class="nx">types</span><span class="p">:</span>

<span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="nx">LEFT</span><span class="w"> </span><span class="nx">OUTER</span><span class="w"> </span><span class="nx">JOIN</span><span class="w"> </span><span class="p">(</span><span class="err">âŸ•</span><span class="p">):</span>
<span class="w">   </span><span class="nx">Keep</span><span class="w"> </span><span class="nx">all</span><span class="w"> </span><span class="nx">tuples</span><span class="w"> </span><span class="nx">from</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">LEFT</span><span class="w"> </span><span class="nx">relation</span><span class="p">.</span>
<span class="w">   </span><span class="nx">Pad</span><span class="w"> </span><span class="nx">with</span><span class="w"> </span><span class="nx">NULLs</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">no</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">right</span><span class="p">.</span>

<span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="nx">RIGHT</span><span class="w"> </span><span class="nx">OUTER</span><span class="w"> </span><span class="nx">JOIN</span><span class="w"> </span><span class="p">(</span><span class="err">âŸ–</span><span class="p">):</span>
<span class="w">   </span><span class="nx">Keep</span><span class="w"> </span><span class="nx">all</span><span class="w"> </span><span class="nx">tuples</span><span class="w"> </span><span class="nx">from</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">RIGHT</span><span class="w"> </span><span class="nx">relation</span><span class="p">.</span>
<span class="w">   </span><span class="nx">Pad</span><span class="w"> </span><span class="nx">with</span><span class="w"> </span><span class="nx">NULLs</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">no</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">left</span><span class="p">.</span>

<span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="nx">FULL</span><span class="w"> </span><span class="nx">OUTER</span><span class="w"> </span><span class="nx">JOIN</span><span class="w"> </span><span class="p">(</span><span class="err">âŸ—</span><span class="p">):</span>
<span class="w">   </span><span class="nx">Keep</span><span class="w"> </span><span class="nx">all</span><span class="w"> </span><span class="nx">tuples</span><span class="w"> </span><span class="nx">from</span><span class="w"> </span><span class="nx">BOTH</span><span class="w"> </span><span class="nx">relations</span><span class="p">.</span>
<span class="w">   </span><span class="nx">Pad</span><span class="w"> </span><span class="nx">with</span><span class="w"> </span><span class="nx">NULLs</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">either</span><span class="w"> </span><span class="nx">side</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nx">needed</span><span class="p">.</span>
</code></pre></div>

<p><strong>Example: Left Outer Join</strong></p>
<div class="highlight"><pre><span></span><code>STUDENT âŸ•_{STUDENT.sid = ENROLLMENT.sid} ENROLLMENT

&quot;Find all students and their enrollments, INCLUDING students
 with no enrollments&quot;

(Suppose S004/Dave had no enrollments in our data.)

If Dave had NO enrollments:

Result:
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
â”‚ sid  â”‚ name  â”‚ year â”‚ dept â”‚ cid   â”‚ grade â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ S001 â”‚ Alice â”‚  3   â”‚ CS   â”‚ CS101 â”‚ A     â”‚
â”‚ S001 â”‚ Alice â”‚  3   â”‚ CS   â”‚ CS301 â”‚ A+    â”‚
â”‚ S001 â”‚ Alice â”‚  3   â”‚ CS   â”‚ MA101 â”‚ B+    â”‚
â”‚ S002 â”‚ Bob   â”‚  2   â”‚ CS   â”‚ CS101 â”‚ B     â”‚
â”‚ S002 â”‚ Bob   â”‚  2   â”‚ CS   â”‚ CS301 â”‚ A-    â”‚
â”‚ S003 â”‚ Carol â”‚  4   â”‚ EE   â”‚ EE201 â”‚ A     â”‚
â”‚ S003 â”‚ Carol â”‚  4   â”‚ EE   â”‚ CS101 â”‚ B+    â”‚
â”‚ S004 â”‚ Dave  â”‚  3   â”‚ ME   â”‚ NULL  â”‚ NULL  â”‚  â† preserved with NULLs
â”‚ S005 â”‚ Eve   â”‚  1   â”‚ CS   â”‚ CS101 â”‚ A     â”‚
â”‚ S005 â”‚ Eve   â”‚  1   â”‚ CS   â”‚ MA101 â”‚ A-    â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="join-comparison-summary">Join Comparison Summary<a class="header-link" href="#join-comparison-summary" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Join Types                                â”‚
â”‚                                                                  â”‚
â”‚  Cartesian Product  R Ã— S      All combinations (n Ã— m tuples)  â”‚
â”‚  Theta Join         R â‹ˆ_Î¸ S    Cartesian + selection on Î¸       â”‚
â”‚  Equi-Join          R â‹ˆ_{=} S  Theta join with equality only    â”‚
â”‚  Natural Join       R â‹ˆ S      Equi-join on common attrs,       â”‚
â”‚                                 remove duplicates                â”‚
â”‚  Left Outer Join    R âŸ• S      Natural + keep unmatched R       â”‚
â”‚  Right Outer Join   R âŸ– S      Natural + keep unmatched S       â”‚
â”‚  Full Outer Join    R âŸ— S      Natural + keep all unmatched     â”‚
â”‚  Semi-Join          R â‹‰ S      Tuples in R with a match in S   â”‚
â”‚  Anti-Join          R â–· S      Tuples in R with NO match in S  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="semi-join-and-anti-join">Semi-Join and Anti-Join<a class="header-link" href="#semi-join-and-anti-join" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>Semi-Join:  R â‹‰ S = Ï€_{attrs(R)}(R â‹ˆ S)

&quot;Return tuples from R that have a matching tuple in S&quot;
(Only R&#39;s attributes appear in the result)

Anti-Join:  R â–· S = R âˆ’ Ï€_{attrs(R)}(R â‹ˆ S)

&quot;Return tuples from R that have NO matching tuple in S&quot;
</code></pre></div>

<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code>&quot;Students who are enrolled in at least one course&quot; (Semi-Join):
STUDENT â‹‰ ENROLLMENT
â†’ All students from STUDENT who appear in ENROLLMENT

&quot;Students who are NOT enrolled in any course&quot; (Anti-Join):
STUDENT â–· ENROLLMENT
â†’ Students who have no matching enrollment
</code></pre></div>

<hr />
<h2 id="5-division">5. Division<a class="header-link" href="#5-division" title="Permanent link">&para;</a></h2>
<p>The <strong>division</strong> operation answers "for all" queries. It is one of the most powerful and least intuitive operations in relational algebra.</p>
<div class="highlight"><pre><span></span><code><span class="n">Notation</span><span class="o">:</span><span class="w">   </span><span class="n">R</span><span class="w"> </span><span class="err">Ã·</span><span class="w"> </span><span class="n">S</span>

<span class="n">Given</span><span class="o">:</span><span class="w">      </span><span class="n">R</span><span class="o">(</span><span class="n">A1</span><span class="o">,</span><span class="w"> </span><span class="n">A2</span><span class="o">,</span><span class="w"> </span><span class="o">...,</span><span class="w"> </span><span class="n">An</span><span class="o">,</span><span class="w"> </span><span class="n">B1</span><span class="o">,</span><span class="w"> </span><span class="n">B2</span><span class="o">,</span><span class="w"> </span><span class="o">...,</span><span class="w"> </span><span class="n">Bm</span><span class="o">)</span>
<span class="w">            </span><span class="n">S</span><span class="o">(</span><span class="n">B1</span><span class="o">,</span><span class="w"> </span><span class="n">B2</span><span class="o">,</span><span class="w"> </span><span class="o">...,</span><span class="w"> </span><span class="n">Bm</span><span class="o">)</span>

<span class="n">Result</span><span class="o">:</span><span class="w">     </span><span class="n">Tuples</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="o">{</span><span class="n">A1</span><span class="o">,</span><span class="w"> </span><span class="o">...,</span><span class="w"> </span><span class="n">An</span><span class="o">}</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">EVERY</span><span class="w"> </span><span class="n">tuple</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">S</span><span class="o">,</span>
<span class="w">            </span><span class="n">the</span><span class="w"> </span><span class="n">tuple</span><span class="w"> </span><span class="o">&lt;</span><span class="n">t</span><span class="o">,</span><span class="w"> </span><span class="n">s</span><span class="o">&gt;</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">R</span><span class="o">.</span>

<span class="n">Formally</span><span class="o">:</span>
<span class="w">  </span><span class="n">R</span><span class="w"> </span><span class="err">Ã·</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="err">âˆˆ</span><span class="w"> </span><span class="err">Ï€</span><span class="n">_</span><span class="o">{</span><span class="n">A</span><span class="o">}(</span><span class="n">R</span><span class="o">)</span><span class="w"> </span><span class="n">AND</span><span class="w"> </span><span class="err">âˆ€</span><span class="n">s</span><span class="w"> </span><span class="err">âˆˆ</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">t</span><span class="o">,</span><span class="n">s</span><span class="o">&gt;</span><span class="w"> </span><span class="err">âˆˆ</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="o">}</span>

<span class="w">  </span><span class="n">where</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">{</span><span class="n">A1</span><span class="o">,</span><span class="w"> </span><span class="o">...,</span><span class="w"> </span><span class="n">An</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">attributes</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">S</span><span class="o">)</span>
</code></pre></div>

<h3 id="division-expressed-using-fundamental-operations">Division Expressed Using Fundamental Operations<a class="header-link" href="#division-expressed-using-fundamental-operations" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>R Ã· S = Ï€_A(R) âˆ’ Ï€_A( (Ï€_A(R) Ã— S) âˆ’ R )

Explanation:
  1. Ï€_A(R)              = all possible A-values in R
  2. Ï€_A(R) Ã— S          = every A-value paired with every S-tuple
  3. (Ï€_A(R) Ã— S) âˆ’ R    = combinations that are MISSING from R
  4. Ï€_A(...)             = A-values that are missing at least one S-tuple
  5. Ï€_A(R) âˆ’ ...         = A-values that are NOT missing any S-tuple
                          = A-values associated with ALL S-tuples
</code></pre></div>

<h3 id="division-example">Division Example<a class="header-link" href="#division-example" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>&quot;Find students enrolled in ALL CS courses&quot;

Step 1: Define the dividend (student-course pairs)
  R = Ï€_{sid, cid}(ENROLLMENT)
  â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ sid  â”‚ cid   â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ S001 â”‚ CS101 â”‚
  â”‚ S001 â”‚ CS301 â”‚
  â”‚ S001 â”‚ MA101 â”‚
  â”‚ S002 â”‚ CS101 â”‚
  â”‚ S002 â”‚ CS301 â”‚
  â”‚ S003 â”‚ EE201 â”‚
  â”‚ S003 â”‚ CS101 â”‚
  â”‚ S004 â”‚ CS101 â”‚
  â”‚ S005 â”‚ CS101 â”‚
  â”‚ S005 â”‚ MA101 â”‚
  â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜

Step 2: Define the divisor (all CS courses)
  S = Ï€_{cid}(Ïƒ_{dept=&#39;CS&#39;}(COURSE))
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”
  â”‚ cid   â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ CS101 â”‚
  â”‚ CS301 â”‚
  â”‚ CS401 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”˜

Step 3: R Ã· S = students associated with ALL of {CS101, CS301, CS401}

  Check each student:
    S001: has {CS101, CS301} but NOT CS401 â†’ âœ—
    S002: has {CS101, CS301} but NOT CS401 â†’ âœ—
    S003: has {CS101} only                 â†’ âœ—
    S004: has {CS101} only                 â†’ âœ—
    S005: has {CS101} only                 â†’ âœ—

  Result: EMPTY SET (no student is enrolled in ALL three CS courses)

If CS401 were not in the course list (only CS101 and CS301):
  S = {CS101, CS301}
  S001: has {CS101, CS301} â†’ âœ“
  S002: has {CS101, CS301} â†’ âœ“
  Others: âœ—

  Result:
  â”Œâ”€â”€â”€â”€â”€â”€â”
  â”‚ sid  â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”¤
  â”‚ S001 â”‚
  â”‚ S002 â”‚
  â””â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<hr />
<h2 id="6-additional-operations">6. Additional Operations<a class="header-link" href="#6-additional-operations" title="Permanent link">&para;</a></h2>
<h3 id="aggregation-and-grouping">Aggregation and Grouping<a class="header-link" href="#aggregation-and-grouping" title="Permanent link">&para;</a></h3>
<p>The <strong>grouping/aggregation</strong> operator extends relational algebra to support aggregate functions.</p>
<div class="highlight"><pre><span></span><code><span class="n">Notation</span><span class="o">:</span><span class="w">   </span><span class="n">_</span><span class="o">{</span><span class="n">G1</span><span class="o">,</span><span class="w"> </span><span class="n">G2</span><span class="o">,</span><span class="w"> </span><span class="o">...,</span><span class="w"> </span><span class="n">Gn</span><span class="o">}</span><span class="w"> </span><span class="n">G</span><span class="w"> </span><span class="n">_</span><span class="o">{</span><span class="n">F1</span><span class="o">(</span><span class="n">A1</span><span class="o">),</span><span class="w"> </span><span class="n">F2</span><span class="o">(</span><span class="n">A2</span><span class="o">),</span><span class="w"> </span><span class="o">...,</span><span class="w"> </span><span class="n">Fk</span><span class="o">(</span><span class="n">Ak</span><span class="o">)}</span><span class="w"> </span><span class="o">(</span><span class="n">R</span><span class="o">)</span>

<span class="w">            </span><span class="n">or</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">commonly</span><span class="w"> </span><span class="n">written</span><span class="w"> </span><span class="k">as</span><span class="o">:</span>

<span class="w">            </span><span class="err">Î³</span><span class="n">_</span><span class="o">{</span><span class="n">G</span><span class="o">;</span><span class="w"> </span><span class="n">F1</span><span class="o">(</span><span class="n">A1</span><span class="o">)</span><span class="w"> </span><span class="n">AS</span><span class="w"> </span><span class="n">name1</span><span class="o">,</span><span class="w"> </span><span class="o">...}(</span><span class="n">R</span><span class="o">)</span>

<span class="n">Where</span><span class="o">:</span>
<span class="w">  </span><span class="n">G1</span><span class="o">,</span><span class="w"> </span><span class="o">...,</span><span class="w"> </span><span class="n">Gn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">grouping</span><span class="w"> </span><span class="n">attributes</span>
<span class="w">  </span><span class="n">F1</span><span class="o">,</span><span class="w"> </span><span class="o">...,</span><span class="w"> </span><span class="n">Fk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aggregate</span><span class="w"> </span><span class="n">functions</span><span class="w"> </span><span class="o">(</span><span class="n">COUNT</span><span class="o">,</span><span class="w"> </span><span class="n">SUM</span><span class="o">,</span><span class="w"> </span><span class="n">AVG</span><span class="o">,</span><span class="w"> </span><span class="n">MIN</span><span class="o">,</span><span class="w"> </span><span class="n">MAX</span><span class="o">)</span>
<span class="w">  </span><span class="n">A1</span><span class="o">,</span><span class="w"> </span><span class="o">...,</span><span class="w"> </span><span class="n">Ak</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">attributes</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">aggregate</span>
</code></pre></div>

<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="s2">&quot;Count students per department&quot;</span>

<span class="nt">Î³_</span><span class="p">{</span><span class="err">dept</span><span class="p">;</span><span class="w"> </span><span class="err">COUNT(sid)</span><span class="w"> </span><span class="err">AS</span><span class="w"> </span><span class="err">count</span><span class="p">}</span><span class="o">(</span><span class="nt">STUDENT</span><span class="o">)</span>

<span class="nt">Result</span><span class="o">:</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nt">dept</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">count</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nt">CS</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">3</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nt">EE</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">1</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nt">ME</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">1</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜</span>


<span class="s2">&quot;Average salary per department (for instructors)&quot;</span>

<span class="nt">Î³_</span><span class="p">{</span><span class="err">dept</span><span class="p">;</span><span class="w"> </span><span class="err">AVG(salary)</span><span class="w"> </span><span class="err">AS</span><span class="w"> </span><span class="err">avg_sal,</span><span class="w"> </span><span class="err">COUNT(*)</span><span class="w"> </span><span class="err">AS</span><span class="w"> </span><span class="err">num</span><span class="p">}</span><span class="o">(</span><span class="nt">INSTRUCTOR</span><span class="o">)</span>

<span class="nt">Result</span><span class="o">:</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nt">dept</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">avg_sal</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">num</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nt">CS</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">91500</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">2</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nt">EE</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">92000</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">1</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nt">MA</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">85000</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">1</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="assignment">Assignment<a class="header-link" href="#assignment" title="Permanent link">&para;</a></h3>
<p>The <strong>assignment</strong> operator stores intermediate results:</p>
<div class="highlight"><pre><span></span><code><span class="n">Notation</span><span class="o">:</span><span class="w">   </span><span class="n">temp</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="n">expression</span>

<span class="n">Example</span><span class="o">:</span>
<span class="w">  </span><span class="n">CS_STUDENTS</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="err">Ïƒ</span><span class="n">_</span><span class="o">{</span><span class="n">dept</span><span class="o">=</span><span class="s1">&#39;CS&#39;</span><span class="o">}(</span><span class="n">STUDENT</span><span class="o">)</span>
<span class="w">  </span><span class="n">CS_NAMES</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="err">Ï€</span><span class="n">_</span><span class="o">{</span><span class="n">name</span><span class="o">}(</span><span class="n">CS_STUDENTS</span><span class="o">)</span>
</code></pre></div>

<h3 id="sorting">Sorting<a class="header-link" href="#sorting" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Notation</span><span class="o">:</span><span class="w">   </span><span class="err">Ï„</span><span class="n">_</span><span class="o">{</span><span class="n">A1</span><span class="w"> </span><span class="n">ASC</span><span class="o">,</span><span class="w"> </span><span class="n">A2</span><span class="w"> </span><span class="n">DESC</span><span class="o">}(</span><span class="n">R</span><span class="o">)</span>

<span class="n">Note</span><span class="o">:</span><span class="w"> </span><span class="n">Sorting</span><span class="w"> </span><span class="n">produces</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">LIST</span><span class="o">,</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">SET</span><span class="o">.</span><span class="w"> </span><span class="n">Strictly</span><span class="w"> </span><span class="n">speaking</span><span class="o">,</span><span class="w"> </span><span class="n">it</span>
<span class="w">      </span><span class="n">goes</span><span class="w"> </span><span class="n">beyond</span><span class="w"> </span><span class="n">pure</span><span class="w"> </span><span class="n">relational</span><span class="w"> </span><span class="n">algebra</span><span class="w"> </span><span class="o">(</span><span class="n">which</span><span class="w"> </span><span class="n">produces</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">sets</span><span class="o">).</span>
</code></pre></div>

<hr />
<h2 id="7-query-trees-and-algebraic-optimization">7. Query Trees and Algebraic Optimization<a class="header-link" href="#7-query-trees-and-algebraic-optimization" title="Permanent link">&para;</a></h2>
<h3 id="query-trees">Query Trees<a class="header-link" href="#query-trees" title="Permanent link">&para;</a></h3>
<p>A <strong>query tree</strong> (or operator tree) represents a relational algebra expression as a tree where:
- Leaf nodes are base relations
- Internal nodes are relational algebra operations
- The root produces the final result</p>
<p><strong>Example:</strong> "Find names of CS students enrolled in CS301"</p>
<div class="highlight"><pre><span></span><code>Relational algebra:
  Ï€_{name}(Ïƒ_{dept=&#39;CS&#39; AND cid=&#39;CS301&#39;}(STUDENT â‹ˆ ENROLLMENT))

Query tree:

              Ï€_{name}
                 â”‚
          Ïƒ_{dept=&#39;CS&#39; AND cid=&#39;CS301&#39;}
                 â”‚
                â‹ˆ_{sid=sid}
               / \
          STUDENT  ENROLLMENT
</code></pre></div>

<h3 id="algebraic-optimization">Algebraic Optimization<a class="header-link" href="#algebraic-optimization" title="Permanent link">&para;</a></h3>
<p>The query optimizer transforms query trees using <strong>equivalence rules</strong> to find more efficient execution plans.</p>
<h3 id="key-equivalence-rules">Key Equivalence Rules<a class="header-link" href="#key-equivalence-rules" title="Permanent link">&para;</a></h3>
<p><strong>Rule 1: Cascade of Selection</strong></p>
<div class="highlight"><pre><span></span><code>Ïƒ_{c1 AND c2}(R) = Ïƒ_{c1}(Ïƒ_{c2}(R))

A conjunctive selection can be broken into a sequence of selections.
</code></pre></div>

<p><strong>Rule 2: Commutativity of Selection</strong></p>
<div class="highlight"><pre><span></span><code>Ïƒ_{c1}(Ïƒ_{c2}(R)) = Ïƒ_{c2}(Ïƒ_{c1}(R))

The order of selections does not matter.
</code></pre></div>

<p><strong>Rule 3: Cascade of Projection</strong></p>
<div class="highlight"><pre><span></span><code>Ï€_{L1}(Ï€_{L2}(...Ï€_{Ln}(R)...)) = Ï€_{L1}(R)

Only the outermost projection matters (if L1 âŠ† L2 âŠ† ... âŠ† Ln).
</code></pre></div>

<p><strong>Rule 4: Commuting Selection with Projection</strong></p>
<div class="highlight"><pre><span></span><code>If the selection condition c only involves attributes in L:
  Ï€_L(Ïƒ_c(R)) = Ïƒ_c(Ï€_L(R))
</code></pre></div>

<p><strong>Rule 5: Commutativity of Join</strong></p>
<div class="highlight"><pre><span></span><code>R â‹ˆ S = S â‹ˆ R
R Ã— S = S Ã— R
</code></pre></div>

<p><strong>Rule 6: Associativity of Join</strong></p>
<div class="highlight"><pre><span></span><code>(R â‹ˆ S) â‹ˆ T = R â‹ˆ (S â‹ˆ T)
</code></pre></div>

<p><strong>Rule 7: Pushing Selection Through Join</strong></p>
<div class="highlight"><pre><span></span><code>If condition c involves only attributes of R:
  Ïƒ_c(R â‹ˆ S) = Ïƒ_c(R) â‹ˆ S

This is the MOST IMPORTANT optimization rule!
It reduces the size of intermediate results.
</code></pre></div>

<p><strong>Rule 8: Commutativity of Set Operations</strong></p>
<div class="highlight"><pre><span></span><code>R âˆª S = S âˆª R
R âˆ© S = S âˆ© R
(But R âˆ’ S â‰  S âˆ’ R)
</code></pre></div>

<h3 id="optimization-example">Optimization Example<a class="header-link" href="#optimization-example" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>Original query tree (unoptimized):

              Ï€_{name}
                 â”‚
          Ïƒ_{dept=&#39;CS&#39; AND cid=&#39;CS301&#39;}
                 â”‚
                â‹ˆ_{sid=sid}
               / \
          STUDENT  ENROLLMENT
          (5 rows)  (10 rows)
          Cartesian: 50 rows before filter

Optimized query tree (push selections down):

              Ï€_{name}
                 â”‚
                â‹ˆ_{sid=sid}
               / \
   Ïƒ_{dept=&#39;CS&#39;}  Ïƒ_{cid=&#39;CS301&#39;}
        |              |
     STUDENT       ENROLLMENT
     (â†’3 rows)     (â†’2 rows)
     Join: 6 combinations, ~2 matches

The optimized tree:
  1. Filters STUDENT to 3 CS students FIRST
  2. Filters ENROLLMENT to 2 CS301 enrollments FIRST
  3. Joins only 3 Ã— 2 = 6 combinations instead of 5 Ã— 10 = 50
  4. Significant reduction in intermediate result size
</code></pre></div>

<h3 id="heuristic-optimization-rules">Heuristic Optimization Rules<a class="header-link" href="#heuristic-optimization-rules" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="n">Push</span><span class="w"> </span><span class="n">selections</span><span class="w"> </span><span class="n">down</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">far</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="nb">pos</span><span class="n">sible</span>
<span class="w">   </span><span class="p">(</span><span class="n">Reduce</span><span class="w"> </span><span class="n">tuple</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="n">early</span><span class="p">)</span>

<span class="mf">2.</span><span class="w"> </span><span class="n">Push</span><span class="w"> </span><span class="n">projections</span><span class="w"> </span><span class="n">down</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">far</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="nb">pos</span><span class="n">sible</span>
<span class="w">   </span><span class="p">(</span><span class="n">Reduce</span><span class="w"> </span><span class="n">attribute</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="n">early</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">keep</span><span class="w"> </span><span class="n">join</span><span class="w"> </span><span class="n">attributes</span><span class="p">)</span>

<span class="mf">3.</span><span class="w"> </span><span class="n">Choose</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">restrictive</span><span class="w"> </span><span class="n">selection</span><span class="w"> </span><span class="n">first</span>
<span class="w">   </span><span class="p">(</span><span class="n">A</span><span class="w"> </span><span class="n">selection</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">eliminates</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">tuples</span><span class="p">)</span>

<span class="mf">4.</span><span class="w"> </span><span class="n">Avoid</span><span class="w"> </span><span class="n">Cartesian</span><span class="w"> </span><span class="n">products</span>
<span class="w">   </span><span class="p">(</span><span class="n">Always</span><span class="w"> </span><span class="n">prefer</span><span class="w"> </span><span class="n">joins</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="n">Cartesian</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">selection</span><span class="p">)</span>

<span class="mf">5.</span><span class="w"> </span><span class="n">Choose</span><span class="w"> </span><span class="n">join</span><span class="w"> </span><span class="ow">or</span><span class="n">der</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span><span class="n">minimize</span><span class="w"> </span><span class="nb">int</span><span class="n">ermediate</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="n">size</span>
<span class="w">   </span><span class="p">(</span><span class="n">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">hardest</span><span class="w"> </span><span class="n">optimization</span><span class="w"> </span><span class="n">problem</span><span class="w"> </span><span class="err">â€”</span><span class="w"> </span><span class="n">often</span><span class="w"> </span><span class="n">NP</span><span class="o">-</span><span class="n">hard</span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="8-relational-calculus-brief-introduction">8. Relational Calculus (Brief Introduction)<a class="header-link" href="#8-relational-calculus-brief-introduction" title="Permanent link">&para;</a></h2>
<p>While relational algebra is <strong>procedural</strong> (specifies how to compute the result), <strong>relational calculus</strong> is <strong>declarative</strong> (specifies what the result should be, not how to compute it).</p>
<h3 id="tuple-relational-calculus-trc">Tuple Relational Calculus (TRC)<a class="header-link" href="#tuple-relational-calculus-trc" title="Permanent link">&para;</a></h3>
<p>In TRC, queries are expressed using tuple variables that range over relations.</p>
<div class="highlight"><pre><span></span><code>General form:
  { t | P(t) }

  &quot;The set of all tuples t such that predicate P(t) is true&quot;

Example: &quot;Find all CS students&quot;

  { t | t âˆˆ STUDENT âˆ§ t.dept = &#39;CS&#39; }

  &quot;The set of tuples t from STUDENT where dept is CS&quot;

Example: &quot;Find names and departments of students in year 3 or 4&quot;

  { t.name, t.dept | t âˆˆ STUDENT âˆ§ (t.year = 3 âˆ¨ t.year = 4) }

Example: &quot;Find students enrolled in CS301&quot;

  { t | t âˆˆ STUDENT âˆ§ âˆƒe âˆˆ ENROLLMENT(e.sid = t.sid âˆ§ e.cid = &#39;CS301&#39;) }

  &quot;Tuples t from STUDENT such that there EXISTS an enrollment e
   with the same sid and cid = CS301&quot;
</code></pre></div>

<h3 id="domain-relational-calculus-drc">Domain Relational Calculus (DRC)<a class="header-link" href="#domain-relational-calculus-drc" title="Permanent link">&para;</a></h3>
<p>In DRC, variables range over individual values (domains) rather than tuples.</p>
<div class="highlight"><pre><span></span><code>General form:
  { &lt;x1, x2, ..., xn&gt; | P(x1, x2, ..., xn) }

Example: &quot;Find names of CS students&quot;

  { &lt;n&gt; | âˆƒs, y, d (STUDENT(s, n, y, d) âˆ§ d = &#39;CS&#39;) }

  &quot;The set of name values n such that there exist values s, y, d
   where (s, n, y, d) is a tuple in STUDENT and d is CS&quot;
</code></pre></div>

<h3 id="equivalence-of-algebra-and-calculus">Equivalence of Algebra and Calculus<a class="header-link" href="#equivalence-of-algebra-and-calculus" title="Permanent link">&para;</a></h3>
<p><strong>Codd's Theorem</strong> (1972): Relational algebra and (safe) relational calculus have the same expressive power. Any query expressible in one can be expressed in the other.</p>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Relational</span><span class="w"> </span><span class="n">Algebra</span><span class="w">  </span><span class="err">â‰¡</span><span class="w">  </span><span class="n">Safe</span><span class="w"> </span><span class="n">Tuple</span><span class="w"> </span><span class="n">Relational</span><span class="w"> </span><span class="n">Calc</span><span class="p">.</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                      </span><span class="err">â‰¡</span><span class="w">  </span><span class="n">Safe</span><span class="w"> </span><span class="n">Domain</span><span class="w"> </span><span class="n">Relational</span><span class="w"> </span><span class="n">Calc</span><span class="p">.</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                      </span><span class="err">â‰¡</span><span class="w">  </span><span class="n">SQL</span><span class="w"> </span><span class="p">(</span><span class="n">core</span><span class="p">)</span><span class="w">                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">A</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="n">language</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="s">&quot;relationally complete&quot;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">it</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">can</span><span class="w"> </span><span class="n">express</span><span class="w"> </span><span class="n">everything</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">relational</span><span class="w"> </span><span class="n">algebra</span><span class="w"> </span><span class="n">can</span><span class="p">.</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">SQL</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">relationally</span><span class="w"> </span><span class="n">complete</span><span class="w"> </span><span class="p">(</span><span class="k">and</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="err">â€”</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">has</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">aggregation</span><span class="p">,</span><span class="w"> </span><span class="n">ordering</span><span class="p">,</span><span class="w"> </span><span class="n">recursion</span><span class="p">,</span><span class="w"> </span><span class="n">etc</span><span class="p">.)</span><span class="w">             </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="safety-of-expressions">Safety of Expressions<a class="header-link" href="#safety-of-expressions" title="Permanent link">&para;</a></h3>
<p>A relational calculus expression is <strong>safe</strong> if it guarantees a finite result. Unsafe expressions can produce infinite results:</p>
<div class="highlight"><pre><span></span><code>Unsafe:  { t | Â¬(t âˆˆ STUDENT) }
         &quot;All tuples NOT in STUDENT&quot; â€” this is infinite!

Safe:    { t | t âˆˆ STUDENT âˆ§ Â¬(âˆƒe âˆˆ ENROLLMENT(e.sid = t.sid)) }
         &quot;Students NOT enrolled in any course&quot; â€” finite result
</code></pre></div>

<hr />
<h2 id="9-equivalence-with-sql">9. Equivalence with SQL<a class="header-link" href="#9-equivalence-with-sql" title="Permanent link">&para;</a></h2>
<p>Every relational algebra expression has an SQL equivalent. Understanding this correspondence helps in writing and optimizing SQL queries.</p>
<h3 id="operation-by-operation-mapping">Operation-by-Operation Mapping<a class="header-link" href="#operation-by-operation-mapping" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="n">â”‚</span><span class="w"> </span><span class="n">Relational</span><span class="w"> </span><span class="n">Algebra</span><span class="w"> </span><span class="n">â”‚</span><span class="w"> </span><span class="k">SQL</span><span class="w"> </span><span class="n">Equivalent</span><span class="w">                           </span><span class="n">â”‚</span>
<span class="n">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="n">â”‚</span><span class="w"> </span><span class="n">Ïƒ_</span><span class="err">{</span><span class="n">c</span><span class="err">}</span><span class="p">(</span><span class="n">R</span><span class="p">)</span><span class="w">           </span><span class="n">â”‚</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="err">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">c</span><span class="w">                  </span><span class="n">â”‚</span>
<span class="n">â”‚</span><span class="w"> </span><span class="n">Ï€_</span><span class="err">{</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="err">}</span><span class="p">(</span><span class="n">R</span><span class="p">)</span><span class="w">         </span><span class="n">â”‚</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">R</span><span class="w">              </span><span class="n">â”‚</span>
<span class="n">â”‚</span><span class="w"> </span><span class="n">Ï_</span><span class="err">{</span><span class="n">S</span><span class="err">}</span><span class="p">(</span><span class="n">R</span><span class="p">)</span><span class="w">           </span><span class="n">â”‚</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">S</span><span class="w">  </span><span class="p">(</span><span class="k">in</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">clause</span><span class="p">)</span><span class="w">                 </span><span class="n">â”‚</span>
<span class="n">â”‚</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">âˆª</span><span class="w"> </span><span class="n">S</span><span class="w">              </span><span class="n">â”‚</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="err">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="k">UNION</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="err">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">S</span><span class="w">    </span><span class="n">â”‚</span>
<span class="n">â”‚</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">âˆ©</span><span class="w"> </span><span class="n">S</span><span class="w">              </span><span class="n">â”‚</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="err">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="k">INTERSECT</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="err">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Sâ”‚</span>
<span class="n">â”‚</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">âˆ’</span><span class="w"> </span><span class="n">S</span><span class="w">              </span><span class="n">â”‚</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="err">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="k">EXCEPT</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="err">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">S</span><span class="w">   </span><span class="n">â”‚</span>
<span class="n">â”‚</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">Ã—</span><span class="w"> </span><span class="n">S</span><span class="w">              </span><span class="n">â”‚</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="err">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">R</span><span class="p">,</span><span class="w"> </span><span class="n">S</span><span class="w">  </span><span class="p">(</span><span class="k">or</span><span class="w"> </span><span class="k">CROSS</span><span class="w"> </span><span class="k">JOIN</span><span class="p">)</span><span class="w">      </span><span class="n">â”‚</span>
<span class="n">â”‚</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">â‹ˆ_</span><span class="err">{</span><span class="n">c</span><span class="err">}</span><span class="w"> </span><span class="n">S</span><span class="w">          </span><span class="n">â”‚</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="err">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">c</span><span class="w">              </span><span class="n">â”‚</span>
<span class="n">â”‚</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">â‹ˆ</span><span class="w"> </span><span class="n">S</span><span class="w">              </span><span class="n">â”‚</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="err">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="k">NATURAL</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">S</span><span class="w">           </span><span class="n">â”‚</span>
<span class="n">â”‚</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">âŸ•</span><span class="w"> </span><span class="n">S</span><span class="w">              </span><span class="n">â”‚</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="err">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">OUTER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="n">â”‚</span>
<span class="n">â”‚</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">Ã·</span><span class="w"> </span><span class="n">S</span><span class="w">              </span><span class="n">â”‚</span><span class="w"> </span><span class="p">(</span><span class="n">requires</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="n">correlated</span><span class="w"> </span><span class="n">sub</span><span class="p">)</span><span class="w">   </span><span class="n">â”‚</span>
<span class="n">â”‚</span><span class="w"> </span><span class="n">Î³_</span><span class="err">{</span><span class="n">G</span><span class="p">;</span><span class="n">F</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="err">}</span><span class="p">(</span><span class="n">R</span><span class="p">)</span><span class="w">      </span><span class="n">â”‚</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="n">G</span><span class="p">,</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">G</span><span class="w">        </span><span class="n">â”‚</span>
<span class="n">â”‚</span><span class="w"> </span><span class="n">Ï„_</span><span class="err">{</span><span class="n">A</span><span class="err">}</span><span class="p">(</span><span class="n">R</span><span class="p">)</span><span class="w">           </span><span class="n">â”‚</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="err">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">A</span><span class="w">               </span><span class="n">â”‚</span>
<span class="n">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="detailed-sql-equivalences">Detailed SQL Equivalences<a class="header-link" href="#detailed-sql-equivalences" title="Permanent link">&para;</a></h3>
<p><strong>Selection:</strong></p>
<div class="highlight"><pre><span></span><code>Ïƒ_{dept=&#39;CS&#39; AND year&gt;=3}(STUDENT)

SELECT *
FROM student
WHERE dept = &#39;CS&#39; AND year &gt;= 3;
</code></pre></div>

<p><strong>Projection:</strong></p>
<div class="highlight"><pre><span></span><code>Ï€_{name, dept}(STUDENT)

SELECT DISTINCT name, dept
FROM student;

Note: SQL does NOT eliminate duplicates by default.
      You must use DISTINCT to match relational algebra&#39;s set semantics.
</code></pre></div>

<p><strong>Natural Join:</strong></p>
<div class="highlight"><pre><span></span><code><span class="nt">STUDENT</span><span class="w"> </span><span class="err">â‹ˆ</span><span class="w"> </span><span class="nt">ENROLLMENT</span>

<span class="nt">--</span><span class="w"> </span><span class="nt">Method</span><span class="w"> </span><span class="nt">1</span><span class="o">:</span><span class="w"> </span><span class="nt">NATURAL</span><span class="w"> </span><span class="nt">JOIN</span><span class="w"> </span><span class="o">(</span><span class="nt">matches</span><span class="w"> </span><span class="nt">on</span><span class="w"> </span><span class="nt">all</span><span class="w"> </span><span class="nt">common</span><span class="w"> </span><span class="nt">columns</span><span class="o">)</span>
<span class="nt">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nt">FROM</span><span class="w"> </span><span class="nt">student</span><span class="w"> </span><span class="nt">NATURAL</span><span class="w"> </span><span class="nt">JOIN</span><span class="w"> </span><span class="nt">enrollment</span><span class="o">;</span>

<span class="nt">--</span><span class="w"> </span><span class="nt">Method</span><span class="w"> </span><span class="nt">2</span><span class="o">:</span><span class="w"> </span><span class="nt">Explicit</span><span class="w"> </span><span class="nt">JOIN</span><span class="w"> </span><span class="o">(</span><span class="nt">safer</span><span class="w"> </span><span class="err">â€”</span><span class="w"> </span><span class="nt">you</span><span class="w"> </span><span class="nt">control</span><span class="w"> </span><span class="nt">which</span><span class="w"> </span><span class="nt">columns</span><span class="w"> </span><span class="nt">match</span><span class="o">)</span>
<span class="nt">SELECT</span><span class="w"> </span><span class="nt">s</span><span class="p">.</span><span class="nc">sid</span><span class="o">,</span><span class="w"> </span><span class="nt">s</span><span class="p">.</span><span class="nc">name</span><span class="o">,</span><span class="w"> </span><span class="nt">s</span><span class="p">.</span><span class="nc">year</span><span class="o">,</span><span class="w"> </span><span class="nt">s</span><span class="p">.</span><span class="nc">dept</span><span class="o">,</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">cid</span><span class="o">,</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">grade</span>
<span class="nt">FROM</span><span class="w"> </span><span class="nt">student</span><span class="w"> </span><span class="nt">s</span>
<span class="nt">JOIN</span><span class="w"> </span><span class="nt">enrollment</span><span class="w"> </span><span class="nt">e</span><span class="w"> </span><span class="nt">ON</span><span class="w"> </span><span class="nt">s</span><span class="p">.</span><span class="nc">sid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">sid</span><span class="o">;</span>
</code></pre></div>

<p><strong>Division (the hardest to express in SQL):</strong></p>
<div class="highlight"><pre><span></span><code><span class="nt">R</span><span class="w"> </span><span class="err">Ã·</span><span class="w"> </span><span class="nt">S</span><span class="w">  </span><span class="o">=</span><span class="w">  </span><span class="s2">&quot;Find tuples in R associated with ALL tuples in S&quot;</span>

<span class="nt">--</span><span class="w"> </span><span class="s2">&quot;Find students enrolled in ALL CS courses&quot;</span>
<span class="nt">SELECT</span><span class="w"> </span><span class="nt">DISTINCT</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">sid</span>
<span class="nt">FROM</span><span class="w"> </span><span class="nt">enrollment</span><span class="w"> </span><span class="nt">e</span>
<span class="nt">WHERE</span><span class="w"> </span><span class="nt">NOT</span><span class="w"> </span><span class="nt">EXISTS</span><span class="w"> </span><span class="o">(</span>
<span class="w">    </span><span class="nt">SELECT</span><span class="w"> </span><span class="nt">c</span><span class="p">.</span><span class="nc">cid</span>
<span class="w">    </span><span class="nt">FROM</span><span class="w"> </span><span class="nt">course</span><span class="w"> </span><span class="nt">c</span>
<span class="w">    </span><span class="nt">WHERE</span><span class="w"> </span><span class="nt">c</span><span class="p">.</span><span class="nc">dept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;CS&#39;</span>
<span class="w">    </span><span class="nt">AND</span><span class="w"> </span><span class="nt">NOT</span><span class="w"> </span><span class="nt">EXISTS</span><span class="w"> </span><span class="o">(</span>
<span class="w">        </span><span class="nt">SELECT</span><span class="w"> </span><span class="nt">1</span>
<span class="w">        </span><span class="nt">FROM</span><span class="w"> </span><span class="nt">enrollment</span><span class="w"> </span><span class="nt">e2</span>
<span class="w">        </span><span class="nt">WHERE</span><span class="w"> </span><span class="nt">e2</span><span class="p">.</span><span class="nc">sid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">sid</span>
<span class="w">        </span><span class="nt">AND</span><span class="w"> </span><span class="nt">e2</span><span class="p">.</span><span class="nc">cid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">c</span><span class="p">.</span><span class="nc">cid</span>
<span class="w">    </span><span class="o">)</span>
<span class="o">);</span>

<span class="nt">--</span><span class="w"> </span><span class="nt">Alternative</span><span class="w"> </span><span class="nt">using</span><span class="w"> </span><span class="nt">COUNT</span><span class="o">:</span>
<span class="nt">SELECT</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">sid</span>
<span class="nt">FROM</span><span class="w"> </span><span class="nt">enrollment</span><span class="w"> </span><span class="nt">e</span>
<span class="nt">JOIN</span><span class="w"> </span><span class="nt">course</span><span class="w"> </span><span class="nt">c</span><span class="w"> </span><span class="nt">ON</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">cid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">c</span><span class="p">.</span><span class="nc">cid</span>
<span class="nt">WHERE</span><span class="w"> </span><span class="nt">c</span><span class="p">.</span><span class="nc">dept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;CS&#39;</span>
<span class="nt">GROUP</span><span class="w"> </span><span class="nt">BY</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">sid</span>
<span class="nt">HAVING</span><span class="w"> </span><span class="nt">COUNT</span><span class="o">(</span><span class="nt">DISTINCT</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">cid</span><span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>
<span class="w">    </span><span class="nt">SELECT</span><span class="w"> </span><span class="nt">COUNT</span><span class="o">(*)</span><span class="w"> </span><span class="nt">FROM</span><span class="w"> </span><span class="nt">course</span><span class="w"> </span><span class="nt">WHERE</span><span class="w"> </span><span class="nt">dept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;CS&#39;</span>
<span class="o">);</span>
</code></pre></div>

<p><strong>Composition Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="s2">&quot;Find names of students who received an A in any course&quot;</span>

<span class="nt">Relational</span><span class="w"> </span><span class="nt">Algebra</span><span class="o">:</span>
<span class="w">  </span><span class="nt">Ï€_</span><span class="p">{</span><span class="err">name</span><span class="p">}</span><span class="o">(</span><span class="nt">Ïƒ_</span><span class="p">{</span><span class="err">grade=&#39;A&#39;</span><span class="p">}</span><span class="o">(</span><span class="nt">STUDENT</span><span class="w"> </span><span class="err">â‹ˆ</span><span class="w"> </span><span class="nt">ENROLLMENT</span><span class="o">))</span>

<span class="nt">SQL</span><span class="o">:</span>
<span class="w">  </span><span class="nt">SELECT</span><span class="w"> </span><span class="nt">DISTINCT</span><span class="w"> </span><span class="nt">s</span><span class="p">.</span><span class="nc">name</span>
<span class="w">  </span><span class="nt">FROM</span><span class="w"> </span><span class="nt">student</span><span class="w"> </span><span class="nt">s</span>
<span class="w">  </span><span class="nt">JOIN</span><span class="w"> </span><span class="nt">enrollment</span><span class="w"> </span><span class="nt">e</span><span class="w"> </span><span class="nt">ON</span><span class="w"> </span><span class="nt">s</span><span class="p">.</span><span class="nc">sid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">sid</span>
<span class="w">  </span><span class="nt">WHERE</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">grade</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;A&#39;</span><span class="o">;</span>
</code></pre></div>

<hr />
<h2 id="10-complete-worked-examples">10. Complete Worked Examples<a class="header-link" href="#10-complete-worked-examples" title="Permanent link">&para;</a></h2>
<h3 id="example-1-multi-step-query">Example 1: Multi-Step Query<a class="header-link" href="#example-1-multi-step-query" title="Permanent link">&para;</a></h3>
<p><strong>Query:</strong> "Find the names and departments of students who are enrolled in a course taught by the CS department but are not CS majors themselves."</p>
<div class="highlight"><pre><span></span><code><span class="nt">Relational</span><span class="w"> </span><span class="nt">Algebra</span><span class="o">:</span>

<span class="w">  </span><span class="nt">CS_COURSES</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="nt">Ïƒ_</span><span class="p">{</span><span class="err">dept=&#39;CS&#39;</span><span class="p">}</span><span class="o">(</span><span class="nt">COURSE</span><span class="o">)</span>
<span class="w">  </span><span class="nt">CS_ENROLLED</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="nt">ENROLLMENT</span><span class="w"> </span><span class="err">â‹ˆ</span><span class="nt">_</span><span class="p">{</span><span class="err">cid</span><span class="p">}</span><span class="w"> </span><span class="nt">CS_COURSES</span>
<span class="w">  </span><span class="nt">NON_CS_STUDENTS</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="nt">Ïƒ_</span><span class="p">{</span><span class="err">deptâ‰ &#39;CS&#39;</span><span class="p">}</span><span class="o">(</span><span class="nt">STUDENT</span><span class="o">)</span>
<span class="w">  </span><span class="nt">RESULT</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="nt">Ï€_</span><span class="p">{</span><span class="err">name,</span><span class="w"> </span><span class="err">dept</span><span class="p">}</span><span class="o">(</span><span class="nt">NON_CS_STUDENTS</span><span class="w"> </span><span class="err">â‹ˆ</span><span class="nt">_</span><span class="p">{</span><span class="err">sid</span><span class="p">}</span><span class="w"> </span><span class="nt">CS_ENROLLED</span><span class="o">)</span>

<span class="nt">Step-by-step</span><span class="o">:</span>

<span class="nt">1</span><span class="o">.</span><span class="w"> </span><span class="nt">CS_COURSES</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">Ïƒ_</span><span class="p">{</span><span class="err">dept=&#39;CS&#39;</span><span class="p">}</span><span class="o">(</span><span class="nt">COURSE</span><span class="o">)</span>
<span class="w">   </span><span class="err">â†’</span><span class="w"> </span><span class="p">{</span><span class="err">CS101,</span><span class="w"> </span><span class="err">CS301,</span><span class="w"> </span><span class="err">CS401</span><span class="p">}</span>

<span class="nt">2</span><span class="o">.</span><span class="w"> </span><span class="nt">CS_ENROLLED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">Ï€_</span><span class="p">{</span><span class="err">sid</span><span class="p">}</span><span class="o">(</span><span class="nt">ENROLLMENT</span><span class="w"> </span><span class="err">â‹ˆ</span><span class="w"> </span><span class="nt">CS_COURSES</span><span class="o">)</span>
<span class="w">   </span><span class="err">â†’</span><span class="w"> </span><span class="p">{</span><span class="err">S001,</span><span class="w"> </span><span class="err">S002,</span><span class="w"> </span><span class="err">S003,</span><span class="w"> </span><span class="err">S004,</span><span class="w"> </span><span class="err">S005</span><span class="p">}</span><span class="w"> </span><span class="o">(</span><span class="nt">all</span><span class="w"> </span><span class="nt">who</span><span class="w"> </span><span class="nt">took</span><span class="w"> </span><span class="nt">CS101</span><span class="o">/</span><span class="nt">CS301</span><span class="o">/</span><span class="nt">CS401</span><span class="o">)</span>

<span class="nt">3</span><span class="o">.</span><span class="w"> </span><span class="nt">NON_CS_STUDENTS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">Ïƒ_</span><span class="p">{</span><span class="err">deptâ‰ &#39;CS&#39;</span><span class="p">}</span><span class="o">(</span><span class="nt">STUDENT</span><span class="o">)</span>
<span class="w">   </span><span class="err">â†’</span><span class="w"> </span><span class="p">{</span><span class="err">S003/Carol/EE,</span><span class="w"> </span><span class="err">S004/Dave/ME</span><span class="p">}</span>

<span class="nt">4</span><span class="o">.</span><span class="w"> </span><span class="nt">RESULT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">Ï€_</span><span class="p">{</span><span class="err">name,</span><span class="w"> </span><span class="err">dept</span><span class="p">}</span><span class="o">(</span><span class="nt">NON_CS_STUDENTS</span><span class="w"> </span><span class="err">â‹ˆ</span><span class="w"> </span><span class="nt">CS_ENROLLED</span><span class="o">)</span>
<span class="w">   </span><span class="err">â†’</span><span class="w"> </span><span class="p">{</span><span class="err">(Carol,</span><span class="w"> </span><span class="err">EE),</span><span class="w"> </span><span class="err">(Dave,</span><span class="w"> </span><span class="err">ME)</span><span class="p">}</span>

<span class="nt">SQL</span><span class="o">:</span>
<span class="w">  </span><span class="nt">SELECT</span><span class="w"> </span><span class="nt">DISTINCT</span><span class="w"> </span><span class="nt">s</span><span class="p">.</span><span class="nc">name</span><span class="o">,</span><span class="w"> </span><span class="nt">s</span><span class="p">.</span><span class="nc">dept</span>
<span class="w">  </span><span class="nt">FROM</span><span class="w"> </span><span class="nt">student</span><span class="w"> </span><span class="nt">s</span>
<span class="w">  </span><span class="nt">JOIN</span><span class="w"> </span><span class="nt">enrollment</span><span class="w"> </span><span class="nt">e</span><span class="w"> </span><span class="nt">ON</span><span class="w"> </span><span class="nt">s</span><span class="p">.</span><span class="nc">sid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">sid</span>
<span class="w">  </span><span class="nt">JOIN</span><span class="w"> </span><span class="nt">course</span><span class="w"> </span><span class="nt">c</span><span class="w"> </span><span class="nt">ON</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">cid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">c</span><span class="p">.</span><span class="nc">cid</span>
<span class="w">  </span><span class="nt">WHERE</span><span class="w"> </span><span class="nt">c</span><span class="p">.</span><span class="nc">dept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;CS&#39;</span><span class="w"> </span><span class="nt">AND</span><span class="w"> </span><span class="nt">s</span><span class="p">.</span><span class="nc">dept</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="s1">&#39;CS&#39;</span><span class="o">;</span>
</code></pre></div>

<h3 id="example-2-division-query">Example 2: Division Query<a class="header-link" href="#example-2-division-query" title="Permanent link">&para;</a></h3>
<p><strong>Query:</strong> "Find students who have taken ALL courses that student S001 has taken."</p>
<div class="highlight"><pre><span></span><code><span class="nt">Relational</span><span class="w"> </span><span class="nt">Algebra</span><span class="o">:</span>

<span class="w">  </span><span class="nt">S001_COURSES</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="nt">Ï€_</span><span class="p">{</span><span class="err">cid</span><span class="p">}</span><span class="o">(</span><span class="nt">Ïƒ_</span><span class="p">{</span><span class="err">sid=&#39;S001&#39;</span><span class="p">}</span><span class="o">(</span><span class="nt">ENROLLMENT</span><span class="o">))</span>
<span class="w">  </span><span class="nt">ALL_ENROLLMENTS</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="nt">Ï€_</span><span class="p">{</span><span class="err">sid,</span><span class="w"> </span><span class="err">cid</span><span class="p">}</span><span class="o">(</span><span class="nt">ENROLLMENT</span><span class="o">)</span>
<span class="w">  </span><span class="nt">RESULT</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="nt">ALL_ENROLLMENTS</span><span class="w"> </span><span class="err">Ã·</span><span class="w"> </span><span class="nt">S001_COURSES</span>

<span class="nt">Step-by-step</span><span class="o">:</span>

<span class="nt">1</span><span class="o">.</span><span class="w"> </span><span class="nt">S001_COURSES</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="err">CS101,</span><span class="w"> </span><span class="err">CS301,</span><span class="w"> </span><span class="err">MA101</span><span class="p">}</span>

<span class="nt">2</span><span class="o">.</span><span class="w"> </span><span class="nt">Check</span><span class="w"> </span><span class="nt">each</span><span class="w"> </span><span class="nt">student</span><span class="o">:</span>
<span class="w">   </span><span class="nt">S001</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="err">CS101,</span><span class="w"> </span><span class="err">CS301,</span><span class="w"> </span><span class="err">MA101</span><span class="p">}</span><span class="w"> </span><span class="err">âŠ‡</span><span class="w"> </span><span class="p">{</span><span class="err">CS101,</span><span class="w"> </span><span class="err">CS301,</span><span class="w"> </span><span class="err">MA101</span><span class="p">}</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="err">âœ“</span>
<span class="w">   </span><span class="nt">S002</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="err">CS101,</span><span class="w"> </span><span class="err">CS301</span><span class="p">}</span><span class="w">        </span><span class="err">âŠ‡</span><span class="w"> </span><span class="p">{</span><span class="err">CS101,</span><span class="w"> </span><span class="err">CS301,</span><span class="w"> </span><span class="err">MA101</span><span class="p">}</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="err">âœ—</span><span class="w"> </span><span class="o">(</span><span class="nt">missing</span><span class="w"> </span><span class="nt">MA101</span><span class="o">)</span>
<span class="w">   </span><span class="nt">S003</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="err">EE201,</span><span class="w"> </span><span class="err">CS101</span><span class="p">}</span><span class="w">        </span><span class="err">âŠ‡</span><span class="w"> </span><span class="p">{</span><span class="err">CS101,</span><span class="w"> </span><span class="err">CS301,</span><span class="w"> </span><span class="err">MA101</span><span class="p">}</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="err">âœ—</span>
<span class="w">   </span><span class="nt">S004</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="err">CS101</span><span class="p">}</span><span class="w">               </span><span class="err">âŠ‡</span><span class="w"> </span><span class="p">{</span><span class="err">CS101,</span><span class="w"> </span><span class="err">CS301,</span><span class="w"> </span><span class="err">MA101</span><span class="p">}</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="err">âœ—</span>
<span class="w">   </span><span class="nt">S005</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="err">CS101,</span><span class="w"> </span><span class="err">MA101</span><span class="p">}</span><span class="w">        </span><span class="err">âŠ‡</span><span class="w"> </span><span class="p">{</span><span class="err">CS101,</span><span class="w"> </span><span class="err">CS301,</span><span class="w"> </span><span class="err">MA101</span><span class="p">}</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="err">âœ—</span><span class="w"> </span><span class="o">(</span><span class="nt">missing</span><span class="w"> </span><span class="nt">CS301</span><span class="o">)</span>

<span class="nt">3</span><span class="o">.</span><span class="w"> </span><span class="nt">RESULT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="err">S001</span><span class="p">}</span>

<span class="nt">SQL</span><span class="o">:</span>
<span class="w">  </span><span class="nt">SELECT</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">sid</span>
<span class="w">  </span><span class="nt">FROM</span><span class="w"> </span><span class="nt">enrollment</span><span class="w"> </span><span class="nt">e</span>
<span class="w">  </span><span class="nt">WHERE</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">cid</span><span class="w"> </span><span class="nt">IN</span><span class="w"> </span><span class="o">(</span>
<span class="w">      </span><span class="nt">SELECT</span><span class="w"> </span><span class="nt">cid</span><span class="w"> </span><span class="nt">FROM</span><span class="w"> </span><span class="nt">enrollment</span><span class="w"> </span><span class="nt">WHERE</span><span class="w"> </span><span class="nt">sid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;S001&#39;</span>
<span class="w">  </span><span class="o">)</span>
<span class="w">  </span><span class="nt">GROUP</span><span class="w"> </span><span class="nt">BY</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">sid</span>
<span class="w">  </span><span class="nt">HAVING</span><span class="w"> </span><span class="nt">COUNT</span><span class="o">(</span><span class="nt">DISTINCT</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">cid</span><span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>
<span class="w">      </span><span class="nt">SELECT</span><span class="w"> </span><span class="nt">COUNT</span><span class="o">(</span><span class="nt">DISTINCT</span><span class="w"> </span><span class="nt">cid</span><span class="o">)</span><span class="w"> </span><span class="nt">FROM</span><span class="w"> </span><span class="nt">enrollment</span><span class="w"> </span><span class="nt">WHERE</span><span class="w"> </span><span class="nt">sid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;S001&#39;</span>
<span class="w">  </span><span class="o">);</span>
</code></pre></div>

<h3 id="example-3-outer-join">Example 3: Outer Join<a class="header-link" href="#example-3-outer-join" title="Permanent link">&para;</a></h3>
<p><strong>Query:</strong> "List all students with their enrollment counts, including students with no enrollments."</p>
<div class="highlight"><pre><span></span><code><span class="nt">Relational</span><span class="w"> </span><span class="nt">Algebra</span><span class="o">:</span>

<span class="w">  </span><span class="nt">JOINED</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="nt">STUDENT</span><span class="w"> </span><span class="err">âŸ•</span><span class="w"> </span><span class="nt">ENROLLMENT</span><span class="w">       </span><span class="o">(</span><span class="nt">left</span><span class="w"> </span><span class="nt">outer</span><span class="w"> </span><span class="nt">join</span><span class="w"> </span><span class="nt">on</span><span class="w"> </span><span class="nt">sid</span><span class="o">)</span>
<span class="w">  </span><span class="nt">RESULT</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="nt">Î³_</span><span class="p">{</span><span class="err">sid,</span><span class="w"> </span><span class="err">name</span><span class="p">;</span><span class="w"> </span><span class="err">COUNT(cid)</span><span class="w"> </span><span class="err">AS</span><span class="w"> </span><span class="err">num_courses</span><span class="p">}</span><span class="o">(</span><span class="nt">JOINED</span><span class="o">)</span>

<span class="nt">If</span><span class="w"> </span><span class="nt">Dave</span><span class="w"> </span><span class="o">(</span><span class="nt">S004</span><span class="o">)</span><span class="w"> </span><span class="nt">had</span><span class="w"> </span><span class="nt">no</span><span class="w"> </span><span class="nt">enrollments</span><span class="o">:</span>

<span class="nt">SQL</span><span class="o">:</span>
<span class="w">  </span><span class="nt">SELECT</span><span class="w"> </span><span class="nt">s</span><span class="p">.</span><span class="nc">sid</span><span class="o">,</span><span class="w"> </span><span class="nt">s</span><span class="p">.</span><span class="nc">name</span><span class="o">,</span><span class="w"> </span><span class="nt">COUNT</span><span class="o">(</span><span class="nt">e</span><span class="p">.</span><span class="nc">cid</span><span class="o">)</span><span class="w"> </span><span class="nt">AS</span><span class="w"> </span><span class="nt">num_courses</span>
<span class="w">  </span><span class="nt">FROM</span><span class="w"> </span><span class="nt">student</span><span class="w"> </span><span class="nt">s</span>
<span class="w">  </span><span class="nt">LEFT</span><span class="w"> </span><span class="nt">OUTER</span><span class="w"> </span><span class="nt">JOIN</span><span class="w"> </span><span class="nt">enrollment</span><span class="w"> </span><span class="nt">e</span><span class="w"> </span><span class="nt">ON</span><span class="w"> </span><span class="nt">s</span><span class="p">.</span><span class="nc">sid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">sid</span>
<span class="w">  </span><span class="nt">GROUP</span><span class="w"> </span><span class="nt">BY</span><span class="w"> </span><span class="nt">s</span><span class="p">.</span><span class="nc">sid</span><span class="o">,</span><span class="w"> </span><span class="nt">s</span><span class="p">.</span><span class="nc">name</span>
<span class="w">  </span><span class="nt">ORDER</span><span class="w"> </span><span class="nt">BY</span><span class="w"> </span><span class="nt">num_courses</span><span class="w"> </span><span class="nt">DESC</span><span class="o">;</span>

<span class="nt">Result</span><span class="o">:</span>
<span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">sid</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">name</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">num_courses</span><span class="w"> </span><span class="err">â”‚</span>
<span class="w">  </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">S001</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">Alice</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">3</span><span class="w">           </span><span class="err">â”‚</span>
<span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">S002</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">Bob</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">2</span><span class="w">           </span><span class="err">â”‚</span>
<span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">S003</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">Carol</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">2</span><span class="w">           </span><span class="err">â”‚</span>
<span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">S005</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">Eve</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">2</span><span class="w">           </span><span class="err">â”‚</span>
<span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">S004</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">Dave</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nt">0</span><span class="w">           </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â†</span><span class="w"> </span><span class="nt">preserved</span><span class="w"> </span><span class="nt">by</span><span class="w"> </span><span class="nt">LEFT</span><span class="w"> </span><span class="nt">OUTER</span><span class="w"> </span><span class="nt">JOIN</span>
<span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="11-exercises">11. Exercises<a class="header-link" href="#11-exercises" title="Permanent link">&para;</a></h2>
<h3 id="basic-operations">Basic Operations<a class="header-link" href="#basic-operations" title="Permanent link">&para;</a></h3>
<p><strong>Exercise 3.1</strong>: Using the sample database, write relational algebra expressions for:</p>
<ul>
<li>(a) All students in year 2 or year 3</li>
<li>(b) Course titles with 4 or more credits</li>
<li>(c) Student IDs enrolled in EE201</li>
<li>(d) Names of students NOT in the CS department</li>
</ul>
<p><strong>Exercise 3.2</strong>: Evaluate the following expressions step by step, showing intermediate results:</p>
<ul>
<li>(a) <code>Ï€_{name}(Ïƒ_{year &gt; 2}(STUDENT))</code></li>
<li>(b) <code>Ï€_{sid}(Ïƒ_{grade='A'}(ENROLLMENT)) âˆ© Ï€_{sid}(Ïƒ_{dept='CS'}(STUDENT))</code></li>
<li>(c) <code>STUDENT â‹ˆ (Ïƒ_{cid='CS301'}(ENROLLMENT))</code></li>
</ul>
<h3 id="join-operations">Join Operations<a class="header-link" href="#join-operations" title="Permanent link">&para;</a></h3>
<p><strong>Exercise 3.3</strong>: For each of the following, write the relational algebra expression AND the equivalent SQL:</p>
<ul>
<li>(a) Find names of students enrolled in "Database Theory"</li>
<li>(b) Find course titles that have at least one student with grade A</li>
<li>(c) Find students who are enrolled in courses outside their department</li>
<li>(d) Find pairs of students who share at least one course</li>
</ul>
<p><strong>Exercise 3.4</strong>: Explain the difference between the results of these three queries on our sample data:</p>
<div class="highlight"><pre><span></span><code><span class="n">Q1</span><span class="o">:</span><span class="w"> </span><span class="n">STUDENT</span><span class="w"> </span><span class="err">â‹ˆ</span><span class="w"> </span><span class="n">ENROLLMENT</span>
<span class="n">Q2</span><span class="o">:</span><span class="w"> </span><span class="n">STUDENT</span><span class="w"> </span><span class="err">âŸ•</span><span class="w"> </span><span class="n">ENROLLMENT</span>
<span class="n">Q3</span><span class="o">:</span><span class="w"> </span><span class="n">STUDENT</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="n">ENROLLMENT</span>
</code></pre></div>

<p>How many tuples does each produce? Which tuples appear in Q2 but not Q1?</p>
<h3 id="division">Division<a class="header-link" href="#division" title="Permanent link">&para;</a></h3>
<p><strong>Exercise 3.5</strong>: Write relational algebra expressions using division for:</p>
<ul>
<li>(a) Students enrolled in every 3-credit course</li>
<li>(b) Students who have taken ALL courses that Bob (S002) has taken</li>
</ul>
<p>Show the step-by-step evaluation.</p>
<p><strong>Exercise 3.6</strong>: Express each division query from Exercise 3.5 in SQL using:
- (i) Double NOT EXISTS
- (ii) GROUP BY with HAVING COUNT</p>
<h3 id="optimization">Optimization<a class="header-link" href="#optimization" title="Permanent link">&para;</a></h3>
<p><strong>Exercise 3.7</strong>: Given the query:</p>
<div class="highlight"><pre><span></span><code>Ï€_{name}(Ïƒ_{credits=3 AND grade=&#39;A&#39;}(STUDENT â‹ˆ ENROLLMENT â‹ˆ COURSE))
</code></pre></div>

<ul>
<li>(a) Draw the initial (unoptimized) query tree</li>
<li>(b) Apply algebraic optimization rules to produce an optimized query tree</li>
<li>(c) Explain which rules you applied and why the optimized tree is better</li>
<li>(d) Estimate the reduction in intermediate result sizes</li>
</ul>
<p><strong>Exercise 3.8</strong>: Prove or disprove the following equivalences:</p>
<ul>
<li>(a) <code>Ïƒ_{c1}(R âˆª S) = Ïƒ_{c1}(R) âˆª Ïƒ_{c1}(S)</code></li>
<li>(b) <code>Ïƒ_{c1}(R âˆ’ S) = Ïƒ_{c1}(R) âˆ’ Ïƒ_{c1}(S)</code></li>
<li>(c) <code>Ï€_A(R âˆª S) = Ï€_A(R) âˆª Ï€_A(S)</code></li>
<li>(d) <code>Ïƒ_{c1}(R Ã— S) = Ïƒ_{c1}(R) Ã— S</code>  (where c1 involves only R's attributes)</li>
</ul>
<h3 id="relational-calculus">Relational Calculus<a class="header-link" href="#relational-calculus" title="Permanent link">&para;</a></h3>
<p><strong>Exercise 3.9</strong>: Express the following in Tuple Relational Calculus (TRC):</p>
<ul>
<li>(a) Names of students in the CS department</li>
<li>(b) Students enrolled in at least two courses</li>
<li>(c) Courses with no enrolled students</li>
<li>(d) Students enrolled in ALL courses offered by the CS department</li>
</ul>
<p><strong>Exercise 3.10</strong>: Determine which of the following TRC expressions are safe. If unsafe, explain why and provide a safe equivalent:</p>
<ul>
<li>(a) <code>{ t | Â¬(t âˆˆ STUDENT) }</code></li>
<li>(b) <code>{ t.name | t âˆˆ STUDENT âˆ§ t.gpa &gt; 3.5 }</code></li>
<li>(c) <code>{ &lt;x, y&gt; | âˆƒt âˆˆ STUDENT(t.sid = x âˆ§ t.name = y) }</code></li>
<li>(d) <code>{ t | t.salary &gt; 100000 }</code></li>
</ul>
<h3 id="challenge-problems">Challenge Problems<a class="header-link" href="#challenge-problems" title="Permanent link">&para;</a></h3>
<p><strong>Exercise 3.11</strong>: A relation R(A, B, C) contains the following tuples:</p>
<div class="highlight"><pre><span></span><code>{(a1, b1, c1), (a1, b2, c1), (a1, b2, c2), (a2, b1, c1), (a2, b1, c2)}
</code></pre></div>

<p>A relation S(B, C) contains: <code>{(b1, c1), (b1, c2)}</code></p>
<p>Compute R Ã· S step by step. Verify your answer by checking that each resulting tuple is associated with ALL tuples in S.</p>
<p><strong>Exercise 3.12</strong>: Write a single relational algebra expression (no assignment) for:</p>
<p>"Find the department with the highest average instructor salary."</p>
<p>Hint: This requires aggregation and a comparison pattern.</p>
<hr />
<p><strong>Previous</strong>: <a href="./02_Relational_Model.md">Relational Model</a> | <strong>Next</strong>: <a href="./04_ER_Modeling.md">ER Modeling</a></p>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/Database_Theory/02_Relational_Model.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">The Relational Model</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/Database_Theory/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/Database_Theory/04_ER_Modeling.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">ER Modeling</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">â†‘</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'en';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}