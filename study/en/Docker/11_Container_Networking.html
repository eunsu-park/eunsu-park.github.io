{% raw %}
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Container Networking - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/en/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/en/" class="nav-item ">
                    <span class="nav-icon">ğŸ </span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">ğŸ’»</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/en/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" selected>
                        English
                    </option>
                    
                    <option value="ko" >
                        í•œêµ­ì–´
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">â˜€ï¸</span>
                    <span class="theme-icon dark">ğŸŒ™</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/en/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/en/Docker/">Docker</a>
    <span class="separator">/</span>
    <span class="current">Container Networking</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>Container Networking</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/Docker/10_CI_CD_Pipelines.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">10. CI/CD Pipelines</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/Docker/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/Docker/12_Security_Best_Practices.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Security Best Practices</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#learning-objectives">Learning Objectives</a></li>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#1-docker-network-drivers">1. Docker Network Drivers</a><ul>
<li><a href="#network-driver-overview">Network Driver Overview</a></li>
<li><a href="#listing-networks">Listing Networks</a></li>
<li><a href="#inspecting-networks">Inspecting Networks</a></li>
<li><a href="#network-driver-use-cases">Network Driver Use Cases</a></li>
</ul>
</li>
<li><a href="#2-bridge-network-deep-dive">2. Bridge Network Deep Dive</a><ul>
<li><a href="#default-bridge-vs-user-defined-bridge">Default Bridge vs User-Defined Bridge</a></li>
<li><a href="#creating-a-user-defined-bridge-network">Creating a User-Defined Bridge Network</a></li>
<li><a href="#connecting-containers-to-bridge-networks">Connecting Containers to Bridge Networks</a></li>
<li><a href="#connectingdisconnecting-networks-at-runtime">Connecting/Disconnecting Networks at Runtime</a></li>
<li><a href="#docker-compose-bridge-network">Docker Compose Bridge Network</a></li>
</ul>
</li>
<li><a href="#3-host-and-none-networks">3. Host and None Networks</a><ul>
<li><a href="#host-network">Host Network</a></li>
<li><a href="#performance-comparison">Performance Comparison</a></li>
<li><a href="#none-network">None Network</a></li>
</ul>
</li>
<li><a href="#4-overlay-networks">4. Overlay Networks</a><ul>
<li><a href="#overlay-network-architecture">Overlay Network Architecture</a></li>
<li><a href="#creating-overlay-networks">Creating Overlay Networks</a></li>
<li><a href="#deploying-services-on-overlay-network">Deploying Services on Overlay Network</a></li>
<li><a href="#docker-compose-with-overlay-swarm-stack">Docker Compose with Overlay (Swarm Stack)</a></li>
<li><a href="#overlay-network-encryption">Overlay Network Encryption</a></li>
</ul>
</li>
<li><a href="#5-network-configuration">5. Network Configuration</a><ul>
<li><a href="#custom-subnet-and-gateway">Custom Subnet and Gateway</a></li>
<li><a href="#mtu-configuration">MTU Configuration</a></li>
<li><a href="#ipv6-support">IPv6 Support</a></li>
<li><a href="#network-driver-options">Network Driver Options</a></li>
</ul>
</li>
<li><a href="#6-dns-and-service-discovery">6. DNS and Service Discovery</a><ul>
<li><a href="#embedded-dns-server">Embedded DNS Server</a></li>
<li><a href="#dns-resolution-examples">DNS Resolution Examples</a></li>
<li><a href="#custom-dns-configuration">Custom DNS Configuration</a></li>
<li><a href="#service-discovery-in-docker-compose">Service Discovery in Docker Compose</a></li>
<li><a href="#dns-round-robin-multiple-containers">DNS Round-Robin (Multiple Containers)</a></li>
</ul>
</li>
<li><a href="#7-port-mapping-advanced">7. Port Mapping Advanced</a><ul>
<li><a href="#port-publishing-modes">Port Publishing Modes</a></li>
<li><a href="#port-mapping-diagram">Port Mapping Diagram</a></li>
<li><a href="#docker-compose-port-mapping">Docker Compose Port Mapping</a></li>
<li><a href="#inspecting-port-mappings">Inspecting Port Mappings</a></li>
</ul>
</li>
<li><a href="#8-network-security">8. Network Security</a><ul>
<li><a href="#network-isolation">Network Isolation</a></li>
<li><a href="#internal-networks">Internal Networks</a></li>
<li><a href="#inter-container-communication-icc">Inter-Container Communication (ICC)</a></li>
<li><a href="#network-policy-with-iptables">Network Policy with iptables</a></li>
<li><a href="#encrypted-overlay-networks">Encrypted Overlay Networks</a></li>
</ul>
</li>
<li><a href="#9-troubleshooting">9. Troubleshooting</a><ul>
<li><a href="#network-inspection-commands">Network Inspection Commands</a></li>
<li><a href="#testing-connectivity">Testing Connectivity</a></li>
<li><a href="#packet-capture">Packet Capture</a></li>
<li><a href="#common-network-issues">Common Network Issues</a><ul>
<li><a href="#issue-1-container-cannot-reach-internet">Issue 1: Container Cannot Reach Internet</a></li>
<li><a href="#issue-2-containers-cannot-communicate-by-name">Issue 2: Containers Cannot Communicate by Name</a></li>
<li><a href="#issue-3-port-already-in-use">Issue 3: Port Already in Use</a></li>
<li><a href="#issue-4-dns-resolution-slow">Issue 4: DNS Resolution Slow</a></li>
</ul>
</li>
<li><a href="#network-debugging-tools">Network Debugging Tools</a></li>
<li><a href="#viewing-network-logs">Viewing Network Logs</a></li>
</ul>
</li>
<li><a href="#10-practice-exercises">10. Practice Exercises</a><ul>
<li><a href="#exercise-1-multi-tier-application-network">Exercise 1: Multi-Tier Application Network</a></li>
<li><a href="#exercise-2-custom-bridge-network-with-static-ips">Exercise 2: Custom Bridge Network with Static IPs</a></li>
<li><a href="#exercise-3-dns-round-robin-load-balancing">Exercise 3: DNS Round-Robin Load Balancing</a></li>
<li><a href="#exercise-4-network-troubleshooting">Exercise 4: Network Troubleshooting</a></li>
<li><a href="#exercise-5-secure-multi-host-network">Exercise 5: Secure Multi-Host Network</a></li>
<li><a href="#exercise-6-network-performance-testing">Exercise 6: Network Performance Testing</a></li>
</ul>
</li>
<li><a href="#summary">Summary</a></li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="container-networking">Container Networking<a class="header-link" href="#container-networking" title="Permanent link">&para;</a></h1>
<h2 id="learning-objectives">Learning Objectives<a class="header-link" href="#learning-objectives" title="Permanent link">&para;</a></h2>
<ul>
<li>Understand Docker network drivers and their use cases</li>
<li>Master bridge, host, overlay, and macvlan networks</li>
<li>Configure custom networks with subnets, gateways, and DNS</li>
<li>Implement service discovery and inter-container communication</li>
<li>Troubleshoot network connectivity issues</li>
<li>Apply network security best practices</li>
</ul>
<h2 id="table-of-contents">Table of Contents<a class="header-link" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#1-docker-network-drivers">Docker Network Drivers</a></li>
<li><a href="#2-bridge-network-deep-dive">Bridge Network Deep Dive</a></li>
<li><a href="#3-host-and-none-networks">Host and None Networks</a></li>
<li><a href="#4-overlay-networks">Overlay Networks</a></li>
<li><a href="#5-network-configuration">Network Configuration</a></li>
<li><a href="#6-dns-and-service-discovery">DNS and Service Discovery</a></li>
<li><a href="#7-port-mapping-advanced">Port Mapping Advanced</a></li>
<li><a href="#8-network-security">Network Security</a></li>
<li><a href="#9-troubleshooting">Troubleshooting</a></li>
<li><a href="#10-practice-exercises">Practice Exercises</a></li>
</ol>
<p><strong>Difficulty</strong>: â­â­â­</p>
<hr />
<h2 id="1-docker-network-drivers">1. Docker Network Drivers<a class="header-link" href="#1-docker-network-drivers" title="Permanent link">&para;</a></h2>
<p>Docker provides multiple network drivers for different use cases.</p>
<h3 id="network-driver-overview">Network Driver Overview<a class="header-link" href="#network-driver-overview" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Docker Network Drivers                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  bridge  â”‚  â”‚   host   â”‚  â”‚ overlay  â”‚  â”‚ macvlan  â”‚   â”‚
â”‚  â”‚          â”‚  â”‚          â”‚  â”‚          â”‚  â”‚          â”‚   â”‚
â”‚  â”‚ Default  â”‚  â”‚  Native  â”‚  â”‚  Swarm   â”‚  â”‚  Legacy  â”‚   â”‚
â”‚  â”‚ Isolated â”‚  â”‚  Network â”‚  â”‚Multi-hostâ”‚  â”‚  Bridge  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚              â”‚   none   â”‚                                    â”‚
â”‚              â”‚          â”‚                                    â”‚
â”‚              â”‚ Disabled â”‚                                    â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="listing-networks">Listing Networks<a class="header-link" href="#listing-networks" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># List all networks</span>
docker<span class="w"> </span>network<span class="w"> </span>ls

<span class="c1"># Output:</span>
<span class="c1"># NETWORK ID     NAME      DRIVER    SCOPE</span>
<span class="c1"># 3c7f2a8b4d91   bridge    bridge    local</span>
<span class="c1"># 9f8e3d2c1a45   host      host      local</span>
<span class="c1"># 1b5a6c9d3e72   none      null      local</span>
</code></pre></div>

<h3 id="inspecting-networks">Inspecting Networks<a class="header-link" href="#inspecting-networks" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Detailed network information</span>
docker<span class="w"> </span>network<span class="w"> </span>inspect<span class="w"> </span>bridge

<span class="c1"># Output (truncated):</span>
<span class="c1"># [</span>
<span class="c1">#     {</span>
<span class="c1">#         &quot;Name&quot;: &quot;bridge&quot;,</span>
<span class="c1">#         &quot;Driver&quot;: &quot;bridge&quot;,</span>
<span class="c1">#         &quot;IPAM&quot;: {</span>
<span class="c1">#             &quot;Config&quot;: [</span>
<span class="c1">#                 {</span>
<span class="c1">#                     &quot;Subnet&quot;: &quot;172.17.0.0/16&quot;,</span>
<span class="c1">#                     &quot;Gateway&quot;: &quot;172.17.0.1&quot;</span>
<span class="c1">#                 }</span>
<span class="c1">#             ]</span>
<span class="c1">#         },</span>
<span class="c1">#         &quot;Containers&quot;: {...}</span>
<span class="c1">#     }</span>
<span class="c1"># ]</span>
</code></pre></div>

<h3 id="network-driver-use-cases">Network Driver Use Cases<a class="header-link" href="#network-driver-use-cases" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Driver</th>
<th>Use Case</th>
<th>Scope</th>
<th>DNS</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>bridge</strong></td>
<td>Single-host, isolated containers</td>
<td>Local</td>
<td>Yes (user-defined)</td>
</tr>
<tr>
<td><strong>host</strong></td>
<td>High performance, no isolation</td>
<td>Local</td>
<td>Host DNS</td>
</tr>
<tr>
<td><strong>overlay</strong></td>
<td>Multi-host, Swarm services</td>
<td>Swarm</td>
<td>Yes</td>
</tr>
<tr>
<td><strong>macvlan</strong></td>
<td>Legacy apps needing MAC addresses</td>
<td>Local</td>
<td>No</td>
</tr>
<tr>
<td><strong>none</strong></td>
<td>Complete isolation, custom networking</td>
<td>Local</td>
<td>No</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="2-bridge-network-deep-dive">2. Bridge Network Deep Dive<a class="header-link" href="#2-bridge-network-deep-dive" title="Permanent link">&para;</a></h2>
<p>Bridge networks are the most common network type for containers.</p>
<h3 id="default-bridge-vs-user-defined-bridge">Default Bridge vs User-Defined Bridge<a class="header-link" href="#default-bridge-vs-user-defined-bridge" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>Default Bridge Network              User-Defined Bridge Network
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   172.17.0.0/16      â”‚            â”‚   172.20.0.0/16      â”‚
â”‚                      â”‚            â”‚                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Container1 â”‚      â”‚            â”‚  â”‚ Container1 â”‚      â”‚
â”‚  â”‚ 172.17.0.2 â”‚      â”‚            â”‚  â”‚ 172.20.0.2 â”‚      â”‚
â”‚  â”‚            â”‚      â”‚            â”‚  â”‚ web        â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                      â”‚            â”‚         â”‚            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚            â”‚         â”‚ DNS        â”‚
â”‚  â”‚ Container2 â”‚      â”‚            â”‚         â–¼            â”‚
â”‚  â”‚ 172.17.0.3 â”‚      â”‚            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚            â”‚      â”‚            â”‚  â”‚ Container2 â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚            â”‚  â”‚ 172.20.0.3 â”‚      â”‚
â”‚                      â”‚            â”‚  â”‚ db         â”‚      â”‚
â”‚  No automatic DNS    â”‚            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  Link by IP only     â”‚            â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚  Automatic DNS       â”‚
                                    â”‚  Link by name        â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="creating-a-user-defined-bridge-network">Creating a User-Defined Bridge Network<a class="header-link" href="#creating-a-user-defined-bridge-network" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create custom bridge network</span>
docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span>my-app-network

<span class="c1"># Create with custom subnet</span>
docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--driver<span class="w"> </span>bridge<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--subnet<span class="w"> </span><span class="m">172</span>.25.0.0/16<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--gateway<span class="w"> </span><span class="m">172</span>.25.0.1<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>my-custom-network

<span class="c1"># Create with IP range reservation</span>
docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--subnet<span class="w"> </span><span class="m">172</span>.26.0.0/16<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--ip-range<span class="w"> </span><span class="m">172</span>.26.5.0/24<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>my-reserved-network
</code></pre></div>

<h3 id="connecting-containers-to-bridge-networks">Connecting Containers to Bridge Networks<a class="header-link" href="#connecting-containers-to-bridge-networks" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Run container on custom network</span>
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>web<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--network<span class="w"> </span>my-app-network<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>nginx

<span class="c1"># Run another container on same network</span>
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>db<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--network<span class="w"> </span>my-app-network<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>postgres

<span class="c1"># Test DNS resolution</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>web<span class="w"> </span>ping<span class="w"> </span>db
<span class="c1"># PING db (172.25.0.3): 56 data bytes</span>
<span class="c1"># 64 bytes from 172.25.0.3: seq=0 ttl=64 time=0.123 ms</span>
</code></pre></div>

<h3 id="connectingdisconnecting-networks-at-runtime">Connecting/Disconnecting Networks at Runtime<a class="header-link" href="#connectingdisconnecting-networks-at-runtime" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Connect running container to additional network</span>
docker<span class="w"> </span>network<span class="w"> </span>connect<span class="w"> </span>my-app-network<span class="w"> </span>my-container

<span class="c1"># Disconnect from network</span>
docker<span class="w"> </span>network<span class="w"> </span>disconnect<span class="w"> </span>my-app-network<span class="w"> </span>my-container

<span class="c1"># Connect with static IP</span>
docker<span class="w"> </span>network<span class="w"> </span>connect<span class="w"> </span>--ip<span class="w"> </span><span class="m">172</span>.25.0.100<span class="w"> </span>my-app-network<span class="w"> </span>my-container
</code></pre></div>

<h3 id="docker-compose-bridge-network">Docker Compose Bridge Network<a class="header-link" href="#docker-compose-bridge-network" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># docker-compose.yml</span>
<span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.8&#39;</span>

<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">web</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">frontend</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend</span>

<span class="w">  </span><span class="nt">app</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">myapp:latest</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="nt">backend</span><span class="p">:</span>
<span class="w">        </span><span class="nt">ipv4_address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">172.28.0.100</span>

<span class="w">  </span><span class="nt">db</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend</span>

<span class="nt">networks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">frontend</span><span class="p">:</span>
<span class="w">    </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bridge</span>
<span class="w">  </span><span class="nt">backend</span><span class="p">:</span>
<span class="w">    </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bridge</span>
<span class="w">    </span><span class="nt">ipam</span><span class="p">:</span>
<span class="w">      </span><span class="nt">config</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">subnet</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">172.28.0.0/16</span>
<span class="w">          </span><span class="nt">gateway</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">172.28.0.1</span>
</code></pre></div>

<hr />
<h2 id="3-host-and-none-networks">3. Host and None Networks<a class="header-link" href="#3-host-and-none-networks" title="Permanent link">&para;</a></h2>
<h3 id="host-network">Host Network<a class="header-link" href="#host-network" title="Permanent link">&para;</a></h3>
<p>Containers share the host's network stack directly.</p>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Host Network                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         Host OS Network           â”‚  â”‚
â”‚  â”‚                                   â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚  â”‚Container1â”‚    â”‚Container2â”‚    â”‚  â”‚
â”‚  â”‚  â”‚  :80     â”‚    â”‚  :443    â”‚    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚                                   â”‚  â”‚
â”‚  â”‚  No network isolation             â”‚  â”‚
â”‚  â”‚  Direct host network access       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<p><strong>Use Cases</strong>:
- High network performance (no NAT overhead)
- Network monitoring tools
- Services needing host network features</p>
<p><strong>Limitations</strong>:
- No network isolation
- Port conflicts with host
- Can't run multiple containers on same port</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Run container with host network</span>
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>nginx-host<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--network<span class="w"> </span>host<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>nginx

<span class="c1"># Container listens on host&#39;s port 80 directly</span>
<span class="c1"># No -p flag needed (ignored if specified)</span>

<span class="c1"># Check listening ports</span>
netstat<span class="w"> </span>-tlnp<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="m">80</span>
<span class="c1"># tcp  0  0  0.0.0.0:80  0.0.0.0:*  LISTEN  12345/nginx</span>
</code></pre></div>

<h3 id="performance-comparison">Performance Comparison<a class="header-link" href="#performance-comparison" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Bridge network (with NAT)</span>
docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>--network<span class="w"> </span>bridge<span class="w"> </span>alpine<span class="w"> </span>ping<span class="w"> </span>-c<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">8</span>.8.8.8
<span class="c1"># avg RTT: ~0.5ms overhead</span>

<span class="c1"># Host network (no NAT)</span>
docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>--network<span class="w"> </span>host<span class="w"> </span>alpine<span class="w"> </span>ping<span class="w"> </span>-c<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">8</span>.8.8.8
<span class="c1"># avg RTT: native host performance</span>
</code></pre></div>

<h3 id="none-network">None Network<a class="header-link" href="#none-network" title="Permanent link">&para;</a></h3>
<p>Complete network isolation.</p>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           None Network                   â”‚
â”‚                                          â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚        â”‚  Container   â”‚                  â”‚
â”‚        â”‚              â”‚                  â”‚
â”‚        â”‚  No network  â”‚                  â”‚
â”‚        â”‚  interface   â”‚                  â”‚
â”‚        â”‚              â”‚                  â”‚
â”‚        â”‚  Only: lo    â”‚                  â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<p><strong>Use Cases</strong>:
- Complete network isolation
- Custom network stack implementation
- Testing scenarios</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Run container with no network</span>
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>isolated<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--network<span class="w"> </span>none<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>alpine<span class="w"> </span>sleep<span class="w"> </span><span class="m">3600</span>

<span class="c1"># Verify no network interfaces (except loopback)</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>isolated<span class="w"> </span>ip<span class="w"> </span>addr
<span class="c1"># 1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt;</span>
<span class="c1">#     inet 127.0.0.1/8 scope host lo</span>
</code></pre></div>

<hr />
<h2 id="4-overlay-networks">4. Overlay Networks<a class="header-link" href="#4-overlay-networks" title="Permanent link">&para;</a></h2>
<p>Overlay networks enable multi-host container communication in Docker Swarm.</p>
<h3 id="overlay-network-architecture">Overlay Network Architecture<a class="header-link" href="#overlay-network-architecture" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Overlay Network                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚    Host 1           â”‚      â”‚    Host 2           â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚      â”‚
â”‚  â”‚  â”‚ Container A  â”‚   â”‚â—„â”€â”€â”€â”€â–ºâ”‚  â”‚ Container B  â”‚   â”‚      â”‚
â”‚  â”‚  â”‚ 10.0.0.2     â”‚   â”‚VXLAN â”‚  â”‚ 10.0.0.3     â”‚   â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚Tunnelâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚      â”‚
â”‚  â”‚                     â”‚      â”‚                     â”‚      â”‚
â”‚  â”‚  Physical: 192.168.1.10    â”‚  Physical: 192.168.1.20  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                              â”‚
â”‚  Overlay subnet: 10.0.0.0/24                                â”‚
â”‚  Underlay network: 192.168.1.0/24                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="creating-overlay-networks">Creating Overlay Networks<a class="header-link" href="#creating-overlay-networks" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Initialize Swarm (required for overlay networks)</span>
docker<span class="w"> </span>swarm<span class="w"> </span>init<span class="w"> </span>--advertise-addr<span class="w"> </span><span class="m">192</span>.168.1.10

<span class="c1"># Create overlay network</span>
docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--driver<span class="w"> </span>overlay<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--subnet<span class="w"> </span><span class="m">10</span>.0.9.0/24<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>my-overlay

<span class="c1"># Create with encryption</span>
docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--driver<span class="w"> </span>overlay<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--opt<span class="w"> </span>encrypted<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--subnet<span class="w"> </span><span class="m">10</span>.0.10.0/24<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>secure-overlay

<span class="c1"># Create attachable overlay (for standalone containers)</span>
docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--driver<span class="w"> </span>overlay<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--attachable<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--subnet<span class="w"> </span><span class="m">10</span>.0.11.0/24<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>attachable-overlay
</code></pre></div>

<h3 id="deploying-services-on-overlay-network">Deploying Services on Overlay Network<a class="header-link" href="#deploying-services-on-overlay-network" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create service on overlay network</span>
docker<span class="w"> </span>service<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>web<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--network<span class="w"> </span>my-overlay<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--replicas<span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>nginx

<span class="c1"># Create backend service</span>
docker<span class="w"> </span>service<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>api<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--network<span class="w"> </span>my-overlay<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--replicas<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>myapi:latest

<span class="c1"># Services can communicate by name across hosts</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>&lt;web-container&gt;<span class="w"> </span>curl<span class="w"> </span>http://api:8080
</code></pre></div>

<h3 id="docker-compose-with-overlay-swarm-stack">Docker Compose with Overlay (Swarm Stack)<a class="header-link" href="#docker-compose-with-overlay-swarm-stack" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># docker-compose.yml</span>
<span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.8&#39;</span>

<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">web</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
<span class="w">    </span><span class="nt">deploy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">frontend</span>

<span class="w">  </span><span class="nt">api</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">myapi:latest</span>
<span class="w">    </span><span class="nt">deploy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">frontend</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend</span>

<span class="w">  </span><span class="nt">db</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span>
<span class="w">    </span><span class="nt">deploy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">      </span><span class="nt">placement</span><span class="p">:</span>
<span class="w">        </span><span class="nt">constraints</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node.role == manager</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">db-data:/var/lib/postgresql/data</span>

<span class="nt">networks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">frontend</span><span class="p">:</span>
<span class="w">    </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">overlay</span>
<span class="w">  </span><span class="nt">backend</span><span class="p">:</span>
<span class="w">    </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">overlay</span>
<span class="w">    </span><span class="nt">driver_opts</span><span class="p">:</span>
<span class="w">      </span><span class="nt">encrypted</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>

<span class="nt">volumes</span><span class="p">:</span>
<span class="w">  </span><span class="nt">db-data</span><span class="p">:</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1"># Deploy stack</span>
docker<span class="w"> </span>stack<span class="w"> </span>deploy<span class="w"> </span>-c<span class="w"> </span>docker-compose.yml<span class="w"> </span>myapp

<span class="c1"># List networks</span>
docker<span class="w"> </span>network<span class="w"> </span>ls
<span class="c1"># NETWORK ID     NAME              DRIVER    SCOPE</span>
<span class="c1"># abc123def456   myapp_frontend    overlay   swarm</span>
<span class="c1"># def789ghi012   myapp_backend     overlay   swarm</span>
</code></pre></div>

<h3 id="overlay-network-encryption">Overlay Network Encryption<a class="header-link" href="#overlay-network-encryption" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create encrypted overlay</span>
docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--driver<span class="w"> </span>overlay<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--opt<span class="w"> </span><span class="nv">encrypted</span><span class="o">=</span><span class="nb">true</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--subnet<span class="w"> </span><span class="m">10</span>.0.20.0/24<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>encrypted-net

<span class="c1"># IPsec encrypts VXLAN traffic between nodes</span>
<span class="c1"># Performance impact: ~10-20% overhead</span>
</code></pre></div>

<hr />
<h2 id="5-network-configuration">5. Network Configuration<a class="header-link" href="#5-network-configuration" title="Permanent link">&para;</a></h2>
<h3 id="custom-subnet-and-gateway">Custom Subnet and Gateway<a class="header-link" href="#custom-subnet-and-gateway" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create network with custom IPAM</span>
docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--driver<span class="w"> </span>bridge<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--subnet<span class="w"> </span><span class="m">172</span>.30.0.0/16<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--gateway<span class="w"> </span><span class="m">172</span>.30.0.1<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--ip-range<span class="w"> </span><span class="m">172</span>.30.5.0/24<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--aux-address<span class="w"> </span><span class="s2">&quot;my-router=172.30.1.1&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>custom-net
</code></pre></div>

<h3 id="mtu-configuration">MTU Configuration<a class="header-link" href="#mtu-configuration" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Set MTU (Maximum Transmission Unit)</span>
docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--driver<span class="w"> </span>bridge<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--opt<span class="w"> </span>com.docker.network.driver.mtu<span class="o">=</span><span class="m">1450</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>low-mtu-net

<span class="c1"># Useful for:</span>
<span class="c1"># - VPN/overlay networks (avoid fragmentation)</span>
<span class="c1"># - Cloud environments (GCP: 1460, AWS: 9001 for jumbo frames)</span>
</code></pre></div>

<h3 id="ipv6-support">IPv6 Support<a class="header-link" href="#ipv6-support" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Enable IPv6 in daemon.json</span>
<span class="c1"># /etc/docker/daemon.json</span>
<span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;ipv6&quot;</span>:<span class="w"> </span>true,
<span class="w">  </span><span class="s2">&quot;fixed-cidr-v6&quot;</span>:<span class="w"> </span><span class="s2">&quot;2001:db8:1::/64&quot;</span>
<span class="o">}</span>

<span class="c1"># Restart Docker</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>docker

<span class="c1"># Create network with IPv6</span>
docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--ipv6<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--subnet<span class="w"> </span><span class="m">172</span>.31.0.0/16<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--subnet<span class="w"> </span><span class="m">2001</span>:db8:2::/64<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>ipv6-net
</code></pre></div>

<h3 id="network-driver-options">Network Driver Options<a class="header-link" href="#network-driver-options" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Bridge options</span>
docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--driver<span class="w"> </span>bridge<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--opt<span class="w"> </span>com.docker.network.bridge.name<span class="o">=</span>my-bridge<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--opt<span class="w"> </span>com.docker.network.bridge.enable_icc<span class="o">=</span><span class="nb">true</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--opt<span class="w"> </span>com.docker.network.bridge.enable_ip_masquerade<span class="o">=</span><span class="nb">true</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>my-configured-net
</code></pre></div>

<p><strong>Common Options</strong>:
- <code>com.docker.network.bridge.name</code>: Custom bridge interface name
- <code>com.docker.network.bridge.enable_icc</code>: Inter-container communication (default: true)
- <code>com.docker.network.bridge.enable_ip_masquerade</code>: NAT for external traffic (default: true)
- <code>com.docker.network.driver.mtu</code>: MTU size (default: 1500)</p>
<hr />
<h2 id="6-dns-and-service-discovery">6. DNS and Service Discovery<a class="header-link" href="#6-dns-and-service-discovery" title="Permanent link">&para;</a></h2>
<h3 id="embedded-dns-server">Embedded DNS Server<a class="header-link" href="#embedded-dns-server" title="Permanent link">&para;</a></h3>
<p>Docker provides automatic DNS resolution for container names.</p>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         User-Defined Network            â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   web    â”‚         â”‚   db     â”‚     â”‚
â”‚  â”‚          â”‚         â”‚          â”‚     â”‚
â”‚  â”‚          â”‚â”€â”€DNSâ”€â”€â”€â–ºâ”‚          â”‚     â”‚
â”‚  â”‚          â”‚  query  â”‚          â”‚     â”‚
â”‚  â”‚          â”‚  &quot;db&quot;   â”‚          â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚       â”‚                                 â”‚
â”‚       â”‚ DNS query                       â”‚
â”‚       â–¼                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  Embedded DNS Server    â”‚           â”‚
â”‚  â”‚  (127.0.0.11:53)        â”‚           â”‚
â”‚  â”‚                         â”‚           â”‚
â”‚  â”‚  web â†’ 172.20.0.2       â”‚           â”‚
â”‚  â”‚  db  â†’ 172.20.0.3       â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="dns-resolution-examples">DNS Resolution Examples<a class="header-link" href="#dns-resolution-examples" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create network and containers</span>
docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span>my-net
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>web<span class="w"> </span>--network<span class="w"> </span>my-net<span class="w"> </span>nginx
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>db<span class="w"> </span>--network<span class="w"> </span>my-net<span class="w"> </span>postgres

<span class="c1"># Test DNS resolution</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>web<span class="w"> </span>nslookup<span class="w"> </span>db
<span class="c1"># Server:    127.0.0.11</span>
<span class="c1"># Address:   127.0.0.11:53</span>
<span class="c1">#</span>
<span class="c1"># Name:      db</span>
<span class="c1"># Address:   172.20.0.3</span>

<span class="c1"># Ping by container name</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>web<span class="w"> </span>ping<span class="w"> </span>-c<span class="w"> </span><span class="m">2</span><span class="w"> </span>db
<span class="c1"># PING db (172.20.0.3): 56 data bytes</span>
<span class="c1"># 64 bytes from 172.20.0.3: seq=0 ttl=64 time=0.123 ms</span>
</code></pre></div>

<h3 id="custom-dns-configuration">Custom DNS Configuration<a class="header-link" href="#custom-dns-configuration" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Run container with custom DNS servers</span>
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>custom-dns<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--dns<span class="w"> </span><span class="m">8</span>.8.8.8<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--dns<span class="w"> </span><span class="m">8</span>.8.4.4<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--dns-search<span class="w"> </span>example.com<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>nginx

<span class="c1"># Verify DNS configuration</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>custom-dns<span class="w"> </span>cat<span class="w"> </span>/etc/resolv.conf
<span class="c1"># nameserver 8.8.8.8</span>
<span class="c1"># nameserver 8.8.4.4</span>
<span class="c1"># search example.com</span>
</code></pre></div>

<h3 id="service-discovery-in-docker-compose">Service Discovery in Docker Compose<a class="header-link" href="#service-discovery-in-docker-compose" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># docker-compose.yml</span>
<span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.8&#39;</span>

<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">web</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app-net</span>

<span class="w">  </span><span class="nt">api</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">myapi:latest</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># Resolve by service name</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DATABASE_URL=postgresql://db:5432/mydb</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app-net</span>

<span class="w">  </span><span class="nt">db</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app-net</span>

<span class="nt">networks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">app-net</span><span class="p">:</span>
<span class="w">    </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bridge</span>
</code></pre></div>

<h3 id="dns-round-robin-multiple-containers">DNS Round-Robin (Multiple Containers)<a class="header-link" href="#dns-round-robin-multiple-containers" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create multiple containers with same name (using --network-alias)</span>
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>api1<span class="w"> </span>--network<span class="w"> </span>my-net<span class="w"> </span>--network-alias<span class="w"> </span>api<span class="w"> </span>myapi:latest
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>api2<span class="w"> </span>--network<span class="w"> </span>my-net<span class="w"> </span>--network-alias<span class="w"> </span>api<span class="w"> </span>myapi:latest
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>api3<span class="w"> </span>--network<span class="w"> </span>my-net<span class="w"> </span>--network-alias<span class="w"> </span>api<span class="w"> </span>myapi:latest

<span class="c1"># DNS query returns all IPs (round-robin)</span>
docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>--network<span class="w"> </span>my-net<span class="w"> </span>alpine<span class="w"> </span>nslookup<span class="w"> </span>api
<span class="c1"># Name:      api</span>
<span class="c1"># Address:   172.20.0.2</span>
<span class="c1"># Address:   172.20.0.3</span>
<span class="c1"># Address:   172.20.0.4</span>
</code></pre></div>

<hr />
<h2 id="7-port-mapping-advanced">7. Port Mapping Advanced<a class="header-link" href="#7-port-mapping-advanced" title="Permanent link">&para;</a></h2>
<h3 id="port-publishing-modes">Port Publishing Modes<a class="header-link" href="#port-publishing-modes" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Publish to random host port</span>
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>-P<span class="w"> </span>nginx
<span class="c1"># Maps all EXPOSE ports to random high ports (32768+)</span>

<span class="c1"># Publish to specific host port</span>
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>-p<span class="w"> </span><span class="m">8080</span>:80<span class="w"> </span>nginx

<span class="c1"># Publish to specific interface</span>
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>-p<span class="w"> </span><span class="m">127</span>.0.0.1:8080:80<span class="w"> </span>nginx
<span class="c1"># Only accessible from localhost</span>

<span class="c1"># Publish UDP port</span>
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>-p<span class="w"> </span><span class="m">53</span>:53/udp<span class="w"> </span>dns-server

<span class="c1"># Publish port range</span>
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>-p<span class="w"> </span><span class="m">5000</span>-5010:5000-5010<span class="w"> </span>multi-port-app
</code></pre></div>

<h3 id="port-mapping-diagram">Port Mapping Diagram<a class="header-link" href="#port-mapping-diagram" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Host (192.168.1.100)                   â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              iptables NAT                        â”‚    â”‚
â”‚  â”‚                                                  â”‚    â”‚
â”‚  â”‚  8080 â”€â”€â–º DNAT â”€â”€â–º 172.17.0.2:80               â”‚    â”‚
â”‚  â”‚  8443 â”€â”€â–º DNAT â”€â”€â–º 172.17.0.2:443              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â”‚                               â”‚
â”‚                          â–¼                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚         Docker Bridge (docker0)                 â”‚    â”‚
â”‚  â”‚                                                  â”‚    â”‚
â”‚  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚    â”‚
â”‚  â”‚         â”‚   nginx          â”‚                    â”‚    â”‚
â”‚  â”‚         â”‚   172.17.0.2     â”‚                    â”‚    â”‚
â”‚  â”‚         â”‚   :80, :443      â”‚                    â”‚    â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

External request: http://192.168.1.100:8080
    â†“
NAT translation: 172.17.0.2:80
    â†“
Container receives request on port 80
</code></pre></div>

<h3 id="docker-compose-port-mapping">Docker Compose Port Mapping<a class="header-link" href="#docker-compose-port-mapping" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># docker-compose.yml</span>
<span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.8&#39;</span>

<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">web</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># Short syntax</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;8080:80&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;8443:443&quot;</span>

<span class="w">      </span><span class="c1"># Long syntax</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="w">        </span><span class="nt">published</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<span class="w">        </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp</span>
<span class="w">        </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">host</span>

<span class="w">      </span><span class="c1"># Localhost only</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;127.0.0.1:9090:9090&quot;</span>

<span class="w">      </span><span class="c1"># Port range</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;5000-5010:5000-5010&quot;</span>
</code></pre></div>

<h3 id="inspecting-port-mappings">Inspecting Port Mappings<a class="header-link" href="#inspecting-port-mappings" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># List port mappings</span>
docker<span class="w"> </span>port<span class="w"> </span>nginx
<span class="c1"># 80/tcp -&gt; 0.0.0.0:8080</span>
<span class="c1"># 443/tcp -&gt; 0.0.0.0:8443</span>

<span class="c1"># Inspect with docker ps</span>
docker<span class="w"> </span>ps<span class="w"> </span>--format<span class="w"> </span><span class="s2">&quot;table {{.Names}}\t{{.Ports}}&quot;</span>
<span class="c1"># NAMES    PORTS</span>
<span class="c1"># nginx    0.0.0.0:8080-&gt;80/tcp, 0.0.0.0:8443-&gt;443/tcp</span>
</code></pre></div>

<hr />
<h2 id="8-network-security">8. Network Security<a class="header-link" href="#8-network-security" title="Permanent link">&para;</a></h2>
<h3 id="network-isolation">Network Isolation<a class="header-link" href="#network-isolation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Network Isolation                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  frontend-net    â”‚        â”‚  backend-net     â”‚      â”‚
â”‚  â”‚                  â”‚        â”‚                  â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚      â”‚
â”‚  â”‚  â”‚  web   â”‚      â”‚        â”‚  â”‚  api   â”‚     â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚      â”‚
â”‚  â”‚                  â”‚        â”‚        â”‚         â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚        â”‚         â”‚      â”‚
â”‚                               â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚      â”‚
â”‚                               â”‚  â”‚  db    â”‚     â”‚      â”‚
â”‚                               â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚      â”‚
â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                          â”‚
â”‚  web CANNOT communicate with db directly                â”‚
â”‚  api bridges both networks                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1"># docker-compose.yml</span>
<span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.8&#39;</span>

<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">web</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">frontend</span>

<span class="w">  </span><span class="nt">api</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">myapi:latest</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">frontend</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend</span>

<span class="w">  </span><span class="nt">db</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend</span>
<span class="w">    </span><span class="c1"># db is NOT exposed to frontend network</span>

<span class="nt">networks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">frontend</span><span class="p">:</span>
<span class="w">  </span><span class="nt">backend</span><span class="p">:</span>
<span class="w">    </span><span class="nt">internal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">  </span><span class="c1"># No external access</span>
</code></pre></div>

<h3 id="internal-networks">Internal Networks<a class="header-link" href="#internal-networks" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create internal network (no external access)</span>
docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--internal<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--subnet<span class="w"> </span><span class="m">172</span>.40.0.0/16<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>internal-net

<span class="c1"># Containers on this network cannot reach internet</span>
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>isolated-db<span class="w"> </span>--network<span class="w"> </span>internal-net<span class="w"> </span>postgres
</code></pre></div>

<h3 id="inter-container-communication-icc">Inter-Container Communication (ICC)<a class="header-link" href="#inter-container-communication-icc" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Disable ICC (containers can&#39;t talk to each other by default)</span>
docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--driver<span class="w"> </span>bridge<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--opt<span class="w"> </span>com.docker.network.bridge.enable_icc<span class="o">=</span><span class="nb">false</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>restricted-net

<span class="c1"># Containers must use port publishing to communicate</span>
</code></pre></div>

<h3 id="network-policy-with-iptables">Network Policy with iptables<a class="header-link" href="#network-policy-with-iptables" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># View Docker iptables rules</span>
sudo<span class="w"> </span>iptables<span class="w"> </span>-t<span class="w"> </span>nat<span class="w"> </span>-L<span class="w"> </span>-n<span class="w"> </span>-v<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>DOCKER

<span class="c1"># Block traffic between specific containers (manual iptables)</span>
sudo<span class="w"> </span>iptables<span class="w"> </span>-I<span class="w"> </span>DOCKER-USER<span class="w"> </span>-s<span class="w"> </span><span class="m">172</span>.17.0.2<span class="w"> </span>-d<span class="w"> </span><span class="m">172</span>.17.0.3<span class="w"> </span>-j<span class="w"> </span>DROP

<span class="c1"># Allow only specific ports</span>
sudo<span class="w"> </span>iptables<span class="w"> </span>-I<span class="w"> </span>DOCKER-USER<span class="w"> </span>-p<span class="w"> </span>tcp<span class="w"> </span>--dport<span class="w"> </span><span class="m">5432</span><span class="w"> </span>-s<span class="w"> </span><span class="m">172</span>.17.0.2<span class="w"> </span>-j<span class="w"> </span>ACCEPT
sudo<span class="w"> </span>iptables<span class="w"> </span>-I<span class="w"> </span>DOCKER-USER<span class="w"> </span>-s<span class="w"> </span><span class="m">172</span>.17.0.2<span class="w"> </span>-j<span class="w"> </span>DROP
</code></pre></div>

<h3 id="encrypted-overlay-networks">Encrypted Overlay Networks<a class="header-link" href="#encrypted-overlay-networks" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># All traffic between nodes is encrypted with IPsec</span>
docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--driver<span class="w"> </span>overlay<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--opt<span class="w"> </span><span class="nv">encrypted</span><span class="o">=</span><span class="nb">true</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>secure-overlay
</code></pre></div>

<hr />
<h2 id="9-troubleshooting">9. Troubleshooting<a class="header-link" href="#9-troubleshooting" title="Permanent link">&para;</a></h2>
<h3 id="network-inspection-commands">Network Inspection Commands<a class="header-link" href="#network-inspection-commands" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Inspect network details</span>
docker<span class="w"> </span>network<span class="w"> </span>inspect<span class="w"> </span>my-net

<span class="c1"># Show containers on network</span>
docker<span class="w"> </span>network<span class="w"> </span>inspect<span class="w"> </span>my-net<span class="w"> </span>--format<span class="w"> </span><span class="s1">&#39;{{range .Containers}}{{.Name}} {{end}}&#39;</span>

<span class="c1"># Show network configuration of container</span>
docker<span class="w"> </span>inspect<span class="w"> </span>my-container<span class="w"> </span>--format<span class="w"> </span><span class="s1">&#39;{{json .NetworkSettings.Networks}}&#39;</span>
</code></pre></div>

<h3 id="testing-connectivity">Testing Connectivity<a class="header-link" href="#testing-connectivity" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Ping between containers</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>container1<span class="w"> </span>ping<span class="w"> </span>container2

<span class="c1"># Test DNS resolution</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>container1<span class="w"> </span>nslookup<span class="w"> </span>container2

<span class="c1"># Test port connectivity</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>container1<span class="w"> </span>nc<span class="w"> </span>-zv<span class="w"> </span>container2<span class="w"> </span><span class="m">80</span>

<span class="c1"># Test with curl</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>container1<span class="w"> </span>curl<span class="w"> </span>http://container2:8080
</code></pre></div>

<h3 id="packet-capture">Packet Capture<a class="header-link" href="#packet-capture" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Capture traffic on docker0 bridge</span>
sudo<span class="w"> </span>tcpdump<span class="w"> </span>-i<span class="w"> </span>docker0<span class="w"> </span>-n

<span class="c1"># Capture traffic for specific container</span>
<span class="c1"># Find container&#39;s veth interface</span>
docker<span class="w"> </span>inspect<span class="w"> </span>my-container<span class="w"> </span>--format<span class="w"> </span><span class="s1">&#39;{{.NetworkSettings.SandboxKey}}&#39;</span>
<span class="c1"># /var/run/docker/netns/abc123def456</span>

<span class="c1"># Enter network namespace and capture</span>
sudo<span class="w"> </span>nsenter<span class="w"> </span>--net<span class="o">=</span>/var/run/docker/netns/abc123def456<span class="w"> </span>tcpdump<span class="w"> </span>-i<span class="w"> </span>eth0<span class="w"> </span>-n

<span class="c1"># Or use docker exec with tcpdump</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>my-container<span class="w"> </span>tcpdump<span class="w"> </span>-i<span class="w"> </span>eth0<span class="w"> </span>-n
</code></pre></div>

<h3 id="common-network-issues">Common Network Issues<a class="header-link" href="#common-network-issues" title="Permanent link">&para;</a></h3>
<h4 id="issue-1-container-cannot-reach-internet">Issue 1: Container Cannot Reach Internet<a class="header-link" href="#issue-1-container-cannot-reach-internet" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Check DNS configuration</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>my-container<span class="w"> </span>cat<span class="w"> </span>/etc/resolv.conf

<span class="c1"># Test DNS resolution</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>my-container<span class="w"> </span>nslookup<span class="w"> </span>google.com

<span class="c1"># Test connectivity</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>my-container<span class="w"> </span>ping<span class="w"> </span><span class="m">8</span>.8.8.8

<span class="c1"># Solution: Check IP masquerading</span>
sudo<span class="w"> </span>iptables<span class="w"> </span>-t<span class="w"> </span>nat<span class="w"> </span>-L<span class="w"> </span>-n<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>MASQUERADE
<span class="c1"># Should see: MASQUERADE  all  --  172.17.0.0/16  0.0.0.0/0</span>
</code></pre></div>

<h4 id="issue-2-containers-cannot-communicate-by-name">Issue 2: Containers Cannot Communicate by Name<a class="header-link" href="#issue-2-containers-cannot-communicate-by-name" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Only works on user-defined networks, NOT default bridge</span>
<span class="c1"># Solution: Create custom network</span>
docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span>my-net
docker<span class="w"> </span>network<span class="w"> </span>connect<span class="w"> </span>my-net<span class="w"> </span>container1
docker<span class="w"> </span>network<span class="w"> </span>connect<span class="w"> </span>my-net<span class="w"> </span>container2
</code></pre></div>

<h4 id="issue-3-port-already-in-use">Issue 3: Port Already in Use<a class="header-link" href="#issue-3-port-already-in-use" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Find process using port</span>
sudo<span class="w"> </span>lsof<span class="w"> </span>-i<span class="w"> </span>:8080
<span class="c1"># or</span>
sudo<span class="w"> </span>netstat<span class="w"> </span>-tlnp<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="m">8080</span>

<span class="c1"># Solution: Stop conflicting process or use different port</span>
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>-p<span class="w"> </span><span class="m">8081</span>:80<span class="w"> </span>nginx
</code></pre></div>

<h4 id="issue-4-dns-resolution-slow">Issue 4: DNS Resolution Slow<a class="header-link" href="#issue-4-dns-resolution-slow" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Check embedded DNS server</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>my-container<span class="w"> </span>cat<span class="w"> </span>/etc/resolv.conf
<span class="c1"># Should see: nameserver 127.0.0.11</span>

<span class="c1"># Test DNS performance</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>my-container<span class="w"> </span><span class="nb">time</span><span class="w"> </span>nslookup<span class="w"> </span>container2

<span class="c1"># Solution: Add custom DNS servers if needed</span>
docker<span class="w"> </span>run<span class="w"> </span>--dns<span class="w"> </span><span class="m">8</span>.8.8.8<span class="w"> </span>--dns<span class="w"> </span><span class="m">8</span>.8.4.4<span class="w"> </span>my-image
</code></pre></div>

<h3 id="network-debugging-tools">Network Debugging Tools<a class="header-link" href="#network-debugging-tools" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Run debugging container with network tools</span>
docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--rm<span class="w"> </span>--network<span class="w"> </span>my-net<span class="w"> </span>nicolaka/netshoot

<span class="c1"># Available tools in netshoot:</span>
<span class="c1"># - ping, traceroute, mtr</span>
<span class="c1"># - nslookup, dig, host</span>
<span class="c1"># - curl, wget, httpie</span>
<span class="c1"># - netcat, socat</span>
<span class="c1"># - tcpdump, tshark</span>
<span class="c1"># - iftop, nethogs</span>
<span class="c1"># - ip, ss, netstat, iptables</span>
</code></pre></div>

<h3 id="viewing-network-logs">Viewing Network Logs<a class="header-link" href="#viewing-network-logs" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Enable debug logging in Docker daemon</span>
<span class="c1"># /etc/docker/daemon.json</span>
<span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;debug&quot;</span>:<span class="w"> </span>true,
<span class="w">  </span><span class="s2">&quot;log-level&quot;</span>:<span class="w"> </span><span class="s2">&quot;debug&quot;</span>
<span class="o">}</span>

<span class="c1"># Restart Docker</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>docker

<span class="c1"># View logs</span>
sudo<span class="w"> </span>journalctl<span class="w"> </span>-u<span class="w"> </span>docker<span class="w"> </span>-f
</code></pre></div>

<hr />
<h2 id="10-practice-exercises">10. Practice Exercises<a class="header-link" href="#10-practice-exercises" title="Permanent link">&para;</a></h2>
<h3 id="exercise-1-multi-tier-application-network">Exercise 1: Multi-Tier Application Network<a class="header-link" href="#exercise-1-multi-tier-application-network" title="Permanent link">&para;</a></h3>
<p>Create a three-tier application with isolated networks.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># docker-compose.yml</span>
<span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.8&#39;</span>

<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">nginx</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;80:80&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">frontend</span>
<span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app</span>

<span class="w">  </span><span class="nt">app</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node:18</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node server.js</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">frontend</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend</span>
<span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">db</span>

<span class="w">  </span><span class="nt">db</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">POSTGRES_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">secret</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend</span>

<span class="nt">networks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">frontend</span><span class="p">:</span>
<span class="w">  </span><span class="nt">backend</span><span class="p">:</span>
<span class="w">    </span><span class="nt">internal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>

<p><strong>Tasks</strong>:
1. Deploy the stack
2. Verify nginx can reach app
3. Verify app can reach db
4. Confirm nginx CANNOT reach db directly
5. Confirm db has no internet access</p>
<h3 id="exercise-2-custom-bridge-network-with-static-ips">Exercise 2: Custom Bridge Network with Static IPs<a class="header-link" href="#exercise-2-custom-bridge-network-with-static-ips" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create network with specific subnet</span>
docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--driver<span class="w"> </span>bridge<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--subnet<span class="w"> </span><span class="m">172</span>.50.0.0/24<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--gateway<span class="w"> </span><span class="m">172</span>.50.0.1<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--ip-range<span class="w"> </span><span class="m">172</span>.50.0.128/25<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>static-net

<span class="c1"># Run containers with static IPs</span>
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>web<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--network<span class="w"> </span>static-net<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--ip<span class="w"> </span><span class="m">172</span>.50.0.10<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>nginx

docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>api<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--network<span class="w"> </span>static-net<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--ip<span class="w"> </span><span class="m">172</span>.50.0.20<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>myapi:latest

docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>db<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--network<span class="w"> </span>static-net<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--ip<span class="w"> </span><span class="m">172</span>.50.0.30<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>postgres
</code></pre></div>

<p><strong>Tasks</strong>:
1. Verify containers have assigned IPs
2. Test connectivity between containers
3. Document the IP allocation scheme</p>
<h3 id="exercise-3-dns-round-robin-load-balancing">Exercise 3: DNS Round-Robin Load Balancing<a class="header-link" href="#exercise-3-dns-round-robin-load-balancing" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create network</span>
docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span>lb-net

<span class="c1"># Create multiple backend containers with same alias</span>
<span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--name<span class="w"> </span>backend-<span class="nv">$i</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--network<span class="w"> </span>lb-net<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--network-alias<span class="w"> </span>backend<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>hashicorp/http-echo<span class="w"> </span>-text<span class="o">=</span><span class="s2">&quot;Backend </span><span class="nv">$i</span><span class="s2">&quot;</span>
<span class="k">done</span>

<span class="c1"># Create client container</span>
docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--rm<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--network<span class="w"> </span>lb-net<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>alpine<span class="w"> </span>sh

<span class="c1"># Test DNS round-robin</span>
<span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">{</span><span class="m">1</span>..6<span class="o">}</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span>wget<span class="w"> </span>-qO-<span class="w"> </span>http://backend:5678
<span class="k">done</span>
</code></pre></div>

<p><strong>Expected Output</strong>:</p>
<div class="highlight"><pre><span></span><code>Backend 1
Backend 2
Backend 3
Backend 1
Backend 2
Backend 3
</code></pre></div>

<h3 id="exercise-4-network-troubleshooting">Exercise 4: Network Troubleshooting<a class="header-link" href="#exercise-4-network-troubleshooting" title="Permanent link">&para;</a></h3>
<p>Given a broken network setup, identify and fix issues.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># broken-compose.yml</span>
<span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.8&#39;</span>

<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">web</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;80:80&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">frontend</span>

<span class="w">  </span><span class="nt">api</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">myapi:latest</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DB_HOST=db</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">frontend</span><span class="w">  </span><span class="c1"># BUG: Should be on backend too</span>

<span class="w">  </span><span class="nt">db</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend</span>

<span class="nt">networks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">frontend</span><span class="p">:</span>
<span class="w">  </span><span class="nt">backend</span><span class="p">:</span>
</code></pre></div>

<p><strong>Tasks</strong>:
1. Deploy and identify why api cannot reach db
2. Fix network configuration
3. Verify all services can communicate correctly
4. Document the issue and solution</p>
<h3 id="exercise-5-secure-multi-host-network">Exercise 5: Secure Multi-Host Network<a class="header-link" href="#exercise-5-secure-multi-host-network" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># On host1 (manager)</span>
docker<span class="w"> </span>swarm<span class="w"> </span>init<span class="w"> </span>--advertise-addr<span class="w"> </span><span class="m">192</span>.168.1.10

<span class="c1"># Create encrypted overlay network</span>
docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--driver<span class="w"> </span>overlay<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--opt<span class="w"> </span><span class="nv">encrypted</span><span class="o">=</span><span class="nb">true</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--attachable<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>secure-overlay

<span class="c1"># Deploy service</span>
docker<span class="w"> </span>service<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>web<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--network<span class="w"> </span>secure-overlay<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--replicas<span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>nginx

<span class="c1"># On host2 (worker)</span>
docker<span class="w"> </span>swarm<span class="w"> </span>join<span class="w"> </span>--token<span class="w"> </span>&lt;token&gt;<span class="w"> </span><span class="m">192</span>.168.1.10:2377

<span class="c1"># Verify service spans both hosts</span>
docker<span class="w"> </span>service<span class="w"> </span>ps<span class="w"> </span>web
</code></pre></div>

<p><strong>Tasks</strong>:
1. Set up 2-node Swarm cluster
2. Create encrypted overlay network
3. Deploy service across nodes
4. Capture traffic and verify encryption
5. Test cross-host container communication</p>
<h3 id="exercise-6-network-performance-testing">Exercise 6: Network Performance Testing<a class="header-link" href="#exercise-6-network-performance-testing" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create test network</span>
docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span>perf-net

<span class="c1"># Run iperf3 server</span>
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>iperf-server<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--network<span class="w"> </span>perf-net<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>networkstatic/iperf3<span class="w"> </span>-s

<span class="c1"># Run iperf3 client (bridge network)</span>
docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--network<span class="w"> </span>perf-net<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>networkstatic/iperf3<span class="w"> </span>-c<span class="w"> </span>iperf-server<span class="w"> </span>-t<span class="w"> </span><span class="m">30</span>

<span class="c1"># Run iperf3 client (host network)</span>
docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--network<span class="w"> </span>host<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>networkstatic/iperf3<span class="w"> </span>-c<span class="w"> </span>&lt;host-ip&gt;<span class="w"> </span>-t<span class="w"> </span><span class="m">30</span>
</code></pre></div>

<p><strong>Tasks</strong>:
1. Measure bandwidth on bridge network
2. Measure bandwidth on host network
3. Compare results and document overhead
4. Test with different MTU sizes</p>
<hr />
<h2 id="summary">Summary<a class="header-link" href="#summary" title="Permanent link">&para;</a></h2>
<p>In this lesson, you learned:</p>
<ul>
<li>Docker network drivers: bridge, host, overlay, macvlan, none</li>
<li>User-defined bridge networks with automatic DNS resolution</li>
<li>Host network for performance and none network for isolation</li>
<li>Overlay networks for multi-host communication in Swarm</li>
<li>Custom network configuration: subnets, gateways, IP ranges, MTU</li>
<li>DNS and service discovery with embedded DNS server</li>
<li>Advanced port mapping and publishing options</li>
<li>Network security: isolation, internal networks, encryption</li>
<li>Troubleshooting tools and techniques for network debugging</li>
</ul>
<p><strong>Key Takeaways</strong>:
- Always use user-defined networks for automatic DNS resolution
- Isolate services with multiple networks for security
- Use overlay networks with encryption for multi-host deployments
- Leverage embedded DNS for service discovery
- Monitor and troubleshoot with proper tooling</p>
<p><strong>Next Steps</strong>:
- Implement network policies for production environments
- Explore service mesh solutions (Istio, Linkerd) for advanced networking
- Learn about CNI plugins for Kubernetes
- Study network performance optimization techniques</p>
<hr />
<p><a href="./10_CI_CD_Pipelines.md">Previous: 10_CI_CD_Pipelines</a> | <a href="./12_Security_Best_Practices.md">Next: 12_Security_Best_Practices</a></p>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/Docker/10_CI_CD_Pipelines.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">10. CI/CD Pipelines</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/Docker/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/Docker/12_Security_Best_Practices.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Security Best Practices</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">â†‘</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'en';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}