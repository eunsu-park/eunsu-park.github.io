{% raw %}
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Commands & Environments - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/en/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/en/" class="nav-item ">
                    <span class="nav-icon">üè†</span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">üíª</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/en/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" selected>
                        English
                    </option>
                    
                    <option value="ko" >
                        ÌïúÍµ≠Ïñ¥
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">‚òÄÔ∏è</span>
                    <span class="theme-icon dark">üåô</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/en/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/en/LaTeX/">LaTeX</a>
    <span class="separator">/</span>
    <span class="current">Custom Commands & Environments</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>Custom Commands & Environments</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/LaTeX/12_Beamer_Presentations.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Beamer Presentations</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">üîó</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/LaTeX/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">üìã</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/LaTeX/14_Document_Classes.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Document Classes & Templates</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#why-create-custom-commands">Why Create Custom Commands?</a><ul>
<li><a href="#problem-repetitive-code">Problem: Repetitive Code</a></li>
<li><a href="#solution-custom-command">Solution: Custom Command</a></li>
</ul>
</li>
<li><a href="#basic-custom-commands">Basic Custom Commands</a><ul>
<li><a href="#syntax-newcommand">Syntax: \newcommand</a></li>
<li><a href="#examples-simple-text-replacements">Examples: Simple Text Replacements</a></li>
<li><a href="#non-mathematical-examples">Non-Mathematical Examples</a></li>
</ul>
</li>
<li><a href="#commands-with-arguments">Commands with Arguments</a><ul>
<li><a href="#syntax-one-argument">Syntax: One Argument</a></li>
<li><a href="#examples">Examples</a></li>
<li><a href="#multiple-arguments">Multiple Arguments</a></li>
</ul>
</li>
<li><a href="#optional-arguments">Optional Arguments</a><ul>
<li><a href="#syntax">Syntax</a></li>
<li><a href="#examples_1">Examples</a></li>
</ul>
</li>
<li><a href="#renewcommand-and-providecommand">\renewcommand and \providecommand</a><ul>
<li><a href="#renewcommand-redefine-existing-commands">\renewcommand: Redefine Existing Commands</a></li>
<li><a href="#providecommand-define-only-if-not-defined">\providecommand: Define Only If Not Defined</a></li>
</ul>
</li>
<li><a href="#mathematical-command-shortcuts">Mathematical Command Shortcuts</a><ul>
<li><a href="#common-patterns">Common Patterns</a></li>
</ul>
</li>
<li><a href="#custom-environments">Custom Environments</a><ul>
<li><a href="#syntax-newenvironment">Syntax: \newenvironment</a></li>
<li><a href="#example-custom-theorem-box">Example: Custom Theorem Box</a></li>
<li><a href="#example-solution-environment">Example: Solution Environment</a></li>
<li><a href="#example-custom-example-box">Example: Custom Example Box</a></li>
</ul>
</li>
<li><a href="#counters">Counters</a><ul>
<li><a href="#creating-and-using-counters">Creating and Using Counters</a></li>
<li><a href="#example-custom-theorem-counter">Example: Custom Theorem Counter</a></li>
<li><a href="#counter-hierarchy">Counter Hierarchy</a></li>
</ul>
</li>
<li><a href="#conditional-commands">Conditional Commands</a><ul>
<li><a href="#the-ifthen-package">The ifthen Package</a></li>
<li><a href="#tests">Tests</a></li>
<li><a href="#example-conditional-solutions">Example: Conditional Solutions</a></li>
</ul>
</li>
<li><a href="#advanced-argument-parsing-xparse">Advanced Argument Parsing: xparse</a><ul>
<li><a href="#syntax_1">Syntax</a></li>
<li><a href="#argument-specifiers">Argument Specifiers</a></li>
<li><a href="#examples_2">Examples</a></li>
</ul>
</li>
<li><a href="#the-etoolbox-package">The etoolbox Package</a><ul>
<li><a href="#conditional-tests">Conditional Tests</a></li>
<li><a href="#toggle-switches">Toggle Switches</a></li>
<li><a href="#patching-commands">Patching Commands</a></li>
</ul>
</li>
<li><a href="#debugging-custom-commands">Debugging Custom Commands</a><ul>
<li><a href="#show-command-definition">Show Command Definition</a></li>
<li><a href="#meaning">Meaning</a></li>
<li><a href="#debug-messages">Debug Messages</a></li>
<li><a href="#tracing">Tracing</a></li>
</ul>
</li>
<li><a href="#creating-a-personal-sty-package">Creating a Personal .sty Package</a><ul>
<li><a href="#why-create-a-package">Why Create a Package?</a></li>
<li><a href="#steps">Steps</a></li>
<li><a href="#local-texmf-tree">Local texmf Tree</a></li>
</ul>
</li>
<li><a href="#complete-example-math-paper-package">Complete Example: Math Paper Package</a></li>
<li><a href="#best-practices">Best Practices</a><ul>
<li><a href="#dos">Do's</a></li>
<li><a href="#donts">Don'ts</a></li>
</ul>
</li>
<li><a href="#exercises">Exercises</a><ul>
<li><a href="#exercise-1-basic-math-shortcuts">Exercise 1: Basic Math Shortcuts</a></li>
<li><a href="#exercise-2-custom-environment">Exercise 2: Custom Environment</a></li>
<li><a href="#exercise-3-conditional-compilation">Exercise 3: Conditional Compilation</a></li>
<li><a href="#exercise-4-derivative-command">Exercise 4: Derivative Command</a></li>
<li><a href="#exercise-5-personal-package">Exercise 5: Personal Package</a></li>
<li><a href="#exercise-6-counter-based-numbering">Exercise 6: Counter-Based Numbering</a></li>
<li><a href="#exercise-7-dynamic-content">Exercise 7: Dynamic Content</a></li>
</ul>
</li>
<li><a href="#summary">Summary</a></li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="custom-commands-environments">Custom Commands &amp; Environments<a class="header-link" href="#custom-commands-environments" title="Permanent link">&para;</a></h1>
<blockquote>
<p><strong>Topic</strong>: LaTeX
<strong>Lesson</strong>: 13 of 16
<strong>Prerequisites</strong>: Lessons 01-08 (especially mathematical typesetting)
<strong>Objective</strong>: Learn to create custom commands, environments, and personal packages to improve efficiency and maintain consistency</p>
</blockquote>
<h2 id="introduction">Introduction<a class="header-link" href="#introduction" title="Permanent link">&para;</a></h2>
<p>Custom commands and environments are powerful features that let you:</p>
<ul>
<li><strong>Avoid repetition</strong>: Write <code>\R</code> instead of <code>\mathbb{R}</code> every time</li>
<li><strong>Maintain consistency</strong>: Change notation in one place, update everywhere</li>
<li><strong>Improve readability</strong>: <code>\norm{\vec{x}}</code> is clearer than <code>\left\|\vec{x}\right\|</code></li>
<li><strong>Create shortcuts</strong>: Define complex formatting as simple commands</li>
<li><strong>Build personal packages</strong>: Reuse your definitions across projects</li>
</ul>
<p>This lesson covers command creation, custom environments, counters, conditional logic, and package creation.</p>
<hr />
<h2 id="why-create-custom-commands">Why Create Custom Commands?<a class="header-link" href="#why-create-custom-commands" title="Permanent link">&para;</a></h2>
<h3 id="problem-repetitive-code">Problem: Repetitive Code<a class="header-link" href="#problem-repetitive-code" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>The vector space <span class="s">$</span><span class="nv">\mathbb</span><span class="nb">{R}^n</span><span class="s">$</span> contains vectors in <span class="s">$</span><span class="nv">\mathbb</span><span class="nb">{R}^n</span><span class="s">$</span>.
For <span class="s">$</span><span class="nb">x, y </span><span class="nv">\in</span><span class="nb"> </span><span class="nv">\mathbb</span><span class="nb">{R}^n</span><span class="s">$</span>, the inner product...
</code></pre></div>

<p><strong>Issues</strong>:
- Typing <code>\mathbb{R}</code> repeatedly is tedious
- If you decide to change to <code>\mathbf{R}</code>, you must edit every occurrence
- Risk of inconsistent notation</p>
<h3 id="solution-custom-command">Solution: Custom Command<a class="header-link" href="#solution-custom-command" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">\newcommand</span><span class="nb">{</span><span class="k">\R</span><span class="nb">}{</span><span class="k">\mathbb</span><span class="nb">{</span>R<span class="nb">}}</span>

The vector space <span class="s">$</span><span class="nv">\R</span><span class="nb">^n</span><span class="s">$</span> contains vectors in <span class="s">$</span><span class="nv">\R</span><span class="nb">^n</span><span class="s">$</span>.
For <span class="s">$</span><span class="nb">x, y </span><span class="nv">\in</span><span class="nb"> </span><span class="nv">\R</span><span class="nb">^n</span><span class="s">$</span>, the inner product...
</code></pre></div>

<p><strong>Benefits</strong>:
- Type <code>\R</code> instead of <code>\mathbb{R}</code>
- Change definition once to update all occurrences
- Consistent notation throughout document</p>
<hr />
<h2 id="basic-custom-commands">Basic Custom Commands<a class="header-link" href="#basic-custom-commands" title="Permanent link">&para;</a></h2>
<h3 id="syntax-newcommand">Syntax: <code>\newcommand</code><a class="header-link" href="#syntax-newcommand" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">\newcommand</span><span class="nb">{</span><span class="k">\commandname</span><span class="nb">}{</span>replacement text<span class="nb">}</span>
</code></pre></div>

<ul>
<li><strong><code>\commandname</code></strong>: Must start with backslash, use only letters (no numbers)</li>
<li><strong><code>{replacement text}</code></strong>: What LaTeX substitutes when command is used</li>
</ul>
<h3 id="examples-simple-text-replacements">Examples: Simple Text Replacements<a class="header-link" href="#examples-simple-text-replacements" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">\documentclass</span><span class="nb">{</span>article<span class="nb">}</span>
<span class="k">\usepackage</span><span class="nb">{</span>amsmath,amssymb<span class="nb">}</span>

<span class="c">% Natural numbers, integers, rationals, reals, complex</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\N</span><span class="nb">}{</span><span class="k">\mathbb</span><span class="nb">{</span>N<span class="nb">}}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\Z</span><span class="nb">}{</span><span class="k">\mathbb</span><span class="nb">{</span>Z<span class="nb">}}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\Q</span><span class="nb">}{</span><span class="k">\mathbb</span><span class="nb">{</span>Q<span class="nb">}}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\R</span><span class="nb">}{</span><span class="k">\mathbb</span><span class="nb">{</span>R<span class="nb">}}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\C</span><span class="nb">}{</span><span class="k">\mathbb</span><span class="nb">{</span>C<span class="nb">}}</span>

<span class="c">% Common operators</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\dd</span><span class="nb">}{</span><span class="k">\mathrm</span><span class="nb">{</span>d<span class="nb">}}</span>  <span class="c">% differential d</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\eps</span><span class="nb">}{</span><span class="k">\varepsilon</span><span class="nb">}</span>

<span class="k">\begin</span><span class="nb">{</span>document<span class="nb">}</span>

For all <span class="s">$</span><span class="nb">x </span><span class="nv">\in</span><span class="nb"> </span><span class="nv">\R</span><span class="s">$</span>, there exists <span class="s">$</span><span class="nb">n </span><span class="nv">\in</span><span class="nb"> </span><span class="nv">\N</span><span class="s">$</span> such that <span class="s">$</span><span class="nb">n &gt; x</span><span class="s">$</span>.

The integral <span class="s">$</span><span class="nv">\int</span><span class="nb">_</span><span class="m">0</span><span class="nb">^</span><span class="m">1</span><span class="nb"> f</span><span class="o">(</span><span class="nb">x</span><span class="o">)</span><span class="nb"> </span><span class="nv">\,</span><span class="nb"> </span><span class="nv">\dd</span><span class="nb"> x</span><span class="s">$</span> uses an upright d.

<span class="k">\end</span><span class="nb">{</span>document<span class="nb">}</span>
</code></pre></div>

<h3 id="non-mathematical-examples">Non-Mathematical Examples<a class="header-link" href="#non-mathematical-examples" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">\newcommand</span><span class="nb">{</span><span class="k">\projectname</span><span class="nb">}{</span>Deep Learning Framework<span class="nb">}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\version</span><span class="nb">}{</span>v2.1.0<span class="nb">}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\email</span><span class="nb">}{</span>contact@example.com<span class="nb">}</span>

This is <span class="k">\projectname</span><span class="nb">{}</span> <span class="k">\version</span>.  <span class="c">% {} prevents space issues</span>
Contact: <span class="k">\email</span>
</code></pre></div>

<hr />
<h2 id="commands-with-arguments">Commands with Arguments<a class="header-link" href="#commands-with-arguments" title="Permanent link">&para;</a></h2>
<h3 id="syntax-one-argument">Syntax: One Argument<a class="header-link" href="#syntax-one-argument" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">\newcommand</span><span class="nb">{</span><span class="k">\commandname</span><span class="nb">}</span>[1]<span class="nb">{</span>replacement with #1<span class="nb">}</span>
</code></pre></div>

<ul>
<li><strong><code>[1]</code></strong>: Number of arguments (1-9)</li>
<li><strong><code>#1</code></strong>: First argument placeholder</li>
</ul>
<h3 id="examples">Examples<a class="header-link" href="#examples" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c">% Absolute value</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\abs</span><span class="nb">}</span>[1]<span class="nb">{</span><span class="k">\left</span>| #1 <span class="k">\right</span>|<span class="nb">}</span>

<span class="c">% Norm</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\norm</span><span class="nb">}</span>[1]<span class="nb">{</span><span class="k">\left\|</span> #1 <span class="k">\right\|</span><span class="nb">}</span>

<span class="c">% Set notation</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\set</span><span class="nb">}</span>[1]<span class="nb">{</span><span class="k">\left\{</span> #1 <span class="k">\right\}</span><span class="nb">}</span>

<span class="c">% Floor and ceiling</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\floor</span><span class="nb">}</span>[1]<span class="nb">{</span><span class="k">\left\lfloor</span> #1 <span class="k">\right\rfloor</span><span class="nb">}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\ceil</span><span class="nb">}</span>[1]<span class="nb">{</span><span class="k">\left\lceil</span> #1 <span class="k">\right\rceil</span><span class="nb">}</span>

<span class="c">% Usage:</span>
<span class="s">$</span><span class="nv">\abs</span><span class="nb">{x} &lt; </span><span class="m">1</span><span class="s">$</span> and <span class="s">$</span><span class="nv">\norm</span><span class="nb">{</span><span class="nv">\vec</span><span class="nb">{v}} </span><span class="o">=</span><span class="nb"> </span><span class="nv">\sqrt</span><span class="nb">{</span><span class="nv">\abs</span><span class="nb">{x}^</span><span class="m">2</span><span class="nb"> </span><span class="o">+</span><span class="nb"> </span><span class="nv">\abs</span><span class="nb">{y}^</span><span class="m">2</span><span class="nb">}</span><span class="s">$</span>

<span class="s">$</span><span class="nb">S </span><span class="o">=</span><span class="nb"> </span><span class="nv">\set</span><span class="nb">{x </span><span class="nv">\in</span><span class="nb"> </span><span class="nv">\R</span><span class="nb"> : </span><span class="nv">\abs</span><span class="nb">{x} &lt; </span><span class="m">1</span><span class="nb">}</span><span class="s">$</span>

<span class="s">$</span><span class="nv">\floor</span><span class="nb">{</span><span class="m">3</span><span class="nb">.</span><span class="m">7</span><span class="nb">} </span><span class="o">=</span><span class="nb"> </span><span class="m">3</span><span class="s">$</span> and <span class="s">$</span><span class="nv">\ceil</span><span class="nb">{</span><span class="m">3</span><span class="nb">.</span><span class="m">7</span><span class="nb">} </span><span class="o">=</span><span class="nb"> </span><span class="m">4</span><span class="s">$</span>
</code></pre></div>

<h3 id="multiple-arguments">Multiple Arguments<a class="header-link" href="#multiple-arguments" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c">% Inner product</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\ip</span><span class="nb">}</span>[2]<span class="nb">{</span><span class="k">\left\langle</span> #1, #2 <span class="k">\right\rangle</span><span class="nb">}</span>

<span class="c">% Derivative</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\dv</span><span class="nb">}</span>[2]<span class="nb">{</span><span class="k">\frac</span><span class="nb">{</span><span class="k">\dd</span> #1<span class="nb">}{</span><span class="k">\dd</span> #2<span class="nb">}}</span>

<span class="c">% Partial derivative</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\pdv</span><span class="nb">}</span>[2]<span class="nb">{</span><span class="k">\frac</span><span class="nb">{</span><span class="k">\partial</span> #1<span class="nb">}{</span><span class="k">\partial</span> #2<span class="nb">}}</span>

<span class="c">% Binomial coefficient</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\binom</span><span class="nb">}</span>[2]<span class="nb">{</span><span class="k">\left</span>(<span class="k">\begin</span><span class="nb">{</span>array<span class="nb">}{</span>c<span class="nb">}</span> #1 <span class="k">\\</span> #2 <span class="k">\end</span><span class="nb">{</span>array<span class="nb">}</span><span class="k">\right</span>)<span class="nb">}</span>

<span class="c">% Usage:</span>
<span class="s">$</span><span class="nv">\ip</span><span class="nb">{</span><span class="nv">\vec</span><span class="nb">{u}}{</span><span class="nv">\vec</span><span class="nb">{v}} </span><span class="o">=</span><span class="nb"> </span><span class="nv">\sum</span><span class="nb">_{i</span><span class="o">=</span><span class="m">1</span><span class="nb">}^n u_i v_i</span><span class="s">$</span>

<span class="s">$</span><span class="nv">\dv</span><span class="nb">{y}{x} </span><span class="o">=</span><span class="nb"> </span><span class="m">2</span><span class="nb">x</span><span class="s">$</span> and <span class="s">$</span><span class="nv">\pdv</span><span class="nb">{f}{x} </span><span class="o">=</span><span class="nb"> y^</span><span class="m">2</span><span class="s">$</span>
</code></pre></div>

<hr />
<h2 id="optional-arguments">Optional Arguments<a class="header-link" href="#optional-arguments" title="Permanent link">&para;</a></h2>
<h3 id="syntax">Syntax<a class="header-link" href="#syntax" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">\newcommand</span><span class="nb">{</span><span class="k">\commandname</span><span class="nb">}</span>[total][default for #1]<span class="nb">{</span>replacement with #1, #2, ...<span class="nb">}</span>
</code></pre></div>

<ul>
<li><strong><code>[total]</code></strong>: Total number of arguments</li>
<li><strong><code>[default for #1]</code></strong>: Default value for first argument (which becomes optional)</li>
<li><strong>Mandatory arguments</strong>: <code>#2</code>, <code>#3</code>, etc.</li>
</ul>
<h3 id="examples_1">Examples<a class="header-link" href="#examples_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c">% Derivative with optional order</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\derivative</span><span class="nb">}</span>[2][1]<span class="nb">{</span><span class="k">\frac</span><span class="nb">{</span><span class="k">\dd</span><span class="nb">^{</span>#1<span class="nb">}</span> #2<span class="nb">}{</span><span class="k">\dd</span> x<span class="nb">^{</span>#1<span class="nb">}}}</span>

<span class="c">% Usage:</span>
<span class="s">$</span><span class="nv">\derivative</span><span class="nb">{y}</span><span class="s">$</span>         <span class="c">% first derivative (default)</span>
<span class="s">$</span><span class="nv">\derivative</span><span class="o">[</span><span class="m">2</span><span class="o">]</span><span class="nb">{y}</span><span class="s">$</span>      <span class="c">% second derivative</span>
<span class="s">$</span><span class="nv">\derivative</span><span class="o">[</span><span class="nb">n</span><span class="o">]</span><span class="nb">{f}</span><span class="s">$</span>      <span class="c">% nth derivative</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c">% Vector with optional dimension</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\vect</span><span class="nb">}</span>[2][n]<span class="nb">{</span><span class="k">\mathbf</span><span class="nb">{</span>#2<span class="nb">}</span> <span class="k">\in</span> <span class="k">\R</span><span class="nb">^{</span>#1<span class="nb">}}</span>

<span class="c">% Usage:</span>
<span class="s">$</span><span class="nv">\vect</span><span class="nb">{x}</span><span class="s">$</span>        <span class="c">% x ‚àà R^n (default)</span>
<span class="s">$</span><span class="nv">\vect</span><span class="o">[</span><span class="m">3</span><span class="o">]</span><span class="nb">{v}</span><span class="s">$</span>     <span class="c">% v ‚àà R^3</span>
</code></pre></div>

<hr />
<h2 id="renewcommand-and-providecommand"><code>\renewcommand</code> and <code>\providecommand</code><a class="header-link" href="#renewcommand-and-providecommand" title="Permanent link">&para;</a></h2>
<h3 id="renewcommand-redefine-existing-commands"><code>\renewcommand</code>: Redefine Existing Commands<a class="header-link" href="#renewcommand-redefine-existing-commands" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c">% Redefine \vec to use bold instead of arrow</span>
<span class="k">\renewcommand</span><span class="nb">{</span><span class="k">\vec</span><span class="nb">}</span>[1]<span class="nb">{</span><span class="k">\mathbf</span><span class="nb">{</span>#1<span class="nb">}}</span>

<span class="c">% Now \vec{x} produces bold x instead of x with arrow</span>
</code></pre></div>

<p><strong>Warning</strong>: Only use <code>\renewcommand</code> on commands you understand. Redefining core LaTeX commands can break your document.</p>
<h3 id="providecommand-define-only-if-not-defined"><code>\providecommand</code>: Define Only If Not Defined<a class="header-link" href="#providecommand-define-only-if-not-defined" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">\providecommand</span><span class="nb">{</span><span class="k">\R</span><span class="nb">}{</span><span class="k">\mathbb</span><span class="nb">{</span>R<span class="nb">}}</span>
</code></pre></div>

<ul>
<li>If <code>\R</code> already exists, nothing happens</li>
<li>If <code>\R</code> doesn't exist, it's defined</li>
<li>Useful in packages to avoid conflicts</li>
</ul>
<hr />
<h2 id="mathematical-command-shortcuts">Mathematical Command Shortcuts<a class="header-link" href="#mathematical-command-shortcuts" title="Permanent link">&para;</a></h2>
<h3 id="common-patterns">Common Patterns<a class="header-link" href="#common-patterns" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">\documentclass</span><span class="nb">{</span>article<span class="nb">}</span>
<span class="k">\usepackage</span><span class="nb">{</span>amsmath,amssymb<span class="nb">}</span>

<span class="c">% Number sets</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\N</span><span class="nb">}{</span><span class="k">\mathbb</span><span class="nb">{</span>N<span class="nb">}}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\Z</span><span class="nb">}{</span><span class="k">\mathbb</span><span class="nb">{</span>Z<span class="nb">}}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\R</span><span class="nb">}{</span><span class="k">\mathbb</span><span class="nb">{</span>R<span class="nb">}}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\C</span><span class="nb">}{</span><span class="k">\mathbb</span><span class="nb">{</span>C<span class="nb">}}</span>

<span class="c">% Operators</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\dd</span><span class="nb">}{</span><span class="k">\mathrm</span><span class="nb">{</span>d<span class="nb">}}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\Tr</span><span class="nb">}{</span><span class="k">\operatorname</span><span class="nb">{</span>Tr<span class="nb">}}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\rank</span><span class="nb">}{</span><span class="k">\operatorname</span><span class="nb">{</span>rank<span class="nb">}}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\diag</span><span class="nb">}{</span><span class="k">\operatorname</span><span class="nb">{</span>diag<span class="nb">}}</span>

<span class="c">% Delimiters</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\abs</span><span class="nb">}</span>[1]<span class="nb">{</span><span class="k">\left</span>| #1 <span class="k">\right</span>|<span class="nb">}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\norm</span><span class="nb">}</span>[1]<span class="nb">{</span><span class="k">\left\|</span> #1 <span class="k">\right\|</span><span class="nb">}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\ip</span><span class="nb">}</span>[2]<span class="nb">{</span><span class="k">\left\langle</span> #1, #2 <span class="k">\right\rangle</span><span class="nb">}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\set</span><span class="nb">}</span>[1]<span class="nb">{</span><span class="k">\left\{</span> #1 <span class="k">\right\}</span><span class="nb">}</span>

<span class="c">% Calculus</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\dv</span><span class="nb">}</span>[2]<span class="nb">{</span><span class="k">\frac</span><span class="nb">{</span><span class="k">\dd</span> #1<span class="nb">}{</span><span class="k">\dd</span> #2<span class="nb">}}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\pdv</span><span class="nb">}</span>[2]<span class="nb">{</span><span class="k">\frac</span><span class="nb">{</span><span class="k">\partial</span> #1<span class="nb">}{</span><span class="k">\partial</span> #2<span class="nb">}}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\ppdv</span><span class="nb">}</span>[2]<span class="nb">{</span><span class="k">\frac</span><span class="nb">{</span><span class="k">\partial</span><span class="nb">^</span>2 #1<span class="nb">}{</span><span class="k">\partial</span> #2<span class="nb">^</span>2<span class="nb">}}</span>

<span class="c">% Linear algebra</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\mat</span><span class="nb">}</span>[1]<span class="nb">{</span><span class="k">\mathbf</span><span class="nb">{</span>#1<span class="nb">}}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\transpose</span><span class="nb">}{^{</span><span class="k">\top</span><span class="nb">}}</span>

<span class="k">\begin</span><span class="nb">{</span>document<span class="nb">}</span>

Let <span class="s">$</span><span class="nv">\mat</span><span class="nb">{A} </span><span class="nv">\in</span><span class="nb"> </span><span class="nv">\R</span><span class="nb">^{m </span><span class="nv">\times</span><span class="nb"> n}</span><span class="s">$</span> with <span class="s">$</span><span class="nv">\rank</span><span class="o">(</span><span class="nv">\mat</span><span class="nb">{A}</span><span class="o">)</span><span class="nb"> </span><span class="o">=</span><span class="nb"> r</span><span class="s">$</span>.

The trace satisfies <span class="s">$</span><span class="nv">\Tr</span><span class="o">(</span><span class="nv">\mat</span><span class="nb">{A}</span><span class="nv">\transpose</span><span class="nb"> </span><span class="nv">\mat</span><span class="nb">{A}</span><span class="o">)</span><span class="nb"> </span><span class="o">=</span><span class="nb"> </span><span class="nv">\sum</span><span class="nb">_{i,j} a_{ij}^</span><span class="m">2</span><span class="s">$</span>.

For <span class="s">$</span><span class="nb">f : </span><span class="nv">\R</span><span class="nb">^n </span><span class="nv">\to</span><span class="nb"> </span><span class="nv">\R</span><span class="s">$</span>, the gradient is <span class="s">$</span><span class="nv">\nabla</span><span class="nb"> f </span><span class="o">=</span><span class="nb"> </span><span class="nv">\left</span><span class="o">(</span><span class="nb"> </span><span class="nv">\pdv</span><span class="nb">{f}{x_</span><span class="m">1</span><span class="nb">}, </span><span class="nv">\ldots</span><span class="nb">, </span><span class="nv">\pdv</span><span class="nb">{f}{x_n} </span><span class="nv">\right</span><span class="o">)</span><span class="s">$</span>.

<span class="k">\end</span><span class="nb">{</span>document<span class="nb">}</span>
</code></pre></div>

<hr />
<h2 id="custom-environments">Custom Environments<a class="header-link" href="#custom-environments" title="Permanent link">&para;</a></h2>
<h3 id="syntax-newenvironment">Syntax: <code>\newenvironment</code><a class="header-link" href="#syntax-newenvironment" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">\newenvironment</span><span class="nb">{</span>envname<span class="nb">}</span>[args]
  <span class="nb">{</span>begin code<span class="nb">}</span>
  <span class="nb">{</span>end code<span class="nb">}</span>
</code></pre></div>

<ul>
<li><strong><code>envname</code></strong>: Environment name (no backslash)</li>
<li><strong><code>[args]</code></strong>: Optional number of arguments</li>
<li><strong><code>{begin code}</code></strong>: Executed at <code>\begin{envname}</code></li>
<li><strong><code>{end code}</code></strong>: Executed at <code>\end{envname}</code></li>
</ul>
<h3 id="example-custom-theorem-box">Example: Custom Theorem Box<a class="header-link" href="#example-custom-theorem-box" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">\documentclass</span><span class="nb">{</span>article<span class="nb">}</span>
<span class="k">\usepackage</span><span class="nb">{</span>amsmath,amssymb<span class="nb">}</span>
<span class="k">\usepackage</span><span class="na">[most]</span><span class="nb">{</span>tcolorbox<span class="nb">}</span>

<span class="k">\newenvironment</span><span class="nb">{</span>mytheorem<span class="nb">}</span>[1]
<span class="nb">{</span><span class="c">%</span>
  <span class="k">\begin</span><span class="nb">{</span>tcolorbox<span class="nb">}</span>[colback=blue!5,colframe=blue!75!black,title=Theorem: #1]
<span class="nb">}{</span><span class="c">%</span>
  <span class="k">\end</span><span class="nb">{</span>tcolorbox<span class="nb">}</span>
<span class="nb">}</span>

<span class="k">\begin</span><span class="nb">{</span>document<span class="nb">}</span>

<span class="k">\begin</span><span class="nb">{</span>mytheorem<span class="nb">}{</span>Pythagorean Theorem<span class="nb">}</span>
  For a right triangle with legs <span class="s">$</span><span class="nb">a</span><span class="s">$</span>, <span class="s">$</span><span class="nb">b</span><span class="s">$</span> and hypotenuse <span class="s">$</span><span class="nb">c</span><span class="s">$</span>:
  <span class="sb">\[</span><span class="nb"> a^</span><span class="m">2</span><span class="nb"> </span><span class="o">+</span><span class="nb"> b^</span><span class="m">2</span><span class="nb"> </span><span class="o">=</span><span class="nb"> c^</span><span class="m">2</span><span class="nb"> </span><span class="s">\]</span>
<span class="k">\end</span><span class="nb">{</span>mytheorem<span class="nb">}</span>

<span class="k">\end</span><span class="nb">{</span>document<span class="nb">}</span>
</code></pre></div>

<h3 id="example-solution-environment">Example: Solution Environment<a class="header-link" href="#example-solution-environment" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">\newenvironment</span><span class="nb">{</span>solution<span class="nb">}</span>
<span class="nb">{</span><span class="c">%</span>
  <span class="k">\par\medskip\noindent\textbf</span><span class="nb">{</span>Solution:<span class="nb">}</span><span class="k">\par\nopagebreak</span>
  <span class="k">\small</span>
<span class="nb">}{</span><span class="c">%</span>
  <span class="k">\par\medskip</span>
<span class="nb">}</span>

<span class="c">% Usage:</span>
<span class="k">\begin</span><span class="nb">{</span>solution<span class="nb">}</span>
  Apply the quadratic formula:
  <span class="sb">\[</span><span class="nb"> x </span><span class="o">=</span><span class="nb"> </span><span class="nv">\frac</span><span class="nb">{</span><span class="o">-</span><span class="nb">b </span><span class="nv">\pm</span><span class="nb"> </span><span class="nv">\sqrt</span><span class="nb">{b^</span><span class="m">2</span><span class="nb"> </span><span class="o">-</span><span class="nb"> </span><span class="m">4</span><span class="nb">ac}}{</span><span class="m">2</span><span class="nb">a} </span><span class="s">\]</span>
<span class="k">\end</span><span class="nb">{</span>solution<span class="nb">}</span>
</code></pre></div>

<h3 id="example-custom-example-box">Example: Custom Example Box<a class="header-link" href="#example-custom-example-box" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">\usepackage</span><span class="nb">{</span>framed<span class="nb">}</span>
<span class="k">\usepackage</span><span class="nb">{</span>xcolor<span class="nb">}</span>

<span class="k">\definecolor</span><span class="nb">{</span>examplecolor<span class="nb">}{</span>rgb<span class="nb">}{</span>0.9,0.9,0.95<span class="nb">}</span>

<span class="k">\newenvironment</span><span class="nb">{</span>example<span class="nb">}</span>[1][]
<span class="nb">{</span><span class="c">%</span>
  <span class="k">\def\exampletitle</span><span class="nb">{</span>#1<span class="nb">}</span><span class="c">%</span>
  <span class="k">\begin</span><span class="nb">{</span>leftbar<span class="nb">}</span>
  <span class="k">\noindent\textbf</span><span class="nb">{</span>Example<span class="k">\ifx\exampletitle\empty\else:</span> <span class="k">\exampletitle\fi</span><span class="nb">}</span><span class="k">\\</span>
<span class="nb">}{</span><span class="c">%</span>
  <span class="k">\end</span><span class="nb">{</span>leftbar<span class="nb">}</span>
<span class="nb">}</span>
</code></pre></div>

<hr />
<h2 id="counters">Counters<a class="header-link" href="#counters" title="Permanent link">&para;</a></h2>
<h3 id="creating-and-using-counters">Creating and Using Counters<a class="header-link" href="#creating-and-using-counters" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c">% Define counter</span>
<span class="k">\newcounter</span><span class="nb">{</span>mycounter<span class="nb">}</span>

<span class="c">% Set value</span>
<span class="k">\setcounter</span><span class="nb">{</span>mycounter<span class="nb">}{</span>0<span class="nb">}</span>

<span class="c">% Increment</span>
<span class="k">\stepcounter</span><span class="nb">{</span>mycounter<span class="nb">}</span>

<span class="c">% Increment and make referable</span>
<span class="k">\refstepcounter</span><span class="nb">{</span>mycounter<span class="nb">}</span>

<span class="c">% Display value</span>
<span class="k">\themycounter</span>
<span class="k">\arabic</span><span class="nb">{</span>mycounter<span class="nb">}</span>   <span class="c">% Arabic numerals</span>
<span class="k">\roman</span><span class="nb">{</span>mycounter<span class="nb">}</span>    <span class="c">% lowercase roman</span>
<span class="k">\Roman</span><span class="nb">{</span>mycounter<span class="nb">}</span>    <span class="c">% uppercase roman</span>
<span class="k">\alph</span><span class="nb">{</span>mycounter<span class="nb">}</span>     <span class="c">% lowercase letters</span>
<span class="k">\Alph</span><span class="nb">{</span>mycounter<span class="nb">}</span>     <span class="c">% uppercase letters</span>

<span class="c">% Get numeric value</span>
<span class="k">\value</span><span class="nb">{</span>mycounter<span class="nb">}</span>
</code></pre></div>

<h3 id="example-custom-theorem-counter">Example: Custom Theorem Counter<a class="header-link" href="#example-custom-theorem-counter" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">\documentclass</span><span class="nb">{</span>article<span class="nb">}</span>
<span class="k">\usepackage</span><span class="nb">{</span>amsmath<span class="nb">}</span>

<span class="k">\newcounter</span><span class="nb">{</span>theorem<span class="nb">}</span>
<span class="k">\setcounter</span><span class="nb">{</span>theorem<span class="nb">}{</span>0<span class="nb">}</span>

<span class="k">\newenvironment</span><span class="nb">{</span>theorem<span class="nb">}</span>[1][]
<span class="nb">{</span><span class="c">%</span>
  <span class="k">\refstepcounter</span><span class="nb">{</span>theorem<span class="nb">}</span><span class="c">%</span>
  <span class="k">\par\medskip\noindent\textbf</span><span class="nb">{</span>Theorem <span class="k">\thetheorem\ifx\\</span>#1<span class="k">\\\else\</span> (#1)<span class="k">\fi</span>.<span class="nb">}</span>
  <span class="k">\itshape</span>
<span class="nb">}{</span><span class="c">%</span>
  <span class="k">\par\medskip</span>
<span class="nb">}</span>

<span class="k">\begin</span><span class="nb">{</span>document<span class="nb">}</span>

<span class="k">\begin</span><span class="nb">{</span>theorem<span class="nb">}</span>[Fundamental Theorem of Calculus]
  <span class="k">\label</span><span class="nb">{</span>thm:ftc<span class="nb">}</span>
  If <span class="s">$</span><span class="nb">f</span><span class="s">$</span> is continuous on <span class="s">$</span><span class="o">[</span><span class="nb">a,b</span><span class="o">]</span><span class="s">$</span>, then...
<span class="k">\end</span><span class="nb">{</span>theorem<span class="nb">}</span>

By Theorem~<span class="k">\ref</span><span class="nb">{</span>thm:ftc<span class="nb">}</span>, we have...

<span class="k">\end</span><span class="nb">{</span>document<span class="nb">}</span>
</code></pre></div>

<h3 id="counter-hierarchy">Counter Hierarchy<a class="header-link" href="#counter-hierarchy" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c">% Create counter that resets with section</span>
<span class="k">\newcounter</span><span class="nb">{</span>example<span class="nb">}</span>[section]

<span class="c">% Reset counter</span>
<span class="k">\setcounter</span><span class="nb">{</span>example<span class="nb">}{</span>0<span class="nb">}</span>

<span class="c">% Automatic reset when section increments</span>
</code></pre></div>

<hr />
<h2 id="conditional-commands">Conditional Commands<a class="header-link" href="#conditional-commands" title="Permanent link">&para;</a></h2>
<h3 id="the-ifthen-package">The <code>ifthen</code> Package<a class="header-link" href="#the-ifthen-package" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">\usepackage</span><span class="nb">{</span>ifthen<span class="nb">}</span>

<span class="k">\ifthenelse</span><span class="nb">{</span>test<span class="nb">}{</span>true-code<span class="nb">}{</span>false-code<span class="nb">}</span>
</code></pre></div>

<h3 id="tests">Tests<a class="header-link" href="#tests" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c">% Numeric comparison</span>
<span class="k">\ifthenelse</span><span class="nb">{</span><span class="k">\value</span><span class="nb">{</span>counter<span class="nb">}</span> &gt; 5<span class="nb">}{</span>Large<span class="nb">}{</span>Small<span class="nb">}</span>

<span class="c">% String equality</span>
<span class="k">\ifthenelse</span><span class="nb">{</span><span class="k">\equal</span><span class="nb">{</span>#1<span class="nb">}{</span>draft<span class="nb">}}{</span>DRAFT MODE<span class="nb">}{}</span>

<span class="c">% Boolean</span>
<span class="k">\newboolean</span><span class="nb">{</span>showsolutions<span class="nb">}</span>
<span class="k">\setboolean</span><span class="nb">{</span>showsolutions<span class="nb">}{</span>true<span class="nb">}</span>
<span class="k">\ifthenelse</span><span class="nb">{</span><span class="k">\boolean</span><span class="nb">{</span>showsolutions<span class="nb">}}{</span>Solutions shown<span class="nb">}{}</span>
</code></pre></div>

<h3 id="example-conditional-solutions">Example: Conditional Solutions<a class="header-link" href="#example-conditional-solutions" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">\usepackage</span><span class="nb">{</span>ifthen<span class="nb">}</span>
<span class="k">\newboolean</span><span class="nb">{</span>solutions<span class="nb">}</span>
<span class="k">\setboolean</span><span class="nb">{</span>solutions<span class="nb">}{</span>true<span class="nb">}</span>  <span class="c">% Change to false to hide</span>

<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\solution</span><span class="nb">}</span>[1]<span class="nb">{</span><span class="c">%</span>
  <span class="k">\ifthenelse</span><span class="nb">{</span><span class="k">\boolean</span><span class="nb">{</span>solutions<span class="nb">}}{</span><span class="c">%</span>
    <span class="k">\par\textbf</span><span class="nb">{</span>Solution:<span class="nb">}</span> #1<span class="k">\par</span>
  <span class="nb">}{}</span><span class="c">%</span>
<span class="nb">}</span>

<span class="c">% Usage:</span>
<span class="k">\textbf</span><span class="nb">{</span>Problem 1:<span class="nb">}</span> Solve <span class="s">$</span><span class="nb">x^</span><span class="m">2</span><span class="nb"> </span><span class="o">-</span><span class="nb"> </span><span class="m">5</span><span class="nb">x </span><span class="o">+</span><span class="nb"> </span><span class="m">6</span><span class="nb"> </span><span class="o">=</span><span class="nb"> </span><span class="m">0</span><span class="s">$</span>.

<span class="k">\solution</span><span class="nb">{</span>Factor: <span class="s">$</span><span class="o">(</span><span class="nb">x</span><span class="o">-</span><span class="m">2</span><span class="o">)(</span><span class="nb">x</span><span class="o">-</span><span class="m">3</span><span class="o">)=</span><span class="m">0</span><span class="s">$</span>, so <span class="s">$</span><span class="nb">x</span><span class="o">=</span><span class="m">2</span><span class="s">$</span> or <span class="s">$</span><span class="nb">x</span><span class="o">=</span><span class="m">3</span><span class="s">$</span>.<span class="nb">}</span>
</code></pre></div>

<hr />
<h2 id="advanced-argument-parsing-xparse">Advanced Argument Parsing: <code>xparse</code><a class="header-link" href="#advanced-argument-parsing-xparse" title="Permanent link">&para;</a></h2>
<p>The <code>xparse</code> package provides more powerful command definitions.</p>
<h3 id="syntax_1">Syntax<a class="header-link" href="#syntax_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">\usepackage</span><span class="nb">{</span>xparse<span class="nb">}</span>

<span class="k">\NewDocumentCommand</span><span class="nb">{</span><span class="k">\commandname</span><span class="nb">}{</span>argument-spec<span class="nb">}{</span>definition<span class="nb">}</span>
</code></pre></div>

<h3 id="argument-specifiers">Argument Specifiers<a class="header-link" href="#argument-specifiers" title="Permanent link">&para;</a></h3>
<ul>
<li><strong><code>m</code></strong>: Mandatory argument <code>{...}</code></li>
<li><strong><code>o</code></strong>: Optional argument <code>[...]</code> (value is <code>\NoValue</code> if not given)</li>
<li><strong><code>O{default}</code></strong>: Optional with default value</li>
<li><strong><code>s</code></strong>: Star (produces boolean)</li>
<li><strong><code>d()</code> or <code>d&lt;&gt;</code></strong>: Delimited argument <code>(...)</code> or <code>&lt;...&gt;</code></li>
</ul>
<h3 id="examples_2">Examples<a class="header-link" href="#examples_2" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">\usepackage</span><span class="nb">{</span>xparse<span class="nb">}</span>

<span class="c">% Starred variant: starred uses \|\|, unstarred uses \lVert\rVert</span>
<span class="k">\NewDocumentCommand</span><span class="nb">{</span><span class="k">\norm</span><span class="nb">}{</span>s m<span class="nb">}{</span><span class="c">%</span>
  <span class="k">\IfBooleanTF</span><span class="nb">{</span>#1<span class="nb">}</span>
    <span class="nb">{</span><span class="k">\left\|</span> #2 <span class="k">\right\|</span><span class="nb">}</span>
    <span class="nb">{</span><span class="k">\lVert</span> #2 <span class="k">\rVert</span><span class="nb">}</span>
<span class="nb">}</span>

<span class="c">% Usage:</span>
<span class="s">$</span><span class="nv">\norm</span><span class="nb">{x}</span><span class="s">$</span>     <span class="c">% \lVert x \rVert</span>
<span class="s">$</span><span class="nv">\norm</span><span class="o">*</span><span class="nb">{x}</span><span class="s">$</span>    <span class="c">% \| x \|</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c">% Optional subscript</span>
<span class="k">\NewDocumentCommand</span><span class="nb">{</span><span class="k">\norm</span><span class="nb">}{</span>o m<span class="nb">}{</span><span class="c">%</span>
  <span class="k">\IfNoValueTF</span><span class="nb">{</span>#1<span class="nb">}</span>
    <span class="nb">{</span><span class="k">\left\|</span> #2 <span class="k">\right\|</span><span class="nb">}</span>
    <span class="nb">{</span><span class="k">\left\|</span> #2 <span class="k">\right\|</span><span class="nb">_{</span>#1<span class="nb">}}</span>
<span class="nb">}</span>

<span class="c">% Usage:</span>
<span class="s">$</span><span class="nv">\norm</span><span class="nb">{x}</span><span class="s">$</span>       <span class="c">% \| x \|</span>
<span class="s">$</span><span class="nv">\norm</span><span class="o">[</span><span class="m">2</span><span class="o">]</span><span class="nb">{x}</span><span class="s">$</span>    <span class="c">% \| x \|_2</span>
<span class="s">$</span><span class="nv">\norm</span><span class="o">[</span><span class="nv">\infty</span><span class="o">]</span><span class="nb">{x}</span><span class="s">$</span>  <span class="c">% \| x \|_‚àû</span>
</code></pre></div>

<hr />
<h2 id="the-etoolbox-package">The <code>etoolbox</code> Package<a class="header-link" href="#the-etoolbox-package" title="Permanent link">&para;</a></h2>
<p>Provides advanced programming tools for LaTeX.</p>
<h3 id="conditional-tests">Conditional Tests<a class="header-link" href="#conditional-tests" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">\usepackage</span><span class="nb">{</span>etoolbox<span class="nb">}</span>

<span class="c">% Check if command is defined</span>
<span class="k">\ifdef</span><span class="nb">{</span><span class="k">\commandname</span><span class="nb">}{</span>true-code<span class="nb">}{</span>false-code<span class="nb">}</span>

<span class="c">% Check if command is defined and not empty</span>
<span class="k">\ifdefempty</span><span class="nb">{</span><span class="k">\commandname</span><span class="nb">}{</span>empty-code<span class="nb">}{</span>nonempty-code<span class="nb">}</span>

<span class="c">% Check if string is empty</span>
<span class="k">\ifstrempty</span><span class="nb">{</span>#1<span class="nb">}{</span>empty-code<span class="nb">}{</span>nonempty-code<span class="nb">}</span>
</code></pre></div>

<h3 id="toggle-switches">Toggle Switches<a class="header-link" href="#toggle-switches" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">\newtoggle</span><span class="nb">{</span>solutions<span class="nb">}</span>
<span class="k">\toggletrue</span><span class="nb">{</span>solutions<span class="nb">}</span>   <span class="c">% or \togglefalse{solutions}</span>

<span class="k">\iftoggle</span><span class="nb">{</span>solutions<span class="nb">}{</span>Show solutions<span class="nb">}{</span>Hide solutions<span class="nb">}</span>
</code></pre></div>

<h3 id="patching-commands">Patching Commands<a class="header-link" href="#patching-commands" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c">% Prepend code to existing command</span>
<span class="k">\pretocmd</span><span class="nb">{</span><span class="k">\section</span><span class="nb">}{</span>Code before section<span class="nb">}{}{}</span>

<span class="c">% Append code</span>
<span class="k">\apptocmd</span><span class="nb">{</span><span class="k">\section</span><span class="nb">}{</span>Code after section<span class="nb">}{}{}</span>

<span class="c">% Replace part of command</span>
<span class="k">\patchcmd</span><span class="nb">{</span><span class="k">\command</span><span class="nb">}{</span>search<span class="nb">}{</span>replace<span class="nb">}{</span>success<span class="nb">}{</span>failure<span class="nb">}</span>
</code></pre></div>

<hr />
<h2 id="debugging-custom-commands">Debugging Custom Commands<a class="header-link" href="#debugging-custom-commands" title="Permanent link">&para;</a></h2>
<h3 id="show-command-definition">Show Command Definition<a class="header-link" href="#show-command-definition" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">\show\mycommand</span>
</code></pre></div>

<p>Prints definition to console/log.</p>
<h3 id="meaning">Meaning<a class="header-link" href="#meaning" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">\meaning\mycommand</span>
</code></pre></div>

<p>Shows full expansion.</p>
<h3 id="debug-messages">Debug Messages<a class="header-link" href="#debug-messages" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c">% Print to console and log</span>
<span class="k">\typeout</span><span class="nb">{</span>Debug: value is <span class="k">\themycounter</span><span class="nb">}</span>

<span class="c">% Print only to log</span>
<span class="k">\message</span><span class="nb">{</span>Internal state: ...<span class="nb">}</span>
</code></pre></div>

<h3 id="tracing">Tracing<a class="header-link" href="#tracing" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">\tracingmacros</span>=1  <span class="c">% Show macro expansions in log</span>
<span class="k">\tracingmacros</span>=0  <span class="c">% Turn off</span>
</code></pre></div>

<hr />
<h2 id="creating-a-personal-sty-package">Creating a Personal <code>.sty</code> Package<a class="header-link" href="#creating-a-personal-sty-package" title="Permanent link">&para;</a></h2>
<h3 id="why-create-a-package">Why Create a Package?<a class="header-link" href="#why-create-a-package" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Reusability</strong>: Use same commands across multiple documents</li>
<li><strong>Organization</strong>: Keep preamble clean</li>
<li><strong>Sharing</strong>: Give colleagues your notation conventions</li>
<li><strong>Maintenance</strong>: Update commands in one place</li>
</ul>
<h3 id="steps">Steps<a class="header-link" href="#steps" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Create file</strong>: <code>mystyle.sty</code></li>
<li><strong>Add package header</strong>:</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="k">\NeedsTeXFormat</span><span class="nb">{</span>LaTeX2e<span class="nb">}</span>
<span class="k">\ProvidesPackage</span><span class="nb">{</span>mystyle<span class="nb">}</span>[2026/02/15 My Custom Commands]

<span class="c">% Load required packages</span>
<span class="k">\RequirePackage</span><span class="nb">{</span>amsmath<span class="nb">}</span>
<span class="k">\RequirePackage</span><span class="nb">{</span>amssymb<span class="nb">}</span>
<span class="k">\RequirePackage</span><span class="nb">{</span>xparse<span class="nb">}</span>

<span class="c">% Define commands</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\R</span><span class="nb">}{</span><span class="k">\mathbb</span><span class="nb">{</span>R<span class="nb">}}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\C</span><span class="nb">}{</span><span class="k">\mathbb</span><span class="nb">{</span>C<span class="nb">}}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\norm</span><span class="nb">}</span>[1]<span class="nb">{</span><span class="k">\left\|</span> #1 <span class="k">\right\|</span><span class="nb">}</span>
<span class="k">\NewDocumentCommand</span><span class="nb">{</span><span class="k">\ip</span><span class="nb">}{</span>m m<span class="nb">}{</span><span class="k">\left\langle</span> #1, #2 <span class="k">\right\rangle</span><span class="nb">}</span>

<span class="c">% Define environments</span>
<span class="k">\newenvironment</span><span class="nb">{</span>theorem<span class="nb">}</span>[1][]
  <span class="nb">{</span><span class="k">\par\medskip\noindent\textbf</span><span class="nb">{</span>Theorem<span class="k">\ifx\\</span>#1<span class="k">\\\else\</span> (#1)<span class="k">\fi</span>.<span class="nb">}</span><span class="k">\itshape</span><span class="nb">}</span>
  <span class="nb">{</span><span class="k">\par\medskip</span><span class="nb">}</span>

<span class="k">\endinput</span>
</code></pre></div>

<ol>
<li><strong>Use package</strong>: Place <code>mystyle.sty</code> in same directory as <code>.tex</code> file (or in your local <code>texmf</code> tree)</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="k">\documentclass</span><span class="nb">{</span>article<span class="nb">}</span>
<span class="k">\usepackage</span><span class="nb">{</span>mystyle<span class="nb">}</span>

<span class="k">\begin</span><span class="nb">{</span>document<span class="nb">}</span>
  <span class="s">$</span><span class="nv">\norm</span><span class="nb">{x} &lt; </span><span class="m">1</span><span class="s">$</span> for all <span class="s">$</span><span class="nb">x </span><span class="nv">\in</span><span class="nb"> </span><span class="nv">\R</span><span class="s">$</span>.
<span class="k">\end</span><span class="nb">{</span>document<span class="nb">}</span>
</code></pre></div>

<h3 id="local-texmf-tree">Local <code>texmf</code> Tree<a class="header-link" href="#local-texmf-tree" title="Permanent link">&para;</a></h3>
<p>To make package available globally:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Find your home texmf directory</span>
kpsewhich<span class="w"> </span>-var-value<span class="w"> </span>TEXMFHOME

<span class="c1"># Example: ~/texmf</span>
<span class="c1"># Place mystyle.sty in:</span>
~/texmf/tex/latex/mystyle/mystyle.sty

<span class="c1"># Update filename database</span>
texhash<span class="w"> </span>~/texmf
</code></pre></div>

<p>Now <code>\usepackage{mystyle}</code> works in any document.</p>
<hr />
<h2 id="complete-example-math-paper-package">Complete Example: Math Paper Package<a class="header-link" href="#complete-example-math-paper-package" title="Permanent link">&para;</a></h2>
<p><strong>File: <code>mathpaper.sty</code></strong></p>
<div class="highlight"><pre><span></span><code><span class="k">\NeedsTeXFormat</span><span class="nb">{</span>LaTeX2e<span class="nb">}</span>
<span class="k">\ProvidesPackage</span><span class="nb">{</span>mathpaper<span class="nb">}</span>[2026/02/15 Math Paper Macros]

<span class="c">% Required packages</span>
<span class="k">\RequirePackage</span><span class="nb">{</span>amsmath,amssymb,amsthm<span class="nb">}</span>
<span class="k">\RequirePackage</span><span class="nb">{</span>xparse<span class="nb">}</span>

<span class="c">% Number sets</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\N</span><span class="nb">}{</span><span class="k">\mathbb</span><span class="nb">{</span>N<span class="nb">}}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\Z</span><span class="nb">}{</span><span class="k">\mathbb</span><span class="nb">{</span>Z<span class="nb">}}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\Q</span><span class="nb">}{</span><span class="k">\mathbb</span><span class="nb">{</span>Q<span class="nb">}}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\R</span><span class="nb">}{</span><span class="k">\mathbb</span><span class="nb">{</span>R<span class="nb">}}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\C</span><span class="nb">}{</span><span class="k">\mathbb</span><span class="nb">{</span>C<span class="nb">}}</span>

<span class="c">% Operators</span>
<span class="k">\DeclareMathOperator</span><span class="nb">{</span><span class="k">\Tr</span><span class="nb">}{</span>Tr<span class="nb">}</span>
<span class="k">\DeclareMathOperator</span><span class="nb">{</span><span class="k">\rank</span><span class="nb">}{</span>rank<span class="nb">}</span>
<span class="k">\DeclareMathOperator</span><span class="nb">{</span><span class="k">\diag</span><span class="nb">}{</span>diag<span class="nb">}</span>
<span class="k">\DeclareMathOperator</span><span class="nb">{</span><span class="k">\span</span><span class="nb">}{</span>span<span class="nb">}</span>

<span class="c">% Delimiters with optional size</span>
<span class="k">\NewDocumentCommand</span><span class="nb">{</span><span class="k">\abs</span><span class="nb">}{</span>s m<span class="nb">}{</span><span class="c">%</span>
  <span class="k">\IfBooleanTF</span><span class="nb">{</span>#1<span class="nb">}{</span><span class="k">\left</span>| #2 <span class="k">\right</span>|<span class="nb">}{</span><span class="k">\lvert</span> #2 <span class="k">\rvert</span><span class="nb">}</span><span class="c">%</span>
<span class="nb">}</span>
<span class="k">\NewDocumentCommand</span><span class="nb">{</span><span class="k">\norm</span><span class="nb">}{</span>s m<span class="nb">}{</span><span class="c">%</span>
  <span class="k">\IfBooleanTF</span><span class="nb">{</span>#1<span class="nb">}{</span><span class="k">\left\|</span> #2 <span class="k">\right\|</span><span class="nb">}{</span><span class="k">\lVert</span> #2 <span class="k">\rVert</span><span class="nb">}</span><span class="c">%</span>
<span class="nb">}</span>
<span class="k">\NewDocumentCommand</span><span class="nb">{</span><span class="k">\ip</span><span class="nb">}{</span>s m m<span class="nb">}{</span><span class="c">%</span>
  <span class="k">\IfBooleanTF</span><span class="nb">{</span>#1<span class="nb">}{</span><span class="k">\left\langle</span> #2, #3 <span class="k">\right\rangle</span><span class="nb">}{</span><span class="k">\langle</span> #2, #3 <span class="k">\rangle</span><span class="nb">}</span><span class="c">%</span>
<span class="nb">}</span>

<span class="c">% Calculus</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\dd</span><span class="nb">}{</span><span class="k">\mathrm</span><span class="nb">{</span>d<span class="nb">}}</span>
<span class="k">\NewDocumentCommand</span><span class="nb">{</span><span class="k">\dv</span><span class="nb">}{</span>m m<span class="nb">}{</span><span class="k">\frac</span><span class="nb">{</span><span class="k">\dd</span> #1<span class="nb">}{</span><span class="k">\dd</span> #2<span class="nb">}}</span>
<span class="k">\NewDocumentCommand</span><span class="nb">{</span><span class="k">\pdv</span><span class="nb">}{</span>m m<span class="nb">}{</span><span class="k">\frac</span><span class="nb">{</span><span class="k">\partial</span> #1<span class="nb">}{</span><span class="k">\partial</span> #2<span class="nb">}}</span>

<span class="c">% Theorem environments</span>
<span class="k">\theoremstyle</span><span class="nb">{</span>plain<span class="nb">}</span>
<span class="k">\newtheorem</span><span class="nb">{</span>theorem<span class="nb">}{</span>Theorem<span class="nb">}</span>[section]
<span class="k">\newtheorem</span><span class="nb">{</span>lemma<span class="nb">}</span>[theorem]<span class="nb">{</span>Lemma<span class="nb">}</span>
<span class="k">\newtheorem</span><span class="nb">{</span>proposition<span class="nb">}</span>[theorem]<span class="nb">{</span>Proposition<span class="nb">}</span>
<span class="k">\newtheorem</span><span class="nb">{</span>corollary<span class="nb">}</span>[theorem]<span class="nb">{</span>Corollary<span class="nb">}</span>

<span class="k">\theoremstyle</span><span class="nb">{</span>definition<span class="nb">}</span>
<span class="k">\newtheorem</span><span class="nb">{</span>definition<span class="nb">}</span>[theorem]<span class="nb">{</span>Definition<span class="nb">}</span>
<span class="k">\newtheorem</span><span class="nb">{</span>example<span class="nb">}</span>[theorem]<span class="nb">{</span>Example<span class="nb">}</span>

<span class="k">\theoremstyle</span><span class="nb">{</span>remark<span class="nb">}</span>
<span class="k">\newtheorem</span><span class="nb">{</span>remark<span class="nb">}</span>[theorem]<span class="nb">{</span>Remark<span class="nb">}</span>

<span class="k">\endinput</span>
</code></pre></div>

<p><strong>Usage:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">\documentclass</span><span class="nb">{</span>article<span class="nb">}</span>
<span class="k">\usepackage</span><span class="nb">{</span>mathpaper<span class="nb">}</span>

<span class="k">\begin</span><span class="nb">{</span>document<span class="nb">}</span>

<span class="k">\section</span><span class="nb">{</span>Vector Spaces<span class="nb">}</span>

<span class="k">\begin</span><span class="nb">{</span>definition<span class="nb">}</span>
  A <span class="k">\emph</span><span class="nb">{</span>normed vector space<span class="nb">}</span> is a pair <span class="s">$</span><span class="o">(</span><span class="nb">V, </span><span class="nv">\norm</span><span class="nb">{</span><span class="nv">\cdot</span><span class="nb">}</span><span class="o">)</span><span class="s">$</span> where <span class="s">$</span><span class="nb">V</span><span class="s">$</span> is a vector space over <span class="s">$</span><span class="nv">\R</span><span class="s">$</span> and <span class="s">$</span><span class="nv">\norm</span><span class="nb">{</span><span class="nv">\cdot</span><span class="nb">} : V </span><span class="nv">\to</span><span class="nb"> </span><span class="o">[</span><span class="m">0</span><span class="nb">,</span><span class="nv">\infty</span><span class="o">)</span><span class="s">$</span> satisfies...
<span class="k">\end</span><span class="nb">{</span>definition<span class="nb">}</span>

<span class="k">\begin</span><span class="nb">{</span>theorem<span class="nb">}</span>[Cauchy-Schwarz]
  For all <span class="s">$</span><span class="nb">x, y </span><span class="nv">\in</span><span class="nb"> V</span><span class="s">$</span>, we have <span class="s">$</span><span class="nv">\abs</span><span class="o">*</span><span class="nb">{</span><span class="nv">\ip</span><span class="nb">{x}{y}} </span><span class="nv">\leq</span><span class="nb"> </span><span class="nv">\norm</span><span class="nb">{x} </span><span class="nv">\norm</span><span class="nb">{y}</span><span class="s">$</span>.
<span class="k">\end</span><span class="nb">{</span>theorem<span class="nb">}</span>

<span class="k">\end</span><span class="nb">{</span>document<span class="nb">}</span>
</code></pre></div>

<hr />
<h2 id="best-practices">Best Practices<a class="header-link" href="#best-practices" title="Permanent link">&para;</a></h2>
<h3 id="dos">Do's<a class="header-link" href="#dos" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Use descriptive names</strong>: <code>\norm{x}</code> is better than <code>\n{x}</code></li>
<li><strong>Consistent conventions</strong>: Stick to one notation style</li>
<li><strong>Comment definitions</strong>: Especially in <code>.sty</code> files</li>
<li><strong>Group related commands</strong>: Keep number sets together, operators together</li>
<li><strong>Use <code>\ensuremath</code></strong> for commands that work in both text and math:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">\newcommand</span><span class="nb">{</span><span class="k">\R</span><span class="nb">}{</span><span class="k">\ensuremath</span><span class="nb">{</span><span class="k">\mathbb</span><span class="nb">{</span>R<span class="nb">}}}</span>
Now <span class="k">\R</span> works in text and <span class="s">$</span><span class="nv">\R</span><span class="s">$</span> in math.
</code></pre></div>

<h3 id="donts">Don'ts<a class="header-link" href="#donts" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Don't redefine core commands</strong> unless you know what you're doing</li>
<li><strong>Don't use too many arguments</strong>: More than 3-4 becomes hard to read</li>
<li><strong>Don't make commands too complex</strong>: If definition is &gt;5 lines, reconsider</li>
<li><strong>Don't use single-letter names</strong> for non-mathematical commands</li>
<li><strong>Don't hardcode formatting</strong>: Use semantic commands</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c">% Bad: hardcoded color</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\important</span><span class="nb">}</span>[1]<span class="nb">{</span><span class="k">\textcolor</span><span class="nb">{</span>red<span class="nb">}{</span>#1<span class="nb">}}</span>

<span class="c">% Good: semantic command</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\important</span><span class="nb">}</span>[1]<span class="nb">{</span><span class="k">\emph</span><span class="nb">{</span>#1<span class="nb">}}</span>  <span class="c">% Can change later</span>
</code></pre></div>

<hr />
<h2 id="exercises">Exercises<a class="header-link" href="#exercises" title="Permanent link">&para;</a></h2>
<h3 id="exercise-1-basic-math-shortcuts">Exercise 1: Basic Math Shortcuts<a class="header-link" href="#exercise-1-basic-math-shortcuts" title="Permanent link">&para;</a></h3>
<p>Create custom commands for:
- Set builder notation: <code>\setbuilder{x \in \R}{x &gt; 0}</code>
- Probability: <code>\Prob{X = 1}</code>, <code>\Expect{X}</code>, <code>\Var{X}</code>
- Big-O notation: <code>\bigO{n^2}</code>, <code>\bigOmega{n}</code>, <code>\bigTheta{n \log n}</code></p>
<p>Expected output format for set builder: <code>{ x ‚àà ‚Ñù : x &gt; 0 }</code></p>
<h3 id="exercise-2-custom-environment">Exercise 2: Custom Environment<a class="header-link" href="#exercise-2-custom-environment" title="Permanent link">&para;</a></h3>
<p>Create a <code>warning</code> environment that:
- Has an optional title argument
- Displays a warning symbol (use <code>\textbf{‚ö†}</code> or <code>\textbullet</code>)
- Uses a colored background (load <code>xcolor</code>, use <code>\colorbox</code>)
- Has slightly smaller text</p>
<h3 id="exercise-3-conditional-compilation">Exercise 3: Conditional Compilation<a class="header-link" href="#exercise-3-conditional-compilation" title="Permanent link">&para;</a></h3>
<p>Create a command <code>\version{student}{instructor}</code> that:
- Uses a boolean toggle <code>studentversion</code>
- Displays first argument if toggle is true
- Displays second argument if toggle is false
- Use it to show/hide solutions in a problem set</p>
<h3 id="exercise-4-derivative-command">Exercise 4: Derivative Command<a class="header-link" href="#exercise-4-derivative-command" title="Permanent link">&para;</a></h3>
<p>Create a sophisticated <code>\deriv</code> command using <code>xparse</code> that:
- <code>\deriv{f}{x}</code> ‚Üí df/dx
- <code>\deriv[2]{f}{x}</code> ‚Üí d¬≤f/dx¬≤
- <code>\deriv*{f}{x}</code> ‚Üí uses <code>\left\lfloor</code> instead of regular fraction
- Has a starred variant for display style</p>
<h3 id="exercise-5-personal-package">Exercise 5: Personal Package<a class="header-link" href="#exercise-5-personal-package" title="Permanent link">&para;</a></h3>
<p>Create <code>mymath.sty</code> containing:
- Your favorite number set commands
- At least 5 mathematical operators
- At least 3 delimiter commands (abs, norm, etc.)
- A custom theorem environment
- Proper package documentation comments</p>
<p>Use it in a sample document with a theorem and proof.</p>
<h3 id="exercise-6-counter-based-numbering">Exercise 6: Counter-Based Numbering<a class="header-link" href="#exercise-6-counter-based-numbering" title="Permanent link">&para;</a></h3>
<p>Create an <code>exercise</code> environment that:
- Auto-numbers exercises
- Has an optional difficulty parameter: <code>[easy]</code>, <code>[medium]</code>, <code>[hard]</code>
- Displays the difficulty in parentheses after number
- Resets counter each section</p>
<h3 id="exercise-7-dynamic-content">Exercise 7: Dynamic Content<a class="header-link" href="#exercise-7-dynamic-content" title="Permanent link">&para;</a></h3>
<p>Create a command <code>\matlab</code> that:
- Checks if <code>matlab</code> is defined as a toggle
- If true: typesets code in MATLAB style
- If false: typesets code in generic style
- Allows easy switching between conference submission (no colors) and final version (colorful)</p>
<hr />
<h2 id="summary">Summary<a class="header-link" href="#summary" title="Permanent link">&para;</a></h2>
<p>Custom commands and environments are essential for:</p>
<ol>
<li><strong>Efficiency</strong>: Type less, accomplish more</li>
<li><strong>Consistency</strong>: Uniform notation throughout document</li>
<li><strong>Maintainability</strong>: Change definitions in one place</li>
<li><strong>Reusability</strong>: Create personal packages for multiple projects</li>
<li><strong>Readability</strong>: Semantic commands make LaTeX source clearer</li>
</ol>
<p><strong>Key takeaways</strong>:
- <code>\newcommand{\name}[args]{def}</code> for simple commands
- <code>\newenvironment{name}{begin}{end}</code> for custom environments
- <code>\newcounter</code>, <code>\stepcounter</code>, <code>\refstepcounter</code> for numbering
- <code>xparse</code> for advanced argument parsing
- Create <code>.sty</code> files for reusable command collections</p>
<p>Mastering custom commands transforms LaTeX from a typesetting system into a personalized authoring environment tailored to your needs.</p>
<hr />
<p><strong>Navigation</strong></p>
<ul>
<li>Previous: <a href="12_Graphics_with_TikZ.md">12_Graphics_with_TikZ.md</a></li>
<li>Next: <a href="14_Document_Classes.md">14_Document_Classes.md</a></li>
</ul>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/LaTeX/12_Beamer_Presentations.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Beamer Presentations</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">üîó</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/LaTeX/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">üìã</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/LaTeX/14_Document_Classes.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Document Classes & Templates</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">‚Üë</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'en';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}