{% raw %}
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Routing Basics - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/en/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/en/" class="nav-item ">
                    <span class="nav-icon">ğŸ </span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">ğŸ’»</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/en/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" selected>
                        English
                    </option>
                    
                    <option value="ko" >
                        í•œêµ­ì–´
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">â˜€ï¸</span>
                    <span class="theme-icon dark">ğŸŒ™</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/en/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/en/Networking/">Networking</a>
    <span class="separator">/</span>
    <span class="current">Routing Basics</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>Routing Basics</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/Networking/07_Subnetting_Practice.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Subnetting Practice</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/Networking/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/Networking/09_Routing_Protocols.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Routing Protocols</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#1-what-is-routing">1. What is Routing?</a><ul>
<li><a href="#11-definition-of-routing">1.1 Definition of Routing</a></li>
<li><a href="#12-routing-vs-switching">1.2 Routing vs Switching</a></li>
<li><a href="#13-purpose-of-routing">1.3 Purpose of Routing</a></li>
</ul>
</li>
<li><a href="#2-the-role-of-routers">2. The Role of Routers</a><ul>
<li><a href="#21-basic-functions-of-routers">2.1 Basic Functions of Routers</a></li>
<li><a href="#22-router-components">2.2 Router Components</a></li>
<li><a href="#23-packet-processing-flow">2.3 Packet Processing Flow</a></li>
<li><a href="#24-router-vs-l3-switch">2.4 Router vs L3 Switch</a></li>
</ul>
</li>
<li><a href="#3-routing-table-structure">3. Routing Table Structure</a><ul>
<li><a href="#31-components-of-routing-table">3.1 Components of Routing Table</a></li>
<li><a href="#32-routing-table-entry-types">3.2 Routing Table Entry Types</a></li>
<li><a href="#33-real-routing-table-examples">3.3 Real Routing Table Examples</a></li>
<li><a href="#34-metric-and-administrative-distance">3.4 Metric and Administrative Distance</a></li>
</ul>
</li>
<li><a href="#4-static-routing-vs-dynamic-routing">4. Static Routing vs Dynamic Routing</a><ul>
<li><a href="#41-static-routing">4.1 Static Routing</a></li>
<li><a href="#42-dynamic-routing">4.2 Dynamic Routing</a></li>
<li><a href="#43-comparison-summary">4.3 Comparison Summary</a></li>
<li><a href="#44-hybrid-approach">4.4 Hybrid Approach</a></li>
</ul>
</li>
<li><a href="#5-default-gateway">5. Default Gateway</a><ul>
<li><a href="#51-what-is-default-gateway">5.1 What is Default Gateway?</a></li>
<li><a href="#52-default-gateway-operation">5.2 Default Gateway Operation</a></li>
<li><a href="#53-default-route">5.3 Default Route</a></li>
<li><a href="#54-multiple-gateways">5.4 Multiple Gateways</a></li>
</ul>
</li>
<li><a href="#6-longest-prefix-match">6. Longest Prefix Match</a><ul>
<li><a href="#61-concept">6.1 Concept</a></li>
<li><a href="#62-understanding-in-binary">6.2 Understanding in Binary</a></li>
<li><a href="#63-importance-of-longest-prefix-match">6.3 Importance of Longest Prefix Match</a></li>
<li><a href="#64-route-summarization">6.4 Route Summarization</a></li>
</ul>
</li>
<li><a href="#7-practice-problems">7. Practice Problems</a><ul>
<li><a href="#problem-1-routing-table-analysis">Problem 1: Routing Table Analysis</a></li>
<li><a href="#problem-2-static-routing-configuration">Problem 2: Static Routing Configuration</a></li>
<li><a href="#problem-3-longest-prefix-match">Problem 3: Longest Prefix Match</a></li>
<li><a href="#problem-4-network-design">Problem 4: Network Design</a></li>
</ul>
</li>
<li><a href="#answers">Answers</a><ul>
<li><a href="#problem-1-answers">Problem 1 Answers</a></li>
<li><a href="#problem-2-answers">Problem 2 Answers</a></li>
<li><a href="#problem-3-answers">Problem 3 Answers</a></li>
<li><a href="#problem-4-answers">Problem 4 Answers</a></li>
</ul>
</li>
<li><a href="#8-next-steps">8. Next Steps</a><ul>
<li><a href="#next-lesson">Next Lesson</a></li>
<li><a href="#related-lessons">Related Lessons</a></li>
<li><a href="#recommended-practice">Recommended Practice</a></li>
</ul>
</li>
<li><a href="#9-references">9. References</a><ul>
<li><a href="#command-reference">Command Reference</a></li>
<li><a href="#learning-resources">Learning Resources</a></li>
<li><a href="#cisco-ios-commands">Cisco IOS Commands</a></li>
</ul>
</li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="routing-basics">Routing Basics<a class="header-link" href="#routing-basics" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="header-link" href="#overview" title="Permanent link">&para;</a></h2>
<p>This document covers the fundamental concepts of network routing. Routing is the core of data transmission between networks, the process by which packets find the optimal path from source to destination.</p>
<p><strong>Difficulty</strong>: â­â­â­
<strong>Estimated Learning Time</strong>: 2-3 hours
<strong>Prerequisites</strong>: <a href="./07_Subnetting_Practice.md">07_Subnetting_Practice.md</a></p>
<hr />
<h2 id="table-of-contents">Table of Contents<a class="header-link" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#1-what-is-routing">What is Routing?</a></li>
<li><a href="#2-the-role-of-routers">The Role of Routers</a></li>
<li><a href="#3-routing-table-structure">Routing Table Structure</a></li>
<li><a href="#4-static-routing-vs-dynamic-routing">Static Routing vs Dynamic Routing</a></li>
<li><a href="#5-default-gateway">Default Gateway</a></li>
<li><a href="#6-longest-prefix-match">Longest Prefix Match</a></li>
<li><a href="#7-practice-problems">Practice Problems</a></li>
<li><a href="#8-next-steps">Next Steps</a></li>
<li><a href="#9-references">References</a></li>
</ol>
<hr />
<h2 id="1-what-is-routing">1. What is Routing?<a class="header-link" href="#1-what-is-routing" title="Permanent link">&para;</a></h2>
<h3 id="11-definition-of-routing">1.1 Definition of Routing<a class="header-link" href="#11-definition-of-routing" title="Permanent link">&para;</a></h3>
<p>Routing is the process of determining the optimal path to forward packets from source to destination across a network.</p>
<div class="highlight"><pre><span></span><code>                        Basic Concept of Routing

   Source                                              Destination
[192.168.1.10] â”€â”€â”€â”€â”€?â”€â”€â”€â”€â”€?â”€â”€â”€â”€â”€?â”€â”€â”€â”€â”€?â”€â”€â”€â”€â”€â”€â”€â–º [10.0.0.50]

                    Router determines path

              Router A â”€â”€â”€â”€ Router B â”€â”€â”€â”€ Router C
                  â”‚             â”‚             â”‚
   [192.168.1.10] â”‚             â”‚             â”‚ [10.0.0.50]
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        Selected optimal path
</code></pre></div>

<h3 id="12-routing-vs-switching">1.2 Routing vs Switching<a class="header-link" href="#12-routing-vs-switching" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Switching (L2)</th>
<th>Routing (L3)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Operating Layer</td>
<td>Data Link Layer</td>
<td>Network Layer</td>
</tr>
<tr>
<td>Address Used</td>
<td>MAC Address</td>
<td>IP Address</td>
</tr>
<tr>
<td>Scope</td>
<td>Within same network</td>
<td>Between different networks</td>
</tr>
<tr>
<td>Device</td>
<td>Switch</td>
<td>Router</td>
</tr>
<tr>
<td>Table</td>
<td>MAC Address Table</td>
<td>Routing Table</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code>Switching (within same network)          Routing (between networks)

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  Network A        Network B
  â”‚  192.168.1.0/24 â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                 â”‚                 â”‚        â”‚      â”‚        â”‚
  â”‚ PC1 â”€â”€â”€ Switch â”€â”€â”€ PC2           â”‚ PC1    â”‚      â”‚   PC2  â”‚
  â”‚                 â”‚                 â”‚   â”‚    â”‚      â”‚    â”‚   â”‚
  â”‚ MAC-based       â”‚                 â”‚   â””â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”˜   â”‚
  â”‚   forwarding    â”‚                 â”‚ Router â”‚      â”‚ Router â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          IP-based forwarding
</code></pre></div>

<h3 id="13-purpose-of-routing">1.3 Purpose of Routing<a class="header-link" href="#13-purpose-of-routing" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Network Connectivity</strong>: Connect different networks</li>
<li><strong>Path Determination</strong>: Select optimal path to destination</li>
<li><strong>Traffic Distribution</strong>: Load balancing across network</li>
<li><strong>Fault Recovery</strong>: Maintain connectivity through alternate paths</li>
</ol>
<hr />
<h2 id="2-the-role-of-routers">2. The Role of Routers<a class="header-link" href="#2-the-role-of-routers" title="Permanent link">&para;</a></h2>
<h3 id="21-basic-functions-of-routers">2.1 Basic Functions of Routers<a class="header-link" href="#21-basic-functions-of-routers" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="w">                        </span><span class="nv">Core</span><span class="w"> </span><span class="nv">Functions</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">Routers</span>

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">                        </span><span class="nv">Router</span><span class="w">                               </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">  </span><span class="mi">1</span>.<span class="w"> </span><span class="nv">Receive</span><span class="w"> </span><span class="nv">packet</span><span class="w">      </span>â”€â”€â”€â”€â”€â–º<span class="w">  </span><span class="nv">Receive</span><span class="w"> </span><span class="nv">packet</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">interface</span><span class="w"> </span>â”‚
â”‚<span class="w">  </span><span class="mi">2</span>.<span class="w"> </span><span class="nv">Check</span><span class="w"> </span><span class="nv">destination</span><span class="w">   </span>â”€â”€â”€â”€â”€â–º<span class="w">  </span><span class="nv">Check</span><span class="w"> </span><span class="nv">destination</span><span class="w"> </span><span class="nv">IP</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">header</span>â”‚
â”‚<span class="w">  </span><span class="mi">3</span>.<span class="w"> </span><span class="nv">Routing</span><span class="w"> </span><span class="nv">table</span><span class="w"> </span><span class="nv">lookup</span><span class="w"> </span>â”€â”€â”€â”€â–º<span class="w">  </span><span class="nv">Search</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">optimal</span><span class="w"> </span><span class="nv">path</span><span class="w">     </span>â”‚
â”‚<span class="w">  </span><span class="mi">4</span>.<span class="w"> </span><span class="nv">Forward</span><span class="w"> </span><span class="nv">packet</span><span class="w">      </span>â”€â”€â”€â”€â”€â–º<span class="w">  </span><span class="k">Send</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="k">next</span><span class="w"> </span><span class="nv">hop</span><span class="w">            </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="22-router-components">2.2 Router Components<a class="header-link" href="#22-router-components" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Router Internal Structure           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   CPU    â”‚  â”‚   RAM    â”‚  â”‚    Routing Table     â”‚ â”‚
â”‚  â”‚(Processing)â”‚ â”‚(Temp Storage)â”‚ â”‚   (Path Info)    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  NVRAM   â”‚  â”‚  Flash   â”‚  â”‚    ARP Cache         â”‚ â”‚
â”‚  â”‚ (Config) â”‚  â”‚  (OS)    â”‚  â”‚   (IP-MAC Mapping)   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Interfaces (Ports)                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”           â”‚  â”‚
â”‚  â”‚  â”‚Eth0â”‚ â”‚Eth1â”‚ â”‚Eth2â”‚ â”‚Ser0â”‚ â”‚Ser1â”‚           â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="23-packet-processing-flow">2.3 Packet Processing Flow<a class="header-link" href="#23-packet-processing-flow" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">[PC A: 192.168.1.10] â”€â”€â”€â”€â”€â”€â–º [Router] â”€â”€â”€â”€â”€â”€â–º [PC B: 10.0.0.50]</span>

<span class="na">Step 1</span><span class="o">:</span><span class="w"> </span><span class="s">Receive Packet</span>
<span class="na">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="na">â”‚ Ethernet Header â”‚ IP Header â”‚ Data           â”‚</span>
<span class="na">â”‚ Dst MAC</span><span class="o">:</span><span class="w"> </span><span class="s">Router â”‚ Dst IP: 10.0.0.50          â”‚</span>
<span class="na">â”‚ Src MAC</span><span class="o">:</span><span class="w"> </span><span class="s">PC A   â”‚ Src IP: 192.168.1.10       â”‚</span>
<span class="na">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="na">Step 2</span><span class="o">:</span><span class="w"> </span><span class="s">Remove L2 Header, Check IP Header</span>
<span class="na">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="na">â”‚ IP Header â”‚ Data                             â”‚</span>
<span class="na">â”‚ Dst IP</span><span class="o">:</span><span class="w"> </span><span class="s">10.0.0.50                            â”‚</span>
<span class="na">â”‚ Src IP</span><span class="o">:</span><span class="w"> </span><span class="s">192.168.1.10                         â”‚</span>
<span class="na">â”‚ TTL</span><span class="o">:</span><span class="w"> </span><span class="s">64 â†’ 63 (decrement)                     â”‚</span>
<span class="na">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="na">Step 3</span><span class="o">:</span><span class="w"> </span><span class="s">Routing Table Lookup</span>
<span class="na">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="na">â”‚ Destination</span><span class="o">:</span><span class="w"> </span><span class="s">10.0.0.50                       â”‚</span>
<span class="na">â”‚ Match</span><span class="o">:</span><span class="w"> </span><span class="s">10.0.0.0/24 via 192.168.2.1 Eth1     â”‚</span>
<span class="na">â”‚ Next Hop</span><span class="o">:</span><span class="w"> </span><span class="s">192.168.2.1                        â”‚</span>
<span class="na">â”‚ Output Interface</span><span class="o">:</span><span class="w"> </span><span class="s">Eth1                       â”‚</span>
<span class="na">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="na">Step 4</span><span class="o">:</span><span class="w"> </span><span class="s">Add New L2 Header, Forward Packet</span>
<span class="na">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="na">â”‚ Ethernet Header â”‚ IP Header â”‚ Data           â”‚</span>
<span class="na">â”‚ Dst MAC</span><span class="o">:</span><span class="w"> </span><span class="s">Next Hopâ”‚ Dst IP: 10.0.0.50         â”‚</span>
<span class="na">â”‚ Src MAC</span><span class="o">:</span><span class="w"> </span><span class="s">Router  â”‚ Src IP: 192.168.1.10      â”‚</span>
<span class="na">â”‚ (Eth1 MAC)       â”‚ TTL</span><span class="o">:</span><span class="w"> </span><span class="s">63                   â”‚</span>
<span class="na">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="24-router-vs-l3-switch">2.4 Router vs L3 Switch<a class="header-link" href="#24-router-vs-l3-switch" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Router</th>
<th>L3 Switch</th>
</tr>
</thead>
<tbody>
<tr>
<td>Primary Use</td>
<td>WAN connectivity, complex routing</td>
<td>VLAN inter-routing in LAN</td>
</tr>
<tr>
<td>Processing Method</td>
<td>Software-based</td>
<td>Hardware (ASIC)-based</td>
</tr>
<tr>
<td>Port Count</td>
<td>Few (2-8)</td>
<td>Many (24-48)</td>
</tr>
<tr>
<td>Features</td>
<td>Rich (NAT, VPN, etc.)</td>
<td>Limited</td>
</tr>
<tr>
<td>Price</td>
<td>Expensive</td>
<td>Relatively cheaper</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="3-routing-table-structure">3. Routing Table Structure<a class="header-link" href="#3-routing-table-structure" title="Permanent link">&para;</a></h2>
<h3 id="31-components-of-routing-table">3.1 Components of Routing Table<a class="header-link" href="#31-components-of-routing-table" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">                         </span><span class="nv">Routing</span><span class="w"> </span><span class="nv">Table</span><span class="w">                                </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w"> </span><span class="nv">Destination</span><span class="w">  </span>â”‚<span class="w"> </span><span class="nv">Subnet</span><span class="w"> </span><span class="nv">Mask</span>â”‚<span class="w"> </span><span class="k">Next</span><span class="w"> </span><span class="nv">Hop</span><span class="w"> </span>â”‚<span class="w"> </span><span class="nv">Interface</span><span class="w"> </span>â”‚<span class="w"> </span><span class="nv">Metric</span><span class="o">/</span><span class="nv">Distance</span><span class="w"> </span>â”‚
â”‚<span class="w">   </span><span class="nv">Network</span><span class="w">    </span>â”‚<span class="w">            </span>â”‚<span class="w">          </span>â”‚<span class="w">           </span>â”‚<span class="w">                 </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w"> </span><span class="mi">10</span>.<span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">0</span><span class="w">     </span>â”‚<span class="w"> </span><span class="o">/</span><span class="mi">24</span><span class="w">        </span>â”‚<span class="w"> </span><span class="mi">192</span>.<span class="mi">168</span>.<span class="mi">1</span>.<span class="mi">1</span>â”‚<span class="w"> </span><span class="nv">Eth0</span><span class="w">    </span>â”‚<span class="w"> </span><span class="mi">10</span><span class="w">              </span>â”‚
â”‚<span class="w"> </span><span class="mi">172</span>.<span class="mi">16</span>.<span class="mi">0</span>.<span class="mi">0</span><span class="w">   </span>â”‚<span class="w"> </span><span class="o">/</span><span class="mi">16</span><span class="w">        </span>â”‚<span class="w"> </span><span class="mi">192</span>.<span class="mi">168</span>.<span class="mi">2</span>.<span class="mi">1</span>â”‚<span class="w"> </span><span class="nv">Eth1</span><span class="w">    </span>â”‚<span class="w"> </span><span class="mi">20</span><span class="w">              </span>â”‚
â”‚<span class="w"> </span><span class="mi">192</span>.<span class="mi">168</span>.<span class="mi">0</span>.<span class="mi">0</span><span class="w">  </span>â”‚<span class="w"> </span><span class="o">/</span><span class="mi">24</span><span class="w">        </span>â”‚<span class="w"> </span><span class="nv">directly</span><span class="w">  </span>â”‚<span class="w"> </span><span class="nv">Eth0</span><span class="w">     </span>â”‚<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ss">(</span><span class="nv">direct</span><span class="ss">)</span><span class="w">      </span>â”‚
â”‚<span class="w"> </span><span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">0</span><span class="w">      </span>â”‚<span class="w"> </span><span class="o">/</span><span class="mi">0</span><span class="w">         </span>â”‚<span class="w"> </span><span class="mi">203</span>.<span class="mi">0</span>.<span class="mi">113</span>.<span class="mi">1</span>â”‚<span class="w"> </span><span class="nv">Eth2</span><span class="w">    </span>â”‚<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="ss">(</span><span class="nv">default</span><span class="ss">)</span><span class="w">     </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="32-routing-table-entry-types">3.2 Routing Table Entry Types<a class="header-link" href="#32-routing-table-entry-types" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>Directly Connected (C)</td>
<td>Network directly connected to router</td>
<td>C 192.168.1.0/24</td>
</tr>
<tr>
<td>Static Route (S)</td>
<td>Manually configured by admin</td>
<td>S 10.0.0.0/8 via 192.168.1.1</td>
</tr>
<tr>
<td>Dynamic Route</td>
<td>Learned via routing protocol</td>
<td>R, O, B, etc.</td>
</tr>
<tr>
<td>Default Route (S*)</td>
<td>0.0.0.0/0 (default route)</td>
<td>S* 0.0.0.0/0 via 203.0.113.1</td>
</tr>
</tbody>
</table>
<h3 id="33-real-routing-table-examples">3.3 Real Routing Table Examples<a class="header-link" href="#33-real-routing-table-examples" title="Permanent link">&para;</a></h3>
<p><strong>Linux (ip route)</strong></p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>ip<span class="w"> </span>route<span class="w"> </span>show
default<span class="w"> </span>via<span class="w"> </span><span class="m">192</span>.168.1.1<span class="w"> </span>dev<span class="w"> </span>eth0<span class="w"> </span>proto<span class="w"> </span>dhcp<span class="w"> </span>metric<span class="w"> </span><span class="m">100</span>
<span class="m">10</span>.0.0.0/8<span class="w"> </span>via<span class="w"> </span><span class="m">192</span>.168.1.254<span class="w"> </span>dev<span class="w"> </span>eth0
<span class="m">172</span>.16.0.0/16<span class="w"> </span>via<span class="w"> </span><span class="m">192</span>.168.1.253<span class="w"> </span>dev<span class="w"> </span>eth0
<span class="m">192</span>.168.1.0/24<span class="w"> </span>dev<span class="w"> </span>eth0<span class="w"> </span>proto<span class="w"> </span>kernel<span class="w"> </span>scope<span class="w"> </span>link<span class="w"> </span>src<span class="w"> </span><span class="m">192</span>.168.1.10
<span class="m">192</span>.168.2.0/24<span class="w"> </span>dev<span class="w"> </span>eth1<span class="w"> </span>proto<span class="w"> </span>kernel<span class="w"> </span>scope<span class="w"> </span>link<span class="w"> </span>src<span class="w"> </span><span class="m">192</span>.168.2.1
</code></pre></div>

<p><strong>Cisco Router</strong></p>
<div class="highlight"><pre><span></span><code>Router# show ip route
Codes: C - connected, S - static, R - RIP, O - OSPF, B - BGP

Gateway of last resort is 203.0.113.1 to network 0.0.0.0

C    192.168.1.0/24 is directly connected, GigabitEthernet0/0
C    192.168.2.0/24 is directly connected, GigabitEthernet0/1
S    10.0.0.0/8 [1/0] via 192.168.1.254
O    172.16.0.0/16 [110/20] via 192.168.2.254, 00:05:32, Gi0/1
S*   0.0.0.0/0 [1/0] via 203.0.113.1
</code></pre></div>

<h3 id="34-metric-and-administrative-distance">3.4 Metric and Administrative Distance<a class="header-link" href="#34-metric-and-administrative-distance" title="Permanent link">&para;</a></h3>
<p><strong>Metric</strong>: Route preference within same protocol</p>
<div class="highlight"><pre><span></span><code><span class="n">Destination</span><span class="o">:</span><span class="w"> </span><span class="mf">10.0</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">24</span>
<span class="n">Route</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="w"> </span><span class="n">via</span><span class="w"> </span><span class="mf">192.168</span><span class="o">.</span><span class="mf">1.1</span><span class="w"> </span><span class="o">(</span><span class="n">metric</span><span class="o">:</span><span class="w"> </span><span class="mi">10</span><span class="o">)</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="n">Selected</span>
<span class="n">Route</span><span class="w"> </span><span class="mi">2</span><span class="o">:</span><span class="w"> </span><span class="n">via</span><span class="w"> </span><span class="mf">192.168</span><span class="o">.</span><span class="mf">2.1</span><span class="w"> </span><span class="o">(</span><span class="n">metric</span><span class="o">:</span><span class="w"> </span><span class="mi">20</span><span class="o">)</span>
</code></pre></div>

<p><strong>Administrative Distance (AD)</strong>: Trustworthiness between different protocols</p>
<table>
<thead>
<tr>
<th>Route Source</th>
<th>Administrative Distance</th>
</tr>
</thead>
<tbody>
<tr>
<td>Directly Connected</td>
<td>0</td>
</tr>
<tr>
<td>Static Route</td>
<td>1</td>
</tr>
<tr>
<td>EIGRP (internal)</td>
<td>90</td>
</tr>
<tr>
<td>OSPF</td>
<td>110</td>
</tr>
<tr>
<td>RIP</td>
<td>120</td>
</tr>
<tr>
<td>External BGP</td>
<td>20</td>
</tr>
<tr>
<td>Internal BGP</td>
<td>200</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code><span class="nv">Route</span><span class="w"> </span><span class="nv">Selection</span><span class="w"> </span><span class="nv">Example</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">Same</span><span class="w"> </span><span class="nv">Destination</span>

<span class="nv">Destination</span>:<span class="w"> </span><span class="mi">10</span>.<span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">0</span><span class="o">/</span><span class="mi">24</span>
<span class="nv">OSPF</span><span class="w"> </span><span class="nv">route</span>:<span class="w">   </span><span class="nv">AD</span><span class="o">=</span><span class="mi">110</span>,<span class="w"> </span><span class="nv">metric</span><span class="o">=</span><span class="mi">20</span>
<span class="nv">RIP</span><span class="w"> </span><span class="nv">route</span>:<span class="w">    </span><span class="nv">AD</span><span class="o">=</span><span class="mi">120</span>,<span class="w"> </span><span class="nv">metric</span><span class="o">=</span><span class="mi">2</span>
<span class="nv">Static</span><span class="w"> </span><span class="nv">route</span>:<span class="w"> </span><span class="nv">AD</span><span class="o">=</span><span class="mi">1</span>,<span class="w">   </span><span class="nv">metric</span><span class="o">=</span><span class="mi">0</span>

<span class="nv">Selected</span>:<span class="w"> </span><span class="nv">Static</span><span class="w"> </span><span class="nv">route</span><span class="w"> </span><span class="ss">(</span><span class="nv">lowest</span><span class="w"> </span><span class="nv">AD</span><span class="ss">)</span>
</code></pre></div>

<hr />
<h2 id="4-static-routing-vs-dynamic-routing">4. Static Routing vs Dynamic Routing<a class="header-link" href="#4-static-routing-vs-dynamic-routing" title="Permanent link">&para;</a></h2>
<h3 id="41-static-routing">4.1 Static Routing<a class="header-link" href="#41-static-routing" title="Permanent link">&para;</a></h3>
<p>Administrator manually configures routes.</p>
<div class="highlight"><pre><span></span><code>                      Static Routing Configuration

       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚  R1     â”‚              â”‚  R2     â”‚
       â”‚         â”‚ 10.0.0.0/30  â”‚         â”‚
       â”‚ .1â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€.2         â”‚
       â”‚         â”‚              â”‚         â”‚
  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”   â”‚              â”‚   â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”
  â”‚192.168.1.0â”‚  â”‚              â”‚   â”‚172.16.0.0â”‚
  â”‚   /24     â”‚  â”‚              â”‚   â”‚  /16     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚              â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

R1 Configuration:
ip route 172.16.0.0 255.255.0.0 10.0.0.2

R2 Configuration:
ip route 192.168.1.0 255.255.255.0 10.0.0.1
</code></pre></div>

<p><strong>Advantages</strong>:
- Simple configuration
- No CPU/memory overhead
- Security (no routing information exchange)
- Bandwidth saving</p>
<p><strong>Disadvantages</strong>:
- Manual update required for network changes
- Difficult to manage in large networks
- No automatic failover</p>
<p><strong>Use Cases</strong>:
- Small networks
- Stub networks with single path
- Default gateway configuration
- Security-critical segments</p>
<h3 id="42-dynamic-routing">4.2 Dynamic Routing<a class="header-link" href="#42-dynamic-routing" title="Permanent link">&para;</a></h3>
<p>Routing protocols automatically learn and update routes.</p>
<div class="highlight"><pre><span></span><code>                      Dynamic Routing Operation

       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚  R1     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  R2     â”‚
       â”‚ OSPF    â”‚ Routing Info â”‚ OSPF    â”‚
       â”‚         â”‚   Exchange   â”‚         â”‚
       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
            â”‚                        â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
     â”‚192.168.1.0/24â”‚         â”‚172.16.0.0/16â”‚
     â”‚   Advertise â”‚         â”‚  Advertise  â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

R1 and R2 automatically learn each other&#39;s networks
</code></pre></div>

<p><strong>Advantages</strong>:
- Automatic route learning and updates
- Automatic failover
- Easy management of large networks
- Adapts to network changes</p>
<p><strong>Disadvantages</strong>:
- CPU/memory usage
- Bandwidth consumption (routing updates)
- Complex configuration
- Security considerations needed</p>
<h3 id="43-comparison-summary">4.3 Comparison Summary<a class="header-link" href="#43-comparison-summary" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Static Routing</th>
<th>Dynamic Routing</th>
</tr>
</thead>
<tbody>
<tr>
<td>Configuration</td>
<td>Manual</td>
<td>Automatic</td>
</tr>
<tr>
<td>Scalability</td>
<td>Low</td>
<td>High</td>
</tr>
<tr>
<td>Fault Response</td>
<td>Manual</td>
<td>Automatic</td>
</tr>
<tr>
<td>Resource Usage</td>
<td>Low</td>
<td>High</td>
</tr>
<tr>
<td>Security</td>
<td>High</td>
<td>Requires configuration</td>
</tr>
<tr>
<td>Management Complexity</td>
<td>Small: Low / Large: High</td>
<td>Initial: High / Operation: Low</td>
</tr>
</tbody>
</table>
<h3 id="44-hybrid-approach">4.4 Hybrid Approach<a class="header-link" href="#44-hybrid-approach" title="Permanent link">&para;</a></h3>
<p>Real networks often use both approaches together.</p>
<div class="highlight"><pre><span></span><code>                     Enterprise Network Example

        ISP                                    ISP
         â”‚                                      â”‚
    Static route                           Static route
    (default gateway)                      (default gateway)
         â”‚                                      â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                           â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚ HQ      â”‚â—„â”€â”€â”€â”€â”€â”€â”€ OSPF â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Branch  â”‚
    â”‚ Router  â”‚      (Dynamic Routing)     â”‚ Router  â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                           â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚                                      â”‚
    Internal Network                      Internal Network
</code></pre></div>

<hr />
<h2 id="5-default-gateway">5. Default Gateway<a class="header-link" href="#5-default-gateway" title="Permanent link">&para;</a></h2>
<h3 id="51-what-is-default-gateway">5.1 What is Default Gateway?<a class="header-link" href="#51-what-is-default-gateway" title="Permanent link">&para;</a></h3>
<p>Default Gateway is the IP address of the router used by hosts to send packets to other networks.</p>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     PC Network Configuration                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  IP Address:       192.168.1.100                            â”‚
â”‚  Subnet Mask:      255.255.255.0                            â”‚
â”‚  Default Gateway:  192.168.1.1  â—„â”€â”€ Router&#39;s LAN Interface â”‚
â”‚  DNS Server:       8.8.8.8                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="52-default-gateway-operation">5.2 Default Gateway Operation<a class="header-link" href="#52-default-gateway-operation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nv">Destination</span><span class="w"> </span><span class="nv">Determination</span><span class="w"> </span><span class="nv">Process</span>

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">                 </span><span class="nv">PC</span><span class="w"> </span><span class="ss">(</span><span class="mi">192</span>.<span class="mi">168</span>.<span class="mi">1</span>.<span class="mi">100</span><span class="o">/</span><span class="mi">24</span><span class="ss">)</span><span class="w">                    </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                          </span>â”‚
â”‚<span class="w">  </span><span class="nv">Packet</span><span class="w"> </span><span class="nv">transmission</span><span class="w"> </span><span class="nv">request</span>:<span class="w"> </span><span class="nv">destination</span><span class="w"> </span><span class="mi">10</span>.<span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">50</span><span class="w">      </span>â”‚
â”‚<span class="w">                                                          </span>â”‚
â”‚<span class="w">  </span><span class="mi">1</span>.<span class="w"> </span><span class="nv">Is</span><span class="w"> </span><span class="nv">destination</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">network</span>?<span class="w">                      </span>â”‚
â”‚<span class="w">     </span>â””â”€<span class="w"> </span><span class="nv">Destination</span><span class="w"> </span><span class="nv">IP</span><span class="w"> </span><span class="nv">AND</span><span class="w"> </span><span class="nv">my</span><span class="w"> </span><span class="nv">subnet</span><span class="w"> </span><span class="nv">mask</span><span class="w">                 </span>â”‚
â”‚<span class="w">        </span><span class="mi">10</span>.<span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">50</span><span class="w"> </span><span class="nv">AND</span><span class="w"> </span><span class="mi">255</span>.<span class="mi">255</span>.<span class="mi">255</span>.<span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span>.<span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">0</span><span class="w">           </span>â”‚
â”‚<span class="w">     </span>â””â”€<span class="w"> </span><span class="nv">My</span><span class="w"> </span><span class="nv">network</span>:<span class="w"> </span><span class="mi">192</span>.<span class="mi">168</span>.<span class="mi">1</span>.<span class="mi">0</span><span class="w">                          </span>â”‚
â”‚<span class="w">     </span>â””â”€<span class="w"> </span><span class="mi">10</span>.<span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">0</span><span class="w"> </span>â‰ <span class="w"> </span><span class="mi">192</span>.<span class="mi">168</span>.<span class="mi">1</span>.<span class="mi">0</span><span class="w"> </span>â†’<span class="w"> </span><span class="nv">Different</span><span class="w"> </span><span class="nv">network</span><span class="o">!</span><span class="w">     </span>â”‚
â”‚<span class="w">                                                          </span>â”‚
â”‚<span class="w">  </span><span class="mi">2</span>.<span class="w"> </span><span class="k">Send</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">default</span><span class="w"> </span><span class="nv">gateway</span><span class="w">                              </span>â”‚
â”‚<span class="w">     </span>â””â”€<span class="w"> </span><span class="nv">Destination</span><span class="w"> </span><span class="nv">IP</span>:<span class="w"> </span><span class="mi">10</span>.<span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">50</span><span class="w"> </span><span class="ss">(</span><span class="nv">unchanged</span><span class="ss">)</span><span class="w">            </span>â”‚
â”‚<span class="w">     </span>â””â”€<span class="w"> </span><span class="nv">Destination</span><span class="w"> </span><span class="nv">MAC</span>:<span class="w"> </span><span class="nv">Gateway</span><span class="w"> </span><span class="nv">MAC</span><span class="w"> </span><span class="ss">(</span><span class="nv">via</span><span class="w"> </span><span class="nv">ARP</span><span class="ss">)</span><span class="w">           </span>â”‚
â”‚<span class="w">                                                          </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="w">                          </span>â”‚
<span class="w">                          </span>â–¼
<span class="w">                    </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
<span class="w">                    </span>â”‚<span class="w">  </span><span class="nv">Router</span><span class="w">   </span>â”‚
<span class="w">                    </span>â”‚<span class="mi">192</span>.<span class="mi">168</span>.<span class="mi">1</span>.<span class="mi">1</span>â”‚
<span class="w">                    </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="w">                          </span>â”‚
<span class="w">                    </span><span class="nv">Forward</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">other</span><span class="w"> </span><span class="nv">network</span>
</code></pre></div>

<h3 id="53-default-route">5.3 Default Route<a class="header-link" href="#53-default-route" title="Permanent link">&para;</a></h3>
<p>Router's default route is represented as 0.0.0.0/0.</p>
<div class="highlight"><pre><span></span><code><span class="nv">Default</span><span class="w"> </span><span class="nv">Route</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">Routing</span><span class="w"> </span><span class="nv">Table</span>

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w"> </span><span class="nv">Destination</span><span class="w">     </span>â”‚<span class="w"> </span><span class="k">Next</span><span class="w"> </span><span class="nv">Hop</span><span class="w">      </span>â”‚<span class="w"> </span><span class="nv">Interface</span><span class="w">           </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w"> </span><span class="mi">192</span>.<span class="mi">168</span>.<span class="mi">1</span>.<span class="mi">0</span><span class="o">/</span><span class="mi">24</span><span class="w">  </span>â”‚<span class="w"> </span><span class="nv">directly</span><span class="w">      </span>â”‚<span class="w"> </span><span class="nv">Eth0</span><span class="w">               </span>â”‚
â”‚<span class="w"> </span><span class="mi">10</span>.<span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">0</span><span class="o">/</span><span class="mi">24</span><span class="w">     </span>â”‚<span class="w"> </span><span class="mi">192</span>.<span class="mi">168</span>.<span class="mi">2</span>.<span class="mi">1</span><span class="w">   </span>â”‚<span class="w"> </span><span class="nv">Eth1</span><span class="w">               </span>â”‚
â”‚<span class="w"> </span><span class="mi">172</span>.<span class="mi">16</span>.<span class="mi">0</span>.<span class="mi">0</span><span class="o">/</span><span class="mi">16</span><span class="w">   </span>â”‚<span class="w"> </span><span class="mi">192</span>.<span class="mi">168</span>.<span class="mi">2</span>.<span class="mi">2</span><span class="w">   </span>â”‚<span class="w"> </span><span class="nv">Eth1</span><span class="w">               </span>â”‚
â”‚<span class="w"> </span><span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="w">       </span>â”‚<span class="w"> </span><span class="mi">203</span>.<span class="mi">0</span>.<span class="mi">113</span>.<span class="mi">1</span><span class="w">   </span>â”‚<span class="w"> </span><span class="nv">Eth2</span><span class="w">  </span>â†<span class="w"> </span><span class="nv">Default</span><span class="w"> </span><span class="nv">route</span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

<span class="nv">Packet</span><span class="w"> </span><span class="nv">Processing</span>:
<span class="o">-</span><span class="w"> </span><span class="mi">192</span>.<span class="mi">168</span>.<span class="mi">1</span>.<span class="mi">50</span><span class="w"> </span>â†’<span class="w"> </span><span class="nv">Forward</span><span class="w"> </span><span class="nv">directly</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">Eth0</span>
<span class="o">-</span><span class="w"> </span><span class="mi">10</span>.<span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">100</span><span class="w">   </span>â†’<span class="w"> </span><span class="nv">Forward</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="mi">192</span>.<span class="mi">168</span>.<span class="mi">2</span>.<span class="mi">1</span>
<span class="o">-</span><span class="w"> </span><span class="mi">8</span>.<span class="mi">8</span>.<span class="mi">8</span>.<span class="mi">8</span><span class="w">      </span>â†’<span class="w"> </span><span class="nv">No</span><span class="w"> </span><span class="nv">matching</span><span class="w"> </span><span class="nv">route</span><span class="w"> </span>â†’<span class="w"> </span><span class="nv">Use</span><span class="w"> </span><span class="nv">default</span><span class="w"> </span><span class="nv">route</span>
<span class="w">                 </span><span class="nv">Forward</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="mi">203</span>.<span class="mi">0</span>.<span class="mi">113</span>.<span class="mi">1</span>
</code></pre></div>

<h3 id="54-multiple-gateways">5.4 Multiple Gateways<a class="header-link" href="#54-multiple-gateways" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>               Load Balancing / Fault Tolerance

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Router 1  â”‚         â”‚ Router 2  â”‚
    â”‚192.168.1.1â”‚         â”‚192.168.1.2â”‚
    â”‚ (primary) â”‚         â”‚ (backup)  â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
          â”‚                     â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
              â”‚   Switch    â”‚
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                â”‚                â”‚
 â”Œâ”€â”€â”´â”€â”€â”          â”Œâ”€â”€â”´â”€â”€â”          â”Œâ”€â”€â”´â”€â”€â”
 â”‚ PC1 â”‚          â”‚ PC2 â”‚          â”‚ PC3 â”‚
 â”‚GW:.1â”‚          â”‚GW:.1â”‚          â”‚GW:.2â”‚
 â””â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<p><strong>VRRP/HSRP</strong>: Gateway redundancy via virtual IP</p>
<div class="highlight"><pre><span></span><code><span class="nv">Virtual</span><span class="w"> </span><span class="nv">IP</span>:<span class="w"> </span><span class="mi">192</span>.<span class="mi">168</span>.<span class="mi">1</span>.<span class="mi">254</span><span class="w"> </span><span class="ss">(</span><span class="nv">VRRP</span><span class="ss">)</span>
<span class="nv">Router</span><span class="w"> </span><span class="mi">1</span>:<span class="w"> </span><span class="mi">192</span>.<span class="mi">168</span>.<span class="mi">1</span>.<span class="mi">1</span><span class="w"> </span><span class="ss">(</span><span class="nv">Master</span><span class="ss">)</span>
<span class="nv">Router</span><span class="w"> </span><span class="mi">2</span>:<span class="w"> </span><span class="mi">192</span>.<span class="mi">168</span>.<span class="mi">1</span>.<span class="mi">2</span><span class="w"> </span><span class="ss">(</span><span class="nv">Backup</span><span class="ss">)</span>

<span class="nv">All</span><span class="w"> </span><span class="nv">PCs</span><span class="err">&#39; gateway: 192.168.1.254</span>
<span class="err">â†’ Automatically switches to Router 2 if Router 1 fails</span>
</code></pre></div>

<hr />
<h2 id="6-longest-prefix-match">6. Longest Prefix Match<a class="header-link" href="#6-longest-prefix-match" title="Permanent link">&para;</a></h2>
<h3 id="61-concept">6.1 Concept<a class="header-link" href="#61-concept" title="Permanent link">&para;</a></h3>
<p>Select the route that most specifically matches the destination IP from the routing table.</p>
<div class="highlight"><pre><span></span><code><span class="nv">Longest</span><span class="w"> </span><span class="nv">Prefix</span><span class="w"> </span><span class="nv">Match</span><span class="w"> </span><span class="nv">Principle</span>

<span class="nv">Routing</span><span class="w"> </span><span class="nv">Table</span>:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w"> </span><span class="nv">Destination</span><span class="w">     </span>â”‚<span class="w"> </span><span class="k">Next</span><span class="w"> </span><span class="nv">Hop</span><span class="w">      </span>â”‚
â”‚<span class="w">   </span><span class="nv">Network</span><span class="w">       </span>â”‚<span class="w">               </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w"> </span><span class="mi">10</span>.<span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">0</span><span class="o">/</span><span class="mi">8</span><span class="w">      </span>â”‚<span class="w"> </span><span class="nv">Router</span><span class="w"> </span><span class="nv">A</span><span class="w">      </span>â”‚
â”‚<span class="w"> </span><span class="mi">10</span>.<span class="mi">1</span>.<span class="mi">0</span>.<span class="mi">0</span><span class="o">/</span><span class="mi">16</span><span class="w">     </span>â”‚<span class="w"> </span><span class="nv">Router</span><span class="w"> </span><span class="nv">B</span><span class="w">      </span>â”‚
â”‚<span class="w"> </span><span class="mi">10</span>.<span class="mi">1</span>.<span class="mi">1</span>.<span class="mi">0</span><span class="o">/</span><span class="mi">24</span><span class="w">     </span>â”‚<span class="w"> </span><span class="nv">Router</span><span class="w"> </span><span class="nv">C</span><span class="w">      </span>â”‚
â”‚<span class="w"> </span><span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="w">       </span>â”‚<span class="w"> </span><span class="nv">Router</span><span class="w"> </span><span class="nv">D</span><span class="w">      </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

<span class="nv">Destination</span>:<span class="w"> </span><span class="mi">10</span>.<span class="mi">1</span>.<span class="mi">1</span>.<span class="mi">100</span>

<span class="nv">Match</span><span class="w"> </span><span class="nv">Analysis</span>:
<span class="o">-</span><span class="w"> </span><span class="mi">10</span>.<span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">0</span><span class="o">/</span><span class="mi">8</span><span class="w">     </span><span class="nv">match</span><span class="w"> </span><span class="ss">(</span><span class="mi">8</span><span class="w"> </span><span class="nv">bits</span><span class="ss">)</span><span class="w">   </span>âœ“
<span class="o">-</span><span class="w"> </span><span class="mi">10</span>.<span class="mi">1</span>.<span class="mi">0</span>.<span class="mi">0</span><span class="o">/</span><span class="mi">16</span><span class="w">    </span><span class="nv">match</span><span class="w"> </span><span class="ss">(</span><span class="mi">16</span><span class="w"> </span><span class="nv">bits</span><span class="ss">)</span><span class="w">  </span>âœ“âœ“
<span class="o">-</span><span class="w"> </span><span class="mi">10</span>.<span class="mi">1</span>.<span class="mi">1</span>.<span class="mi">0</span><span class="o">/</span><span class="mi">24</span><span class="w">    </span><span class="nv">match</span><span class="w"> </span><span class="ss">(</span><span class="mi">24</span><span class="w"> </span><span class="nv">bits</span><span class="ss">)</span><span class="w">  </span>âœ“âœ“âœ“<span class="w"> </span>â†<span class="w"> </span><span class="nv">Selected</span><span class="w"> </span><span class="ss">(</span><span class="nv">longest</span><span class="w"> </span><span class="nv">match</span><span class="ss">)</span>
<span class="o">-</span><span class="w"> </span><span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="w">      </span><span class="nv">match</span><span class="w"> </span><span class="ss">(</span><span class="mi">0</span><span class="w"> </span><span class="nv">bits</span><span class="ss">)</span><span class="w">   </span>âœ“

<span class="nb">Result</span>:<span class="w"> </span><span class="nv">Forward</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">Router</span><span class="w"> </span><span class="nv">C</span>
</code></pre></div>

<h3 id="62-understanding-in-binary">6.2 Understanding in Binary<a class="header-link" href="#62-understanding-in-binary" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>Destination IP: 10.1.1.100 = 00001010.00000001.00000001.01100100

10.0.0.0/8:
  00001010.xxxxxxxx.xxxxxxxx.xxxxxxxx
  ^^^^^^^^ (8 bits match)

10.1.0.0/16:
  00001010.00000001.xxxxxxxx.xxxxxxxx
  ^^^^^^^^.^^^^^^^^ (16 bits match)

10.1.1.0/24:
  00001010.00000001.00000001.xxxxxxxx
  ^^^^^^^^.^^^^^^^^.^^^^^^^^ (24 bits match) â† Longest match
</code></pre></div>

<h3 id="63-importance-of-longest-prefix-match">6.3 Importance of Longest Prefix Match<a class="header-link" href="#63-importance-of-longest-prefix-match" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Example</span><span class="o">:</span><span class="w"> </span><span class="n">Traffic</span><span class="w"> </span><span class="n">Engineering</span>

<span class="n">Internet</span><span class="w"> </span><span class="n">Traffic</span><span class="w"> </span><span class="n">Path</span><span class="w"> </span><span class="n">Control</span>

<span class="w">                        </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="w">                        </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Internet</span><span class="w"> </span><span class="err">â”‚</span>
<span class="w">                        </span><span class="err">â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜</span>
<span class="w">                             </span><span class="err">â”‚</span>
<span class="w">              </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="w">              </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span>
<span class="w">         </span><span class="err">â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”</span>
<span class="w">         </span><span class="err">â”‚</span><span class="w"> </span><span class="n">ISP</span><span class="w"> </span><span class="n">A</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">ISP</span><span class="w"> </span><span class="n">B</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">ISP</span><span class="w"> </span><span class="n">C</span><span class="w">   </span><span class="err">â”‚</span>
<span class="w">         </span><span class="err">â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜</span>
<span class="w">              </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span>
<span class="w">              </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
<span class="w">                             </span><span class="err">â”‚</span>
<span class="w">                      </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”</span>
<span class="w">                      </span><span class="err">â”‚</span><span class="n">Enterprise</span><span class="w">   </span><span class="err">â”‚</span>
<span class="w">                      </span><span class="err">â”‚</span><span class="w">   </span><span class="n">Router</span><span class="w">    </span><span class="err">â”‚</span>
<span class="w">                      </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span>
<span class="w">                      </span><span class="err">â”‚</span><span class="n">Routing</span><span class="w"> </span><span class="n">Policy</span><span class="o">:</span><span class="err">â”‚</span>
<span class="w">                      </span><span class="err">â”‚</span><span class="w"> </span><span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">0</span><span class="w">    </span><span class="err">â”‚</span>
<span class="w">                      </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â†’</span><span class="w"> </span><span class="n">ISP</span><span class="w"> </span><span class="n">A</span><span class="w">    </span><span class="err">â”‚</span>
<span class="w">                      </span><span class="err">â”‚</span><span class="w"> </span><span class="mf">8.8</span><span class="o">.</span><span class="mf">8.0</span><span class="o">/</span><span class="mi">24</span><span class="w">   </span><span class="err">â”‚</span>
<span class="w">                      </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â†’</span><span class="w"> </span><span class="n">ISP</span><span class="w"> </span><span class="n">B</span><span class="w">    </span><span class="err">â”‚</span>
<span class="w">                      </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="n">Accessing</span><span class="w"> </span><span class="n">Google</span><span class="w"> </span><span class="n">DNS</span><span class="w"> </span><span class="o">(</span><span class="mf">8.8</span><span class="o">.</span><span class="mf">8.8</span><span class="o">):</span>
<span class="o">-</span><span class="w"> </span><span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">0</span><span class="w"> </span><span class="o">(</span><span class="n">ISP</span><span class="w"> </span><span class="n">A</span><span class="o">)</span><span class="w"> </span><span class="n">matches</span>
<span class="o">-</span><span class="w"> </span><span class="mf">8.8</span><span class="o">.</span><span class="mf">8.0</span><span class="o">/</span><span class="mi">24</span><span class="w"> </span><span class="o">(</span><span class="n">ISP</span><span class="w"> </span><span class="n">B</span><span class="o">)</span><span class="w"> </span><span class="n">matches</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="n">Selected</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">longest</span><span class="w"> </span><span class="n">match</span>
</code></pre></div>

<h3 id="64-route-summarization">6.4 Route Summarization<a class="header-link" href="#64-route-summarization" title="Permanent link">&para;</a></h3>
<p>Using longest prefix match for route summarization:</p>
<div class="highlight"><pre><span></span><code>Before Summarization              After Summarization

192.168.0.0/24 â†’ R1            192.168.0.0/22 â†’ R1
192.168.1.0/24 â†’ R1               (4 networks into 1)
192.168.2.0/24 â†’ R1
192.168.3.0/24 â†’ R1

Advantages:
- Reduced routing table size
- Reduced routing updates
- Improved network stability
</code></pre></div>

<hr />
<h2 id="7-practice-problems">7. Practice Problems<a class="header-link" href="#7-practice-problems" title="Permanent link">&para;</a></h2>
<h3 id="problem-1-routing-table-analysis">Problem 1: Routing Table Analysis<a class="header-link" href="#problem-1-routing-table-analysis" title="Permanent link">&para;</a></h3>
<p>Analyze the following routing table and answer the questions.</p>
<div class="highlight"><pre><span></span><code>Router# show ip route
C    192.168.1.0/24 is directly connected, Eth0
C    192.168.2.0/24 is directly connected, Eth1
S    10.0.0.0/8 [1/0] via 192.168.1.254
S    172.16.0.0/16 [1/0] via 192.168.2.254
O    172.16.10.0/24 [110/20] via 192.168.2.253
S*   0.0.0.0/0 [1/0] via 192.168.1.1
</code></pre></div>

<p>a) What is the next hop for packets to destination 10.10.10.10?
b) What is the next hop for packets to destination 172.16.10.50?
c) What is the next hop for packets to destination 8.8.8.8?
d) What do C, S, and O mean?</p>
<h3 id="problem-2-static-routing-configuration">Problem 2: Static Routing Configuration<a class="header-link" href="#problem-2-static-routing-configuration" title="Permanent link">&para;</a></h3>
<p>Write the necessary static routing commands for R1 and R2 in the following network.</p>
<div class="highlight"><pre><span></span><code>Network A          R1           R2          Network B
192.168.1.0/24 â”€â”€[.1]â”€â”€[.2]â”€â”€[.1]â”€â”€[.2]â”€â”€ 10.0.0.0/24
                   192.168.100.0/30
</code></pre></div>

<h3 id="problem-3-longest-prefix-match">Problem 3: Longest Prefix Match<a class="header-link" href="#problem-3-longest-prefix-match" title="Permanent link">&para;</a></h3>
<p>Determine the next hop for each destination IP using the following routing table.</p>
<div class="highlight"><pre><span></span><code>Routing Table:
- 0.0.0.0/0      â†’ 10.0.0.1
- 10.0.0.0/8     â†’ 10.0.0.2
- 10.10.0.0/16   â†’ 10.0.0.3
- 10.10.10.0/24  â†’ 10.0.0.4
- 10.10.10.128/25â†’ 10.0.0.5
</code></pre></div>

<p>a) 10.10.10.200
b) 10.10.10.50
c) 10.10.20.100
d) 10.20.30.40
e) 8.8.8.8</p>
<h3 id="problem-4-network-design">Problem 4: Network Design<a class="header-link" href="#problem-4-network-design" title="Permanent link">&para;</a></h3>
<p>Design routing for a company with 3 branch offices.</p>
<div class="highlight"><pre><span></span><code>         HQ
    192.168.0.0/24
           â”‚
      â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
      â”‚ Core R  â”‚
      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”Œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”
     â”‚     â”‚     â”‚
  Branch A Branch B Branch C
 10.1.0/24 10.2.0/24 10.3.0/24
</code></pre></div>

<p>Write the necessary static routes for each router.</p>
<hr />
<h2 id="answers">Answers<a class="header-link" href="#answers" title="Permanent link">&para;</a></h2>
<h3 id="problem-1-answers">Problem 1 Answers<a class="header-link" href="#problem-1-answers" title="Permanent link">&para;</a></h3>
<p>a) <strong>192.168.1.254</strong> (matches 10.0.0.0/8 route)
b) <strong>192.168.2.253</strong> (172.16.10.0/24 is more specific than 172.16.0.0/16, OSPF route)
c) <strong>192.168.1.1</strong> (uses default route 0.0.0.0/0)
d)
   - C: Connected (directly connected)
   - S: Static (static route)
   - O: OSPF (dynamic routing protocol)</p>
<h3 id="problem-2-answers">Problem 2 Answers<a class="header-link" href="#problem-2-answers" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">R1</span><span class="o">:</span>
<span class="n">ip</span><span class="w"> </span><span class="n">route</span><span class="w"> </span><span class="mf">10.0</span><span class="o">.</span><span class="mf">0.0</span><span class="w"> </span><span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span><span class="w"> </span><span class="mf">192.168</span><span class="o">.</span><span class="mf">100.2</span>

<span class="n">R2</span><span class="o">:</span>
<span class="n">ip</span><span class="w"> </span><span class="n">route</span><span class="w"> </span><span class="mf">192.168</span><span class="o">.</span><span class="mf">1.0</span><span class="w"> </span><span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span><span class="w"> </span><span class="mf">192.168</span><span class="o">.</span><span class="mf">100.1</span>
</code></pre></div>

<h3 id="problem-3-answers">Problem 3 Answers<a class="header-link" href="#problem-3-answers" title="Permanent link">&para;</a></h3>
<p>a) 10.10.10.200 â†’ <strong>10.0.0.5</strong> (matches 10.10.10.128/25, 200 is in 128-255 range)
b) 10.10.10.50 â†’ <strong>10.0.0.4</strong> (matches 10.10.10.0/24, 50 is in 0-127 range)
c) 10.10.20.100 â†’ <strong>10.0.0.3</strong> (matches 10.10.0.0/16)
d) 10.20.30.40 â†’ <strong>10.0.0.2</strong> (matches 10.0.0.0/8)
e) 8.8.8.8 â†’ <strong>10.0.0.1</strong> (matches default route)</p>
<h3 id="problem-4-answers">Problem 4 Answers<a class="header-link" href="#problem-4-answers" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Core</span><span class="w"> </span><span class="nl">Router</span><span class="p">:</span>
<span class="err">#</span><span class="w"> </span><span class="n">Directly</span><span class="w"> </span><span class="n">connected</span><span class="w"> </span><span class="n">networks</span><span class="w"> </span><span class="k">are</span><span class="w"> </span><span class="n">automatically</span><span class="w"> </span><span class="n">added</span>
<span class="err">#</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="n">route</span><span class="w"> </span><span class="p">(</span><span class="k">to</span><span class="w"> </span><span class="n">Internet</span><span class="p">)</span>
<span class="n">ip</span><span class="w"> </span><span class="n">route</span><span class="w"> </span><span class="mf">0.0.0.0</span><span class="w"> </span><span class="mf">0.0.0.0</span><span class="w"> </span><span class="o">[</span><span class="n">ISP-Gateway</span><span class="o">]</span>

<span class="n">Branch</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="nl">Router</span><span class="p">:</span>
<span class="n">ip</span><span class="w"> </span><span class="n">route</span><span class="w"> </span><span class="mf">192.168.0.0</span><span class="w"> </span><span class="mf">255.255.255.0</span><span class="w"> </span><span class="o">[</span><span class="n">CoreRouterIP</span><span class="o">]</span>
<span class="n">ip</span><span class="w"> </span><span class="n">route</span><span class="w"> </span><span class="mf">10.2.0.0</span><span class="w"> </span><span class="mf">255.255.255.0</span><span class="w"> </span><span class="o">[</span><span class="n">CoreRouterIP</span><span class="o">]</span>
<span class="n">ip</span><span class="w"> </span><span class="n">route</span><span class="w"> </span><span class="mf">10.3.0.0</span><span class="w"> </span><span class="mf">255.255.255.0</span><span class="w"> </span><span class="o">[</span><span class="n">CoreRouterIP</span><span class="o">]</span>
<span class="n">ip</span><span class="w"> </span><span class="n">route</span><span class="w"> </span><span class="mf">0.0.0.0</span><span class="w"> </span><span class="mf">0.0.0.0</span><span class="w"> </span><span class="o">[</span><span class="n">CoreRouterIP</span><span class="o">]</span>

<span class="err">#</span><span class="w"> </span><span class="ow">Or</span><span class="w"> </span><span class="nl">simply</span><span class="p">:</span>
<span class="n">ip</span><span class="w"> </span><span class="n">route</span><span class="w"> </span><span class="mf">0.0.0.0</span><span class="w"> </span><span class="mf">0.0.0.0</span><span class="w"> </span><span class="o">[</span><span class="n">CoreRouterIP</span><span class="o">]</span>

<span class="n">Branch</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="n">follow</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">pattern</span>
</code></pre></div>

<hr />
<h2 id="8-next-steps">8. Next Steps<a class="header-link" href="#8-next-steps" title="Permanent link">&para;</a></h2>
<p>Once you understand routing basics, proceed to the next topic.</p>
<h3 id="next-lesson">Next Lesson<a class="header-link" href="#next-lesson" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="./09_Routing_Protocols.md">09_Routing_Protocols.md</a> - RIP, OSPF, BGP</li>
</ul>
<h3 id="related-lessons">Related Lessons<a class="header-link" href="#related-lessons" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="./07_Subnetting_Practice.md">07_Subnetting_Practice.md</a> - Subnet calculations</li>
<li><a href="./10_TCP_Protocol.md">10_TCP_Protocol.md</a> - TCP communication</li>
</ul>
<h3 id="recommended-practice">Recommended Practice<a class="header-link" href="#recommended-practice" title="Permanent link">&para;</a></h3>
<ol>
<li>Check your routing table with <code>ip route</code> or <code>route print</code></li>
<li>Trace Internet paths with <code>traceroute</code></li>
<li>Configure static routing in Packet Tracer</li>
</ol>
<hr />
<h2 id="9-references">9. References<a class="header-link" href="#9-references" title="Permanent link">&para;</a></h2>
<h3 id="command-reference">Command Reference<a class="header-link" href="#command-reference" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Linux - Check routing table</span>
ip<span class="w"> </span>route<span class="w"> </span>show
route<span class="w"> </span>-n
netstat<span class="w"> </span>-rn

<span class="c1"># macOS</span>
netstat<span class="w"> </span>-rn

<span class="c1"># Windows</span>
route<span class="w"> </span>print
netstat<span class="w"> </span>-rn

<span class="c1"># Path tracing</span>
traceroute<span class="w"> </span>google.com<span class="w">      </span><span class="c1"># Linux/macOS</span>
tracert<span class="w"> </span>google.com<span class="w">         </span><span class="c1"># Windows</span>

<span class="c1"># Add static route (Linux)</span>
sudo<span class="w"> </span>ip<span class="w"> </span>route<span class="w"> </span>add<span class="w"> </span><span class="m">10</span>.0.0.0/8<span class="w"> </span>via<span class="w"> </span><span class="m">192</span>.168.1.1
sudo<span class="w"> </span>ip<span class="w"> </span>route<span class="w"> </span>del<span class="w"> </span><span class="m">10</span>.0.0.0/8

<span class="c1"># Add static route (Windows)</span>
route<span class="w"> </span>add<span class="w"> </span><span class="m">10</span>.0.0.0<span class="w"> </span>mask<span class="w"> </span><span class="m">255</span>.0.0.0<span class="w"> </span><span class="m">192</span>.168.1.1
route<span class="w"> </span>delete<span class="w"> </span><span class="m">10</span>.0.0.0
</code></pre></div>

<h3 id="learning-resources">Learning Resources<a class="header-link" href="#learning-resources" title="Permanent link">&para;</a></h3>
<ul>
<li>RFC 1812 - Requirements for IP Version 4 Routers</li>
<li>Cisco Networking Academy - Routing Concepts</li>
<li><a href="https://www.juniper.net/documentation/">Juniper Networks - Understanding Routing</a></li>
</ul>
<h3 id="cisco-ios-commands">Cisco IOS Commands<a class="header-link" href="#cisco-ios-commands" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>#<span class="w"> </span><span class="nv">Check</span><span class="w"> </span><span class="nv">routing</span><span class="w"> </span><span class="nv">table</span>
<span class="k">show</span><span class="w"> </span><span class="nv">ip</span><span class="w"> </span><span class="nv">route</span>
<span class="k">show</span><span class="w"> </span><span class="nv">ip</span><span class="w"> </span><span class="nv">route</span><span class="w"> </span><span class="nv">summary</span>

#<span class="w"> </span><span class="nv">Configure</span><span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="nv">route</span>
<span class="nv">ip</span><span class="w"> </span><span class="nv">route</span><span class="w"> </span><span class="mi">10</span>.<span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">0</span><span class="w"> </span><span class="mi">255</span>.<span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">0</span><span class="w"> </span><span class="mi">192</span>.<span class="mi">168</span>.<span class="mi">1</span>.<span class="mi">1</span>
<span class="nv">ip</span><span class="w"> </span><span class="nv">route</span><span class="w"> </span><span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">0</span><span class="w"> </span><span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">0</span><span class="w"> </span><span class="mi">203</span>.<span class="mi">0</span>.<span class="mi">113</span>.<span class="mi">1</span>

#<span class="w"> </span><span class="nv">Interface</span><span class="w"> </span><span class="nv">information</span>
<span class="k">show</span><span class="w"> </span><span class="nv">ip</span><span class="w"> </span><span class="nv">interface</span><span class="w"> </span><span class="nv">brief</span>
</code></pre></div>

<hr />
<p><strong>Document Information</strong>
- Last Updated: 2024
- Difficulty: â­â­â­
- Estimated Learning Time: 2-3 hours</p>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/Networking/07_Subnetting_Practice.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Subnetting Practice</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/Networking/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/Networking/09_Routing_Protocols.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Routing Protocols</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">â†‘</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'en';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}