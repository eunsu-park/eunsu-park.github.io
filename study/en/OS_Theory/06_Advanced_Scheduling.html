{% raw %}
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Scheduling - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/en/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/en/" class="nav-item ">
                    <span class="nav-icon">ğŸ </span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">ğŸ’»</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/en/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" selected>
                        English
                    </option>
                    
                    <option value="ko" >
                        í•œêµ­ì–´
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">â˜€ï¸</span>
                    <span class="theme-icon dark">ğŸŒ™</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/en/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/en/OS_Theory/">OS Theory</a>
    <span class="separator">/</span>
    <span class="current">Advanced Scheduling</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>Advanced Scheduling</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/OS_Theory/05_Scheduling_Algorithms.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Scheduling Algorithms</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/OS_Theory/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/OS_Theory/07_Synchronization_Basics.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Synchronization Basics</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#1-mlfq-multi-level-feedback-queue">1. MLFQ (Multi-Level Feedback Queue)</a><ul>
<li><a href="#concept">Concept</a></li>
<li><a href="#mlfq-rules">MLFQ Rules</a></li>
<li><a href="#mlfq-operation-example">MLFQ Operation Example</a></li>
<li><a href="#mlfq-problems-and-solutions">MLFQ Problems and Solutions</a></li>
<li><a href="#mlfq-parameters">MLFQ Parameters</a></li>
</ul>
</li>
<li><a href="#2-multiprocessor-scheduling">2. Multiprocessor Scheduling</a><ul>
<li><a href="#multiprocessor-system-types">Multiprocessor System Types</a></li>
<li><a href="#scheduling-approaches">Scheduling Approaches</a></li>
<li><a href="#load-balancing">Load Balancing</a></li>
</ul>
</li>
<li><a href="#3-processor-affinity">3. Processor Affinity</a><ul>
<li><a href="#what-is-processor-affinity">What is Processor Affinity?</a></li>
<li><a href="#affinity-types">Affinity Types</a></li>
</ul>
</li>
<li><a href="#4-real-time-scheduling">4. Real-time Scheduling</a><ul>
<li><a href="#real-time-system-overview">Real-time System Overview</a></li>
<li><a href="#real-time-task-characteristics">Real-time Task Characteristics</a></li>
<li><a href="#rate-monotonic-scheduling-rms">Rate Monotonic Scheduling (RMS)</a></li>
<li><a href="#earliest-deadline-first-edf">Earliest Deadline First (EDF)</a></li>
</ul>
</li>
<li><a href="#5-linux-cfs">5. Linux CFS</a><ul>
<li><a href="#cfs-overview">CFS Overview</a></li>
<li><a href="#cfs-operation">CFS Operation</a></li>
<li><a href="#cfs-timeslice-calculation">CFS Timeslice Calculation</a></li>
</ul>
</li>
<li><a href="#6-practice-problems">6. Practice Problems</a><ul>
<li><a href="#problem-1-mlfq">Problem 1: MLFQ</a></li>
<li><a href="#problem-2-rms-schedulability">Problem 2: RMS Schedulability</a></li>
<li><a href="#problem-3-processor-affinity">Problem 3: Processor Affinity</a></li>
<li><a href="#problem-4-edf-vs-rms">Problem 4: EDF vs RMS</a></li>
<li><a href="#problem-5-linux-cfs">Problem 5: Linux CFS</a></li>
</ul>
</li>
<li><a href="#next-steps">Next Steps</a></li>
<li><a href="#references">References</a></li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="advanced-scheduling">Advanced Scheduling<a class="header-link" href="#advanced-scheduling" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="header-link" href="#overview" title="Permanent link">&para;</a></h2>
<p>In this lesson, we learn about advanced scheduling techniques used in real operating systems. We explore MLFQ (Multi-Level Feedback Queue), multiprocessor scheduling, and real-time scheduling.</p>
<hr />
<h2 id="table-of-contents">Table of Contents<a class="header-link" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#1-mlfq-multi-level-feedback-queue">MLFQ (Multi-Level Feedback Queue)</a></li>
<li><a href="#2-multiprocessor-scheduling">Multiprocessor Scheduling</a></li>
<li><a href="#3-processor-affinity">Processor Affinity</a></li>
<li><a href="#4-real-time-scheduling">Real-time Scheduling</a></li>
<li><a href="#5-linux-cfs">Linux CFS</a></li>
<li><a href="#6-practice-problems">Practice Problems</a></li>
</ol>
<hr />
<h2 id="1-mlfq-multi-level-feedback-queue">1. MLFQ (Multi-Level Feedback Queue)<a class="header-link" href="#1-mlfq-multi-level-feedback-queue" title="Permanent link">&para;</a></h2>
<h3 id="concept">Concept<a class="header-link" href="#concept" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>MLFQ = Scheduling using multiple ready queues
     = Move between queues based on process behavior
     = Advantages of SJF + Adaptive scheduling

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MLFQ Structure                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  High Priority (Short Time Quantum)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Queue 0 (TQ=8ms): P1 â†’ P5 â†’ ...                â”‚ â†â”€â”€ New Process
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â”‚                              â”‚
â”‚                          â–¼ Demote on TQ expiration      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Queue 1 (TQ=16ms): P2 â†’ P7 â†’ ...               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â”‚                              â”‚
â”‚                          â–¼ Demote on TQ expiration      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Queue 2 (TQ=32ms): P3 â†’ P8 â†’ ...               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â”‚                              â”‚
â”‚                          â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Queue N (FCFS): P4 â†’ P6 â†’ ...                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  Low Priority (Long Time Quantum or FCFS)              â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="mlfq-rules">MLFQ Rules<a class="header-link" href="#mlfq-rules" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">                    </span><span class="nv">MLFQ</span><span class="w"> </span><span class="nv">Basic</span><span class="w"> </span><span class="nv">Rules</span><span class="w">                     </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                         </span>â”‚
â”‚<span class="w">  </span><span class="nv">Rule</span><span class="w"> </span><span class="mi">1</span>:<span class="w"> </span><span class="nv">Execute</span><span class="w"> </span><span class="nv">higher</span><span class="w"> </span><span class="nv">priority</span><span class="w"> </span><span class="nv">process</span><span class="w"> </span><span class="nv">first</span><span class="w">         </span>â”‚
â”‚<span class="w">         </span><span class="nv">Priority</span><span class="ss">(</span><span class="nv">A</span><span class="ss">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">Priority</span><span class="ss">(</span><span class="nv">B</span><span class="ss">)</span><span class="w"> </span>â†’<span class="w"> </span><span class="nv">Execute</span><span class="w"> </span><span class="nv">A</span><span class="w">          </span>â”‚
â”‚<span class="w">                                                         </span>â”‚
â”‚<span class="w">  </span><span class="nv">Rule</span><span class="w"> </span><span class="mi">2</span>:<span class="w"> </span><span class="k">If</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">priority</span>,<span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">RR</span><span class="w">                      </span>â”‚
â”‚<span class="w">         </span><span class="nv">Priority</span><span class="ss">(</span><span class="nv">A</span><span class="ss">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">Priority</span><span class="ss">(</span><span class="nv">B</span><span class="ss">)</span><span class="w"> </span>â†’<span class="w"> </span><span class="nv">RR</span><span class="w">                 </span>â”‚
â”‚<span class="w">                                                         </span>â”‚
â”‚<span class="w">  </span><span class="nv">Rule</span><span class="w"> </span><span class="mi">3</span>:<span class="w"> </span><span class="nv">Place</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">process</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">highest</span><span class="w"> </span><span class="nv">queue</span><span class="w">            </span>â”‚
â”‚<span class="w">         </span><span class="nv">New</span><span class="w"> </span><span class="nv">process</span><span class="w"> </span>â†’<span class="w"> </span><span class="nv">Queue</span><span class="w"> </span><span class="mi">0</span><span class="w">                          </span>â”‚
â”‚<span class="w">                                                         </span>â”‚
â”‚<span class="w">  </span><span class="nv">Rule</span><span class="w"> </span><span class="mi">4</span>:<span class="w"> </span><span class="k">If</span><span class="w"> </span><span class="nv">time</span><span class="w"> </span><span class="nv">quantum</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">used</span><span class="w"> </span><span class="nv">up</span>,<span class="w"> </span><span class="nv">demote</span><span class="w">            </span>â”‚
â”‚<span class="w">         </span><span class="nv">TQ</span><span class="w"> </span><span class="nv">exhausted</span><span class="w"> </span>â†’<span class="w"> </span><span class="nv">Priority</span><span class="w"> </span><span class="nv">decreased</span><span class="w">              </span>â”‚
â”‚<span class="w">                                                         </span>â”‚
â”‚<span class="w">  </span><span class="nv">Rule</span><span class="w"> </span><span class="mi">5</span>:<span class="w"> </span><span class="k">If</span><span class="w"> </span><span class="nv">CPU</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">yielded</span><span class="w"> </span><span class="nv">before</span><span class="w"> </span><span class="nv">TQ</span>,<span class="w"> </span><span class="nv">maintain</span><span class="w"> </span><span class="nv">queue</span><span class="w">   </span>â”‚
â”‚<span class="w">         </span><span class="nv">I</span><span class="o">/</span><span class="nv">O</span><span class="w"> </span><span class="nv">request</span><span class="w"> </span><span class="nv">etc</span><span class="w"> </span>â†’<span class="w"> </span><span class="nv">Maintain</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">priority</span><span class="w">       </span>â”‚
â”‚<span class="w">                                                         </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="mlfq-operation-example">MLFQ Operation Example<a class="header-link" href="#mlfq-operation-example" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nl">Scenario</span><span class="p">:</span><span class="w"> </span><span class="n">Mix</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">long</span><span class="w"> </span><span class="n">job</span><span class="w"> </span><span class="p">(</span><span class="n">CPU</span><span class="o">-</span><span class="n">bound</span><span class="p">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">short</span><span class="w"> </span><span class="n">job</span><span class="w"> </span><span class="p">(</span><span class="n">I</span><span class="o">/</span><span class="n">O</span><span class="o">-</span><span class="n">bound</span><span class="p">)</span>

<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nc">Time</span><span class="w"> </span><span class="mi">0</span><span class="err">:</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">job</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">arrives</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nl">Q0</span><span class="p">:</span><span class="w"> </span><span class="o">[</span><span class="n">A</span><span class="o">]</span><span class="w"> </span><span class="err">â”€â”€â”€â–¶</span><span class="w"> </span><span class="k">Execute</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="p">(</span><span class="mi">8</span><span class="n">ms</span><span class="p">)</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nl">Q1</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nl">Q2</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nc">Time</span><span class="w"> </span><span class="mi">8</span><span class="err">:</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">exhausts</span><span class="w"> </span><span class="n">TQ</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Demoted</span><span class="w">                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nl">Q0</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nl">Q1</span><span class="p">:</span><span class="w"> </span><span class="o">[</span><span class="n">A</span><span class="o">]</span><span class="w"> </span><span class="err">â”€â”€â”€â–¶</span><span class="w"> </span><span class="k">Execute</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="p">(</span><span class="mi">16</span><span class="n">ms</span><span class="p">)</span><span class="w">                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nl">Q2</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nc">Time</span><span class="w"> </span><span class="mi">10</span><span class="err">:</span><span class="w"> </span><span class="n">Short</span><span class="w"> </span><span class="n">job</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">arrives</span><span class="w"> </span><span class="p">(</span><span class="mi">5</span><span class="n">ms</span><span class="w"> </span><span class="n">job</span><span class="p">)</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nl">Q0</span><span class="p">:</span><span class="w"> </span><span class="o">[</span><span class="n">B</span><span class="o">]</span><span class="w"> </span><span class="err">â”€â”€â”€â–¶</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">higher</span><span class="w"> </span><span class="n">priority</span><span class="p">,</span><span class="w"> </span><span class="n">preempt</span><span class="w"> </span><span class="n">A</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nl">Q1</span><span class="p">:</span><span class="w"> </span><span class="o">[</span><span class="n">A</span><span class="o">]</span><span class="w">     </span><span class="k">Start</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="n">B</span><span class="w">                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nl">Q2</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nc">Time</span><span class="w"> </span><span class="mi">15</span><span class="err">:</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">completes</span><span class="w"> </span><span class="p">(</span><span class="n">finished</span><span class="w"> </span><span class="k">before</span><span class="w"> </span><span class="n">TQ</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">I</span><span class="o">/</span><span class="n">O</span><span class="o">-</span><span class="n">heavy</span><span class="p">)</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nl">Q0</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nl">Q1</span><span class="p">:</span><span class="w"> </span><span class="o">[</span><span class="n">A</span><span class="o">]</span><span class="w"> </span><span class="err">â”€â”€â”€â–¶</span><span class="w"> </span><span class="n">Resume</span><span class="w"> </span><span class="n">A</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nl">Q2</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="k">Result</span><span class="err">:</span><span class="w"> </span><span class="n">Short</span><span class="w"> </span><span class="n">job</span><span class="w"> </span><span class="n">completes</span><span class="w"> </span><span class="k">first</span><span class="w"> </span><span class="p">(</span><span class="k">similar</span><span class="w"> </span><span class="n">effect</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">SJF</span><span class="p">)</span>
<span class="w">        </span><span class="n">Can</span><span class="w"> </span><span class="n">prioritize</span><span class="w"> </span><span class="n">short</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="k">without</span><span class="w"> </span><span class="n">knowing</span><span class="w"> </span><span class="n">burst</span><span class="w"> </span><span class="nc">time</span>
</code></pre></div>

<h3 id="mlfq-problems-and-solutions">MLFQ Problems and Solutions<a class="header-link" href="#mlfq-problems-and-solutions" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">                  </span><span class="nv">MLFQ</span><span class="w"> </span><span class="nv">Problems</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">Solutions</span><span class="w">            </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                         </span>â”‚
â”‚<span class="w">  </span><span class="nv">Problem</span><span class="w"> </span><span class="mi">1</span>:<span class="w"> </span><span class="nv">Starvation</span><span class="w">                                 </span>â”‚
â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w"> </span><span class="k">If</span><span class="w"> </span><span class="nv">high</span><span class="w"> </span><span class="nv">priority</span><span class="w"> </span><span class="nv">jobs</span><span class="w"> </span><span class="nv">keep</span><span class="w"> </span><span class="nv">arriving</span>,<span class="w">              </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w"> </span><span class="nv">low</span><span class="w"> </span><span class="nv">queue</span><span class="w"> </span><span class="nv">jobs</span><span class="w"> </span><span class="nv">never</span><span class="w"> </span><span class="nv">execute</span><span class="w">                      </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">  </span>â”‚
â”‚<span class="w">  </span><span class="nv">Solution</span>:<span class="w"> </span><span class="nv">Priority</span><span class="w"> </span><span class="nv">Boost</span><span class="w">                              </span>â”‚
â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w"> </span><span class="nv">Periodically</span><span class="w"> </span><span class="nv">move</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">processes</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">top</span><span class="w"> </span><span class="nv">queue</span><span class="w">     </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w"> </span><span class="nv">E</span>.<span class="nv">g</span>.,<span class="w"> </span><span class="nv">every</span><span class="w"> </span><span class="nv">S</span><span class="w"> </span><span class="nv">time</span><span class="w"> </span><span class="nv">units</span>,<span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">jobs</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">Q0</span><span class="w">         </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">  </span>â”‚
â”‚<span class="w">                                                         </span>â”‚
â”‚<span class="w">  </span><span class="nv">Problem</span><span class="w"> </span><span class="mi">2</span>:<span class="w"> </span><span class="nv">Gaming</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">Scheduler</span><span class="w">                       </span>â”‚
â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w"> </span><span class="nv">Malicious</span><span class="w"> </span><span class="nv">process</span><span class="w"> </span><span class="nv">requests</span><span class="w"> </span><span class="nv">I</span><span class="o">/</span><span class="nv">O</span><span class="w"> </span><span class="nv">just</span><span class="w"> </span><span class="nv">before</span><span class="w"> </span><span class="nv">TQ</span><span class="w">     </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w"> </span>â†’<span class="w"> </span><span class="nv">Prevents</span><span class="w"> </span><span class="nv">demotion</span>,<span class="w"> </span><span class="nv">monopolizes</span><span class="w"> </span><span class="nv">CPU</span><span class="w">             </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">  </span>â”‚
â”‚<span class="w">  </span><span class="nv">Solution</span>:<span class="w"> </span><span class="nv">Track</span><span class="w"> </span><span class="nv">cumulative</span><span class="w"> </span><span class="nv">time</span><span class="w">                       </span>â”‚
â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w"> </span><span class="nv">Track</span><span class="w"> </span><span class="nv">total</span><span class="w"> </span><span class="nv">time</span><span class="w"> </span><span class="nv">used</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">each</span><span class="w"> </span><span class="nv">level</span><span class="w">              </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w"> </span><span class="nv">Demote</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">allotment</span><span class="w"> </span><span class="nv">exhausted</span><span class="w"> </span><span class="ss">(</span><span class="nv">even</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">split</span><span class="ss">)</span><span class="w">  </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">  </span>â”‚
â”‚<span class="w">                                                         </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="mlfq-parameters">MLFQ Parameters<a class="header-link" href="#mlfq-parameters" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   MLFQ Key Parameters                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  1. Number of queues                                   â”‚
â”‚     â€¢ Typically 3~5                                     â”‚
â”‚     â€¢ Too many: overhead, too few: insufficient        â”‚
â”‚                                                         â”‚
â”‚  2. Time Quantum per queue                             â”‚
â”‚     â€¢ Usually doubles (8, 16, 32, 64ms...)            â”‚
â”‚     â€¢ High queue: Short TQ (fast response)             â”‚
â”‚     â€¢ Low queue: Long TQ (reduce context switches)     â”‚
â”‚                                                         â”‚
â”‚  3. Priority Boost period (S)                          â”‚
â”‚     â€¢ Too short: CPU-bound jobs advantaged             â”‚
â”‚     â€¢ Too long: starvation occurs                      â”‚
â”‚     â€¢ Typically 1 second ~ 100ms                       â”‚
â”‚                                                         â”‚
â”‚  Solaris Time-sharing class example:                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ Priorityâ”‚  TQ  â”‚  Demote  â”‚   Promote   â”‚           â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚  â”‚   59    â”‚ 20ms â”‚   54     â”‚    -        â”‚           â”‚
â”‚  â”‚   40    â”‚ 40ms â”‚   35     â”‚    45       â”‚           â”‚
â”‚  â”‚   20    â”‚ 80ms â”‚   15     â”‚    25       â”‚           â”‚
â”‚  â”‚   0     â”‚ 200msâ”‚   0      â”‚    5        â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<hr />
<h2 id="2-multiprocessor-scheduling">2. Multiprocessor Scheduling<a class="header-link" href="#2-multiprocessor-scheduling" title="Permanent link">&para;</a></h2>
<h3 id="multiprocessor-system-types">Multiprocessor System Types<a class="header-link" href="#multiprocessor-system-types" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Multiprocessor System Types               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  1. SMP (Symmetric Multi-Processing)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”                 â”‚  â”‚
â”‚  â”‚  â”‚CPU 0â”‚ â”‚CPU 1â”‚ â”‚CPU 2â”‚ â”‚CPU 3â”‚                 â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜                 â”‚  â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚  â”‚
â”‚  â”‚                 â”‚                                 â”‚  â”‚
â”‚  â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”                         â”‚  â”‚
â”‚  â”‚          â”‚Shared Memoryâ”‚                         â”‚  â”‚
â”‚  â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚  â”‚
â”‚  â”‚  All processors equal, share memory              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚  2. NUMA (Non-Uniform Memory Access)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚  â”‚
â”‚  â”‚  â”‚ CPU 0, 1    â”‚     â”‚ CPU 2, 3    â”‚             â”‚  â”‚
â”‚  â”‚  â”‚Local Memory â”‚â—€â”€â”€â”€â–¶â”‚Local Memory â”‚             â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â”‚  Local memory access: Fast                       â”‚  â”‚
â”‚  â”‚  Remote memory access: Slow                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="scheduling-approaches">Scheduling Approaches<a class="header-link" href="#scheduling-approaches" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">             </span><span class="n">Multiprocessor</span><span class="w"> </span><span class="n">Scheduling</span><span class="w"> </span><span class="n">Approaches</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mf">1.</span><span class="w"> </span><span class="n">Asymmetric</span><span class="w"> </span><span class="n">Multiprocessing</span><span class="w">                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                             </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Master</span><span class="w"> </span><span class="n">Processor</span><span class="err">â”‚</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="n">All</span><span class="w"> </span><span class="n">scheduling</span><span class="w"> </span><span class="n">decisions</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="p">(</span><span class="n">CPU</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                             </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                             </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Assign</span><span class="w"> </span><span class="n">tasks</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”</span><span class="w">                          </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â–¼</span><span class="w">     </span><span class="err">â–¼</span><span class="w">     </span><span class="err">â–¼</span><span class="w">     </span><span class="err">â–¼</span><span class="w">                          </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="n">CPU</span><span class="w"> </span><span class="mi">1</span><span class="err">â”‚â”‚</span><span class="n">CPU</span><span class="w"> </span><span class="mi">2</span><span class="err">â”‚â”‚</span><span class="n">CPU</span><span class="w"> </span><span class="mi">3</span><span class="err">â”‚â”‚</span><span class="n">CPU</span><span class="w"> </span><span class="mi">4</span><span class="err">â”‚</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="n">Slaves</span><span class="w">          </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”˜</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Pros</span><span class="p">:</span><span class="w"> </span><span class="n">Simple</span><span class="p">,</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">sharing</span><span class="w"> </span><span class="n">issues</span><span class="w">            </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Cons</span><span class="p">:</span><span class="w"> </span><span class="n">Master</span><span class="w"> </span><span class="n">bottleneck</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mf">2.</span><span class="w"> </span><span class="n">Symmetric</span><span class="w"> </span><span class="n">Multiprocessing</span><span class="w"> </span><span class="p">(</span><span class="n">SMP</span><span class="p">)</span><span class="w">                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”</span><span class="w">                 </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="n">CPU</span><span class="w"> </span><span class="mi">0</span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="n">CPU</span><span class="w"> </span><span class="mi">1</span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="n">CPU</span><span class="w"> </span><span class="mi">2</span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="n">CPU</span><span class="w"> </span><span class="mi">3</span><span class="err">â”‚</span><span class="w">                 </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="n">Sched</span><span class="err">â”‚â”‚</span><span class="n">Sched</span><span class="err">â”‚â”‚</span><span class="n">Sched</span><span class="err">â”‚â”‚</span><span class="n">Sched</span><span class="err">â”‚</span><span class="w">                 </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”¬â”€â”€â”˜</span><span class="w"> </span><span class="err">â””â”€â”€â”¬â”€â”€â”˜</span><span class="w"> </span><span class="err">â””â”€â”€â”¬â”€â”€â”˜</span><span class="w"> </span><span class="err">â””â”€â”€â”¬â”€â”€â”˜</span><span class="w">                 </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”¬â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                     </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                 </span><span class="err">â–¼</span><span class="w">                                 </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Shared</span><span class="w"> </span><span class="n">Ready</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="p">(</span><span class="n">sync</span><span class="w"> </span><span class="n">required</span><span class="p">)</span><span class="w">         </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span><span class="w">    </span><span class="n">Queue</span><span class="w">     </span><span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Or</span><span class="p">:</span><span class="w">    </span><span class="n">Each</span><span class="w"> </span><span class="n">CPU</span><span class="w"> </span><span class="n">maintains</span><span class="w"> </span><span class="n">own</span><span class="w"> </span><span class="n">Ready</span><span class="w"> </span><span class="n">Queue</span><span class="w">       </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Pros</span><span class="p">:</span><span class="w"> </span><span class="n">Scalability</span><span class="p">,</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">bottleneck</span><span class="w">                </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Cons</span><span class="p">:</span><span class="w"> </span><span class="n">Complex</span><span class="w"> </span><span class="n">sync</span><span class="p">,</span><span class="w"> </span><span class="n">possible</span><span class="w"> </span><span class="nb">load</span><span class="w"> </span><span class="n">imbalance</span><span class="w">     </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="load-balancing">Load Balancing<a class="header-link" href="#load-balancing" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                    </span><span class="n">Load</span><span class="w"> </span><span class="n">Balancing</span><span class="w"> </span><span class="n">Techniques</span><span class="w">            </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Problem</span><span class="p">:</span><span class="w"> </span><span class="n">Load</span><span class="w"> </span><span class="n">imbalance</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">CPU</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">own</span><span class="w"> </span><span class="n">queue</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">CPU</span><span class="w"> </span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="err">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ</span><span class="w">   </span><span class="n">CPU</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="err">â–ˆâ–ˆ</span><span class="w">   </span><span class="n">CPU</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="err">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">         </span><span class="p">(</span><span class="n">overload</span><span class="p">)</span><span class="w">     </span><span class="p">(</span><span class="n">idle</span><span class="p">)</span><span class="w">         </span><span class="p">(</span><span class="n">overload</span><span class="p">)</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Solution</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="n">Push</span><span class="w"> </span><span class="n">Migration</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Periodically</span><span class="w"> </span><span class="n">check</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">queue</span><span class="s1">&#39;s load             â”‚  â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Move</span><span class="w"> </span><span class="n">processes</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">overloaded</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">idle</span><span class="w"> </span><span class="n">queue</span><span class="w">      </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">CPU</span><span class="w"> </span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="err">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ</span><span class="w"> </span><span class="err">â”€â”€</span><span class="n">push</span><span class="err">â”€â”€â–¶</span><span class="w"> </span><span class="n">CPU</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="err">â–ˆâ–ˆ</span><span class="w">              </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Result</span><span class="p">:</span><span class="w">  </span><span class="err">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ</span><span class="w">               </span><span class="err">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ</span><span class="w">               </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Solution</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="n">Pull</span><span class="w"> </span><span class="n">Migration</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Idle</span><span class="w"> </span><span class="n">CPU</span><span class="w"> </span><span class="n">pulls</span><span class="w"> </span><span class="n">tasks</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">CPUs</span><span class="w">            </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">CPU</span><span class="w"> </span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="err">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ</span><span class="w"> </span><span class="err">â—€â”€â”€</span><span class="n">pull</span><span class="err">â”€â”€</span><span class="w"> </span><span class="n">CPU</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="n">idle</span><span class="p">)</span><span class="w">         </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Result</span><span class="p">:</span><span class="w">  </span><span class="err">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ</span><span class="w">               </span><span class="err">â–ˆâ–ˆâ–ˆ</span><span class="w">                 </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Linux</span><span class="p">:</span><span class="w"> </span><span class="n">Uses</span><span class="w"> </span><span class="n">both</span><span class="w">                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Periodic</span><span class="w"> </span><span class="n">Push</span><span class="w"> </span><span class="p">(</span><span class="n">rebalance</span><span class="w"> </span><span class="n">task</span><span class="p">)</span><span class="w">                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Pull</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">idle</span><span class="w"> </span><span class="p">(</span><span class="n">idle_balance</span><span class="p">)</span><span class="w">                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="3-processor-affinity">3. Processor Affinity<a class="header-link" href="#3-processor-affinity" title="Permanent link">&para;</a></h2>
<h3 id="what-is-processor-affinity">What is Processor Affinity?<a class="header-link" href="#what-is-processor-affinity" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">              </span><span class="n">Processor</span><span class="w"> </span><span class="n">Affinity</span><span class="w">                         </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Definition</span><span class="p">:</span><span class="w"> </span><span class="n">Keeping</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">CPU</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Reason</span><span class="p">:</span><span class="w"> </span><span class="n">Cache</span><span class="w"> </span><span class="n">efficiency</span><span class="w">                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Process</span><span class="w"> </span><span class="n">P</span><span class="w"> </span><span class="n">runs</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">CPU</span><span class="w"> </span><span class="mi">0</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â†’</span><span class="w"> </span><span class="n">CPU</span><span class="w"> </span><span class="mi">0</span><span class="s1">&#39;s cache loaded with P&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">data</span><span class="w">            </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">If</span><span class="w"> </span><span class="n">P</span><span class="w"> </span><span class="n">moves</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">CPU</span><span class="p">:</span><span class="w">                    </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">CPU</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">cache</span><span class="p">:</span><span class="w"> </span><span class="n">P</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">invalidated</span><span class="w">               </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">CPU</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">cache</span><span class="p">:</span><span class="w"> </span><span class="n">P</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">needs</span><span class="w"> </span><span class="n">reloading</span><span class="w">           </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â†’</span><span class="w"> </span><span class="n">Cache</span><span class="w"> </span><span class="n">misses</span><span class="w"> </span><span class="n">increase</span><span class="p">,</span><span class="w"> </span><span class="n">performance</span><span class="w"> </span><span class="n">degrades</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Cache</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">visualization</span><span class="p">:</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">CPU</span><span class="w"> </span><span class="mi">0</span><span class="w">         </span><span class="n">CPU</span><span class="w"> </span><span class="mi">1</span><span class="w">         </span><span class="n">CPU</span><span class="w"> </span><span class="mi">0</span><span class="w">         </span><span class="n">CPU</span><span class="w"> </span><span class="mi">1</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”</span><span class="w">      </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”</span><span class="w">       </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”</span><span class="w">       </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="n">Cache</span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="n">Cache</span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="n">Cache</span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="n">Cache</span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="p">[</span><span class="n">P</span><span class="s1">&#39;s â”‚      â”‚[   ]â”‚  Move â”‚[   ]â”‚       â”‚[P&#39;</span><span class="n">s</span><span class="w"> </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="n">data</span><span class="p">]</span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”€â”€â”€â–¶</span><span class="w">  </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="n">data</span><span class="p">]</span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”˜</span><span class="w">      </span><span class="err">â””â”€â”€â”€â”€â”€â”˜</span><span class="w">       </span><span class="err">â””â”€â”€â”€â”€â”€â”˜</span><span class="w">       </span><span class="err">â””â”€â”€â”€â”€â”€â”˜</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">â†‘</span><span class="w"> </span><span class="n">Warm</span><span class="w">      </span><span class="n">Cold</span><span class="w">          </span><span class="n">Cold</span><span class="w">          </span><span class="err">â†‘</span><span class="w"> </span><span class="n">Reload</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="affinity-types">Affinity Types<a class="header-link" href="#affinity-types" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                   </span><span class="n">Affinity</span><span class="w"> </span><span class="n">Types</span><span class="w">                        </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mf">1.</span><span class="w"> </span><span class="n">Soft</span><span class="w"> </span><span class="n">Affinity</span><span class="w">                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Default</span><span class="p">:</span><span class="w"> </span><span class="n">Try</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">CPU</span><span class="w">                </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Can</span><span class="w"> </span><span class="n">move</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nb">load</span><span class="w"> </span><span class="n">balancing</span><span class="w"> </span><span class="n">needed</span><span class="w">              </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Linux</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">behavior</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mf">2.</span><span class="w"> </span><span class="n">Hard</span><span class="w"> </span><span class="n">Affinity</span><span class="w">                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Pin</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">specific</span><span class="w"> </span><span class="n">CPU</span><span class="w"> </span><span class="n">set</span><span class="w">                </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Won</span><span class="s1">&#39;t move even for load balancing             â”‚  â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">via</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">call</span><span class="w">                            </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Linux</span><span class="w"> </span><span class="n">configuration</span><span class="p">:</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">```</span><span class="n">c</span><span class="w">                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="c1">#define _GNU_SOURCE                                   â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="c1">#include &lt;sched.h&gt;                                    â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">cpu_set_t</span><span class="w"> </span><span class="n">mask</span><span class="p">;</span><span class="w">                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">CPU_ZERO</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mask</span><span class="p">);</span><span class="w">                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">CPU_SET</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">mask</span><span class="p">);</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">Run</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">CPU</span><span class="w"> </span><span class="mi">0</span><span class="w">             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">CPU_SET</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">mask</span><span class="p">);</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">Also</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">CPU</span><span class="w"> </span><span class="mi">2</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">affinity</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">process</span><span class="w">                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">sched_setaffinity</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">sizeof</span><span class="p">(</span><span class="n">mask</span><span class="p">),</span><span class="w"> </span><span class="o">&amp;</span><span class="n">mask</span><span class="p">);</span><span class="w">            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">```</span><span class="w">                                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Commands</span><span class="p">:</span><span class="w">                                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">```</span><span class="n">bash</span><span class="w">                                               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="c1"># Run only on CPU 0,1                                 â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">taskset</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="w"> </span><span class="o">./</span><span class="n">program</span><span class="w">                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="c1"># Change affinity of running process                  â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">taskset</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">PID</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">```</span><span class="w">                                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="4-real-time-scheduling">4. Real-time Scheduling<a class="header-link" href="#4-real-time-scheduling" title="Permanent link">&para;</a></h2>
<h3 id="real-time-system-overview">Real-time System Overview<a class="header-link" href="#real-time-system-overview" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                   </span><span class="n">Real</span><span class="o">-</span><span class="n">time</span><span class="w"> </span><span class="n">System</span><span class="w"> </span><span class="n">Overview</span><span class="w">             </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Real</span><span class="o">-</span><span class="n">time</span><span class="w"> </span><span class="n">System</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">System</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">constraints</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                     </span><span class="p">(</span><span class="n">Deadlines</span><span class="p">)</span><span class="w">                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Classification</span><span class="p">:</span><span class="w">                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Hard</span><span class="w"> </span><span class="n">Real</span><span class="o">-</span><span class="n">Time</span><span class="w">                                    </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Deadline</span><span class="w"> </span><span class="n">miss</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">System</span><span class="w"> </span><span class="n">failure</span><span class="w">                  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Ex</span><span class="p">:</span><span class="w"> </span><span class="n">Aviation</span><span class="w"> </span><span class="n">control</span><span class="p">,</span><span class="w"> </span><span class="n">medical</span><span class="w"> </span><span class="n">devices</span><span class="p">,</span><span class="w"> </span><span class="n">ABS</span><span class="w"> </span><span class="n">brake</span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Deadline</span><span class="w"> </span><span class="n">guarantee</span><span class="w"> </span><span class="n">essential</span><span class="w">                    </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Soft</span><span class="w"> </span><span class="n">Real</span><span class="o">-</span><span class="n">Time</span><span class="w">                                    </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Deadline</span><span class="w"> </span><span class="n">miss</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Performance</span><span class="w"> </span><span class="n">degradation</span><span class="w">         </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Ex</span><span class="p">:</span><span class="w"> </span><span class="n">Video</span><span class="w"> </span><span class="n">streaming</span><span class="p">,</span><span class="w"> </span><span class="n">games</span><span class="p">,</span><span class="w"> </span><span class="n">VoIP</span><span class="w">               </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Goal</span><span class="p">:</span><span class="w"> </span><span class="n">Meet</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">deadlines</span><span class="w">                      </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="real-time-task-characteristics">Real-time Task Characteristics<a class="header-link" href="#real-time-task-characteristics" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Real-time Task Characteristics         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Periodic Task:                                         â”‚
â”‚                                                         â”‚
â”‚  Time â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶     â”‚
â”‚  â”‚â†â”€â”€ Period P â”€â”€â†’â”‚â†â”€â”€ Period P â”€â”€â†’â”‚                   â”‚
â”‚  â”Œâ”€â”€â”€â”            â”Œâ”€â”€â”€â”            â”Œâ”€â”€â”€â”               â”‚
â”‚  â”‚ C â”‚            â”‚ C â”‚            â”‚ C â”‚               â”‚
â”‚  â””â”€â”€â”€â”˜            â””â”€â”€â”€â”˜            â””â”€â”€â”€â”˜               â”‚
â”‚  â†‘   â†‘            â†‘   â†‘                                â”‚
â”‚  Arrive Deadline(D) Arrive Deadline(D)                 â”‚
â”‚                                                         â”‚
â”‚  Parameters:                                            â”‚
â”‚  â€¢ P (Period): Task repetition period                  â”‚
â”‚  â€¢ C (Computation time): Execution time                â”‚
â”‚  â€¢ D (Deadline): Completion deadline                   â”‚
â”‚  â€¢ Utilization U = C/P                                 â”‚
â”‚                                                         â”‚
â”‚  Example: Video frame                                   â”‚
â”‚  â€¢ P = 33ms (30fps)                                    â”‚
â”‚  â€¢ C = 10ms (frame processing time)                    â”‚
â”‚  â€¢ D = 33ms                                            â”‚
â”‚  â€¢ U = 10/33 â‰ˆ 0.3 (30%)                              â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="rate-monotonic-scheduling-rms">Rate Monotonic Scheduling (RMS)<a class="header-link" href="#rate-monotonic-scheduling-rms" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Rate Monotonic Scheduling (RMS)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Principle: Shorter period = Higher priority           â”‚
â”‚       (Rate = 1/Period, higher Rate = higher priority) â”‚
â”‚                                                         â”‚
â”‚  Characteristics:                                       â”‚
â”‚  â€¢ Static priority (fixed)                             â”‚
â”‚  â€¢ Preemptive                                          â”‚
â”‚  â€¢ Optimal (among static priority)                     â”‚
â”‚                                                         â”‚
â”‚  Example:                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚  Task   â”‚Period â”‚Comp. C â”‚ Priority â”‚               â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚
â”‚  â”‚   T1    â”‚  50   â”‚   20   â”‚   High   â”‚               â”‚
â”‚  â”‚   T2    â”‚  100  â”‚   35   â”‚   Low    â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                         â”‚
â”‚  Gantt Chart:                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚    T1    â”‚      T2      â”‚    T1    â”‚  T2(cont.)  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  0         20            55        75             100  â”‚
â”‚       T2 starts      T1 arrives(preempt)  T2 resumes   â”‚
â”‚                                                         â”‚
â”‚  Schedulability condition:                              â”‚
â”‚  Total utilization â‰¤ n(2^(1/n) - 1)                    â”‚
â”‚  â€¢ n=1: 100%                                           â”‚
â”‚  â€¢ n=2: ~82.8%                                         â”‚
â”‚  â€¢ nâ†’âˆ: ~69.3%                                         â”‚
â”‚                                                         â”‚
â”‚  Example: U = 20/50 + 35/100 = 0.4 + 0.35 = 0.75      â”‚
â”‚          0.75 &lt; 0.828 â†’ Schedulable                    â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="earliest-deadline-first-edf">Earliest Deadline First (EDF)<a class="header-link" href="#earliest-deadline-first-edf" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">            </span><span class="n">Earliest</span><span class="w"> </span><span class="n">Deadline</span><span class="w"> </span><span class="n">First</span><span class="w"> </span><span class="p">(</span><span class="n">EDF</span><span class="p">)</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Principle</span><span class="p">:</span><span class="w"> </span><span class="n">Nearest</span><span class="w"> </span><span class="n">deadline</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Highest</span><span class="w"> </span><span class="n">priority</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Characteristics</span><span class="p">:</span><span class="w">                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Dynamic</span><span class="w"> </span><span class="n">priority</span><span class="w"> </span><span class="p">(</span><span class="n">changes</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">deadline</span><span class="p">)</span><span class="w">            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Preemptive</span><span class="w">                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Theoretically</span><span class="w"> </span><span class="n">optimal</span><span class="w"> </span><span class="p">(</span><span class="n">up</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="n">utilization</span><span class="p">)</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Example</span><span class="w"> </span><span class="p">(</span><span class="n">same</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">RMS</span><span class="p">):</span><span class="w">                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Task</span><span class="w">   </span><span class="err">â”‚</span><span class="n">Period</span><span class="w"> </span><span class="err">â”‚</span><span class="n">Comp</span><span class="o">.</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Deadline</span><span class="w"> </span><span class="n">D</span><span class="w">    </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="n">T1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">50</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">20</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mf">150.</span><span class="o">..</span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="n">T2</span><span class="w">    </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">100</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">35</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mf">200.</span><span class="o">..</span><span class="w">    </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Time</span><span class="w"> </span><span class="mi">0</span><span class="p">:</span><span class="w">                                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">T1</span><span class="w"> </span><span class="n">deadline</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="n">T2</span><span class="w"> </span><span class="n">deadline</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Execute</span><span class="w"> </span><span class="n">T1</span><span class="w"> </span><span class="n">first</span><span class="w">                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Time</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class="p">(</span><span class="n">T1</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">instance</span><span class="p">):</span><span class="w">                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">T1</span><span class="w"> </span><span class="n">deadline</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="n">T2</span><span class="w"> </span><span class="n">deadline</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="p">(</span><span class="n">tied</span><span class="p">)</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Tie</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Arbitrary</span><span class="w"> </span><span class="n">selection</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">criteria</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">RMS</span><span class="w"> </span><span class="n">vs</span><span class="w"> </span><span class="n">EDF</span><span class="p">:</span><span class="w">                                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Feature</span><span class="w">     </span><span class="err">â”‚</span><span class="w">      </span><span class="n">RMS</span><span class="w">       </span><span class="err">â”‚</span><span class="w">      </span><span class="n">EDF</span><span class="w">        </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Priority</span><span class="w">     </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Static</span><span class="w">         </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Dynamic</span><span class="w">         </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Max</span><span class="w"> </span><span class="n">Util</span><span class="o">.</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="o">~</span><span class="mi">69</span><span class="o">%</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="err">â†’âˆ</span><span class="p">)</span><span class="w">     </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w">            </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Complexity</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Low</span><span class="w">            </span><span class="err">â”‚</span><span class="w"> </span><span class="n">High</span><span class="w">            </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Overhead</span><span class="w">     </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Low</span><span class="w">            </span><span class="err">â”‚</span><span class="w"> </span><span class="n">High</span><span class="w">            </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Overload</span><span class="w">     </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Predictable</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Domino</span><span class="w"> </span><span class="n">effect</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="5-linux-cfs">5. Linux CFS<a class="header-link" href="#5-linux-cfs" title="Permanent link">&para;</a></h2>
<h3 id="cfs-overview">CFS Overview<a class="header-link" href="#cfs-overview" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         CFS (Completely Fair Scheduler)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Linux default scheduler since 2.6.23 (2007~)          â”‚
â”‚                                                         â”‚
â”‚  Core idea:                                             â”‚
â”‚  â€¢ Fairly distribute CPU time to all processes         â”‚
â”‚  â€¢ Track fairness via virtual runtime                  â”‚
â”‚  â€¢ Efficiently manage with Red-Black tree              â”‚
â”‚                                                         â”‚
â”‚  Virtual runtime (vruntime):                            â”‚
â”‚  â€¢ Weighted time process has used CPU                  â”‚
â”‚  â€¢ High priority â†’ increases slowly                    â”‚
â”‚  â€¢ Low priority â†’ increases quickly                    â”‚
â”‚                                                         â”‚
â”‚  Scheduling decision:                                   â”‚
â”‚  â€¢ Always select process with smallest vruntime        â”‚
â”‚  â€¢ = Process that has run least                        â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="cfs-operation">CFS Operation<a class="header-link" href="#cfs-operation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">                    </span><span class="nv">CFS</span><span class="w"> </span><span class="nv">Operation</span><span class="w">                        </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                         </span>â”‚
â”‚<span class="w">  </span><span class="nv">Red</span><span class="o">-</span><span class="nv">Black</span><span class="w"> </span><span class="nv">tree</span><span class="w"> </span><span class="ss">(</span><span class="nv">sorted</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">vruntime</span><span class="ss">)</span>:<span class="w">                  </span>â”‚
â”‚<span class="w">                                                         </span>â”‚
â”‚<span class="w">                    </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”<span class="w">                            </span>â”‚
â”‚<span class="w">                    </span>â”‚<span class="w"> </span><span class="nv">P2</span>:<span class="mi">50</span><span class="w"> </span>â”‚<span class="w">                            </span>â”‚
â”‚<span class="w">                    </span>â””â”€â”€â”€â”¬â”€â”€â”€â”˜<span class="w">                            </span>â”‚
â”‚<span class="w">              </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">                      </span>â”‚
â”‚<span class="w">          </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”<span class="w">           </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”<span class="w">                  </span>â”‚
â”‚<span class="w">          </span>â”‚<span class="w"> </span><span class="nv">P1</span>:<span class="mi">30</span><span class="w"> </span>â”‚<span class="w">           </span>â”‚<span class="w"> </span><span class="nv">P3</span>:<span class="mi">80</span><span class="w"> </span>â”‚<span class="w">                  </span>â”‚
â”‚<span class="w">          </span>â””â”€â”€â”€â”¬â”€â”€â”€â”˜<span class="w">           </span>â””â”€â”€â”€â”¬â”€â”€â”€â”˜<span class="w">                  </span>â”‚
â”‚<span class="w">        </span>â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”<span class="w">       </span>â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”<span class="w">                </span>â”‚
â”‚<span class="w">    </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”<span class="w">   </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”<span class="w"> </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”<span class="w">          </span>â”‚
â”‚<span class="w">    </span>â”‚<span class="w"> </span><span class="nv">P4</span>:<span class="mi">10</span><span class="w"> </span>â”‚<span class="w">   </span>â”‚<span class="w"> </span><span class="nv">P5</span>:<span class="mi">40</span><span class="w"> </span>â”‚<span class="w"> </span>â”‚<span class="w"> </span><span class="nv">P6</span>:<span class="mi">70</span><span class="w"> </span>â”‚<span class="w">  </span>â”‚<span class="w"> </span><span class="nv">P7</span>:<span class="mi">100</span>â”‚<span class="w">          </span>â”‚
â”‚<span class="w">    </span>â””â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">   </span>â””â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w"> </span>â””â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">          </span>â”‚
â”‚<span class="w">    </span>â†‘<span class="w">                                                    </span>â”‚
â”‚<span class="w">    </span><span class="nv">Leftmost</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">Smallest</span><span class="w"> </span><span class="nv">vruntime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">Next</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">execute</span><span class="w">      </span>â”‚
â”‚<span class="w">                                                         </span>â”‚
â”‚<span class="w">  </span><span class="nv">Over</span><span class="w"> </span><span class="nv">time</span>:<span class="w">                                             </span>â”‚
â”‚<span class="w">  </span><span class="mi">1</span>.<span class="w"> </span><span class="nv">Execute</span><span class="w"> </span><span class="nv">P4</span>,<span class="w"> </span><span class="nv">vruntime</span><span class="w"> </span><span class="nv">increases</span><span class="w"> </span><span class="ss">(</span><span class="mi">10</span><span class="w"> </span>â†’<span class="w"> </span><span class="mi">25</span><span class="ss">)</span><span class="w">           </span>â”‚
â”‚<span class="w">  </span><span class="mi">2</span>.<span class="w"> </span><span class="k">If</span><span class="w"> </span><span class="nv">P4</span><span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">longer</span><span class="w"> </span><span class="nv">minimum</span>,<span class="w"> </span><span class="nv">switch</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">another</span><span class="w"> </span><span class="nv">process</span><span class="w"> </span>â”‚
â”‚<span class="w">  </span><span class="mi">3</span>.<span class="w"> </span><span class="nv">Restructure</span><span class="w"> </span><span class="nv">tree</span>,<span class="w"> </span><span class="nv">select</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">minimum</span><span class="w">               </span>â”‚
â”‚<span class="w">                                                         </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="cfs-timeslice-calculation">CFS Timeslice Calculation<a class="header-link" href="#cfs-timeslice-calculation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                CFS Timeslice Calculation                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  CFS uses target latency instead of fixed timeslice    â”‚
â”‚                                                         â”‚
â”‚  Target Latency: Default 6ms (adjustable)              â”‚
â”‚                                                         â”‚
â”‚  Calculation:                                           â”‚
â”‚  Process timeslice = Target latency Ã— (weight/total)   â”‚
â”‚                                                         â”‚
â”‚  Example (n=3, same priority):                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Target latency = 6ms                              â”‚  â”‚
â”‚  â”‚ Each process weight = 1024 (nice 0)              â”‚  â”‚
â”‚  â”‚ Total weight = 1024 Ã— 3 = 3072                    â”‚  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â”‚ Each timeslice = 6ms Ã— (1024/3072) = 2ms         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚  Example (different priorities):                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ P1: nice -5 (weight 3121)                        â”‚  â”‚
â”‚  â”‚ P2: nice 0 (weight 1024)                         â”‚  â”‚
â”‚  â”‚ P3: nice 5 (weight 335)                          â”‚  â”‚
â”‚  â”‚ Total weight = 4480                              â”‚  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â”‚ P1 timeslice = 6ms Ã— (3121/4480) â‰ˆ 4.2ms         â”‚  â”‚
â”‚  â”‚ P2 timeslice = 6ms Ã— (1024/4480) â‰ˆ 1.4ms         â”‚  â”‚
â”‚  â”‚ P3 timeslice = 6ms Ã— (335/4480) â‰ˆ 0.4ms          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚  Nice value and weight:                                 â”‚
â”‚  â€¢ nice -20 (highest): weight 88761                    â”‚
â”‚  â€¢ nice 0 (default): weight 1024                       â”‚
â”‚  â€¢ nice 19 (lowest): weight 15                         â”‚
â”‚  â€¢ ~10% difference per nice 1 difference               â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<hr />
<h2 id="6-practice-problems">6. Practice Problems<a class="header-link" href="#6-practice-problems" title="Permanent link">&para;</a></h2>
<h3 id="problem-1-mlfq">Problem 1: MLFQ<a class="header-link" href="#problem-1-mlfq" title="Permanent link">&para;</a></h3>
<p>In an MLFQ system with 3 queues:
- Q0: TQ=4ms
- Q1: TQ=8ms
- Q2: FCFS</p>
<p>Explain the execution for the first 20ms when process A (CPU-bound, 30ms job) and process B (I/O-bound, 3ms CPU + I/O repeat) arrive simultaneously.</p>
<details>
<summary>View Answer</summary>

**Initial state:**
- Q0: [A, B]
- Q1: []
- Q2: []

**Time 0-3ms:** B executes (3ms), I/O request â†’ B stays in Q0
**Time 3-7ms:** A executes (4ms), TQ exhausted â†’ A demoted to Q1
**Time 7-10ms:** B completes I/O and arrives, B executes (3ms)
**Time 10-18ms:** A executes (8ms), TQ exhausted â†’ A demoted to Q2
**Time 18-20ms:** If B returned, B executes...

**Result:**
- B, being a short job, gets quick service in high queue
- A gradually moves to lower queues using long timeslice

</details>

<h3 id="problem-2-rms-schedulability">Problem 2: RMS Schedulability<a class="header-link" href="#problem-2-rms-schedulability" title="Permanent link">&para;</a></h3>
<p>Check if the following task set is schedulable with RMS.</p>
<table>
<thead>
<tr>
<th>Task</th>
<th>Period (P)</th>
<th>Execution Time (C)</th>
</tr>
</thead>
<tbody>
<tr>
<td>T1</td>
<td>100</td>
<td>20</td>
</tr>
<tr>
<td>T2</td>
<td>150</td>
<td>30</td>
</tr>
<tr>
<td>T3</td>
<td>350</td>
<td>80</td>
</tr>
</tbody>
</table>
<details>
<summary>View Answer</summary>

**Total Utilization Calculation:**
- U1 = 20/100 = 0.20
- U2 = 30/150 = 0.20
- U3 = 80/350 = 0.23

**Total U = 0.20 + 0.20 + 0.23 = 0.63**

**RMS Schedulability Condition (n=3):**
- Bound = 3 Ã— (2^(1/3) - 1) = 3 Ã— 0.26 = 0.78

**Conclusion:**
- 0.63 < 0.78
- **Schedulable**

</details>

<h3 id="problem-3-processor-affinity">Problem 3: Processor Affinity<a class="header-link" href="#problem-3-processor-affinity" title="Permanent link">&para;</a></h3>
<p>Explain the difference between soft affinity and hard affinity, and provide examples of situations suitable for each.</p>
<details>
<summary>View Answer</summary>

**Soft Affinity:**
- Definition: OS tries to run process on same CPU, but can move if load balancing needed
- Suitable situations:
  - General applications
  - When balance between cache efficiency and load balancing needed
  - Ex: Web servers, databases

**Hard Affinity:**
- Definition: Force process to run only on specific CPU set
- Suitable situations:
  - Real-time systems (need predictable performance)
  - NUMA systems optimizing local memory access
  - Dedicated CPU core allocation
  - Ex: Game server physics engine thread, high-frequency trading systems

</details>

<h3 id="problem-4-edf-vs-rms">Problem 4: EDF vs RMS<a class="header-link" href="#problem-4-edf-vs-rms" title="Permanent link">&para;</a></h3>
<p>Compare RMS and EDF for the following task set.</p>
<table>
<thead>
<tr>
<th>Task</th>
<th>Period</th>
<th>Execution Time</th>
</tr>
</thead>
<tbody>
<tr>
<td>T1</td>
<td>4</td>
<td>1</td>
</tr>
<tr>
<td>T2</td>
<td>5</td>
<td>2</td>
</tr>
<tr>
<td>T3</td>
<td>10</td>
<td>3</td>
</tr>
</tbody>
</table>
<details>
<summary>View Answer</summary>

**Utilization:**
- U = 1/4 + 2/5 + 3/10 = 0.25 + 0.4 + 0.3 = 0.95

**RMS Analysis:**
- Bound = 3 Ã— (2^(1/3) - 1) â‰ˆ 0.78
- 0.95 > 0.78 â†’ Not guaranteed by RMS
- (May actually be schedulable but not guaranteed)

**EDF Analysis:**
- Bound = 1.0 (100%)
- 0.95 < 1.0 â†’ Schedulable with EDF!

**Conclusion:**
- This task set is not guaranteed schedulable by RMS
- But schedulable with EDF

</details>

<h3 id="problem-5-linux-cfs">Problem 5: Linux CFS<a class="header-link" href="#problem-5-linux-cfs" title="Permanent link">&para;</a></h3>
<p>When process A has nice value 0 and process B has nice value 5, calculate how much more CPU time A receives compared to B.</p>
<details>
<summary>View Answer</summary>

**Weights (approximate):**
- nice 0: weight 1024
- nice 5: weight ~335 (~1.25x per nice 1 difference)

**CPU Time Ratio:**
- A's ratio = 1024 / (1024 + 335) = 1024 / 1359 â‰ˆ 0.753 (75.3%)
- B's ratio = 335 / 1359 â‰ˆ 0.247 (24.7%)

**A receives about 3 times more CPU time than B**

(Exact ratio: 1024/335 â‰ˆ 3.06x)

</details>

<hr />
<h2 id="next-steps">Next Steps<a class="header-link" href="#next-steps" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="./07_Synchronization_Basics.md">07_Synchronization_Basics.md</a> - Race Conditions and Critical Sections</li>
</ul>
<hr />
<h2 id="references">References<a class="header-link" href="#references" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://pages.cs.wisc.edu/~remzi/OSTEP/cpu-sched-mlfq.pdf">OSTEP - MLFQ</a></li>
<li><a href="https://www.kernel.org/doc/html/latest/scheduler/sched-design-CFS.html">Linux CFS Documentation</a></li>
<li><a href="https://www.pearson.com/us/higher-education/program/Liu-Real-Time-Systems/PGM293020.html">Real-Time Systems (Jane Liu)</a></li>
</ul>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/OS_Theory/05_Scheduling_Algorithms.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Scheduling Algorithms</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/OS_Theory/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/OS_Theory/07_Synchronization_Basics.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Synchronization Basics</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">â†‘</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'en';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}