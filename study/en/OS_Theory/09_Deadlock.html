{% raw %}
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deadlock - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/en/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/en/" class="nav-item ">
                    <span class="nav-icon">ğŸ </span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">ğŸ’»</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/en/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" selected>
                        English
                    </option>
                    
                    <option value="ko" >
                        í•œêµ­ì–´
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">â˜€ï¸</span>
                    <span class="theme-icon dark">ğŸŒ™</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/en/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/en/OS_Theory/">OS Theory</a>
    <span class="separator">/</span>
    <span class="current">Deadlock</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>Deadlock</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/OS_Theory/08_Synchronization_Tools.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Synchronization Tools</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/OS_Theory/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/OS_Theory/10_Memory_Management_Basics.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Memory Management Basics â­â­</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#1-what-is-deadlock">1. What is Deadlock?</a><ul>
<li><a href="#definition">Definition</a></li>
<li><a href="#real-world-examples">Real-World Examples</a></li>
<li><a href="#code-example">Code Example</a></li>
</ul>
</li>
<li><a href="#2-deadlock-necessary-conditions">2. Deadlock Necessary Conditions</a><ul>
<li><a href="#four-necessary-conditions">Four Necessary Conditions</a></li>
<li><a href="#circular-wait-visualization">Circular Wait Visualization</a></li>
</ul>
</li>
<li><a href="#3-resource-allocation-graph">3. Resource Allocation Graph</a><ul>
<li><a href="#graph-notation">Graph Notation</a></li>
<li><a href="#graph-with-deadlock">Graph with Deadlock</a></li>
<li><a href="#cycles-and-deadlock">Cycles and Deadlock</a></li>
</ul>
</li>
<li><a href="#4-deadlock-prevention">4. Deadlock Prevention</a><ul>
<li><a href="#breaking-one-of-four-conditions">Breaking One of Four Conditions</a></li>
<li><a href="#circular-wait-prevention-code">Circular Wait Prevention Code</a></li>
</ul>
</li>
<li><a href="#5-deadlock-avoidance">5. Deadlock Avoidance</a><ul>
<li><a href="#safe-state-vs-unsafe-state">Safe State vs Unsafe State</a></li>
<li><a href="#bankers-algorithm">Banker's Algorithm</a></li>
<li><a href="#bankers-algorithm-example">Banker's Algorithm Example</a></li>
<li><a href="#bankers-algorithm-code">Banker's Algorithm Code</a></li>
</ul>
</li>
<li><a href="#6-deadlock-detection-and-recovery">6. Deadlock Detection and Recovery</a><ul>
<li><a href="#detection-algorithm">Detection Algorithm</a></li>
<li><a href="#wait-for-graph-example">Wait-for Graph Example</a></li>
<li><a href="#deadlock-recovery-methods">Deadlock Recovery Methods</a></li>
<li><a href="#deadlock-handling-method-comparison">Deadlock Handling Method Comparison</a></li>
</ul>
</li>
<li><a href="#7-practice-problems">7. Practice Problems</a><ul>
<li><a href="#problem-1-deadlock-necessary-conditions">Problem 1: Deadlock Necessary Conditions</a></li>
<li><a href="#problem-2-resource-allocation-graph">Problem 2: Resource Allocation Graph</a></li>
<li><a href="#problem-3-bankers-algorithm">Problem 3: Banker's Algorithm</a></li>
<li><a href="#problem-4-circular-wait-prevention">Problem 4: Circular Wait Prevention</a></li>
<li><a href="#problem-5-deadlock-recovery">Problem 5: Deadlock Recovery</a></li>
</ul>
</li>
<li><a href="#next-steps">Next Steps</a></li>
<li><a href="#references">References</a></li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="deadlock">Deadlock<a class="header-link" href="#deadlock" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="header-link" href="#overview" title="Permanent link">&para;</a></h2>
<p>Deadlock is a state where two or more processes wait indefinitely for each other to release resources. In this lesson, we'll learn about the four necessary conditions for deadlock, resource allocation graphs, and methods for prevention, avoidance, detection, and recovery.</p>
<hr />
<h2 id="table-of-contents">Table of Contents<a class="header-link" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#1-what-is-deadlock">What is Deadlock?</a></li>
<li><a href="#2-deadlock-necessary-conditions">Deadlock Necessary Conditions</a></li>
<li><a href="#3-resource-allocation-graph">Resource Allocation Graph</a></li>
<li><a href="#4-deadlock-prevention">Deadlock Prevention</a></li>
<li><a href="#5-deadlock-avoidance">Deadlock Avoidance</a></li>
<li><a href="#6-deadlock-detection-and-recovery">Deadlock Detection and Recovery</a></li>
<li><a href="#7-practice-problems">Practice Problems</a></li>
</ol>
<hr />
<h2 id="1-what-is-deadlock">1. What is Deadlock?<a class="header-link" href="#1-what-is-deadlock" title="Permanent link">&para;</a></h2>
<h3 id="definition">Definition<a class="header-link" href="#definition" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">                    </span><span class="nv">Deadlock</span><span class="w">                              </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                         </span>â”‚
â”‚<span class="w">  </span><span class="nv">Deadlock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">Circular</span><span class="w"> </span><span class="nv">waiting</span><span class="w"> </span><span class="nv">state</span><span class="w">                      </span>â”‚
â”‚<span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="nv">Two</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">more</span><span class="w"> </span><span class="nv">processes</span><span class="w"> </span><span class="k">wait</span><span class="w"> </span><span class="nv">indefinitely</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>â”‚
â”‚<span class="w">             </span><span class="nv">each</span><span class="w"> </span><span class="nv">other</span><span class="err">&#39;s resources                      â”‚</span>
<span class="err">â”‚                                                         â”‚</span>
<span class="err">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚</span>
<span class="err">â”‚  â”‚                                                 â”‚    â”‚</span>
<span class="err">â”‚  â”‚    Process A                 Process B         â”‚    â”‚</span>
<span class="err">â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”         â”‚    â”‚</span>
<span class="err">â”‚  â”‚    â”‚       â”‚ â”€â”€R2 requestâ”€â”€â–¶â”‚       â”‚         â”‚    â”‚</span>
<span class="err">â”‚  â”‚    â”‚  R1   â”‚                â”‚  R2   â”‚         â”‚    â”‚</span>
<span class="err">â”‚  â”‚    â”‚ holds â”‚ â—€â”€â”€R1 requestâ”€â”€â”‚ holds â”‚         â”‚    â”‚</span>
<span class="err">â”‚  â”‚    â”‚       â”‚                â”‚       â”‚         â”‚    â”‚</span>
<span class="err">â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚    â”‚</span>
<span class="err">â”‚  â”‚                                                 â”‚    â”‚</span>
<span class="err">â”‚  â”‚    A waits for R2, B waits for R1               â”‚    â”‚</span>
<span class="err">â”‚  â”‚    â†’ Both wait forever (deadlock)               â”‚    â”‚</span>
<span class="err">â”‚  â”‚                                                 â”‚    â”‚</span>
<span class="err">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚</span>
<span class="err">â”‚                                                         â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="real-world-examples">Real-World Examples<a class="header-link" href="#real-world-examples" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">                   </span><span class="nv">Real</span><span class="o">-</span><span class="nv">World</span><span class="w"> </span><span class="nv">Deadlock</span><span class="w"> </span><span class="nv">Examples</span><span class="w">           </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                         </span>â”‚
â”‚<span class="w">  </span><span class="mi">1</span>.<span class="w"> </span><span class="nv">Intersection</span><span class="w"> </span><span class="nv">deadlock</span>:<span class="w">                              </span>â”‚
â”‚<span class="w">                                                         </span>â”‚
â”‚<span class="w">              </span>â”‚<span class="w">     </span>â”‚<span class="w">                                    </span>â”‚
â”‚<span class="w">              </span>â”‚<span class="w"> </span>â–²<span class="w">   </span>â”‚<span class="w">                                    </span>â”‚
â”‚<span class="w">              </span>â”‚<span class="w"> </span>â”‚<span class="w">   </span>â”‚<span class="w">                                    </span>â”‚
â”‚<span class="w">       </span>â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€<span class="w">                             </span>â”‚
â”‚<span class="w">          </span>â—€â”€â”€â”€â”‚<span class="w">     </span>â”‚<span class="w">                                    </span>â”‚
â”‚<span class="w">       </span>â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€<span class="w">                             </span>â”‚
â”‚<span class="w">              </span>â”‚<span class="w">     </span>â”‚â”€â”€â”€â–¶<span class="w">                                </span>â”‚
â”‚<span class="w">       </span>â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€<span class="w">                             </span>â”‚
â”‚<span class="w">              </span>â”‚<span class="w">   </span>â”‚<span class="w"> </span>â”‚<span class="w">                                    </span>â”‚
â”‚<span class="w">              </span>â”‚<span class="w">   </span>â–¼<span class="w"> </span>â”‚<span class="w">                                    </span>â”‚
â”‚<span class="w">                                                         </span>â”‚
â”‚<span class="w">     </span><span class="nv">Four</span><span class="w"> </span><span class="nv">cars</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">waiting</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">car</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">front</span><span class="w">          </span>â”‚
â”‚<span class="w">                                                         </span>â”‚
â”‚<span class="w">  </span><span class="mi">2</span>.<span class="w"> </span><span class="nv">Bridge</span><span class="w"> </span><span class="nv">deadlock</span>:<span class="w">                                    </span>â”‚
â”‚<span class="w">                                                         </span>â”‚
â”‚<span class="w">     </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">                       </span>â”‚
â”‚<span class="w">     </span>â”‚<span class="w">     </span>â—€â”€â”€â”€<span class="w">   </span>â”€â”€â”€â–¶<span class="w">          </span>â”‚<span class="w">                       </span>â”‚
â”‚<span class="w">     </span>â”‚<span class="w">  </span><span class="nv">Car</span><span class="w"> </span><span class="nv">A</span><span class="w">    </span><span class="nv">Car</span><span class="w"> </span><span class="nv">B</span><span class="w">           </span>â”‚<span class="w">                       </span>â”‚
â”‚<span class="w">     </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">                       </span>â”‚
â”‚<span class="w">     </span><span class="nv">Both</span><span class="w"> </span><span class="nv">entered</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">opposite</span><span class="w"> </span><span class="nv">ends</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">narrow</span><span class="w"> </span><span class="nv">bridge</span><span class="w">    </span>â”‚
â”‚<span class="w">                                                         </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="code-example">Code Example<a class="header-link" href="#code-example" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pthread.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span>

<span class="n">pthread_mutex_t</span><span class="w"> </span><span class="n">lock1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PTHREAD_MUTEX_INITIALIZER</span><span class="p">;</span>
<span class="n">pthread_mutex_t</span><span class="w"> </span><span class="n">lock2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PTHREAD_MUTEX_INITIALIZER</span><span class="p">;</span>

<span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="nf">thread_A</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">pthread_mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock1</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Thread A: acquired lock1</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w">  </span><span class="c1">// Increase deadlock probability</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Thread A: waiting for lock2</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">pthread_mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock2</span><span class="p">);</span><span class="w">  </span><span class="c1">// Deadlock!</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Thread A: acquired both</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">pthread_mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock2</span><span class="p">);</span>
<span class="w">    </span><span class="n">pthread_mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock1</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="nf">thread_B</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">pthread_mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock2</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Thread B: acquired lock2</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w">  </span><span class="c1">// Increase deadlock probability</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Thread B: waiting for lock1</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">pthread_mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock1</span><span class="p">);</span><span class="w">  </span><span class="c1">// Deadlock!</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Thread B: acquired both</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">pthread_mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock1</span><span class="p">);</span>
<span class="w">    </span><span class="n">pthread_mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock2</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">pthread_t</span><span class="w"> </span><span class="n">tA</span><span class="p">,</span><span class="w"> </span><span class="n">tB</span><span class="p">;</span>

<span class="w">    </span><span class="n">pthread_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tA</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">thread_A</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<span class="w">    </span><span class="n">pthread_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tB</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">thread_B</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">    </span><span class="n">pthread_join</span><span class="p">(</span><span class="n">tA</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<span class="w">    </span><span class="n">pthread_join</span><span class="p">(</span><span class="n">tB</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Done</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// Never reached if deadlocked</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm">Output (when deadlocked):</span>
<span class="cm">Thread A: acquired lock1</span>
<span class="cm">Thread B: acquired lock2</span>
<span class="cm">Thread A: waiting for lock2</span>
<span class="cm">Thread B: waiting for lock1</span>
<span class="cm">... (wait forever)</span>
<span class="cm">*/</span>
</code></pre></div>

<hr />
<h2 id="2-deadlock-necessary-conditions">2. Deadlock Necessary Conditions<a class="header-link" href="#2-deadlock-necessary-conditions" title="Permanent link">&para;</a></h2>
<h3 id="four-necessary-conditions">Four Necessary Conditions<a class="header-link" href="#four-necessary-conditions" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">              </span><span class="nv">Four</span><span class="w"> </span><span class="nv">Necessary</span><span class="w"> </span><span class="nv">Conditions</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">Deadlock</span><span class="w">      </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                         </span>â”‚
â”‚<span class="w">  </span><span class="nv">All</span><span class="w"> </span><span class="nv">four</span><span class="w"> </span><span class="nv">conditions</span><span class="w"> </span><span class="nv">must</span><span class="w"> </span><span class="nv">hold</span><span class="w"> </span><span class="nv">simultaneously</span><span class="w"> </span><span class="k">for</span><span class="w">       </span>â”‚
â”‚<span class="w">  </span><span class="nv">deadlock</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">occur</span><span class="w"> </span><span class="ss">(</span><span class="k">break</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span>â†’<span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">deadlock</span><span class="ss">)</span><span class="w">            </span>â”‚
â”‚<span class="w">                                                         </span>â”‚
â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w"> </span><span class="mi">1</span>.<span class="w"> </span><span class="nv">Mutual</span><span class="w"> </span><span class="nv">Exclusion</span><span class="w">                               </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nv">Resource</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">used</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">process</span><span class="w">     </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">      </span><span class="nv">at</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">time</span><span class="w">                                    </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nv">Other</span><span class="w"> </span><span class="nv">processes</span><span class="w"> </span><span class="k">wait</span><span class="w"> </span><span class="k">until</span><span class="w"> </span><span class="nv">resource</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">released</span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">  </span>â”‚
â”‚<span class="w">                                                         </span>â”‚
â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w"> </span><span class="mi">2</span>.<span class="w"> </span><span class="nv">Hold</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="k">Wait</span><span class="w">                                  </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nv">Process</span><span class="w"> </span><span class="nv">holds</span><span class="w"> </span><span class="nv">resources</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="nv">waiting</span><span class="w"> </span><span class="k">for</span><span class="w">    </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">      </span><span class="nv">additional</span><span class="w"> </span><span class="nv">resources</span><span class="w">                         </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nv">Requests</span><span class="w"> </span><span class="nv">more</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="nv">keeping</span><span class="w"> </span><span class="nv">what</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">has</span><span class="w">      </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">  </span>â”‚
â”‚<span class="w">                                                         </span>â”‚
â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w"> </span><span class="mi">3</span>.<span class="w"> </span><span class="nv">No</span><span class="w"> </span><span class="nv">Preemption</span><span class="w">                                  </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nv">Resources</span><span class="w"> </span><span class="nv">cannot</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">forcibly</span><span class="w"> </span><span class="nv">taken</span><span class="w"> </span><span class="nv">away</span><span class="w">      </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nv">Process</span><span class="w"> </span><span class="nv">must</span><span class="w"> </span><span class="nv">voluntarily</span><span class="w"> </span><span class="nv">release</span><span class="w"> </span><span class="nv">them</span><span class="w">        </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">  </span>â”‚
â”‚<span class="w">                                                         </span>â”‚
â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w"> </span><span class="mi">4</span>.<span class="w"> </span><span class="nv">Circular</span><span class="w"> </span><span class="k">Wait</span><span class="w">                                  </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nv">In</span><span class="w"> </span><span class="nv">process</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span>{<span class="nv">P0</span>,<span class="w"> </span><span class="nv">P1</span>,<span class="w"> </span>...,<span class="w"> </span><span class="nv">Pn</span>}<span class="w">            </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nv">Circular</span><span class="w"> </span><span class="nv">chain</span><span class="w"> </span><span class="nv">exists</span>:<span class="w"> </span><span class="nv">P0</span>â†’<span class="nv">P1</span>â†’<span class="nv">P2</span>â†’...â†’<span class="nv">Pn</span>â†’<span class="nv">P0</span><span class="w">   </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">  </span>â”‚
â”‚<span class="w">                                                         </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="circular-wait-visualization">Circular Wait Visualization<a class="header-link" href="#circular-wait-visualization" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">                    </span><span class="nv">Circular</span><span class="w"> </span><span class="k">Wait</span><span class="w"> </span><span class="nv">Example</span><span class="w">                 </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                         </span>â”‚
â”‚<span class="w">  </span><span class="nv">Three</span><span class="w"> </span><span class="nv">processes</span>,<span class="w"> </span><span class="nv">three</span><span class="w"> </span><span class="nv">resources</span>:<span class="w">                      </span>â”‚
â”‚<span class="w">                                                         </span>â”‚
â”‚<span class="w">       </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”<span class="w">                                         </span>â”‚
â”‚<span class="w">       </span>â”‚<span class="w">  </span><span class="nv">P0</span><span class="w">   </span>â”‚<span class="w">                                         </span>â”‚
â”‚<span class="w">       </span>â””â”€â”€â”€â”¬â”€â”€â”€â”˜<span class="w">                                         </span>â”‚
â”‚<span class="w">      </span><span class="nv">holds</span>:<span class="w"> </span><span class="nv">R0</span><span class="w">                                          </span>â”‚
â”‚<span class="w">      </span><span class="nv">waits</span>:<span class="w"> </span><span class="nv">R1</span><span class="w"> </span>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">                             </span>â”‚
â”‚<span class="w">           </span>â”‚<span class="w">                </span>â”‚<span class="w">                             </span>â”‚
â”‚<span class="w">           </span>â–¼<span class="w">                </span>â–¼<span class="w">                             </span>â”‚
â”‚<span class="w">       </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”<span class="w">       </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”<span class="w">                         </span>â”‚
â”‚<span class="w">       </span>â”‚<span class="w">  </span><span class="nv">R1</span><span class="w">   </span>â”‚<span class="w">       </span>â”‚<span class="w">  </span><span class="nv">P1</span><span class="w">   </span>â”‚<span class="w">                         </span>â”‚
â”‚<span class="w">       </span>â””â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">       </span>â””â”€â”€â”€â”¬â”€â”€â”€â”˜<span class="w">                         </span>â”‚
â”‚<span class="w">                      </span><span class="nv">holds</span>:<span class="w"> </span><span class="nv">R1</span><span class="w">                          </span>â”‚
â”‚<span class="w">                      </span><span class="nv">waits</span>:<span class="w"> </span><span class="nv">R2</span><span class="w"> </span>â”€â”€â”€â”€â”€â”<span class="w">                   </span>â”‚
â”‚<span class="w">                           </span>â”‚<span class="w">         </span>â”‚<span class="w">                   </span>â”‚
â”‚<span class="w">                           </span>â–¼<span class="w">         </span>â–¼<span class="w">                   </span>â”‚
â”‚<span class="w">                       </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”<span class="w">                </span>â”‚
â”‚<span class="w">                       </span>â”‚<span class="w">  </span><span class="nv">R2</span><span class="w">   </span>â”‚â”‚<span class="w">  </span><span class="nv">P2</span><span class="w">   </span>â”‚<span class="w">                </span>â”‚
â”‚<span class="w">                       </span>â””â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”¬â”€â”€â”€â”˜<span class="w">                </span>â”‚
â”‚<span class="w">                              </span><span class="nv">holds</span>:<span class="w"> </span><span class="nv">R2</span><span class="w">                  </span>â”‚
â”‚<span class="w">                              </span><span class="nv">waits</span>:<span class="w"> </span><span class="nv">R0</span><span class="w"> </span>â”€â”€â”€â”€â–¶<span class="w"> </span><span class="nv">R0</span><span class="w">         </span>â”‚
â”‚<span class="w">                                    </span>â”‚<span class="w">       </span><span class="ss">(</span><span class="nv">P0</span><span class="w"> </span><span class="nv">holds</span><span class="ss">)</span><span class="w">   </span>â”‚
â”‚<span class="w">                                    </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚<span class="w">                                                        </span>â”‚â”‚
â”‚<span class="w">  </span><span class="nv">P0</span><span class="w"> </span>â†’<span class="w"> </span><span class="nv">R1</span><span class="w"> </span>â†’<span class="w"> </span><span class="nv">P1</span><span class="w"> </span>â†’<span class="w"> </span><span class="nv">R2</span><span class="w"> </span>â†’<span class="w"> </span><span class="nv">P2</span><span class="w"> </span>â†’<span class="w"> </span><span class="nv">R0</span><span class="w"> </span>â†’<span class="w"> </span><span class="nv">P0</span><span class="w"> </span><span class="ss">(</span><span class="nv">circular</span><span class="o">!</span><span class="ss">)</span><span class="w">         </span>â”‚â”‚
â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚<span class="w">                                                         </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<hr />
<h2 id="3-resource-allocation-graph">3. Resource Allocation Graph<a class="header-link" href="#3-resource-allocation-graph" title="Permanent link">&para;</a></h2>
<h3 id="graph-notation">Graph Notation<a class="header-link" href="#graph-notation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">               </span><span class="nx">Resource</span><span class="w"> </span><span class="nx">Allocation</span><span class="w"> </span><span class="nx">Graph</span><span class="w"> </span><span class="p">(</span><span class="nx">RAG</span><span class="p">)</span><span class="w">            </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nx">Nodes</span><span class="p">:</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Process</span><span class="p">:</span><span class="w"> </span><span class="err">â—‹</span><span class="w"> </span><span class="p">(</span><span class="nx">circle</span><span class="p">)</span><span class="w">                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Resource</span><span class="w"> </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="err">â–¡</span><span class="w"> </span><span class="p">(</span><span class="nx">rectangle</span><span class="p">)</span><span class="w">                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nx">Internal</span><span class="w"> </span><span class="nx">dots</span><span class="w"> </span><span class="p">(</span><span class="err">â—</span><span class="p">):</span><span class="w"> </span><span class="nx">number</span><span class="w"> </span><span class="nx">of</span><span class="w"> </span><span class="nx">resource</span><span class="w"> </span><span class="nx">instances</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nx">Edges</span><span class="p">:</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Request</span><span class="w"> </span><span class="nx">edge</span><span class="p">:</span><span class="w"> </span><span class="nx">Pi</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="nx">Rj</span><span class="w"> </span><span class="p">(</span><span class="nx">Pi</span><span class="w"> </span><span class="nx">requests</span><span class="w"> </span><span class="nx">Rj</span><span class="p">)</span><span class="w">               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Assignment</span><span class="w"> </span><span class="nx">edge</span><span class="p">:</span><span class="w"> </span><span class="nx">Rj</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="nx">Pi</span><span class="w"> </span><span class="p">(</span><span class="nx">Rj</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">assigned</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">Pi</span><span class="p">)</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">        </span><span class="nx">Example</span><span class="w">                                    </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â—‹</span><span class="w"> </span><span class="nx">P1</span><span class="w"> </span><span class="err">â”€â”€â”€â”€</span><span class="nx">request</span><span class="err">â”€â”€â”€â–¶</span><span class="w"> </span><span class="err">â–¡</span><span class="w"> </span><span class="nx">R1</span><span class="w">                     </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â—</span><span class="w"> </span><span class="err">â—</span><span class="w">                     </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                         </span><span class="err">â–¼</span><span class="w"> </span><span class="nx">assignment</span><span class="w">              </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                         </span><span class="err">â—‹</span><span class="w"> </span><span class="nx">P2</span><span class="w">                      </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="nx">P1</span><span class="w"> </span><span class="nx">requests</span><span class="w"> </span><span class="nx">R1</span><span class="w">                                </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="nx">One</span><span class="w"> </span><span class="nx">instance</span><span class="w"> </span><span class="nx">of</span><span class="w"> </span><span class="nx">R1</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">assigned</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">P2</span><span class="w">          </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="nx">R1</span><span class="w"> </span><span class="nx">has</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nx">instances</span><span class="w">                            </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="graph-with-deadlock">Graph with Deadlock<a class="header-link" href="#graph-with-deadlock" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">              </span><span class="n">Resource</span><span class="w"> </span><span class="n">Allocation</span><span class="w"> </span><span class="n">Graph</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">Deadlock</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">                                             </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â—‹</span><span class="w"> </span><span class="n">P1</span><span class="w">                                </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚â†–</span><span class="w">                                 </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">  </span><span class="n">request</span><span class="err">â”‚</span><span class="w">  </span><span class="err">â•²</span><span class="w"> </span><span class="n">assignment</span><span class="w">                    </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â–¼</span><span class="w">   </span><span class="err">â•²</span><span class="w">                              </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â•²</span><span class="w">                             </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w"> </span><span class="n">R1</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â•²</span><span class="w">                            </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â—</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â•²</span><span class="w">                           </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â””â”€â”€â”¬â”€â”€â”˜</span><span class="w">    </span><span class="err">â•²</span><span class="w">                          </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â•²</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">  </span><span class="n">assignment</span><span class="err">â”‚</span><span class="w">      </span><span class="err">â•²</span><span class="w">                        </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â–¼</span><span class="w">          </span><span class="err">â•²</span><span class="w">                       </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â—‹</span><span class="w"> </span><span class="n">P2</span><span class="w"> </span><span class="err">â”€â”€â”€</span><span class="n">request</span><span class="err">â”€â”€â”€â–¶</span><span class="w"> </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”</span><span class="w">       </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â†–</span><span class="w">                   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">R2</span><span class="w">  </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â•²</span><span class="w"> </span><span class="n">assignment</span><span class="w">       </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â—</span><span class="w">  </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â•²</span><span class="w">                 </span><span class="err">â””â”€â”€â”¬â”€â”€â”˜</span><span class="w">       </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">            </span><span class="err">â•²</span><span class="w">                   </span><span class="err">â”‚</span><span class="n">assignment</span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">             </span><span class="err">â•²</span><span class="w">                  </span><span class="err">â–¼</span><span class="w">          </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â•²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—‹</span><span class="w"> </span><span class="n">P3</span><span class="w">             </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">                           </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">                           </span><span class="err">â”‚</span><span class="w"> </span><span class="n">request</span><span class="w">      </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">                           </span><span class="err">â–¼</span><span class="w">              </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">               </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”</span><span class="w">                    </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">               </span><span class="err">â”‚</span><span class="w"> </span><span class="n">R3</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â—€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">         </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">               </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â—</span><span class="w">  </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span><span class="n">assignment</span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">               </span><span class="err">â””â”€â”€â”€â”€â”€â”˜</span><span class="w">         </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">                    </span><span class="err">â—‹</span><span class="w"> </span><span class="n">P1</span><span class="w"> </span><span class="err">â—€â”€â”€â”€â”€â”€â”˜</span><span class="w">         </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">                                             </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="nl">Cycle:</span><span class="w"> </span><span class="n">P1</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">R1</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">P2</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">R3</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">P3</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">R2</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">P1</span><span class="w">           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">            </span><span class="p">(</span><span class="k">or</span><span class="w"> </span><span class="n">P2</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">R3</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">P3</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">R2</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">P2</span><span class="p">)</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â†’</span><span class="w"> </span><span class="n">Deadlock</span><span class="w"> </span><span class="n">exists</span><span class="o">!</span><span class="w">                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="cycles-and-deadlock">Cycles and Deadlock<a class="header-link" href="#cycles-and-deadlock" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                </span><span class="n">Relationship</span><span class="w"> </span><span class="n">Between</span><span class="w"> </span><span class="n">Cycles</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">Deadlock</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nl">Rules:</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="n">cycle</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="n">deadlock</span><span class="w">                          </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Cycle</span><span class="w"> </span><span class="nl">exists:</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Single</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Deadlock</span><span class="w">       </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Multiple</span><span class="w"> </span><span class="n">instances</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Possible</span><span class="w">    </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Cycle</span><span class="w"> </span><span class="n">exists</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">deadlock</span><span class="w"> </span><span class="k">case</span><span class="o">:</span><span class="w">                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â—‹</span><span class="w"> </span><span class="n">P1</span><span class="w"> </span><span class="err">â”€</span><span class="n">request</span><span class="err">â”€â–¶</span><span class="w"> </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â—€â”€</span><span class="n">request</span><span class="err">â”€</span><span class="w"> </span><span class="err">â—‹</span><span class="w"> </span><span class="n">P3</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â†‘</span><span class="w">              </span><span class="err">â”‚</span><span class="w"> </span><span class="n">R1</span><span class="w">  </span><span class="err">â”‚</span><span class="w">             </span><span class="err">â†‘</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â—â—</span><span class="w">  </span><span class="err">â”‚</span><span class="w">             </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â””â”€â”€â”¬â”€â”€â”˜</span><span class="w">             </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">                 </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w"> </span><span class="k">assign</span><span class="w">   </span><span class="k">assign</span><span class="w"> </span><span class="err">â–¼</span><span class="w">  </span><span class="k">assign</span><span class="w">        </span><span class="err">â”‚</span><span class="w"> </span><span class="k">assign</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">                 </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â””â”€â”€â”€â”€â”€â”€</span><span class="w"> </span><span class="err">â—‹</span><span class="w"> </span><span class="n">P2</span><span class="w">  </span><span class="err">â—‹</span><span class="w"> </span><span class="n">P4</span><span class="w"> </span><span class="err">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="n">R1</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="mh">2</span><span class="w"> </span><span class="n">instances</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">P2</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">P4</span><span class="w"> </span><span class="k">release</span><span class="p">,</span><span class="w"> </span><span class="n">P1</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">P3</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="n">can</span><span class="w"> </span><span class="n">proceed</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Not</span><span class="w"> </span><span class="n">deadlock</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="4-deadlock-prevention">4. Deadlock Prevention<a class="header-link" href="#4-deadlock-prevention" title="Permanent link">&para;</a></h2>
<h3 id="breaking-one-of-four-conditions">Breaking One of Four Conditions<a class="header-link" href="#breaking-one-of-four-conditions" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                    </span><span class="nx">Deadlock</span><span class="w"> </span><span class="nx">Prevention</span><span class="w">                   </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="nx">Break</span><span class="w"> </span><span class="nx">Mutual</span><span class="w"> </span><span class="nx">Exclusion</span><span class="w">                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Use</span><span class="w"> </span><span class="nx">sharable</span><span class="w"> </span><span class="nx">resources</span><span class="w"> </span><span class="nx">when</span><span class="w"> </span><span class="nx">possible</span><span class="w">           </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Example</span><span class="p">:</span><span class="w"> </span><span class="nx">read</span><span class="o">-</span><span class="nx">only</span><span class="w"> </span><span class="nx">files</span><span class="w">                       </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Limitation</span><span class="p">:</span><span class="w"> </span><span class="nx">inherently</span><span class="w"> </span><span class="nx">exclusive</span><span class="w"> </span><span class="nx">resources</span><span class="w">     </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="p">(</span><span class="nx">printers</span><span class="p">,</span><span class="w"> </span><span class="nx">mutexes</span><span class="p">)</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="nx">generally</span><span class="w"> </span><span class="nx">hard</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="k">break</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="nx">Break</span><span class="w"> </span><span class="nx">Hold</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="nx">Wait</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Method</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="nx">Request</span><span class="w"> </span><span class="nx">all</span><span class="w"> </span><span class="nx">resources</span><span class="w"> </span><span class="nx">at</span><span class="w"> </span><span class="nx">start</span><span class="w">         </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Request</span><span class="w"> </span><span class="nx">all</span><span class="w"> </span><span class="nx">needed</span><span class="w"> </span><span class="nx">resources</span><span class="w"> </span><span class="nx">at</span><span class="w"> </span><span class="nx">once</span><span class="w">         </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Downside</span><span class="p">:</span><span class="w"> </span><span class="nx">low</span><span class="w"> </span><span class="nx">resource</span><span class="w"> </span><span class="nx">utilization</span><span class="p">,</span><span class="w"> </span><span class="nx">starvation</span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Method</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="nx">Release</span><span class="w"> </span><span class="nx">all</span><span class="w"> </span><span class="nx">before</span><span class="w"> </span><span class="nx">requesting</span><span class="w"> </span><span class="nx">new</span><span class="w">     </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Return</span><span class="w"> </span><span class="nx">held</span><span class="w"> </span><span class="nx">resources</span><span class="w"> </span><span class="nx">before</span><span class="w"> </span><span class="nx">new</span><span class="w"> </span><span class="nx">request</span><span class="w">    </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Downside</span><span class="p">:</span><span class="w"> </span><span class="nx">difficult</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">implement</span><span class="w">            </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="nx">Break</span><span class="w"> </span><span class="nx">No</span><span class="w"> </span><span class="nx">Preemption</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Force</span><span class="w"> </span><span class="nx">release</span><span class="w"> </span><span class="nx">of</span><span class="w"> </span><span class="nx">held</span><span class="w"> </span><span class="nx">resources</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">request</span><span class="w"> </span><span class="nx">fails</span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Or</span><span class="w"> </span><span class="nx">preempt</span><span class="w"> </span><span class="nx">resources</span><span class="w"> </span><span class="nx">from</span><span class="w"> </span><span class="nx">other</span><span class="w"> </span><span class="nx">processes</span><span class="w">     </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Applicable</span><span class="p">:</span><span class="w"> </span><span class="nx">CPU</span><span class="w"> </span><span class="nx">registers</span><span class="p">,</span><span class="w"> </span><span class="nx">memory</span><span class="w">              </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Difficult</span><span class="p">:</span><span class="w"> </span><span class="nx">mutexes</span><span class="p">,</span><span class="w"> </span><span class="nx">printers</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">4</span><span class="p">.</span><span class="w"> </span><span class="nx">Break</span><span class="w"> </span><span class="nx">Circular</span><span class="w"> </span><span class="nx">Wait</span><span class="w"> </span><span class="err">â˜…</span><span class="w"> </span><span class="nx">Most</span><span class="w"> </span><span class="nx">practical</span><span class="w">               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Assign</span><span class="w"> </span><span class="nx">ordering</span><span class="w"> </span><span class="nx">number</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">resources</span><span class="w">           </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Request</span><span class="w"> </span><span class="nx">resources</span><span class="w"> </span><span class="nx">only</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nx">ascending</span><span class="w"> </span><span class="nx">order</span><span class="w">      </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Circular</span><span class="w"> </span><span class="nx">wait</span><span class="w"> </span><span class="nx">structurally</span><span class="w"> </span><span class="nx">impossible</span><span class="w">          </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="circular-wait-prevention-code">Circular Wait Prevention Code<a class="header-link" href="#circular-wait-prevention-code" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pthread.h&gt;</span>

<span class="c1">// Assign ordering numbers to resources</span>
<span class="c1">// lock1 = resource 1 (order 1)</span>
<span class="c1">// lock2 = resource 2 (order 2)</span>
<span class="n">pthread_mutex_t</span><span class="w"> </span><span class="n">lock1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PTHREAD_MUTEX_INITIALIZER</span><span class="p">;</span>
<span class="n">pthread_mutex_t</span><span class="w"> </span><span class="n">lock2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PTHREAD_MUTEX_INITIALIZER</span><span class="p">;</span>

<span class="c1">// Always acquire in ascending order!</span>
<span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="nf">thread_A</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Acquire in order: lock1(1) â†’ lock2(2)</span>
<span class="w">    </span><span class="n">pthread_mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock1</span><span class="p">);</span><span class="w">  </span><span class="c1">// Order 1</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Thread A: acquired lock1</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="n">pthread_mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock2</span><span class="p">);</span><span class="w">  </span><span class="c1">// Order 2</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Thread A: acquired lock2</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Critical section</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Thread A: performing work</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="n">pthread_mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock2</span><span class="p">);</span>
<span class="w">    </span><span class="n">pthread_mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock1</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="nf">thread_B</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Same order: lock1(1) â†’ lock2(2)</span>
<span class="w">    </span><span class="n">pthread_mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock1</span><span class="p">);</span><span class="w">  </span><span class="c1">// Order 1</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Thread B: acquired lock1</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="n">pthread_mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock2</span><span class="p">);</span><span class="w">  </span><span class="c1">// Order 2</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Thread B: acquired lock2</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Critical section</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Thread B: performing work</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="n">pthread_mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock2</span><span class="p">);</span>
<span class="w">    </span><span class="n">pthread_mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock1</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">pthread_t</span><span class="w"> </span><span class="n">tA</span><span class="p">,</span><span class="w"> </span><span class="n">tB</span><span class="p">;</span>

<span class="w">    </span><span class="n">pthread_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tA</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">thread_A</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<span class="w">    </span><span class="n">pthread_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tB</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">thread_B</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">    </span><span class="n">pthread_join</span><span class="p">(</span><span class="n">tA</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<span class="w">    </span><span class="n">pthread_join</span><span class="p">(</span><span class="n">tB</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Done (no deadlock!)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h2 id="5-deadlock-avoidance">5. Deadlock Avoidance<a class="header-link" href="#5-deadlock-avoidance" title="Permanent link">&para;</a></h2>
<h3 id="safe-state-vs-unsafe-state">Safe State vs Unsafe State<a class="header-link" href="#safe-state-vs-unsafe-state" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">               </span><span class="nv">Safe</span><span class="w"> </span><span class="nv">State</span><span class="w"> </span><span class="nv">vs</span><span class="w"> </span><span class="nv">Unsafe</span><span class="w"> </span><span class="nv">State</span><span class="w">                 </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                         </span>â”‚
â”‚<span class="w">  </span><span class="nv">Safe</span><span class="w"> </span><span class="nv">State</span>:<span class="w">                                            </span>â”‚
â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â€¢<span class="w"> </span><span class="nv">All</span><span class="w"> </span><span class="nv">processes</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">complete</span><span class="w"> </span><span class="nv">without</span><span class="w"> </span><span class="nv">deadlock</span><span class="w">    </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â€¢<span class="w"> </span><span class="nv">Safe</span><span class="w"> </span><span class="nv">sequence</span><span class="w"> </span><span class="nv">exists</span><span class="w">                           </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                   </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="nv">Safe</span><span class="w"> </span><span class="nv">sequence</span>:<span class="w"> </span><span class="o">&lt;</span><span class="nv">P1</span>,<span class="w"> </span><span class="nv">P3</span>,<span class="w"> </span><span class="nv">P4</span>,<span class="w"> </span><span class="nv">P2</span>,<span class="w"> </span><span class="nv">P0</span><span class="o">&gt;</span><span class="w">             </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nv">All</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">complete</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">allocated</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">order</span><span class="w">   </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">  </span>â”‚
â”‚<span class="w">                                                         </span>â”‚
â”‚<span class="w">  </span><span class="nv">Unsafe</span><span class="w"> </span><span class="nv">State</span>:<span class="w">                                          </span>â”‚
â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â€¢<span class="w"> </span><span class="nv">No</span><span class="w"> </span><span class="nv">safe</span><span class="w"> </span><span class="nv">sequence</span><span class="w"> </span><span class="nv">exists</span><span class="w">                        </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â€¢<span class="w"> </span><span class="nv">Deadlock</span><span class="w"> </span><span class="nv">possible</span><span class="w"> </span><span class="ss">(</span><span class="nv">not</span><span class="w"> </span><span class="nv">necessarily</span><span class="w"> </span><span class="nv">occurring</span><span class="ss">)</span><span class="w">  </span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">  </span>â”‚
â”‚<span class="w">                                                         </span>â”‚
â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                    </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">  </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â”‚<span class="w">                 </span><span class="nv">Safe</span><span class="w"> </span><span class="nv">State</span><span class="w">                  </span>â”‚<span class="w">  </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â”‚<span class="w">     </span><span class="ss">(</span><span class="nv">Deadlock</span><span class="w"> </span><span class="nv">impossible</span><span class="ss">)</span><span class="w">                   </span>â”‚<span class="w">  </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â”‚<span class="w">                                             </span>â”‚<span class="w">  </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">  </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                    </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">  </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â”‚<span class="w">            </span><span class="nv">Unsafe</span><span class="w"> </span><span class="nv">State</span><span class="w">                     </span>â”‚<span class="w">  </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â”‚<span class="w">   </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">  </span>â”‚<span class="w">  </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â”‚<span class="w">   </span>â”‚<span class="w">                                     </span>â”‚<span class="w">  </span>â”‚<span class="w">  </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â”‚<span class="w">   </span>â”‚<span class="w">         </span><span class="nv">Deadlock</span><span class="w"> </span><span class="nv">State</span><span class="w">              </span>â”‚<span class="w">  </span>â”‚<span class="w">  </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â”‚<span class="w">   </span>â”‚<span class="w">                                     </span>â”‚<span class="w">  </span>â”‚<span class="w">  </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â”‚<span class="w">   </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">  </span>â”‚<span class="w">  </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">  </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                    </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w"> </span>â”‚
â”‚<span class="w">                                                         </span>â”‚
â”‚<span class="w">  </span><span class="nv">Avoidance</span><span class="w"> </span><span class="nv">strategy</span>:<span class="w"> </span><span class="nv">Maintain</span><span class="w"> </span><span class="nv">safe</span><span class="w"> </span><span class="nv">state</span><span class="w"> </span><span class="nv">only</span><span class="w">           </span>â”‚
â”‚<span class="w">                                                         </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="bankers-algorithm">Banker's Algorithm<a class="header-link" href="#bankers-algorithm" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                 </span><span class="n">Banker</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">Algorithm</span><span class="w">                       </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Developed</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">Dijkstra</span><span class="w"> </span><span class="p">(</span><span class="mi">1965</span><span class="p">)</span><span class="w">                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="k">Similar</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">banker</span><span class="w"> </span><span class="n">lends</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">customers</span><span class="w">             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="k">Data</span><span class="w"> </span><span class="nl">structures</span><span class="p">:</span><span class="w">                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">processes</span><span class="w">                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="n">types</span><span class="w">                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Available</span><span class="o">[</span><span class="n">m</span><span class="o">]</span><span class="w">                                      </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="n">Number</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">instances</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="k">each</span><span class="w"> </span><span class="n">resource</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nf">Max</span><span class="o">[</span><span class="n">n</span><span class="o">][</span><span class="n">m</span><span class="o">]</span><span class="w">                                         </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="n">Maximum</span><span class="w"> </span><span class="n">resources</span><span class="w"> </span><span class="k">each</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">request</span><span class="w">     </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Allocation</span><span class="o">[</span><span class="n">n</span><span class="o">][</span><span class="n">m</span><span class="o">]</span><span class="w">                                  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="n">Resources</span><span class="w"> </span><span class="n">currently</span><span class="w"> </span><span class="n">allocated</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">each</span><span class="w"> </span><span class="n">process</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Need</span><span class="o">[</span><span class="n">n</span><span class="o">][</span><span class="n">m</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">Max</span><span class="o">[</span><span class="n">n</span><span class="o">][</span><span class="n">m</span><span class="o">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Allocation</span><span class="o">[</span><span class="n">n</span><span class="o">][</span><span class="n">m</span><span class="o">]</span><span class="w">        </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="n">Additional</span><span class="w"> </span><span class="n">resources</span><span class="w"> </span><span class="n">needed</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">each</span><span class="w"> </span><span class="n">process</span><span class="w">    </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="bankers-algorithm-example">Banker's Algorithm Example<a class="header-link" href="#bankers-algorithm-example" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">              </span><span class="n">Banker</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">Algorithm</span><span class="w"> </span><span class="n">Example</span><span class="w">                  </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Resource</span><span class="w"> </span><span class="nl">types</span><span class="p">:</span><span class="w"> </span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">B</span><span class="p">,</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="p">(</span><span class="nl">total</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nl">Processes</span><span class="p">:</span><span class="w"> </span><span class="n">P0</span><span class="p">,</span><span class="w"> </span><span class="n">P1</span><span class="p">,</span><span class="w"> </span><span class="n">P2</span><span class="p">,</span><span class="w"> </span><span class="n">P3</span><span class="p">,</span><span class="w"> </span><span class="n">P4</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="k">Current</span><span class="w"> </span><span class="k">state</span><span class="err">:</span><span class="w">                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Process</span><span class="w"> </span><span class="err">â”‚</span><span class="w">   </span><span class="n">Allocation</span><span class="w">   </span><span class="err">â”‚</span><span class="w">     </span><span class="nf">Max</span><span class="w">     </span><span class="err">â”‚</span><span class="w">    </span><span class="n">Need</span><span class="w">    </span><span class="err">â”‚â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span><span class="w">   </span><span class="n">A</span><span class="w">   </span><span class="n">B</span><span class="w">   </span><span class="n">C</span><span class="w">    </span><span class="err">â”‚</span><span class="w">  </span><span class="n">A</span><span class="w">   </span><span class="n">B</span><span class="w">   </span><span class="n">C</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">A</span><span class="w">   </span><span class="n">B</span><span class="w">   </span><span class="n">C</span><span class="w"> </span><span class="err">â”‚â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="n">P0</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">1</span><span class="w">   </span><span class="mi">0</span><span class="w">    </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">7</span><span class="w">   </span><span class="mi">5</span><span class="w">   </span><span class="mi">3</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">7</span><span class="w">   </span><span class="mi">4</span><span class="w">   </span><span class="mi">3</span><span class="w"> </span><span class="err">â”‚â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="n">P1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">2</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">    </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">3</span><span class="w">   </span><span class="mi">2</span><span class="w">   </span><span class="mi">2</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">1</span><span class="w">   </span><span class="mi">2</span><span class="w">   </span><span class="mi">2</span><span class="w"> </span><span class="err">â”‚â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="n">P2</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">3</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">9</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">2</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">6</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w"> </span><span class="err">â”‚â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="n">P3</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">2</span><span class="w">   </span><span class="mi">1</span><span class="w">   </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">2</span><span class="w">   </span><span class="mi">2</span><span class="w">   </span><span class="mi">2</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">0</span><span class="w">   </span><span class="mi">1</span><span class="w">   </span><span class="mi">1</span><span class="w"> </span><span class="err">â”‚â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="n">P4</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">4</span><span class="w">   </span><span class="mi">3</span><span class="w">   </span><span class="mi">3</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">4</span><span class="w">   </span><span class="mi">3</span><span class="w">   </span><span class="mi">1</span><span class="w"> </span><span class="err">â”‚â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Available</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">3, 3, 2</span><span class="o">]</span><span class="w">  </span><span class="p">(</span><span class="nl">A</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="nl">B</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="nl">C</span><span class="p">:</span><span class="mi">2</span><span class="w"> </span><span class="n">available</span><span class="p">)</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Safety</span><span class="w"> </span><span class="k">check</span><span class="err">:</span><span class="w">                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mf">1.</span><span class="w"> </span><span class="n">Need</span><span class="o">[</span><span class="n">P1</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">1,2,2</span><span class="o">]</span><span class="w"> </span><span class="err">â‰¤</span><span class="w"> </span><span class="n">Available</span><span class="o">[</span><span class="n">3,3,2</span><span class="o">]</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">P1</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="k">After</span><span class="w"> </span><span class="nl">P1</span><span class="p">:</span><span class="w"> </span><span class="n">Available</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">3,3,2</span><span class="o">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">[</span><span class="n">2,0,0</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">5,3,2</span><span class="o">]</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mf">2.</span><span class="w"> </span><span class="n">Need</span><span class="o">[</span><span class="n">P3</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">0,1,1</span><span class="o">]</span><span class="w"> </span><span class="err">â‰¤</span><span class="w"> </span><span class="n">Available</span><span class="o">[</span><span class="n">5,3,2</span><span class="o">]</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">P3</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="k">After</span><span class="w"> </span><span class="nl">P3</span><span class="p">:</span><span class="w"> </span><span class="n">Available</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">5,3,2</span><span class="o">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">[</span><span class="n">2,1,1</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">7,4,3</span><span class="o">]</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mf">3.</span><span class="w"> </span><span class="n">Need</span><span class="o">[</span><span class="n">P4</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">4,3,1</span><span class="o">]</span><span class="w"> </span><span class="err">â‰¤</span><span class="w"> </span><span class="n">Available</span><span class="o">[</span><span class="n">7,4,3</span><span class="o">]</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">P4</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="k">After</span><span class="w"> </span><span class="nl">P4</span><span class="p">:</span><span class="w"> </span><span class="n">Available</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">7,4,3</span><span class="o">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">[</span><span class="n">0,0,2</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">7,4,5</span><span class="o">]</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mf">4.</span><span class="w"> </span><span class="n">Need</span><span class="o">[</span><span class="n">P0</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">7,4,3</span><span class="o">]</span><span class="w"> </span><span class="err">â‰¤</span><span class="w"> </span><span class="n">Available</span><span class="o">[</span><span class="n">7,4,5</span><span class="o">]</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">P0</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="k">After</span><span class="w"> </span><span class="nl">P0</span><span class="p">:</span><span class="w"> </span><span class="n">Available</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">7,4,5</span><span class="o">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">[</span><span class="n">0,1,0</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">7,5,5</span><span class="o">]</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mf">5.</span><span class="w"> </span><span class="n">Need</span><span class="o">[</span><span class="n">P2</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">6,0,0</span><span class="o">]</span><span class="w"> </span><span class="err">â‰¤</span><span class="w"> </span><span class="n">Available</span><span class="o">[</span><span class="n">7,5,5</span><span class="o">]</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">P2</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Safe</span><span class="w"> </span><span class="k">sequence</span><span class="err">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">P1</span><span class="p">,</span><span class="w"> </span><span class="n">P3</span><span class="p">,</span><span class="w"> </span><span class="n">P4</span><span class="p">,</span><span class="w"> </span><span class="n">P0</span><span class="p">,</span><span class="w"> </span><span class="n">P2</span><span class="o">&gt;</span><span class="w">                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â†’</span><span class="w"> </span><span class="k">System</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">safe</span><span class="w"> </span><span class="k">state</span><span class="w">                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="bankers-algorithm-code">Banker's Algorithm Code<a class="header-link" href="#bankers-algorithm-code" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdbool.h&gt;</span>

<span class="cp">#define P 5  </span><span class="c1">// Number of processes</span>
<span class="cp">#define R 3  </span><span class="c1">// Number of resource types</span>

<span class="kt">int</span><span class="w"> </span><span class="n">available</span><span class="p">[</span><span class="n">R</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">};</span>
<span class="kt">int</span><span class="w"> </span><span class="n">maximum</span><span class="p">[</span><span class="n">P</span><span class="p">][</span><span class="n">R</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">{</span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">}</span>
<span class="p">};</span>
<span class="kt">int</span><span class="w"> </span><span class="n">allocation</span><span class="p">[</span><span class="n">P</span><span class="p">][</span><span class="n">R</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Calculate Need</span>
<span class="kt">int</span><span class="w"> </span><span class="n">need</span><span class="p">[</span><span class="n">P</span><span class="p">][</span><span class="n">R</span><span class="p">];</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">calculate_need</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">P</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">R</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
<span class="w">            </span><span class="n">need</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">maximum</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">allocation</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
<span class="p">}</span>

<span class="kt">bool</span><span class="w"> </span><span class="nf">is_safe</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">work</span><span class="p">[</span><span class="n">R</span><span class="p">];</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">finish</span><span class="p">[</span><span class="n">P</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nb">false</span><span class="p">};</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">safe_sequence</span><span class="p">[</span><span class="n">P</span><span class="p">];</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// work = copy of available</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">R</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">        </span><span class="n">work</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">available</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>

<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">count</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">P</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">bool</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">P</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">finish</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="c1">// Check if need[i] &lt;= work</span>
<span class="w">                </span><span class="kt">bool</span><span class="w"> </span><span class="n">can_allocate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">R</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">need</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">work</span><span class="p">[</span><span class="n">j</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="n">can_allocate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">                        </span><span class="k">break</span><span class="p">;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>

<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">can_allocate</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="c1">// Simulate resource reclamation</span>
<span class="w">                    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">R</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
<span class="w">                        </span><span class="n">work</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">allocation</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
<span class="w">                    </span><span class="n">finish</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="w">                    </span><span class="n">safe_sequence</span><span class="p">[</span><span class="n">count</span><span class="o">++</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="w">                    </span><span class="n">found</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">found</span><span class="p">)</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w">  </span><span class="c1">// No safe sequence</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Safe sequence: &quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">P</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;P%d &quot;</span><span class="p">,</span><span class="w"> </span><span class="n">safe_sequence</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">calculate_need</span><span class="p">();</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">is_safe</span><span class="p">())</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;System is in safe state.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;System is in unsafe state!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h2 id="6-deadlock-detection-and-recovery">6. Deadlock Detection and Recovery<a class="header-link" href="#6-deadlock-detection-and-recovery" title="Permanent link">&para;</a></h2>
<h3 id="detection-algorithm">Detection Algorithm<a class="header-link" href="#detection-algorithm" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                  </span><span class="n">Deadlock</span><span class="w"> </span><span class="n">Detection</span><span class="w"> </span><span class="n">Algorithm</span><span class="w">            </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Single</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="nl">resources:</span><span class="w">                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Use</span><span class="w"> </span><span class="n">Wait</span><span class="o">-</span><span class="k">for</span><span class="w"> </span><span class="n">Graph</span><span class="w">                               </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Remove</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="nl">RAG:</span><span class="w">                 </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Pi</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Rq</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Pj</span><span class="w">  </span><span class="n">transforms</span><span class="w"> </span><span class="n">to</span><span class="err">â†’</span><span class="w">  </span><span class="n">Pi</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Pj</span><span class="w">           </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="p">(</span><span class="n">Pi</span><span class="w"> </span><span class="n">requests</span><span class="w"> </span><span class="n">Rq</span><span class="p">,</span><span class="w"> </span><span class="n">Rq</span><span class="w"> </span><span class="n">assigned</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">Pj</span><span class="p">)</span><span class="w">             </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Cycle</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="k">wait</span><span class="o">-</span><span class="k">for</span><span class="w"> </span><span class="n">graph</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Deadlock</span><span class="w">              </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Multiple</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="nl">resources:</span><span class="w">                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Use</span><span class="w"> </span><span class="n">similar</span><span class="w"> </span><span class="n">approach</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">Banker</span><span class="p">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">algorithm</span><span class="w">       </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Safety</span><span class="w"> </span><span class="n">check</span><span class="w"> </span><span class="n">based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">requests</span><span class="w">          </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Identify</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">deadlocked</span><span class="w"> </span><span class="n">processes</span><span class="w">             </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Detection</span><span class="w"> </span><span class="nl">frequency:</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Every</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">overhead</span><span class="w">               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Periodically</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">g</span><span class="p">.,</span><span class="w"> </span><span class="n">every</span><span class="w"> </span><span class="mh">5</span><span class="w"> </span><span class="n">minutes</span><span class="p">)</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">When</span><span class="w"> </span><span class="n">CPU</span><span class="w"> </span><span class="n">utilization</span><span class="w"> </span><span class="n">drops</span><span class="w">                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="wait-for-graph-example">Wait-for Graph Example<a class="header-link" href="#wait-for-graph-example" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                   </span><span class="n">Wait</span><span class="o">-</span><span class="k">for</span><span class="w"> </span><span class="n">Graph</span><span class="w"> </span><span class="n">Example</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Resource</span><span class="w"> </span><span class="n">Allocation</span><span class="w"> </span><span class="nl">Graph:</span><span class="w">    </span><span class="n">Wait</span><span class="o">-</span><span class="k">for</span><span class="w"> </span><span class="nl">Graph:</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â—‹</span><span class="n">P1</span><span class="w"> </span><span class="err">â”€</span><span class="n">request</span><span class="err">â”€â–¶</span><span class="w"> </span><span class="err">â–¡</span><span class="n">R1</span><span class="w">         </span><span class="err">â—‹</span><span class="n">P1</span><span class="w"> </span><span class="err">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">         </span><span class="err">â†‘</span><span class="w">         </span><span class="err">â†“</span><span class="w"> </span><span class="k">assign</span><span class="w">          </span><span class="err">â†“</span><span class="w">        </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="k">assign</span><span class="err">â”‚</span><span class="w">       </span><span class="err">â—‹</span><span class="n">P2</span><span class="w">             </span><span class="err">â—‹</span><span class="n">P2</span><span class="w"> </span><span class="err">â—€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â†“</span><span class="w"> </span><span class="n">request</span><span class="w">          </span><span class="err">â†“</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">       </span><span class="err">â–¡</span><span class="n">R2</span><span class="w"> </span><span class="err">â—€â”€â”€â”€â”€â”˜</span><span class="w">                  </span><span class="err">â—‹</span><span class="n">P3</span><span class="w"> </span><span class="err">â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">         </span><span class="err">â†“</span><span class="w"> </span><span class="k">assign</span><span class="w">                      </span><span class="err">â†“</span><span class="w">        </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">        </span><span class="err">â—‹</span><span class="n">P3</span><span class="w"> </span><span class="err">â”€</span><span class="n">request</span><span class="err">â”€â–¶</span><span class="w"> </span><span class="err">â–¡</span><span class="n">R3</span><span class="w"> </span><span class="err">â—€</span><span class="k">assign</span><span class="err">â”€</span><span class="w"> </span><span class="err">â—‹</span><span class="n">P4</span><span class="w">    </span><span class="err">â—‹</span><span class="n">P4</span><span class="w"> </span><span class="err">â—€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">R1</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">P2</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">R2</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">P3</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">R3</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="n">P4</span><span class="w">                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Wait</span><span class="o">-</span><span class="k">for</span><span class="w"> </span><span class="nl">Graph:</span><span class="w">                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">P1</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">P2</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">P3</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">P4</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">P3</span><span class="w"> </span><span class="p">(</span><span class="n">cycle</span><span class="o">!</span><span class="p">)</span><span class="w">                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â†’</span><span class="w"> </span><span class="n">Deadlock</span><span class="w"> </span><span class="n">exists</span><span class="w"> </span><span class="p">(</span><span class="n">P3</span><span class="p">,</span><span class="w"> </span><span class="n">P4</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">deadlocked</span><span class="p">)</span><span class="w">             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="deadlock-recovery-methods">Deadlock Recovery Methods<a class="header-link" href="#deadlock-recovery-methods" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                  </span><span class="n">Deadlock</span><span class="w"> </span><span class="n">Recovery</span><span class="w"> </span><span class="n">Methods</span><span class="w">               </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mf">1.</span><span class="w"> </span><span class="n">Process</span><span class="w"> </span><span class="n">Termination</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Method</span><span class="w"> </span><span class="mh">1</span><span class="o">:</span><span class="w"> </span><span class="n">Abort</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">deadlocked</span><span class="w"> </span><span class="n">processes</span><span class="w">         </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Certain</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">expensive</span><span class="w">                        </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Long</span><span class="o">-</span><span class="n">running</span><span class="w"> </span><span class="n">processes</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">terminated</span><span class="w">       </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Method</span><span class="w"> </span><span class="mh">2</span><span class="o">:</span><span class="w"> </span><span class="n">Abort</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="kt">time</span><span class="w">                    </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Recheck</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">deadlock</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">termination</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Selection</span><span class="w"> </span><span class="nl">criteria:</span><span class="w"> </span><span class="n">priority</span><span class="p">,</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="kt">time</span><span class="p">,</span><span class="w"> </span><span class="n">resources</span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mf">2.</span><span class="w"> </span><span class="n">Resource</span><span class="w"> </span><span class="n">Preemption</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Forcibly</span><span class="w"> </span><span class="n">take</span><span class="w"> </span><span class="n">resources</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">processes</span><span class="w"> </span><span class="k">and</span><span class="w">     </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">others</span><span class="w">                               </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nl">Considerations:</span><span class="w">                                  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Victim</span><span class="w"> </span><span class="nl">selection:</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">preempt</span><span class="w">     </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nl">Rollback:</span><span class="w"> </span><span class="n">restore</span><span class="w"> </span><span class="n">preempted</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">safe</span><span class="w"> </span><span class="n">state</span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Starvation</span><span class="w"> </span><span class="nl">prevention:</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">repeatedly</span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="n">victimized</span><span class="w">                                     </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mf">3.</span><span class="w"> </span><span class="n">Checkpoint</span><span class="o">/</span><span class="n">Recovery</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Periodically</span><span class="w"> </span><span class="n">save</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="p">(</span><span class="n">checkpoint</span><span class="p">)</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Rollback</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">checkpoint</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">deadlock</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Commonly</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">database</span><span class="w"> </span><span class="n">systems</span><span class="w">              </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="deadlock-handling-method-comparison">Deadlock Handling Method Comparison<a class="header-link" href="#deadlock-handling-method-comparison" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">     </span><span class="nv">Method</span><span class="w">    </span>â”‚<span class="w">   </span><span class="nv">Overhead</span><span class="w">   </span>â”‚<span class="w">  </span><span class="nv">Resource</span><span class="w">    </span>â”‚<span class="w"> </span><span class="nv">Implementation</span>â”‚
â”‚<span class="w">              </span>â”‚<span class="w">              </span>â”‚<span class="w"> </span><span class="nv">Utilization</span><span class="w">  </span>â”‚<span class="w">  </span><span class="nv">Complexity</span><span class="w">   </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w"> </span><span class="nv">Prevention</span><span class="w">   </span>â”‚<span class="w"> </span><span class="nv">High</span><span class="w">         </span>â”‚<span class="w"> </span><span class="nv">Low</span><span class="w">          </span>â”‚<span class="w"> </span><span class="nv">Low</span><span class="w">           </span>â”‚
â”‚<span class="w">              </span>â”‚<span class="w">              </span>â”‚<span class="w">              </span>â”‚<span class="w">               </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w"> </span><span class="nv">Avoidance</span><span class="w">    </span>â”‚<span class="w"> </span><span class="nv">High</span><span class="w">         </span>â”‚<span class="w"> </span><span class="nv">Medium</span><span class="w">       </span>â”‚<span class="w"> </span><span class="nv">High</span><span class="w">          </span>â”‚
â”‚<span class="w">              </span>â”‚<span class="w">              </span>â”‚<span class="w">              </span>â”‚<span class="w">               </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w"> </span><span class="nv">Detection</span><span class="o">/</span><span class="w">   </span>â”‚<span class="w"> </span><span class="nv">Medium</span><span class="w">       </span>â”‚<span class="w"> </span><span class="nv">High</span><span class="w">         </span>â”‚<span class="w"> </span><span class="nv">Medium</span><span class="w">        </span>â”‚
â”‚<span class="w"> </span><span class="nv">Recovery</span><span class="w">     </span>â”‚<span class="w">              </span>â”‚<span class="w">              </span>â”‚<span class="w">               </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w"> </span><span class="nv">Ignore</span><span class="w">       </span>â”‚<span class="w"> </span><span class="nv">None</span><span class="w">         </span>â”‚<span class="w"> </span><span class="nv">Highest</span><span class="w">      </span>â”‚<span class="w"> </span><span class="nv">None</span><span class="w">          </span>â”‚
â”‚<span class="w"> </span><span class="ss">(</span><span class="nv">Ostrich</span><span class="ss">)</span><span class="w">    </span>â”‚<span class="w">              </span>â”‚<span class="w">              </span>â”‚<span class="w">               </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

<span class="nv">Ignore</span><span class="w"> </span><span class="ss">(</span><span class="nv">Ostrich</span><span class="w"> </span><span class="nv">Algorithm</span><span class="ss">)</span>:
â€¢<span class="w"> </span><span class="nv">Assumes</span><span class="w"> </span><span class="nv">deadlock</span><span class="w"> </span><span class="nv">occurs</span><span class="w"> </span><span class="nv">rarely</span>
â€¢<span class="w"> </span><span class="nv">Manually</span><span class="w"> </span><span class="nv">reboot</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">occurs</span>
â€¢<span class="w"> </span><span class="nv">Adopted</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">most</span><span class="w"> </span><span class="nv">OSes</span>:<span class="w"> </span><span class="nv">Unix</span>,<span class="w"> </span><span class="nv">Linux</span>,<span class="w"> </span><span class="nv">Windows</span>
â€¢<span class="w"> </span><span class="nv">Practical</span><span class="w"> </span><span class="nv">approach</span>
</code></pre></div>

<hr />
<h2 id="7-practice-problems">7. Practice Problems<a class="header-link" href="#7-practice-problems" title="Permanent link">&para;</a></h2>
<h3 id="problem-1-deadlock-necessary-conditions">Problem 1: Deadlock Necessary Conditions<a class="header-link" href="#problem-1-deadlock-necessary-conditions" title="Permanent link">&para;</a></h3>
<p>Which of the following is NOT one of the four necessary conditions for deadlock?</p>
<p>A. Mutual Exclusion
B. Circular Wait
C. Priority Inversion
D. No Preemption
E. Hold and Wait</p>
<details>
<summary>Show Answer</summary>

**Answer: C. Priority Inversion**

Four necessary conditions for deadlock:
1. Mutual Exclusion
2. Hold and Wait
3. No Preemption
4. Circular Wait

Priority inversion is a different concurrency problem from deadlock.

</details>

<h3 id="problem-2-resource-allocation-graph">Problem 2: Resource Allocation Graph<a class="header-link" href="#problem-2-resource-allocation-graph" title="Permanent link">&para;</a></h3>
<p>Determine if the following resource allocation graph represents a deadlock state.</p>
<div class="highlight"><pre><span></span><code>P1 â†’ R1, R1 â†’ P2
P2 â†’ R2, R2 â†’ P3
P3 â†’ R1
</code></pre></div>

<details>
<summary>Show Answer</summary>

**Analysis:**
- P1 requests R1
- R1 is assigned to P2
- P2 requests R2
- R2 is assigned to P3
- P3 requests R1

**Wait relationships:**
- P1 â†’ P2 (due to R1)
- P2 â†’ P3 (due to R2)
- P3 â†’ P2 (due to R1, which P2 holds)

**Cycle:** P2 â†’ P3 â†’ P2

**Conclusion: Deadlock** (assuming single instance per resource)

</details>

<h3 id="problem-3-bankers-algorithm">Problem 3: Banker's Algorithm<a class="header-link" href="#problem-3-bankers-algorithm" title="Permanent link">&para;</a></h3>
<p>Determine if the system is in a safe state given:</p>
<p>Available = [1, 1, 2]</p>
<table>
<thead>
<tr>
<th>Process</th>
<th>Allocation</th>
<th>Max</th>
</tr>
</thead>
<tbody>
<tr>
<td>P0</td>
<td>(0,1,0)</td>
<td>(2,2,2)</td>
</tr>
<tr>
<td>P1</td>
<td>(1,0,0)</td>
<td>(1,1,2)</td>
</tr>
<tr>
<td>P2</td>
<td>(0,0,1)</td>
<td>(1,2,3)</td>
</tr>
</tbody>
</table>
<details>
<summary>Show Answer</summary>

**Calculate Need:**
- P0: (2,2,2) - (0,1,0) = (2,1,2)
- P1: (1,1,2) - (1,0,0) = (0,1,2)
- P2: (1,2,3) - (0,0,1) = (1,2,2)

**Safety check:**
1. Available = [1,1,2]
2. Need[P1] = [0,1,2] <= [1,1,2]? Yes!
   - After P1: Available = [1,1,2] + [1,0,0] = [2,1,2]
3. Need[P0] = [2,1,2] <= [2,1,2]? Yes!
   - After P0: Available = [2,1,2] + [0,1,0] = [2,2,2]
4. Need[P2] = [1,2,2] <= [2,2,2]? Yes!
   - After P2: Done

**Safe sequence: <P1, P0, P2>**
**Conclusion: Safe state**

</details>

<h3 id="problem-4-circular-wait-prevention">Problem 4: Circular Wait Prevention<a class="header-link" href="#problem-4-circular-wait-prevention" title="Permanent link">&para;</a></h3>
<p>Explain the method of assigning ordering to resources to prevent circular wait, and prove why this method prevents deadlock.</p>
<details>
<summary>Show Answer</summary>

**Method:**
- Assign unique ordering number to all resource types
- Processes must request resources only in ascending order

**Proof:**
For circular wait to occur:
P0 â†’ R(i0) â†’ P1 â†’ R(i1) â†’ ... â†’ Pn â†’ R(in) â†’ P0

Each arrow means "holds then requests":
- P0 holds R(i0) and P1 waits for R(i0)
- P1 holds R(i1) and P2 waits for R(i1)
- ...
- Pn holds R(in) and P0 waits for R(in)

By ascending order rule:
- For P0 to request R(in), must have i0 < in
- But if circular: in < i0 < i1 < ... < in (contradiction!)

Therefore circular wait impossible â†’ deadlock impossible

</details>

<h3 id="problem-5-deadlock-recovery">Problem 5: Deadlock Recovery<a class="header-link" href="#problem-5-deadlock-recovery" title="Permanent link">&para;</a></h3>
<p>When using the "abort one process at a time" recovery method after deadlock occurs, explain the criteria for selecting victims.</p>
<details>
<summary>Show Answer</summary>

**Victim selection criteria:**

1. **Process priority**
   - Terminate lower priority processes first

2. **Execution time**
   - Terminate processes that ran for shorter time (minimize loss)
   - Or protect processes near completion

3. **Resource usage**
   - Terminate processes holding more resources (free more resources)

4. **Resources needed to complete**
   - Terminate processes needing many more resources

5. **Process type**
   - Protect interactive processes over batch jobs

6. **Starvation prevention**
   - Prevent same process from being repeatedly victimized
   - Count and limit number of terminations

**Optimal selection:** Define cost function as weighted sum of above criteria, select minimum cost process

</details>

<hr />
<h2 id="next-steps">Next Steps<a class="header-link" href="#next-steps" title="Permanent link">&para;</a></h2>
<p>This completes the process synchronization section. Next learning topic:
- <a href="./10_Memory_Management_Basics.md">10_Memory_Management_Basics.md</a> - Memory management</p>
<hr />
<h2 id="references">References<a class="header-link" href="#references" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://pages.cs.wisc.edu/~remzi/OSTEP/threads-bugs.pdf">OSTEP - Deadlock</a></li>
<li><a href="https://www.os-book.com/">Operating System Concepts - Chapter 7</a></li>
<li><a href="https://www.cs.uic.edu/~jbell/CourseNotes/OperatingSystems/7_Deadlocks.html">Banker's Algorithm Visualization</a></li>
</ul>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/OS_Theory/08_Synchronization_Tools.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Synchronization Tools</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/OS_Theory/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/OS_Theory/10_Memory_Management_Basics.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Memory Management Basics â­â­</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">â†‘</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'en';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}