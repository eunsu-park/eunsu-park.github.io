{% raw %}
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paging â­â­â­ - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/en/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/en/" class="nav-item ">
                    <span class="nav-icon">ğŸ </span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">ğŸ’»</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/en/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" selected>
                        English
                    </option>
                    
                    <option value="ko" >
                        í•œêµ­ì–´
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">â˜€ï¸</span>
                    <span class="theme-icon dark">ğŸŒ™</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/en/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/en/OS_Theory/">OS Theory</a>
    <span class="separator">/</span>
    <span class="current">Paging â­â­â­</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>Paging â­â­â­</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/OS_Theory/11_Contiguous_Memory_Allocation.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Contiguous Memory Allocation â­â­</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/OS_Theory/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/OS_Theory/13_Segmentation.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Segmentation â­â­â­</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#1-basic-concepts-of-paging">1. Basic Concepts of Paging</a><ul>
<li><a href="#11-pages-and-frames">1.1 Pages and Frames</a></li>
<li><a href="#12-key-terms">1.2 Key Terms</a></li>
</ul>
</li>
<li><a href="#2-address-translation">2. Address Translation</a><ul>
<li><a href="#21-logical-address-structure">2.1 Logical Address Structure</a></li>
<li><a href="#22-address-translation-process">2.2 Address Translation Process</a></li>
<li><a href="#23-c-language-implementation">2.3 C Language Implementation</a></li>
<li><a href="#24-calculation-example">2.4 Calculation Example</a></li>
</ul>
</li>
<li><a href="#3-page-table">3. Page Table</a><ul>
<li><a href="#31-page-table-entry-pte">3.1 Page Table Entry (PTE)</a></li>
<li><a href="#32-page-table-storage-location">3.2 Page Table Storage Location</a></li>
<li><a href="#33-memory-access-problem">3.3 Memory Access Problem</a></li>
</ul>
</li>
<li><a href="#4-tlb-translation-lookaside-buffer">4. TLB (Translation Lookaside Buffer)</a><ul>
<li><a href="#41-tlb-concept">4.1 TLB Concept</a></li>
<li><a href="#42-address-translation-using-tlb">4.2 Address Translation Using TLB</a></li>
<li><a href="#43-effective-access-time-eat">4.3 Effective Access Time (EAT)</a></li>
</ul>
</li>
<li><a href="#5-multi-level-page-tables">5. Multi-level Page Tables</a><ul>
<li><a href="#51-problem">5.1 Problem</a></li>
<li><a href="#52-two-level-page-table">5.2 Two-Level Page Table</a></li>
<li><a href="#53-four-level-page-table-for-64-bit-systems">5.3 Four-Level Page Table for 64-bit Systems</a></li>
<li><a href="#54-advantages-of-multi-level-tables">5.4 Advantages of Multi-level Tables</a></li>
</ul>
</li>
<li><a href="#6-hashed-page-tables">6. Hashed Page Tables</a><ul>
<li><a href="#61-structure">6.1 Structure</a></li>
<li><a href="#62-implementation">6.2 Implementation</a></li>
</ul>
</li>
<li><a href="#7-inverted-page-tables">7. Inverted Page Tables</a><ul>
<li><a href="#71-concept">7.1 Concept</a></li>
<li><a href="#72-advantages-and-disadvantages">7.2 Advantages and Disadvantages</a></li>
</ul>
</li>
<li><a href="#practice-problems">Practice Problems</a><ul>
<li><a href="#problem-1-address-translation">Problem 1: Address Translation</a></li>
<li><a href="#problem-2-tlb-eat-calculation">Problem 2: TLB EAT Calculation</a></li>
<li><a href="#problem-3-page-table-size">Problem 3: Page Table Size</a></li>
<li><a href="#problem-4-multi-level-table-memory">Problem 4: Multi-level Table Memory</a></li>
<li><a href="#problem-5-inverted-page-table-design">Problem 5: Inverted Page Table Design</a></li>
</ul>
</li>
<li><a href="#next-steps">Next Steps</a></li>
<li><a href="#references">References</a></li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="paging">Paging â­â­â­<a class="header-link" href="#paging" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="header-link" href="#overview" title="Permanent link">&para;</a></h2>
<p>Paging is a memory management technique that divides physical memory into fixed-size blocks (frames) and the logical address space of processes into blocks of the same size (pages), allowing non-contiguous allocation. It completely eliminates external fragmentation.</p>
<hr />
<h2 id="table-of-contents">Table of Contents<a class="header-link" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#1-basic-concepts-of-paging">Basic Concepts of Paging</a></li>
<li><a href="#2-address-translation">Address Translation</a></li>
<li><a href="#3-page-table">Page Table</a></li>
<li><a href="#4-tlb-translation-lookaside-buffer">TLB (Translation Lookaside Buffer)</a></li>
<li><a href="#5-multi-level-page-tables">Multi-level Page Tables</a></li>
<li><a href="#6-hashed-page-tables">Hashed Page Tables</a></li>
<li><a href="#7-inverted-page-tables">Inverted Page Tables</a></li>
<li><a href="#practice-problems">Practice Problems</a></li>
</ol>
<hr />
<h2 id="1-basic-concepts-of-paging">1. Basic Concepts of Paging<a class="header-link" href="#1-basic-concepts-of-paging" title="Permanent link">&para;</a></h2>
<h3 id="11-pages-and-frames">1.1 Pages and Frames<a class="header-link" href="#11-pages-and-frames" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Basic Structure of Paging                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   Logical Address Space (Process)       Physical Address Space (RAM)    â”‚
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   â”‚   Page 0       â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚   Frame 1      â”‚             â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚
â”‚   â”‚   Page 1       â”‚ â”€â”€â”€â”€â”€â”              â”‚   Frame 2      â”‚             â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚
â”‚   â”‚   Page 2       â”‚ â”€â”€â”€â” â”‚              â”‚   Frame 3      â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚ â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚  â”‚
â”‚   â”‚   Page 3       â”‚ â”€â” â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚   Frame 4      â”‚          â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚  â”‚
â”‚                       â”‚ â”‚                â”‚   Frame 5      â”‚ â—€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚                       â”‚ â”‚                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚  â”‚  â”‚
â”‚                       â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Frame 6      â”‚       â”‚  â”‚  â”‚
â”‚                       â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚  â”‚  â”‚
â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Frame 7      â”‚       â”‚  â”‚  â”‚
â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  â”‚  â”‚
â”‚                                                                   â”‚  â”‚  â”‚
â”‚   Page size = Frame size (e.g., 4KB)                             â”‚  â”‚  â”‚
â”‚   Pages can be placed in any frame!                              â”‚  â”‚  â”‚
â”‚   No external fragmentation!                                     â”‚  â”‚  â”‚
â”‚                                                                   â”‚  â”‚  â”‚
â”‚   Other process pages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚   (Sharing the same physical memory)                                  â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="12-key-terms">1.2 Key Terms<a class="header-link" href="#12-key-terms" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Term</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Page</strong></td>
<td>Fixed-size block of logical address space</td>
</tr>
<tr>
<td><strong>Frame</strong></td>
<td>Fixed-size block of physical memory</td>
</tr>
<tr>
<td><strong>Page Table</strong></td>
<td>Page â†’ Frame mapping information</td>
</tr>
<tr>
<td><strong>Page Number (p)</strong></td>
<td>Identifies page in logical address</td>
</tr>
<tr>
<td><strong>Offset (d)</strong></td>
<td>Position within page/frame</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="2-address-translation">2. Address Translation<a class="header-link" href="#2-address-translation" title="Permanent link">&para;</a></h2>
<h3 id="21-logical-address-structure">2.1 Logical Address Structure<a class="header-link" href="#21-logical-address-structure" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                  </span><span class="nx">Logical</span><span class="w"> </span><span class="nx">Address</span><span class="w"> </span><span class="nx">Structure</span><span class="w"> </span><span class="p">(</span><span class="mi">32</span><span class="o">-</span><span class="nx">bit</span><span class="w"> </span><span class="nx">example</span><span class="p">)</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                         </span><span class="mi">32</span><span class="o">-</span><span class="nx">bit</span><span class="w"> </span><span class="nx">Logical</span><span class="w"> </span><span class="nx">Address</span><span class="w">                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">      </span><span class="nx">Page</span><span class="w"> </span><span class="nx">Number</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="p">)</span><span class="w">         </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">Offset</span><span class="w"> </span><span class="p">(</span><span class="nx">d</span><span class="p">)</span><span class="w">    </span><span class="err">â”‚</span><span class="w">                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">         </span><span class="mi">20</span><span class="w"> </span><span class="nx">bits</span><span class="w">              </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">12</span><span class="w"> </span><span class="nx">bits</span><span class="w">     </span><span class="err">â”‚</span><span class="w">                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Page</span><span class="w"> </span><span class="nx">size</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">2</span><span class="o">^</span><span class="mi">12</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">4</span><span class="nx">KB</span><span class="w">                                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Maximum</span><span class="w"> </span><span class="nx">pages</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">2</span><span class="o">^</span><span class="mi">20</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="o">~</span><span class="mi">1</span><span class="w"> </span><span class="nx">million</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Maximum</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="nx">space</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">2</span><span class="o">^</span><span class="mi">32</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">4</span><span class="nx">GB</span><span class="w">                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="22-address-translation-process">2.2 Address Translation Process<a class="header-link" href="#22-address-translation-process" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                        </span><span class="nx">Address</span><span class="w"> </span><span class="nx">Translation</span><span class="w"> </span><span class="nx">Process</span><span class="w">                       </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Logical</span><span class="w"> </span><span class="nx">address</span><span class="p">:</span><span class="w"> </span><span class="mh">0x00005A34</span><span class="w">                                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="nx">Separate</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="p">(</span><span class="nx">Page</span><span class="w"> </span><span class="nx">size</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="nx">KB</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mh">0x1000</span><span class="p">)</span><span class="w">                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">  </span><span class="mh">0x00005A34</span><span class="w">                           </span><span class="err">â”‚</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">  </span><span class="p">=</span><span class="w"> </span><span class="mh">0x00005</span><span class="w"> </span><span class="p">(</span><span class="nx">page</span><span class="w"> </span><span class="nx">number</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0xA34</span><span class="w"> </span><span class="p">(</span><span class="nx">offset</span><span class="p">)</span><span class="err">â”‚</span><span class="w">                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="nx">Look</span><span class="w"> </span><span class="nx">up</span><span class="w"> </span><span class="nx">page</span><span class="w"> </span><span class="nx">table</span><span class="w">                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="nx">Number</span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Frame</span><span class="w"> </span><span class="nx">Number</span><span class="err">â”‚</span><span class="w">                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">0</span><span class="w">      </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">2</span><span class="w">      </span><span class="err">â”‚</span><span class="w">                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">1</span><span class="w">      </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">7</span><span class="w">      </span><span class="err">â”‚</span><span class="w">                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">2</span><span class="w">      </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">1</span><span class="w">      </span><span class="err">â”‚</span><span class="w">                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">3</span><span class="w">      </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">5</span><span class="w">      </span><span class="err">â”‚</span><span class="w">                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">4</span><span class="w">      </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">8</span><span class="w">      </span><span class="err">â”‚</span><span class="w">                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">5</span><span class="w">      </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">3</span><span class="w">      </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â—€â”€â”€</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="nx">Frame</span><span class="w"> </span><span class="mi">3</span><span class="w">                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="nx">Calculate</span><span class="w"> </span><span class="nx">physical</span><span class="w"> </span><span class="nx">address</span><span class="w">                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="nx">Physical</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">(</span><span class="nx">frame</span><span class="w"> </span><span class="nx">number</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="nx">page</span><span class="w"> </span><span class="nx">size</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">offset</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                       </span><span class="p">=</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mh">0x1000</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0xA34</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                       </span><span class="p">=</span><span class="w"> </span><span class="mh">0x3000</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0xA34</span><span class="w">                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                       </span><span class="p">=</span><span class="w"> </span><span class="mh">0x3A34</span><span class="w">                                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Result</span><span class="p">:</span><span class="w"> </span><span class="nx">Logical</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="mh">0x5A34</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="nx">Physical</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="mh">0x3A34</span><span class="w">             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="23-c-language-implementation">2.3 C Language Implementation<a class="header-link" href="#23-c-language-implementation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdint.h&gt;</span>

<span class="cp">#define PAGE_SIZE       4096        </span><span class="c1">// 4KB</span>
<span class="cp">#define PAGE_BITS       12          </span><span class="c1">// log2(4096)</span>
<span class="cp">#define NUM_PAGES       1024        </span><span class="c1">// Number of page table entries</span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">frame_number</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w">  </span><span class="n">valid</span><span class="p">;</span><span class="w">                 </span><span class="c1">// Valid bit</span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w">  </span><span class="n">read_only</span><span class="p">;</span><span class="w">             </span><span class="c1">// Read-only</span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w">  </span><span class="n">modified</span><span class="p">;</span><span class="w">              </span><span class="c1">// Modified (dirty bit)</span>
<span class="p">}</span><span class="w"> </span><span class="n">PageTableEntry</span><span class="p">;</span>

<span class="n">PageTableEntry</span><span class="w"> </span><span class="n">page_table</span><span class="p">[</span><span class="n">NUM_PAGES</span><span class="p">];</span>

<span class="c1">// Logical address â†’ Physical address translation</span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="nf">translate_address</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">logical_address</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 1. Separate page number and offset</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">page_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">logical_address</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">PAGE_BITS</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">logical_address</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">PAGE_SIZE</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Logical address: 0x%08X</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">logical_address</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Page number: %u, Offset: 0x%X</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">page_number</span><span class="p">,</span><span class="w"> </span><span class="n">offset</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// 2. Check page table bounds</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">page_number</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">NUM_PAGES</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;ERROR: Page number out of bounds!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 3. Check valid bit</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">page_table</span><span class="p">[</span><span class="n">page_number</span><span class="p">].</span><span class="n">valid</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;PAGE FAULT: Page %u is not in memory</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">page_number</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span><span class="w">  </span><span class="c1">// Page fault handling required</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 4. Calculate physical address</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">frame_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">page_table</span><span class="p">[</span><span class="n">page_number</span><span class="p">].</span><span class="n">frame_number</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">physical_address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">frame_number</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">PAGE_BITS</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">offset</span><span class="p">;</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Frame number: %u</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">frame_number</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Physical address: 0x%08X</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">physical_address</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">physical_address</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Initialize page table</span>
<span class="w">    </span><span class="n">page_table</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">PageTableEntry</span><span class="p">){.</span><span class="n">frame_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">valid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">};</span>
<span class="w">    </span><span class="n">page_table</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">PageTableEntry</span><span class="p">){.</span><span class="n">frame_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">valid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">};</span>
<span class="w">    </span><span class="n">page_table</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">PageTableEntry</span><span class="p">){.</span><span class="n">frame_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">valid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">};</span>
<span class="w">    </span><span class="n">page_table</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">PageTableEntry</span><span class="p">){.</span><span class="n">frame_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">valid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">};</span>

<span class="w">    </span><span class="c1">// Test address translation</span>
<span class="w">    </span><span class="n">translate_address</span><span class="p">(</span><span class="mh">0x00000A34</span><span class="p">);</span><span class="w">  </span><span class="c1">// Page 0</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">translate_address</span><span class="p">(</span><span class="mh">0x00005A34</span><span class="p">);</span><span class="w">  </span><span class="c1">// Page 5</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="24-calculation-example">2.4 Calculation Example<a class="header-link" href="#24-calculation-example" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                      </span><span class="nx">Address</span><span class="w"> </span><span class="nx">Translation</span><span class="w"> </span><span class="nx">Example</span><span class="w">                         </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nx">Problem</span><span class="p">:</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="nx">size</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="nx">KB</span><span class="p">,</span><span class="w"> </span><span class="nx">Logical</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">4500</span><span class="w">                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nx">Solution</span><span class="p">:</span><span class="w">                                                               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="nx">size</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">2</span><span class="o">^</span><span class="mi">10</span><span class="w"> </span><span class="nx">bytes</span><span class="w">                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â†’</span><span class="w"> </span><span class="nx">Offset</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="nx">bits</span><span class="w">                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="nx">Separate</span><span class="w"> </span><span class="nx">logical</span><span class="w"> </span><span class="nx">address</span><span class="p">:</span><span class="w">                                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="nx">Page</span><span class="w"> </span><span class="nx">number</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">4500</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">(</span><span class="nx">integer</span><span class="w"> </span><span class="nx">division</span><span class="p">)</span><span class="w">                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="nx">Offset</span><span class="w">     </span><span class="p">=</span><span class="w"> </span><span class="mi">4500</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">404</span><span class="w">                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="nx">Verification</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">404</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">4096</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">404</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">4500</span><span class="w"> </span><span class="err">âœ“</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="nx">Look</span><span class="w"> </span><span class="nx">up</span><span class="w"> </span><span class="nx">page</span><span class="w"> </span><span class="nx">table</span><span class="p">:</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="nx">Frame</span><span class="w"> </span><span class="mi">7</span><span class="w">                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">4</span><span class="p">.</span><span class="w"> </span><span class="nx">Physical</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">Frame</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">404</span><span class="w">                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                      </span><span class="p">=</span><span class="w"> </span><span class="mi">7168</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">404</span><span class="w">                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                      </span><span class="p">=</span><span class="w"> </span><span class="mi">7572</span><span class="w">                                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nx">Binary</span><span class="w"> </span><span class="nx">verification</span><span class="p">:</span><span class="w">                                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">Logical</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="mi">4500</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">0001</span><span class="w"> </span><span class="mi">0001</span><span class="w"> </span><span class="mi">1001</span><span class="w"> </span><span class="mi">0100</span><span class="w">                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                           </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                           </span><span class="nx">Page</span><span class="w"> </span><span class="mi">4</span><span class="w">    </span><span class="nx">Offset</span><span class="w"> </span><span class="mi">404</span><span class="w">                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">Physical</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="mi">7572</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">0001</span><span class="w"> </span><span class="mi">1101</span><span class="w"> </span><span class="mi">1001</span><span class="w"> </span><span class="mi">0100</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                            </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                            </span><span class="nx">Frame</span><span class="w"> </span><span class="mi">7</span><span class="w">   </span><span class="nx">Offset</span><span class="w"> </span><span class="mi">404</span><span class="w"> </span><span class="p">(</span><span class="nx">same</span><span class="p">!)</span><span class="w">                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="3-page-table">3. Page Table<a class="header-link" href="#3-page-table" title="Permanent link">&para;</a></h2>
<h3 id="31-page-table-entry-pte">3.1 Page Table Entry (PTE)<a class="header-link" href="#31-page-table-entry-pte" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">                   </span><span class="nv">Page</span><span class="w"> </span><span class="nv">Table</span><span class="w"> </span><span class="nv">Entry</span><span class="w"> </span><span class="nv">Structure</span><span class="w"> </span><span class="ss">(</span><span class="mi">32</span><span class="o">-</span><span class="nv">bit</span><span class="ss">)</span><span class="w">                    </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span><span class="mi">31</span><span class="w">                               </span><span class="mi">12</span><span class="w"> </span><span class="mi">11</span><span class="w">         </span><span class="mi">4</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="w">              </span>â”‚
â”‚<span class="w">   </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”<span class="w">              </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w">        </span><span class="nv">Frame</span><span class="w"> </span><span class="nv">Number</span><span class="w"> </span><span class="ss">(</span><span class="mi">20</span><span class="w"> </span><span class="nv">bits</span><span class="ss">)</span><span class="w">    </span>â”‚<span class="w"> </span><span class="nv">Reserved</span><span class="w"> </span>â”‚<span class="nv">D</span>â”‚<span class="nv">A</span>â”‚<span class="nv">U</span>â”‚<span class="nv">V</span>â”‚<span class="w">              </span>â”‚
â”‚<span class="w">   </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”´â”€â”´â”€â”´â”€â”˜<span class="w">              </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span><span class="nv">V</span><span class="w"> </span><span class="ss">(</span><span class="nv">Valid</span><span class="ss">)</span>:<span class="w"> </span><span class="nv">Valid</span><span class="w"> </span><span class="nv">bit</span><span class="w">                                                  </span>â”‚
â”‚<span class="w">       </span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">Page</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span><span class="ss">(</span><span class="nv">page</span><span class="w"> </span><span class="nv">fault</span><span class="w"> </span><span class="nv">occurs</span><span class="ss">)</span><span class="w">                        </span>â”‚
â”‚<span class="w">       </span><span class="mi">1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">Page</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">memory</span><span class="w">                                             </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span><span class="nv">U</span><span class="w"> </span><span class="ss">(</span><span class="nv">User</span><span class="ss">)</span>:<span class="w"> </span><span class="nv">User</span><span class="w"> </span><span class="nv">access</span><span class="w"> </span><span class="nv">allowed</span><span class="w">                                         </span>â”‚
â”‚<span class="w">       </span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">Kernel</span><span class="w"> </span><span class="nv">mode</span><span class="w"> </span><span class="nv">only</span><span class="w">                                              </span>â”‚
â”‚<span class="w">       </span><span class="mi">1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">User</span><span class="w"> </span><span class="nv">mode</span><span class="w"> </span><span class="nv">access</span><span class="w"> </span><span class="nv">allowed</span><span class="w">                                      </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span><span class="nv">A</span><span class="w"> </span><span class="ss">(</span><span class="nv">Accessed</span><span class="ss">)</span>:<span class="w"> </span><span class="nv">Accessed</span><span class="w"> </span><span class="nv">bit</span><span class="w">                                            </span>â”‚
â”‚<span class="w">       </span><span class="nv">Hardware</span><span class="w"> </span><span class="nv">sets</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">access</span><span class="w">                                      </span>â”‚
â”‚<span class="w">       </span><span class="nv">Used</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">page</span><span class="w"> </span><span class="nv">replacement</span><span class="w"> </span><span class="nv">algorithms</span><span class="w">                               </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span><span class="nv">D</span><span class="w"> </span><span class="ss">(</span><span class="nv">Dirty</span><span class="ss">)</span>:<span class="w"> </span><span class="nv">Modified</span><span class="w"> </span><span class="nv">bit</span><span class="w">                                               </span>â”‚
â”‚<span class="w">       </span><span class="nv">Hardware</span><span class="w"> </span><span class="nv">sets</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">write</span><span class="w">                                       </span>â”‚
â”‚<span class="w">       </span><span class="nv">Determines</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">page</span><span class="w"> </span><span class="nv">needs</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">written</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">disk</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">eviction</span><span class="w">        </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="32-page-table-storage-location">3.2 Page Table Storage Location<a class="header-link" href="#32-page-table-storage-location" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                   </span><span class="nx">Page</span><span class="w"> </span><span class="nx">Table</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="nx">PTBR</span><span class="w">                                    </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">CPU</span><span class="w">                                                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                                        </span><span class="err">â”‚</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">PTBR</span><span class="w"> </span><span class="p">(</span><span class="nx">Page</span><span class="w"> </span><span class="nx">Table</span><span class="w"> </span><span class="nx">Base</span><span class="w"> </span><span class="nx">Register</span><span class="p">)</span><span class="w">      </span><span class="err">â”‚</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">         </span><span class="mh">0x00100000</span><span class="w">             </span><span class="err">â”‚â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">   </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                                        </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">PTLR</span><span class="w"> </span><span class="p">(</span><span class="nx">Page</span><span class="w"> </span><span class="nx">Table</span><span class="w"> </span><span class="nx">Length</span><span class="w"> </span><span class="nx">Register</span><span class="p">)</span><span class="w">    </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">   </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">            </span><span class="mi">1024</span><span class="w">                </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">   </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                                        </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                     </span><span class="err">â”‚</span><span class="w">                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                     </span><span class="err">â–¼</span><span class="w">                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Physical</span><span class="w"> </span><span class="nx">Memory</span><span class="w">                                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                                                    </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">Address</span><span class="w"> </span><span class="mh">0x00100000</span><span class="w">                               </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="nx">Page</span><span class="w"> </span><span class="nx">Table</span><span class="w"> </span><span class="p">(</span><span class="nx">Process</span><span class="w"> </span><span class="nx">A</span><span class="p">)</span><span class="w">                 </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="mi">0</span><span class="w">       </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Frame</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">V</span><span class="p">=</span><span class="mi">1</span><span class="w">     </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="mi">1</span><span class="w">       </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Frame</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">V</span><span class="p">=</span><span class="mi">1</span><span class="w">     </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="mi">2</span><span class="w">       </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Frame</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">V</span><span class="p">=</span><span class="mi">1</span><span class="w">     </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="o">...</span><span class="w">          </span><span class="err">â”‚</span><span class="w"> </span><span class="o">...</span><span class="w">                </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                                                    </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">On</span><span class="w"> </span><span class="nx">context</span><span class="w"> </span><span class="nx">switch</span><span class="p">:</span><span class="w"> </span><span class="nx">Change</span><span class="w"> </span><span class="nx">PTBR</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">new</span><span class="w"> </span><span class="nx">process</span><span class="err">&#39;</span><span class="nx">s</span><span class="w"> </span><span class="nx">page</span><span class="w"> </span><span class="nx">table</span><span class="w"> </span><span class="kd">addr</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="33-memory-access-problem">3.3 Memory Access Problem<a class="header-link" href="#33-memory-access-problem" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                   </span><span class="nx">Two</span><span class="w"> </span><span class="nx">Memory</span><span class="w"> </span><span class="nx">Access</span><span class="w"> </span><span class="nx">Problem</span><span class="w">                              </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Memory</span><span class="w"> </span><span class="nx">access</span><span class="w"> </span><span class="nx">when</span><span class="w"> </span><span class="nx">using</span><span class="w"> </span><span class="nx">paging</span><span class="p">:</span><span class="w">                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">CPU</span><span class="w"> </span><span class="err">â”€â”€â–¶</span><span class="w"> </span><span class="nx">Generate</span><span class="w"> </span><span class="nx">logical</span><span class="w"> </span><span class="nx">address</span><span class="w">                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w">                                                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â–¼</span><span class="w">                                                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="nx">Access</span><span class="w"> </span><span class="nx">page</span><span class="w"> </span><span class="nx">table</span><span class="w"> </span><span class="p">(</span><span class="nx">Memory</span><span class="w"> </span><span class="nx">access</span><span class="w"> </span><span class="err">#</span><span class="mi">1</span><span class="p">)</span><span class="w">                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w">                                                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â–¼</span><span class="w">                                                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Get</span><span class="w"> </span><span class="nx">frame</span><span class="w"> </span><span class="nx">number</span><span class="w">                                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w">                                                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â–¼</span><span class="w">                                                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="nx">Access</span><span class="w"> </span><span class="nx">actual</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="p">(</span><span class="nx">Memory</span><span class="w"> </span><span class="nx">access</span><span class="w"> </span><span class="err">#</span><span class="mi">2</span><span class="p">)</span><span class="w">                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w">                                                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â–¼</span><span class="w">                                                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Get</span><span class="w"> </span><span class="nx">data</span><span class="w">                                                               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Problem</span><span class="p">:</span><span class="w"> </span><span class="nx">Memory</span><span class="w"> </span><span class="nx">access</span><span class="w"> </span><span class="nx">becomes</span><span class="w"> </span><span class="mi">2</span><span class="nx">x</span><span class="w"> </span><span class="nx">slower</span><span class="p">!</span><span class="w">                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Solution</span><span class="p">:</span><span class="w"> </span><span class="nx">Use</span><span class="w"> </span><span class="nx">TLB</span><span class="w"> </span><span class="p">(</span><span class="nx">Translation</span><span class="w"> </span><span class="nx">Lookaside</span><span class="w"> </span><span class="nx">Buffer</span><span class="p">)</span><span class="w">                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="4-tlb-translation-lookaside-buffer">4. TLB (Translation Lookaside Buffer)<a class="header-link" href="#4-tlb-translation-lookaside-buffer" title="Permanent link">&para;</a></h2>
<h3 id="41-tlb-concept">4.1 TLB Concept<a class="header-link" href="#41-tlb-concept" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           TLB Structure                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   High-speed cache inside CPU or MMU                                    â”‚
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚                          TLB                                â”‚        â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
â”‚   â”‚   Page Number    â”‚    Frame Number    â”‚    ASID    â”‚  Valid  â”‚        â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
â”‚   â”‚       5          â”‚         3         â”‚     1      â”‚    1    â”‚        â”‚
â”‚   â”‚       2          â”‚         7         â”‚     1      â”‚    1    â”‚        â”‚
â”‚   â”‚      12          â”‚         9         â”‚     2      â”‚    1    â”‚        â”‚
â”‚   â”‚       0          â”‚         1         â”‚     1      â”‚    1    â”‚        â”‚
â”‚   â”‚      ...         â”‚        ...        â”‚    ...     â”‚   ...   â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                          â”‚
â”‚   ASID (Address Space ID): Process identifier                           â”‚
â”‚   â†’ No need to flush entire TLB on context switch                       â”‚
â”‚                                                                          â”‚
â”‚   Entry count: Usually 64 ~ 1024 entries (very small, but very fast)    â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="42-address-translation-using-tlb">4.2 Address Translation Using TLB<a class="header-link" href="#42-address-translation-using-tlb" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                     </span><span class="nx">Address</span><span class="w"> </span><span class="nx">Translation</span><span class="w"> </span><span class="nx">Using</span><span class="w"> </span><span class="nx">TLB</span><span class="w">                        </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Logical</span><span class="w"> </span><span class="nx">address</span><span class="w">                                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">       </span><span class="err">â–¼</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">      </span><span class="nx">Extract</span><span class="w"> </span><span class="nx">page</span><span class="w"> </span><span class="nx">number</span><span class="w">        </span><span class="err">â”‚</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">       </span><span class="err">â–¼</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">       </span><span class="nx">Search</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nx">TLB</span><span class="w">             </span><span class="err">â”‚</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">       </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w">                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">TLB</span><span class="w"> </span><span class="nx">Hit</span><span class="w">                             </span><span class="nx">TLB</span><span class="w"> </span><span class="nx">Miss</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w">                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">       </span><span class="err">â–¼</span><span class="w">                                   </span><span class="err">â–¼</span><span class="w">                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Frame</span><span class="w"> </span><span class="nx">number</span><span class="w">                     </span><span class="nx">Access</span><span class="w"> </span><span class="nx">page</span><span class="w"> </span><span class="nx">table</span><span class="w">                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">immediately</span><span class="w"> </span><span class="nx">obtained</span><span class="w">             </span><span class="p">(</span><span class="nx">memory</span><span class="w"> </span><span class="nx">access</span><span class="p">)</span><span class="w">                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w">                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                                   </span><span class="err">â–¼</span><span class="w">                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                           </span><span class="nx">Update</span><span class="w"> </span><span class="nx">TLB</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w">                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">       </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                       </span><span class="err">â”‚</span><span class="w">                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                       </span><span class="err">â–¼</span><span class="w">                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">               </span><span class="nx">Calculate</span><span class="w"> </span><span class="nx">physical</span><span class="w"> </span><span class="nx">address</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                       </span><span class="err">â”‚</span><span class="w">                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                       </span><span class="err">â–¼</span><span class="w">                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                  </span><span class="nx">Memory</span><span class="w"> </span><span class="nx">access</span><span class="w">                                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="43-effective-access-time-eat">4.3 Effective Access Time (EAT)<a class="header-link" href="#43-effective-access-time-eat" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Effective Access Time Calculation                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   Parameters:                                                            â”‚
â”‚   - TLB search time: Îµ (e.g., 10ns)                                     â”‚
â”‚   - Memory access time: m (e.g., 100ns)                                 â”‚
â”‚   - TLB hit ratio: Î± (e.g., 0.98 = 98%)                                â”‚
â”‚                                                                          â”‚
â”‚   EAT formula:                                                           â”‚
â”‚   EAT = Î± Ã— (Îµ + m) + (1-Î±) Ã— (Îµ + 2m)                                 â”‚
â”‚         â†‘ TLB Hit       â†‘ TLB Miss                                      â”‚
â”‚                                                                          â”‚
â”‚   Example calculation:                                                   â”‚
â”‚   Îµ = 10ns, m = 100ns, Î± = 0.98                                        â”‚
â”‚                                                                          â”‚
â”‚   EAT = 0.98 Ã— (10 + 100) + 0.02 Ã— (10 + 200)                          â”‚
â”‚       = 0.98 Ã— 110 + 0.02 Ã— 210                                        â”‚
â”‚       = 107.8 + 4.2                                                     â”‚
â”‚       = 112ns                                                            â”‚
â”‚                                                                          â”‚
â”‚   Comparison:                                                            â”‚
â”‚   - Without TLB: 200ns (2 memory accesses)                              â”‚
â”‚   - With TLB: 112ns                                                      â”‚
â”‚   - Performance improvement: ~44%                                        â”‚
â”‚                                                                          â”‚
â”‚   Higher TLB hit ratio results in greater performance improvement        â”‚
â”‚   Î± = 0.99: EAT = 0.99Ã—110 + 0.01Ã—210 = 112ns                          â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<hr />
<h2 id="5-multi-level-page-tables">5. Multi-level Page Tables<a class="header-link" href="#5-multi-level-page-tables" title="Permanent link">&para;</a></h2>
<h3 id="51-problem">5.1 Problem<a class="header-link" href="#51-problem" title="Permanent link">&para;</a></h3>
<p>For 32-bit address space with 4KB page size:
- Number of pages = 2^32 / 2^12 = 2^20 = ~1 million
- PTE size = 4 bytes
- Page table size = 1 million Ã— 4 = 4MB (per process!)</p>
<h3 id="52-two-level-page-table">5.2 Two-Level Page Table<a class="header-link" href="#52-two-level-page-table" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                      </span><span class="nx">Two</span><span class="o">-</span><span class="nx">Level</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="nx">Table</span><span class="w">                                </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="mi">32</span><span class="o">-</span><span class="nx">bit</span><span class="w"> </span><span class="nx">logical</span><span class="w"> </span><span class="nx">address</span><span class="p">:</span><span class="w">                                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">p1</span><span class="w"> </span><span class="p">(</span><span class="mi">10</span><span class="nx">bits</span><span class="p">)</span><span class="w"> </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">p2</span><span class="w"> </span><span class="p">(</span><span class="mi">10</span><span class="nx">bits</span><span class="p">)</span><span class="w"> </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">d</span><span class="w"> </span><span class="p">(</span><span class="mi">12</span><span class="nx">bits</span><span class="p">)</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Outer</span><span class="w"> </span><span class="nx">page</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Inner</span><span class="w"> </span><span class="nx">page</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">Offset</span><span class="w">     </span><span class="err">â”‚</span><span class="w">                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">          </span><span class="err">â–¼</span><span class="w">              </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">        </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Outer</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">Table</span><span class="w">    </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="p">(</span><span class="nx">Level</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w">  </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">        </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="o">...</span><span class="w">      </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">p1</span><span class="w"> </span><span class="nx">entry</span><span class="w">  </span><span class="err">â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="o">...</span><span class="w">      </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">        </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â–¼</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Inner</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="err">â”‚</span><span class="w">                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">Table</span><span class="w">    </span><span class="err">â”‚</span><span class="w">                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="p">(</span><span class="nx">Level</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="o">...</span><span class="w">      </span><span class="err">â”‚</span><span class="w">                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                         </span><span class="err">â””â–¶</span><span class="w"> </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">p2</span><span class="w"> </span><span class="nx">entry</span><span class="w">  </span><span class="err">â”‚â”€â”€â”€â–¶</span><span class="w"> </span><span class="nx">Frame</span><span class="w"> </span><span class="nx">number</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                            </span><span class="err">â”‚</span><span class="w">   </span><span class="o">...</span><span class="w">      </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span><span class="w">                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                            </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">         </span><span class="err">â”‚</span><span class="w">                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                   </span><span class="err">â”‚</span><span class="w">                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                   </span><span class="err">â–¼</span><span class="w">                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                    </span><span class="nx">Physical</span><span class="w"> </span><span class="kd">addr</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">Frame</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">4</span><span class="nx">KB</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">d</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="53-four-level-page-table-for-64-bit-systems">5.3 Four-Level Page Table for 64-bit Systems<a class="header-link" href="#53-four-level-page-table-for-64-bit-systems" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                 </span><span class="mi">64</span><span class="o">-</span><span class="nx">bit</span><span class="w"> </span><span class="mi">4</span><span class="o">-</span><span class="nx">Level</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="nx">Table</span><span class="w"> </span><span class="p">(</span><span class="nx">x86</span><span class="o">-</span><span class="mi">64</span><span class="p">)</span><span class="w">                       </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="mi">64</span><span class="o">-</span><span class="nx">bit</span><span class="w"> </span><span class="kd">virtual</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="p">(</span><span class="nx">actual</span><span class="w"> </span><span class="nx">usage</span><span class="p">:</span><span class="w"> </span><span class="mi">48</span><span class="w"> </span><span class="nx">bits</span><span class="p">)</span><span class="w">                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Unused</span><span class="w"> </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">PML4</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">PDPT</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">PD</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">PT</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="nx">Offset</span><span class="w">    </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="p">(</span><span class="mi">16</span><span class="p">)</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="w">   </span><span class="err">â”‚</span><span class="w">     </span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="w">     </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">               </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span><span class="w">            </span><span class="err">â”‚</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">               </span><span class="err">â–¼</span><span class="w">        </span><span class="err">â–¼</span><span class="w">        </span><span class="err">â–¼</span><span class="w">        </span><span class="err">â–¼</span><span class="w">            </span><span class="err">â”‚</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">    </span><span class="err">â”‚</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">CR3</span><span class="w"> </span><span class="err">â”€â”€â–¶</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">PML4</span><span class="w">  </span><span class="err">â”‚â”€â–¶â”‚</span><span class="w"> </span><span class="nx">PDPT</span><span class="w"> </span><span class="err">â”‚â”€â–¶â”‚</span><span class="w">  </span><span class="nx">PD</span><span class="w">   </span><span class="err">â”‚â”€â–¶â”‚</span><span class="w">  </span><span class="nx">PT</span><span class="w">   </span><span class="err">â”‚â”€â”€â”€â”¼â”€â”€â”€â–¶</span><span class="w"> </span><span class="nx">Physical</span><span class="w"> </span><span class="kd">addr</span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Table</span><span class="w"> </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Table</span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Table</span><span class="w"> </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Table</span><span class="w"> </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Each</span><span class="w"> </span><span class="nx">level</span><span class="p">:</span><span class="w"> </span><span class="mi">512</span><span class="w"> </span><span class="nx">entries</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="o">^</span><span class="mi">9</span><span class="p">),</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="nx">bytes</span><span class="o">/</span><span class="nx">entry</span><span class="w">         </span><span class="err">â”‚</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Table</span><span class="w"> </span><span class="nx">size</span><span class="p">:</span><span class="w"> </span><span class="mi">512</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">4</span><span class="nx">KB</span><span class="w"> </span><span class="p">(=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nx">page</span><span class="p">)</span><span class="w">                 </span><span class="err">â”‚</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">PML4</span><span class="p">:</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="nx">Map</span><span class="w"> </span><span class="nx">Level</span><span class="w"> </span><span class="mi">4</span><span class="w">                               </span><span class="err">â”‚</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">PDPT</span><span class="p">:</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="nx">Directory</span><span class="w"> </span><span class="nx">Pointer</span><span class="w"> </span><span class="nx">Table</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">PD</span><span class="p">:</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="nx">Directory</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">PT</span><span class="p">:</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="nx">Table</span><span class="w">                                       </span><span class="err">â”‚</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="54-advantages-of-multi-level-tables">5.4 Advantages of Multi-level Tables<a class="header-link" href="#54-advantages-of-multi-level-tables" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// Memory savings with multi-level page tables</span>

<span class="c1">// Process memory usage:</span>
<span class="c1">// - Code: 0x00000000 ~ 0x00100000 (1MB, 256 pages)</span>
<span class="c1">// - Stack: 0xBFF00000 ~ 0xC0000000 (1MB, 256 pages)</span>

<span class="c1">// Single page table: 4MB needed (all 1 million entries)</span>

<span class="c1">// Two-level page table:</span>
<span class="c1">// - Level 1 table: 4KB (1024 entries)</span>
<span class="c1">// - Level 2 tables: Only what&#39;s needed!</span>
<span class="c1">//   - Code region: 1 Ã— 4KB</span>
<span class="c1">//   - Stack region: 1 Ã— 4KB</span>
<span class="c1">// Total: 4KB + 4KB + 4KB = 12KB (saved from 4MB to 12KB!)</span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">present</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">writable</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">reserved</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">9</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">frame</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">20</span><span class="p">;</span><span class="w">       </span><span class="c1">// Next level table or frame</span>
<span class="p">}</span><span class="w"> </span><span class="n">PageTableEntry</span><span class="p">;</span>

<span class="c1">// Two-level address translation</span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="nf">translate_two_level</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">virtual_addr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">p1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">virtual_addr</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">22</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0x3FF</span><span class="p">;</span><span class="w">   </span><span class="c1">// Upper 10 bits</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">p2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">virtual_addr</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">12</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0x3FF</span><span class="p">;</span><span class="w">   </span><span class="c1">// Middle 10 bits</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">virtual_addr</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0xFFF</span><span class="p">;</span><span class="w">        </span><span class="c1">// Lower 12 bits</span>

<span class="w">    </span><span class="c1">// Access level 1 table</span>
<span class="w">    </span><span class="n">PageTableEntry</span><span class="o">*</span><span class="w"> </span><span class="n">level1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">PageTableEntry</span><span class="o">*</span><span class="p">)</span><span class="n">PTBR</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">level1</span><span class="p">[</span><span class="n">p1</span><span class="p">].</span><span class="n">present</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Level 2 table doesn&#39;t exist</span>
<span class="w">        </span><span class="n">page_fault_handler</span><span class="p">();</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Access level 2 table</span>
<span class="w">    </span><span class="n">PageTableEntry</span><span class="o">*</span><span class="w"> </span><span class="n">level2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">PageTableEntry</span><span class="o">*</span><span class="p">)(</span><span class="n">level1</span><span class="p">[</span><span class="n">p1</span><span class="p">].</span><span class="n">frame</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">12</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">level2</span><span class="p">[</span><span class="n">p2</span><span class="p">].</span><span class="n">present</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Page not in memory</span>
<span class="w">        </span><span class="n">page_fault_handler</span><span class="p">();</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Calculate physical address</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">frame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">level2</span><span class="p">[</span><span class="n">p2</span><span class="p">].</span><span class="n">frame</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">frame</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">12</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">offset</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h2 id="6-hashed-page-tables">6. Hashed Page Tables<a class="header-link" href="#6-hashed-page-tables" title="Permanent link">&para;</a></h2>
<h3 id="61-structure">6.1 Structure<a class="header-link" href="#61-structure" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                       </span><span class="n">Hashed</span><span class="w"> </span><span class="n">Page</span><span class="w"> </span><span class="n">Table</span><span class="w">                                  </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">Virtual</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">number</span><span class="w">                                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span><span class="w">                                                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">         </span><span class="err">â–¼</span><span class="w">                                                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Hash</span><span class="w"> </span><span class="k">func</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span><span class="w">                                                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">         </span><span class="err">â–¼</span><span class="w">                                                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">Hash</span><span class="w"> </span><span class="n">table</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Index</span><span class="w"> </span><span class="err">â”‚</span><span class="w">                    </span><span class="n">Chain</span><span class="w">                              </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">0</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="p">[</span><span class="n">p</span><span class="o">=</span><span class="mi">102</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="o">=</span><span class="mi">5</span><span class="p">]</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="p">[</span><span class="n">p</span><span class="o">=</span><span class="mi">2050</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="o">=</span><span class="mi">12</span><span class="p">]</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">NULL</span><span class="w">                 </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">1</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">NULL</span><span class="w">                                                  </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">2</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="p">[</span><span class="n">p</span><span class="o">=</span><span class="mi">55</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="o">=</span><span class="mi">8</span><span class="p">]</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">NULL</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">3</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="p">[</span><span class="n">p</span><span class="o">=</span><span class="mi">1003</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="o">=</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="p">[</span><span class="n">p</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="o">=</span><span class="mi">22</span><span class="p">]</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="p">[</span><span class="n">p</span><span class="o">=</span><span class="mi">4099</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="o">=</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">NULL</span><span class="w">  </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="o">...</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="o">...</span><span class="w">                                                   </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Virtual</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">number</span><span class="w">                                               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Physical</span><span class="w"> </span><span class="n">frame</span><span class="w"> </span><span class="n">number</span><span class="w">                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">Advantage</span><span class="p">:</span><span class="w"> </span><span class="n">Efficient</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">sparse</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="n">spaces</span><span class="w"> </span><span class="p">(</span><span class="mi">64</span><span class="o">-</span><span class="n">bit</span><span class="w"> </span><span class="n">systems</span><span class="p">)</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">Disadvantage</span><span class="p">:</span><span class="w"> </span><span class="n">Chain</span><span class="w"> </span><span class="n">search</span><span class="w"> </span><span class="n">required</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="nb">hash</span><span class="w"> </span><span class="n">collision</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="62-implementation">6.2 Implementation<a class="header-link" href="#62-implementation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="cp">#define HASH_TABLE_SIZE 1024</span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">HashEntry</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">virtual_page</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">physical_frame</span><span class="p">;</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">HashEntry</span><span class="o">*</span><span class="w"> </span><span class="n">next</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">HashEntry</span><span class="p">;</span>

<span class="n">HashEntry</span><span class="o">*</span><span class="w"> </span><span class="n">hash_table</span><span class="p">[</span><span class="n">HASH_TABLE_SIZE</span><span class="p">];</span>

<span class="c1">// Hash function</span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">virtual_page</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">virtual_page</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">HASH_TABLE_SIZE</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Search for frame number</span>
<span class="kt">int64_t</span><span class="w"> </span><span class="nf">lookup</span><span class="p">(</span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">virtual_page</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hash</span><span class="p">(</span><span class="n">virtual_page</span><span class="p">);</span>
<span class="w">    </span><span class="n">HashEntry</span><span class="o">*</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hash_table</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>

<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">entry</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">entry</span><span class="o">-&gt;</span><span class="n">virtual_page</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">virtual_page</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">entry</span><span class="o">-&gt;</span><span class="n">physical_frame</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">entry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">entry</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span><span class="w">  </span><span class="c1">// Page fault</span>
<span class="p">}</span>

<span class="c1">// Add mapping</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">insert</span><span class="p">(</span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">virtual_page</span><span class="p">,</span><span class="w"> </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">physical_frame</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hash</span><span class="p">(</span><span class="n">virtual_page</span><span class="p">);</span>

<span class="w">    </span><span class="n">HashEntry</span><span class="o">*</span><span class="w"> </span><span class="n">new_entry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">HashEntry</span><span class="p">));</span>
<span class="w">    </span><span class="n">new_entry</span><span class="o">-&gt;</span><span class="n">virtual_page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">virtual_page</span><span class="p">;</span>
<span class="w">    </span><span class="n">new_entry</span><span class="o">-&gt;</span><span class="n">physical_frame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">physical_frame</span><span class="p">;</span>
<span class="w">    </span><span class="n">new_entry</span><span class="o">-&gt;</span><span class="n">next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hash_table</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>

<span class="w">    </span><span class="n">hash_table</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new_entry</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h2 id="7-inverted-page-tables">7. Inverted Page Tables<a class="header-link" href="#7-inverted-page-tables" title="Permanent link">&para;</a></h2>
<h3 id="71-concept">7.1 Concept<a class="header-link" href="#71-concept" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                       </span><span class="nx">Inverted</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="nx">Table</span><span class="w">                                </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Traditional</span><span class="w"> </span><span class="nx">page</span><span class="w"> </span><span class="nx">table</span><span class="p">:</span><span class="w">                                               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nx">Separate</span><span class="w"> </span><span class="nx">table</span><span class="w"> </span><span class="nx">per</span><span class="w"> </span><span class="nx">process</span><span class="w">                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nx">Virtual</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="nx">Physical</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="nx">mapping</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nx">Table</span><span class="w"> </span><span class="nx">size</span><span class="w"> </span><span class="nx">proportional</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="kd">virtual</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="nx">space</span><span class="w">                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Inverted</span><span class="w"> </span><span class="nx">page</span><span class="w"> </span><span class="nx">table</span><span class="p">:</span><span class="w">                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nx">One</span><span class="w"> </span><span class="nx">table</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">entire</span><span class="w"> </span><span class="nx">system</span><span class="w">                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nx">Entry</span><span class="w"> </span><span class="nx">per</span><span class="w"> </span><span class="nx">physical</span><span class="w"> </span><span class="nx">frame</span><span class="w">                                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nx">Table</span><span class="w"> </span><span class="nx">size</span><span class="w"> </span><span class="nx">proportional</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">physical</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">size</span><span class="w">                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Frame</span><span class="w"> </span><span class="nx">Number</span><span class="w"> </span><span class="err">â”‚</span><span class="w">    </span><span class="nx">PID</span><span class="w">    </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Virtual</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="nx">Number</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">Protection</span><span class="w"> </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">      </span><span class="mi">0</span><span class="w">      </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">1</span><span class="w">     </span><span class="err">â”‚</span><span class="w">       </span><span class="mh">0x1234</span><span class="w">      </span><span class="err">â”‚</span><span class="w">     </span><span class="nx">R</span><span class="o">/</span><span class="nx">W</span><span class="w">       </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">      </span><span class="mi">1</span><span class="w">      </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">2</span><span class="w">     </span><span class="err">â”‚</span><span class="w">       </span><span class="mh">0x0001</span><span class="w">      </span><span class="err">â”‚</span><span class="w">     </span><span class="nx">R</span><span class="o">/</span><span class="nx">W</span><span class="w">       </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">      </span><span class="mi">2</span><span class="w">      </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">1</span><span class="w">     </span><span class="err">â”‚</span><span class="w">       </span><span class="mh">0x1235</span><span class="w">      </span><span class="err">â”‚</span><span class="w">     </span><span class="nx">R</span><span class="o">/</span><span class="nx">O</span><span class="w">       </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">      </span><span class="mi">3</span><span class="w">      </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">3</span><span class="w">     </span><span class="err">â”‚</span><span class="w">       </span><span class="mh">0x5678</span><span class="w">      </span><span class="err">â”‚</span><span class="w">     </span><span class="nx">R</span><span class="o">/</span><span class="nx">W</span><span class="w">       </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">     </span><span class="o">...</span><span class="w">     </span><span class="err">â”‚</span><span class="w">    </span><span class="o">...</span><span class="w">    </span><span class="err">â”‚</span><span class="w">        </span><span class="o">...</span><span class="w">        </span><span class="err">â”‚</span><span class="w">      </span><span class="o">...</span><span class="w">      </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">      </span><span class="nx">N</span><span class="w">      </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">2</span><span class="w">     </span><span class="err">â”‚</span><span class="w">       </span><span class="mh">0x0002</span><span class="w">      </span><span class="err">â”‚</span><span class="w">     </span><span class="nx">R</span><span class="o">/</span><span class="nx">W</span><span class="w">       </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Search</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="nx">PID</span><span class="p">,</span><span class="w"> </span><span class="kd">virtual</span><span class="w"> </span><span class="nx">page</span><span class="w"> </span><span class="nx">number</span><span class="p">)</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">find</span><span class="w"> </span><span class="nx">frame</span><span class="w"> </span><span class="nx">number</span><span class="w">               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="72-advantages-and-disadvantages">7.2 Advantages and Disadvantages<a class="header-link" href="#72-advantages-and-disadvantages" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                     </span><span class="nx">Inverted</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="nx">Table</span><span class="w"> </span><span class="nx">Pros</span><span class="o">/</span><span class="nx">Cons</span><span class="w">                        </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Advantages</span><span class="p">:</span><span class="w">                                                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="nx">Memory</span><span class="w"> </span><span class="nx">savings</span><span class="w">                                                </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nx">Physical</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="mi">4</span><span class="nx">GB</span><span class="p">,</span><span class="w"> </span><span class="nx">frame</span><span class="w"> </span><span class="mi">4</span><span class="nx">KB</span><span class="w">                             </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nx">Entry</span><span class="w"> </span><span class="nx">count</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">4</span><span class="nx">GB</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">4</span><span class="nx">KB</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="nx">M</span><span class="w"> </span><span class="nx">entries</span><span class="w">                       </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="nx">bytes</span><span class="w"> </span><span class="nx">per</span><span class="w"> </span><span class="nx">entry</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="nx">Total</span><span class="w"> </span><span class="mi">16</span><span class="nx">MB</span><span class="w"> </span><span class="p">(</span><span class="nx">independent</span><span class="w"> </span><span class="nx">of</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="nx">processes</span><span class="p">!)</span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="nx">Efficient</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="mi">64</span><span class="o">-</span><span class="nx">bit</span><span class="w"> </span><span class="nx">systems</span><span class="w">                                 </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nx">Virtual</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="nx">space</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">very</span><span class="w"> </span><span class="nx">large</span><span class="w"> </span><span class="nx">but</span><span class="w">                    </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nx">Physical</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">relatively</span><span class="w"> </span><span class="nx">small</span><span class="w">                        </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Disadvantages</span><span class="p">:</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="nx">Search</span><span class="w"> </span><span class="nx">time</span><span class="w">                                                   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nx">Sequential</span><span class="w"> </span><span class="nx">search</span><span class="p">:</span><span class="w"> </span><span class="nx">O</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">too</span><span class="w"> </span><span class="nx">slow</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nx">Hash</span><span class="w"> </span><span class="nx">table</span><span class="w"> </span><span class="nx">required</span><span class="w">                                        </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="nx">Difficult</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">share</span><span class="w"> </span><span class="nx">memory</span><span class="w">                                    </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nx">Only</span><span class="w"> </span><span class="nx">one</span><span class="w"> </span><span class="p">(</span><span class="nx">PID</span><span class="p">,</span><span class="w"> </span><span class="nx">page</span><span class="p">)</span><span class="w"> </span><span class="nx">pair</span><span class="w"> </span><span class="nx">per</span><span class="w"> </span><span class="nx">frame</span><span class="w">                       </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nx">Shared</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">implementation</span><span class="w"> </span><span class="nx">complex</span><span class="w">                       </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Usage</span><span class="w"> </span><span class="nx">examples</span><span class="p">:</span><span class="w"> </span><span class="nx">IBM</span><span class="w"> </span><span class="nx">PowerPC</span><span class="p">,</span><span class="w"> </span><span class="nx">UltraSPARC</span><span class="p">,</span><span class="w"> </span><span class="nx">IA</span><span class="o">-</span><span class="mi">64</span><span class="w">                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="practice-problems">Practice Problems<a class="header-link" href="#practice-problems" title="Permanent link">&para;</a></h2>
<h3 id="problem-1-address-translation">Problem 1: Address Translation<a class="header-link" href="#problem-1-address-translation" title="Permanent link">&para;</a></h3>
<p>Calculate the physical address given the following conditions with a page size of 4KB:</p>
<ul>
<li>Logical address: 25000</li>
<li>Page table: Page 6 â†’ Frame 4</li>
</ul>
<details>
<summary>Show Answer</summary>


<div class="highlight"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="n">Page</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4</span><span class="n">KB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4096</span><span class="w"> </span><span class="n">bytes</span>

<span class="mf">2.</span><span class="w"> </span><span class="n">Page</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">25000</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">4096</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="p">(</span><span class="nb">int</span><span class="n">eger</span><span class="w"> </span><span class="n">division</span><span class="p">)</span>
<span class="w">   </span><span class="n">Offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">25000</span><span class="w"> </span><span class="err">%</span><span class="w"> </span><span class="mf">4096</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">424</span>

<span class="w">   </span><span class="n">Verification</span><span class="p">:</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mf">4096</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">424</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">24576</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">424</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">25000</span><span class="w"> </span><span class="err">âœ“</span>

<span class="mf">3.</span><span class="w"> </span><span class="n">Look</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="nb">tab</span><span class="n">le</span><span class="p">:</span><span class="w"> </span><span class="n">Page</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Frame</span><span class="w"> </span><span class="mf">4</span>

<span class="mf">4.</span><span class="w"> </span><span class="n">Physical</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Frame</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mf">4096</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">424</span>
<span class="w">                    </span><span class="o">=</span><span class="w"> </span><span class="mf">16384</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">424</span>
<span class="w">                    </span><span class="o">=</span><span class="w"> </span><span class="mf">16808</span>
</code></pre></div>



</details>

<h3 id="problem-2-tlb-eat-calculation">Problem 2: TLB EAT Calculation<a class="header-link" href="#problem-2-tlb-eat-calculation" title="Permanent link">&para;</a></h3>
<p>Calculate the Effective Access Time (EAT) given:</p>
<ul>
<li>TLB access time: 20ns</li>
<li>Memory access time: 100ns</li>
<li>TLB hit ratio: 95%</li>
</ul>
<details>
<summary>Show Answer</summary>


<div class="highlight"><pre><span></span><code>EAT = Î± Ã— (Îµ + m) + (1-Î±) Ã— (Îµ + 2m)
    = 0.95 Ã— (20 + 100) + 0.05 Ã— (20 + 200)
    = 0.95 Ã— 120 + 0.05 Ã— 220
    = 114 + 11
    = 125ns

Comparison: Without TLB 200ns, With TLB 125ns (37.5% improvement)
</code></pre></div>



</details>

<h3 id="problem-3-page-table-size">Problem 3: Page Table Size<a class="header-link" href="#problem-3-page-table-size" title="Permanent link">&para;</a></h3>
<p>For a system with 32-bit virtual address space, 4KB pages, and 4-byte PTEs:
1. What is the size of a single page table?
2. How would address bits be allocated for a two-level page table?</p>
<details>
<summary>Show Answer</summary>


<div class="highlight"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="nb">Sin</span><span class="n">gle</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="nb">tab</span><span class="n">le</span><span class="p">:</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">pages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="o">^</span><span class="mf">32</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2</span><span class="o">^</span><span class="mf">12</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="o">^</span><span class="mf">20</span><span class="w"> </span><span class="p">(</span><span class="err">~</span><span class="mf">1</span><span class="w"> </span><span class="n">million</span><span class="p">)</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">PTE</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="n">bytes</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nb">Tab</span><span class="n">le</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="o">^</span><span class="mf">20</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4</span><span class="n">MB</span>

<span class="mf">2.</span><span class="w"> </span><span class="n">Two</span><span class="o">-</span><span class="n">level</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="nb">tab</span><span class="n">le</span><span class="p">:</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="kr">To</span><span class="n">tal</span><span class="w"> </span><span class="mf">32</span><span class="w"> </span><span class="n">bits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">offset</span><span class="p">(</span><span class="mf">12</span><span class="w"> </span><span class="n">bits</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="nb">tab</span><span class="n">le</span><span class="p">(</span><span class="mf">20</span><span class="w"> </span><span class="n">bits</span><span class="p">)</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Split</span><span class="w"> </span><span class="mf">20</span><span class="w"> </span><span class="n">bits</span><span class="w"> </span><span class="nb">int</span><span class="n">o</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">levels</span><span class="p">:</span><span class="w"> </span><span class="mf">10</span><span class="w"> </span><span class="n">bits</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">10</span><span class="w"> </span><span class="n">bits</span>

<span class="w">   </span><span class="n">Address</span><span class="w"> </span><span class="n">structure</span><span class="p">:</span><span class="w"> </span><span class="err">[</span><span class="n">p1</span><span class="p">:</span><span class="w"> </span><span class="mf">10</span><span class="w"> </span><span class="n">bits</span><span class="err">][</span><span class="n">p2</span><span class="p">:</span><span class="w"> </span><span class="mf">10</span><span class="w"> </span><span class="n">bits</span><span class="err">][</span><span class="n">offset</span><span class="p">:</span><span class="w"> </span><span class="mf">12</span><span class="w"> </span><span class="n">bits</span><span class="err">]</span>

<span class="w">   </span><span class="n">Each</span><span class="w"> </span><span class="n">level</span><span class="w"> </span><span class="nb">tab</span><span class="n">le</span><span class="p">:</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Entry</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="o">^</span><span class="mf">10</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1024</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nb">Tab</span><span class="n">le</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1024</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4</span><span class="n">KB</span><span class="w"> </span><span class="p">(</span><span class="n">fits</span><span class="w"> </span><span class="n">exactly</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="n">page</span><span class="p">)</span>
</code></pre></div>



</details>

<h3 id="problem-4-multi-level-table-memory">Problem 4: Multi-level Table Memory<a class="header-link" href="#problem-4-multi-level-table-memory" title="Permanent link">&para;</a></h3>
<p>Calculate the total size of a two-level page table when a process uses only these regions:</p>
<ul>
<li>Code: 0x00000000 ~ 0x00400000 (4MB)</li>
<li>Data: 0x10000000 ~ 0x10100000 (1MB)</li>
<li>Stack: 0xBFF00000 ~ 0xC0000000 (1MB)</li>
</ul>
<details>
<summary>Show Answer</summary>


<div class="highlight"><pre><span></span><code><span class="nv">Page</span><span class="w"> </span><span class="nv">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="nv">KB</span>,<span class="w"> </span><span class="nv">two</span><span class="o">-</span><span class="nv">level</span><span class="w"> </span><span class="nv">table</span><span class="w"> </span><span class="ss">(</span><span class="mi">10</span><span class="w"> </span><span class="nv">bits</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="nv">bits</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="nv">bits</span><span class="ss">)</span>

<span class="nv">Level</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nv">index</span><span class="w"> </span><span class="nv">analysis</span>:
<span class="o">-</span><span class="w"> </span><span class="nv">Code</span><span class="w"> </span><span class="ss">(</span><span class="mi">0</span><span class="nv">x00000000</span><span class="o">~</span><span class="mi">0</span><span class="nv">x00400000</span><span class="ss">)</span>:<span class="w"> </span><span class="nv">p1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="o">-</span><span class="w"> </span><span class="nv">Data</span><span class="w"> </span><span class="ss">(</span><span class="mi">0</span><span class="nv">x10000000</span><span class="o">~</span><span class="mi">0</span><span class="nv">x10100000</span><span class="ss">)</span>:<span class="w"> </span><span class="nv">p1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">64</span>
<span class="o">-</span><span class="w"> </span><span class="nv">Stack</span><span class="w"> </span><span class="ss">(</span><span class="mi">0</span><span class="nv">xBFF00000</span><span class="o">~</span><span class="mi">0</span><span class="nv">xC0000000</span><span class="ss">)</span>:<span class="w"> </span><span class="nv">p1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">767</span>

<span class="nv">Required</span><span class="w"> </span><span class="nv">tables</span>:
<span class="o">-</span><span class="w"> </span><span class="nv">Level</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nv">table</span>:<span class="w"> </span><span class="mi">1</span><span class="w"> </span>Ã—<span class="w"> </span><span class="mi">4</span><span class="nv">KB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="nv">KB</span>
<span class="o">-</span><span class="w"> </span><span class="nv">Level</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nv">tables</span>:<span class="w"> </span><span class="mi">3</span><span class="w"> </span>Ã—<span class="w"> </span><span class="mi">4</span><span class="nv">KB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="nv">KB</span><span class="w"> </span><span class="ss">(</span><span class="k">for</span><span class="w"> </span><span class="nv">indices</span><span class="w"> </span><span class="mi">0</span>,<span class="w"> </span><span class="mi">64</span>,<span class="w"> </span><span class="mi">767</span><span class="ss">)</span>

<span class="nv">Total</span><span class="w"> </span><span class="nv">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="nv">KB</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">12</span><span class="nv">KB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="nv">KB</span>

<span class="nv">Comparison</span>:<span class="w"> </span><span class="nv">Would</span><span class="w"> </span><span class="nv">need</span><span class="w"> </span><span class="mi">4</span><span class="nv">MB</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">single</span><span class="w"> </span><span class="nv">table</span>
<span class="nv">Savings</span>:<span class="w"> </span><span class="ss">(</span><span class="mi">4</span><span class="nv">MB</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">16</span><span class="nv">KB</span><span class="ss">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">4</span><span class="nv">MB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">99</span>.<span class="mi">6</span><span class="o">%</span><span class="w"> </span><span class="nv">savings</span><span class="o">!</span>
</code></pre></div>



</details>

<h3 id="problem-5-inverted-page-table-design">Problem 5: Inverted Page Table Design<a class="header-link" href="#problem-5-inverted-page-table-design" title="Permanent link">&para;</a></h3>
<p>Design an inverted page table for a system with 1GB physical memory and 8KB page size.
- Fields and sizes required in entry
- Total size of table</p>
<details>
<summary>Show Answer</summary>


<div class="highlight"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="n">Frame</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="n">GB</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">8</span><span class="n">KB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="o">^</span><span class="mf">30</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2</span><span class="o">^</span><span class="mf">13</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="o">^</span><span class="mf">17</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">131</span><span class="p">,</span><span class="mf">072</span><span class="w"> </span><span class="n">frames</span>

<span class="mf">2.</span><span class="w"> </span><span class="n">Entry</span><span class="w"> </span><span class="n">structure</span><span class="p">:</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">PID</span><span class="p">:</span><span class="w"> </span><span class="mf">16</span><span class="w"> </span><span class="n">bits</span><span class="w"> </span><span class="p">(</span><span class="n">max</span><span class="w"> </span><span class="mf">65536</span><span class="w"> </span><span class="n">processes</span><span class="p">)</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Virtual</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">number</span><span class="p">:</span><span class="w"> </span><span class="mf">51</span><span class="w"> </span><span class="n">bits</span><span class="w"> </span><span class="p">(</span><span class="mf">64</span><span class="o">-</span><span class="n">bit</span><span class="w"> </span><span class="n">addr</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">13</span><span class="o">-</span><span class="n">bit</span><span class="w"> </span><span class="n">offset</span><span class="p">)</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Protection</span><span class="w"> </span><span class="n">bits</span><span class="p">:</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="n">bits</span><span class="w"> </span><span class="p">(</span><span class="n">R</span><span class="o">/</span><span class="n">W</span><span class="o">/</span><span class="n">X</span><span class="o">/</span><span class="nb">Val</span><span class="n">id</span><span class="p">)</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Other</span><span class="p">:</span><span class="w"> </span><span class="mf">9</span><span class="w"> </span><span class="n">bits</span><span class="w"> </span><span class="p">(</span><span class="n">spare</span><span class="p">)</span>
<span class="w">   </span><span class="kr">To</span><span class="n">tal</span><span class="p">:</span><span class="w"> </span><span class="mf">80</span><span class="w"> </span><span class="n">bits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">10</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="p">(</span><span class="ow">or</span><span class="w"> </span><span class="n">pad</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span><span class="mf">16</span><span class="w"> </span><span class="n">bytes</span><span class="p">)</span>

<span class="mf">3.</span><span class="w"> </span><span class="nb">Tab</span><span class="n">le</span><span class="w"> </span><span class="n">size</span><span class="p">:</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Entry</span><span class="w"> </span><span class="n">count</span><span class="p">:</span><span class="w"> </span><span class="mf">131</span><span class="p">,</span><span class="mf">072</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Entry</span><span class="w"> </span><span class="n">size</span><span class="p">:</span><span class="w"> </span><span class="mf">16</span><span class="w"> </span><span class="n">bytes</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="kr">To</span><span class="n">tal</span><span class="w"> </span><span class="n">size</span><span class="p">:</span><span class="w"> </span><span class="mf">131</span><span class="p">,</span><span class="mf">072</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mf">16</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="n">MB</span>

<span class="w">   </span><span class="n">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">0.2</span><span class="err">%</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">physical</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="p">(</span><span class="mf">1</span><span class="n">GB</span><span class="p">)</span>
</code></pre></div>



</details>

<hr />
<h2 id="next-steps">Next Steps<a class="header-link" href="#next-steps" title="Permanent link">&para;</a></h2>
<p>Let's learn about segment-based memory management in <a href="./13_Segmentation.md">13_Segmentation.md</a>!</p>
<hr />
<h2 id="references">References<a class="header-link" href="#references" title="Permanent link">&para;</a></h2>
<ul>
<li>Silberschatz, "Operating System Concepts" Chapter 9</li>
<li>Intel 64 and IA-32 Architectures Software Developer's Manual</li>
<li>AMD64 Architecture Programmer's Manual</li>
<li>Linux kernel source: <code>arch/x86/mm/pgtable.c</code></li>
</ul>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/OS_Theory/11_Contiguous_Memory_Allocation.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Contiguous Memory Allocation â­â­</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/OS_Theory/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/OS_Theory/13_Segmentation.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Segmentation â­â­â­</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">â†‘</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'en';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}