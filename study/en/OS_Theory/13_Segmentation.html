{% raw %}
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Segmentation â­â­â­ - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/en/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/en/" class="nav-item ">
                    <span class="nav-icon">ğŸ </span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">ğŸ’»</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/en/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" selected>
                        English
                    </option>
                    
                    <option value="ko" >
                        í•œêµ­ì–´
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">â˜€ï¸</span>
                    <span class="theme-icon dark">ğŸŒ™</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/en/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/en/OS_Theory/">OS Theory</a>
    <span class="separator">/</span>
    <span class="current">Segmentation â­â­â­</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>Segmentation â­â­â­</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/OS_Theory/12_Paging.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Paging â­â­â­</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/OS_Theory/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/OS_Theory/14_Virtual_Memory.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Virtual Memory â­â­â­</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#1-segment-concept">1. Segment Concept</a><ul>
<li><a href="#11-programmers-view-of-memory">1.1 Programmer's View of Memory</a></li>
<li><a href="#12-segment-characteristics">1.2 Segment Characteristics</a></li>
</ul>
</li>
<li><a href="#2-segment-table">2. Segment Table</a><ul>
<li><a href="#21-segment-table-structure">2.1 Segment Table Structure</a></li>
<li><a href="#22-physical-memory-layout">2.2 Physical Memory Layout</a></li>
</ul>
</li>
<li><a href="#3-address-translation">3. Address Translation</a><ul>
<li><a href="#31-logical-address-structure">3.1 Logical Address Structure</a></li>
<li><a href="#32-address-translation-process">3.2 Address Translation Process</a></li>
<li><a href="#33-hardware-implementation">3.3 Hardware Implementation</a></li>
<li><a href="#34-c-language-implementation">3.4 C Language Implementation</a></li>
</ul>
</li>
<li><a href="#4-protection-and-sharing">4. Protection and Sharing</a><ul>
<li><a href="#41-segment-protection">4.1 Segment Protection</a></li>
<li><a href="#42-segment-sharing">4.2 Segment Sharing</a></li>
</ul>
</li>
<li><a href="#5-paging-vs-segmentation-comparison">5. Paging vs Segmentation Comparison</a></li>
<li><a href="#6-combining-segmentation-paging">6. Combining Segmentation + Paging</a><ul>
<li><a href="#61-segmentation-with-paging">6.1 Segmentation with Paging</a></li>
<li><a href="#62-multics-system">6.2 MULTICS System</a></li>
</ul>
</li>
<li><a href="#7-intel-x86-segmentation">7. Intel x86 Segmentation</a><ul>
<li><a href="#71-protected-mode-segment-registers">7.1 Protected Mode Segment Registers</a></li>
<li><a href="#72-segment-descriptor">7.2 Segment Descriptor</a></li>
<li><a href="#73-x86-address-translation-segmentation-paging">7.3 x86 Address Translation (Segmentation + Paging)</a></li>
<li><a href="#74-linux-segmentation-usage">7.4 Linux Segmentation Usage</a></li>
</ul>
</li>
<li><a href="#practice-problems">Practice Problems</a><ul>
<li><a href="#problem-1-segment-address-translation">Problem 1: Segment Address Translation</a></li>
<li><a href="#problem-2-segment-protection">Problem 2: Segment Protection</a></li>
<li><a href="#problem-3-segment-sharing">Problem 3: Segment Sharing</a></li>
<li><a href="#problem-4-external-fragmentation">Problem 4: External Fragmentation</a></li>
<li><a href="#problem-5-x86-segment-selector">Problem 5: x86 Segment Selector</a></li>
</ul>
</li>
<li><a href="#next-steps">Next Steps</a></li>
<li><a href="#references">References</a></li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="segmentation">Segmentation â­â­â­<a class="header-link" href="#segmentation" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="header-link" href="#overview" title="Permanent link">&para;</a></h2>
<p>Segmentation is a memory management technique that divides programs into logical units called segments. It separates meaningful units like code, data, and stack, making protection and sharing easier.</p>
<hr />
<h2 id="table-of-contents">Table of Contents<a class="header-link" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#1-segment-concept">Segment Concept</a></li>
<li><a href="#2-segment-table">Segment Table</a></li>
<li><a href="#3-address-translation">Address Translation</a></li>
<li><a href="#4-protection-and-sharing">Protection and Sharing</a></li>
<li><a href="#5-paging-vs-segmentation-comparison">Paging vs Segmentation Comparison</a></li>
<li><a href="#6-combining-segmentation--paging">Combining Segmentation + Paging</a></li>
<li><a href="#7-intel-x86-segmentation">Intel x86 Segmentation</a></li>
<li><a href="#practice-problems">Practice Problems</a></li>
</ol>
<hr />
<h2 id="1-segment-concept">1. Segment Concept<a class="header-link" href="#1-segment-concept" title="Permanent link">&para;</a></h2>
<h3 id="11-programmers-view-of-memory">1.1 Programmer's View of Memory<a class="header-link" href="#11-programmers-view-of-memory" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                    </span><span class="n">Memory</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">Programmer</span><span class="s1">&#39;s View                        â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">Programmers</span><span class="w"> </span><span class="n">perceive</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">contiguous</span><span class="w"> </span><span class="n">byte</span><span class="w"> </span><span class="n">array</span><span class="p">,</span><span class="w">           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">but</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">collection</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">logical</span><span class="w"> </span><span class="n">units</span><span class="o">.</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                        </span><span class="n">Program</span><span class="w">                               </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                                                              </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">      </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="n">main</span><span class="p">()</span><span class="w">    </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Function</span><span class="w"> </span><span class="n">A</span><span class="p">()</span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Function</span><span class="w"> </span><span class="n">B</span><span class="p">()</span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">     </span><span class="n">code</span><span class="w">     </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">     </span><span class="n">code</span><span class="w">     </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">     </span><span class="n">code</span><span class="w">     </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">      </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                                                              </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">      </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Global</span><span class="w"> </span><span class="n">vars</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Constants</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="n">Stack</span><span class="w">     </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="w">     </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="p">(</span><span class="n">read</span><span class="o">-</span><span class="n">only</span><span class="p">)</span><span class="w"> </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="p">(</span><span class="n">local</span><span class="w"> </span><span class="n">vars</span><span class="p">)</span><span class="w"> </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">      </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                                                              </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                        </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Symbol</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="n">Heap</span><span class="w">      </span><span class="err">â”‚</span><span class="w">                        </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="p">(</span><span class="n">debug</span><span class="p">)</span><span class="w">     </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="p">(</span><span class="n">dynamic</span><span class="p">)</span><span class="w">    </span><span class="err">â”‚</span><span class="w">                        </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                        </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                                                              </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">Each</span><span class="w"> </span><span class="n">logical</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">segment</span><span class="w">                                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">Each</span><span class="w"> </span><span class="n">segment</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">protection</span><span class="w"> </span><span class="n">attributes</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="12-segment-characteristics">1.2 Segment Characteristics<a class="header-link" href="#12-segment-characteristics" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                       </span><span class="nx">Segment</span><span class="w"> </span><span class="nx">Characteristics</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="nx">Variable</span><span class="w"> </span><span class="nx">Size</span><span class="w">                                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="nx">Unlike</span><span class="w"> </span><span class="nx">pages</span><span class="p">,</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">fixed</span><span class="w"> </span><span class="nx">size</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="nx">Size</span><span class="w"> </span><span class="nx">varies</span><span class="w"> </span><span class="nx">according</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">logical</span><span class="w"> </span><span class="nx">unit</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="nx">Logical</span><span class="w"> </span><span class="nx">Separation</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Code</span><span class="w"> </span><span class="nx">Segment</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="nx">Executable</span><span class="p">,</span><span class="w"> </span><span class="nx">read</span><span class="o">-</span><span class="nx">only</span><span class="w">                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">                                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Data</span><span class="w"> </span><span class="nx">Segment</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="nx">Read</span><span class="o">/</span><span class="nx">write</span><span class="w"> </span><span class="nx">enabled</span><span class="w">                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">                                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Stack</span><span class="w"> </span><span class="nx">Segment</span><span class="err">â”‚</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="nx">Auto</span><span class="o">-</span><span class="nx">expanding</span><span class="p">,</span><span class="w"> </span><span class="nx">grows</span><span class="w"> </span><span class="nx">downward</span><span class="w">                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">                                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Heap</span><span class="w"> </span><span class="nx">Segment</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="nx">Dynamic</span><span class="w"> </span><span class="nx">allocation</span><span class="p">,</span><span class="w"> </span><span class="nx">grows</span><span class="w"> </span><span class="nx">upward</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="nx">Easy</span><span class="w"> </span><span class="nx">Protection</span><span class="w">                                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="nx">Different</span><span class="w"> </span><span class="nx">access</span><span class="w"> </span><span class="nx">rights</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">each</span><span class="w"> </span><span class="nx">segment</span><span class="w">                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="nx">Prevent</span><span class="w"> </span><span class="nx">code</span><span class="w"> </span><span class="nx">modification</span><span class="p">,</span><span class="w"> </span><span class="nx">prevent</span><span class="w"> </span><span class="nx">stack</span><span class="w"> </span><span class="nx">execution</span><span class="p">,</span><span class="w"> </span><span class="nx">etc</span><span class="p">.</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="mi">4</span><span class="p">.</span><span class="w"> </span><span class="nx">Easy</span><span class="w"> </span><span class="nx">Sharing</span><span class="w">                                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="nx">Code</span><span class="w"> </span><span class="nx">segment</span><span class="w"> </span><span class="nx">shared</span><span class="w"> </span><span class="nx">by</span><span class="w"> </span><span class="nx">multiple</span><span class="w"> </span><span class="nx">processes</span><span class="w">                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="nx">Suitable</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">shared</span><span class="w"> </span><span class="kn">library</span><span class="w"> </span><span class="nx">implementation</span><span class="w">                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="2-segment-table">2. Segment Table<a class="header-link" href="#2-segment-table" title="Permanent link">&para;</a></h2>
<h3 id="21-segment-table-structure">2.1 Segment Table Structure<a class="header-link" href="#21-segment-table-structure" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                      </span><span class="n">Segment</span><span class="w"> </span><span class="n">Table</span><span class="w">                                      </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">Segment</span><span class="w"> </span><span class="n">Table</span><span class="w"> </span><span class="n">Base</span><span class="w"> </span><span class="n">Register</span><span class="w"> </span><span class="p">(</span><span class="n">STBR</span><span class="p">):</span><span class="w"> </span><span class="mh">0x5000</span><span class="w">                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">Segment</span><span class="w"> </span><span class="n">Table</span><span class="w"> </span><span class="n">Length</span><span class="w"> </span><span class="n">Register</span><span class="w"> </span><span class="p">(</span><span class="n">STLR</span><span class="p">):</span><span class="w"> </span><span class="mi">5</span><span class="w">                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Segment</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Base</span><span class="w"> </span><span class="n">Address</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="n">Limit</span><span class="w">    </span><span class="err">â”‚</span><span class="w">       </span><span class="n">Protection</span><span class="w">      </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Number</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="p">(</span><span class="n">Base</span><span class="p">)</span><span class="w">         </span><span class="err">â”‚</span><span class="w">  </span><span class="p">(</span><span class="n">Limit</span><span class="p">)</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                       </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">0</span><span class="w">      </span><span class="err">â”‚</span><span class="w">   </span><span class="mh">0x00000</span><span class="w">      </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">1400</span><span class="w">     </span><span class="err">â”‚</span><span class="w">   </span><span class="n">R</span><span class="o">-</span><span class="n">X</span><span class="w"> </span><span class="p">(</span><span class="n">code</span><span class="p">)</span><span class="w">         </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">1</span><span class="w">      </span><span class="err">â”‚</span><span class="w">   </span><span class="mh">0x06300</span><span class="w">      </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">400</span><span class="w">      </span><span class="err">â”‚</span><span class="w">   </span><span class="n">R</span><span class="o">--</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="p">)</span><span class="w">        </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">2</span><span class="w">      </span><span class="err">â”‚</span><span class="w">   </span><span class="mh">0x04300</span><span class="w">      </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">1100</span><span class="w">     </span><span class="err">â”‚</span><span class="w">   </span><span class="n">RW</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="w">         </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">3</span><span class="w">      </span><span class="err">â”‚</span><span class="w">   </span><span class="mh">0x03200</span><span class="w">      </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">1000</span><span class="w">     </span><span class="err">â”‚</span><span class="w">   </span><span class="n">RW</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">stack</span><span class="p">)</span><span class="w">        </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">4</span><span class="w">      </span><span class="err">â”‚</span><span class="w">   </span><span class="mh">0x04700</span><span class="w">      </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">2000</span><span class="w">     </span><span class="err">â”‚</span><span class="w">   </span><span class="n">RW</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">heap</span><span class="p">)</span><span class="w">         </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">Base</span><span class="p">:</span><span class="w"> </span><span class="n">Physical</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">segment</span><span class="w">                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">Limit</span><span class="p">:</span><span class="w"> </span><span class="n">Maximum</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">segment</span><span class="w"> </span><span class="p">(</span><span class="n">bytes</span><span class="p">)</span><span class="w">                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">Protection</span><span class="p">:</span><span class="w"> </span><span class="n">R</span><span class="p">(</span><span class="n">read</span><span class="p">),</span><span class="w"> </span><span class="n">W</span><span class="p">(</span><span class="n">write</span><span class="p">),</span><span class="w"> </span><span class="n">X</span><span class="p">(</span><span class="n">execute</span><span class="p">)</span><span class="w">                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="22-physical-memory-layout">2.2 Physical Memory Layout<a class="header-link" href="#22-physical-memory-layout" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                    </span><span class="n">Segments</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">Physical</span><span class="w"> </span><span class="n">Memory</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">Physical</span><span class="w"> </span><span class="n">Memory</span><span class="w">                                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="mh">0x00000</span><span class="w"> </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span><span class="w">        </span><span class="n">Segment</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="n">code</span><span class="p">)</span><span class="w">            </span><span class="err">â”‚</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span><span class="w">           </span><span class="mi">1400</span><span class="w"> </span><span class="n">bytes</span><span class="w">               </span><span class="err">â”‚</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="mh">0x00578</span><span class="w"> </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span><span class="w">            </span><span class="n">Free</span><span class="w"> </span><span class="n">space</span><span class="w">              </span><span class="err">â”‚</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="mh">0x03200</span><span class="w"> </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span><span class="w">       </span><span class="n">Segment</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(</span><span class="n">stack</span><span class="p">)</span><span class="w">            </span><span class="err">â”‚</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span><span class="w">           </span><span class="mi">1000</span><span class="w"> </span><span class="n">bytes</span><span class="w">               </span><span class="err">â”‚</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="mh">0x035E8</span><span class="w"> </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="mh">0x04300</span><span class="w"> </span><span class="err">â”‚</span><span class="w">       </span><span class="n">Segment</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="w">             </span><span class="err">â”‚</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span><span class="w">           </span><span class="mi">1100</span><span class="w"> </span><span class="n">bytes</span><span class="w">               </span><span class="err">â”‚</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="mh">0x0474C</span><span class="w"> </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="mh">0x04700</span><span class="w"> </span><span class="err">â”‚</span><span class="w">        </span><span class="n">Segment</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">(</span><span class="n">heap</span><span class="p">)</span><span class="w">            </span><span class="err">â”‚</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span><span class="w">           </span><span class="mi">2000</span><span class="w"> </span><span class="n">bytes</span><span class="w">               </span><span class="err">â”‚</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="mh">0x04ED0</span><span class="w"> </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="mh">0x06300</span><span class="w"> </span><span class="err">â”‚</span><span class="w">       </span><span class="n">Segment</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="p">)</span><span class="w">            </span><span class="err">â”‚</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span><span class="w">           </span><span class="mi">400</span><span class="w"> </span><span class="n">bytes</span><span class="w">                </span><span class="err">â”‚</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="mh">0x06490</span><span class="w"> </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">         </span><span class="o">...</span><span class="w">                                                      </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">Note</span><span class="p">:</span><span class="w"> </span><span class="n">Segments</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">contiguous</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">physical</span><span class="w"> </span><span class="n">memory</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">ordered</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="3-address-translation">3. Address Translation<a class="header-link" href="#3-address-translation" title="Permanent link">&para;</a></h2>
<h3 id="31-logical-address-structure">3.1 Logical Address Structure<a class="header-link" href="#31-logical-address-structure" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                       </span><span class="nx">Segment</span><span class="w"> </span><span class="nx">Logical</span><span class="w"> </span><span class="nx">Address</span><span class="w">                           </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Logical</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">&lt;</span><span class="nx">segment</span><span class="w"> </span><span class="nx">number</span><span class="p">,</span><span class="w"> </span><span class="nx">offset</span><span class="p">&gt;</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Example</span><span class="p">:</span><span class="w"> </span><span class="p">&lt;</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">400</span><span class="p">&gt;</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">400</span><span class="nx">th</span><span class="w"> </span><span class="nx">byte</span><span class="w"> </span><span class="nx">of</span><span class="w"> </span><span class="nx">segment</span><span class="w"> </span><span class="mi">2</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Segment</span><span class="w"> </span><span class="nx">number</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span><span class="err">â”‚</span><span class="w">         </span><span class="nx">Offset</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span><span class="w">             </span><span class="err">â”‚</span><span class="w">                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">4</span><span class="w"> </span><span class="nx">bits</span><span class="w">       </span><span class="err">â”‚</span><span class="w">          </span><span class="mi">12</span><span class="w"> </span><span class="nx">bits</span><span class="w">              </span><span class="err">â”‚</span><span class="w">                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">In</span><span class="w"> </span><span class="nx">this</span><span class="w"> </span><span class="nx">example</span><span class="p">:</span><span class="w">                                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nx">Maximum</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="nx">segments</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="o">^</span><span class="mi">4</span><span class="p">)</span><span class="w">                                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nx">Maximum</span><span class="w"> </span><span class="mi">4</span><span class="nx">KB</span><span class="w"> </span><span class="nx">per</span><span class="w"> </span><span class="nx">segment</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="o">^</span><span class="mi">12</span><span class="p">)</span><span class="w">                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="32-address-translation-process">3.2 Address Translation Process<a class="header-link" href="#32-address-translation-process" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                      </span><span class="nx">Segment</span><span class="w"> </span><span class="nx">Address</span><span class="w"> </span><span class="nx">Translation</span><span class="w">                        </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Logical</span><span class="w"> </span><span class="nx">address</span><span class="p">:</span><span class="w"> </span><span class="p">&lt;</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">400</span><span class="p">&gt;</span><span class="w">                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="nx">Extract</span><span class="w"> </span><span class="nx">segment</span><span class="w"> </span><span class="nx">number</span><span class="p">:</span><span class="w"> </span><span class="nx">s</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">2</span><span class="w">                              </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="nx">Range</span><span class="w"> </span><span class="nx">check</span><span class="p">:</span><span class="w"> </span><span class="nx">s</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="nx">STLR</span><span class="p">?</span><span class="w">                                     </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">      </span><span class="mi">2</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="nx">OK</span><span class="w">                                                 </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="nx">Segment</span><span class="w"> </span><span class="nx">table</span><span class="w"> </span><span class="nx">lookup</span><span class="w">                                       </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">      </span><span class="nx">segment</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">{</span><span class="kd">base</span><span class="p">:</span><span class="w"> </span><span class="mh">0x04300</span><span class="p">,</span><span class="w"> </span><span class="nx">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">1100</span><span class="p">}</span><span class="w">                  </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">4</span><span class="p">.</span><span class="w"> </span><span class="nx">Limit</span><span class="w"> </span><span class="nx">check</span><span class="p">:</span><span class="w"> </span><span class="nx">d</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="nx">limit</span><span class="p">?</span><span class="w">                                    </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">      </span><span class="mi">400</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="mi">1100</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="nx">OK</span><span class="w">                                            </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">      </span><span class="p">(</span><span class="nx">If</span><span class="w"> </span><span class="nx">d</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="nx">limit</span><span class="p">,</span><span class="w"> </span><span class="nx">TRAP</span><span class="w"> </span><span class="nx">occurs</span><span class="p">!)</span><span class="w">                              </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">5</span><span class="p">.</span><span class="w"> </span><span class="nx">Physical</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="nx">calculation</span><span class="w">                               </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">      </span><span class="nx">Physical</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kd">base</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">d</span><span class="w">                                </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                       </span><span class="p">=</span><span class="w"> </span><span class="mh">0x04300</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">400</span><span class="w">                           </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                       </span><span class="p">=</span><span class="w"> </span><span class="mh">0x04300</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x190</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                       </span><span class="p">=</span><span class="w"> </span><span class="mh">0x04490</span><span class="w">                                 </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Result</span><span class="p">:</span><span class="w"> </span><span class="p">&lt;</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">400</span><span class="p">&gt;</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="mh">0x04490</span><span class="w">                                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="33-hardware-implementation">3.3 Hardware Implementation<a class="header-link" href="#33-hardware-implementation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                    </span><span class="nx">Segmentation</span><span class="w"> </span><span class="nx">Hardware</span><span class="w">                                </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                         </span><span class="nx">Logical</span><span class="w"> </span><span class="nx">address</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                    </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                    </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">s</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">d</span><span class="w">    </span><span class="err">â”‚</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                    </span><span class="err">â””â”€â”€â”€â”¬â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”˜</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                        </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span><span class="w">                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                        </span><span class="err">â–¼</span><span class="w">        </span><span class="err">â”‚</span><span class="w">                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">Segment</span><span class="w"> </span><span class="nx">Table</span><span class="w">         </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="p">(</span><span class="nx">STBR</span><span class="w"> </span><span class="kd">base</span><span class="p">)</span><span class="w">           </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">limit</span><span class="w"> </span><span class="err">â”‚</span><span class="w">  </span><span class="kd">base</span><span class="w">   </span><span class="err">â”‚â—€â”€â”€â”˜</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”¬â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span><span class="w">            </span><span class="err">â”‚</span><span class="w">                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="err">â–¼</span><span class="w">        </span><span class="err">â–¼</span><span class="w">            </span><span class="err">â”‚</span><span class="w">                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">     </span><span class="err">â”‚</span><span class="w">                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Comparator</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Adder</span><span class="w"> </span><span class="err">â”‚â—€â”€â”€â”€â”€â”˜</span><span class="w">                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">d</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="nx">limit</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="kd">base</span><span class="o">+</span><span class="nx">d</span><span class="w"> </span><span class="err">â”‚</span><span class="w">                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜</span><span class="w">                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span><span class="w">            </span><span class="err">â”‚</span><span class="w">                                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”Œâ”€â”€â”€â”´â”€â”€â”€â”</span><span class="w">        </span><span class="err">â”‚</span><span class="w">                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">yes</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">no</span><span class="w">    </span><span class="err">â”‚</span><span class="w">                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">     </span><span class="err">â–¼</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â–¼</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â–¼</span><span class="w">                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="nx">OK</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">TRAP</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Physical</span><span class="w"> </span><span class="nx">address</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">         </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="34-c-language-implementation">3.4 C Language Implementation<a class="header-link" href="#34-c-language-implementation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdint.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdbool.h&gt;</span>

<span class="cp">#define MAX_SEGMENTS 16</span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">base</span><span class="p">;</span><span class="w">      </span><span class="c1">// Base address</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">limit</span><span class="p">;</span><span class="w">     </span><span class="c1">// Limit (size)</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">valid</span><span class="p">;</span><span class="w">         </span><span class="c1">// Valid bit</span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">protection</span><span class="p">;</span><span class="w"> </span><span class="c1">// Protection bits (R=1, W=2, X=4)</span>
<span class="p">}</span><span class="w"> </span><span class="n">SegmentTableEntry</span><span class="p">;</span>

<span class="n">SegmentTableEntry</span><span class="w"> </span><span class="n">segment_table</span><span class="p">[</span><span class="n">MAX_SEGMENTS</span><span class="p">];</span>
<span class="kt">int</span><span class="w"> </span><span class="n">stlr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">  </span><span class="c1">// Segment Table Length Register</span>

<span class="cp">#define PROT_READ  1</span>
<span class="cp">#define PROT_WRITE 2</span>
<span class="cp">#define PROT_EXEC  4</span>

<span class="c1">// Logical address â†’ Physical address translation</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">translate_segment_address</span><span class="p">(</span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">segment</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">offset</span><span class="p">,</span>
<span class="w">                               </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">access_type</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="o">*</span><span class="w"> </span><span class="n">physical</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 1. Segment number range check</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">segment</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">stlr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;ERROR: Invalid segment number %d (STLR=%d)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">segment</span><span class="p">,</span><span class="w"> </span><span class="n">stlr</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span><span class="w">  </span><span class="c1">// Segmentation Fault</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 2. Validity check</span>
<span class="w">    </span><span class="n">SegmentTableEntry</span><span class="o">*</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">segment_table</span><span class="p">[</span><span class="n">segment</span><span class="p">];</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">entry</span><span class="o">-&gt;</span><span class="n">valid</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;ERROR: Segment %d is not valid</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">segment</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span><span class="w">  </span><span class="c1">// Segmentation Fault</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 3. Limit check</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">offset</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">entry</span><span class="o">-&gt;</span><span class="n">limit</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;ERROR: Offset %u &gt;= Limit %u in segment %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
<span class="w">               </span><span class="n">offset</span><span class="p">,</span><span class="w"> </span><span class="n">entry</span><span class="o">-&gt;</span><span class="n">limit</span><span class="p">,</span><span class="w"> </span><span class="n">segment</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span><span class="w">  </span><span class="c1">// Segmentation Fault</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 4. Protection check</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="n">entry</span><span class="o">-&gt;</span><span class="n">protection</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">access_type</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">access_type</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;ERROR: Protection violation in segment %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">segment</span><span class="p">);</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;  Required: 0x%x, Allowed: 0x%x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
<span class="w">               </span><span class="n">access_type</span><span class="p">,</span><span class="w"> </span><span class="n">entry</span><span class="o">-&gt;</span><span class="n">protection</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span><span class="w">  </span><span class="c1">// Protection Fault</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 5. Physical address calculation</span>
<span class="w">    </span><span class="o">*</span><span class="n">physical</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">entry</span><span class="o">-&gt;</span><span class="n">base</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">offset</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Initialize segment table</span>
<span class="w">    </span><span class="n">segment_table</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">SegmentTableEntry</span><span class="p">){</span>
<span class="w">        </span><span class="p">.</span><span class="n">base</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x00000</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1400</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">valid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">protection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PROT_READ</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">PROT_EXEC</span><span class="w">  </span><span class="c1">// Code segment</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="n">segment_table</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">SegmentTableEntry</span><span class="p">){</span>
<span class="w">        </span><span class="p">.</span><span class="n">base</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x06300</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">valid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">protection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PROT_READ</span><span class="w">  </span><span class="c1">// Constant segment</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="n">segment_table</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">SegmentTableEntry</span><span class="p">){</span>
<span class="w">        </span><span class="p">.</span><span class="n">base</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x04300</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1100</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">valid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">protection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PROT_READ</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">PROT_WRITE</span><span class="w">  </span><span class="c1">// Data segment</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="n">stlr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>

<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">physical</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Test 1: Normal access</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">translate_segment_address</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w"> </span><span class="n">PROT_READ</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">physical</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Segment 2, Offset 400 -&gt; Physical 0x%X</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">physical</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Test 2: Limit exceeded</span>
<span class="w">    </span><span class="n">translate_segment_address</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">1200</span><span class="p">,</span><span class="w"> </span><span class="n">PROT_READ</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">physical</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Test 3: Protection violation (write attempt to code segment)</span>
<span class="w">    </span><span class="n">translate_segment_address</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="n">PROT_WRITE</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">physical</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h2 id="4-protection-and-sharing">4. Protection and Sharing<a class="header-link" href="#4-protection-and-sharing" title="Permanent link">&para;</a></h2>
<h3 id="41-segment-protection">4.1 Segment Protection<a class="header-link" href="#41-segment-protection" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">                       </span><span class="nv">Segment</span><span class="w"> </span><span class="nv">Protection</span><span class="w"> </span><span class="nv">Bits</span><span class="w">                           </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span><span class="nv">Protection</span><span class="w"> </span><span class="nv">field</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">segment</span><span class="w"> </span><span class="nv">descriptor</span>:<span class="w">                               </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span>â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">                     </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w">  </span><span class="nv">R</span><span class="w">  </span>â”‚<span class="w">  </span><span class="nv">W</span><span class="w">  </span>â”‚<span class="w">  </span><span class="nv">X</span><span class="w">  </span>â”‚<span class="w">         </span><span class="nv">Description</span><span class="w">         </span>â”‚<span class="w">                     </span>â”‚
â”‚<span class="w">   </span>â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<span class="w">                     </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w">  </span><span class="mi">1</span><span class="w">  </span>â”‚<span class="w">  </span><span class="mi">0</span><span class="w">  </span>â”‚<span class="w">  </span><span class="mi">1</span><span class="w">  </span>â”‚<span class="w">  </span><span class="nv">Code</span><span class="w"> </span><span class="nv">segment</span><span class="w"> </span><span class="ss">(</span><span class="k">exec</span><span class="o">/</span><span class="nv">read</span><span class="ss">)</span><span class="w">   </span>â”‚<span class="w">                     </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w">  </span><span class="mi">1</span><span class="w">  </span>â”‚<span class="w">  </span><span class="mi">0</span><span class="w">  </span>â”‚<span class="w">  </span><span class="mi">0</span><span class="w">  </span>â”‚<span class="w">  </span><span class="nv">Const</span><span class="w"> </span><span class="nv">segment</span><span class="w"> </span><span class="ss">(</span><span class="nv">read</span><span class="o">-</span><span class="nv">only</span><span class="ss">)</span><span class="w">  </span>â”‚<span class="w">                     </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w">  </span><span class="mi">1</span><span class="w">  </span>â”‚<span class="w">  </span><span class="mi">1</span><span class="w">  </span>â”‚<span class="w">  </span><span class="mi">0</span><span class="w">  </span>â”‚<span class="w">  </span><span class="nv">Data</span><span class="w"> </span><span class="nv">segment</span><span class="w"> </span><span class="ss">(</span><span class="nv">read</span><span class="o">/</span><span class="nv">write</span><span class="ss">)</span><span class="w">  </span>â”‚<span class="w">                     </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w">  </span><span class="mi">0</span><span class="w">  </span>â”‚<span class="w">  </span><span class="mi">0</span><span class="w">  </span>â”‚<span class="w">  </span><span class="mi">0</span><span class="w">  </span>â”‚<span class="w">  </span><span class="nv">No</span><span class="w"> </span><span class="nv">access</span><span class="w">                  </span>â”‚<span class="w">                     </span>â”‚
â”‚<span class="w">   </span>â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">                     </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span><span class="nv">Additional</span><span class="w"> </span><span class="nv">protection</span><span class="w"> </span><span class="nv">attributes</span>:<span class="w">                                     </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">DPL</span><span class="w"> </span><span class="ss">(</span><span class="nv">Descriptor</span><span class="w"> </span><span class="nv">Privilege</span><span class="w"> </span><span class="nv">Level</span><span class="ss">)</span>:<span class="w"> </span><span class="mi">0</span><span class="o">-</span><span class="mi">3</span>,<span class="w"> </span><span class="nv">accessible</span><span class="w"> </span><span class="nv">privilege</span><span class="w"> </span><span class="nv">level</span><span class="w">   </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">Present</span>:<span class="w"> </span><span class="nv">Whether</span><span class="w"> </span><span class="nv">segment</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">memory</span><span class="w">                               </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">Accessed</span>:<span class="w"> </span><span class="nv">Access</span><span class="w"> </span><span class="nv">status</span><span class="w"> </span><span class="ss">(</span><span class="nv">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">page</span><span class="w"> </span><span class="nv">replacement</span><span class="ss">)</span><span class="w">                 </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="42-segment-sharing">4.2 Segment Sharing<a class="header-link" href="#42-segment-sharing" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                       </span><span class="nx">Segment</span><span class="w"> </span><span class="nx">Sharing</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Process</span><span class="w"> </span><span class="nx">A</span><span class="w">                          </span><span class="nx">Process</span><span class="w"> </span><span class="nx">B</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Segment</span><span class="w"> </span><span class="nx">Table</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Segment</span><span class="w"> </span><span class="nx">Table</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">                </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="nx">Code</span><span class="w">         </span><span class="err">â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">       </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="nx">Code</span><span class="w">         </span><span class="err">â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="kd">base</span><span class="p">=</span><span class="mh">0x1000</span><span class="w">   </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">   </span><span class="kd">base</span><span class="p">=</span><span class="mh">0x1000</span><span class="w">   </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">limit</span><span class="p">=</span><span class="mi">5000</span><span class="w">    </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">limit</span><span class="p">=</span><span class="mi">5000</span><span class="w">    </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">        </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">        </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="nx">Data</span><span class="w">         </span><span class="err">â”‚â”€â”€â”€â”</span><span class="w">    </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="nx">Data</span><span class="w">         </span><span class="err">â”‚â”€â”€â”€â”</span><span class="w">    </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="kd">base</span><span class="p">=</span><span class="mh">0x8000</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">   </span><span class="kd">base</span><span class="p">=</span><span class="mh">0xC000</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">limit</span><span class="p">=</span><span class="mi">3000</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">limit</span><span class="p">=</span><span class="mi">4000</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">                             </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â–¼</span><span class="w">                             </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â–¼</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Physical</span><span class="w"> </span><span class="nx">Memory</span><span class="w">       </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”‚</span><span class="w">    </span><span class="nx">Shared</span><span class="w"> </span><span class="nx">code</span><span class="w"> </span><span class="nx">segment</span><span class="w">      </span><span class="err">â”‚â”€â”€â”€â”€â”¤</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="mh">0x1000</span><span class="w">              </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">      </span><span class="p">(</span><span class="nx">libc</span><span class="p">.</span><span class="nx">so</span><span class="w"> </span><span class="nx">etc</span><span class="p">)</span><span class="w">          </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                     </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">        </span><span class="mi">5000</span><span class="w"> </span><span class="nx">bytes</span><span class="w">           </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                     </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”˜</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                     </span><span class="err">â”‚</span><span class="w">                                  </span><span class="err">â”‚</span><span class="w">           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                     </span><span class="err">â–¼</span><span class="w">                                  </span><span class="err">â–¼</span><span class="w">           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="mh">0x8000</span><span class="w">        </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">               </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">A</span><span class="err">&#39;</span><span class="nx">s</span><span class="w"> </span><span class="nx">data</span><span class="w">     </span><span class="err">â”‚</span><span class="w">  </span><span class="mh">0xC000</span><span class="w">        </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">B</span><span class="err">&#39;</span><span class="nx">s</span><span class="w"> </span><span class="nx">data</span><span class="w">     </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">               </span><span class="err">â”‚</span><span class="w"> </span><span class="p">(</span><span class="nx">separate</span><span class="p">)</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span><span class="w"> </span><span class="p">(</span><span class="nx">separate</span><span class="p">)</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">               </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Code</span><span class="w"> </span><span class="nx">segment</span><span class="p">:</span><span class="w"> </span><span class="nx">Shared</span><span class="w"> </span><span class="p">(</span><span class="nx">reference</span><span class="w"> </span><span class="nx">same</span><span class="w"> </span><span class="nx">physical</span><span class="w"> </span><span class="nx">address</span><span class="p">)</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Data</span><span class="w"> </span><span class="nx">segment</span><span class="p">:</span><span class="w"> </span><span class="nx">Separate</span><span class="w"> </span><span class="p">(</span><span class="nx">each</span><span class="w"> </span><span class="nx">process</span><span class="w"> </span><span class="nx">has</span><span class="w"> </span><span class="nx">its</span><span class="w"> </span><span class="nx">own</span><span class="p">)</span><span class="w">                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="5-paging-vs-segmentation-comparison">5. Paging vs Segmentation Comparison<a class="header-link" href="#5-paging-vs-segmentation-comparison" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                  </span><span class="nx">Paging</span><span class="w"> </span><span class="nx">vs</span><span class="w"> </span><span class="nx">Segmentation</span><span class="w"> </span><span class="nx">Comparison</span><span class="w">                      </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">        </span><span class="nx">Aspect</span><span class="w">         </span><span class="err">â”‚</span><span class="w">      </span><span class="nx">Paging</span><span class="w">         </span><span class="err">â”‚</span><span class="w">      </span><span class="nx">Segmentation</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nx">Unit</span><span class="w">                  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Fixed</span><span class="w"> </span><span class="nx">size</span><span class="w"> </span><span class="p">(</span><span class="nx">pages</span><span class="p">)</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Variable</span><span class="w"> </span><span class="nx">size</span><span class="w"> </span><span class="p">(</span><span class="nx">segments</span><span class="p">)</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nx">Programmer</span><span class="w"> </span><span class="nx">awareness</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Transparent</span><span class="w"> </span><span class="p">(</span><span class="nx">unaware</span><span class="p">)</span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Aware</span><span class="w"> </span><span class="p">(</span><span class="nx">logical</span><span class="w"> </span><span class="nx">units</span><span class="p">)</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nx">External</span><span class="w"> </span><span class="nx">fragmentation</span><span class="err">â”‚</span><span class="w"> </span><span class="nx">None</span><span class="w">                </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Exists</span><span class="w">                    </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nx">Internal</span><span class="w"> </span><span class="nx">fragmentation</span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Yes</span><span class="w"> </span><span class="p">(</span><span class="nx">last</span><span class="w"> </span><span class="nx">page</span><span class="p">)</span><span class="w">     </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">None</span><span class="w">                      </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nx">Table</span><span class="w"> </span><span class="nx">size</span><span class="w">            </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Can</span><span class="w"> </span><span class="nx">be</span><span class="w"> </span><span class="nx">large</span><span class="w">        </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Proportional</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">segments</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nx">Memory</span><span class="w"> </span><span class="nx">allocation</span><span class="w">     </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Simple</span><span class="w">              </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Complex</span><span class="w"> </span><span class="p">(</span><span class="nx">First</span><span class="o">-</span><span class="nx">Fit</span><span class="w"> </span><span class="nx">etc</span><span class="p">)</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nx">Protection</span><span class="w"> </span><span class="nx">unit</span><span class="w">       </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="nx">level</span><span class="w">          </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Logical</span><span class="w"> </span><span class="nx">unit</span><span class="w"> </span><span class="p">(</span><span class="nx">flexible</span><span class="p">)</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nx">Sharing</span><span class="w">               </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Possible</span><span class="w"> </span><span class="nx">but</span><span class="w"> </span><span class="nx">complex</span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Easy</span><span class="w"> </span><span class="nx">by</span><span class="w"> </span><span class="nx">logical</span><span class="w"> </span><span class="nx">unit</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="nx">Modern</span><span class="w"> </span><span class="nx">usage</span><span class="w">          </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Primarily</span><span class="w"> </span><span class="nx">used</span><span class="w">      </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Combined</span><span class="w"> </span><span class="nx">with</span><span class="w"> </span><span class="nx">paging</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="6-combining-segmentation-paging">6. Combining Segmentation + Paging<a class="header-link" href="#6-combining-segmentation-paging" title="Permanent link">&para;</a></h2>
<h3 id="61-segmentation-with-paging">6.1 Segmentation with Paging<a class="header-link" href="#61-segmentation-with-paging" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">               </span><span class="nx">Segment</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">Paging</span><span class="w"> </span><span class="nx">Combined</span><span class="w"> </span><span class="nx">Address</span><span class="w"> </span><span class="nx">Translation</span><span class="w">             </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Logical</span><span class="w"> </span><span class="nx">address</span><span class="w">                                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Segment</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Page</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span><span class="w">    </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Offset</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span><span class="w">            </span><span class="err">â”‚</span><span class="w">             </span><span class="err">â”‚</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">         </span><span class="err">â–¼</span><span class="w">            </span><span class="err">â”‚</span><span class="w">             </span><span class="err">â”‚</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">   </span><span class="err">â”‚</span><span class="w">             </span><span class="err">â”‚</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Segment</span><span class="w">      </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">             </span><span class="err">â”‚</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">Table</span><span class="w">      </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">             </span><span class="err">â”‚</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">   </span><span class="err">â”‚</span><span class="w">             </span><span class="err">â”‚</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Segment</span><span class="w"> </span><span class="nx">s</span><span class="p">:</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">             </span><span class="err">â”‚</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="nx">table</span><span class="w">   </span><span class="err">â”‚â”€â”€â”€â”˜</span><span class="w">             </span><span class="err">â”‚</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">start</span><span class="w"> </span><span class="kd">addr</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                  </span><span class="err">â”‚</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                  </span><span class="err">â”‚</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span><span class="w">                          </span><span class="err">â”‚</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">          </span><span class="err">â–¼</span><span class="w">                          </span><span class="err">â”‚</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                  </span><span class="err">â”‚</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="nx">Table</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                  </span><span class="err">â”‚</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="p">(</span><span class="nx">per</span><span class="w"> </span><span class="nx">segment</span><span class="p">)</span><span class="err">â”‚</span><span class="w">                  </span><span class="err">â”‚</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">                  </span><span class="err">â”‚</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="nx">p</span><span class="p">:</span><span class="w">      </span><span class="err">â”‚</span><span class="w">                  </span><span class="err">â”‚</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Frame</span><span class="w"> </span><span class="nx">number</span><span class="w"> </span><span class="err">â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">      </span><span class="err">â”‚</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">           </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                              </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                              </span><span class="err">â–¼</span><span class="w">      </span><span class="err">â–¼</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                        </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                        </span><span class="err">â”‚</span><span class="nx">Physical</span><span class="w"> </span><span class="kd">addr</span><span class="w"> </span><span class="err">â”‚</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                        </span><span class="err">â”‚</span><span class="p">=</span><span class="w"> </span><span class="nx">frame</span><span class="err">Ã—</span><span class="nx">size</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                        </span><span class="err">â”‚</span><span class="w">  </span><span class="o">+</span><span class="w"> </span><span class="nx">offset</span><span class="w">    </span><span class="err">â”‚</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                        </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Advantage</span><span class="p">:</span><span class="w"> </span><span class="nx">Segment</span><span class="err">&#39;</span><span class="nx">s</span><span class="w"> </span><span class="nx">logical</span><span class="w"> </span><span class="nx">separation</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">Paging</span><span class="err">&#39;</span><span class="nx">s</span><span class="w"> </span><span class="nx">no</span><span class="w"> </span><span class="kd">external</span><span class="w"> </span><span class="nx">frag</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="62-multics-system">6.2 MULTICS System<a class="header-link" href="#62-multics-system" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                      </span><span class="nx">MULTICS</span><span class="w"> </span><span class="nx">Memory</span><span class="w"> </span><span class="nx">Management</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="mi">34</span><span class="o">-</span><span class="nx">bit</span><span class="w"> </span><span class="kd">virtual</span><span class="w"> </span><span class="nx">address</span><span class="p">:</span><span class="w">                                               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Segment</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Page</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="w">      </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Offset</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nx">Number</span><span class="w"> </span><span class="nx">of</span><span class="w"> </span><span class="nx">segments</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="o">^</span><span class="mi">18</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">256</span><span class="nx">K</span><span class="w"> </span><span class="nx">segments</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nx">Pages</span><span class="w"> </span><span class="nx">per</span><span class="w"> </span><span class="nx">segment</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="o">^</span><span class="mi">6</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">64</span><span class="w"> </span><span class="nx">pages</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="nx">size</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="o">^</span><span class="mi">10</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="nx">KB</span><span class="w">                                               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nx">Maximum</span><span class="w"> </span><span class="nx">segment</span><span class="w"> </span><span class="nx">size</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">1</span><span class="nx">KB</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">64</span><span class="nx">KB</span><span class="w">                               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Address</span><span class="w"> </span><span class="nx">translation</span><span class="p">:</span><span class="w">                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="nx">Lookup</span><span class="w"> </span><span class="nx">segment</span><span class="w"> </span><span class="nx">table</span><span class="w"> </span><span class="nx">with</span><span class="w"> </span><span class="nx">segment</span><span class="w"> </span><span class="nx">number</span><span class="w">                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="nx">Get</span><span class="w"> </span><span class="nx">page</span><span class="w"> </span><span class="nx">table</span><span class="w"> </span><span class="nx">location</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">that</span><span class="w"> </span><span class="nx">segment</span><span class="w">                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="nx">Lookup</span><span class="w"> </span><span class="nx">page</span><span class="w"> </span><span class="nx">table</span><span class="w"> </span><span class="nx">with</span><span class="w"> </span><span class="nx">page</span><span class="w"> </span><span class="nx">number</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="mi">4</span><span class="p">.</span><span class="w"> </span><span class="nx">Frame</span><span class="w"> </span><span class="nx">number</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">offset</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">physical</span><span class="w"> </span><span class="nx">address</span><span class="w">                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="7-intel-x86-segmentation">7. Intel x86 Segmentation<a class="header-link" href="#7-intel-x86-segmentation" title="Permanent link">&para;</a></h2>
<h3 id="71-protected-mode-segment-registers">7.1 Protected Mode Segment Registers<a class="header-link" href="#71-protected-mode-segment-registers" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                    </span><span class="n">x86</span><span class="w"> </span><span class="n">Segment</span><span class="w"> </span><span class="n">Registers</span><span class="w">                                </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="mh">16</span><span class="o">-</span><span class="kt">bit</span><span class="w"> </span><span class="n">Segment</span><span class="w"> </span><span class="n">Selector</span><span class="w">                                               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="n">Index</span><span class="w"> </span><span class="p">(</span><span class="mh">13</span><span class="w"> </span><span class="n">bits</span><span class="p">)</span><span class="w">         </span><span class="err">â”‚</span><span class="w"> </span><span class="n">TI</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">RPL</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nl">TI:</span><span class="w"> </span><span class="n">Table</span><span class="w"> </span><span class="n">Indicator</span><span class="w"> </span><span class="p">(</span><span class="mh">0</span><span class="o">=</span><span class="n">GDT</span><span class="p">,</span><span class="w"> </span><span class="mh">1</span><span class="o">=</span><span class="n">LDT</span><span class="p">)</span><span class="w">                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nl">RPL:</span><span class="w"> </span><span class="n">Requested</span><span class="w"> </span><span class="n">Privilege</span><span class="w"> </span><span class="n">Level</span><span class="w"> </span><span class="p">(</span><span class="mh">0</span><span class="o">-</span><span class="mh">3</span><span class="p">)</span><span class="w">                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">Segment</span><span class="w"> </span><span class="nl">registers:</span><span class="w">                                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="n">CS</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Code</span><span class="w"> </span><span class="n">Segment</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">currently</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="n">code</span><span class="err">â”‚</span><span class="w">                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="n">DS</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Data</span><span class="w"> </span><span class="n">Segment</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">data</span><span class="w">            </span><span class="err">â”‚</span><span class="w">                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="n">SS</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Stack</span><span class="w"> </span><span class="n">Segment</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">stack</span><span class="w">                  </span><span class="err">â”‚</span><span class="w">                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="n">ES</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Extra</span><span class="w"> </span><span class="n">Segment</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="n">data</span><span class="w">        </span><span class="err">â”‚</span><span class="w">                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="n">FS</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Extra</span><span class="w"> </span><span class="n">segment</span><span class="w"> </span><span class="p">(</span><span class="n">thread</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="n">storage</span><span class="p">)</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="n">GS</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Extra</span><span class="w"> </span><span class="n">segment</span><span class="w"> </span><span class="p">(</span><span class="n">used</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">kernel</span><span class="p">)</span><span class="w">         </span><span class="err">â”‚</span><span class="w">                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="72-segment-descriptor">7.2 Segment Descriptor<a class="header-link" href="#72-segment-descriptor" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                  </span><span class="nx">x86</span><span class="w"> </span><span class="nx">Segment</span><span class="w"> </span><span class="nx">Descriptor</span><span class="w"> </span><span class="p">(</span><span class="mi">64</span><span class="w"> </span><span class="nx">bits</span><span class="p">)</span><span class="w">                       </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Bits</span><span class="p">:</span><span class="w">  </span><span class="mi">63</span><span class="w">      </span><span class="mi">56</span><span class="w"> </span><span class="mi">55</span><span class="w">   </span><span class="mi">52</span><span class="w"> </span><span class="mi">51</span><span class="w">   </span><span class="mi">48</span><span class="w"> </span><span class="mi">47</span><span class="w">          </span><span class="mi">40</span><span class="w"> </span><span class="mi">39</span><span class="w">   </span><span class="mi">32</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">         </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Upper</span><span class="w"> </span><span class="err">â”‚</span><span class="nx">Base</span><span class="p">[</span><span class="mi">31</span><span class="p">:</span><span class="mi">24</span><span class="p">]</span><span class="err">â”‚</span><span class="nx">Flags</span><span class="w"> </span><span class="err">â”‚</span><span class="nx">Limit</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Access</span><span class="w"> </span><span class="nx">Byte</span><span class="w">  </span><span class="err">â”‚</span><span class="nx">Base</span><span class="w">   </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="mi">32</span><span class="nx">bits</span><span class="err">â”‚</span><span class="w">  </span><span class="p">(</span><span class="mi">8</span><span class="nx">bits</span><span class="p">)</span><span class="w"> </span><span class="err">â”‚</span><span class="p">(</span><span class="mi">4</span><span class="nx">bits</span><span class="p">)</span><span class="err">â”‚</span><span class="p">[</span><span class="mi">19</span><span class="p">:</span><span class="mi">16</span><span class="p">]</span><span class="err">â”‚</span><span class="w">   </span><span class="p">(</span><span class="mi">8</span><span class="nx">bits</span><span class="p">)</span><span class="w">    </span><span class="err">â”‚</span><span class="p">[</span><span class="mi">23</span><span class="p">:</span><span class="mi">16</span><span class="p">]</span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">         </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Bits</span><span class="p">:</span><span class="w">  </span><span class="mi">31</span><span class="w">              </span><span class="mi">16</span><span class="w"> </span><span class="mi">15</span><span class="w">                   </span><span class="mi">0</span><span class="w">                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">         </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Lower</span><span class="w"> </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Base</span><span class="p">[</span><span class="mi">15</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span><span class="w">     </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">Limit</span><span class="p">[</span><span class="mi">15</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="mi">32</span><span class="nx">bits</span><span class="err">â”‚</span><span class="w">    </span><span class="p">(</span><span class="mi">16</span><span class="nx">bits</span><span class="p">)</span><span class="w">     </span><span class="err">â”‚</span><span class="w">     </span><span class="p">(</span><span class="mi">16</span><span class="nx">bits</span><span class="p">)</span><span class="w">        </span><span class="err">â”‚</span><span class="w">                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">         </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Base</span><span class="p">:</span><span class="w"> </span><span class="mi">32</span><span class="o">-</span><span class="nx">bit</span><span class="w"> </span><span class="nx">segment</span><span class="w"> </span><span class="nx">start</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="p">(</span><span class="nx">stored</span><span class="w"> </span><span class="nx">distributed</span><span class="p">)</span><span class="w">               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Limit</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="o">-</span><span class="nx">bit</span><span class="w"> </span><span class="nx">segment</span><span class="w"> </span><span class="nx">size</span><span class="w">                                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Flags</span><span class="w"> </span><span class="p">(</span><span class="mi">4</span><span class="w"> </span><span class="nx">bits</span><span class="p">):</span><span class="w">                                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">G</span><span class="w">  </span><span class="err">â”‚</span><span class="nx">D</span><span class="o">/</span><span class="nx">B</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">L</span><span class="w">  </span><span class="err">â”‚</span><span class="nx">AVL</span><span class="w"> </span><span class="err">â”‚</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">G</span><span class="p">:</span><span class="w"> </span><span class="nx">Granularity</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">=</span><span class="nx">byte</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">=</span><span class="mi">4</span><span class="nx">KB</span><span class="w"> </span><span class="nx">unit</span><span class="p">)</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">D</span><span class="o">/</span><span class="nx">B</span><span class="p">:</span><span class="w"> </span><span class="nx">Default</span><span class="w"> </span><span class="nx">operation</span><span class="w"> </span><span class="nx">size</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">=</span><span class="mi">16</span><span class="nx">bit</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">=</span><span class="mi">32</span><span class="nx">bit</span><span class="p">)</span><span class="w">                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">L</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="o">-</span><span class="nx">bit</span><span class="w"> </span><span class="nx">code</span><span class="w"> </span><span class="nx">segment</span><span class="w">                                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">AVL</span><span class="p">:</span><span class="w"> </span><span class="nx">Available</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">system</span><span class="w"> </span><span class="nx">software</span><span class="w">                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Access</span><span class="w"> </span><span class="nx">Byte</span><span class="p">:</span><span class="w">                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">P</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">DPL</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">S</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">E</span><span class="w">  </span><span class="err">â”‚</span><span class="nx">DC</span><span class="w">  </span><span class="err">â”‚</span><span class="nx">RW</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">A</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">P</span><span class="p">:</span><span class="w"> </span><span class="nx">Present</span><span class="w"> </span><span class="nx">bit</span><span class="w">                                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">DPL</span><span class="p">:</span><span class="w"> </span><span class="nx">Descriptor</span><span class="w"> </span><span class="nx">Privilege</span><span class="w"> </span><span class="nx">Level</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">S</span><span class="p">:</span><span class="w"> </span><span class="nx">Descriptor</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">=</span><span class="nx">system</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">=</span><span class="nx">code</span><span class="o">/</span><span class="nx">data</span><span class="p">)</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">E</span><span class="p">:</span><span class="w"> </span><span class="nx">Executable</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">=</span><span class="nx">data</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">=</span><span class="nx">code</span><span class="p">)</span><span class="w">                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">DC</span><span class="p">:</span><span class="w"> </span><span class="nx">Direction</span><span class="o">/</span><span class="nx">Conforming</span><span class="w">                                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">RW</span><span class="p">:</span><span class="w"> </span><span class="nx">Readable</span><span class="p">(</span><span class="nx">code</span><span class="p">)</span><span class="o">/</span><span class="nx">Writable</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">A</span><span class="p">:</span><span class="w"> </span><span class="nx">Accessed</span><span class="w">                                                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="73-x86-address-translation-segmentation-paging">7.3 x86 Address Translation (Segmentation + Paging)<a class="header-link" href="#73-x86-address-translation-segmentation-paging" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">               </span><span class="nx">x86</span><span class="w"> </span><span class="nx">Complete</span><span class="w"> </span><span class="nx">Address</span><span class="w"> </span><span class="nx">Translation</span><span class="w"> </span><span class="nx">Process</span><span class="w">                  </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Logical</span><span class="w"> </span><span class="nx">address</span><span class="w">                                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Segment</span><span class="w"> </span><span class="nx">selector</span><span class="w"> </span><span class="err">â”‚</span><span class="w">         </span><span class="nx">Offset</span><span class="w">                </span><span class="err">â”‚</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="p">(</span><span class="mi">16</span><span class="w"> </span><span class="nx">bits</span><span class="p">)</span><span class="w">     </span><span class="err">â”‚</span><span class="w">        </span><span class="p">(</span><span class="mi">32</span><span class="w"> </span><span class="nx">bits</span><span class="p">)</span><span class="w">              </span><span class="err">â”‚</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">            </span><span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">            </span><span class="err">â–¼</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">            </span><span class="err">â”‚</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Segmentation</span><span class="w"> </span><span class="nx">stage</span><span class="w"> </span><span class="err">â”‚</span><span class="w">            </span><span class="err">â”‚</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                     </span><span class="err">â”‚</span><span class="w">            </span><span class="err">â”‚</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">GDT</span><span class="o">/</span><span class="nx">LDT</span><span class="w"> </span><span class="nx">lookup</span><span class="w">     </span><span class="err">â”‚</span><span class="w">            </span><span class="err">â”‚</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Base</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">Offset</span><span class="w">      </span><span class="err">â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="p">=</span><span class="w"> </span><span class="nx">Linear</span><span class="w"> </span><span class="nx">address</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">                                                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">              </span><span class="err">â–¼</span><span class="w"> </span><span class="nx">Linear</span><span class="w"> </span><span class="nx">address</span><span class="w">                                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="nx">Paging</span><span class="w"> </span><span class="nx">stage</span><span class="w">      </span><span class="err">â”‚</span><span class="w">                                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                     </span><span class="err">â”‚</span><span class="w">                                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">CR3</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="nx">Page</span><span class="w">         </span><span class="err">â”‚</span><span class="w">                                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">directory</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="nx">table</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â†’</span><span class="w"> </span><span class="nx">Frame</span><span class="w">            </span><span class="err">â”‚</span><span class="w">                                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w">                                                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">              </span><span class="err">â–¼</span><span class="w">                                                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">         </span><span class="nx">Physical</span><span class="w"> </span><span class="nx">address</span><span class="w">                                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Modern</span><span class="w"> </span><span class="nx">OS</span><span class="w"> </span><span class="p">(</span><span class="nx">Linux</span><span class="p">,</span><span class="w"> </span><span class="nx">Windows</span><span class="p">):</span><span class="w">                                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nx">Simplified</span><span class="w"> </span><span class="nx">segmentation</span><span class="w"> </span><span class="p">(</span><span class="nx">Base</span><span class="p">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nx">Limit</span><span class="p">=</span><span class="nx">max</span><span class="p">)</span><span class="w">                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nx">Only</span><span class="w"> </span><span class="nx">paging</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">actually</span><span class="w"> </span><span class="nx">used</span><span class="w">                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nx">Linear</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">logical</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="p">(</span><span class="nx">flat</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">model</span><span class="p">)</span><span class="w">                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="74-linux-segmentation-usage">7.4 Linux Segmentation Usage<a class="header-link" href="#74-linux-segmentation-usage" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// Segment settings in Linux x86 (arch/x86/include/asm/segment.h)</span>

<span class="c1">// GDT entry index (Linux kernel)</span>
<span class="cp">#define GDT_ENTRY_KERNEL_CS     1</span>
<span class="cp">#define GDT_ENTRY_KERNEL_DS     2</span>
<span class="cp">#define GDT_ENTRY_DEFAULT_USER_CS   3</span>
<span class="cp">#define GDT_ENTRY_DEFAULT_USER_DS   4</span>

<span class="c1">// Segment selector calculation</span>
<span class="c1">// Index &lt;&lt; 3 | TI(0=GDT) | RPL</span>
<span class="cp">#define __KERNEL_CS (GDT_ENTRY_KERNEL_CS * 8)      </span><span class="c1">// 0x08</span>
<span class="cp">#define __KERNEL_DS (GDT_ENTRY_KERNEL_DS * 8)      </span><span class="c1">// 0x10</span>
<span class="cp">#define __USER_CS   (GDT_ENTRY_DEFAULT_USER_CS * 8 + 3)  </span><span class="c1">// 0x1B (RPL=3)</span>
<span class="cp">#define __USER_DS   (GDT_ENTRY_DEFAULT_USER_DS * 8 + 3)  </span><span class="c1">// 0x23 (RPL=3)</span>

<span class="c1">// Flat memory model: All segments start at 0, up to 4GB</span>
<span class="c1">// Base = 0x00000000</span>
<span class="c1">// Limit = 0xFFFFFFFF (4GB if G=1)</span>

<span class="cm">/*</span>
<span class="cm"> * Linux uses segmentation minimally:</span>
<span class="cm"> * - Kernel/user privilege separation (CS, DS segments)</span>
<span class="cm"> * - Thread local storage (FS, GS segments)</span>
<span class="cm"> * - Actual memory protection is done by paging</span>
<span class="cm"> */</span>
</code></pre></div>

<hr />
<h2 id="practice-problems">Practice Problems<a class="header-link" href="#practice-problems" title="Permanent link">&para;</a></h2>
<h3 id="problem-1-segment-address-translation">Problem 1: Segment Address Translation<a class="header-link" href="#problem-1-segment-address-translation" title="Permanent link">&para;</a></h3>
<p>Translate logical address &lt;1, 500&gt; to physical address using the following segment table.</p>
<table>
<thead>
<tr>
<th>Segment</th>
<th>Base</th>
<th>Limit</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1000</td>
<td>600</td>
</tr>
<tr>
<td>1</td>
<td>2000</td>
<td>400</td>
</tr>
<tr>
<td>2</td>
<td>3000</td>
<td>800</td>
</tr>
</tbody>
</table>
<details>
<summary>Show Answer</summary>


<div class="highlight"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="n">Segment</span><span class="w"> </span><span class="n">number</span><span class="p">:</span><span class="w"> </span><span class="mf">1</span>
<span class="mf">2.</span><span class="w"> </span><span class="n">Offset</span><span class="p">:</span><span class="w"> </span><span class="mf">500</span>
<span class="mf">3.</span><span class="w"> </span><span class="n">Segment</span><span class="w"> </span><span class="mf">1</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">Limit</span><span class="p">:</span><span class="w"> </span><span class="mf">400</span>

<span class="nb">Sin</span><span class="n">ce</span><span class="w"> </span><span class="n">offset</span><span class="p">(</span><span class="mf">500</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">Limit</span><span class="p">(</span><span class="mf">400</span><span class="p">),</span><span class="w"> </span><span class="n">Segmentation</span><span class="w"> </span><span class="n">Fault</span><span class="err">!</span>

<span class="n">Address</span><span class="w"> </span><span class="n">translation</span><span class="w"> </span><span class="n">failed</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">segment</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="n">exceeded</span>
</code></pre></div>



</details>

<h3 id="problem-2-segment-protection">Problem 2: Segment Protection<a class="header-link" href="#problem-2-segment-protection" title="Permanent link">&para;</a></h3>
<p>Determine if protection violations occur in the following scenarios.</p>
<p>Segment table:
| Segment | Base | Limit | Protection |
|---------|------|-------|------------|
| 0 (code) | 0x1000 | 2000 | R-X |
| 1 (data) | 0x5000 | 3000 | RW- |</p>
<ol>
<li>Fetch instruction from segment 0 at address 500</li>
<li>Write data to segment 0 at address 100</li>
<li>Read from segment 1 at address 2500</li>
</ol>
<details>
<summary>Show Answer</summary>


<div class="highlight"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="n">Segment</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="p">(</span><span class="n">code</span><span class="p">),</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="mf">500</span><span class="p">,</span><span class="w"> </span><span class="n">execute</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="mf">500</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">2000</span><span class="p">:</span><span class="w"> </span><span class="n">Range</span><span class="w"> </span><span class="n">OK</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="n">permission</span><span class="w"> </span><span class="n">exists</span><span class="p">:</span><span class="w"> </span><span class="n">Protection</span><span class="w"> </span><span class="n">OK</span>
<span class="w">   </span><span class="err">â†’</span><span class="w"> </span><span class="n">Normal</span><span class="w"> </span><span class="n">execution</span>

<span class="mf">2.</span><span class="w"> </span><span class="n">Segment</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="p">(</span><span class="n">code</span><span class="p">),</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="mf">100</span><span class="p">,</span><span class="w"> </span><span class="n">write</span><span class="p">(</span><span class="n">W</span><span class="p">)</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="mf">100</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">2000</span><span class="p">:</span><span class="w"> </span><span class="n">Range</span><span class="w"> </span><span class="n">OK</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="n">permission</span><span class="w"> </span><span class="p">(</span><span class="n">R</span><span class="o">-</span><span class="n">X</span><span class="w"> </span><span class="kr">on</span><span class="n">ly</span><span class="p">):</span><span class="w"> </span><span class="n">Protection</span><span class="w"> </span><span class="n">violation</span><span class="err">!</span>
<span class="w">   </span><span class="err">â†’</span><span class="w"> </span><span class="n">Protection</span><span class="w"> </span><span class="n">Fault</span>

<span class="mf">3.</span><span class="w"> </span><span class="n">Segment</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="p">(</span><span class="kd">data</span><span class="p">),</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="mf">2500</span><span class="p">,</span><span class="w"> </span><span class="kr">read</span><span class="p">(</span><span class="n">R</span><span class="p">)</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="mf">2500</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">3000</span><span class="p">:</span><span class="w"> </span><span class="n">Range</span><span class="w"> </span><span class="n">OK</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">permission</span><span class="w"> </span><span class="n">exists</span><span class="w"> </span><span class="p">(</span><span class="n">RW</span><span class="o">-</span><span class="p">):</span><span class="w"> </span><span class="n">Protection</span><span class="w"> </span><span class="n">OK</span>
<span class="w">   </span><span class="err">â†’</span><span class="w"> </span><span class="n">Normal</span><span class="w"> </span><span class="n">execution</span>
</code></pre></div>



</details>

<h3 id="problem-3-segment-sharing">Problem 3: Segment Sharing<a class="header-link" href="#problem-3-segment-sharing" title="Permanent link">&para;</a></h3>
<p>Processes A and B both use the same shared library (1000 bytes). When this library is loaded at physical address 0x10000, create segment tables for each process.</p>
<p>(A maps library to segment 2, B to segment 3)</p>
<details>
<summary>Show Answer</summary>


<div class="highlight"><pre><span></span><code><span class="k">Proc</span><span class="nv">ess</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="ow">Seg</span><span class="nv">ment</span><span class="w"> </span><span class="nv">Table</span><span class="p">:</span>
<span class="err">|</span><span class="w"> </span><span class="k">Segment</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nv">Base</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nv">Limit</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nv">Protection</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nv">Description</span><span class="w"> </span><span class="o">|</span>
<span class="err">|---------|---------|-------|------------|-------------|</span>
<span class="err">|</span><span class="w"> </span><span class="err">0</span><span class="w">       </span><span class="err">|</span><span class="w"> </span><span class="err">0</span><span class="nf">x5000</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="mi">2000</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="nv">R</span><span class="o">-</span><span class="nv">X</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="nv">A</span><span class="err">&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">code</span><span class="w">    </span><span class="o">|</span>
<span class="err">|</span><span class="w"> </span><span class="err">1</span><span class="w">       </span><span class="err">|</span><span class="w"> </span><span class="err">0</span><span class="nf">x8000</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="mi">1500</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="nv">RW</span><span class="o">-</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="nv">A</span><span class="err">&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">data</span><span class="w">    </span><span class="o">|</span>
<span class="err">|</span><span class="w"> </span><span class="err">2</span><span class="w">       </span><span class="err">|</span><span class="w"> </span><span class="err">0</span><span class="nf">x10000</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1000</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="nv">R</span><span class="o">-</span><span class="nv">X</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="nv">Shared</span><span class="w"> </span><span class="nv">library</span><span class="w"> </span><span class="o">|</span>

<span class="k">Proc</span><span class="nv">ess</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="ow">Seg</span><span class="nv">ment</span><span class="w"> </span><span class="nv">Table</span><span class="p">:</span>
<span class="err">|</span><span class="w"> </span><span class="k">Segment</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nv">Base</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nv">Limit</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nv">Protection</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nv">Description</span><span class="w"> </span><span class="o">|</span>
<span class="err">|---------|---------|-------|------------|-------------|</span>
<span class="err">|</span><span class="w"> </span><span class="err">0</span><span class="w">       </span><span class="err">|</span><span class="w"> </span><span class="err">0</span><span class="nf">x20000</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">3000</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="nv">R</span><span class="o">-</span><span class="nv">X</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="nv">B</span><span class="err">&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">code</span><span class="w">    </span><span class="o">|</span>
<span class="err">|</span><span class="w"> </span><span class="err">1</span><span class="w">       </span><span class="err">|</span><span class="w"> </span><span class="err">0</span><span class="nf">x25000</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2000</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="nv">RW</span><span class="o">-</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="nv">B</span><span class="err">&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">data</span><span class="w">    </span><span class="o">|</span>
<span class="err">|</span><span class="w"> </span><span class="err">2</span><span class="w">       </span><span class="err">|</span><span class="w"> </span><span class="nf">...</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="nv">...</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="nv">...</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="nv">Other</span><span class="w">       </span><span class="o">|</span>
<span class="err">|</span><span class="w"> </span><span class="err">3</span><span class="w">       </span><span class="err">|</span><span class="w"> </span><span class="err">0</span><span class="nf">x10000</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1000</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="nv">R</span><span class="o">-</span><span class="nv">X</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="nv">Shared</span><span class="w"> </span><span class="nv">library</span><span class="w"> </span><span class="o">|</span>

<span class="err">â†’</span><span class="w"> </span><span class="k">Segment</span><span class="nv">s</span><span class="w"> </span><span class="nv">A</span><span class="p">:</span><span class="mi">2</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">B</span><span class="p">:</span><span class="mi">3</span><span class="w"> </span><span class="nv">point</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">physical</span><span class="w"> </span><span class="nv">address</span><span class="w"> </span><span class="p">(</span><span class="mh">0x10000</span><span class="p">)</span>
<span class="err">â†’</span><span class="w"> </span><span class="k">Library</span><span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="nv">loaded</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">once</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">memory</span>
</code></pre></div>



</details>

<h3 id="problem-4-external-fragmentation">Problem 4: External Fragmentation<a class="header-link" href="#problem-4-external-fragmentation" title="Permanent link">&para;</a></h3>
<p>Explain why external fragmentation occurs with segmentation and how to solve it.</p>
<details>
<summary>Show Answer</summary>


<div class="highlight"><pre><span></span><code><span class="n">Reasons</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">external</span><span class="w"> </span><span class="nl">fragmentation</span><span class="p">:</span>
<span class="mf">1.</span><span class="w"> </span><span class="n">Segments</span><span class="w"> </span><span class="k">are</span><span class="w"> </span><span class="k">variable</span><span class="w"> </span><span class="k">size</span>
<span class="mf">2.</span><span class="w"> </span><span class="n">Repeated</span><span class="w"> </span><span class="n">segment</span><span class="w"> </span><span class="n">allocation</span><span class="o">/</span><span class="n">deallocation</span><span class="w"> </span><span class="n">creates</span><span class="w"> </span><span class="n">small</span><span class="w"> </span><span class="n">holes</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">memory</span>
<span class="mf">3.</span><span class="w"> </span><span class="n">Total</span><span class="w"> </span><span class="k">free</span><span class="w"> </span><span class="nf">space</span><span class="w"> </span><span class="n">sufficient</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">contiguous</span>

<span class="nl">Example</span><span class="p">:</span>
<span class="o">[</span><span class="n">Used</span><span class="o">][</span><span class="n">500KB hole</span><span class="o">][</span><span class="n">Used</span><span class="o">][</span><span class="n">300KB hole</span><span class="o">][</span><span class="n">Used</span><span class="o">][</span><span class="n">200KB hole</span><span class="o">]</span>
<span class="n">Total</span><span class="w"> </span><span class="k">free</span><span class="err">:</span><span class="w"> </span><span class="mi">1000</span><span class="n">KB</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="k">allocate</span><span class="w"> </span><span class="mi">600</span><span class="n">KB</span><span class="w"> </span><span class="n">segment</span>

<span class="nl">Solutions</span><span class="p">:</span>
<span class="mf">1.</span><span class="w"> </span><span class="n">Compaction</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Move</span><span class="w"> </span><span class="n">segments</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">consolidate</span><span class="w"> </span><span class="n">holes</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">High</span><span class="w"> </span><span class="n">cost</span><span class="w"> </span><span class="p">(</span><span class="n">requires</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">suspension</span><span class="p">)</span>

<span class="mf">2.</span><span class="w"> </span><span class="n">Combine</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">paging</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Divide</span><span class="w"> </span><span class="n">segments</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">pages</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Eliminate</span><span class="w"> </span><span class="k">external</span><span class="w"> </span><span class="n">fragmentation</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Standard</span><span class="w"> </span><span class="n">approach</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">modern</span><span class="w"> </span><span class="n">systems</span>

<span class="mf">3.</span><span class="w"> </span><span class="n">Buddy</span><span class="w"> </span><span class="k">system</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Divide</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="nf">power</span><span class="o">-</span><span class="k">of</span><span class="o">-</span><span class="mi">2</span><span class="w"> </span><span class="n">sizes</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Reduce</span><span class="w"> </span><span class="n">fragmentation</span><span class="p">,</span><span class="w"> </span><span class="n">fast</span><span class="w"> </span><span class="n">merging</span>
</code></pre></div>



</details>

<h3 id="problem-5-x86-segment-selector">Problem 5: x86 Segment Selector<a class="header-link" href="#problem-5-x86-segment-selector" title="Permanent link">&para;</a></h3>
<p>A user process's CS register value in Linux is 0x23. Interpret this.</p>
<details>
<summary>Show Answer</summary>


<div class="highlight"><pre><span></span><code><span class="mf">0</span><span class="n">x23</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="n">b00100011</span>

<span class="n">Segment</span><span class="w"> </span><span class="n">selector</span><span class="w"> </span><span class="n">structure</span><span class="p">:</span><span class="w"> </span><span class="err">[</span><span class="n">Index</span><span class="p">(</span><span class="mf">13</span><span class="p">)</span><span class="err">|</span><span class="n">TI</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span><span class="err">|</span><span class="n">RPL</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="err">]</span>

<span class="mf">0</span><span class="n">x23</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0000</span><span class="w"> </span><span class="mf">0000</span><span class="w"> </span><span class="mf">0010</span><span class="w"> </span><span class="mf">0011</span>

<span class="n">Index</span><span class="w"> </span><span class="p">(</span><span class="n">bits</span><span class="w"> </span><span class="mf">15</span><span class="o">-</span><span class="mf">3</span><span class="p">):</span><span class="w"> </span><span class="mf">0000</span><span class="w"> </span><span class="mf">0000</span><span class="w"> </span><span class="mf">0010</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4</span>
<span class="n">TI</span><span class="w"> </span><span class="p">(</span><span class="n">bit</span><span class="w"> </span><span class="mf">2</span><span class="p">):</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GDT</span>
<span class="n">RPL</span><span class="w"> </span><span class="p">(</span><span class="n">bits</span><span class="w"> </span><span class="mf">1</span><span class="o">-</span><span class="mf">0</span><span class="p">):</span><span class="w"> </span><span class="mf">11</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="p">(</span><span class="n">user</span><span class="w"> </span><span class="n">mode</span><span class="p">)</span>

<span class="nb">Int</span><span class="n">erpretation</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="mf">4</span><span class="n">th</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">GDT</span><span class="w"> </span><span class="p">(</span><span class="n">GDT_ENTRY_DEFAULT_USER_CS</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">User</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="p">(</span><span class="n">Ring</span><span class="w"> </span><span class="mf">3</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">points</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="n">segment</span>

<span class="n">Matches</span><span class="w"> </span><span class="n">Linux</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">code</span><span class="p">:</span>
<span class="err">#</span><span class="kd">def</span><span class="n">ine</span><span class="w"> </span><span class="n">__USER_CS</span><span class="w"> </span><span class="p">(</span><span class="n">GDT_ENTRY_DEFAULT_USER_CS</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">8</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">3</span><span class="p">)</span>
<span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mf">4</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">8</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">3</span><span class="p">)</span>
<span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="mf">32</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">3</span>
<span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="mf">35</span>
<span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="n">x23</span><span class="w"> </span><span class="err">âœ“</span>
</code></pre></div>



</details>

<hr />
<h2 id="next-steps">Next Steps<a class="header-link" href="#next-steps" title="Permanent link">&para;</a></h2>
<p>Learn about demand paging and virtual memory systems in <a href="./14_Virtual_Memory.md">14_Virtual_Memory.md</a>!</p>
<hr />
<h2 id="references">References<a class="header-link" href="#references" title="Permanent link">&para;</a></h2>
<ul>
<li>Silberschatz, "Operating System Concepts" Chapter 8</li>
<li>Intel 64 and IA-32 Architectures Software Developer's Manual, Volume 3</li>
<li>Linux kernel source: <code>arch/x86/kernel/cpu/common.c</code> (GDT initialization)</li>
<li>Tanenbaum, "Modern Operating Systems" Chapter 3</li>
</ul>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/OS_Theory/12_Paging.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Paging â­â­â­</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/OS_Theory/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/OS_Theory/14_Virtual_Memory.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Virtual Memory â­â­â­</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">â†‘</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'en';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}