{% raw %}
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File System Implementation â­â­â­â­ - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/en/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/en/" class="nav-item ">
                    <span class="nav-icon">ğŸ </span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">ğŸ’»</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/en/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" selected>
                        English
                    </option>
                    
                    <option value="ko" >
                        í•œêµ­ì–´
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">â˜€ï¸</span>
                    <span class="theme-icon dark">ğŸŒ™</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/en/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/en/OS_Theory/">OS Theory</a>
    <span class="separator">/</span>
    <span class="current">File System Implementation â­â­â­â­</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>File System Implementation â­â­â­â­</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/OS_Theory/16_File_System_Basics.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">File System Basics â­â­â­</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/OS_Theory/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/OS_Theory/18_IO_and_IPC.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">I/O and IPC â­â­â­</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#1-file-system-structure">1. File System Structure</a><ul>
<li><a href="#11-disk-layout">1.1 Disk Layout</a></li>
<li><a href="#12-major-components">1.2 Major Components</a></li>
</ul>
</li>
<li><a href="#2-disk-block-allocation">2. Disk Block Allocation</a><ul>
<li><a href="#21-contiguous-allocation">2.1 Contiguous Allocation</a></li>
<li><a href="#22-linked-allocation">2.2 Linked Allocation</a></li>
<li><a href="#23-fat-file-allocation-table">2.3 FAT (File Allocation Table)</a></li>
<li><a href="#24-indexed-allocation">2.4 Indexed Allocation</a></li>
</ul>
</li>
<li><a href="#3-inode-structure">3. inode Structure</a><ul>
<li><a href="#31-unixlinux-inode">3.1 Unix/Linux inode</a></li>
<li><a href="#32-directindirect-block-pointers">3.2 Direct/Indirect Block Pointers</a></li>
<li><a href="#33-inode-size-calculation-example">3.3 inode Size Calculation Example</a></li>
</ul>
</li>
<li><a href="#4-directory-implementation">4. Directory Implementation</a><ul>
<li><a href="#41-directory-entry-structure">4.1 Directory Entry Structure</a></li>
<li><a href="#42-hash-table-directory">4.2 Hash Table Directory</a></li>
</ul>
</li>
<li><a href="#5-file-system-examples">5. File System Examples</a><ul>
<li><a href="#51-fat32">5.1 FAT32</a></li>
<li><a href="#52-ext4">5.2 ext4</a></li>
</ul>
</li>
<li><a href="#6-journaling">6. Journaling</a><ul>
<li><a href="#61-need-for-journaling">6.1 Need for Journaling</a></li>
<li><a href="#62-journaling-operation">6.2 Journaling Operation</a></li>
<li><a href="#63-journal-modes">6.3 Journal Modes</a></li>
</ul>
</li>
<li><a href="#7-raid">7. RAID</a><ul>
<li><a href="#71-raid-overview">7.1 RAID Overview</a></li>
<li><a href="#72-raid-levels">7.2 RAID Levels</a></li>
<li><a href="#73-raid-level-comparison">7.3 RAID Level Comparison</a></li>
</ul>
</li>
<li><a href="#practice-problems">Practice Problems</a><ul>
<li><a href="#problem-1-inode-block-pointers">Problem 1: inode Block Pointers</a></li>
<li><a href="#problem-2-fat-chain">Problem 2: FAT Chain</a></li>
<li><a href="#problem-3-journaling-recovery">Problem 3: Journaling Recovery</a></li>
<li><a href="#problem-4-raid-capacity-calculation">Problem 4: RAID Capacity Calculation</a></li>
<li><a href="#problem-5-file-deletion-process">Problem 5: File Deletion Process</a></li>
</ul>
</li>
<li><a href="#next-steps">Next Steps</a></li>
<li><a href="#references">References</a></li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="file-system-implementation">File System Implementation â­â­â­â­<a class="header-link" href="#file-system-implementation" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="header-link" href="#overview" title="Permanent link">&para;</a></h2>
<p>Learn how file systems store and manage data on disks. Covers key concepts needed for actual implementation including block allocation methods, inode structure, journaling, and RAID.</p>
<hr />
<h2 id="table-of-contents">Table of Contents<a class="header-link" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#1-file-system-structure">File System Structure</a></li>
<li><a href="#2-disk-block-allocation">Disk Block Allocation</a></li>
<li><a href="#3-inode-structure">inode Structure</a></li>
<li><a href="#4-directory-implementation">Directory Implementation</a></li>
<li><a href="#5-file-system-examples">File System Examples</a></li>
<li><a href="#6-journaling">Journaling</a></li>
<li><a href="#7-raid">RAID</a></li>
<li><a href="#practice-problems">Practice Problems</a></li>
</ol>
<hr />
<h2 id="1-file-system-structure">1. File System Structure<a class="header-link" href="#1-file-system-structure" title="Permanent link">&para;</a></h2>
<h3 id="11-disk-layout">1.1 Disk Layout<a class="header-link" href="#11-disk-layout" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Typical File System Layout                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                         Entire Disk                              â”‚   â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚   â”‚ MBR  â”‚Partitionâ”‚Partitionâ”‚Partitionâ”‚      â”‚                      â”‚   â”‚
â”‚   â”‚      â”‚  1   â”‚  2   â”‚  3   â”‚ ...  â”‚       Free space           â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                  â”‚                                                       â”‚
â”‚                  â–¼                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                      Partition Structure (ext4)                  â”‚   â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚   â”‚ Boot â”‚  Super   â”‚  Group   â”‚            Block Groups            â”‚   â”‚
â”‚   â”‚Block â”‚  Block   â”‚Descriptorâ”‚   0    â”‚   1    â”‚   2   â”‚  ...   â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                           â”‚                              â”‚
â”‚                                           â–¼                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                        Block Group Structure                     â”‚   â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚   â”‚  Block   â”‚  inode   â”‚  inode   â”‚          Data Blocks            â”‚  â”‚
â”‚   â”‚  Bitmap  â”‚  Bitmap  â”‚  Table   â”‚                                  â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="12-major-components">1.2 Major Components<a class="header-link" href="#12-major-components" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                      </span><span class="n">File</span><span class="w"> </span><span class="n">System</span><span class="w"> </span><span class="n">Components</span><span class="w">                              </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="n">Component</span><span class="w">    </span><span class="err">â”‚</span><span class="w">                    </span><span class="n">Role</span><span class="w">                        </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Boot</span><span class="w"> </span><span class="n">Block</span><span class="w">     </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Bootstrap</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="p">(</span><span class="n">OS</span><span class="w"> </span><span class="n">loading</span><span class="p">)</span><span class="w">                    </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Block</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">partition</span><span class="w">                           </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Superblock</span><span class="w">     </span><span class="err">â”‚</span><span class="w"> </span><span class="n">File</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">metadata</span><span class="w">                           </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Block</span><span class="w"> </span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="n">blocks</span><span class="o">/</span><span class="n">inodes</span><span class="w">              </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Free</span><span class="w"> </span><span class="n">blocks</span><span class="o">/</span><span class="n">inodes</span><span class="w"> </span><span class="n">count</span><span class="w">                     </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Mount</span><span class="w"> </span><span class="n">count</span><span class="p">,</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="n">check</span><span class="w"> </span><span class="n">time</span><span class="w">                 </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Block</span><span class="w"> </span><span class="n">Bitmap</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Usage</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">)</span><span class="w">               </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Fast</span><span class="w"> </span><span class="n">free</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">search</span><span class="w">                         </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">inode</span><span class="w"> </span><span class="n">Bitmap</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Usage</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">inode</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">)</span><span class="w">               </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">inode</span><span class="w"> </span><span class="n">Table</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Stores</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">inodes</span><span class="w">                              </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Core</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">metadata</span><span class="w">                          </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Data</span><span class="w"> </span><span class="n">Blocks</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Actual</span><span class="w"> </span><span class="n">file</span><span class="o">/</span><span class="n">directory</span><span class="w"> </span><span class="n">content</span><span class="w">                  </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="2-disk-block-allocation">2. Disk Block Allocation<a class="header-link" href="#2-disk-block-allocation" title="Permanent link">&para;</a></h2>
<h3 id="21-contiguous-allocation">2.1 Contiguous Allocation<a class="header-link" href="#21-contiguous-allocation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Contiguous Allocation                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   Directory Entry:                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚   â”‚ Filename  â”‚Start Blockâ”‚ Lengthâ”‚                                      â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                      â”‚
â”‚   â”‚ file_a    â”‚    0    â”‚   3    â”‚                                      â”‚
â”‚   â”‚ file_b    â”‚    6    â”‚   2    â”‚                                      â”‚
â”‚   â”‚ file_c    â”‚   10    â”‚   4    â”‚                                      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚                                                                          â”‚
â”‚   Disk Blocks:                                                           â”‚
â”‚   â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”        â”‚
â”‚   â”‚ A â”‚ A â”‚ A â”‚   â”‚   â”‚   â”‚ B â”‚ B â”‚   â”‚   â”‚ C â”‚ C â”‚ C â”‚ C â”‚   â”‚        â”‚
â”‚   â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜        â”‚
â”‚    0   1   2   3   4   5   6   7   8   9  10  11  12  13  14            â”‚
â”‚                                                                          â”‚
â”‚   Advantages:                                                            â”‚
â”‚   - Fast sequential access (minimal disk head movement)                  â”‚
â”‚   - Easy direct access: block n = start + n                             â”‚
â”‚                                                                          â”‚
â”‚   Disadvantages:                                                         â”‚
â”‚   - External fragmentation (blocks 3-5, 8-9 wasted)                     â”‚
â”‚   - Difficult to grow files                                             â”‚
â”‚   - Must know size in advance                                           â”‚
â”‚                                                                          â”‚
â”‚   Used in: CD-ROM, DVD (read-only)                                      â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="22-linked-allocation">2.2 Linked Allocation<a class="header-link" href="#22-linked-allocation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Linked Allocation                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   Directory Entry:                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚   â”‚ Filename  â”‚Start Blockâ”‚End Blockâ”‚                                     â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                     â”‚
â”‚   â”‚ file_a    â”‚    0    â”‚   12    â”‚                                     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚                                                                          â”‚
â”‚   Disk Blocks (each block includes next block pointer):                 â”‚
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚ Block 0   â”‚   â”‚ Block 5   â”‚   â”‚ Block 8   â”‚   â”‚ Block 12  â”‚        â”‚
â”‚   â”‚ Data      â”‚â”€â”€â–¶â”‚ Data      â”‚â”€â”€â–¶â”‚ Data      â”‚â”€â”€â–¶â”‚ Data      â”‚        â”‚
â”‚   â”‚ Next: 5   â”‚   â”‚ Next: 8   â”‚   â”‚ Next: 12  â”‚   â”‚ Next: -1  â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚        0               5               8              12                â”‚
â”‚                                                                          â”‚
â”‚   Advantages:                                                            â”‚
â”‚   - No external fragmentation                                            â”‚
â”‚   - Files can grow dynamically                                           â”‚
â”‚                                                                          â”‚
â”‚   Disadvantages:                                                         â”‚
â”‚   - Inefficient direct access (must follow chain n times for block n)   â”‚
â”‚   - Pointer space overhead (4 bytes per block)                          â”‚
â”‚   - Reliability issues (file lost if pointer corrupted)                 â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="23-fat-file-allocation-table">2.3 FAT (File Allocation Table)<a class="header-link" href="#23-fat-file-allocation-table" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             FAT Structure                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   FAT (cached in memory)          Disk Blocks                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚Indexâ”‚Next Block â”‚            â”‚                                   â”‚  â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚  0  â”‚  1  â”‚  2  â”‚  3  â”‚  4  â”‚ ... â”‚  â”‚
â”‚   â”‚  0  â”‚    5     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€ A â”€â”¼â”€â”€â”€â”€â”€â”¼â”€ B â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤  â”‚
â”‚   â”‚  1  â”‚   FREE   â”‚            â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚  â”‚
â”‚   â”‚  2  â”‚    4     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€ B â”€â”¼â”€â”€â”€â”€â”€â”¤  â”‚
â”‚   â”‚  3  â”‚   FREE   â”‚            â”‚                                   â”‚  â”‚
â”‚   â”‚  4  â”‚   EOF    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€ A â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤  â”‚
â”‚   â”‚  5  â”‚    7     â”‚            â”‚                                   â”‚  â”‚
â”‚   â”‚  6  â”‚   FREE   â”‚            â”‚                                   â”‚  â”‚
â”‚   â”‚  7  â”‚   EOF    â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                    â”‚
â”‚                                                                          â”‚
â”‚   file_a: 0 â†’ 5 â†’ 7 â†’ EOF                                              â”‚
â”‚   file_b: 2 â†’ 4 â†’ EOF                                                   â”‚
â”‚                                                                          â”‚
â”‚   Advantages:                                                            â”‚
â”‚   - Fast direct access if FAT in memory                                 â”‚
â”‚   - Pointers outside data blocks improve reliability                    â”‚
â”‚                                                                          â”‚
â”‚   Disadvantages:                                                         â”‚
â”‚   - FAT can be large (for large disks)                                 â”‚
â”‚   - Entire file system problems if FAT corrupted                        â”‚
â”‚                                                                          â”‚
â”‚   Used in: MS-DOS, Windows (FAT32), USB drives                          â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="24-indexed-allocation">2.4 Indexed Allocation<a class="header-link" href="#24-indexed-allocation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                        </span><span class="n">Indexed</span><span class="w"> </span><span class="n">Allocation</span><span class="w">                                </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">Directory</span><span class="w"> </span><span class="nl">Entry</span><span class="p">:</span><span class="w">                                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Filename</span><span class="w">  </span><span class="err">â”‚</span><span class="k">Index</span><span class="w"> </span><span class="n">Block</span><span class="err">â”‚</span><span class="w">                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">file_a</span><span class="w">    </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">8</span><span class="w">     </span><span class="err">â”‚</span><span class="w">                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                    </span><span class="err">â”‚</span><span class="w">                                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                    </span><span class="err">â–¼</span><span class="w">                                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="k">Index</span><span class="w"> </span><span class="n">Block</span><span class="w"> </span><span class="p">(</span><span class="n">block</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span><span class="err">:</span><span class="w">          </span><span class="k">Data</span><span class="w"> </span><span class="nl">Blocks</span><span class="p">:</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">          </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="o">[</span><span class="n">0</span><span class="o">]</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Block</span><span class="w"> </span><span class="mi">3</span><span class="w">     </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="o">[</span><span class="n">1</span><span class="o">]</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Block</span><span class="w"> </span><span class="mi">10</span><span class="w">    </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">3</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">10</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">15</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">21</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="p">...</span><span class="w">     </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="o">[</span><span class="n">2</span><span class="o">]</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Block</span><span class="w"> </span><span class="mi">15</span><span class="w">    </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span><span class="k">Data</span><span class="w"> </span><span class="err">â”‚</span><span class="k">Data</span><span class="w"> </span><span class="err">â”‚</span><span class="k">Data</span><span class="w"> </span><span class="err">â”‚</span><span class="k">Data</span><span class="w"> </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="o">[</span><span class="n">3</span><span class="o">]</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Block</span><span class="w"> </span><span class="mi">21</span><span class="w">    </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="o">[</span><span class="n">4</span><span class="o">]</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="k">end</span><span class="p">)</span><span class="w">    </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="p">...</span><span class="w">               </span><span class="err">â”‚</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nl">Advantages</span><span class="p">:</span><span class="w">                                                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Direct</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="nl">possible</span><span class="p">:</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">index</span><span class="o">[</span><span class="n">n</span><span class="o">]</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="k">No</span><span class="w"> </span><span class="k">external</span><span class="w"> </span><span class="n">fragmentation</span><span class="w">                                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nl">Disadvantages</span><span class="p">:</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="k">Index</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">overhead</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Inefficient</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">small</span><span class="w"> </span><span class="n">files</span><span class="w">                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nl">Extensions</span><span class="p">:</span><span class="w">                                                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Linked</span><span class="w"> </span><span class="k">index</span><span class="err">:</span><span class="w"> </span><span class="n">link</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="n">blocks</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Multi</span><span class="o">-</span><span class="k">level</span><span class="w"> </span><span class="k">index</span><span class="err">:</span><span class="w"> </span><span class="n">tree</span><span class="w"> </span><span class="k">structure</span><span class="w"> </span><span class="p">(</span><span class="n">Unix</span><span class="w"> </span><span class="n">inode</span><span class="p">)</span><span class="w">                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Combined</span><span class="w"> </span><span class="nl">approach</span><span class="p">:</span><span class="w"> </span><span class="n">direct</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">indirect</span><span class="w"> </span><span class="n">pointers</span><span class="w"> </span><span class="p">(</span><span class="n">Unix</span><span class="w"> </span><span class="n">inode</span><span class="p">)</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="3-inode-structure">3. inode Structure<a class="header-link" href="#3-inode-structure" title="Permanent link">&para;</a></h2>
<h3 id="31-unixlinux-inode">3.1 Unix/Linux inode<a class="header-link" href="#31-unixlinux-inode" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                        </span><span class="nx">inode</span><span class="w"> </span><span class="nx">Structure</span><span class="w"> </span><span class="p">(</span><span class="nx">Unix</span><span class="o">/</span><span class="nx">ext4</span><span class="p">)</span><span class="w">                       </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                         </span><span class="nx">inode</span><span class="w">                                    </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">mode</span><span class="w"> </span><span class="p">(</span><span class="nx">permissions</span><span class="p">,</span><span class="w"> </span><span class="k">type</span><span class="p">)</span><span class="w">                                       </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">uid</span><span class="w"> </span><span class="p">(</span><span class="nx">owner</span><span class="p">)</span><span class="w">                                                    </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">gid</span><span class="w"> </span><span class="p">(</span><span class="nx">group</span><span class="p">)</span><span class="w">                                                    </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">size</span><span class="w"> </span><span class="p">(</span><span class="nx">file</span><span class="w"> </span><span class="nx">size</span><span class="p">)</span><span class="w">                                               </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">atime</span><span class="w"> </span><span class="p">(</span><span class="nx">access</span><span class="w"> </span><span class="nx">time</span><span class="p">)</span><span class="w">                                            </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">mtime</span><span class="w"> </span><span class="p">(</span><span class="nx">modification</span><span class="w"> </span><span class="nx">time</span><span class="p">)</span><span class="w">                                      </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">ctime</span><span class="w"> </span><span class="p">(</span><span class="nx">status</span><span class="w"> </span><span class="nx">change</span><span class="w"> </span><span class="nx">time</span><span class="p">)</span><span class="w">                                     </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">link</span><span class="w"> </span><span class="nx">count</span><span class="w"> </span><span class="p">(</span><span class="nx">hard</span><span class="w"> </span><span class="nx">link</span><span class="w"> </span><span class="nx">count</span><span class="p">)</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Block</span><span class="w"> </span><span class="nx">pointers</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="w"> </span><span class="nx">location</span><span class="p">)</span><span class="w">                                 </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Direct</span><span class="w"> </span><span class="nx">pointers</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">11</span><span class="p">]</span><span class="w">  </span><span class="err">â†’</span><span class="w"> </span><span class="nx">Data</span><span class="w"> </span><span class="nx">blocks</span><span class="w"> </span><span class="p">(</span><span class="mi">12</span><span class="w"> </span><span class="nx">blocks</span><span class="p">)</span><span class="w">      </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Single</span><span class="w"> </span><span class="nx">indirect</span><span class="w"> </span><span class="p">[</span><span class="mi">12</span><span class="p">]</span><span class="w">    </span><span class="err">â†’</span><span class="w"> </span><span class="nx">Index</span><span class="w"> </span><span class="nx">block</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="nx">Data</span><span class="w">           </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Double</span><span class="w"> </span><span class="nx">indirect</span><span class="w"> </span><span class="p">[</span><span class="mi">13</span><span class="p">]</span><span class="w">    </span><span class="err">â†’</span><span class="w"> </span><span class="nx">Index</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="nx">Index</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="nx">Data</span><span class="w">         </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Triple</span><span class="w"> </span><span class="nx">indirect</span><span class="w"> </span><span class="p">[</span><span class="mi">14</span><span class="p">]</span><span class="w">    </span><span class="err">â†’</span><span class="w"> </span><span class="nx">Index</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="nx">Index</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="nx">Index</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="nx">Data</span><span class="w"> </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">    </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="32-directindirect-block-pointers">3.2 Direct/Indirect Block Pointers<a class="header-link" href="#32-directindirect-block-pointers" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                  </span><span class="n">inode</span><span class="w"> </span><span class="n">Block</span><span class="w"> </span><span class="n">Pointer</span><span class="w"> </span><span class="n">Structure</span><span class="w">                           </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">Block</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="n">KB</span><span class="p">,</span><span class="w"> </span><span class="n">Pointer</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">bytes</span><span class="w">                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">Pointers</span><span class="o">/</span><span class="n">block</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="n">KB</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">4</span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1024</span><span class="w">                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">inode</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Direct</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w">    </span><span class="err">â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶</span><span class="w"> </span><span class="p">[</span><span class="n">Data</span><span class="w"> </span><span class="n">block</span><span class="p">]</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Direct</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w">    </span><span class="err">â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶</span><span class="w"> </span><span class="p">[</span><span class="n">Data</span><span class="w"> </span><span class="n">block</span><span class="p">]</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="p">...</span><span class="w">           </span><span class="err">â”‚</span><span class="w">                                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Direct</span><span class="w"> </span><span class="p">[</span><span class="mi">11</span><span class="p">]</span><span class="w">   </span><span class="err">â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶</span><span class="w"> </span><span class="p">[</span><span class="n">Data</span><span class="w"> </span><span class="n">block</span><span class="p">]</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">                                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Single</span><span class="w"> </span><span class="n">indirect</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span><span class="err">â”‚â”€â”€â–¶â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">               </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="n">Index</span><span class="w"> </span><span class="n">block</span><span class="err">â”‚â”€â”€â–¶</span><span class="w"> </span><span class="p">[</span><span class="n">Data</span><span class="p">]</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">1024</span><span class="w">                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">               </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">                                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Double</span><span class="w"> </span><span class="n">indirect</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span><span class="err">â”‚â”€â”€â–¶â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">    </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">               </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="n">Index</span><span class="w"> </span><span class="n">block</span><span class="err">â”‚â”€â”€â–¶â”‚</span><span class="n">Index</span><span class="w"> </span><span class="n">block</span><span class="err">â”‚â”€â”€â–¶</span><span class="w"> </span><span class="p">[</span><span class="n">Data</span><span class="p">]</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">               </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">1024</span><span class="w">    </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">    </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">1024</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">               </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w">                                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Triple</span><span class="w"> </span><span class="n">indirect</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span><span class="err">â”‚â”€â”€â–¶</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="o">-</span><span class="n">level</span><span class="w"> </span><span class="n">index</span><span class="p">)</span><span class="w">                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">Maximum</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">calculation</span><span class="w"> </span><span class="p">(</span><span class="mi">4</span><span class="n">KB</span><span class="w"> </span><span class="n">blocks</span><span class="p">)</span><span class="o">:</span><span class="w">                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">Direct</span><span class="o">:</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">4</span><span class="n">KB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">48</span><span class="n">KB</span><span class="w">                                               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">Single</span><span class="w"> </span><span class="n">indirect</span><span class="o">:</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">4</span><span class="n">KB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="n">MB</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">Double</span><span class="w"> </span><span class="n">indirect</span><span class="o">:</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">4</span><span class="n">KB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="n">GB</span><span class="w">                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">Triple</span><span class="w"> </span><span class="n">indirect</span><span class="o">:</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">4</span><span class="n">KB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="n">TB</span><span class="w">                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="n">Total</span><span class="o">:</span><span class="w"> </span><span class="o">~</span><span class="mi">4</span><span class="n">TB</span><span class="w">                                                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="33-inode-size-calculation-example">3.3 inode Size Calculation Example<a class="header-link" href="#33-inode-size-calculation-example" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// Find nth block location of file</span>
<span class="cp">#define BLOCK_SIZE 4096</span>
<span class="cp">#define PTRS_PER_BLOCK (BLOCK_SIZE / sizeof(uint32_t))  </span><span class="c1">// 1024</span>

<span class="cp">#define DIRECT_BLOCKS 12</span>
<span class="cp">#define SINGLE_INDIRECT_LIMIT (DIRECT_BLOCKS + PTRS_PER_BLOCK)</span>
<span class="cp">#define DOUBLE_INDIRECT_LIMIT (SINGLE_INDIRECT_LIMIT + PTRS_PER_BLOCK * PTRS_PER_BLOCK)</span>

<span class="kt">uint32_t</span><span class="w"> </span><span class="nf">get_block_number</span><span class="p">(</span><span class="n">inode_t</span><span class="o">*</span><span class="w"> </span><span class="n">inode</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">logical_block</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">logical_block</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">DIRECT_BLOCKS</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Direct block</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">inode</span><span class="o">-&gt;</span><span class="n">direct</span><span class="p">[</span><span class="n">logical_block</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">logical_block</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">DIRECT_BLOCKS</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">logical_block</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">PTRS_PER_BLOCK</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Single indirect</span>
<span class="w">        </span><span class="kt">uint32_t</span><span class="o">*</span><span class="w"> </span><span class="n">indirect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">read_block</span><span class="p">(</span><span class="n">inode</span><span class="o">-&gt;</span><span class="n">single_indirect</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">indirect</span><span class="p">[</span><span class="n">logical_block</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">logical_block</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">PTRS_PER_BLOCK</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">logical_block</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">PTRS_PER_BLOCK</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">PTRS_PER_BLOCK</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Double indirect</span>
<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">index1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">logical_block</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">PTRS_PER_BLOCK</span><span class="p">;</span>
<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">index2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">logical_block</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">PTRS_PER_BLOCK</span><span class="p">;</span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="o">*</span><span class="w"> </span><span class="n">level1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">read_block</span><span class="p">(</span><span class="n">inode</span><span class="o">-&gt;</span><span class="n">double_indirect</span><span class="p">);</span>
<span class="w">        </span><span class="kt">uint32_t</span><span class="o">*</span><span class="w"> </span><span class="n">level2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">read_block</span><span class="p">(</span><span class="n">level1</span><span class="p">[</span><span class="n">index1</span><span class="p">]);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">level2</span><span class="p">[</span><span class="n">index2</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Triple indirect (omitted)</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h2 id="4-directory-implementation">4. Directory Implementation<a class="header-link" href="#4-directory-implementation" title="Permanent link">&para;</a></h2>
<h3 id="41-directory-entry-structure">4.1 Directory Entry Structure<a class="header-link" href="#41-directory-entry-structure" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                      </span><span class="nx">Directory</span><span class="w"> </span><span class="nx">Implementation</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">Linear</span><span class="w"> </span><span class="nx">List</span><span class="w"> </span><span class="p">(</span><span class="nx">simple</span><span class="w"> </span><span class="nx">implementation</span><span class="p">):</span><span class="w">                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Directory</span><span class="w"> </span><span class="nx">file</span><span class="w"> </span><span class="nx">content</span><span class="w">                                            </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">inode</span><span class="w"> </span><span class="nx">num</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Entry</span><span class="w"> </span><span class="nx">length</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Filename</span><span class="w">                             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">       </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">12</span><span class="w">         </span><span class="err">â”‚</span><span class="w"> </span><span class="p">.</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="mi">2</span><span class="w">       </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">12</span><span class="w">         </span><span class="err">â”‚</span><span class="w"> </span><span class="p">..</span><span class="w">                                  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">15</span><span class="w">       </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">16</span><span class="w">         </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">file1</span><span class="p">.</span><span class="nx">txt</span><span class="w">                           </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">23</span><span class="w">       </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">20</span><span class="w">         </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">documents</span><span class="w">                           </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">   </span><span class="mi">45</span><span class="w">       </span><span class="err">â”‚</span><span class="w">     </span><span class="mi">24</span><span class="w">         </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">long_filename</span><span class="p">.</span><span class="nx">doc</span><span class="w">                   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="nx">ext4</span><span class="w"> </span><span class="nx">directory</span><span class="w"> </span><span class="nx">entry</span><span class="w"> </span><span class="p">(</span><span class="nx">struct</span><span class="w"> </span><span class="nx">ext4_dir_entry_2</span><span class="p">):</span><span class="w">                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">inode</span><span class="w"> </span><span class="p">(</span><span class="mi">4</span><span class="w"> </span><span class="nx">bytes</span><span class="p">)</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="nx">inode</span><span class="w"> </span><span class="nx">number</span><span class="w">                        </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">rec_len</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="nx">bytes</span><span class="p">)</span><span class="w">         </span><span class="p">:</span><span class="w"> </span><span class="nx">total</span><span class="w"> </span><span class="nx">length</span><span class="w"> </span><span class="nx">of</span><span class="w"> </span><span class="nx">this</span><span class="w"> </span><span class="nx">entry</span><span class="w">          </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">name_len</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="nx">byte</span><span class="p">)</span><span class="w">         </span><span class="p">:</span><span class="w"> </span><span class="nx">filename</span><span class="w"> </span><span class="nx">length</span><span class="w">                     </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">file_type</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="nx">byte</span><span class="p">)</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class="nx">file</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="p">(</span><span class="nx">file</span><span class="o">/</span><span class="nx">dir</span><span class="o">/</span><span class="nx">link</span><span class="o">/</span><span class="nx">etc</span><span class="p">)</span><span class="w">       </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="p">(</span><span class="nx">variable</span><span class="p">)</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="nx">filename</span><span class="w">                            </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                          </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="42-hash-table-directory">4.2 Hash Table Directory<a class="header-link" href="#42-hash-table-directory" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">                     </span><span class="nv">Hash</span><span class="w"> </span><span class="nv">Table</span><span class="w"> </span><span class="nv">Directory</span><span class="w">                                 </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span><span class="nv">Filename</span><span class="w"> </span>â†’<span class="w"> </span><span class="nv">Hash</span><span class="w"> </span><span class="nv">function</span><span class="w"> </span>â†’<span class="w"> </span><span class="nv">Bucket</span><span class="w"> </span><span class="nv">index</span><span class="w">                               </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span><span class="nv">Hash</span><span class="w"> </span><span class="nv">Table</span><span class="w">                                                             </span>â”‚
â”‚<span class="w">   </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">                                                           </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w">    </span><span class="mi">0</span><span class="w">    </span>â”‚<span class="w"> </span>â†’<span class="w"> </span>[<span class="nv">readme</span>.<span class="nv">txt</span>,<span class="w"> </span><span class="nv">inode</span><span class="w"> </span><span class="mi">15</span>]<span class="w">                                 </span>â”‚
â”‚<span class="w">   </span>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<span class="w">                                                           </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w">    </span><span class="mi">1</span><span class="w">    </span>â”‚<span class="w"> </span>â†’<span class="w"> </span>[<span class="nv">config</span>.<span class="nv">json</span>,<span class="w"> </span><span class="nv">inode</span><span class="w"> </span><span class="mi">23</span>]<span class="w"> </span>â†’<span class="w"> </span>[<span class="nv">data</span>.<span class="nv">csv</span>,<span class="w"> </span><span class="nv">inode</span><span class="w"> </span><span class="mi">45</span>]<span class="w">         </span>â”‚
â”‚<span class="w">   </span>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<span class="w">                                                           </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w">    </span><span class="mi">2</span><span class="w">    </span>â”‚<span class="w"> </span>â†’<span class="w"> </span><span class="ss">(</span><span class="nv">empty</span><span class="ss">)</span><span class="w">                                                 </span>â”‚
â”‚<span class="w">   </span>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<span class="w">                                                           </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w">    </span><span class="mi">3</span><span class="w">    </span>â”‚<span class="w"> </span>â†’<span class="w"> </span>[<span class="nv">main</span>.<span class="nv">c</span>,<span class="w"> </span><span class="nv">inode</span><span class="w"> </span><span class="mi">67</span>]<span class="w"> </span>â†’<span class="w"> </span>[<span class="nv">test</span>.<span class="nv">c</span>,<span class="w"> </span><span class="nv">inode</span><span class="w"> </span><span class="mi">89</span>]<span class="w">                </span>â”‚
â”‚<span class="w">   </span>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<span class="w">                                                           </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w">   </span>...<span class="w">   </span>â”‚<span class="w">                                                           </span>â”‚
â”‚<span class="w">   </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">                                                           </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span><span class="nv">Advantages</span>:<span class="w">                                                            </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">O</span><span class="ss">(</span><span class="mi">1</span><span class="ss">)</span><span class="w"> </span><span class="nv">average</span><span class="w"> </span><span class="nv">search</span><span class="w"> </span><span class="ss">(</span><span class="nv">linear</span><span class="w"> </span><span class="nv">list</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">O</span><span class="ss">(</span><span class="nv">n</span><span class="ss">))</span><span class="w">                           </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">Effective</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">large</span><span class="w"> </span><span class="nv">directories</span><span class="w">                                     </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span><span class="nv">ext4</span><span class="err">&#39;s htree (HTree Index):                                           â”‚</span>
<span class="err">â”‚   - B-tree based hash directory                                         â”‚</span>
<span class="err">â”‚   - Fast search even with thousands of files                            â”‚</span>
<span class="err">â”‚                                                                          â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="5-file-system-examples">5. File System Examples<a class="header-link" href="#5-file-system-examples" title="Permanent link">&para;</a></h2>
<h3 id="51-fat32">5.1 FAT32<a class="header-link" href="#51-fat32" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          FAT32 Structure                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ Reserved â”‚   FAT   â”‚  FAT    â”‚       Data Region              â”‚   â”‚
â”‚   â”‚  Region  â”‚   1     â”‚   2     â”‚  (Clusters)                     â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚   Features:                                                              â”‚
â”‚   - Cluster size: 4KB ~ 32KB                                            â”‚
â”‚   - FAT entry: 32 bits (28 bits used)                                   â”‚
â”‚   - Max file size: 4GB - 1 (32-bit size field)                         â”‚
â”‚   - Max volume size: 2TB                                                â”‚
â”‚                                                                          â”‚
â”‚   Directory entry (32 bytes):                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚ Filename (8 bytes) + Extension (3 bytes) = 8.3 format        â”‚     â”‚
â”‚   â”‚ Attributes (1 byte): read-only, hidden, system, directory etcâ”‚     â”‚
â”‚   â”‚ Creation/modification/access times (10 bytes)                 â”‚     â”‚
â”‚   â”‚ Starting cluster number (4 bytes)                             â”‚     â”‚
â”‚   â”‚ File size (4 bytes)                                           â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                          â”‚
â”‚   VFAT: Long filename support (uses separate entries)                   â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="52-ext4">5.2 ext4<a class="header-link" href="#52-ext4" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">                          </span><span class="nv">ext4</span><span class="w"> </span><span class="nv">Key</span><span class="w"> </span><span class="nv">Features</span><span class="w">                               </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span><span class="mi">1</span>.<span class="w"> </span><span class="nv">Extents</span><span class="w">                                                             </span>â”‚
â”‚<span class="w">      </span><span class="nv">Represent</span><span class="w"> </span><span class="nv">consecutive</span><span class="w"> </span><span class="nv">blocks</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">single</span><span class="w"> </span><span class="nv">entry</span><span class="w"> </span>â†’<span class="w"> </span><span class="nv">Efficient</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">large</span><span class="w"> </span><span class="nv">files</span>â”‚
â”‚<span class="w">      </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">                   </span>â”‚
â”‚<span class="w">      </span>â”‚<span class="w"> </span><span class="nv">Starting</span><span class="w"> </span><span class="nv">block</span>:<span class="w"> </span><span class="mi">1000</span>,<span class="w"> </span><span class="nv">Length</span>:<span class="w"> </span><span class="mi">500</span><span class="w">            </span>â”‚<span class="w">                   </span>â”‚
â”‚<span class="w">      </span>â”‚<span class="w"> </span>â†’<span class="w"> </span><span class="nv">References</span><span class="w"> </span><span class="nv">blocks</span><span class="w"> </span><span class="mi">1000</span><span class="o">~</span><span class="mi">1499</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">once</span><span class="w">        </span>â”‚<span class="w">                   </span>â”‚
â”‚<span class="w">      </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">                   </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span><span class="mi">2</span>.<span class="w"> </span><span class="nv">Journaling</span><span class="w">                                                          </span>â”‚
â”‚<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="nv">Metadata</span><span class="w"> </span><span class="nv">journaling</span>:<span class="w"> </span><span class="nv">Default</span><span class="w"> </span><span class="nv">mode</span>,<span class="w"> </span><span class="nv">fast</span><span class="w">                          </span>â”‚
â”‚<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="nv">Data</span><span class="w"> </span><span class="nv">journaling</span>:<span class="w"> </span><span class="nv">Journals</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">too</span>,<span class="w"> </span><span class="nv">safe</span><span class="w">                         </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span><span class="mi">3</span>.<span class="w"> </span><span class="nv">Large</span><span class="w"> </span><span class="nv">Volume</span><span class="w"> </span><span class="nv">Support</span><span class="w">                                                </span>â”‚
â”‚<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="nv">Max</span><span class="w"> </span><span class="nv">file</span><span class="w"> </span><span class="nv">size</span>:<span class="w"> </span><span class="mi">16</span><span class="nv">TB</span><span class="w">                                              </span>â”‚
â”‚<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="nv">Max</span><span class="w"> </span><span class="nv">volume</span><span class="w"> </span><span class="nv">size</span>:<span class="w"> </span><span class="mi">1</span><span class="nv">EB</span><span class="w"> </span><span class="ss">(</span><span class="nv">Exabyte</span><span class="ss">)</span><span class="w">                                   </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span><span class="mi">4</span>.<span class="w"> </span><span class="nv">Other</span><span class="w"> </span><span class="nv">Features</span><span class="w">                                                      </span>â”‚
â”‚<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="nv">Delayed</span><span class="w"> </span><span class="nv">allocation</span>:<span class="w"> </span><span class="nv">Write</span><span class="w"> </span><span class="nv">optimization</span><span class="w">                            </span>â”‚
â”‚<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="nv">Multi</span><span class="o">-</span><span class="nv">block</span><span class="w"> </span><span class="nv">allocation</span>:<span class="w"> </span><span class="nv">Allocate</span><span class="w"> </span><span class="nv">multiple</span><span class="w"> </span><span class="nv">blocks</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">once</span><span class="w">         </span>â”‚
â”‚<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="nv">Directory</span><span class="w"> </span><span class="nv">htree</span>:<span class="w"> </span><span class="nv">Fast</span><span class="w"> </span><span class="nv">search</span><span class="w">                                      </span>â”‚
â”‚<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="nv">Online</span><span class="w"> </span><span class="nv">defragmentation</span><span class="w">                                            </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<hr />
<h2 id="6-journaling">6. Journaling<a class="header-link" href="#6-journaling" title="Permanent link">&para;</a></h2>
<h3 id="61-need-for-journaling">6.1 Need for Journaling<a class="header-link" href="#61-need-for-journaling" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Journaling Concept                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   Problem: File system inconsistency                                     â”‚
â”‚                                                                          â”‚
â”‚   File deletion process (without journaling):                            â”‚
â”‚   1. Remove entry from directory                                        â”‚
â”‚   2. Add inode to free list                    â† Crash here!            â”‚
â”‚   3. Add data blocks to free list                                       â”‚
â”‚                                                                          â”‚
â”‚   Problems after crash:                                                  â”‚
â”‚   - Deleted from directory                                              â”‚
â”‚   - But inode and blocks still marked &#39;in use&#39;                          â”‚
â”‚   - Space inaccessible + unrecoverable                                  â”‚
â”‚                                                                          â”‚
â”‚   Solution: Journaling                                                   â”‚
â”‚   Record to log (journal) before change â†’ Recover based on log after crashâ”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="62-journaling-operation">6.2 Journaling Operation<a class="header-link" href="#62-journaling-operation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">                       </span><span class="nv">Journaling</span><span class="w"> </span><span class="nv">Operation</span><span class="w">                               </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">   </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w">                       </span><span class="nv">Journal</span><span class="w"> </span><span class="nv">Area</span><span class="w">                               </span>â”‚<span class="w">   </span>â”‚
â”‚<span class="w">   </span>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<span class="w">   </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w"> </span><span class="nv">TxB</span><span class="w"> </span>â”‚<span class="w"> </span><span class="nv">Data</span><span class="w"> </span><span class="nv">blocks</span><span class="w"> </span>â”‚<span class="w"> </span><span class="nv">Metadata</span><span class="w"> </span>â”‚<span class="w"> </span><span class="nv">TxE</span><span class="w"> </span>â”‚<span class="w"> </span><span class="nv">TxB</span><span class="w"> </span>â”‚<span class="w"> </span>...<span class="w"> </span>â”‚<span class="w"> </span><span class="nv">TxE</span><span class="w"> </span>â”‚<span class="w"> </span>...<span class="w">     </span>â”‚<span class="w">   </span>â”‚
â”‚<span class="w">   </span>â””â”€â”€â”¬â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”¬â”€â”€â”˜<span class="w">                            </span>â”‚<span class="w">   </span>â”‚
â”‚<span class="w">      </span>â”‚<span class="w">                              </span>â”‚<span class="w">                                </span>â”‚<span class="w">   </span>â”‚
â”‚<span class="w">      </span>â”‚<span class="w">      </span><span class="nv">Transaction</span><span class="w"> </span><span class="mi">1</span><span class="w">           </span>â”‚<span class="w">      </span><span class="nv">Transaction</span><span class="w"> </span><span class="mi">2</span><span class="w">             </span>â”‚<span class="w">   </span>â”‚
â”‚<span class="w">      </span>â”‚<span class="w">                              </span>â”‚<span class="w">                                </span>â”‚<span class="w">   </span>â”‚
â”‚<span class="w">   </span><span class="nv">TxB</span>:<span class="w"> </span><span class="nv">Transaction</span><span class="w"> </span><span class="nv">Begin</span><span class="w">                                              </span>â”‚<span class="w">   </span>â”‚
â”‚<span class="w">   </span><span class="nv">TxE</span>:<span class="w"> </span><span class="nv">Transaction</span><span class="w"> </span><span class="k">End</span><span class="w"> </span><span class="ss">(</span><span class="nv">Commit</span><span class="ss">)</span><span class="w">                                       </span>â”‚<span class="w">   </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span><span class="nv">Write</span><span class="w"> </span><span class="nv">process</span>:<span class="w">                                                         </span>â”‚
â”‚<span class="w">   </span><span class="mi">1</span>.<span class="w"> </span><span class="nv">Record</span><span class="w"> </span><span class="nv">Transaction</span><span class="w"> </span><span class="nv">Begin</span><span class="w">                                            </span>â”‚
â”‚<span class="w">   </span><span class="mi">2</span>.<span class="w"> </span><span class="nv">Record</span><span class="w"> </span><span class="nv">blocks</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">changed</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">journal</span><span class="w">                             </span>â”‚
â”‚<span class="w">   </span><span class="mi">3</span>.<span class="w"> </span><span class="nv">Record</span><span class="w"> </span><span class="nv">Transaction</span><span class="w"> </span><span class="k">End</span><span class="w"> </span><span class="ss">(</span><span class="nv">commit</span><span class="ss">)</span><span class="w">                                     </span>â”‚
â”‚<span class="w">   </span><span class="mi">4</span>.<span class="w"> </span><span class="nv">Write</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">actual</span><span class="w"> </span><span class="nv">location</span><span class="w"> </span><span class="ss">(</span><span class="nv">Checkpoint</span><span class="ss">)</span><span class="w">                         </span>â”‚
â”‚<span class="w">   </span><span class="mi">5</span>.<span class="w"> </span><span class="nv">Remove</span><span class="w"> </span><span class="nv">transaction</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">journal</span><span class="w">                                     </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span><span class="nv">Recovery</span><span class="w"> </span><span class="nv">process</span><span class="w"> </span><span class="ss">(</span><span class="nv">at</span><span class="w"> </span><span class="nv">boot</span><span class="ss">)</span>:<span class="w">                                            </span>â”‚
â”‚<span class="w">   </span><span class="mi">1</span>.<span class="w"> </span><span class="nv">Examine</span><span class="w"> </span><span class="nv">journal</span><span class="w">                                                     </span>â”‚
â”‚<span class="w">   </span><span class="mi">2</span>.<span class="w"> </span><span class="nv">Completed</span><span class="w"> </span><span class="nv">transactions</span><span class="w"> </span><span class="ss">(</span><span class="nv">has</span><span class="w"> </span><span class="nv">TxE</span><span class="ss">)</span>:<span class="w"> </span><span class="nv">rewrite</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">actual</span><span class="w"> </span><span class="nv">location</span><span class="w">       </span>â”‚
â”‚<span class="w">   </span><span class="mi">3</span>.<span class="w"> </span><span class="nv">Incomplete</span><span class="w"> </span><span class="nv">transactions</span><span class="w"> </span><span class="ss">(</span><span class="nv">no</span><span class="w"> </span><span class="nv">TxE</span><span class="ss">)</span>:<span class="w"> </span><span class="nv">ignore</span><span class="w"> </span><span class="ss">(</span><span class="nv">rollback</span><span class="ss">)</span><span class="w">                </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="63-journal-modes">6.3 Journal Modes<a class="header-link" href="#63-journal-modes" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">                        </span><span class="nv">ext4</span><span class="w"> </span><span class="nv">Journal</span><span class="w"> </span><span class="nv">Modes</span><span class="w">                                </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">   </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">    </span><span class="nv">Mode</span><span class="w">       </span>â”‚<span class="w">                     </span><span class="nv">Description</span><span class="w">                  </span>â”‚<span class="w">   </span>â”‚
â”‚<span class="w">  </span>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<span class="w">   </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w"> </span><span class="nv">journal</span><span class="w">       </span>â”‚<span class="w"> </span><span class="nv">Journal</span><span class="w"> </span><span class="nv">both</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">metadata</span><span class="w">                     </span>â”‚<span class="w">   </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">               </span>â”‚<span class="w"> </span><span class="nv">Safest</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">slowest</span><span class="w"> </span><span class="ss">(</span><span class="mi">2</span><span class="nv">x</span><span class="w"> </span><span class="nv">writes</span><span class="ss">)</span><span class="w">                   </span>â”‚<span class="w">   </span>â”‚
â”‚<span class="w">  </span>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<span class="w">   </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w"> </span><span class="nv">ordered</span><span class="w">       </span>â”‚<span class="w"> </span><span class="nv">Journal</span><span class="w"> </span><span class="nv">metadata</span><span class="w"> </span><span class="nv">only</span><span class="w">                            </span>â”‚<span class="w">   </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w"> </span><span class="ss">(</span><span class="nv">default</span><span class="ss">)</span><span class="w">     </span>â”‚<span class="w"> </span><span class="nv">Write</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">first</span>,<span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="nv">journal</span><span class="w"> </span><span class="nv">metadata</span><span class="w">          </span>â”‚<span class="w">   </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">               </span>â”‚<span class="w"> </span><span class="nv">Guarantees</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">consistency</span>,<span class="w"> </span><span class="nv">reasonable</span><span class="w"> </span><span class="nv">performance</span>â”‚<span class="w">  </span>â”‚
â”‚<span class="w">  </span>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<span class="w">   </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w"> </span><span class="nv">writeback</span><span class="w">     </span>â”‚<span class="w"> </span><span class="nv">Journal</span><span class="w"> </span><span class="nv">metadata</span><span class="w"> </span><span class="nv">only</span><span class="w">                            </span>â”‚<span class="w">   </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">               </span>â”‚<span class="w"> </span><span class="nv">No</span><span class="w"> </span><span class="nv">guarantee</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">write</span><span class="w"> </span><span class="nv">order</span><span class="w">                 </span>â”‚<span class="w">   </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">               </span>â”‚<span class="w"> </span><span class="nv">Fastest</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">lose</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">crash</span><span class="w">               </span>â”‚<span class="w">   </span>â”‚
â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">   </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span>#<span class="w"> </span><span class="nv">Specify</span><span class="w"> </span><span class="nv">option</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">mount</span><span class="w">                                             </span>â”‚
â”‚<span class="w">   </span>$<span class="w"> </span><span class="nv">mount</span><span class="w"> </span><span class="o">-</span><span class="nv">o</span><span class="w"> </span><span class="nv">data</span><span class="o">=</span><span class="nv">ordered</span><span class="w"> </span><span class="o">/</span><span class="nv">dev</span><span class="o">/</span><span class="nv">sda1</span><span class="w"> </span><span class="o">/</span><span class="nv">mnt</span><span class="w">                                </span>â”‚
â”‚<span class="w">   </span>$<span class="w"> </span><span class="nv">mount</span><span class="w"> </span><span class="o">-</span><span class="nv">o</span><span class="w"> </span><span class="nv">data</span><span class="o">=</span><span class="nv">journal</span><span class="w"> </span><span class="o">/</span><span class="nv">dev</span><span class="o">/</span><span class="nv">sda1</span><span class="w"> </span><span class="o">/</span><span class="nv">mnt</span><span class="w">                                </span>â”‚
â”‚<span class="w">   </span>$<span class="w"> </span><span class="nv">mount</span><span class="w"> </span><span class="o">-</span><span class="nv">o</span><span class="w"> </span><span class="nv">data</span><span class="o">=</span><span class="nv">writeback</span><span class="w"> </span><span class="o">/</span><span class="nv">dev</span><span class="o">/</span><span class="nv">sda1</span><span class="w"> </span><span class="o">/</span><span class="nv">mnt</span><span class="w">                              </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<hr />
<h2 id="7-raid">7. RAID<a class="header-link" href="#7-raid" title="Permanent link">&para;</a></h2>
<h3 id="71-raid-overview">7.1 RAID Overview<a class="header-link" href="#71-raid-overview" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          RAID Overview                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   RAID = Redundant Array of Independent Disks                           â”‚
â”‚                                                                          â”‚
â”‚   Goals:                                                                 â”‚
â”‚   1. Performance improvement (Striping - data distribution)              â”‚
â”‚   2. Reliability improvement (Mirroring/Parity - redundant storage)     â”‚
â”‚   3. Large capacity (combine multiple disks)                             â”‚
â”‚                                                                          â”‚
â”‚   Implementation methods:                                                â”‚
â”‚   - Hardware RAID: RAID controller card                                  â”‚
â”‚   - Software RAID: Implemented in OS (mdadm)                            â”‚
â”‚   - Hybrid: Motherboard built-in RAID                                   â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="72-raid-levels">7.2 RAID Levels<a class="header-link" href="#72-raid-levels" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">                       </span><span class="nv">RAID</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ss">(</span><span class="nv">Striping</span><span class="ss">)</span><span class="w">                                  </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">                 </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w">               </span><span class="nv">Data</span>:<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">D</span><span class="w"> </span><span class="nv">E</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">G</span><span class="w"> </span><span class="nv">H</span><span class="w">               </span>â”‚<span class="w">                 </span>â”‚
â”‚<span class="w">   </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">                 </span>â”‚
â”‚<span class="w">                           </span>â”‚<span class="w">                                              </span>â”‚
â”‚<span class="w">           </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">                             </span>â”‚
â”‚<span class="w">           </span>â–¼<span class="w">               </span>â–¼<span class="w">               </span>â–¼<span class="w">                             </span>â”‚
â”‚<span class="w">      </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">     </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">     </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">                       </span>â”‚
â”‚<span class="w">      </span>â”‚<span class="w"> </span><span class="nv">Disk</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span>â”‚<span class="w">     </span>â”‚<span class="w"> </span><span class="nv">Disk</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span>â”‚<span class="w">     </span>â”‚<span class="w"> </span><span class="nv">Disk</span><span class="w"> </span><span class="mi">2</span><span class="w">  </span>â”‚<span class="w">                       </span>â”‚
â”‚<span class="w">      </span>â”‚<span class="w">  </span><span class="nv">A</span><span class="w"> </span><span class="nv">D</span><span class="w"> </span><span class="nv">G</span><span class="w">  </span>â”‚<span class="w">     </span>â”‚<span class="w">  </span><span class="nv">B</span><span class="w"> </span><span class="nv">E</span><span class="w"> </span><span class="nv">H</span><span class="w">  </span>â”‚<span class="w">     </span>â”‚<span class="w">  </span><span class="nv">C</span><span class="w"> </span><span class="nv">F</span><span class="w">    </span>â”‚<span class="w">                       </span>â”‚
â”‚<span class="w">      </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">     </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">     </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">                       </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span><span class="nv">Features</span>:<span class="w">                                                              </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">Data</span><span class="w"> </span><span class="nv">distributed</span><span class="w"> </span><span class="nv">across</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">disks</span><span class="w"> </span><span class="ss">(</span><span class="nv">striping</span><span class="ss">)</span><span class="w">                         </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">Read</span><span class="o">/</span><span class="nv">write</span><span class="w"> </span><span class="nv">speed</span>:<span class="w"> </span><span class="nv">n</span>Ã—<span class="w"> </span><span class="nv">improvement</span><span class="w">                                    </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">Capacity</span>:<span class="w"> </span><span class="nv">disk</span><span class="w"> </span><span class="nv">count</span><span class="w"> </span>Ã—<span class="w"> </span><span class="nv">single</span><span class="w"> </span><span class="nv">capacity</span><span class="w">                               </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">No</span><span class="w"> </span><span class="nv">redundancy</span>:<span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">disk</span><span class="w"> </span><span class="nv">failure</span><span class="w"> </span>â†’<span class="w"> </span><span class="nv">total</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">loss</span><span class="w">                   </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">Use</span><span class="w"> </span><span class="nv">case</span>:<span class="w"> </span><span class="nv">Performance</span><span class="w"> </span><span class="nv">critical</span>,<span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">loss</span><span class="w"> </span><span class="nv">acceptable</span><span class="w">                 </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">                       </span><span class="nv">RAID</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="ss">(</span><span class="nv">Mirroring</span><span class="ss">)</span><span class="w">                                 </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">                 </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w">               </span><span class="nv">Data</span>:<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">D</span><span class="w">                        </span>â”‚<span class="w">                 </span>â”‚
â”‚<span class="w">   </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">                 </span>â”‚
â”‚<span class="w">                           </span>â”‚<span class="w">                                              </span>â”‚
â”‚<span class="w">           </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">                             </span>â”‚
â”‚<span class="w">           </span>â–¼<span class="w">                               </span>â–¼<span class="w">                             </span>â”‚
â”‚<span class="w">      </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">                     </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">                       </span>â”‚
â”‚<span class="w">      </span>â”‚<span class="w"> </span><span class="nv">Disk</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span>â”‚<span class="w">                     </span>â”‚<span class="w"> </span><span class="nv">Disk</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span>â”‚<span class="w">                       </span>â”‚
â”‚<span class="w">      </span>â”‚<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">D</span><span class="w"> </span>â”‚<span class="w"> </span>â—€â”€â”€<span class="w"> </span><span class="nv">Identical</span><span class="w"> </span>â”€â”€â–¶<span class="w">  </span>â”‚<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">D</span><span class="w"> </span>â”‚<span class="w">                       </span>â”‚
â”‚<span class="w">      </span>â”‚<span class="ss">(</span><span class="nv">Original</span><span class="ss">)</span>â”‚<span class="w">                    </span>â”‚<span class="w"> </span><span class="ss">(</span><span class="nv">Mirror</span><span class="ss">)</span>â”‚<span class="w">                       </span>â”‚
â”‚<span class="w">      </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">                     </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">                       </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span><span class="nv">Features</span>:<span class="w">                                                              </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">Perfect</span><span class="w"> </span><span class="nv">copy</span><span class="w"> </span><span class="ss">(</span><span class="nv">mirroring</span><span class="ss">)</span><span class="w">                                            </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">Read</span><span class="w"> </span><span class="nv">speed</span>:<span class="w"> </span><span class="mi">2</span>Ã—<span class="w"> </span><span class="ss">(</span><span class="nv">parallel</span><span class="w"> </span><span class="nv">read</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">both</span><span class="w"> </span><span class="nv">disks</span><span class="ss">)</span><span class="w">                      </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">Write</span><span class="w"> </span><span class="nv">speed</span>:<span class="w"> </span><span class="nv">Same</span><span class="w"> </span><span class="ss">(</span><span class="nv">must</span><span class="w"> </span><span class="nv">write</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">both</span><span class="ss">)</span><span class="w">                              </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">Capacity</span>:<span class="w"> </span><span class="nv">Single</span><span class="w"> </span><span class="nv">disk</span><span class="w"> </span><span class="nv">capacity</span><span class="w"> </span><span class="ss">(</span><span class="mi">50</span><span class="o">%</span><span class="w"> </span><span class="nv">efficiency</span><span class="ss">)</span><span class="w">                     </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">One</span><span class="w"> </span><span class="nv">disk</span><span class="w"> </span><span class="nv">failure</span><span class="w"> </span><span class="nv">preserves</span><span class="w"> </span><span class="nv">data</span><span class="w">                                     </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">Use</span><span class="w"> </span><span class="nv">case</span>:<span class="w"> </span><span class="nv">Critical</span><span class="w"> </span><span class="nv">data</span>,<span class="w"> </span><span class="nv">system</span><span class="w"> </span><span class="nv">drives</span><span class="w">                              </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">                  </span><span class="nv">RAID</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="ss">(</span><span class="nv">Striping</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">Parity</span><span class="ss">)</span><span class="w">                           </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">             </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w">  </span><span class="nv">Disk</span><span class="w"> </span><span class="mi">0</span><span class="w">     </span>â”‚<span class="w">  </span><span class="nv">Disk</span><span class="w"> </span><span class="mi">1</span><span class="w">     </span>â”‚<span class="w">  </span><span class="nv">Disk</span><span class="w"> </span><span class="mi">2</span><span class="w">     </span>â”‚<span class="w">  </span><span class="nv">Disk</span><span class="w"> </span><span class="mi">3</span><span class="w">     </span>â”‚<span class="w">             </span>â”‚
â”‚<span class="w">   </span>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<span class="w">             </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w">     </span><span class="nv">A1</span><span class="w">      </span>â”‚<span class="w">     </span><span class="nv">A2</span><span class="w">      </span>â”‚<span class="w">     </span><span class="nv">A3</span><span class="w">      </span>â”‚<span class="w">   </span><span class="nv">Ap</span><span class="w"> </span><span class="ss">(</span><span class="nv">parity</span><span class="ss">)</span>â”‚<span class="w">            </span>â”‚
â”‚<span class="w">   </span>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<span class="w">             </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w">     </span><span class="nv">B1</span><span class="w">      </span>â”‚<span class="w">     </span><span class="nv">B2</span><span class="w">      </span>â”‚<span class="w">  </span><span class="nv">Bp</span><span class="w"> </span><span class="ss">(</span><span class="nv">parity</span><span class="ss">)</span>â”‚<span class="w">     </span><span class="nv">B3</span><span class="w">      </span>â”‚<span class="w">             </span>â”‚
â”‚<span class="w">   </span>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<span class="w">             </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w">     </span><span class="nv">C1</span><span class="w">      </span>â”‚<span class="w">  </span><span class="nv">Cp</span><span class="w"> </span><span class="ss">(</span><span class="nv">parity</span><span class="ss">)</span>â”‚<span class="w">     </span><span class="nv">C2</span><span class="w">      </span>â”‚<span class="w">     </span><span class="nv">C3</span><span class="w">      </span>â”‚<span class="w">             </span>â”‚
â”‚<span class="w">   </span>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<span class="w">             </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w">  </span><span class="nv">Dp</span><span class="w"> </span><span class="ss">(</span><span class="nv">parity</span><span class="ss">)</span>â”‚<span class="w">     </span><span class="nv">D1</span><span class="w">      </span>â”‚<span class="w">     </span><span class="nv">D2</span><span class="w">      </span>â”‚<span class="w">     </span><span class="nv">D3</span><span class="w">      </span>â”‚<span class="w">             </span>â”‚
â”‚<span class="w">   </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">             </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span><span class="nv">Parity</span><span class="w"> </span><span class="nv">calculation</span>:<span class="w"> </span><span class="nv">Ap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">A1</span><span class="w"> </span><span class="nv">XOR</span><span class="w"> </span><span class="nv">A2</span><span class="w"> </span><span class="nv">XOR</span><span class="w"> </span><span class="nv">A3</span><span class="w">                             </span>â”‚
â”‚<span class="w">   </span><span class="nv">Recovery</span>:<span class="w"> </span><span class="nv">A1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">Ap</span><span class="w"> </span><span class="nv">XOR</span><span class="w"> </span><span class="nv">A2</span><span class="w"> </span><span class="nv">XOR</span><span class="w"> </span><span class="nv">A3</span><span class="w"> </span><span class="ss">(</span><span class="k">if</span><span class="w"> </span><span class="nv">A1</span><span class="w"> </span><span class="nv">lost</span><span class="ss">)</span><span class="w">                          </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span><span class="nv">Features</span>:<span class="w">                                                              </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">Parity</span><span class="w"> </span><span class="nv">distributed</span><span class="w"> </span><span class="ss">(</span><span class="nv">RAID</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="nv">uses</span><span class="w"> </span><span class="nv">dedicated</span><span class="w"> </span><span class="nv">disk</span><span class="ss">)</span><span class="w">                     </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">Capacity</span>:<span class="w"> </span><span class="ss">(</span><span class="nv">n</span><span class="o">-</span><span class="mi">1</span><span class="ss">)</span><span class="w"> </span>Ã—<span class="w"> </span><span class="nv">single</span><span class="w"> </span><span class="nv">capacity</span><span class="w">                                   </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">Tolerates</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nv">disk</span><span class="w"> </span><span class="nv">failure</span><span class="w">                                            </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">Improved</span><span class="w"> </span><span class="nv">read</span><span class="w"> </span><span class="nv">speed</span>,<span class="w"> </span><span class="nv">write</span><span class="w"> </span><span class="nv">slightly</span><span class="w"> </span><span class="nv">slower</span><span class="w"> </span><span class="ss">(</span><span class="nv">parity</span><span class="w"> </span><span class="nv">calculation</span><span class="ss">)</span><span class="w">     </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">Use</span><span class="w"> </span><span class="nv">case</span>:<span class="w"> </span><span class="nv">Most</span><span class="w"> </span><span class="nv">servers</span><span class="w">                                              </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">                  </span><span class="nv">RAID</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="ss">(</span><span class="nv">Dual</span><span class="w"> </span><span class="nv">Parity</span><span class="ss">)</span><span class="w">                                    </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">             </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w">  </span><span class="nv">Disk</span><span class="w"> </span><span class="mi">0</span><span class="w">     </span>â”‚<span class="w">  </span><span class="nv">Disk</span><span class="w"> </span><span class="mi">1</span><span class="w">     </span>â”‚<span class="w">  </span><span class="nv">Disk</span><span class="w"> </span><span class="mi">2</span><span class="w">     </span>â”‚<span class="w">  </span><span class="nv">Disk</span><span class="w"> </span><span class="mi">3</span><span class="w">     </span>â”‚<span class="w">             </span>â”‚
â”‚<span class="w">   </span>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<span class="w">             </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w">     </span><span class="nv">A1</span><span class="w">      </span>â”‚<span class="w">     </span><span class="nv">A2</span><span class="w">      </span>â”‚<span class="w">   </span><span class="nv">Ap</span><span class="w"> </span><span class="ss">(</span><span class="nv">P</span><span class="ss">)</span><span class="w">    </span>â”‚<span class="w">   </span><span class="nv">Aq</span><span class="w"> </span><span class="ss">(</span><span class="nv">Q</span><span class="ss">)</span><span class="w">    </span>â”‚<span class="w">             </span>â”‚
â”‚<span class="w">   </span>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<span class="w">             </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w">     </span><span class="nv">B1</span><span class="w">      </span>â”‚<span class="w">   </span><span class="nv">Bp</span><span class="w"> </span><span class="ss">(</span><span class="nv">P</span><span class="ss">)</span><span class="w">    </span>â”‚<span class="w">   </span><span class="nv">Bq</span><span class="w"> </span><span class="ss">(</span><span class="nv">Q</span><span class="ss">)</span><span class="w">    </span>â”‚<span class="w">     </span><span class="nv">B2</span><span class="w">      </span>â”‚<span class="w">             </span>â”‚
â”‚<span class="w">   </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">             </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span><span class="nv">Features</span>:<span class="w">                                                              </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nv">parities</span><span class="w"> </span><span class="ss">(</span><span class="nv">P</span>,<span class="w"> </span><span class="nv">Q</span><span class="ss">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">different</span><span class="w"> </span><span class="nv">algorithms</span><span class="w">                            </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">Tolerates</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nv">simultaneous</span><span class="w"> </span><span class="nv">disk</span><span class="w"> </span><span class="nv">failures</span><span class="w">                              </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">Capacity</span>:<span class="w"> </span><span class="ss">(</span><span class="nv">n</span><span class="o">-</span><span class="mi">2</span><span class="ss">)</span><span class="w"> </span>Ã—<span class="w"> </span><span class="nv">single</span><span class="w"> </span><span class="nv">capacity</span><span class="w">                                   </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">Requires</span><span class="w"> </span><span class="nv">minimum</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="nv">disks</span><span class="w">                                            </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">Safer</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="nv">RAID</span><span class="w"> </span><span class="mi">5</span>,<span class="w"> </span><span class="nv">lower</span><span class="w"> </span><span class="nv">write</span><span class="w"> </span><span class="nv">performance</span><span class="w">                          </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">                     </span><span class="nv">RAID</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="ss">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">0</span>,<span class="w"> </span><span class="nv">Mirror</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">Stripe</span><span class="ss">)</span><span class="w">                       </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">                          </span><span class="nv">Data</span>:<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">D</span><span class="w">                                  </span>â”‚
â”‚<span class="w">                               </span>â”‚<span class="w">                                         </span>â”‚
â”‚<span class="w">               </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">                        </span>â”‚
â”‚<span class="w">               </span>â–¼<span class="w">                               </span>â–¼<span class="w">                        </span>â”‚
â”‚<span class="w">        </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">                 </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">                </span>â”‚
â”‚<span class="w">        </span>â”‚<span class="w">  </span><span class="nv">Stripe</span><span class="w"> </span><span class="mi">0</span><span class="w">   </span>â”‚<span class="w">                 </span>â”‚<span class="w">  </span><span class="nv">Stripe</span><span class="w"> </span><span class="mi">1</span><span class="w">   </span>â”‚<span class="w">                </span>â”‚
â”‚<span class="w">        </span>â”‚<span class="w">     </span><span class="nv">A</span><span class="w"> </span><span class="nv">C</span><span class="w">     </span>â”‚<span class="w">                 </span>â”‚<span class="w">     </span><span class="nv">B</span><span class="w"> </span><span class="nv">D</span><span class="w">     </span>â”‚<span class="w">                </span>â”‚
â”‚<span class="w">        </span>â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜<span class="w">                 </span>â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜<span class="w">                </span>â”‚
â”‚<span class="w">               </span>â”‚<span class="w">                               </span>â”‚<span class="w">                        </span>â”‚
â”‚<span class="w">        </span>â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”<span class="w">                 </span>â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”<span class="w">                </span>â”‚
â”‚<span class="w">        </span>â–¼<span class="w">             </span>â–¼<span class="w">                 </span>â–¼<span class="w">             </span>â–¼<span class="w">                </span>â”‚
â”‚<span class="w">   </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">   </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">       </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">   </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">          </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w"> </span><span class="nv">Disk</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span>â”‚<span class="w">   </span>â”‚<span class="w"> </span><span class="nv">Disk</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span>â”‚<span class="w">       </span>â”‚<span class="w"> </span><span class="nv">Disk</span><span class="w"> </span><span class="mi">2</span><span class="w">  </span>â”‚<span class="w">   </span>â”‚<span class="w"> </span><span class="nv">Disk</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span>â”‚<span class="w">          </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w">   </span><span class="nv">A</span><span class="w"> </span><span class="nv">C</span><span class="w">   </span>â”‚<span class="w">   </span>â”‚<span class="w">   </span><span class="nv">A</span><span class="w"> </span><span class="nv">C</span><span class="w">   </span>â”‚<span class="w">       </span>â”‚<span class="w">   </span><span class="nv">B</span><span class="w"> </span><span class="nv">D</span><span class="w">   </span>â”‚<span class="w">   </span>â”‚<span class="w">   </span><span class="nv">B</span><span class="w"> </span><span class="nv">D</span><span class="w">   </span>â”‚<span class="w">          </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="ss">(</span><span class="nv">Original</span><span class="ss">)</span>â”‚<span class="w">   </span>â”‚<span class="w"> </span><span class="ss">(</span><span class="nv">Mirror</span><span class="ss">)</span>â”‚<span class="w">       </span>â”‚<span class="ss">(</span><span class="nv">Original</span><span class="ss">)</span>â”‚<span class="w">   </span>â”‚<span class="w"> </span><span class="ss">(</span><span class="nv">Mirror</span><span class="ss">)</span>â”‚<span class="w">          </span>â”‚
â”‚<span class="w">   </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">   </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">       </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">   </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">          </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â”‚<span class="w">   </span><span class="nv">Features</span>:<span class="w">                                                              </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">Combines</span><span class="w"> </span><span class="nv">RAID</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="ss">(</span><span class="nv">mirror</span><span class="ss">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">RAID</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ss">(</span><span class="nv">stripe</span><span class="ss">)</span><span class="w">                          </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">Performance</span>:<span class="w"> </span><span class="nv">Close</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">RAID</span><span class="w"> </span><span class="mi">0</span><span class="w">                                        </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">Reliability</span>:<span class="w"> </span><span class="nv">Close</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">RAID</span><span class="w"> </span><span class="mi">1</span><span class="w">                                        </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">Capacity</span>:<span class="w"> </span><span class="mi">50</span><span class="o">%</span><span class="w"> </span><span class="nv">efficiency</span><span class="w">                                            </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">Tolerates</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nv">disk</span><span class="w"> </span><span class="nv">per</span><span class="w"> </span><span class="nv">mirror</span><span class="w"> </span><span class="nv">pair</span><span class="w"> </span><span class="ss">(</span><span class="nv">up</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nv">disks</span><span class="ss">)</span><span class="w">                   </span>â”‚
â”‚<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="nv">Use</span><span class="w"> </span><span class="nv">case</span>:<span class="w"> </span><span class="nv">High</span><span class="w"> </span><span class="nv">performance</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">high</span><span class="w"> </span><span class="nv">reliability</span><span class="w"> </span><span class="nv">needed</span><span class="w">                </span>â”‚
â”‚<span class="w">                                                                          </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="73-raid-level-comparison">7.3 RAID Level Comparison<a class="header-link" href="#73-raid-level-comparison" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           RAID Level Comparison                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RAID    â”‚ Min      â”‚ Capacity â”‚ Read     â”‚ Write    â”‚ Failure Tolerance       â”‚
â”‚  Level   â”‚ Disks    â”‚ Efficiencyâ”‚ Speed    â”‚ Speed    â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RAID 0  â”‚    2     â”‚  100%    â”‚  nÃ—      â”‚  nÃ—      â”‚ 0 disks (dangerous)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RAID 1  â”‚    2     â”‚  50%     â”‚  2Ã—      â”‚  1Ã—      â”‚ 1 disk                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RAID 5  â”‚    3     â”‚  (n-1)/n â”‚  Fast    â”‚  Medium  â”‚ 1 disk                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RAID 6  â”‚    4     â”‚  (n-2)/n â”‚  Fast    â”‚  Slow    â”‚ 2 disks                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RAID 10 â”‚    4     â”‚  50%     â”‚  Fast    â”‚  Fast    â”‚ 1 per pair              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<hr />
<h2 id="practice-problems">Practice Problems<a class="header-link" href="#practice-problems" title="Permanent link">&para;</a></h2>
<h3 id="problem-1-inode-block-pointers">Problem 1: inode Block Pointers<a class="header-link" href="#problem-1-inode-block-pointers" title="Permanent link">&para;</a></h3>
<p>In a Unix file system with 4KB blocks and 4-byte pointers, how many indirect blocks are needed to store a 100MB file?</p>
<details>
<summary>Show Answer</summary>


<div class="highlight"><pre><span></span><code>Block size: 4KB = 4096 bytes
Pointers/block: 4096 / 4 = 1024
File size: 100MB = 102,400KB = 25,600 blocks

Direct blocks: 12 â†’ 12 blocks covered
Single indirect: 1024 â†’ 1024 blocks covered
Double indirect: 1024 Ã— 1024 = 1,048,576 blocks covered

Required blocks: 25,600

Direct: 12 used
Single indirect: 1024 used (1 indirect block)
Remaining blocks: 25,600 - 12 - 1024 = 24,564

Double indirect:
- Level-1 indirect blocks: ceil(24564 / 1024) = 24
- Level-2 indirect block: 1

Total indirect blocks:
- Single indirect: 1
- Double indirect level-1: 1
- Double indirect level-2: 24
Total: 26
</code></pre></div>



</details>

<h3 id="problem-2-fat-chain">Problem 2: FAT Chain<a class="header-link" href="#problem-2-fat-chain" title="Permanent link">&para;</a></h3>
<p>Given the following FAT table, list the cluster chain for file A (start: 3).</p>
<table>
<thead>
<tr>
<th>Cluster</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>FREE</td>
</tr>
<tr>
<td>1</td>
<td>8</td>
</tr>
<tr>
<td>2</td>
<td>FREE</td>
</tr>
<tr>
<td>3</td>
<td>7</td>
</tr>
<tr>
<td>4</td>
<td>EOF</td>
</tr>
<tr>
<td>5</td>
<td>1</td>
</tr>
<tr>
<td>6</td>
<td>FREE</td>
</tr>
<tr>
<td>7</td>
<td>4</td>
</tr>
<tr>
<td>8</td>
<td>EOF</td>
</tr>
</tbody>
</table>
<details>
<summary>Show Answer</summary>


<div class="highlight"><pre><span></span><code>File A starting: cluster 3

Track chain:
3 â†’ FAT[3]=7 â†’ FAT[7]=4 â†’ FAT[4]=EOF

File A cluster chain: 3 â†’ 7 â†’ 4 â†’ EOF

File size: 3 clusters

Note: another file starting at cluster 5:
5 â†’ FAT[5]=1 â†’ FAT[1]=8 â†’ FAT[8]=EOF
Chain: 5 â†’ 1 â†’ 8 â†’ EOF
</code></pre></div>



</details>

<h3 id="problem-3-journaling-recovery">Problem 3: Journaling Recovery<a class="header-link" href="#problem-3-journaling-recovery" title="Permanent link">&para;</a></h3>
<p>After system crash, the journal has the following state. What is the file system state after recovery?</p>
<div class="highlight"><pre><span></span><code><span class="n">Journal</span><span class="w"> </span><span class="nl">contents</span><span class="p">:</span>
<span class="o">[</span><span class="n">TxB_1</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Block 100: DataA</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Block 101: MetadataA</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">TxE_1</span><span class="o">]</span>
<span class="o">[</span><span class="n">TxB_2</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Block 200: DataB</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Block 201: MetadataB</span><span class="o">]</span>
<span class="p">(</span><span class="k">No</span><span class="w"> </span><span class="n">TxE_2</span><span class="p">)</span>
</code></pre></div>

<details>
<summary>Show Answer</summary>


<div class="highlight"><pre><span></span><code>Recovery process:

1. Check Transaction 1:
   <span class="k">-</span> Both TxB_1 and TxE_1 exist
   <span class="k">-</span> Completed transaction
   <span class="k">-</span> Rewrite blocks 100, 101 to actual location (redo)

2. Check Transaction 2:
   <span class="k">-</span> Only TxB_2, no TxE_2
   <span class="k">-</span> Incomplete transaction
   <span class="k">-</span> Ignore this transaction (undo)
   <span class="k">-</span> Do not apply blocks 200, 201 changes

Result:
<span class="k">-</span> Transaction 1 changes: Applied (file A changes complete)
<span class="k">-</span> Transaction 2 changes: Not applied (no changes to file B)

File system is in consistent state with Transaction 1 only
</code></pre></div>



</details>

<h3 id="problem-4-raid-capacity-calculation">Problem 4: RAID Capacity Calculation<a class="header-link" href="#problem-4-raid-capacity-calculation" title="Permanent link">&para;</a></h3>
<p>Calculate usable capacity when configuring the following RAID with 6Ã— 2TB disks:</p>
<ol>
<li>RAID 0</li>
<li>RAID 1</li>
<li>RAID 5</li>
<li>RAID 6</li>
<li>RAID 10</li>
</ol>
<details>
<summary>Show Answer</summary>


<div class="highlight"><pre><span></span><code><span class="n">Disks</span><span class="o">:</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">2</span><span class="n">TB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="n">TB</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="n">capacity</span>

<span class="mi">1</span><span class="o">.</span><span class="w"> </span><span class="n">RAID</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">2</span><span class="n">TB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="n">TB</span><span class="w"> </span><span class="o">(</span><span class="mi">100</span><span class="o">%)</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Use</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">space</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="n">redundancy</span>

<span class="mi">2</span><span class="o">.</span><span class="w"> </span><span class="n">RAID</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">2</span><span class="n">TB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="n">TB</span><span class="w"> </span><span class="o">(</span><span class="mi">3</span><span class="w"> </span><span class="n">pairs</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">mirror</span><span class="o">)</span>
<span class="w">   </span><span class="n">OR</span><span class="w"> </span><span class="n">simple</span><span class="w"> </span><span class="mi">2</span><span class="o">-</span><span class="n">disk</span><span class="w"> </span><span class="n">mirror</span><span class="o">:</span><span class="w"> </span><span class="mi">2</span><span class="n">TB</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="n">disks</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">pairs</span><span class="o">,</span><span class="w"> </span><span class="n">mirroring</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="k">each</span><span class="w"> </span><span class="n">pair</span><span class="w"> </span><span class="mi">2</span><span class="n">TB</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Total</span><span class="o">:</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">2</span><span class="n">TB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="n">TB</span><span class="w"> </span><span class="o">(</span><span class="mi">50</span><span class="o">%)</span>

<span class="mi">3</span><span class="o">.</span><span class="w"> </span><span class="n">RAID</span><span class="w"> </span><span class="mi">5</span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="mi">6</span><span class="o">-</span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">2</span><span class="n">TB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="n">TB</span><span class="w"> </span><span class="o">(</span><span class="mi">83</span><span class="o">%)</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">disk</span><span class="w"> </span><span class="n">worth</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">parity</span>

<span class="mi">4</span><span class="o">.</span><span class="w"> </span><span class="n">RAID</span><span class="w"> </span><span class="mi">6</span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="mi">6</span><span class="o">-</span><span class="mi">2</span><span class="o">)</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">2</span><span class="n">TB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="n">TB</span><span class="w"> </span><span class="o">(</span><span class="mi">67</span><span class="o">%)</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">disks</span><span class="w"> </span><span class="n">worth</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">parity</span>

<span class="mi">5</span><span class="o">.</span><span class="w"> </span><span class="n">RAID</span><span class="w"> </span><span class="mi">10</span><span class="o">:</span><span class="w"> </span><span class="mi">6</span><span class="o">/</span><span class="mi">2</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="mi">2</span><span class="n">TB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="n">TB</span><span class="w"> </span><span class="o">(</span><span class="mi">50</span><span class="o">%)</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">stripes</span><span class="o">,</span><span class="w"> </span><span class="k">each</span><span class="w"> </span><span class="n">mirrored</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">OR</span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">disk</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="o">)</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">capacity</span>
</code></pre></div>



</details>

<h3 id="problem-5-file-deletion-process">Problem 5: File Deletion Process<a class="header-link" href="#problem-5-file-deletion-process" title="Permanent link">&para;</a></h3>
<p>Explain the process when deleting <code>/home/user/file.txt</code> in Unix file system from inode and block perspective.</p>
<details>
<summary>Show Answer</summary>


<div class="highlight"><pre><span></span><code>Delete command: rm /home/user/file.txt

1. Path resolution:
   <span class="k">-</span> Find /home directory&#39;s inode
   <span class="k">-</span> Find /home/user directory&#39;s inode
   <span class="k">-</span> Find file.txt&#39;s inode number (e.g., inode 12345)

2. Permission check:
   <span class="k">-</span> Check write permission on directory (/home/user)
   <span class="k">-</span> Check if file is write-locked

3. Remove directory entry:
   <span class="k">-</span> Delete &quot;file.txt&quot; entry from /home/user directory file
   <span class="k">-</span> Adjust rec_len to merge space

4. Decrease inode link count:
   <span class="k">-</span> inode 12345&#39;s link_count--
   <span class="k">-</span> If link_count &gt; 0, stop here (other links exist)

5. If link_count == 0 and no open files:
   <span class="k">-</span> Free inode 12345 in inode bitmap (mark as 0)
   <span class="k">-</span> Check inode&#39;s data block pointers
   <span class="k">-</span> Free all data blocks in block bitmap
   <span class="k">-</span> Free indirect blocks too

6. Update superblock:
   <span class="k">-</span> Increase free inode count
   <span class="k">-</span> Increase free block count

Note: Actual data not erased
<span class="k">-</span> Blocks just marked &#39;available&#39;
<span class="k">-</span> Recoverable until overwritten with new data
</code></pre></div>



</details>

<hr />
<h2 id="next-steps">Next Steps<a class="header-link" href="#next-steps" title="Permanent link">&para;</a></h2>
<p>Continue to <a href="./18_IO_and_IPC.md">18_IO_and_IPC.md</a> to learn I/O systems and inter-process communication!</p>
<hr />
<h2 id="references">References<a class="header-link" href="#references" title="Permanent link">&para;</a></h2>
<ul>
<li>Silberschatz, "Operating System Concepts" Chapters 14-15</li>
<li>Linux kernel source: <code>fs/ext4/</code>, <code>fs/fat/</code></li>
<li>ext4 documentation: https://www.kernel.org/doc/html/latest/filesystems/ext4/</li>
<li>RAID fundamentals: https://en.wikipedia.org/wiki/RAID</li>
</ul>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/OS_Theory/16_File_System_Basics.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">File System Basics â­â­â­</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/OS_Theory/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/OS_Theory/18_IO_and_IPC.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">I/O and IPC â­â­â­</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">â†‘</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'en';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}