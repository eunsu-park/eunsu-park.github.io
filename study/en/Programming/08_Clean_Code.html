{% raw %}
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clean Code & Code Smells - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/en/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/en/" class="nav-item ">
                    <span class="nav-icon">üè†</span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">üíª</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/en/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" selected>
                        English
                    </option>
                    
                    <option value="ko" >
                        ÌïúÍµ≠Ïñ¥
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">‚òÄÔ∏è</span>
                    <span class="theme-icon dark">üåô</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/en/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/en/Programming/">Programming</a>
    <span class="separator">/</span>
    <span class="current">Clean Code & Code Smells</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>Clean Code & Code Smells</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/Programming/07_Design_Patterns.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Design Patterns</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">üîó</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/Programming/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">üìã</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/Programming/09_Error_Handling.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Error Handling Strategies</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#the-cost-of-bad-code">The Cost of Bad Code</a></li>
<li><a href="#meaningful-names">Meaningful Names</a><ul>
<li><a href="#intention-revealing-names">Intention-Revealing Names</a></li>
<li><a href="#avoid-disinformation">Avoid Disinformation</a></li>
<li><a href="#use-pronounceable-names">Use Pronounceable Names</a></li>
<li><a href="#use-searchable-names">Use Searchable Names</a></li>
<li><a href="#class-names-nouns">Class Names: Nouns</a></li>
<li><a href="#method-names-verbs">Method Names: Verbs</a></li>
<li><a href="#avoid-encodings">Avoid Encodings</a></li>
<li><a href="#one-word-per-concept">One Word Per Concept</a></li>
<li><a href="#avoid-noise-words">Avoid Noise Words</a></li>
</ul>
</li>
<li><a href="#functions">Functions</a><ul>
<li><a href="#small-functions">Small Functions</a></li>
<li><a href="#ideal-argument-count">Ideal Argument Count</a></li>
<li><a href="#no-side-effects">No Side Effects</a></li>
<li><a href="#command-query-separation">Command-Query Separation</a></li>
<li><a href="#dry-dont-repeat-yourself">DRY: Don't Repeat Yourself</a></li>
</ul>
</li>
<li><a href="#code-smells">Code Smells</a><ul>
<li><a href="#long-method">Long Method</a></li>
<li><a href="#large-class-god-class">Large Class (God Class)</a></li>
<li><a href="#feature-envy">Feature Envy</a></li>
<li><a href="#data-clumps">Data Clumps</a></li>
<li><a href="#shotgun-surgery">Shotgun Surgery</a></li>
<li><a href="#divergent-change">Divergent Change</a></li>
<li><a href="#primitive-obsession">Primitive Obsession</a></li>
<li><a href="#switch-statements">Switch Statements</a></li>
<li><a href="#speculative-generality">Speculative Generality</a></li>
<li><a href="#dead-code">Dead Code</a></li>
</ul>
</li>
<li><a href="#refactoring-techniques">Refactoring Techniques</a><ul>
<li><a href="#extract-method">Extract Method</a></li>
<li><a href="#rename-variablemethod">Rename Variable/Method</a></li>
<li><a href="#introduce-explaining-variable">Introduce Explaining Variable</a></li>
<li><a href="#replace-magic-number-with-named-constant">Replace Magic Number with Named Constant</a></li>
<li><a href="#move-method">Move Method</a></li>
</ul>
</li>
<li><a href="#principles">Principles</a><ul>
<li><a href="#dry-dont-repeat-yourself_1">DRY: Don't Repeat Yourself</a></li>
<li><a href="#kiss-keep-it-simple-stupid">KISS: Keep It Simple, Stupid</a></li>
<li><a href="#yagni-you-arent-gonna-need-it">YAGNI: You Aren't Gonna Need It</a></li>
<li><a href="#principle-of-least-surprise">Principle of Least Surprise</a></li>
<li><a href="#boy-scout-rule">Boy Scout Rule</a></li>
</ul>
</li>
<li><a href="#comments">Comments</a><ul>
<li><a href="#good-comments">Good Comments</a></li>
<li><a href="#bad-comments">Bad Comments</a></li>
<li><a href="#self-documenting-code">Self-Documenting Code</a></li>
</ul>
</li>
<li><a href="#formatting">Formatting</a><ul>
<li><a href="#vertical-formatting">Vertical Formatting</a></li>
<li><a href="#horizontal-formatting">Horizontal Formatting</a></li>
<li><a href="#team-conventions">Team Conventions</a></li>
</ul>
</li>
<li><a href="#summary">Summary</a></li>
<li><a href="#exercises">Exercises</a><ul>
<li><a href="#exercise-1-refactor-this-code">Exercise 1: Refactor This Code</a></li>
<li><a href="#exercise-2-identify-code-smells">Exercise 2: Identify Code Smells</a></li>
<li><a href="#exercise-3-write-clean-functions">Exercise 3: Write Clean Functions</a></li>
<li><a href="#exercise-4-apply-boy-scout-rule">Exercise 4: Apply Boy Scout Rule</a></li>
<li><a href="#exercise-5-code-review-checklist">Exercise 5: Code Review Checklist</a></li>
</ul>
</li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="clean-code-code-smells">Clean Code &amp; Code Smells<a class="header-link" href="#clean-code-code-smells" title="Permanent link">&para;</a></h1>
<blockquote>
<p><strong>Topic</strong>: Programming
<strong>Lesson</strong>: 8 of 16
<strong>Prerequisites</strong>: Programming experience in at least one language, familiarity with functions and classes
<strong>Objective</strong>: Learn to write clean, maintainable code by following best practices, recognizing code smells, and applying effective refactoring techniques</p>
</blockquote>
<h2 id="introduction">Introduction<a class="header-link" href="#introduction" title="Permanent link">&para;</a></h2>
<p>"Any fool can write code that a computer can understand. Good programmers write code that humans can understand." ‚Äî Martin Fowler</p>
<p>Clean code is code that is easy to read, understand, and modify. It minimizes cognitive load, reduces bugs, and makes collaboration easier. This lesson covers principles from Robert C. Martin's <em>Clean Code</em>, Martin Fowler's <em>Refactoring</em>, and other industry best practices.</p>
<h2 id="the-cost-of-bad-code">The Cost of Bad Code<a class="header-link" href="#the-cost-of-bad-code" title="Permanent link">&para;</a></h2>
<p><strong>Technical debt</strong> accumulates when we take shortcuts:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Technical debt example</span>
<span class="k">def</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>  <span class="c1"># What does this process?</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># What is x?</span>
    <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>  <span class="c1"># Single-letter variable</span>
        <span class="k">if</span> <span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>  <span class="c1"># Magic number</span>
            <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mf">1.2</span><span class="p">)</span>  <span class="c1"># What is 1.2?</span>
    <span class="k">return</span> <span class="n">x</span>

<span class="c1"># The &quot;interest&quot; we pay:</span>
<span class="c1"># - Hard to understand</span>
<span class="c1"># - Hard to modify</span>
<span class="c1"># - Hard to test</span>
<span class="c1"># - Bugs hide easily</span>
</code></pre></div>

<p><strong>The clean version:</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">PRICE_MARKUP</span> <span class="o">=</span> <span class="mf">1.2</span>
<span class="n">MINIMUM_QUANTITY</span> <span class="o">=</span> <span class="mi">100</span>

<span class="k">def</span><span class="w"> </span><span class="nf">calculate_marked_up_prices</span><span class="p">(</span><span class="n">orders</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract prices from high-quantity orders and apply markup.&quot;&quot;&quot;</span>
    <span class="n">marked_up_prices</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">order</span> <span class="ow">in</span> <span class="n">orders</span><span class="p">:</span>
        <span class="n">quantity</span> <span class="o">=</span> <span class="n">order</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">price</span> <span class="o">=</span> <span class="n">order</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">quantity</span> <span class="o">&gt;</span> <span class="n">MINIMUM_QUANTITY</span><span class="p">:</span>
            <span class="n">marked_up_price</span> <span class="o">=</span> <span class="n">price</span> <span class="o">*</span> <span class="n">PRICE_MARKUP</span>
            <span class="n">marked_up_prices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">marked_up_price</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">marked_up_prices</span>
</code></pre></div>

<h2 id="meaningful-names">Meaningful Names<a class="header-link" href="#meaningful-names" title="Permanent link">&para;</a></h2>
<p>Names are the primary way we communicate intent. Good names make code self-documenting.</p>
<h3 id="intention-revealing-names">Intention-Revealing Names<a class="header-link" href="#intention-revealing-names" title="Permanent link">&para;</a></h3>
<p><strong>Bad:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="n">d</span><span class="p">;</span><span class="w">  </span><span class="c1">// elapsed time in days</span>
</code></pre></div>

<p><strong>Good:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="n">elapsedTimeInDays</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">daysSinceCreation</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">daysSinceModification</span><span class="p">;</span>
</code></pre></div>

<h3 id="avoid-disinformation">Avoid Disinformation<a class="header-link" href="#avoid-disinformation" title="Permanent link">&para;</a></h3>
<p><strong>Bad:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">accountList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span><span class="w">  </span><span class="c1">// Not a list, it&#39;s an object!</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">hp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">  </span><span class="c1">// What does hp mean?</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">theAccounts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span><span class="w">  </span><span class="c1">// &quot;the&quot; adds no information</span>
</code></pre></div>

<p><strong>Good:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">accountMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">calculateHorsePower</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="c1">// Or if context is clear:</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">calculatePower</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">accounts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
</code></pre></div>

<h3 id="use-pronounceable-names">Use Pronounceable Names<a class="header-link" href="#use-pronounceable-names" title="Permanent link">&para;</a></h3>
<p><strong>Bad:</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">genymdhms</span>  <span class="c1"># generation year, month, day, hour, minute, second</span>
</code></pre></div>

<p><strong>Good:</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">generation_timestamp</span>
</code></pre></div>

<h3 id="use-searchable-names">Use Searchable Names<a class="header-link" href="#use-searchable-names" title="Permanent link">&para;</a></h3>
<p><strong>Bad:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">7</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// What is 7?</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Good:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">DAYS_IN_WEEK</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">;</span>

<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">day</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">day</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">DAYS_IN_WEEK</span><span class="p">;</span><span class="w"> </span><span class="n">day</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="class-names-nouns">Class Names: Nouns<a class="header-link" href="#class-names-nouns" title="Permanent link">&para;</a></h3>
<p>Classes represent things (nouns):</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Good</span>
<span class="kd">class</span> <span class="nc">Customer</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="kd">class</span> <span class="nc">Account</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="kd">class</span> <span class="nc">PaymentProcessor</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>

<span class="c1">// Bad</span>
<span class="kd">class</span> <span class="nc">Manager</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">  </span><span class="c1">// Too vague</span>
<span class="kd">class</span> <span class="nc">Data</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">     </span><span class="c1">// Meaningless</span>
<span class="kd">class</span> <span class="nc">Info</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">     </span><span class="c1">// Meaningless</span>
</code></pre></div>

<h3 id="method-names-verbs">Method Names: Verbs<a class="header-link" href="#method-names-verbs" title="Permanent link">&para;</a></h3>
<p>Methods perform actions (verbs):</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Good</span>
<span class="k">def</span><span class="w"> </span><span class="nf">calculate_total</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="k">def</span><span class="w"> </span><span class="nf">send_email</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">():</span>  <span class="c1"># Boolean: is_, has_, can_</span>
    <span class="k">pass</span>

<span class="c1"># Bad</span>
<span class="k">def</span><span class="w"> </span><span class="nf">total</span><span class="p">():</span>  <span class="c1"># Noun (ambiguous)</span>
    <span class="k">pass</span>

<span class="k">def</span><span class="w"> </span><span class="nf">email</span><span class="p">():</span>  <span class="c1"># Noun</span>
    <span class="k">pass</span>
</code></pre></div>

<h3 id="avoid-encodings">Avoid Encodings<a class="header-link" href="#avoid-encodings" title="Permanent link">&para;</a></h3>
<p><strong>Bad (Hungarian notation):</strong></p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="n">iCount</span><span class="p">;</span>
<span class="n">string</span><span class="w"> </span><span class="n">strName</span><span class="p">;</span>
<span class="kt">bool</span><span class="w"> </span><span class="n">bIsActive</span><span class="p">;</span>
</code></pre></div>

<p><strong>Good:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="p">;</span>
<span class="n">string</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<span class="kt">bool</span><span class="w"> </span><span class="n">isActive</span><span class="p">;</span>
</code></pre></div>

<h3 id="one-word-per-concept">One Word Per Concept<a class="header-link" href="#one-word-per-concept" title="Permanent link">&para;</a></h3>
<p>Pick one term and stick with it:</p>
<p><strong>Inconsistent:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span> <span class="nc">UserFetcher</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="kd">class</span> <span class="nc">AccountRetriever</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="kd">class</span> <span class="nc">ProductGetter</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>

<p><strong>Consistent:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span> <span class="nc">UserRepository</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="kd">class</span> <span class="nc">AccountRepository</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="kd">class</span> <span class="nc">ProductRepository</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>

<h3 id="avoid-noise-words">Avoid Noise Words<a class="header-link" href="#avoid-noise-words" title="Permanent link">&para;</a></h3>
<p><strong>Bad:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">productData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">productInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">theProduct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">getProductData</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">getProductInfo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>

<p>What's the difference between <code>Data</code> and <code>Info</code>? None!</p>
<p><strong>Good:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">product</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">getProduct</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>

<h2 id="functions">Functions<a class="header-link" href="#functions" title="Permanent link">&para;</a></h2>
<h3 id="small-functions">Small Functions<a class="header-link" href="#small-functions" title="Permanent link">&para;</a></h3>
<p>Functions should do <strong>one thing</strong>, do it <strong>well</strong>, and do it <strong>only</strong>.</p>
<p><strong>Bad (does too much):</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">process_order</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="c1"># Validate</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">order</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;customer_id&#39;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Missing customer ID&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">order</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;items&#39;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No items&quot;</span><span class="p">)</span>

    <span class="c1"># Calculate total</span>
    <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">order</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">]:</span>
        <span class="n">total</span> <span class="o">+=</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;quantity&#39;</span><span class="p">]</span>

    <span class="c1"># Apply discount</span>
    <span class="k">if</span> <span class="n">order</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;coupon&#39;</span><span class="p">):</span>
        <span class="n">discount</span> <span class="o">=</span> <span class="n">get_discount</span><span class="p">(</span><span class="n">order</span><span class="p">[</span><span class="s1">&#39;coupon&#39;</span><span class="p">])</span>
        <span class="n">total</span> <span class="o">-=</span> <span class="n">total</span> <span class="o">*</span> <span class="n">discount</span>

    <span class="c1"># Save to database</span>
    <span class="n">db</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;orders&#39;</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span>

    <span class="c1"># Send confirmation email</span>
    <span class="n">send_email</span><span class="p">(</span><span class="n">order</span><span class="p">[</span><span class="s1">&#39;customer_id&#39;</span><span class="p">],</span> <span class="sa">f</span><span class="s2">&quot;Order confirmed: $</span><span class="si">{</span><span class="n">total</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">total</span>
</code></pre></div>

<p><strong>Good (single responsibilities):</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">process_order</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="n">validate_order</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
    <span class="n">total</span> <span class="o">=</span> <span class="n">calculate_order_total</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
    <span class="n">save_order</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
    <span class="n">send_confirmation_email</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">total</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">total</span>

<span class="k">def</span><span class="w"> </span><span class="nf">validate_order</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">order</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;customer_id&#39;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Missing customer ID&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">order</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;items&#39;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No items&quot;</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">calculate_order_total</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="n">subtotal</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;quantity&#39;</span><span class="p">]</span>
                   <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">order</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">])</span>
    <span class="n">discount</span> <span class="o">=</span> <span class="n">get_discount_amount</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">subtotal</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">subtotal</span> <span class="o">-</span> <span class="n">discount</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_discount_amount</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">subtotal</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">coupon</span> <span class="o">:=</span> <span class="n">order</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;coupon&#39;</span><span class="p">):</span>
        <span class="n">discount_rate</span> <span class="o">=</span> <span class="n">get_discount</span><span class="p">(</span><span class="n">coupon</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">subtotal</span> <span class="o">*</span> <span class="n">discount_rate</span>
    <span class="k">return</span> <span class="mi">0</span>

<span class="k">def</span><span class="w"> </span><span class="nf">save_order</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="n">db</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;orders&#39;</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">send_confirmation_email</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">total</span><span class="p">):</span>
    <span class="n">customer_id</span> <span class="o">=</span> <span class="n">order</span><span class="p">[</span><span class="s1">&#39;customer_id&#39;</span><span class="p">]</span>
    <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Order confirmed: $</span><span class="si">{</span><span class="n">total</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">send_email</span><span class="p">(</span><span class="n">customer_id</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</code></pre></div>

<h3 id="ideal-argument-count">Ideal Argument Count<a class="header-link" href="#ideal-argument-count" title="Permanent link">&para;</a></h3>
<p><strong>0 arguments (niladic)</strong>: Best
<strong>1 argument (monadic)</strong>: Good
<strong>2 arguments (dyadic)</strong>: OK
<strong>3 arguments (triadic)</strong>: Questionable
<strong>4+ arguments (polyadic)</strong>: Avoid</p>
<p><strong>Bad:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">createUser</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">firstName</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">lastName</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">email</span><span class="p">,</span>
<span class="w">                       </span><span class="n">String</span><span class="w"> </span><span class="n">phone</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">address</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">city</span><span class="p">,</span>
<span class="w">                       </span><span class="n">String</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">zipCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Too many parameters!</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Good:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserData</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">firstName</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">lastName</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">email</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">phone</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Address</span><span class="w"> </span><span class="n">address</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Getters and setters...</span>
<span class="p">}</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Address</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">street</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">city</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">state</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">zipCode</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">createUser</span><span class="p">(</span><span class="n">UserData</span><span class="w"> </span><span class="n">userData</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Single parameter (object)</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="no-side-effects">No Side Effects<a class="header-link" href="#no-side-effects" title="Permanent link">&para;</a></h3>
<p>A function should do what its name says, nothing more.</p>
<p><strong>Bad (hidden side effect):</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">checkPassword</span><span class="p">(</span><span class="nx">username</span><span class="p">,</span><span class="w"> </span><span class="nx">password</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">getUser</span><span class="p">(</span><span class="nx">username</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">password</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">hash</span><span class="p">(</span><span class="nx">password</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">Session</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span><span class="w">  </span><span class="c1">// Side effect! Not mentioned in name</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Good:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">isPasswordCorrect</span><span class="p">(</span><span class="nx">username</span><span class="p">,</span><span class="w"> </span><span class="nx">password</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">getUser</span><span class="p">(</span><span class="nx">username</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">user</span><span class="p">.</span><span class="nx">password</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">hash</span><span class="p">(</span><span class="nx">password</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Caller controls side effects</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">isPasswordCorrect</span><span class="p">(</span><span class="nx">username</span><span class="p">,</span><span class="w"> </span><span class="nx">password</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">Session</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
<span class="w">    </span><span class="nx">redirectToHomePage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="command-query-separation">Command-Query Separation<a class="header-link" href="#command-query-separation" title="Permanent link">&para;</a></h3>
<p>A function should either <strong>do something</strong> (command) or <strong>return something</strong> (query), but not both.</p>
<p><strong>Bad (does both):</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_and_check_attribute</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets attribute and returns True if it was changed.&quot;&quot;&quot;</span>
    <span class="n">old_value</span> <span class="o">=</span> <span class="n">get_attribute</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="n">set_attribute</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">old_value</span> <span class="o">!=</span> <span class="n">value</span>

<span class="c1"># Confusing usage:</span>
<span class="k">if</span> <span class="n">set_and_check_attribute</span><span class="p">(</span><span class="s1">&#39;status&#39;</span><span class="p">,</span> <span class="s1">&#39;active&#39;</span><span class="p">):</span>
    <span class="c1"># Did we set it? Or just check it?</span>
    <span class="k">pass</span>
</code></pre></div>

<p><strong>Good (separate command and query):</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_attribute</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets attribute (command).&quot;&quot;&quot;</span>
    <span class="n">attributes</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

<span class="k">def</span><span class="w"> </span><span class="nf">has_attribute_changed</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">new_value</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks if value would change (query).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">get_attribute</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">!=</span> <span class="n">new_value</span>

<span class="c1"># Clear usage:</span>
<span class="k">if</span> <span class="n">has_attribute_changed</span><span class="p">(</span><span class="s1">&#39;status&#39;</span><span class="p">,</span> <span class="s1">&#39;active&#39;</span><span class="p">):</span>
    <span class="n">set_attribute</span><span class="p">(</span><span class="s1">&#39;status&#39;</span><span class="p">,</span> <span class="s1">&#39;active&#39;</span><span class="p">)</span>
</code></pre></div>

<h3 id="dry-dont-repeat-yourself">DRY: Don't Repeat Yourself<a class="header-link" href="#dry-dont-repeat-yourself" title="Permanent link">&para;</a></h3>
<p><strong>Bad:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">printUserReport</span><span class="p">(</span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Name: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="na">getFirstName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="na">getLastName</span><span class="p">());</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Email: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="na">getEmail</span><span class="p">());</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Phone: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="na">getPhone</span><span class="p">());</span>
<span class="p">}</span>

<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">emailUserDetails</span><span class="p">(</span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">details</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Name: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="na">getFirstName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="na">getLastName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;\n&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">details</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s">&quot;Email: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="na">getEmail</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;\n&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">details</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s">&quot;Phone: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="na">getPhone</span><span class="p">();</span>
<span class="w">    </span><span class="n">sendEmail</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">getEmail</span><span class="p">(),</span><span class="w"> </span><span class="n">details</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Good:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">formatUserDetails</span><span class="p">(</span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;Name: %s %s\nEmail: %s\nPhone: %s&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="na">getFirstName</span><span class="p">(),</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="na">getLastName</span><span class="p">(),</span>
<span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="na">getEmail</span><span class="p">(),</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="na">getPhone</span><span class="p">());</span>
<span class="p">}</span>

<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">printUserReport</span><span class="p">(</span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">formatUserDetails</span><span class="p">(</span><span class="n">user</span><span class="p">));</span>
<span class="p">}</span>

<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">emailUserDetails</span><span class="p">(</span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">sendEmail</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">getEmail</span><span class="p">(),</span><span class="w"> </span><span class="n">formatUserDetails</span><span class="p">(</span><span class="n">user</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="code-smells">Code Smells<a class="header-link" href="#code-smells" title="Permanent link">&para;</a></h2>
<p>Code smells are indicators of potential problems. They don't always mean bad code, but they deserve attention.</p>
<h3 id="long-method">Long Method<a class="header-link" href="#long-method" title="Permanent link">&para;</a></h3>
<p><strong>Smell:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">process_payment</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="c1"># 200 lines of code...</span>
    <span class="k">pass</span>
</code></pre></div>

<p><strong>Refactoring:</strong> Extract Method</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">process_payment</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="n">validate_payment_info</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
    <span class="n">charge_amount</span> <span class="o">=</span> <span class="n">calculate_charge</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
    <span class="n">transaction_id</span> <span class="o">=</span> <span class="n">charge_credit_card</span><span class="p">(</span><span class="n">charge_amount</span><span class="p">,</span> <span class="n">order</span><span class="o">.</span><span class="n">card</span><span class="p">)</span>
    <span class="n">update_inventory</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
    <span class="n">send_confirmation</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">transaction_id</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">transaction_id</span>
</code></pre></div>

<h3 id="large-class-god-class">Large Class (God Class)<a class="header-link" href="#large-class-god-class" title="Permanent link">&para;</a></h3>
<p><strong>Smell:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">User</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Authentication</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">login</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">password</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">logout</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Profile management</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">updateProfile</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">uploadAvatar</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Permissions</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">hasPermission</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">permission</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">grantPermission</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">permission</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Email</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">sendWelcomeEmail</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">sendPasswordResetEmail</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Analytics</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">trackLogin</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">trackPageView</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// ... 50 more methods</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Refactoring:</strong> Extract Class</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">User</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">UserProfile</span><span class="w"> </span><span class="n">profile</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">UserAuthentication</span><span class="w"> </span><span class="n">auth</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">UserPermissions</span><span class="w"> </span><span class="n">permissions</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Minimal interface</span>
<span class="p">}</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserAuthentication</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">login</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">password</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">logout</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserProfile</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">update</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">uploadAvatar</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserPermissions</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">has</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">permission</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">grant</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">permission</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="feature-envy">Feature Envy<a class="header-link" href="#feature-envy" title="Permanent link">&para;</a></h3>
<p>A method that uses data/methods from another class more than its own.</p>
<p><strong>Smell:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Order</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">customer</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">customer</span> <span class="o">=</span> <span class="n">customer</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_discount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Uses customer data extensively</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">customer</span><span class="o">.</span><span class="n">is_premium</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">customer</span><span class="o">.</span><span class="n">years_active</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">0.20</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">0.10</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.05</span>
</code></pre></div>

<p><strong>Refactoring:</strong> Move Method</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Customer</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_discount_rate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_premium</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">years_active</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">0.20</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">0.10</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.05</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Order</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">customer</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">customer</span> <span class="o">=</span> <span class="n">customer</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_discount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">customer</span><span class="o">.</span><span class="n">get_discount_rate</span><span class="p">()</span>
</code></pre></div>

<h3 id="data-clumps">Data Clumps<a class="header-link" href="#data-clumps" title="Permanent link">&para;</a></h3>
<p>Groups of data that always appear together.</p>
<p><strong>Smell:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">createUser</span><span class="p">(</span><span class="nx">firstName</span><span class="p">,</span><span class="w"> </span><span class="nx">lastName</span><span class="p">,</span><span class="w"> </span><span class="nx">email</span><span class="p">,</span><span class="w"> </span><span class="nx">street</span><span class="p">,</span><span class="w"> </span><span class="nx">city</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">zip</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">updateUser</span><span class="p">(</span><span class="nx">userId</span><span class="p">,</span><span class="w"> </span><span class="nx">firstName</span><span class="p">,</span><span class="w"> </span><span class="nx">lastName</span><span class="p">,</span><span class="w"> </span><span class="nx">email</span><span class="p">,</span><span class="w"> </span><span class="nx">street</span><span class="p">,</span><span class="w"> </span><span class="nx">city</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">zip</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Refactoring:</strong> Introduce Parameter Object</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nx">Address</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">street</span><span class="p">,</span><span class="w"> </span><span class="nx">city</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">zip</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">street</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">street</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">city</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">state</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">zip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">zip</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">UserInfo</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">firstName</span><span class="p">,</span><span class="w"> </span><span class="nx">lastName</span><span class="p">,</span><span class="w"> </span><span class="nx">email</span><span class="p">,</span><span class="w"> </span><span class="nx">address</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">firstName</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">lastName</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">email</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">address</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">createUser</span><span class="p">(</span><span class="nx">userInfo</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">updateUser</span><span class="p">(</span><span class="nx">userId</span><span class="p">,</span><span class="w"> </span><span class="nx">userInfo</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="shotgun-surgery">Shotgun Surgery<a class="header-link" href="#shotgun-surgery" title="Permanent link">&para;</a></h3>
<p>A single change requires modifications in many classes.</p>
<p><strong>Smell:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// Adding a new payment method requires changes in:</span>
<span class="kd">class</span> <span class="nc">Order</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">          </span><span class="c1">// Add payment type check</span>
<span class="kd">class</span> <span class="nc">PaymentForm</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">    </span><span class="c1">// Add UI for new payment</span>
<span class="kd">class</span> <span class="nc">PaymentValidator</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="c1">// Add validation</span>
<span class="kd">class</span> <span class="nc">Receipt</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">        </span><span class="c1">// Add receipt format</span>
<span class="kd">class</span> <span class="nc">Analytics</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">      </span><span class="c1">// Add tracking</span>
</code></pre></div>

<p><strong>Refactoring:</strong> Move related changes to one place (Strategy pattern)</p>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span> <span class="nc">PaymentMethod</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">amount</span><span class="p">);</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="nf">getReceiptFormat</span><span class="p">();</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">validate</span><span class="p">();</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">track</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">CreditCardPayment</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">PaymentMethod</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="kd">class</span> <span class="nc">PayPalPayment</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">PaymentMethod</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="kd">class</span> <span class="nc">CryptoPayment</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">PaymentMethod</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>

<span class="c1">// Now adding a new payment method only requires one new class</span>
</code></pre></div>

<h3 id="divergent-change">Divergent Change<a class="header-link" href="#divergent-change" title="Permanent link">&para;</a></h3>
<p>One class is commonly changed in different ways for different reasons.</p>
<p><strong>Smell:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Report</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_data</span><span class="p">()</span>  <span class="c1"># Database logic (reason 1)</span>
        <span class="n">formatted</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>  <span class="c1"># Formatting logic (reason 2)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_email</span><span class="p">(</span><span class="n">formatted</span><span class="p">)</span>  <span class="c1"># Email logic (reason 3)</span>
</code></pre></div>

<p><strong>Refactoring:</strong> Extract Class (Single Responsibility Principle)</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ReportDataFetcher</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">fetch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Database logic only</span>
        <span class="k">pass</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ReportFormatter</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="c1"># Formatting logic only</span>
        <span class="k">pass</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ReportEmailer</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">report</span><span class="p">):</span>
        <span class="c1"># Email logic only</span>
        <span class="k">pass</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ReportGenerator</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fetcher</span><span class="p">,</span> <span class="n">formatter</span><span class="p">,</span> <span class="n">emailer</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fetcher</span> <span class="o">=</span> <span class="n">fetcher</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">formatter</span> <span class="o">=</span> <span class="n">formatter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emailer</span> <span class="o">=</span> <span class="n">emailer</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetcher</span><span class="o">.</span><span class="n">fetch</span><span class="p">()</span>
        <span class="n">formatted</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emailer</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">formatted</span><span class="p">)</span>
</code></pre></div>

<h3 id="primitive-obsession">Primitive Obsession<a class="header-link" href="#primitive-obsession" title="Permanent link">&para;</a></h3>
<p>Using primitives instead of small objects for simple tasks.</p>
<p><strong>Smell:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">sendMessage</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">phoneNumber</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Is phoneNumber valid? No type safety</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">phoneNumber</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">invalid_argument</span><span class="p">(</span><span class="s">&quot;Invalid phone&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>

<span class="n">sendMessage</span><span class="p">(</span><span class="s">&quot;invalid&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// Compiles, but wrong</span>
</code></pre></div>

<p><strong>Refactoring:</strong> Replace Data Value with Object</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PhoneNumber</span><span class="w"> </span><span class="p">{</span>
<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">number</span><span class="p">;</span>

<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">PhoneNumber</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">num</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">num</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="n">isDigits</span><span class="p">(</span><span class="n">num</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">invalid_argument</span><span class="p">(</span><span class="s">&quot;Invalid phone number&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">num</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">toString</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">number</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>

<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">isDigits</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">str</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">all_of</span><span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">str</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span><span class="w"> </span><span class="o">::</span><span class="n">isdigit</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">sendMessage</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">PhoneNumber</span><span class="o">&amp;</span><span class="w"> </span><span class="n">phoneNumber</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Type safety! phoneNumber is guaranteed valid</span>
<span class="p">}</span>

<span class="c1">// sendMessage(&quot;invalid&quot;);  // Compiler error!</span>
<span class="n">sendMessage</span><span class="p">(</span><span class="n">PhoneNumber</span><span class="p">(</span><span class="s">&quot;1234567890&quot;</span><span class="p">));</span><span class="w">  </span><span class="c1">// OK</span>
</code></pre></div>

<h3 id="switch-statements">Switch Statements<a class="header-link" href="#switch-statements" title="Permanent link">&para;</a></h3>
<p><strong>Smell:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="nf">calculatePay</span><span class="p">(</span><span class="n">Employee</span><span class="w"> </span><span class="n">employee</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">employee</span><span class="p">.</span><span class="na">type</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="n">HOURLY</span><span class="p">:</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">employee</span><span class="p">.</span><span class="na">hours</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">employee</span><span class="p">.</span><span class="na">hourlyRate</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="n">SALARIED</span><span class="p">:</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">employee</span><span class="p">.</span><span class="na">monthlySalary</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="n">COMMISSIONED</span><span class="p">:</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">employee</span><span class="p">.</span><span class="na">baseSalary</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">employee</span><span class="p">.</span><span class="na">commission</span><span class="p">;</span>
<span class="w">        </span><span class="k">default</span><span class="p">:</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;Unknown employee type&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Problem: This switch appears in multiple places!</span>
<span class="c1">// If we add a new employee type, we must update all switches.</span>
</code></pre></div>

<p><strong>Refactoring:</strong> Replace Conditional with Polymorphism</p>
<div class="highlight"><pre><span></span><code><span class="kd">abstract</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Employee</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="nf">calculatePay</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">HourlyEmployee</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Employee</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">hours</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">hourlyRate</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="nf">calculatePay</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">hours</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">hourlyRate</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">SalariedEmployee</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Employee</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">monthlySalary</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="nf">calculatePay</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">monthlySalary</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">CommissionedEmployee</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Employee</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">baseSalary</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">commission</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="nf">calculatePay</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">baseSalary</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">commission</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Adding a new type only requires a new class</span>
</code></pre></div>

<h3 id="speculative-generality">Speculative Generality<a class="header-link" href="#speculative-generality" title="Permanent link">&para;</a></h3>
<p><strong>Smell:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AbstractFactoryProviderSingleton</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Might need this someday...&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">def</span><span class="w"> </span><span class="nf">calculate_with_future_algorithm_support</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s1">&#39;current&#39;</span><span class="p">):</span>
    <span class="c1"># Supports 5 algorithms we might need in the future</span>
    <span class="k">pass</span>
</code></pre></div>

<p><strong>Refactoring:</strong> YAGNI (You Aren't Gonna Need It) ‚Äî delete it!</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">calculate</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="c1"># Implement what you need now</span>
    <span class="k">pass</span>

<span class="c1"># Add algorithms when actually needed</span>
</code></pre></div>

<h3 id="dead-code">Dead Code<a class="header-link" href="#dead-code" title="Permanent link">&para;</a></h3>
<p><strong>Smell:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">processOrder</span><span class="p">(</span><span class="nx">order</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// validateAddress(order.address);  // Commented out</span>
<span class="w">    </span><span class="nx">calculateTotal</span><span class="p">(</span><span class="nx">order</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// if (false) {  // Always false</span>
<span class="w">    </span><span class="c1">//     applyOldDiscountLogic(order);</span>
<span class="w">    </span><span class="c1">// }</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Refactoring:</strong> Delete it! Version control remembers.</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">processOrder</span><span class="p">(</span><span class="nx">order</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">calculateTotal</span><span class="p">(</span><span class="nx">order</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="refactoring-techniques">Refactoring Techniques<a class="header-link" href="#refactoring-techniques" title="Permanent link">&para;</a></h2>
<h3 id="extract-method">Extract Method<a class="header-link" href="#extract-method" title="Permanent link">&para;</a></h3>
<p><strong>Before:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">print_invoice</span><span class="p">(</span><span class="n">invoice</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;**** Invoice ****&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Customer: </span><span class="si">{</span><span class="n">invoice</span><span class="p">[</span><span class="s1">&#39;customer&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Amount: $</span><span class="si">{</span><span class="n">invoice</span><span class="p">[</span><span class="s1">&#39;amount&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Calculate discount</span>
    <span class="n">discount</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="n">invoice</span><span class="p">[</span><span class="s1">&#39;amount&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1000</span><span class="p">:</span>
        <span class="n">discount</span> <span class="o">=</span> <span class="n">invoice</span><span class="p">[</span><span class="s1">&#39;amount&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mf">0.1</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Discount: $</span><span class="si">{</span><span class="n">discount</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total: $</span><span class="si">{</span><span class="n">invoice</span><span class="p">[</span><span class="s1">&#39;amount&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">discount</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<p><strong>After:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">print_invoice</span><span class="p">(</span><span class="n">invoice</span><span class="p">):</span>
    <span class="n">print_header</span><span class="p">()</span>
    <span class="n">print_customer_info</span><span class="p">(</span><span class="n">invoice</span><span class="p">)</span>
    <span class="n">discount</span> <span class="o">=</span> <span class="n">calculate_discount</span><span class="p">(</span><span class="n">invoice</span><span class="p">)</span>
    <span class="n">print_amounts</span><span class="p">(</span><span class="n">invoice</span><span class="p">,</span> <span class="n">discount</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">print_header</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;**** Invoice ****&quot;</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">print_customer_info</span><span class="p">(</span><span class="n">invoice</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Customer: </span><span class="si">{</span><span class="n">invoice</span><span class="p">[</span><span class="s1">&#39;customer&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Amount: $</span><span class="si">{</span><span class="n">invoice</span><span class="p">[</span><span class="s1">&#39;amount&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">calculate_discount</span><span class="p">(</span><span class="n">invoice</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">invoice</span><span class="p">[</span><span class="s1">&#39;amount&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1000</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">invoice</span><span class="p">[</span><span class="s1">&#39;amount&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mf">0.1</span>
    <span class="k">return</span> <span class="mi">0</span>

<span class="k">def</span><span class="w"> </span><span class="nf">print_amounts</span><span class="p">(</span><span class="n">invoice</span><span class="p">,</span> <span class="n">discount</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Discount: $</span><span class="si">{</span><span class="n">discount</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total: $</span><span class="si">{</span><span class="n">invoice</span><span class="p">[</span><span class="s1">&#39;amount&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">discount</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<h3 id="rename-variablemethod">Rename Variable/Method<a class="header-link" href="#rename-variablemethod" title="Permanent link">&para;</a></h3>
<p><strong>Before:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">calc</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">d</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.1</span><span class="p">;</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">r</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>After:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">calculateDiscount</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">orderAmount</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">discountAmount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">orderAmount</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.1</span><span class="p">;</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">discountAmount</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="introduce-explaining-variable">Introduce Explaining Variable<a class="header-link" href="#introduce-explaining-variable" title="Permanent link">&para;</a></h3>
<p><strong>Before:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="nx">platform</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">().</span><span class="nx">includes</span><span class="p">(</span><span class="s1">&#39;MAC&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">||</span>
<span class="w">     </span><span class="nx">platform</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">().</span><span class="nx">includes</span><span class="p">(</span><span class="s1">&#39;LINUX&#39;</span><span class="p">))</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">    </span><span class="nx">browser</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">().</span><span class="nx">includes</span><span class="p">(</span><span class="s1">&#39;CHROME&#39;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>After:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">isMacOrLinux</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">platform</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">().</span><span class="nx">includes</span><span class="p">(</span><span class="s1">&#39;MAC&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">||</span>
<span class="w">                     </span><span class="nx">platform</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">().</span><span class="nx">includes</span><span class="p">(</span><span class="s1">&#39;LINUX&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">isChrome</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">browser</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">().</span><span class="nx">includes</span><span class="p">(</span><span class="s1">&#39;CHROME&#39;</span><span class="p">);</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">isMacOrLinux</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">isChrome</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="replace-magic-number-with-named-constant">Replace Magic Number with Named Constant<a class="header-link" href="#replace-magic-number-with-named-constant" title="Permanent link">&para;</a></h3>
<p><strong>Before:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kt">double</span><span class="w"> </span><span class="nf">calculateMonthlyPayment</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">principal</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">rate</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">years</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">principal</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">rate</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">pow</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">rate</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="n">years</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">12</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>After:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">MONTHS_PER_YEAR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">;</span>

<span class="kt">double</span><span class="w"> </span><span class="nf">calculateMonthlyPayment</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">principal</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">annualRate</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">years</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">monthlyRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">annualRate</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">MONTHS_PER_YEAR</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">totalMonths</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">years</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">MONTHS_PER_YEAR</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">principal</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">monthlyRate</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">pow</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">monthlyRate</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="n">totalMonths</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="move-method">Move Method<a class="header-link" href="#move-method" title="Permanent link">&para;</a></h3>
<p>Move a method to the class where it belongs.</p>
<p><strong>Before:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Customer</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Order</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">customer</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">customer</span> <span class="o">=</span> <span class="n">customer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">=</span> <span class="n">amount</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_discount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Uses customer data, not order data</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">customer</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;VIP&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="mf">0.2</span>
        <span class="k">return</span> <span class="mf">0.1</span>
</code></pre></div>

<p><strong>After:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Customer</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_discount_rate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;VIP&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="mf">0.2</span>
        <span class="k">return</span> <span class="mf">0.1</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Order</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">customer</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">customer</span> <span class="o">=</span> <span class="n">customer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">=</span> <span class="n">amount</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_discount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">customer</span><span class="o">.</span><span class="n">get_discount_rate</span><span class="p">()</span>
</code></pre></div>

<h2 id="principles">Principles<a class="header-link" href="#principles" title="Permanent link">&para;</a></h2>
<h3 id="dry-dont-repeat-yourself_1">DRY: Don't Repeat Yourself<a class="header-link" href="#dry-dont-repeat-yourself_1" title="Permanent link">&para;</a></h3>
<p>Every piece of knowledge should have a single, unambiguous representation.</p>
<h3 id="kiss-keep-it-simple-stupid">KISS: Keep It Simple, Stupid<a class="header-link" href="#kiss-keep-it-simple-stupid" title="Permanent link">&para;</a></h3>
<p>Simplicity should be a key goal. Avoid unnecessary complexity.</p>
<p><strong>Complex:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AbstractFactoryBuilderProvider</span><span class="p">:</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_instance_with_dependency_injection</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
        <span class="c1"># 50 lines of complex logic</span>
        <span class="k">pass</span>
</code></pre></div>

<p><strong>Simple:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_user</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">email</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">User</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">email</span><span class="p">)</span>
</code></pre></div>

<h3 id="yagni-you-arent-gonna-need-it">YAGNI: You Aren't Gonna Need It<a class="header-link" href="#yagni-you-arent-gonna-need-it" title="Permanent link">&para;</a></h3>
<p>Don't implement features until they're actually needed.</p>
<p><strong>YAGNI violation:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span> <span class="nc">User</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Just in case we need these someday...</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">backupEmail</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">alternatePhone</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">preferredLanguage</span><span class="p">;</span><span class="w">  </span><span class="c1">// We only support English</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">isVerified</span><span class="p">;</span><span class="w">  </span><span class="c1">// No verification process yet</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="principle-of-least-surprise">Principle of Least Surprise<a class="header-link" href="#principle-of-least-surprise" title="Permanent link">&para;</a></h3>
<p>Code should behave as users expect.</p>
<p><strong>Surprising:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">getUsers</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">users</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM users&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">users</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">u</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">u</span><span class="p">.</span><span class="nx">lastAccessed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span><span class="w">  </span><span class="c1">// Side effect!</span>
<span class="w">    </span><span class="nx">db</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">users</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">users</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Unsurprising:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">getUsers</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM users&#39;</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">updateLastAccessed</span><span class="p">(</span><span class="nx">users</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">users</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">u</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">u</span><span class="p">.</span><span class="nx">lastAccessed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="w">    </span><span class="nx">db</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">users</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="boy-scout-rule">Boy Scout Rule<a class="header-link" href="#boy-scout-rule" title="Permanent link">&para;</a></h3>
<p><strong>"Leave the code better than you found it."</strong></p>
<p>Even small improvements accumulate:
- Rename a confusing variable
- Extract a long method
- Add a missing comment
- Delete dead code</p>
<h2 id="comments">Comments<a class="header-link" href="#comments" title="Permanent link">&para;</a></h2>
<h3 id="good-comments">Good Comments<a class="header-link" href="#good-comments" title="Permanent link">&para;</a></h3>
<p><strong>Legal comments:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// Copyright (C) 2024 Company Inc. All rights reserved.</span>
</code></pre></div>

<p><strong>Informative comments:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Returns a list of tuples: (user_id, username, last_login)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_active_users</span><span class="p">():</span>
    <span class="k">pass</span>
</code></pre></div>

<p><strong>Explanation of intent:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// We use a hash instead of array because lookup needs to be O(1)</span>
<span class="n">std</span><span class="o">::</span><span class="n">unordered_map</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">userCache</span><span class="p">;</span>
</code></pre></div>

<p><strong>Clarification:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// Third-party API returns timestamps in milliseconds, not seconds</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">timestampSeconds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">apiResponse</span><span class="p">.</span><span class="nx">timestamp</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">1000</span><span class="p">;</span>
</code></pre></div>

<p><strong>TODO comments:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># TODO: Add caching to improve performance (issue #1234)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">fetch_user_data</span><span class="p">(</span><span class="n">user_id</span><span class="p">):</span>
    <span class="k">pass</span>
</code></pre></div>

<h3 id="bad-comments">Bad Comments<a class="header-link" href="#bad-comments" title="Permanent link">&para;</a></h3>
<p><strong>Redundant comments:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// Get the name</span>
<span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Increment i</span>
<span class="n">i</span><span class="o">++</span><span class="p">;</span>
</code></pre></div>

<p><strong>Misleading comments:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Returns the user&#39;s age</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_user_info</span><span class="p">(</span><span class="n">user_id</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">db</span><span class="o">.</span><span class="n">get_user</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>  <span class="c1"># Returns entire user object, not just age!</span>
</code></pre></div>

<p><strong>Noise comments:</strong></p>
<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * Constructor.</span>
<span class="cm"> */</span>
<span class="k">public</span><span class="w"> </span><span class="n">User</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Commented-out code:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">processOrder</span><span class="p">(</span><span class="nx">order</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// validateAddress(order);  // Don&#39;t comment out, delete it!</span>
<span class="w">    </span><span class="c1">// applyDiscount(order);</span>
<span class="w">    </span><span class="nx">calculateTotal</span><span class="p">(</span><span class="nx">order</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Journal comments:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// 2024-01-15: Added validation - John</span>
<span class="c1">// 2024-01-20: Fixed bug - Sarah</span>
<span class="c1">// 2024-02-01: Refactored - Mike</span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">processPayment</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Use version control for history!</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="self-documenting-code">Self-Documenting Code<a class="header-link" href="#self-documenting-code" title="Permanent link">&para;</a></h3>
<p>Prefer code that explains itself:</p>
<p><strong>Needs comments:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Check if user is eligible for discount</span>
<span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">t</span> <span class="o">==</span> <span class="s1">&#39;premium&#39;</span> <span class="ow">and</span> <span class="n">u</span><span class="o">.</span><span class="n">yrs</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
    <span class="k">pass</span>
</code></pre></div>

<p><strong>Self-documenting:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_eligible_for_loyalty_discount</span><span class="p">(</span><span class="n">user</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">user</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">&#39;premium&#39;</span> <span class="ow">and</span> <span class="n">user</span><span class="o">.</span><span class="n">years_active</span> <span class="o">&gt;</span> <span class="mi">2</span>

<span class="k">if</span> <span class="n">is_eligible_for_loyalty_discount</span><span class="p">(</span><span class="n">user</span><span class="p">):</span>
    <span class="k">pass</span>
</code></pre></div>

<h2 id="formatting">Formatting<a class="header-link" href="#formatting" title="Permanent link">&para;</a></h2>
<p>Consistent formatting improves readability.</p>
<h3 id="vertical-formatting">Vertical Formatting<a class="header-link" href="#vertical-formatting" title="Permanent link">&para;</a></h3>
<p><strong>Newspaper metaphor</strong>: Most important information at top.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Public interface first</span>
<span class="k">class</span><span class="w"> </span><span class="nc">OrderService</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">process_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
        <span class="n">total</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_total</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_save</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">total</span>

    <span class="c1"># Private helpers below</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_calculate_total</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
        <span class="k">pass</span>
</code></pre></div>

<h3 id="horizontal-formatting">Horizontal Formatting<a class="header-link" href="#horizontal-formatting" title="Permanent link">&para;</a></h3>
<p>Keep lines short (80-120 characters).</p>
<p><strong>Bad:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">createUser</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">firstName</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">lastName</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">email</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">phone</span><span class="p">,</span><span class="w"> </span><span class="n">Address</span><span class="w"> </span><span class="n">address</span><span class="p">,</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">permissions</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>

<p><strong>Good:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">createUser</span><span class="p">(</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">firstName</span><span class="p">,</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">lastName</span><span class="p">,</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">email</span><span class="p">,</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">phone</span><span class="p">,</span>
<span class="w">    </span><span class="n">Address</span><span class="w"> </span><span class="n">address</span><span class="p">,</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">permissions</span>
<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="team-conventions">Team Conventions<a class="header-link" href="#team-conventions" title="Permanent link">&para;</a></h3>
<p>Use linters and formatters:
- <strong>JavaScript</strong>: ESLint, Prettier
- <strong>Python</strong>: pylint, black
- <strong>Java</strong>: Checkstyle, Google Java Format
- <strong>C++</strong>: clang-format</p>
<h2 id="summary">Summary<a class="header-link" href="#summary" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Principle</th>
<th>Guideline</th>
</tr>
</thead>
<tbody>
<tr>
<td>Names</td>
<td>Reveal intent, avoid disinformation, use pronounceable names</td>
</tr>
<tr>
<td>Functions</td>
<td>Small, do one thing, few arguments, no side effects</td>
</tr>
<tr>
<td>Comments</td>
<td>Explain why, not what; prefer self-documenting code</td>
</tr>
<tr>
<td>DRY</td>
<td>Don't repeat yourself</td>
</tr>
<tr>
<td>KISS</td>
<td>Keep it simple</td>
</tr>
<tr>
<td>YAGNI</td>
<td>You aren't gonna need it</td>
</tr>
<tr>
<td>Boy Scout Rule</td>
<td>Leave code better than you found it</td>
</tr>
</tbody>
</table>
<p><strong>Code smells to watch for:</strong>
- Long methods/large classes
- Feature envy
- Data clumps
- Shotgun surgery
- Primitive obsession
- Switch statements (consider polymorphism)
- Dead code</p>
<h2 id="exercises">Exercises<a class="header-link" href="#exercises" title="Permanent link">&para;</a></h2>
<h3 id="exercise-1-refactor-this-code">Exercise 1: Refactor This Code<a class="header-link" href="#exercise-1-refactor-this-code" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">p</span><span class="p">(</span><span class="n">o</span><span class="p">):</span>
    <span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">o</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">]:</span>
        <span class="n">t</span> <span class="o">+=</span> <span class="n">i</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">i</span><span class="p">[</span><span class="s1">&#39;q&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">o</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">):</span>
        <span class="n">d</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="k">if</span> <span class="n">o</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;SAVE10&#39;</span> <span class="k">else</span> <span class="mf">0.2</span> <span class="k">if</span> <span class="n">o</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;SAVE20&#39;</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">t</span> <span class="o">-</span> <span class="p">(</span><span class="n">t</span> <span class="o">*</span> <span class="n">d</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">t</span>
</code></pre></div>

<p>Refactor this to follow clean code principles.</p>
<h3 id="exercise-2-identify-code-smells">Exercise 2: Identify Code Smells<a class="header-link" href="#exercise-2-identify-code-smells" title="Permanent link">&para;</a></h3>
<p>Review this code and identify at least 5 code smells:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserManager</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">type</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;create&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// 50 lines of user creation logic</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">type</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;update&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// 50 lines of user update logic</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">type</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;delete&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// 50 lines of user deletion logic</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getUserFirstName</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">db</span><span class="p">.</span><span class="na">query</span><span class="p">(</span><span class="s">&quot;SELECT * FROM users WHERE id = &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">id</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">data</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getUserLastName</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">db</span><span class="p">.</span><span class="na">query</span><span class="p">(</span><span class="s">&quot;SELECT * FROM users WHERE id = &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">id</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">data</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getUserEmail</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">db</span><span class="p">.</span><span class="na">query</span><span class="p">(</span><span class="s">&quot;SELECT * FROM users WHERE id = &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">id</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">data</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="exercise-3-write-clean-functions">Exercise 3: Write Clean Functions<a class="header-link" href="#exercise-3-write-clean-functions" title="Permanent link">&para;</a></h3>
<p>Rewrite this function to follow the principles of clean code:</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">validateAndProcessForm</span><span class="p">(</span><span class="nx">formData</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">formData</span><span class="p">.</span><span class="nx">email</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="nx">formData</span><span class="p">.</span><span class="nx">email</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="s1">&#39;@&#39;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Invalid email&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">formData</span><span class="p">.</span><span class="nx">password</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">formData</span><span class="p">.</span><span class="nx">password</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">8</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Password too short&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">formData</span><span class="p">.</span><span class="nx">password</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nx">formData</span><span class="p">.</span><span class="nx">confirmPassword</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Passwords do not match&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="nx">formData</span><span class="p">.</span><span class="nx">email</span><span class="p">,</span>
<span class="w">        </span><span class="nx">password</span><span class="o">:</span><span class="w"> </span><span class="nx">hash</span><span class="p">(</span><span class="nx">formData</span><span class="p">.</span><span class="nx">password</span><span class="p">),</span>
<span class="w">        </span><span class="nx">created</span><span class="o">:</span><span class="w"> </span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="nx">db</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span>
<span class="w">    </span><span class="nx">sendWelcomeEmail</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">email</span><span class="p">);</span>
<span class="w">    </span><span class="nx">redirectToHomePage</span><span class="p">();</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="exercise-4-apply-boy-scout-rule">Exercise 4: Apply Boy Scout Rule<a class="header-link" href="#exercise-4-apply-boy-scout-rule" title="Permanent link">&para;</a></h3>
<p>Find a file in your codebase and make it slightly better:
1. Rename one poorly-named variable
2. Extract one long method
3. Remove one piece of dead code
4. Add one explanatory variable</p>
<p>Document your changes.</p>
<h3 id="exercise-5-code-review-checklist">Exercise 5: Code Review Checklist<a class="header-link" href="#exercise-5-code-review-checklist" title="Permanent link">&para;</a></h3>
<p>Create a code review checklist based on this lesson. Include at least:
- 5 naming checks
- 5 function checks
- 5 code smell checks
- 3 comment checks</p>
<hr />
<p><strong>Previous</strong>: <a href="07_Design_Patterns.md">07_Design_Patterns.md</a>
<strong>Next</strong>: <a href="09_Error_Handling.md">09_Error_Handling.md</a></p>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/Programming/07_Design_Patterns.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Design Patterns</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">üîó</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/Programming/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">üìã</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/Programming/09_Error_Handling.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Error Handling Strategies</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">‚Üë</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'en';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}