{% raw %}
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testing Fundamentals - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/en/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/en/" class="nav-item ">
                    <span class="nav-icon">üè†</span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">üíª</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/en/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" selected>
                        English
                    </option>
                    
                    <option value="ko" >
                        ÌïúÍµ≠Ïñ¥
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">‚òÄÔ∏è</span>
                    <span class="theme-icon dark">üåô</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/en/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/en/Programming/">Programming</a>
    <span class="separator">/</span>
    <span class="current">Testing Fundamentals</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>Testing Fundamentals</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/Programming/09_Error_Handling.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Error Handling Strategies</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">üîó</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/Programming/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">üìã</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/Programming/11_Debugging_and_Profiling.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Debugging & Profiling</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#why-test">Why Test?</a><ul>
<li><a href="#1-confidence">1. Confidence</a></li>
<li><a href="#2-regression-prevention">2. Regression Prevention</a></li>
<li><a href="#3-documentation">3. Documentation</a></li>
<li><a href="#4-design-feedback">4. Design Feedback</a></li>
</ul>
</li>
<li><a href="#the-test-pyramid">The Test Pyramid</a></li>
<li><a href="#unit-testing">Unit Testing</a><ul>
<li><a href="#what-is-a-unit">What is a Unit?</a></li>
<li><a href="#structure-arrange-act-assert-aaa">Structure: Arrange-Act-Assert (AAA)</a></li>
<li><a href="#naming-conventions">Naming Conventions</a></li>
<li><a href="#examples-in-multiple-languages">Examples in Multiple Languages</a></li>
</ul>
</li>
<li><a href="#test-driven-development-tdd">Test-Driven Development (TDD)</a><ul>
<li><a href="#the-red-green-refactor-cycle">The Red-Green-Refactor Cycle</a></li>
<li><a href="#example-implementing-a-stack-with-tdd">Example: Implementing a Stack with TDD</a></li>
<li><a href="#benefits-of-tdd">Benefits of TDD</a></li>
<li><a href="#when-tdd-works-well">When TDD Works Well</a></li>
<li><a href="#when-tdd-is-challenging">When TDD is Challenging</a></li>
</ul>
</li>
<li><a href="#behavior-driven-development-bdd">Behavior-Driven Development (BDD)</a><ul>
<li><a href="#givenwhenthen-syntax">Given/When/Then Syntax</a></li>
<li><a href="#tools-cucumber-behave-jest">Tools: Cucumber, Behave, Jest</a></li>
<li><a href="#user-stories-acceptance-criteria-tests">User Stories ‚Üí Acceptance Criteria ‚Üí Tests</a></li>
</ul>
</li>
<li><a href="#test-doubles">Test Doubles</a><ul>
<li><a href="#types-of-test-doubles">Types of Test Doubles</a><ul>
<li><a href="#1-dummy">1. Dummy</a></li>
<li><a href="#2-stub">2. Stub</a></li>
<li><a href="#3-mock">3. Mock</a></li>
<li><a href="#4-spy">4. Spy</a></li>
<li><a href="#5-fake">5. Fake</a></li>
</ul>
</li>
<li><a href="#when-to-use-each">When to Use Each</a></li>
</ul>
</li>
<li><a href="#integration-testing">Integration Testing</a><ul>
<li><a href="#database-tests">Database Tests</a></li>
<li><a href="#api-tests">API Tests</a></li>
<li><a href="#test-containers">Test Containers</a></li>
</ul>
</li>
<li><a href="#end-to-end-e2e-testing">End-to-End (E2E) Testing</a><ul>
<li><a href="#browser-automation-selenium-playwright-cypress">Browser Automation: Selenium, Playwright, Cypress</a></li>
<li><a href="#when-e2e-is-worth-the-cost">When E2E is Worth the Cost</a></li>
</ul>
</li>
<li><a href="#code-coverage">Code Coverage</a><ul>
<li><a href="#types-of-coverage">Types of Coverage</a></li>
<li><a href="#the-100-coverage-myth">The 100% Coverage Myth</a></li>
</ul>
</li>
<li><a href="#property-based-testing">Property-Based Testing</a><ul>
<li><a href="#hypothesis-python">Hypothesis (Python)</a></li>
<li><a href="#fast-check-javascript">fast-check (JavaScript)</a></li>
</ul>
</li>
<li><a href="#mutation-testing">Mutation Testing</a></li>
<li><a href="#summary">Summary</a></li>
<li><a href="#exercises">Exercises</a><ul>
<li><a href="#exercise-1-write-unit-tests">Exercise 1: Write Unit Tests</a></li>
<li><a href="#exercise-2-apply-tdd">Exercise 2: Apply TDD</a></li>
<li><a href="#exercise-3-test-doubles">Exercise 3: Test Doubles</a></li>
<li><a href="#exercise-4-integration-test">Exercise 4: Integration Test</a></li>
<li><a href="#exercise-5-property-based-testing">Exercise 5: Property-Based Testing</a></li>
</ul>
</li>
<li><a href="#navigation">Navigation</a></li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="testing-fundamentals">Testing Fundamentals<a class="header-link" href="#testing-fundamentals" title="Permanent link">&para;</a></h1>
<blockquote>
<p><strong>Topic</strong>: Programming
<strong>Lesson</strong>: 10 of 16
<strong>Prerequisites</strong>: Functions and Methods, Error Handling, Object-Oriented Programming
<strong>Objective</strong>: Master different types of testing (unit, integration, E2E), understand TDD and BDD, learn to use test doubles effectively, and write tests that provide confidence without brittleness.</p>
</blockquote>
<hr />
<h2 id="introduction">Introduction<a class="header-link" href="#introduction" title="Permanent link">&para;</a></h2>
<p>Testing is not just about finding bugs ‚Äì it's about building confidence in your code, enabling refactoring, providing documentation, and improving design. Well-tested code is easier to change, maintain, and understand.</p>
<p>This lesson covers testing fundamentals across multiple languages and testing paradigms, from unit tests to end-to-end tests, from traditional testing to Test-Driven Development, and from mocks to property-based testing.</p>
<hr />
<h2 id="why-test">Why Test?<a class="header-link" href="#why-test" title="Permanent link">&para;</a></h2>
<h3 id="1-confidence">1. Confidence<a class="header-link" href="#1-confidence" title="Permanent link">&para;</a></h3>
<p>Tests give you confidence that your code works as intended and continues to work after changes.</p>
<h3 id="2-regression-prevention">2. Regression Prevention<a class="header-link" href="#2-regression-prevention" title="Permanent link">&para;</a></h3>
<p>Tests catch bugs when you introduce them, not weeks later in production.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Without tests: You change something, deploy, and hope it works</span>
<span class="k">def</span><span class="w"> </span><span class="nf">calculate_discount</span><span class="p">(</span><span class="n">price</span><span class="p">,</span> <span class="n">customer_tier</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">customer_tier</span> <span class="o">==</span> <span class="s2">&quot;gold&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">price</span> <span class="o">*</span> <span class="mf">0.8</span>  <span class="c1"># Changed from 0.9 - did we break something?</span>
    <span class="k">return</span> <span class="n">price</span>

<span class="c1"># With tests: You know immediately if you break something</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_gold_discount</span><span class="p">():</span>
    <span class="k">assert</span> <span class="n">calculate_discount</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="s2">&quot;gold&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">80</span>
</code></pre></div>

<h3 id="3-documentation">3. Documentation<a class="header-link" href="#3-documentation" title="Permanent link">&para;</a></h3>
<p>Tests document how your code is supposed to be used:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// This test documents the API behavior better than comments</span>
<span class="nx">test</span><span class="p">(</span><span class="s1">&#39;User registration with valid data creates a new user&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">userData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;alice&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;alice@example.com&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">password</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;securepassword123&#39;</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">registerUser</span><span class="p">(</span><span class="nx">userData</span><span class="p">);</span>

<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">id</span><span class="p">).</span><span class="nx">toBeDefined</span><span class="p">();</span>
<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">username</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;alice&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">email</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;alice@example.com&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">hashedPassword</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;securepassword123&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">// Password should be hashed</span>
<span class="p">});</span>
</code></pre></div>

<h3 id="4-design-feedback">4. Design Feedback<a class="header-link" href="#4-design-feedback" title="Permanent link">&para;</a></h3>
<p>If code is hard to test, it's often poorly designed:
- Too many dependencies ‚Üí tight coupling
- Functions doing too much ‚Üí violation of Single Responsibility
- Hard to mock ‚Üí dependency inversion needed</p>
<p>Testing drives better design.</p>
<hr />
<h2 id="the-test-pyramid">The Test Pyramid<a class="header-link" href="#the-test-pyramid" title="Permanent link">&para;</a></h2>
<p>The test pyramid guides how to distribute your testing effort:</p>
<div class="highlight"><pre><span></span><code>         /\
        /  \  E2E Tests (few, slow, expensive)
       /____\
      /      \
     / Integ. \ Integration Tests (some, medium speed)
    /__________\
   /            \
  /     Unit     \ Unit Tests (many, fast, cheap)
 /________________\
</code></pre></div>

<p><strong>Distribution:</strong>
- <strong>70% Unit tests</strong>: Test individual functions/classes in isolation
- <strong>20% Integration tests</strong>: Test components working together
- <strong>10% E2E tests</strong>: Test the entire system from user perspective</p>
<p><strong>Why this ratio?</strong>
- Unit tests are fast, pinpoint failures, easy to maintain
- Integration tests catch interface issues
- E2E tests catch real user workflows but are slow and brittle</p>
<hr />
<h2 id="unit-testing">Unit Testing<a class="header-link" href="#unit-testing" title="Permanent link">&para;</a></h2>
<p>Unit tests verify that individual units (functions, methods, classes) work correctly in isolation.</p>
<h3 id="what-is-a-unit">What is a Unit?<a class="header-link" href="#what-is-a-unit" title="Permanent link">&para;</a></h3>
<p>A "unit" is the smallest testable part of your application:
- A function
- A method
- A class
- A module (in some contexts)</p>
<h3 id="structure-arrange-act-assert-aaa">Structure: Arrange-Act-Assert (AAA)<a class="header-link" href="#structure-arrange-act-assert-aaa" title="Permanent link">&para;</a></h3>
<p>Also called Given-When-Then:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_shopping_cart_total</span><span class="p">():</span>
    <span class="c1"># Arrange (Given): Set up test data and preconditions</span>
    <span class="n">cart</span> <span class="o">=</span> <span class="n">ShoppingCart</span><span class="p">()</span>
    <span class="n">cart</span><span class="o">.</span><span class="n">add_item</span><span class="p">(</span><span class="n">Product</span><span class="p">(</span><span class="s2">&quot;Book&quot;</span><span class="p">,</span> <span class="mf">10.00</span><span class="p">),</span> <span class="n">quantity</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">cart</span><span class="o">.</span><span class="n">add_item</span><span class="p">(</span><span class="n">Product</span><span class="p">(</span><span class="s2">&quot;Pen&quot;</span><span class="p">,</span> <span class="mf">1.50</span><span class="p">),</span> <span class="n">quantity</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

    <span class="c1"># Act (When): Execute the behavior you&#39;re testing</span>
    <span class="n">total</span> <span class="o">=</span> <span class="n">cart</span><span class="o">.</span><span class="n">calculate_total</span><span class="p">()</span>

    <span class="c1"># Assert (Then): Verify the result</span>
    <span class="k">assert</span> <span class="n">total</span> <span class="o">==</span> <span class="mf">24.50</span>
</code></pre></div>

<h3 id="naming-conventions">Naming Conventions<a class="header-link" href="#naming-conventions" title="Permanent link">&para;</a></h3>
<p>Good test names describe what they test and what the expected outcome is:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Convention: test_&lt;what&gt;_&lt;condition&gt;_&lt;expected_result&gt;</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_divide_by_zero_raises_exception</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">):</span>
        <span class="n">divide</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_user_login_with_wrong_password_returns_error</span><span class="p">():</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">login</span><span class="p">(</span><span class="s2">&quot;alice&quot;</span><span class="p">,</span> <span class="s2">&quot;wrongpassword&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span><span class="o">.</span><span class="n">success</span> <span class="ow">is</span> <span class="kc">False</span>
    <span class="k">assert</span> <span class="s2">&quot;Invalid password&quot;</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">error_message</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_empty_cart_has_zero_total</span><span class="p">():</span>
    <span class="n">cart</span> <span class="o">=</span> <span class="n">ShoppingCart</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">cart</span><span class="o">.</span><span class="n">calculate_total</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span>
</code></pre></div>

<p>Alternative convention (BDD-style):</p>
<div class="highlight"><pre><span></span><code><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;ShoppingCart&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;when empty&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should have a total of 0&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">cart</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ShoppingCart</span><span class="p">();</span>
<span class="w">            </span><span class="nx">expect</span><span class="p">(</span><span class="nx">cart</span><span class="p">.</span><span class="nx">calculateTotal</span><span class="p">()).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;when items are added&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should calculate the correct total&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">cart</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ShoppingCart</span><span class="p">();</span>
<span class="w">            </span><span class="nx">cart</span><span class="p">.</span><span class="nx">addItem</span><span class="p">({</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Book&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">price</span><span class="o">:</span><span class="w"> </span><span class="mf">10</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mf">2</span><span class="p">);</span>
<span class="w">            </span><span class="nx">cart</span><span class="p">.</span><span class="nx">addItem</span><span class="p">({</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Pen&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">price</span><span class="o">:</span><span class="w"> </span><span class="mf">1.5</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mf">3</span><span class="p">);</span>
<span class="w">            </span><span class="nx">expect</span><span class="p">(</span><span class="nx">cart</span><span class="p">.</span><span class="nx">calculateTotal</span><span class="p">()).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">24.5</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>

<h3 id="examples-in-multiple-languages">Examples in Multiple Languages<a class="header-link" href="#examples-in-multiple-languages" title="Permanent link">&para;</a></h3>
<p><strong>Python (pytest):</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">pytest</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">calculator</span><span class="w"> </span><span class="kn">import</span> <span class="n">Calculator</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_addition</span><span class="p">():</span>
    <span class="n">calc</span> <span class="o">=</span> <span class="n">Calculator</span><span class="p">()</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">calc</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="mi">5</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_subtraction</span><span class="p">():</span>
    <span class="n">calc</span> <span class="o">=</span> <span class="n">Calculator</span><span class="p">()</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">calc</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="mi">6</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_division_by_zero</span><span class="p">():</span>
    <span class="n">calc</span> <span class="o">=</span> <span class="n">Calculator</span><span class="p">()</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;Cannot divide by zero&quot;</span><span class="p">):</span>
        <span class="n">calc</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;a,b,expected&quot;</span><span class="p">,</span> <span class="p">[</span>
    <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
<span class="p">])</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_addition_parametrized</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">expected</span><span class="p">):</span>
    <span class="n">calc</span> <span class="o">=</span> <span class="n">Calculator</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">calc</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected</span>
</code></pre></div>

<p><strong>JavaScript (Jest):</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">Calculator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./calculator&#39;</span><span class="p">);</span>

<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;Calculator&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">calc</span><span class="p">;</span>

<span class="w">    </span><span class="nx">beforeEach</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">calc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Calculator</span><span class="p">();</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">test</span><span class="p">(</span><span class="s1">&#39;adds two numbers correctly&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">calc</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">)).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">5</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">test</span><span class="p">(</span><span class="s1">&#39;subtracts two numbers correctly&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">calc</span><span class="p">.</span><span class="nx">subtract</span><span class="p">(</span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">)).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">6</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">test</span><span class="p">(</span><span class="s1">&#39;throws error when dividing by zero&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">calc</span><span class="p">.</span><span class="nx">divide</span><span class="p">(</span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">)).</span><span class="nx">toThrow</span><span class="p">(</span><span class="s1">&#39;Cannot divide by zero&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">test</span><span class="p">.</span><span class="nx">each</span><span class="p">([</span>
<span class="w">        </span><span class="p">[</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">],</span>
<span class="w">        </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">],</span>
<span class="w">        </span><span class="p">[</span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">],</span>
<span class="w">        </span><span class="p">[</span><span class="mf">100</span><span class="p">,</span><span class="w"> </span><span class="mf">200</span><span class="p">,</span><span class="w"> </span><span class="mf">300</span><span class="p">]</span>
<span class="w">    </span><span class="p">])(</span><span class="s1">&#39;add(%i, %i) should return %i&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">,</span><span class="w"> </span><span class="nx">expected</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">calc</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">)).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">expected</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>

<p><strong>Java (JUnit 5):</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.Test</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.BeforeEach</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.params.ParameterizedTest</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.params.provider.CsvSource</span><span class="p">;</span>
<span class="kn">import static</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.Assertions.*</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">CalculatorTest</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Calculator</span><span class="w"> </span><span class="n">calc</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@BeforeEach</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setUp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">calc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Calculator</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">testAddition</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">assertEquals</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="n">calc</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">testSubtraction</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">assertEquals</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="n">calc</span><span class="p">.</span><span class="na">subtract</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">testDivisionByZero</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Exception</span><span class="w"> </span><span class="n">exception</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">assertThrows</span><span class="p">(</span>
<span class="w">            </span><span class="n">IllegalArgumentException</span><span class="p">.</span><span class="na">class</span><span class="p">,</span>
<span class="w">            </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">calc</span><span class="p">.</span><span class="na">divide</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">        </span><span class="n">assertTrue</span><span class="p">(</span><span class="n">exception</span><span class="p">.</span><span class="na">getMessage</span><span class="p">().</span><span class="na">contains</span><span class="p">(</span><span class="s">&quot;Cannot divide by zero&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@ParameterizedTest</span>
<span class="w">    </span><span class="nd">@CsvSource</span><span class="p">({</span>
<span class="w">        </span><span class="s">&quot;2, 3, 5&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s">&quot;0, 0, 0&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s">&quot;-1, 1, 0&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s">&quot;100, 200, 300&quot;</span>
<span class="w">    </span><span class="p">})</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">testAdditionParameterized</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">expected</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">assertEquals</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span><span class="w"> </span><span class="n">calc</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h2 id="test-driven-development-tdd">Test-Driven Development (TDD)<a class="header-link" href="#test-driven-development-tdd" title="Permanent link">&para;</a></h2>
<p>TDD is a development methodology where you write tests <strong>before</strong> writing the implementation code.</p>
<h3 id="the-red-green-refactor-cycle">The Red-Green-Refactor Cycle<a class="header-link" href="#the-red-green-refactor-cycle" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="n">RED</span><span class="p">:</span><span class="w">     </span><span class="n">Write</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">failing</span><span class="w"> </span><span class="n">test</span>
<span class="w">     </span><span class="err">‚Üì</span>
<span class="mf">2.</span><span class="w"> </span><span class="n">GREEN</span><span class="p">:</span><span class="w">   </span><span class="n">Write</span><span class="w"> </span><span class="n">minimal</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">pass</span>
<span class="w">     </span><span class="err">‚Üì</span>
<span class="mf">3.</span><span class="w"> </span><span class="n">REFACTOR</span><span class="p">:</span><span class="w"> </span><span class="n">Improve</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">changing</span><span class="w"> </span><span class="n">behavior</span>
<span class="w">     </span><span class="err">‚Üì</span>
<span class="w">     </span><span class="p">(</span><span class="n">repeat</span><span class="p">)</span>
</code></pre></div>

<h3 id="example-implementing-a-stack-with-tdd">Example: Implementing a Stack with TDD<a class="header-link" href="#example-implementing-a-stack-with-tdd" title="Permanent link">&para;</a></h3>
<p><strong>Step 1: RED ‚Äì Write a failing test</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">pytest</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">stack</span><span class="w"> </span><span class="kn">import</span> <span class="n">Stack</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_new_stack_is_empty</span><span class="p">():</span>
    <span class="n">stack</span> <span class="o">=</span> <span class="n">Stack</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">stack</span><span class="o">.</span><span class="n">is_empty</span><span class="p">()</span> <span class="o">==</span> <span class="kc">True</span>
</code></pre></div>

<p>Run: ‚ùå FAIL (Stack class doesn't exist)</p>
<p><strong>Step 2: GREEN ‚Äì Make it pass (minimal code)</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Stack</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>

<p>Run: ‚úÖ PASS</p>
<p><strong>Step 3: Add another test (RED)</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_push_adds_element</span><span class="p">():</span>
    <span class="n">stack</span> <span class="o">=</span> <span class="n">Stack</span><span class="p">()</span>
    <span class="n">stack</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">stack</span><span class="o">.</span><span class="n">is_empty</span><span class="p">()</span> <span class="o">==</span> <span class="kc">False</span>
</code></pre></div>

<p>Run: ‚ùå FAIL (push doesn't exist, is_empty always returns True)</p>
<p><strong>Step 4: GREEN ‚Äì Make it pass</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Stack</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">push</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</code></pre></div>

<p>Run: ‚úÖ PASS</p>
<p><strong>Step 5: Add more tests and implement pop, peek, etc.</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_pop_removes_and_returns_top_element</span><span class="p">():</span>
    <span class="n">stack</span> <span class="o">=</span> <span class="n">Stack</span><span class="p">()</span>
    <span class="n">stack</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">stack</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span> <span class="o">==</span> <span class="mi">10</span>
    <span class="k">assert</span> <span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span> <span class="o">==</span> <span class="mi">5</span>
    <span class="k">assert</span> <span class="n">stack</span><span class="o">.</span><span class="n">is_empty</span><span class="p">()</span> <span class="o">==</span> <span class="kc">True</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_pop_on_empty_stack_raises_error</span><span class="p">():</span>
    <span class="n">stack</span> <span class="o">=</span> <span class="n">Stack</span><span class="p">()</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">IndexError</span><span class="p">):</span>
        <span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_peek_returns_top_without_removing</span><span class="p">():</span>
    <span class="n">stack</span> <span class="o">=</span> <span class="n">Stack</span><span class="p">()</span>
    <span class="n">stack</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">stack</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">stack</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="o">==</span> <span class="mi">10</span>
    <span class="k">assert</span> <span class="n">stack</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="o">==</span> <span class="mi">10</span>  <span class="c1"># Still there</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="n">stack</span><span class="o">.</span><span class="n">is_empty</span><span class="p">()</span>
</code></pre></div>

<p><strong>Step 6: REFACTOR</strong></p>
<p>Now that tests are passing, refactor for clarity:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Stack</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A last-in-first-out (LIFO) stack data structure.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_items</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return True if the stack has no elements.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">push</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add an item to the top of the stack.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">pop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove and return the top item. Raises IndexError if empty.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;pop from empty stack&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">peek</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the top item without removing it. Raises IndexError if empty.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;peek from empty stack&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the number of items in the stack.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="p">)</span>
</code></pre></div>

<p>Tests still pass ‚úÖ, but code is cleaner.</p>
<h3 id="benefits-of-tdd">Benefits of TDD<a class="header-link" href="#benefits-of-tdd" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Better design</strong>: Writing tests first forces you to think about the interface</li>
<li><strong>Complete coverage</strong>: Every line of code has a test (you wrote the test first!)</li>
<li><strong>Confidence</strong>: You know the code works because you've tested it continuously</li>
<li><strong>Documentation</strong>: Tests document the expected behavior</li>
<li><strong>Less debugging</strong>: Bugs are caught immediately</li>
</ol>
<h3 id="when-tdd-works-well">When TDD Works Well<a class="header-link" href="#when-tdd-works-well" title="Permanent link">&para;</a></h3>
<ul>
<li>Algorithmic code with clear inputs/outputs</li>
<li>Utility functions and libraries</li>
<li>Bug fixes (write a test that reproduces the bug, then fix it)</li>
<li>Refactoring (tests ensure behavior doesn't change)</li>
</ul>
<h3 id="when-tdd-is-challenging">When TDD is Challenging<a class="header-link" href="#when-tdd-is-challenging" title="Permanent link">&para;</a></h3>
<ul>
<li>Exploratory coding (you don't know what you're building yet)</li>
<li>UI code (hard to test interactions before they exist)</li>
<li>Complex integrations (many unknowns)</li>
<li>Rapid prototyping</li>
</ul>
<p><strong>Note:</strong> TDD is a tool, not a religion. Use it when it helps, skip it when it hinders.</p>
<hr />
<h2 id="behavior-driven-development-bdd">Behavior-Driven Development (BDD)<a class="header-link" href="#behavior-driven-development-bdd" title="Permanent link">&para;</a></h2>
<p>BDD extends TDD with a focus on behavior from the user's perspective.</p>
<h3 id="givenwhenthen-syntax">Given/When/Then Syntax<a class="header-link" href="#givenwhenthen-syntax" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">Feature:</span><span class="nf"> User Login</span>

<span class="nf">  </span><span class="k">Scenario:</span><span class="nf"> Successful login with valid credentials</span>
<span class="k">    Given </span><span class="nf">a user with username &quot;</span><span class="s">alice</span><span class="nf">&quot; and password &quot;</span><span class="s">secret123</span><span class="nf">&quot;</span>
<span class="nf">    </span><span class="k">When </span><span class="nf">the user attempts to log in with correct credentials</span>
<span class="nf">    </span><span class="k">Then </span><span class="nf">the user should be logged in</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">the user should see their dashboard</span>

<span class="nf">  </span><span class="k">Scenario:</span><span class="nf"> Failed login with invalid password</span>
<span class="k">    Given </span><span class="nf">a user with username &quot;</span><span class="s">alice</span><span class="nf">&quot; and password &quot;</span><span class="s">secret123</span><span class="nf">&quot;</span>
<span class="nf">    </span><span class="k">When </span><span class="nf">the user attempts to log in with password &quot;</span><span class="s">wrongpassword</span><span class="nf">&quot;</span>
<span class="nf">    </span><span class="k">Then </span><span class="nf">the user should not be logged in</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">the user should see an error message &quot;</span><span class="s">Invalid password</span><span class="nf">&quot;</span>
</code></pre></div>

<h3 id="tools-cucumber-behave-jest">Tools: Cucumber, Behave, Jest<a class="header-link" href="#tools-cucumber-behave-jest" title="Permanent link">&para;</a></h3>
<p><strong>Python (Behave):</strong></p>
<div class="highlight"><pre><span></span><code><span class="c"># features/login.feature</span>
<span class="k">Feature:</span><span class="nf"> User Login</span>
<span class="nf">  </span><span class="k">Scenario:</span><span class="nf"> Successful login</span>
<span class="k">    Given </span><span class="nf">a user &quot;</span><span class="s">alice</span><span class="nf">&quot; with password &quot;</span><span class="s">secret123</span><span class="nf">&quot;</span>
<span class="nf">    </span><span class="k">When </span><span class="nf">I login with username &quot;</span><span class="s">alice</span><span class="nf">&quot; and password &quot;</span><span class="s">secret123</span><span class="nf">&quot;</span>
<span class="nf">    </span><span class="k">Then </span><span class="nf">I should be logged in</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1"># features/steps/login_steps.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">behave</span><span class="w"> </span><span class="kn">import</span> <span class="n">given</span><span class="p">,</span> <span class="n">when</span><span class="p">,</span> <span class="n">then</span>

<span class="nd">@given</span><span class="p">(</span><span class="s1">&#39;a user &quot;</span><span class="si">{username}</span><span class="s1">&quot; with password &quot;</span><span class="si">{password}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">step_create_user</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
    <span class="n">context</span><span class="o">.</span><span class="n">users</span> <span class="o">=</span> <span class="p">{</span><span class="n">username</span><span class="p">:</span> <span class="n">password</span><span class="p">}</span>

<span class="nd">@when</span><span class="p">(</span><span class="s1">&#39;I login with username &quot;</span><span class="si">{username}</span><span class="s1">&quot; and password &quot;</span><span class="si">{password}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">step_login</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
    <span class="n">expected_password</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">users</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="p">)</span>
    <span class="n">context</span><span class="o">.</span><span class="n">login_success</span> <span class="o">=</span> <span class="p">(</span><span class="n">expected_password</span> <span class="o">==</span> <span class="n">password</span><span class="p">)</span>

<span class="nd">@then</span><span class="p">(</span><span class="s1">&#39;I should be logged in&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">step_verify_login</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">context</span><span class="o">.</span><span class="n">login_success</span><span class="p">,</span> <span class="s2">&quot;Login should succeed&quot;</span>
</code></pre></div>

<p><strong>JavaScript (Jest with describe/it):</strong></p>
<div class="highlight"><pre><span></span><code><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;User Login&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;given a user with valid credentials&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">user</span><span class="p">;</span>

<span class="w">        </span><span class="nx">beforeEach</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createUser</span><span class="p">(</span><span class="s1">&#39;alice&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;secret123&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>

<span class="w">        </span><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;when the user logs in with correct credentials&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="nx">result</span><span class="p">;</span>

<span class="w">            </span><span class="nx">beforeEach</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">login</span><span class="p">(</span><span class="s1">&#39;alice&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;secret123&#39;</span><span class="p">);</span>
<span class="w">            </span><span class="p">});</span>

<span class="w">            </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should succeed&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">expect</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">success</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">            </span><span class="p">});</span>

<span class="w">            </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should return the user object&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">expect</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">username</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;alice&#39;</span><span class="p">);</span>
<span class="w">            </span><span class="p">});</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>

<h3 id="user-stories-acceptance-criteria-tests">User Stories ‚Üí Acceptance Criteria ‚Üí Tests<a class="header-link" href="#user-stories-acceptance-criteria-tests" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>User Story:
  As a customer
  I want to add items to my shopping cart
  So that I can purchase multiple items at once

Acceptance Criteria:
  ‚úì Items can be added to the cart
  ‚úì The cart displays the correct quantity
  ‚úì The cart shows the correct total price
  ‚úì Items can be removed from the cart

Tests:
  test_add_item_to_cart()
  test_cart_displays_quantity()
  test_cart_calculates_total()
  test_remove_item_from_cart()
</code></pre></div>

<hr />
<h2 id="test-doubles">Test Doubles<a class="header-link" href="#test-doubles" title="Permanent link">&para;</a></h2>
<p>Test doubles are objects that stand in for real dependencies during testing.</p>
<h3 id="types-of-test-doubles">Types of Test Doubles<a class="header-link" href="#types-of-test-doubles" title="Permanent link">&para;</a></h3>
<h4 id="1-dummy">1. Dummy<a class="header-link" href="#1-dummy" title="Permanent link">&para;</a></h4>
<p>Placeholder object, never actually used:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_send_email</span><span class="p">():</span>
    <span class="c1"># We don&#39;t care about the logger, but the function requires one</span>
    <span class="n">dummy_logger</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">send_email</span><span class="p">(</span><span class="s2">&quot;alice@example.com&quot;</span><span class="p">,</span> <span class="s2">&quot;Hello&quot;</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">dummy_logger</span><span class="p">)</span>
</code></pre></div>

<h4 id="2-stub">2. Stub<a class="header-link" href="#2-stub" title="Permanent link">&para;</a></h4>
<p>Returns predetermined data:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">StubUserRepository</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">find_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
        <span class="c1"># Always returns the same user, regardless of ID</span>
        <span class="k">return</span> <span class="n">User</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Alice&quot;</span><span class="p">,</span> <span class="n">email</span><span class="o">=</span><span class="s2">&quot;alice@example.com&quot;</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_user_service</span><span class="p">():</span>
    <span class="n">user_repo</span> <span class="o">=</span> <span class="n">StubUserRepository</span><span class="p">()</span>
    <span class="n">service</span> <span class="o">=</span> <span class="n">UserService</span><span class="p">(</span><span class="n">user_repo</span><span class="p">)</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">get_user_details</span><span class="p">(</span><span class="mi">999</span><span class="p">)</span>  <span class="c1"># ID doesn&#39;t matter</span>
    <span class="k">assert</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;Alice&quot;</span>
</code></pre></div>

<p><strong>JavaScript:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">stubDatabase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">findUser</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">id</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Alice&#39;</span><span class="w"> </span><span class="p">})</span><span class="w">  </span><span class="c1">// Always returns Alice</span>
<span class="p">};</span>

<span class="nx">test</span><span class="p">(</span><span class="s1">&#39;getUserDetails returns user from database&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">service</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">UserService</span><span class="p">(</span><span class="nx">stubDatabase</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">service</span><span class="p">.</span><span class="nx">getUserDetails</span><span class="p">(</span><span class="mf">999</span><span class="p">);</span>
<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;Alice&#39;</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>

<h4 id="3-mock">3. Mock<a class="header-link" href="#3-mock" title="Permanent link">&para;</a></h4>
<p>Verifies that specific methods are called with expected arguments:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">unittest.mock</span><span class="w"> </span><span class="kn">import</span> <span class="n">Mock</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_send_welcome_email</span><span class="p">():</span>
    <span class="c1"># Create a mock email service</span>
    <span class="n">mock_email_service</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>

    <span class="c1"># Use it in the code under test</span>
    <span class="n">user_service</span> <span class="o">=</span> <span class="n">UserService</span><span class="p">(</span><span class="n">email_service</span><span class="o">=</span><span class="n">mock_email_service</span><span class="p">)</span>
    <span class="n">user_service</span><span class="o">.</span><span class="n">register_user</span><span class="p">(</span><span class="s2">&quot;alice@example.com&quot;</span><span class="p">)</span>

    <span class="c1"># Verify the email service was called correctly</span>
    <span class="n">mock_email_service</span><span class="o">.</span><span class="n">send</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span>
        <span class="n">to</span><span class="o">=</span><span class="s2">&quot;alice@example.com&quot;</span><span class="p">,</span>
        <span class="n">subject</span><span class="o">=</span><span class="s2">&quot;Welcome!&quot;</span><span class="p">,</span>
        <span class="n">body</span><span class="o">=</span><span class="s2">&quot;Thank you for registering&quot;</span>
    <span class="p">)</span>
</code></pre></div>

<p><strong>JavaScript (Jest):</strong></p>
<div class="highlight"><pre><span></span><code><span class="nx">test</span><span class="p">(</span><span class="s1">&#39;registerUser sends a welcome email&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">mockEmailService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">send</span><span class="o">:</span><span class="w"> </span><span class="nx">jest</span><span class="p">.</span><span class="nx">fn</span><span class="p">()</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">userService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">UserService</span><span class="p">(</span><span class="nx">mockEmailService</span><span class="p">);</span>
<span class="w">    </span><span class="nx">userService</span><span class="p">.</span><span class="nx">registerUser</span><span class="p">(</span><span class="s1">&#39;alice@example.com&#39;</span><span class="p">);</span>

<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">mockEmailService</span><span class="p">.</span><span class="nx">send</span><span class="p">).</span><span class="nx">toHaveBeenCalledWith</span><span class="p">({</span>
<span class="w">        </span><span class="nx">to</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;alice@example.com&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">subject</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Welcome!&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Thank you for registering&#39;</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>

<h4 id="4-spy">4. Spy<a class="header-link" href="#4-spy" title="Permanent link">&para;</a></h4>
<p>Records how it was called, allowing post-execution verification:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">unittest.mock</span><span class="w"> </span><span class="kn">import</span> <span class="n">MagicMock</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_logger_spy</span><span class="p">():</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="n">MagicMock</span><span class="p">()</span>
    <span class="n">process_order</span><span class="p">(</span><span class="n">order_id</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>

    <span class="c1"># Verify logger was called</span>
    <span class="k">assert</span> <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">call_count</span> <span class="o">==</span> <span class="mi">2</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">assert_any_call</span><span class="p">(</span><span class="s2">&quot;Processing order 123&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">assert_any_call</span><span class="p">(</span><span class="s2">&quot;Order 123 completed&quot;</span><span class="p">)</span>
</code></pre></div>

<p><strong>JavaScript:</strong></p>
<div class="highlight"><pre><span></span><code><span class="nx">test</span><span class="p">(</span><span class="s1">&#39;processOrder logs progress&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">spyLogger</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">info</span><span class="o">:</span><span class="w"> </span><span class="nx">jest</span><span class="p">.</span><span class="nx">fn</span><span class="p">()</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="nx">processOrder</span><span class="p">(</span><span class="mf">123</span><span class="p">,</span><span class="w"> </span><span class="nx">spyLogger</span><span class="p">);</span>

<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">spyLogger</span><span class="p">.</span><span class="nx">info</span><span class="p">).</span><span class="nx">toHaveBeenCalledTimes</span><span class="p">(</span><span class="mf">2</span><span class="p">);</span>
<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">spyLogger</span><span class="p">.</span><span class="nx">info</span><span class="p">).</span><span class="nx">toHaveBeenCalledWith</span><span class="p">(</span><span class="s1">&#39;Processing order 123&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">spyLogger</span><span class="p">.</span><span class="nx">info</span><span class="p">).</span><span class="nx">toHaveBeenCalledWith</span><span class="p">(</span><span class="s1">&#39;Order 123 completed&#39;</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>

<h4 id="5-fake">5. Fake<a class="header-link" href="#5-fake" title="Permanent link">&para;</a></h4>
<p>A working implementation, but simpler than the real one:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">FakeDatabase</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;In-memory database for testing&quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">users</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">next_id</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">save_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">):</span>
        <span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">users</span><span class="p">[</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">user</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">next_id</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">user</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">find_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">users</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_user_service_with_fake_db</span><span class="p">():</span>
    <span class="n">fake_db</span> <span class="o">=</span> <span class="n">FakeDatabase</span><span class="p">()</span>
    <span class="n">service</span> <span class="o">=</span> <span class="n">UserService</span><span class="p">(</span><span class="n">database</span><span class="o">=</span><span class="n">fake_db</span><span class="p">)</span>

    <span class="n">user</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">create_user</span><span class="p">(</span><span class="s2">&quot;Alice&quot;</span><span class="p">,</span> <span class="s2">&quot;alice@example.com&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

    <span class="n">retrieved</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">get_user</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">retrieved</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;Alice&quot;</span>
</code></pre></div>

<h3 id="when-to-use-each">When to Use Each<a class="header-link" href="#when-to-use-each" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Type</th>
<th>Use When</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Dummy</strong></td>
<td>Parameter is required but not used</td>
<td>Logger that's never called</td>
</tr>
<tr>
<td><strong>Stub</strong></td>
<td>You need predetermined responses</td>
<td>Database returning test data</td>
</tr>
<tr>
<td><strong>Mock</strong></td>
<td>You want to verify interactions</td>
<td>Email service should be called</td>
</tr>
<tr>
<td><strong>Spy</strong></td>
<td>You want to observe behavior</td>
<td>Recording logger calls</td>
</tr>
<tr>
<td><strong>Fake</strong></td>
<td>You need a working but simpler implementation</td>
<td>In-memory database</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="integration-testing">Integration Testing<a class="header-link" href="#integration-testing" title="Permanent link">&para;</a></h2>
<p>Integration tests verify that components work together correctly.</p>
<h3 id="database-tests">Database Tests<a class="header-link" href="#database-tests" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">pytest</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_engine</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">sessionmaker</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">db_session</span><span class="p">():</span>
    <span class="c1"># Use an in-memory SQLite database for testing</span>
    <span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;sqlite:///:memory:&#39;</span><span class="p">)</span>
    <span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">Session</span> <span class="o">=</span> <span class="n">sessionmaker</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">session</span> <span class="o">=</span> <span class="n">Session</span><span class="p">()</span>
    <span class="k">yield</span> <span class="n">session</span>
    <span class="n">session</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_create_and_retrieve_user</span><span class="p">(</span><span class="n">db_session</span><span class="p">):</span>
    <span class="c1"># Create a user</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;alice&quot;</span><span class="p">,</span> <span class="n">email</span><span class="o">=</span><span class="s2">&quot;alice@example.com&quot;</span><span class="p">)</span>
    <span class="n">db_session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
    <span class="n">db_session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="c1"># Retrieve the user</span>
    <span class="n">retrieved</span> <span class="o">=</span> <span class="n">db_session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">User</span><span class="p">)</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;alice&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">retrieved</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="k">assert</span> <span class="n">retrieved</span><span class="o">.</span><span class="n">email</span> <span class="o">==</span> <span class="s2">&quot;alice@example.com&quot;</span>
</code></pre></div>

<h3 id="api-tests">API Tests<a class="header-link" href="#api-tests" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">pytest</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">app</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_app</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">client</span><span class="p">():</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">create_app</span><span class="p">({</span><span class="s1">&#39;TESTING&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">test_client</span><span class="p">()</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">client</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_get_users_endpoint</span><span class="p">(</span><span class="n">client</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/api/users&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span>
    <span class="k">assert</span> <span class="s1">&#39;users&#39;</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_create_user_endpoint</span><span class="p">(</span><span class="n">client</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;/api/users&#39;</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;alice&#39;</span><span class="p">,</span>
        <span class="s1">&#39;email&#39;</span><span class="p">:</span> <span class="s1">&#39;alice@example.com&#39;</span>
    <span class="p">})</span>
    <span class="k">assert</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span>
    <span class="k">assert</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;alice&#39;</span>
</code></pre></div>

<p><strong>JavaScript (Express + Supertest):</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;supertest&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./app&#39;</span><span class="p">);</span>

<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;User API&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">test</span><span class="p">(</span><span class="s1">&#39;GET /api/users returns list of users&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">request</span><span class="p">(</span><span class="nx">app</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/api/users&#39;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="mf">200</span><span class="p">);</span>

<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">users</span><span class="p">)).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">test</span><span class="p">(</span><span class="s1">&#39;POST /api/users creates a new user&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">request</span><span class="p">(</span><span class="nx">app</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/api/users&#39;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;alice&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;alice@example.com&#39;</span><span class="w"> </span><span class="p">})</span>
<span class="w">            </span><span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="mf">201</span><span class="p">);</span>

<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">username</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;alice&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>

<h3 id="test-containers">Test Containers<a class="header-link" href="#test-containers" title="Permanent link">&para;</a></h3>
<p>Use Docker containers for integration tests with real databases:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">testcontainers.postgres</span><span class="w"> </span><span class="kn">import</span> <span class="n">PostgresContainer</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_with_real_postgres</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">PostgresContainer</span><span class="p">(</span><span class="s2">&quot;postgres:14&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">postgres</span><span class="p">:</span>
        <span class="n">connection_url</span> <span class="o">=</span> <span class="n">postgres</span><span class="o">.</span><span class="n">get_connection_url</span><span class="p">()</span>
        <span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">connection_url</span><span class="p">)</span>
        <span class="c1"># Run tests against real Postgres</span>
</code></pre></div>

<hr />
<h2 id="end-to-end-e2e-testing">End-to-End (E2E) Testing<a class="header-link" href="#end-to-end-e2e-testing" title="Permanent link">&para;</a></h2>
<p>E2E tests simulate real user interactions with the entire system.</p>
<h3 id="browser-automation-selenium-playwright-cypress">Browser Automation: Selenium, Playwright, Cypress<a class="header-link" href="#browser-automation-selenium-playwright-cypress" title="Permanent link">&para;</a></h3>
<p><strong>Selenium (Python):</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">selenium</span><span class="w"> </span><span class="kn">import</span> <span class="n">webdriver</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">selenium.webdriver.common.by</span><span class="w"> </span><span class="kn">import</span> <span class="n">By</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_user_registration</span><span class="p">():</span>
    <span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Chrome</span><span class="p">()</span>
    <span class="n">driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;http://localhost:3000/register&quot;</span><span class="p">)</span>

    <span class="c1"># Fill in the form</span>
    <span class="n">driver</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">ID</span><span class="p">,</span> <span class="s2">&quot;username&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s2">&quot;alice&quot;</span><span class="p">)</span>
    <span class="n">driver</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">ID</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s2">&quot;alice@example.com&quot;</span><span class="p">)</span>
    <span class="n">driver</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">ID</span><span class="p">,</span> <span class="s2">&quot;password&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s2">&quot;secret123&quot;</span><span class="p">)</span>

    <span class="c1"># Submit</span>
    <span class="n">driver</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">ID</span><span class="p">,</span> <span class="s2">&quot;submit-button&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="c1"># Verify success</span>
    <span class="n">success_message</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CLASS_NAME</span><span class="p">,</span> <span class="s2">&quot;success-message&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="s2">&quot;Registration successful&quot;</span> <span class="ow">in</span> <span class="n">success_message</span><span class="o">.</span><span class="n">text</span>

    <span class="n">driver</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
</code></pre></div>

<p><strong>Playwright (JavaScript):</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">test</span><span class="p">,</span><span class="w"> </span><span class="nx">expect</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@playwright/test&#39;</span><span class="p">);</span>

<span class="nx">test</span><span class="p">(</span><span class="s1">&#39;user can register successfully&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nx">page</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="kr">goto</span><span class="p">(</span><span class="s1">&#39;http://localhost:3000/register&#39;</span><span class="p">);</span>

<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="s1">&#39;#username&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;alice&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="s1">&#39;#email&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;alice@example.com&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="s1">&#39;#password&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;secret123&#39;</span><span class="p">);</span>

<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s1">&#39;#submit-button&#39;</span><span class="p">);</span>

<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">locator</span><span class="p">(</span><span class="s1">&#39;.success-message&#39;</span><span class="p">)).</span><span class="nx">toContainText</span><span class="p">(</span><span class="s1">&#39;Registration successful&#39;</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>

<p><strong>Cypress (JavaScript):</strong></p>
<div class="highlight"><pre><span></span><code><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;User Registration&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;successfully registers a new user&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">cy</span><span class="p">.</span><span class="nx">visit</span><span class="p">(</span><span class="s1">&#39;/register&#39;</span><span class="p">);</span>

<span class="w">        </span><span class="nx">cy</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;#username&#39;</span><span class="p">).</span><span class="nx">type</span><span class="p">(</span><span class="s1">&#39;alice&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="nx">cy</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;#email&#39;</span><span class="p">).</span><span class="nx">type</span><span class="p">(</span><span class="s1">&#39;alice@example.com&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="nx">cy</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;#password&#39;</span><span class="p">).</span><span class="nx">type</span><span class="p">(</span><span class="s1">&#39;secret123&#39;</span><span class="p">);</span>

<span class="w">        </span><span class="nx">cy</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;#submit-button&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">();</span>

<span class="w">        </span><span class="nx">cy</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;.success-message&#39;</span><span class="p">).</span><span class="nx">should</span><span class="p">(</span><span class="s1">&#39;contain&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Registration successful&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>

<h3 id="when-e2e-is-worth-the-cost">When E2E is Worth the Cost<a class="header-link" href="#when-e2e-is-worth-the-cost" title="Permanent link">&para;</a></h3>
<p>E2E tests are:
- <strong>Slow</strong>: Starting browsers, loading pages, waiting for elements
- <strong>Brittle</strong>: Break when UI changes
- <strong>Expensive</strong>: Require infrastructure, maintenance</p>
<p><strong>Use E2E tests for:</strong>
- Critical user journeys (checkout, payment, signup)
- Cross-browser compatibility
- Acceptance testing before release</p>
<p><strong>Don't use E2E tests for:</strong>
- Testing every edge case (use unit tests)
- Testing business logic (use unit/integration tests)
- Rapid feedback during development (too slow)</p>
<hr />
<h2 id="code-coverage">Code Coverage<a class="header-link" href="#code-coverage" title="Permanent link">&para;</a></h2>
<p>Code coverage measures which lines of code are executed during tests.</p>
<h3 id="types-of-coverage">Types of Coverage<a class="header-link" href="#types-of-coverage" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Line coverage</strong>: What % of lines were executed?</li>
<li><strong>Branch coverage</strong>: What % of if/else branches were taken?</li>
<li><strong>Path coverage</strong>: What % of possible execution paths were tested?</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">discount</span><span class="p">(</span><span class="n">price</span><span class="p">,</span> <span class="n">is_member</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">is_member</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">price</span> <span class="o">*</span> <span class="mf">0.9</span>  <span class="c1"># Line 3</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">price</span>  <span class="c1"># Line 5</span>

<span class="c1"># Test 1: Line coverage 80% (lines 1,2,3), branch coverage 50%</span>
<span class="k">assert</span> <span class="n">discount</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="o">==</span> <span class="mi">90</span>

<span class="c1"># Test 2: Line coverage 100% (all lines), branch coverage 100%</span>
<span class="k">assert</span> <span class="n">discount</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="o">==</span> <span class="mi">90</span>
<span class="k">assert</span> <span class="n">discount</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="o">==</span> <span class="mi">100</span>
</code></pre></div>

<h3 id="the-100-coverage-myth">The 100% Coverage Myth<a class="header-link" href="#the-100-coverage-myth" title="Permanent link">&para;</a></h3>
<p><strong>High coverage ‚â† Good tests</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># 100% line coverage, but terrible test!</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_bad</span><span class="p">():</span>
    <span class="n">add</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>  <span class="c1"># Function is called, but result is not checked!</span>
</code></pre></div>

<p><strong>Good coverage targets:</strong>
- Critical business logic: aim for 90-100%
- Utility functions: 80-90%
- UI code: 60-70% (harder to test)
- <strong>Total project:</strong> 70-80% is reasonable</p>
<p><strong>Focus on:</strong>
- Testing behavior, not coverage percentage
- Meaningful assertions
- Edge cases and error handling</p>
<hr />
<h2 id="property-based-testing">Property-Based Testing<a class="header-link" href="#property-based-testing" title="Permanent link">&para;</a></h2>
<p>Instead of writing specific test cases, describe properties that should always hold, and generate random test cases.</p>
<h3 id="hypothesis-python">Hypothesis (Python)<a class="header-link" href="#hypothesis-python" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">hypothesis</span><span class="w"> </span><span class="kn">import</span> <span class="n">given</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">hypothesis.strategies</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">st</span>

<span class="c1"># Traditional approach: write specific examples</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_reverse_twice_is_identity_manual</span><span class="p">():</span>
    <span class="k">assert</span> <span class="n">reverse</span><span class="p">(</span><span class="n">reverse</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">reverse</span><span class="p">(</span><span class="n">reverse</span><span class="p">([</span><span class="mi">5</span><span class="p">]))</span> <span class="o">==</span> <span class="p">[</span><span class="mi">5</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">reverse</span><span class="p">(</span><span class="n">reverse</span><span class="p">([]))</span> <span class="o">==</span> <span class="p">[]</span>

<span class="c1"># Property-based: test with random lists</span>
<span class="nd">@given</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">lists</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">integers</span><span class="p">()))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_reverse_twice_is_identity</span><span class="p">(</span><span class="n">lst</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">reverse</span><span class="p">(</span><span class="n">reverse</span><span class="p">(</span><span class="n">lst</span><span class="p">))</span> <span class="o">==</span> <span class="n">lst</span>

<span class="c1"># Hypothesis generates many random lists:</span>
<span class="c1"># [], [0], [1, 2, 3], [999, -42], etc.</span>
</code></pre></div>

<p><strong>More examples:</strong></p>
<div class="highlight"><pre><span></span><code><span class="nd">@given</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">integers</span><span class="p">(),</span> <span class="n">st</span><span class="o">.</span><span class="n">integers</span><span class="p">())</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_addition_commutative</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">==</span> <span class="n">b</span> <span class="o">+</span> <span class="n">a</span>

<span class="nd">@given</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">lists</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">integers</span><span class="p">()))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_sorted_list_is_in_order</span><span class="p">(</span><span class="n">lst</span><span class="p">):</span>
    <span class="n">sorted_lst</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sorted_lst</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">sorted_lst</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">sorted_lst</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
</code></pre></div>

<h3 id="fast-check-javascript">fast-check (JavaScript)<a class="header-link" href="#fast-check-javascript" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">fc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fast-check&#39;</span><span class="p">);</span>

<span class="nx">test</span><span class="p">(</span><span class="s1">&#39;reversing a string twice gives the original&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fc</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span>
<span class="w">        </span><span class="nx">fc</span><span class="p">.</span><span class="nx">property</span><span class="p">(</span><span class="nx">fc</span><span class="p">.</span><span class="nx">string</span><span class="p">(),</span><span class="w"> </span><span class="p">(</span><span class="nx">str</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">reverse</span><span class="p">(</span><span class="nx">reverse</span><span class="p">(</span><span class="nx">str</span><span class="p">))</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">str</span><span class="p">;</span>
<span class="w">        </span><span class="p">})</span>
<span class="w">    </span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">test</span><span class="p">(</span><span class="s1">&#39;addition is commutative&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fc</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span>
<span class="w">        </span><span class="nx">fc</span><span class="p">.</span><span class="nx">property</span><span class="p">(</span><span class="nx">fc</span><span class="p">.</span><span class="nx">integer</span><span class="p">(),</span><span class="w"> </span><span class="nx">fc</span><span class="p">.</span><span class="nx">integer</span><span class="p">(),</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">a</span><span class="p">;</span>
<span class="w">        </span><span class="p">})</span>
<span class="w">    </span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>

<p><strong>Benefits:</strong>
- Discovers edge cases you didn't think of
- Tests properties, not specific values
- Generates minimal failing examples (shrinking)</p>
<hr />
<h2 id="mutation-testing">Mutation Testing<a class="header-link" href="#mutation-testing" title="Permanent link">&para;</a></h2>
<p>Mutation testing tests your tests by introducing bugs (mutations) and checking if tests catch them.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Original code</span>
<span class="k">def</span><span class="w"> </span><span class="nf">is_even</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span>

<span class="c1"># Mutation 1: Change == to !=</span>
<span class="k">def</span><span class="w"> </span><span class="nf">is_even</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span>  <span class="c1"># Bug introduced</span>

<span class="c1"># If tests still pass, your tests are weak!</span>
</code></pre></div>

<p><strong>Tools:</strong>
- <strong>Python:</strong> mutmut, mutpy
- <strong>JavaScript:</strong> Stryker
- <strong>Java:</strong> PIT</p>
<hr />
<h2 id="summary">Summary<a class="header-link" href="#summary" title="Permanent link">&para;</a></h2>
<p><strong>Key Principles:</strong>
1. <strong>Test behavior, not implementation</strong> ‚Äì Tests should verify what code does, not how
2. <strong>Follow the test pyramid</strong> ‚Äì Many unit tests, some integration tests, few E2E tests
3. <strong>Keep tests fast</strong> ‚Äì Slow tests won't be run
4. <strong>Keep tests independent</strong> ‚Äì One test shouldn't affect another
5. <strong>Make tests readable</strong> ‚Äì Tests are documentation
6. <strong>Use descriptive names</strong> ‚Äì Test names should explain what they test
7. <strong>Don't test private methods</strong> ‚Äì Test public APIs
8. <strong>Avoid test duplication</strong> ‚Äì Use setup/teardown, fixtures, helper functions</p>
<hr />
<h2 id="exercises">Exercises<a class="header-link" href="#exercises" title="Permanent link">&para;</a></h2>
<h3 id="exercise-1-write-unit-tests">Exercise 1: Write Unit Tests<a class="header-link" href="#exercise-1-write-unit-tests" title="Permanent link">&para;</a></h3>
<p>Write comprehensive unit tests for this <code>BankAccount</code> class:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BankAccount</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">initial_balance</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">=</span> <span class="n">initial_balance</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">deposit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">amount</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Deposit amount must be positive&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">+=</span> <span class="n">amount</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">withdraw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">amount</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Withdrawal amount must be positive&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">amount</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">balance</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Insufficient funds&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">-=</span> <span class="n">amount</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">transfer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">,</span> <span class="n">target_account</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">withdraw</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span>
        <span class="n">target_account</span><span class="o">.</span><span class="n">deposit</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span>
</code></pre></div>

<p>Cover:
- Normal operations
- Edge cases (zero balance, exact balance withdrawal)
- Error cases (negative amounts, insufficient funds)
- Transfer between accounts</p>
<h3 id="exercise-2-apply-tdd">Exercise 2: Apply TDD<a class="header-link" href="#exercise-2-apply-tdd" title="Permanent link">&para;</a></h3>
<p>Use TDD to implement a <code>PriorityQueue</code> class with these operations:
- <code>enqueue(item, priority)</code>: Add item with priority (higher number = higher priority)
- <code>dequeue()</code>: Remove and return highest-priority item
- <code>is_empty()</code>: Check if queue is empty
- <code>peek()</code>: Return highest-priority item without removing</p>
<p>Write tests first, then implement.</p>
<h3 id="exercise-3-test-doubles">Exercise 3: Test Doubles<a class="header-link" href="#exercise-3-test-doubles" title="Permanent link">&para;</a></h3>
<p>Refactor this code to be testable using test doubles:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">send_order_confirmation</span><span class="p">(</span><span class="n">order_id</span><span class="p">):</span>
    <span class="n">order</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="n">get_order</span><span class="p">(</span><span class="n">order_id</span><span class="p">)</span>  <span class="c1"># Database call</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="n">get_user</span><span class="p">(</span><span class="n">order</span><span class="o">.</span><span class="n">user_id</span><span class="p">)</span>  <span class="c1"># Database call</span>
    <span class="n">email_service</span><span class="o">.</span><span class="n">send</span><span class="p">(</span>
        <span class="n">to</span><span class="o">=</span><span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="p">,</span>
        <span class="n">subject</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Order </span><span class="si">{</span><span class="n">order_id</span><span class="si">}</span><span class="s2"> confirmed&quot;</span><span class="p">,</span>
        <span class="n">body</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Your order for $</span><span class="si">{</span><span class="n">order</span><span class="o">.</span><span class="n">total</span><span class="si">}</span><span class="s2"> has been confirmed&quot;</span>
    <span class="p">)</span>  <span class="c1"># External email service</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Confirmation sent for order </span><span class="si">{</span><span class="n">order_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># Logging</span>
</code></pre></div>

<p>Write tests using:
- Stubs for the database
- Mock for the email service
- Spy for the logger</p>
<h3 id="exercise-4-integration-test">Exercise 4: Integration Test<a class="header-link" href="#exercise-4-integration-test" title="Permanent link">&para;</a></h3>
<p>Write an integration test for a simple REST API with these endpoints:
- <code>POST /api/tasks</code> ‚Äì Create a task
- <code>GET /api/tasks</code> ‚Äì List all tasks
- <code>GET /api/tasks/:id</code> ‚Äì Get a specific task
- <code>PUT /api/tasks/:id</code> ‚Äì Update a task
- <code>DELETE /api/tasks/:id</code> ‚Äì Delete a task</p>
<p>Test the complete workflow: create, read, update, delete.</p>
<h3 id="exercise-5-property-based-testing">Exercise 5: Property-Based Testing<a class="header-link" href="#exercise-5-property-based-testing" title="Permanent link">&para;</a></h3>
<p>Write property-based tests for a <code>merge_sorted_lists</code> function that merges two sorted lists:</p>
<p>Properties to test:
- Result length equals sum of input lengths
- Result is sorted
- All elements from inputs appear in result
- Works with empty lists</p>
<hr />
<h2 id="navigation">Navigation<a class="header-link" href="#navigation" title="Permanent link">&para;</a></h2>
<p><strong>Previous Lesson</strong>: <a href="09_Error_Handling.md">09_Error_Handling.md</a>
<strong>Next Lesson</strong>: <a href="11_Debugging_and_Profiling.md">11_Debugging_and_Profiling.md</a></p>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/Programming/09_Error_Handling.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Error Handling Strategies</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">üîó</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/Programming/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">üìã</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/Programming/11_Debugging_and_Profiling.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Debugging & Profiling</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">‚Üë</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'en';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}