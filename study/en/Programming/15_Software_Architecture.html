{% raw %}
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Software Architecture Basics - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/en/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/en/" class="nav-item ">
                    <span class="nav-icon">ğŸ </span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">ğŸ’»</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/en/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" selected>
                        English
                    </option>
                    
                    <option value="ko" >
                        í•œêµ­ì–´
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">â˜€ï¸</span>
                    <span class="theme-icon dark">ğŸŒ™</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/en/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/en/Programming/">Programming</a>
    <span class="separator">/</span>
    <span class="current">Software Architecture Basics</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>Software Architecture Basics</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/Programming/14_Version_Control_Workflows.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Version Control and Collaboration</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/Programming/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/Programming/16_Developer_Practices.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Developer Practices and Ethics</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#architecture-vs-design">Architecture vs Design</a></li>
<li><a href="#monolithic-architecture">Monolithic Architecture</a><ul>
<li><a href="#structure">Structure</a></li>
<li><a href="#example-python-flask-monolith">Example (Python Flask Monolith)</a></li>
<li><a href="#advantages">Advantages</a></li>
<li><a href="#disadvantages">Disadvantages</a></li>
<li><a href="#when-to-use-monoliths">When to Use Monoliths</a></li>
</ul>
</li>
<li><a href="#microservices-architecture">Microservices Architecture</a><ul>
<li><a href="#structure_1">Structure</a></li>
<li><a href="#example-nodejs-microservices">Example (Node.js Microservices)</a></li>
<li><a href="#advantages_1">Advantages</a></li>
<li><a href="#disadvantages_1">Disadvantages</a></li>
<li><a href="#when-not-to-use-microservices">When NOT to Use Microservices</a></li>
</ul>
</li>
<li><a href="#layered-n-tier-architecture">Layered (N-Tier) Architecture</a><ul>
<li><a href="#classic-3-tier-architecture">Classic 3-Tier Architecture</a></li>
<li><a href="#example-java-spring-boot">Example (Java Spring Boot)</a></li>
<li><a href="#strict-vs-relaxed-layering">Strict vs Relaxed Layering</a></li>
<li><a href="#advantages_2">Advantages</a></li>
<li><a href="#disadvantages_2">Disadvantages</a></li>
</ul>
</li>
<li><a href="#hexagonal-architecture-ports-and-adapters">Hexagonal Architecture (Ports and Adapters)</a><ul>
<li><a href="#structure_2">Structure</a></li>
<li><a href="#example-python">Example (Python)</a></li>
<li><a href="#dependency-rule">Dependency Rule</a></li>
</ul>
</li>
<li><a href="#clean-architecture">Clean Architecture</a><ul>
<li><a href="#layers">Layers</a></li>
<li><a href="#dependency-rule_1">Dependency Rule</a></li>
<li><a href="#independence">Independence</a></li>
</ul>
</li>
<li><a href="#event-driven-architecture">Event-Driven Architecture</a><ul>
<li><a href="#components">Components</a></li>
<li><a href="#example-microservices-with-events">Example (Microservices with Events)</a></li>
<li><a href="#event-sourcing">Event Sourcing</a></li>
<li><a href="#cqrs-command-query-responsibility-segregation">CQRS (Command Query Responsibility Segregation)</a></li>
</ul>
</li>
<li><a href="#mvc-mvp-mvvm">MVC, MVP, MVVM</a><ul>
<li><a href="#mvc-model-view-controller">MVC (Model-View-Controller)</a></li>
<li><a href="#mvp-model-view-presenter">MVP (Model-View-Presenter)</a></li>
<li><a href="#mvvm-model-view-viewmodel">MVVM (Model-View-ViewModel)</a></li>
</ul>
</li>
<li><a href="#architectural-decision-records-adr">Architectural Decision Records (ADR)</a><ul>
<li><a href="#template">Template</a></li>
</ul>
</li>
<li><a href="#quality-attributes">Quality Attributes</a></li>
<li><a href="#cap-theorem">CAP Theorem</a></li>
<li><a href="#exercises">Exercises</a><ul>
<li><a href="#exercise-1-choose-architecture-for-scenarios">Exercise 1: Choose Architecture for Scenarios</a></li>
<li><a href="#exercise-2-design-a-layered-architecture">Exercise 2: Design a Layered Architecture</a></li>
<li><a href="#exercise-3-refactor-to-hexagonal-architecture">Exercise 3: Refactor to Hexagonal Architecture</a></li>
<li><a href="#exercise-4-document-an-architectural-decision">Exercise 4: Document an Architectural Decision</a></li>
<li><a href="#exercise-5-analyze-cap-trade-offs">Exercise 5: Analyze CAP Trade-offs</a></li>
</ul>
</li>
<li><a href="#summary">Summary</a></li>
<li><a href="#navigation">Navigation</a></li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="software-architecture-basics">Software Architecture Basics<a class="header-link" href="#software-architecture-basics" title="Permanent link">&para;</a></h1>
<blockquote>
<p><strong>Topic</strong>: Programming
<strong>Lesson</strong>: 15 of 16
<strong>Prerequisites</strong>: Object-oriented programming, design patterns, system design fundamentals
<strong>Objective</strong>: Understand high-level architectural patterns, trade-offs between monoliths and microservices, and principles for designing maintainable systems</p>
</blockquote>
<h2 id="introduction">Introduction<a class="header-link" href="#introduction" title="Permanent link">&para;</a></h2>
<p><strong>Software architecture</strong> is the set of high-level structural decisions that shape how a system is built. While design focuses on individual components (classes, functions), architecture focuses on the <strong>big picture</strong>:</p>
<ul>
<li>How components are organized</li>
<li>How they communicate</li>
<li>What boundaries exist</li>
<li>How the system scales, evolves, and handles failures</li>
</ul>
<p>Good architecture:
- Makes the system <strong>easy to understand</strong> (cognitive load)
- Makes the system <strong>easy to change</strong> (adaptability)
- Makes the system <strong>resilient</strong> to failures
- Aligns with <strong>business goals</strong> (cost, time-to-market, scalability)</p>
<p>Poor architecture creates <strong>technical debt</strong> that slows development over time.</p>
<h2 id="architecture-vs-design">Architecture vs Design<a class="header-link" href="#architecture-vs-design" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Architecture</th>
<th>Design</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Scope</strong></td>
<td>System-level</td>
<td>Component-level</td>
</tr>
<tr>
<td><strong>Decisions</strong></td>
<td>Strategic, hard to change</td>
<td>Tactical, easier to change</td>
</tr>
<tr>
<td><strong>Examples</strong></td>
<td>Monolith vs microservices, database choice</td>
<td>Class structure, algorithm choice</td>
</tr>
<tr>
<td><strong>Impact</strong></td>
<td>Long-term, affects entire team</td>
<td>Short-term, affects module</td>
</tr>
<tr>
<td><strong>When</strong></td>
<td>Early in project</td>
<td>Throughout project</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong>:
- <strong>Architecture decision</strong>: "We'll use microservices with event-driven communication"
- <strong>Design decision</strong>: "The user service will use the repository pattern"</p>
<h2 id="monolithic-architecture">Monolithic Architecture<a class="header-link" href="#monolithic-architecture" title="Permanent link">&para;</a></h2>
<p>A <strong>monolith</strong> is a single deployable unit containing all application logic.</p>
<h3 id="structure">Structure<a class="header-link" href="#structure" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>monolith-app/
â”œâ”€â”€ controllers/       # HTTP handlers
â”œâ”€â”€ services/          # Business logic
â”œâ”€â”€ repositories/      # Data access
â”œâ”€â”€ models/            # Domain entities
â””â”€â”€ main.py            # Entry point
</code></pre></div>

<p><strong>Deployment</strong>: One artifact (JAR, executable, Docker image)</p>
<h3 id="example-python-flask-monolith">Example (Python Flask Monolith)<a class="header-link" href="#example-python-flask-monolith" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># app.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">flask</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">jsonify</span><span class="p">,</span> <span class="n">request</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">database</span><span class="w"> </span><span class="kn">import</span> <span class="n">db</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">models</span><span class="w"> </span><span class="kn">import</span> <span class="n">User</span><span class="p">,</span> <span class="n">Order</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="c1"># User endpoints</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/users&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_users</span><span class="p">():</span>
    <span class="n">users</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">([</span><span class="n">u</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">users</span><span class="p">])</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/users&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_user</span><span class="p">():</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">email</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">])</span>
    <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
    <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()),</span> <span class="mi">201</span>

<span class="c1"># Order endpoints</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/orders&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_orders</span><span class="p">():</span>
    <span class="n">orders</span> <span class="o">=</span> <span class="n">Order</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">([</span><span class="n">o</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">orders</span><span class="p">])</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/orders&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_order</span><span class="p">():</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
    <span class="n">order</span> <span class="o">=</span> <span class="n">Order</span><span class="p">(</span><span class="n">user_id</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;user_id&#39;</span><span class="p">],</span> <span class="n">total</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;total&#39;</span><span class="p">])</span>
    <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
    <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">order</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()),</span> <span class="mi">201</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>

<p>All features live in one codebase and share one database.</p>
<h3 id="advantages">Advantages<a class="header-link" href="#advantages" title="Permanent link">&para;</a></h3>
<p><strong>1. Simplicity</strong>: One codebase, one deployment, one server</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Deploy entire app</span>
docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>myapp<span class="w"> </span>.
docker<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span><span class="m">8000</span>:8000<span class="w"> </span>myapp
</code></pre></div>

<p><strong>2. Easy debugging</strong>: All code in one process, use single debugger
<strong>3. Consistent data</strong>: Transactions across features (ACID guarantees)
<strong>4. Performance</strong>: No network calls between modules (in-memory function calls)
<strong>5. Development speed</strong>: For small teams, monoliths are fastest to build</p>
<h3 id="disadvantages">Disadvantages<a class="header-link" href="#disadvantages" title="Permanent link">&para;</a></h3>
<p><strong>1. Scaling limitations</strong>: Must scale entire app, even if only one feature needs resources</p>
<div class="highlight"><pre><span></span><code>#<span class="w"> </span><span class="k">If</span><span class="w"> </span><span class="nv">search</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">CPU</span><span class="o">-</span><span class="nv">heavy</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">checkout</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span>,
#<span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">still</span><span class="w"> </span><span class="nv">scale</span><span class="w"> </span><span class="nv">both</span><span class="w"> </span><span class="nv">together</span>
<span class="nv">docker</span><span class="w"> </span><span class="nv">run</span><span class="w"> </span><span class="o">--</span><span class="nv">replicas</span><span class="o">=</span><span class="mi">10</span><span class="w"> </span><span class="nv">myapp</span>
</code></pre></div>

<p><strong>2. Technology lock-in</strong>: Entire app uses same language, framework, database</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Hard to rewrite one feature in Go while rest is Python</span>
</code></pre></div>

<p><strong>3. Deployment coupling</strong>: Deploy entire app for small changes (risky, slow)</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Fix typo in one endpoint â†’ redeploy entire app</span>
</code></pre></div>

<p><strong>4. Code coupling</strong>: Features can become tightly coupled over time</p>
<div class="highlight"><pre><span></span><code><span class="c1"># User service directly calls Order service</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_user</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
    <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
    <span class="n">order_service</span><span class="o">.</span><span class="n">create_welcome_order</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>  <span class="c1"># Tight coupling</span>
    <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</code></pre></div>

<p><strong>5. Team coordination</strong>: Large teams step on each other's toes (merge conflicts, deploy conflicts)</p>
<h3 id="when-to-use-monoliths">When to Use Monoliths<a class="header-link" href="#when-to-use-monoliths" title="Permanent link">&para;</a></h3>
<p>âœ… <strong>Good fit</strong>:
- Small to medium teams (&lt; 20 developers)
- Early-stage products (MVP, validation phase)
- Simple domains with low complexity
- CRUD applications with limited traffic</p>
<p>âŒ <strong>Poor fit</strong>:
- Large teams (&gt; 50 developers)
- High-scale systems (millions of requests/day)
- Diverse technology needs (ML + web + real-time)</p>
<p><strong>Remember</strong>: Most successful companies started with monoliths. Don't prematurely optimize for scale.</p>
<h2 id="microservices-architecture">Microservices Architecture<a class="header-link" href="#microservices-architecture" title="Permanent link">&para;</a></h2>
<p><strong>Microservices</strong> split the application into independent, deployable services organized around business capabilities.</p>
<h3 id="structure_1">Structure<a class="header-link" href="#structure_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>company-system/
â”œâ”€â”€ user-service/          # Manages users
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ database/
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ order-service/         # Manages orders
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ database/
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ payment-service/       # Processes payments
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ database/
â”‚   â””â”€â”€ Dockerfile
â””â”€â”€ api-gateway/           # Routes requests
    â”œâ”€â”€ src/
    â””â”€â”€ Dockerfile
</code></pre></div>

<p>Each service:
- Has its <strong>own database</strong>
- Is <strong>independently deployable</strong>
- Communicates via <strong>network</strong> (HTTP, gRPC, message queue)
- Is owned by a <strong>single team</strong></p>
<h3 id="example-nodejs-microservices">Example (Node.js Microservices)<a class="header-link" href="#example-nodejs-microservices" title="Permanent link">&para;</a></h3>
<p><strong>User Service</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// user-service/server.js</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">express</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">express</span><span class="p">();</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/users/:id&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="w"> </span><span class="nx">res</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">findUser</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="w">  </span><span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/users&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="w"> </span><span class="nx">res</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">createUser</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
<span class="w">  </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">201</span><span class="p">).</span><span class="nx">json</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mf">3001</span><span class="p">);</span>
</code></pre></div>

<p><strong>Order Service</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// order-service/server.js</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">express</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">axios</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;axios&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">express</span><span class="p">();</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/orders&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="w"> </span><span class="nx">res</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Call user service to validate user</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="sb">`http://user-service:3001/users/</span><span class="si">${</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">userId</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">user</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">404</span><span class="p">).</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;User not found&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">createOrder</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
<span class="w">  </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">201</span><span class="p">).</span><span class="nx">json</span><span class="p">(</span><span class="nx">order</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mf">3002</span><span class="p">);</span>
</code></pre></div>

<p><strong>API Gateway</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// api-gateway/server.js</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">express</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">createProxyMiddleware</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;http-proxy-middleware&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">express</span><span class="p">();</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">&#39;/users&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">createProxyMiddleware</span><span class="p">({</span><span class="w"> </span><span class="nx">target</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;http://user-service:3001&#39;</span><span class="w"> </span><span class="p">}));</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">&#39;/orders&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">createProxyMiddleware</span><span class="p">({</span><span class="w"> </span><span class="nx">target</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;http://order-service:3002&#39;</span><span class="w"> </span><span class="p">}));</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">&#39;/payments&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">createProxyMiddleware</span><span class="p">({</span><span class="w"> </span><span class="nx">target</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;http://payment-service:3003&#39;</span><span class="w"> </span><span class="p">}));</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mf">8080</span><span class="p">);</span>
</code></pre></div>

<h3 id="advantages_1">Advantages<a class="header-link" href="#advantages_1" title="Permanent link">&para;</a></h3>
<p><strong>1. Independent scaling</strong>: Scale only what needs scaling</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Scale order service 10x, user service 2x</span>
kubectl<span class="w"> </span>scale<span class="w"> </span>deployment<span class="w"> </span>order-service<span class="w"> </span>--replicas<span class="o">=</span><span class="m">10</span>
kubectl<span class="w"> </span>scale<span class="w"> </span>deployment<span class="w"> </span>user-service<span class="w"> </span>--replicas<span class="o">=</span><span class="m">2</span>
</code></pre></div>

<p><strong>2. Technology diversity</strong>: Each service can use best-fit technology</p>
<div class="highlight"><pre><span></span><code><span class="k">user</span><span class="o">-</span><span class="nl">service</span><span class="p">:</span><span class="w">   </span><span class="n">Node</span><span class="p">.</span><span class="n">js</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">MongoDB</span>
<span class="k">order</span><span class="o">-</span><span class="nl">service</span><span class="p">:</span><span class="w">  </span><span class="n">Python</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">PostgreSQL</span>
<span class="k">search</span><span class="o">-</span><span class="nl">service</span><span class="p">:</span><span class="w"> </span><span class="k">Go</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Elasticsearch</span>
</code></pre></div>

<p><strong>3. Team autonomy</strong>: Teams own services end-to-end (reduce coordination)
<strong>4. Fault isolation</strong>: One service failure doesn't crash entire system</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Order service falls back if payment service is down</span>
<span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">paymentService</span><span class="p">.</span><span class="nx">charge</span><span class="p">(</span><span class="nx">order</span><span class="p">);</span>
<span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">queue</span><span class="p">.</span><span class="nx">enqueue</span><span class="p">(</span><span class="s1">&#39;retry-payment&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">order</span><span class="p">);</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">202</span><span class="p">).</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;Payment pending&#39;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>5. Faster deployments</strong>: Deploy one service without touching others</p>
<h3 id="disadvantages_1">Disadvantages<a class="header-link" href="#disadvantages_1" title="Permanent link">&para;</a></h3>
<p><strong>1. Complexity</strong>: Network calls, service discovery, distributed tracing</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Simple in monolith</span>
<span class="n">user</span> <span class="o">=</span> <span class="n">get_user</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>

<span class="c1"># Complex in microservices</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;http://user-service/users/</span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
    <span class="c1"># Handle network error, timeout, service down...</span>
<span class="n">user</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre></div>

<p><strong>2. Distributed transactions</strong>: No ACID across services</p>
<div class="highlight"><pre><span></span><code><span class="c1">// In monolith: atomic transaction</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">transaction</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">createOrder</span><span class="p">(</span><span class="nx">order</span><span class="p">);</span>
<span class="w">  </span><span class="nx">decrementInventory</span><span class="p">(</span><span class="nx">order</span><span class="p">.</span><span class="nx">items</span><span class="p">);</span>
<span class="w">  </span><span class="nx">chargePayment</span><span class="p">(</span><span class="nx">order</span><span class="p">.</span><span class="nx">total</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// In microservices: eventual consistency</span>
<span class="k">await</span><span class="w"> </span><span class="nx">orderService</span><span class="p">.</span><span class="nx">createOrder</span><span class="p">(</span><span class="nx">order</span><span class="p">);</span>
<span class="k">await</span><span class="w"> </span><span class="nx">inventoryService</span><span class="p">.</span><span class="nx">decrementStock</span><span class="p">(</span><span class="nx">order</span><span class="p">.</span><span class="nx">items</span><span class="p">);</span><span class="w">  </span><span class="c1">// Might fail</span>
<span class="k">await</span><span class="w"> </span><span class="nx">paymentService</span><span class="p">.</span><span class="nx">charge</span><span class="p">(</span><span class="nx">order</span><span class="p">.</span><span class="nx">total</span><span class="p">);</span><span class="w">  </span><span class="c1">// Might fail</span>
<span class="c1">// Need saga pattern or compensation logic</span>
</code></pre></div>

<p><strong>3. Network latency</strong>: Every service call adds 10-100ms
<strong>4. Operational overhead</strong>: More deployments, monitoring, logs to manage
<strong>5. Data duplication</strong>: Services may cache data from other services</p>
<h3 id="when-not-to-use-microservices">When NOT to Use Microservices<a class="header-link" href="#when-not-to-use-microservices" title="Permanent link">&para;</a></h3>
<p>âŒ <strong>Avoid microservices if</strong>:
- You're building an MVP (unproven product)
- Team is small (&lt; 10 developers)
- You don't have DevOps expertise (monitoring, orchestration)
- Domain boundaries are unclear (services will change frequently)</p>
<p><strong>Famous quote</strong>: "You must be this tall to use microservices" â€” Martin Fowler</p>
<p><strong>Start with a monolith</strong>. Extract microservices later when pain points emerge (team scaling, performance bottlenecks).</p>
<h2 id="layered-n-tier-architecture">Layered (N-Tier) Architecture<a class="header-link" href="#layered-n-tier-architecture" title="Permanent link">&para;</a></h2>
<p><strong>Layered architecture</strong> organizes code into horizontal layers with clear responsibilities.</p>
<h3 id="classic-3-tier-architecture">Classic 3-Tier Architecture<a class="header-link" href="#classic-3-tier-architecture" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Presentation Layer    â”‚  (UI, controllers, API endpoints)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Business Logic Layer  â”‚  (Services, domain logic)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Data Access Layer     â”‚  (Repositories, ORM)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Database              â”‚  (PostgreSQL, MongoDB)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="example-java-spring-boot">Example (Java Spring Boot)<a class="header-link" href="#example-java-spring-boot" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// Presentation Layer: Controller</span>
<span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/users&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserController</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">UserService</span><span class="w"> </span><span class="n">userService</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/{id}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getUser</span><span class="p">(</span><span class="nd">@PathVariable</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userService</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@PostMapping</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">createUser</span><span class="p">(</span><span class="nd">@RequestBody</span><span class="w"> </span><span class="n">UserDTO</span><span class="w"> </span><span class="n">dto</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userService</span><span class="p">.</span><span class="na">createUser</span><span class="p">(</span><span class="n">dto</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">status</span><span class="p">(</span><span class="mi">201</span><span class="p">).</span><span class="na">body</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Business Logic Layer: Service</span>
<span class="nd">@Service</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserService</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">UserRepository</span><span class="w"> </span><span class="n">userRepository</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">EmailService</span><span class="w"> </span><span class="n">emailService</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">User</span><span class="w"> </span><span class="nf">createUser</span><span class="p">(</span><span class="n">UserDTO</span><span class="w"> </span><span class="n">dto</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Business logic</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">userRepository</span><span class="p">.</span><span class="na">existsByEmail</span><span class="p">(</span><span class="n">dto</span><span class="p">.</span><span class="na">getEmail</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserAlreadyExistsException</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">(</span><span class="n">dto</span><span class="p">.</span><span class="na">getName</span><span class="p">(),</span><span class="w"> </span><span class="n">dto</span><span class="p">.</span><span class="na">getEmail</span><span class="p">());</span>
<span class="w">        </span><span class="n">userRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>

<span class="w">        </span><span class="n">emailService</span><span class="p">.</span><span class="na">sendWelcomeEmail</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">getEmail</span><span class="p">());</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">user</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">User</span><span class="w"> </span><span class="nf">findById</span><span class="p">(</span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">userRepository</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">orElseThrow</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserNotFoundException</span><span class="p">(</span><span class="n">id</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Data Access Layer: Repository</span>
<span class="nd">@Repository</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">UserRepository</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">JpaRepository</span><span class="o">&lt;</span><span class="n">User</span><span class="p">,</span><span class="w"> </span><span class="n">Long</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">existsByEmail</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">email</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="strict-vs-relaxed-layering">Strict vs Relaxed Layering<a class="header-link" href="#strict-vs-relaxed-layering" title="Permanent link">&para;</a></h3>
<p><strong>Strict layering</strong>: Each layer only calls the layer directly below</p>
<div class="highlight"><pre><span></span><code>Presentation â†’ Business Logic â†’ Data Access
</code></pre></div>

<p><strong>Relaxed layering</strong>: Layers can skip levels</p>
<div class="highlight"><pre><span></span><code><span class="nx">Presentation</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="nx">Data</span><span class="w"> </span><span class="nx">Access</span><span class="w"> </span><span class="p">(</span><span class="k">for</span><span class="w"> </span><span class="nx">simple</span><span class="w"> </span><span class="nx">reads</span><span class="p">,</span><span class="w"> </span><span class="nx">bypassing</span><span class="w"> </span><span class="nx">business</span><span class="w"> </span><span class="nx">logic</span><span class="p">)</span>
</code></pre></div>

<p><strong>Trade-off</strong>: Strict layering enforces separation but adds boilerplate. Relaxed layering is pragmatic but can lead to logic leaking into presentation.</p>
<h3 id="advantages_2">Advantages<a class="header-link" href="#advantages_2" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Separation of concerns</strong>: Clear responsibilities</li>
<li><strong>Testability</strong>: Mock layers independently</li>
<li><strong>Replaceability</strong>: Swap data layer (SQL â†’ NoSQL) without touching business logic</li>
</ul>
<h3 id="disadvantages_2">Disadvantages<a class="header-link" href="#disadvantages_2" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Performance</strong>: Extra layers add overhead</li>
<li><strong>Rigidity</strong>: Forces logic into layers even when unnatural</li>
</ul>
<h2 id="hexagonal-architecture-ports-and-adapters">Hexagonal Architecture (Ports and Adapters)<a class="header-link" href="#hexagonal-architecture-ports-and-adapters" title="Permanent link">&para;</a></h2>
<p><strong>Hexagonal architecture</strong> (Alistair Cockburn, 2005) places the <strong>domain</strong> at the center, surrounded by <strong>ports</strong> (interfaces) and <strong>adapters</strong> (implementations).</p>
<h3 id="structure_2">Structure<a class="header-link" href="#structure_2" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚    Adapters       â”‚
       â”‚  (HTTP, CLI, DB)  â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚      Ports        â”‚
       â”‚   (Interfaces)    â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚  Domain/Core      â”‚
       â”‚ (Business Logic)  â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<p><strong>Key idea</strong>: Domain logic doesn't depend on infrastructure (databases, frameworks). Infrastructure depends on domain.</p>
<h3 id="example-python">Example (Python)<a class="header-link" href="#example-python" title="Permanent link">&para;</a></h3>
<p><strong>Domain (core business logic)</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># domain/user.py</span>
<span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">email</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="nb">id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">email</span> <span class="o">=</span> <span class="n">email</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">change_email</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_email</span><span class="p">):</span>
        <span class="k">if</span> <span class="s1">&#39;@&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">new_email</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Invalid email&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">email</span> <span class="o">=</span> <span class="n">new_email</span>
</code></pre></div>

<p><strong>Port (interface)</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># ports/user_repository.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">abc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>

<span class="k">class</span><span class="w"> </span><span class="nc">UserRepository</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">find_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">):</span>
        <span class="k">pass</span>
</code></pre></div>

<p><strong>Adapter (implementation)</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># adapters/postgres_user_repository.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ports.user_repository</span><span class="w"> </span><span class="kn">import</span> <span class="n">UserRepository</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">domain.user</span><span class="w"> </span><span class="kn">import</span> <span class="n">User</span>

<span class="k">class</span><span class="w"> </span><span class="nc">PostgresUserRepository</span><span class="p">(</span><span class="n">UserRepository</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db_connection</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db_connection</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">find_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
        <span class="n">row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM users WHERE id = ?&#39;</span><span class="p">,</span> <span class="n">user_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">User</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">])</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;UPDATE users SET name = ?, email = ? WHERE id = ?&#39;</span><span class="p">,</span>
                        <span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="p">,</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</code></pre></div>

<p><strong>Use case (application service)</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># use_cases/change_email.py</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ChangeEmailUseCase</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_repository</span><span class="p">:</span> <span class="n">UserRepository</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">user_repository</span> <span class="o">=</span> <span class="n">user_repository</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">new_email</span><span class="p">):</span>
        <span class="n">user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_repository</span><span class="o">.</span><span class="n">find_by_id</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>
        <span class="n">user</span><span class="o">.</span><span class="n">change_email</span><span class="p">(</span><span class="n">new_email</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">user_repository</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</code></pre></div>

<p><strong>Adapter (HTTP)</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># adapters/flask_app.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">flask</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">jsonify</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">use_cases.change_email</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChangeEmailUseCase</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">adapters.postgres_user_repository</span><span class="w"> </span><span class="kn">import</span> <span class="n">PostgresUserRepository</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">user_repo</span> <span class="o">=</span> <span class="n">PostgresUserRepository</span><span class="p">(</span><span class="n">db_connection</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/users/&lt;int:user_id&gt;/email&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;PUT&#39;</span><span class="p">])</span>
<span class="k">def</span><span class="w"> </span><span class="nf">change_email</span><span class="p">(</span><span class="n">user_id</span><span class="p">):</span>
    <span class="n">use_case</span> <span class="o">=</span> <span class="n">ChangeEmailUseCase</span><span class="p">(</span><span class="n">user_repo</span><span class="p">)</span>
    <span class="n">use_case</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">})</span>
</code></pre></div>

<h3 id="dependency-rule">Dependency Rule<a class="header-link" href="#dependency-rule" title="Permanent link">&para;</a></h3>
<p><strong>Dependencies point inward</strong>: Outer layers depend on inner layers, never the reverse.</p>
<div class="highlight"><pre><span></span><code>Adapters (HTTP, DB) â†’ Ports â†’ Domain
</code></pre></div>

<p><strong>Benefit</strong>: Domain logic is <strong>testable</strong> without infrastructure:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Test without database</span>
<span class="k">class</span><span class="w"> </span><span class="nc">InMemoryUserRepository</span><span class="p">(</span><span class="n">UserRepository</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">users</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">find_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">users</span><span class="p">[</span><span class="n">user_id</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">users</span><span class="p">[</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">user</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_change_email</span><span class="p">():</span>
    <span class="n">repo</span> <span class="o">=</span> <span class="n">InMemoryUserRepository</span><span class="p">()</span>
    <span class="n">repo</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">User</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="s1">&#39;john@example.com&#39;</span><span class="p">))</span>

    <span class="n">use_case</span> <span class="o">=</span> <span class="n">ChangeEmailUseCase</span><span class="p">(</span><span class="n">repo</span><span class="p">)</span>
    <span class="n">use_case</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;newemail@example.com&#39;</span><span class="p">)</span>

    <span class="n">user</span> <span class="o">=</span> <span class="n">repo</span><span class="o">.</span><span class="n">find_by_id</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">user</span><span class="o">.</span><span class="n">email</span> <span class="o">==</span> <span class="s1">&#39;newemail@example.com&#39;</span>
</code></pre></div>

<h2 id="clean-architecture">Clean Architecture<a class="header-link" href="#clean-architecture" title="Permanent link">&para;</a></h2>
<p><strong>Clean Architecture</strong> (Robert C. Martin, 2012) generalizes hexagonal architecture with explicit layers:</p>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frameworks &amp; Drivers (DB, Web, UI)  â”‚  (Outermost)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Interface Adapters (Controllers)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Use Cases (Application Logic)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Entities (Business Logic)           â”‚  (Innermost)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="layers">Layers<a class="header-link" href="#layers" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Entities</strong>: Core business rules (User, Order)</li>
<li><strong>Use Cases</strong>: Application-specific logic (CreateUser, PlaceOrder)</li>
<li><strong>Interface Adapters</strong>: Convert data for use cases (Controllers, Presenters)</li>
<li><strong>Frameworks &amp; Drivers</strong>: External tools (Web framework, database, UI)</li>
</ol>
<h3 id="dependency-rule_1">Dependency Rule<a class="header-link" href="#dependency-rule_1" title="Permanent link">&para;</a></h3>
<p><strong>Dependencies only point inward</strong>. Inner layers know nothing about outer layers.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// C++ Example: Entities (innermost)</span>
<span class="c1">// entities/Order.h</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Order</span><span class="w"> </span><span class="p">{</span>
<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">id_</span><span class="p">;</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">total_</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span><span class="w"> </span><span class="n">items_</span><span class="p">;</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">Order</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">total</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">id_</span><span class="p">(</span><span class="n">id</span><span class="p">),</span><span class="w"> </span><span class="n">total_</span><span class="p">(</span><span class="n">total</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>

<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">addItem</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Item</span><span class="o">&amp;</span><span class="w"> </span><span class="n">item</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">items_</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">item</span><span class="p">);</span>
<span class="w">        </span><span class="n">total_</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">item</span><span class="p">.</span><span class="n">price</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">getTotal</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">total_</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Use Cases</span>
<span class="c1">// use_cases/PlaceOrder.h</span>
<span class="k">class</span><span class="w"> </span><span class="nc">PlaceOrder</span><span class="w"> </span><span class="p">{</span>
<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="n">OrderRepository</span><span class="o">*</span><span class="w"> </span><span class="n">repository_</span><span class="p">;</span><span class="w">  </span><span class="c1">// Interface (port)</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">PlaceOrder</span><span class="p">(</span><span class="n">OrderRepository</span><span class="o">*</span><span class="w"> </span><span class="n">repo</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">repository_</span><span class="p">(</span><span class="n">repo</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>

<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">execute</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">userId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">items</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Order</span><span class="w"> </span><span class="nf">order</span><span class="p">(</span><span class="n">generateId</span><span class="p">(),</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">items</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">order</span><span class="p">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">repository_</span><span class="o">-&gt;</span><span class="n">save</span><span class="p">(</span><span class="n">order</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Interface Adapter</span>
<span class="c1">// adapters/HttpController.cpp</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">OrderController::placeOrder</span><span class="p">(</span><span class="n">HttpRequest</span><span class="o">&amp;</span><span class="w"> </span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="n">HttpResponse</span><span class="o">&amp;</span><span class="w"> </span><span class="n">res</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parseItems</span><span class="p">(</span><span class="n">req</span><span class="p">.</span><span class="n">body</span><span class="p">);</span>
<span class="w">    </span><span class="n">PlaceOrder</span><span class="w"> </span><span class="n">useCase</span><span class="p">(</span><span class="n">orderRepository</span><span class="p">);</span>
<span class="w">    </span><span class="n">useCase</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="n">req</span><span class="p">.</span><span class="n">userId</span><span class="p">,</span><span class="w"> </span><span class="n">items</span><span class="p">);</span>
<span class="w">    </span><span class="n">res</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="mi">201</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Order placed&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="independence">Independence<a class="header-link" href="#independence" title="Permanent link">&para;</a></h3>
<p>Clean architecture achieves independence from:
- <strong>Frameworks</strong>: No lock-in to Rails, Spring, etc.
- <strong>UI</strong>: Swap web UI for CLI without changing logic
- <strong>Database</strong>: Swap SQL for NoSQL
- <strong>External agencies</strong>: Third-party APIs are behind interfaces</p>
<h2 id="event-driven-architecture">Event-Driven Architecture<a class="header-link" href="#event-driven-architecture" title="Permanent link">&para;</a></h2>
<p><strong>Event-Driven Architecture (EDA)</strong> uses <strong>events</strong> (state changes) to trigger communication between components.</p>
<h3 id="components">Components<a class="header-link" href="#components" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Event</strong>: Something that happened (<code>UserRegistered</code>, <code>OrderPlaced</code>)</li>
<li><strong>Producer</strong>: Emits events</li>
<li><strong>Event Bus</strong>: Routes events to consumers</li>
<li><strong>Consumer</strong>: Reacts to events</li>
</ul>
<h3 id="example-microservices-with-events">Example (Microservices with Events)<a class="header-link" href="#example-microservices-with-events" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// Node.js with RabbitMQ</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">amqp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;amqplib&#39;</span><span class="p">);</span>

<span class="c1">// Producer: User Service</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">UserService</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="nx">registerUser</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">createUser</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Emit event</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">connection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">amqp</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s1">&#39;amqp://localhost&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">channel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">connection</span><span class="p">.</span><span class="nx">createChannel</span><span class="p">();</span>
<span class="w">        </span><span class="nx">channel</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="s1">&#39;events&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;user.registered&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">Buffer</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
<span class="w">            </span><span class="nx">userId</span><span class="o">:</span><span class="w"> </span><span class="nx">user</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
<span class="w">            </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="nx">user</span><span class="p">.</span><span class="nx">email</span><span class="p">,</span>
<span class="w">        </span><span class="p">})));</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">user</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Consumer: Email Service</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">EmailService</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="nx">start</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">connection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">amqp</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s1">&#39;amqp://localhost&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">channel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">connection</span><span class="p">.</span><span class="nx">createChannel</span><span class="p">();</span>
<span class="w">        </span><span class="nx">channel</span><span class="p">.</span><span class="nx">consume</span><span class="p">(</span><span class="s1">&#39;user.registered&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">sendWelcomeEmail</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">email</span><span class="p">);</span>
<span class="w">            </span><span class="nx">channel</span><span class="p">.</span><span class="nx">ack</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">sendWelcomeEmail</span><span class="p">(</span><span class="nx">email</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Sending welcome email to </span><span class="si">${</span><span class="nx">email</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Decoupling</strong>: User service doesn't know about email service. They communicate through events.</p>
<h3 id="event-sourcing">Event Sourcing<a class="header-link" href="#event-sourcing" title="Permanent link">&para;</a></h3>
<p><strong>Event Sourcing</strong> stores <strong>state as a sequence of events</strong> rather than current state.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Traditional: Store current state</span>
<span class="n">user</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;email&#39;</span><span class="p">:</span> <span class="s1">&#39;new@example.com&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;John&#39;</span> <span class="p">}</span>
<span class="n">db</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>

<span class="c1"># Event Sourcing: Store events</span>
<span class="n">events</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;UserCreated&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="s1">&#39;email&#39;</span><span class="p">:</span> <span class="s1">&#39;old@example.com&#39;</span><span class="p">}},</span>
    <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;EmailChanged&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;email&#39;</span><span class="p">:</span> <span class="s1">&#39;new@example.com&#39;</span><span class="p">}},</span>
<span class="p">]</span>
<span class="n">db</span><span class="o">.</span><span class="n">save_events</span><span class="p">(</span><span class="n">events</span><span class="p">)</span>

<span class="c1"># Rebuild state by replaying events</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_user_state</span><span class="p">(</span><span class="n">user_id</span><span class="p">):</span>
    <span class="n">events</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_events</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>
    <span class="n">user</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">events</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">event</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;UserCreated&#39;</span><span class="p">:</span>
            <span class="n">user</span> <span class="o">=</span> <span class="n">event</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">event</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;EmailChanged&#39;</span><span class="p">:</span>
            <span class="n">user</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">event</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;email&#39;</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">user</span>
</code></pre></div>

<p><strong>Benefits</strong>: Full audit trail, time travel, replay for debugging
<strong>Drawbacks</strong>: Complexity, eventual consistency</p>
<h3 id="cqrs-command-query-responsibility-segregation">CQRS (Command Query Responsibility Segregation)<a class="header-link" href="#cqrs-command-query-responsibility-segregation" title="Permanent link">&para;</a></h3>
<p><strong>CQRS</strong> separates <strong>writes</strong> (commands) from <strong>reads</strong> (queries).</p>
<div class="highlight"><pre><span></span><code><span class="nv">Commands</span><span class="w"> </span><span class="ss">(</span><span class="nv">writes</span><span class="ss">)</span><span class="w"> </span>â†’<span class="w"> </span><span class="nv">Write</span><span class="w"> </span><span class="nv">Model</span><span class="w"> </span>â†’<span class="w"> </span><span class="nv">Event</span><span class="w"> </span><span class="nv">Store</span>
<span class="w">                                      </span>â†“
<span class="w">                                  </span><span class="nv">Event</span><span class="w"> </span><span class="nv">Bus</span>
<span class="w">                                      </span>â†“
<span class="w">                                  </span><span class="nv">Read</span><span class="w"> </span><span class="nv">Model</span><span class="w"> </span><span class="ss">(</span><span class="nv">optimized</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">queries</span><span class="ss">)</span>
</code></pre></div>

<p><strong>Example</strong>:
- <strong>Write Model</strong>: Normalized SQL for consistency
- <strong>Read Model</strong>: Denormalized Elasticsearch for fast searches</p>
<h2 id="mvc-mvp-mvvm">MVC, MVP, MVVM<a class="header-link" href="#mvc-mvp-mvvm" title="Permanent link">&para;</a></h2>
<p>Patterns for organizing UI code.</p>
<h3 id="mvc-model-view-controller">MVC (Model-View-Controller)<a class="header-link" href="#mvc-model-view-controller" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>User Input â†’ Controller â†’ Model
                 â†“          â†“
              View â†â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<p><strong>Model</strong>: Business logic, data
<strong>View</strong>: UI rendering
<strong>Controller</strong>: Handles input, updates model</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Flask MVC</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/users/&lt;int:user_id&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">show_user</span><span class="p">(</span><span class="n">user_id</span><span class="p">):</span>  <span class="c1"># Controller</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>  <span class="c1"># Model</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;user.html&#39;</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>  <span class="c1"># View</span>
</code></pre></div>

<h3 id="mvp-model-view-presenter">MVP (Model-View-Presenter)<a class="header-link" href="#mvp-model-view-presenter" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>User Input â†’ Presenter â†” Model
                 â†•
              View
</code></pre></div>

<p>View is passive; Presenter handles all logic.</p>
<h3 id="mvvm-model-view-viewmodel">MVVM (Model-View-ViewModel)<a class="header-link" href="#mvvm-model-view-viewmodel" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>User Input â†’ ViewModel â†” Model
               â†• (data binding)
            View
</code></pre></div>

<p><strong>ViewModel</strong> exposes data and commands for View. Popular in frameworks with data binding (React, Vue, Angular).</p>
<h2 id="architectural-decision-records-adr">Architectural Decision Records (ADR)<a class="header-link" href="#architectural-decision-records-adr" title="Permanent link">&para;</a></h2>
<p><strong>ADRs</strong> document important architectural decisions.</p>
<h3 id="template">Template<a class="header-link" href="#template" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="gh"># ADR-001: Use Microservices Architecture</span>

<span class="gu">## Status</span>
Accepted

<span class="gu">## Context</span>
We need to scale independently as user base grows.
Current monolith deploys entire app for small changes, causing downtime.
Team has grown to 30 developers, causing merge conflicts.

<span class="gu">## Decision</span>
We will adopt microservices architecture with these services:
<span class="k">-</span><span class="w"> </span>User Service
<span class="k">-</span><span class="w"> </span>Order Service
<span class="k">-</span><span class="w"> </span>Payment Service
<span class="k">-</span><span class="w"> </span>Notification Service

Each service will have its own database.
Communication via REST APIs and RabbitMQ events.

<span class="gu">## Consequences</span>
<span class="gu">### Positive</span>
<span class="k">-</span><span class="w"> </span>Independent scaling
<span class="k">-</span><span class="w"> </span>Team autonomy
<span class="k">-</span><span class="w"> </span>Faster deployments

<span class="gu">### Negative</span>
<span class="k">-</span><span class="w"> </span>Increased complexity
<span class="k">-</span><span class="w"> </span>Need for service mesh, distributed tracing
<span class="k">-</span><span class="w"> </span>Eventual consistency challenges

<span class="gu">## Alternatives Considered</span>
<span class="k">-</span><span class="w"> </span><span class="gs">**Modular monolith**</span>: Keep monolith but enforce module boundaries
<span class="w">  </span><span class="k">-</span><span class="w"> </span>Rejected: Doesn&#39;t solve scaling or deployment issues
</code></pre></div>

<h2 id="quality-attributes">Quality Attributes<a class="header-link" href="#quality-attributes" title="Permanent link">&para;</a></h2>
<p>Architecture optimizes for <strong>quality attributes</strong> (non-functional requirements):</p>
<ul>
<li><strong>Performance</strong>: Response time, throughput</li>
<li><strong>Scalability</strong>: Handle growing load</li>
<li><strong>Availability</strong>: Uptime percentage (99.9% = 8.76 hours downtime/year)</li>
<li><strong>Maintainability</strong>: Ease of changing code</li>
<li><strong>Security</strong>: Resistance to attacks</li>
<li><strong>Testability</strong>: Ease of testing</li>
</ul>
<p><strong>Trade-offs</strong>: You can't optimize all attributes. Prioritize based on business needs.</p>
<h2 id="cap-theorem">CAP Theorem<a class="header-link" href="#cap-theorem" title="Permanent link">&para;</a></h2>
<p>In distributed systems, you can have <strong>at most two</strong> of:</p>
<ul>
<li><strong>Consistency</strong>: All nodes see the same data at the same time</li>
<li><strong>Availability</strong>: Every request gets a response (success or failure)</li>
<li><strong>Partition Tolerance</strong>: System continues despite network partitions</li>
</ul>
<div class="highlight"><pre><span></span><code>     Consistency
        /   \
       /     \
   CA /       \ CP
     /         \
    /           \
Availabilityâ€”Partition Tolerance
         AP
</code></pre></div>

<p><strong>Examples</strong>:
- <strong>CA</strong>: Traditional RDBMS (PostgreSQL) â€” consistent and available, but not partition-tolerant
- <strong>CP</strong>: MongoDB, HBase â€” consistent and partition-tolerant, but may be unavailable during partitions
- <strong>AP</strong>: Cassandra, DynamoDB â€” available and partition-tolerant, but eventually consistent</p>
<p><strong>In practice</strong>: Network partitions happen, so choose CP or AP.</p>
<h2 id="exercises">Exercises<a class="header-link" href="#exercises" title="Permanent link">&para;</a></h2>
<h3 id="exercise-1-choose-architecture-for-scenarios">Exercise 1: Choose Architecture for Scenarios<a class="header-link" href="#exercise-1-choose-architecture-for-scenarios" title="Permanent link">&para;</a></h3>
<p>For each scenario, recommend an architecture (monolith, microservices, serverless) and justify:</p>
<ol>
<li>Startup building an MVP for a task management app (3 developers, 6-month timeline)</li>
<li>E-commerce company with 100 developers, 1M daily users, needs to scale checkout independently</li>
<li>Internal tool for data processing (runs monthly batch jobs, 2 developers)</li>
</ol>
<h3 id="exercise-2-design-a-layered-architecture">Exercise 2: Design a Layered Architecture<a class="header-link" href="#exercise-2-design-a-layered-architecture" title="Permanent link">&para;</a></h3>
<p>Design a 3-tier layered architecture for a blogging platform with:
- User authentication
- Post creation, editing, deletion
- Comments
- Search</p>
<p>List the layers and what components belong in each.</p>
<h3 id="exercise-3-refactor-to-hexagonal-architecture">Exercise 3: Refactor to Hexagonal Architecture<a class="header-link" href="#exercise-3-refactor-to-hexagonal-architecture" title="Permanent link">&para;</a></h3>
<p>Given this tightly coupled code, refactor to hexagonal architecture:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">flask</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">request</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">psycopg2</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/users&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_user</span><span class="p">():</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;dbname=mydb user=postgres&quot;</span><span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;INSERT INTO users (name, email) VALUES (</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
                   <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]))</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">}</span>
</code></pre></div>

<p>Define:
1. Domain entity
2. Port (interface)
3. Adapter (implementation)
4. Use case</p>
<h3 id="exercise-4-document-an-architectural-decision">Exercise 4: Document an Architectural Decision<a class="header-link" href="#exercise-4-document-an-architectural-decision" title="Permanent link">&para;</a></h3>
<p>Write an ADR for one of these decisions:
1. Choosing PostgreSQL over MongoDB for user data
2. Adopting GraphQL instead of REST
3. Using server-side rendering vs client-side rendering</p>
<h3 id="exercise-5-analyze-cap-trade-offs">Exercise 5: Analyze CAP Trade-offs<a class="header-link" href="#exercise-5-analyze-cap-trade-offs" title="Permanent link">&para;</a></h3>
<p>Your company is building a real-time collaborative document editor (like Google Docs). Users must see each other's edits instantly, and the system must work even if some servers are unreachable.</p>
<p>Which of CAP would you prioritize? Would you choose CP or AP? Explain your reasoning and potential trade-offs.</p>
<h2 id="summary">Summary<a class="header-link" href="#summary" title="Permanent link">&para;</a></h2>
<p>Software architecture is about making <strong>intentional trade-offs</strong> to meet business goals:</p>
<ul>
<li><strong>Monolith</strong>: Simple, fast to build, scales vertically â€” start here</li>
<li><strong>Microservices</strong>: Complex, scales horizontally, team autonomy â€” evolve to this when needed</li>
<li><strong>Layered Architecture</strong>: Separation of concerns, testability</li>
<li><strong>Hexagonal/Clean Architecture</strong>: Domain independence, testability, flexibility</li>
<li><strong>Event-Driven</strong>: Decoupling, scalability, eventual consistency</li>
<li><strong>MVC/MVP/MVVM</strong>: UI organization patterns</li>
<li><strong>ADRs</strong>: Document decisions and trade-offs</li>
<li><strong>Quality Attributes</strong>: Prioritize what matters (performance, scalability, maintainability)</li>
<li><strong>CAP Theorem</strong>: You can't have it all in distributed systems</li>
</ul>
<p><strong>Golden rule</strong>: Choose the simplest architecture that meets your needs. You can always evolve later.</p>
<h2 id="navigation">Navigation<a class="header-link" href="#navigation" title="Permanent link">&para;</a></h2>
<p><a href="14_Version_Control_Workflows.md">â† Previous: Version Control Workflows</a> | <a href="16_Developer_Practices.md">Next: Developer Practices â†’</a></p>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/Programming/14_Version_Control_Workflows.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Version Control and Collaboration</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/Programming/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/Programming/16_Developer_Practices.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Developer Practices and Ethics</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">â†‘</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'en';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}