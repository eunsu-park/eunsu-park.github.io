{% raw %}
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 11: Software Maintenance and Evolution - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/en/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/en/" class="nav-item ">
                    <span class="nav-icon">ğŸ </span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">ğŸ’»</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/en/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" selected>
                        English
                    </option>
                    
                    <option value="ko" >
                        í•œêµ­ì–´
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">â˜€ï¸</span>
                    <span class="theme-icon dark">ğŸŒ™</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/en/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/en/Software_Engineering/">Software Engineering</a>
    <span class="separator">/</span>
    <span class="current">Lesson 11: Software Maintenance and Evolution</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>Lesson 11: Software Maintenance and Evolution</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/Software_Engineering/10_Project_Management.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Lesson 10: Software Project Management</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/Software_Engineering/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/Software_Engineering/12_Process_Improvement.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Lesson 12: Software Process Improvement</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#1-the-scale-of-software-maintenance">1. The Scale of Software Maintenance</a></li>
<li><a href="#2-types-of-software-maintenance-iso-14764">2. Types of Software Maintenance (ISO 14764)</a><ul>
<li><a href="#21-corrective-maintenance">2.1 Corrective Maintenance</a></li>
<li><a href="#22-adaptive-maintenance">2.2 Adaptive Maintenance</a></li>
<li><a href="#23-perfective-maintenance">2.3 Perfective Maintenance</a></li>
<li><a href="#24-preventive-maintenance">2.4 Preventive Maintenance</a></li>
</ul>
</li>
<li><a href="#3-lehmans-laws-of-software-evolution">3. Lehman's Laws of Software Evolution</a></li>
<li><a href="#4-legacy-systems">4. Legacy Systems</a><ul>
<li><a href="#41-characteristics-of-legacy-systems">4.1 Characteristics of Legacy Systems</a></li>
<li><a href="#42-modernization-strategies">4.2 Modernization Strategies</a></li>
</ul>
</li>
<li><a href="#5-refactoring-vs-rewriting">5. Refactoring vs. Rewriting</a><ul>
<li><a href="#51-the-case-against-rewriting">5.1 The Case Against Rewriting</a></li>
<li><a href="#52-when-rewriting-may-be-justified">5.2 When Rewriting May Be Justified</a></li>
<li><a href="#53-common-refactoring-patterns">5.3 Common Refactoring Patterns</a></li>
</ul>
</li>
<li><a href="#6-reverse-engineering-and-program-comprehension">6. Reverse Engineering and Program Comprehension</a><ul>
<li><a href="#61-reverse-engineering-techniques">6.1 Reverse Engineering Techniques</a></li>
<li><a href="#62-tools-for-program-comprehension">6.2 Tools for Program Comprehension</a></li>
</ul>
</li>
<li><a href="#7-software-aging-and-rejuvenation">7. Software Aging and Rejuvenation</a><ul>
<li><a href="#71-software-aging">7.1 Software Aging</a></li>
<li><a href="#72-software-rejuvenation">7.2 Software Rejuvenation</a></li>
</ul>
</li>
<li><a href="#8-technical-debt">8. Technical Debt</a><ul>
<li><a href="#81-types-of-technical-debt">8.1 Types of Technical Debt</a></li>
<li><a href="#82-technical-debt-register">8.2 Technical Debt Register</a></li>
<li><a href="#83-managing-technical-debt">8.3 Managing Technical Debt</a></li>
<li><a href="#84-debt-induced-velocity-decline">8.4 Debt-Induced Velocity Decline</a></li>
</ul>
</li>
<li><a href="#10-migration-strategies">10. Migration Strategies</a><ul>
<li><a href="#81-big-bang-migration">8.1 Big Bang Migration</a></li>
<li><a href="#82-phased-migration">8.2 Phased Migration</a></li>
<li><a href="#83-parallel-operation">8.3 Parallel Operation</a></li>
</ul>
</li>
<li><a href="#11-deprecation-policies">11. Deprecation Policies</a><ul>
<li><a href="#91-deprecation-best-practices">9.1 Deprecation Best Practices</a></li>
</ul>
</li>
<li><a href="#12-anti-patterns-in-software-maintenance">12. Anti-Patterns in Software Maintenance</a><ul>
<li><a href="#121-the-lava-layer-anti-pattern">12.1 The Lava Layer Anti-Pattern</a></li>
<li><a href="#122-the-if-it-aint-broke-trap">12.2 The "If It Ain't Broke" Trap</a></li>
<li><a href="#123-heroic-maintenance">12.3 Heroic Maintenance</a></li>
<li><a href="#124-the-boiled-frog">12.4 The Boiled Frog</a></li>
</ul>
</li>
<li><a href="#13-maintenance-metrics">13. Maintenance Metrics</a></li>
<li><a href="#14-case-study-modernizing-a-monolith">14. Case Study: Modernizing a Monolith</a></li>
<li><a href="#summary">Summary</a></li>
<li><a href="#practice-exercises">Practice Exercises</a></li>
<li><a href="#further-reading">Further Reading</a></li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="lesson-11-software-maintenance-and-evolution">Lesson 11: Software Maintenance and Evolution<a class="header-link" href="#lesson-11-software-maintenance-and-evolution" title="Permanent link">&para;</a></h1>
<p><strong>Previous</strong>: <a href="./10_Project_Management.md">Project Management</a> | <strong>Next</strong>: <a href="./12_Process_Improvement.md">Process Improvement</a></p>
<p>Software does not wear out the way physical machinery does. A database binary stored on a server experiences no friction, corrosion, or fatigue. Yet software still "ages" â€” not because its bits degrade, but because the world around it changes. Operating systems evolve, security vulnerabilities are discovered, business rules shift, and user expectations rise. Understanding how to sustain and evolve software after its initial release is one of the most economically significant skills in software engineering.</p>
<p><strong>Difficulty</strong>: â­â­â­</p>
<p><strong>Prerequisites</strong>:
- Software Development Life Cycle concepts (Lesson 02)
- Basic software design principles
- Familiarity with version control (Git)</p>
<p><strong>Learning Objectives</strong>:
- Distinguish the four types of software maintenance and know when each applies
- Explain Lehman's Laws and their implications for long-lived systems
- Evaluate strategies for modernizing legacy systems
- Apply refactoring techniques to improve code without changing behavior
- Understand reverse engineering, software aging, and migration strategies
- Select appropriate deprecation policies for APIs and services
- Measure maintenance health using key metrics</p>
<hr />
<h2 id="1-the-scale-of-software-maintenance">1. The Scale of Software Maintenance<a class="header-link" href="#1-the-scale-of-software-maintenance" title="Permanent link">&para;</a></h2>
<p>Software maintenance is the modification of a software product after delivery to correct faults, improve performance, or adapt it to a changed environment (ISO 14764). It is not a secondary concern â€” it dominates the software lifecycle.</p>
<p><strong>Typical cost distribution across the software lifecycle:</strong></p>
<table>
<thead>
<tr>
<th>Phase</th>
<th>Approximate Share of Total Lifetime Cost</th>
</tr>
</thead>
<tbody>
<tr>
<td>Requirements and design</td>
<td>5â€“10%</td>
</tr>
<tr>
<td>Coding and unit testing</td>
<td>10â€“15%</td>
</tr>
<tr>
<td>Integration and system testing</td>
<td>10â€“15%</td>
</tr>
<tr>
<td><strong>Maintenance</strong></td>
<td><strong>60â€“80%</strong></td>
</tr>
</tbody>
</table>
<p>Several factors drive this disproportion:
- Systems that succeed grow in users, features, and complexity
- Personnel turnover means maintainers often did not write the original code
- Requirements continue evolving as the business evolves
- Technology platforms change beneath the application</p>
<hr />
<h2 id="2-types-of-software-maintenance-iso-14764">2. Types of Software Maintenance (ISO 14764)<a class="header-link" href="#2-types-of-software-maintenance-iso-14764" title="Permanent link">&para;</a></h2>
<p>ISO 14764 defines four categories of maintenance. Understanding which type of work you are doing helps allocate resources correctly and set appropriate expectations.</p>
<h3 id="21-corrective-maintenance">2.1 Corrective Maintenance<a class="header-link" href="#21-corrective-maintenance" title="Permanent link">&para;</a></h3>
<p><strong>Goal</strong>: Fix defects that cause incorrect behavior or system failures.</p>
<p>Corrective maintenance addresses bugs reported by users or detected by monitoring. It ranges from trivial one-line typo fixes to multi-week investigations of race conditions in distributed systems.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Bug reported: Division by zero when user has no orders</span>
<span class="c1"># Before (buggy)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">average_order_value</span><span class="p">(</span><span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
    <span class="n">orders</span> <span class="o">=</span> <span class="n">get_orders</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>
    <span class="n">total</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">orders</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">total</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">orders</span><span class="p">)</span>  <span class="c1"># ZeroDivisionError if no orders</span>

<span class="c1"># After (corrective fix)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">average_order_value</span><span class="p">(</span><span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
    <span class="n">orders</span> <span class="o">=</span> <span class="n">get_orders</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">orders</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.0</span>
    <span class="n">total</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">orders</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">total</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">orders</span><span class="p">)</span>
</code></pre></div>

<h3 id="22-adaptive-maintenance">2.2 Adaptive Maintenance<a class="header-link" href="#22-adaptive-maintenance" title="Permanent link">&para;</a></h3>
<p><strong>Goal</strong>: Modify the software to work in a changed environment.</p>
<p>The environment includes operating systems, hardware, database engines, third-party APIs, legal regulations, and company policies. None of these are stable forever.</p>
<p>Examples:
- Updating TLS certificate handling after TLS 1.0 is deprecated
- Migrating from Python 2 to Python 3
- Adapting to GDPR requirements introduced after initial deployment
- Switching from a deprecated payment gateway to a new provider</p>
<h3 id="23-perfective-maintenance">2.3 Perfective Maintenance<a class="header-link" href="#23-perfective-maintenance" title="Permanent link">&para;</a></h3>
<p><strong>Goal</strong>: Improve performance, maintainability, or add new features requested by users.</p>
<p>This is often the most resource-intensive category. As the system proves its value, stakeholders request enhancements. The line between perfective maintenance and new development is blurry â€” the key distinction is that the system already exists and is in production.</p>
<h3 id="24-preventive-maintenance">2.4 Preventive Maintenance<a class="header-link" href="#24-preventive-maintenance" title="Permanent link">&para;</a></h3>
<p><strong>Goal</strong>: Reduce future failures by improving reliability, maintainability, or security before problems occur.</p>
<p>Examples:
- Refactoring a tangled module to reduce its cyclomatic complexity
- Adding automated tests to an untested critical path
- Rotating encryption keys before they expire
- Upgrading a dependency before its known vulnerability becomes actively exploited</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Trigger</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>Corrective</td>
<td>Bug report or failure</td>
<td>Fix null pointer exception in production</td>
</tr>
<tr>
<td>Adaptive</td>
<td>Environmental change</td>
<td>Migrate to Python 3.12</td>
</tr>
<tr>
<td>Perfective</td>
<td>User or business request</td>
<td>Add CSV export to reports</td>
</tr>
<tr>
<td>Preventive</td>
<td>Proactive analysis</td>
<td>Refactor 2,000-line monolithic function</td>
</tr>
</tbody>
</table>
<p>In practice, most maintenance backlogs contain a mix of all four. Purely corrective shops are reactive and fragile; investing in preventive maintenance is the hallmark of a mature engineering organization.</p>
<hr />
<h2 id="3-lehmans-laws-of-software-evolution">3. Lehman's Laws of Software Evolution<a class="header-link" href="#3-lehmans-laws-of-software-evolution" title="Permanent link">&para;</a></h2>
<p>Meir "Manny" Lehman and LÃ¡szlÃ³ BÃ©lÃ¡dy studied large software systems at IBM in the 1970sâ€“1990s and derived empirical laws that hold remarkably well across decades of software history.</p>
<table>
<thead>
<tr>
<th>Law</th>
<th>Name</th>
<th>Statement</th>
</tr>
</thead>
<tbody>
<tr>
<td>I</td>
<td><strong>Continuing Change</strong></td>
<td>An E-type system must be continually adapted or it becomes progressively less satisfactory</td>
</tr>
<tr>
<td>II</td>
<td><strong>Increasing Complexity</strong></td>
<td>As a system evolves, its complexity increases unless work is done to reduce it</td>
</tr>
<tr>
<td>III</td>
<td><strong>Self Regulation</strong></td>
<td>Global system attributes (size, activity rates) are self-regulating and statistically invariant</td>
</tr>
<tr>
<td>IV</td>
<td><strong>Conservation of Organizational Stability</strong></td>
<td>The average effective global activity rate in an evolving system is invariant</td>
</tr>
<tr>
<td>V</td>
<td><strong>Conservation of Familiarity</strong></td>
<td>The content of successive releases is statistically invariant</td>
</tr>
<tr>
<td>VI</td>
<td><strong>Continuing Growth</strong></td>
<td>Functional content must increase to maintain user satisfaction over its lifetime</td>
</tr>
<tr>
<td>VII</td>
<td><strong>Declining Quality</strong></td>
<td>Quality will appear to decline unless rigorously maintained and adapted to operational environment changes</td>
</tr>
<tr>
<td>VIII</td>
<td><strong>Feedback System</strong></td>
<td>E-type evolution processes are multi-level, multi-loop, multi-agent feedback systems</td>
</tr>
</tbody>
</table>
<p><strong>Practical implications:</strong></p>
<ul>
<li><strong>Law I</strong>: If your organization stops investing in a successful system, it will erode. "Freeze and forget" is not a stable strategy.</li>
<li><strong>Law II</strong>: Complexity is the natural direction of entropy. Preventive refactoring, architectural reviews, and technical debt reduction are essential counter-pressures.</li>
<li><strong>Law VII</strong>: Declining quality is the default trajectory, not the exception. Quality requires active, sustained investment.</li>
</ul>
<hr />
<h2 id="4-legacy-systems">4. Legacy Systems<a class="header-link" href="#4-legacy-systems" title="Permanent link">&para;</a></h2>
<p>A <strong>legacy system</strong> is a system that is critical to the business but difficult to change due to age, technology, design, or documentation gaps.</p>
<h3 id="41-characteristics-of-legacy-systems">4.1 Characteristics of Legacy Systems<a class="header-link" href="#41-characteristics-of-legacy-systems" title="Permanent link">&para;</a></h3>
<ul>
<li>Built with obsolete technology (COBOL, Visual Basic 6, ASP classic)</li>
<li>Little or no automated test coverage</li>
<li>Poor or missing documentation</li>
<li>High coupling between components, making changes risky</li>
<li>Known only by long-tenured staff (or staff who have left)</li>
<li>High business value â€” the system actually works and is trusted</li>
</ul>
<p>The last point is critical. Legacy systems are often mocked, but they represent decades of encoded business logic. The mainframe payroll system running a bank may be 40 years old, but it processes billions of dollars correctly every day.</p>
<h3 id="42-modernization-strategies">4.2 Modernization Strategies<a class="header-link" href="#42-modernization-strategies" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Strategy</th>
<th>Description</th>
<th>Risk</th>
<th>Cost</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Leave it alone</strong></td>
<td>Accept the status quo</td>
<td>Accumulating</td>
<td>Low now, high later</td>
</tr>
<tr>
<td><strong>Wrap it</strong></td>
<td>Add a modern API layer around the legacy core</td>
<td>Low</td>
<td>Medium</td>
</tr>
<tr>
<td><strong>Extend it</strong></td>
<td>Add new capabilities without touching core</td>
<td>Medium</td>
<td>Medium</td>
</tr>
<tr>
<td><strong>Rewrite</strong></td>
<td>Build a replacement from scratch</td>
<td>High</td>
<td>Very high</td>
</tr>
<tr>
<td><strong>Replace</strong></td>
<td>Buy a COTS package to replace it</td>
<td>Medium</td>
<td>High</td>
</tr>
<tr>
<td><strong>Migrate</strong></td>
<td>Move to modern platform incrementally</td>
<td>Lowâ€“Medium</td>
<td>Mediumâ€“High</td>
</tr>
</tbody>
</table>
<p>The <strong>Strangler Fig Pattern</strong> (popularized by Martin Fowler) is the preferred incremental approach. Named after a vine that grows around a tree and eventually replaces it:</p>
<div class="highlight"><pre><span></span><code>Phase 1: Intercept         Phase 2: Redirect         Phase 3: Strangle

  Requests                   Requests                  Requests
     â”‚                          â”‚                         â”‚
     â–¼                          â–¼                         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚Legacyâ”‚                  â”‚Routerâ”‚                  â”‚New Systemâ”‚
  â”‚Systemâ”‚                  â””â”€â”€â”¬â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â””â”€â”€â”€â”€â”€â”€â”˜               Legacyâ”‚  New                 (Legacy retired)
                          â”Œâ”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”
                       â”Œâ”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚Legacyâ”‚      â”‚New Systemâ”‚
                       â”‚(some)â”‚      â”‚(growing) â”‚
                       â””â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<p>A strangler fig migration allows:
- No big-bang cutover (which is the single highest-risk event in any migration)
- Running old and new systems in parallel for validation
- Incremental delivery of value
- The ability to pause or reverse if problems arise</p>
<hr />
<h2 id="5-refactoring-vs-rewriting">5. Refactoring vs. Rewriting<a class="header-link" href="#5-refactoring-vs-rewriting" title="Permanent link">&para;</a></h2>
<p><strong>Refactoring</strong> is changing the internal structure of code to improve its design without changing its observable external behavior. It is disciplined, incremental, and safe when backed by tests.</p>
<p><strong>Rewriting</strong> is discarding existing code and building from scratch. It is occasionally necessary but is usually riskier and more expensive than teams expect.</p>
<h3 id="51-the-case-against-rewriting">5.1 The Case Against Rewriting<a class="header-link" href="#51-the-case-against-rewriting" title="Permanent link">&para;</a></h3>
<p>Joel Spolsky's famous article "Things You Should Never Do, Part I" (2000) argues that rewriting from scratch is almost always a mistake. Reasons:</p>
<ul>
<li>The "ugly" old code contains thousands of bug fixes that are not in any specification</li>
<li>Rewrites take 3â€“5Ã— longer than estimated</li>
<li>By the time the rewrite ships, the original system has continued evolving, so the rewrite is already behind</li>
<li>The new team makes different (not necessarily better) design mistakes</li>
</ul>
<h3 id="52-when-rewriting-may-be-justified">5.2 When Rewriting May Be Justified<a class="header-link" href="#52-when-rewriting-may-be-justified" title="Permanent link">&para;</a></h3>
<ul>
<li>The original technology platform is end-of-life with no migration path</li>
<li>The codebase has zero test coverage and is too entangled to safely refactor</li>
<li>The domain model is fundamentally wrong and prevents necessary features</li>
<li>Business requirements have changed so completely that the current design is an obstacle, not an asset</li>
</ul>
<h3 id="53-common-refactoring-patterns">5.3 Common Refactoring Patterns<a class="header-link" href="#53-common-refactoring-patterns" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Extract Method: decompose a long method into named sub-functions</span>
<span class="c1"># Before</span>
<span class="k">def</span><span class="w"> </span><span class="nf">process_order</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="c1"># Validate</span>
    <span class="k">if</span> <span class="n">order</span><span class="o">.</span><span class="n">quantity</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Quantity must be positive&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">order</span><span class="o">.</span><span class="n">product_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">get_valid_products</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid product&quot;</span><span class="p">)</span>
    <span class="c1"># Calculate price</span>
    <span class="n">base_price</span> <span class="o">=</span> <span class="n">get_price</span><span class="p">(</span><span class="n">order</span><span class="o">.</span><span class="n">product_id</span><span class="p">)</span>
    <span class="n">discount</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="k">if</span> <span class="n">order</span><span class="o">.</span><span class="n">quantity</span> <span class="o">&gt;</span> <span class="mi">100</span> <span class="k">else</span> <span class="mi">0</span>
    <span class="n">total</span> <span class="o">=</span> <span class="n">base_price</span> <span class="o">*</span> <span class="n">order</span><span class="o">.</span><span class="n">quantity</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">discount</span><span class="p">)</span>
    <span class="c1"># Save</span>
    <span class="n">db</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">Order</span><span class="p">(</span><span class="n">order</span><span class="o">.</span><span class="n">product_id</span><span class="p">,</span> <span class="n">order</span><span class="o">.</span><span class="n">quantity</span><span class="p">,</span> <span class="n">total</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">total</span>

<span class="c1"># After (refactored)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">process_order</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="n">validate_order</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
    <span class="n">total</span> <span class="o">=</span> <span class="n">calculate_total</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
    <span class="n">save_order</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">total</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">total</span>

<span class="k">def</span><span class="w"> </span><span class="nf">validate_order</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">order</span><span class="o">.</span><span class="n">quantity</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Quantity must be positive&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">order</span><span class="o">.</span><span class="n">product_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">get_valid_products</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid product&quot;</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">calculate_total</span><span class="p">(</span><span class="n">order</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
    <span class="n">base_price</span> <span class="o">=</span> <span class="n">get_price</span><span class="p">(</span><span class="n">order</span><span class="o">.</span><span class="n">product_id</span><span class="p">)</span>
    <span class="n">discount</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="k">if</span> <span class="n">order</span><span class="o">.</span><span class="n">quantity</span> <span class="o">&gt;</span> <span class="mi">100</span> <span class="k">else</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="n">base_price</span> <span class="o">*</span> <span class="n">order</span><span class="o">.</span><span class="n">quantity</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">discount</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">save_order</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">total</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
    <span class="n">db</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">Order</span><span class="p">(</span><span class="n">order</span><span class="o">.</span><span class="n">product_id</span><span class="p">,</span> <span class="n">order</span><span class="o">.</span><span class="n">quantity</span><span class="p">,</span> <span class="n">total</span><span class="p">))</span>
</code></pre></div>

<p><strong>The Refactoring Rule</strong>: Never refactor without a test suite that confirms behavior is preserved.</p>
<hr />
<h2 id="6-reverse-engineering-and-program-comprehension">6. Reverse Engineering and Program Comprehension<a class="header-link" href="#6-reverse-engineering-and-program-comprehension" title="Permanent link">&para;</a></h2>
<p>When maintaining code you did not write (or wrote years ago and have since forgotten), you must perform <strong>program comprehension</strong> â€” understanding what the code does, why it does it that way, and how changes will propagate.</p>
<h3 id="61-reverse-engineering-techniques">6.1 Reverse Engineering Techniques<a class="header-link" href="#61-reverse-engineering-techniques" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Static analysis</strong>: Reading code, call graphs, dependency maps without executing it</li>
<li><strong>Dynamic analysis</strong>: Running the system and observing behavior (profilers, debuggers, log analysis)</li>
<li><strong>Documentation recovery</strong>: Mining commit history, issue trackers, old emails for design rationale</li>
<li><strong>Concept location</strong>: Identifying which code module implements which business concept</li>
</ul>
<h3 id="62-tools-for-program-comprehension">6.2 Tools for Program Comprehension<a class="header-link" href="#62-tools-for-program-comprehension" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Category</th>
<th>Tools</th>
</tr>
</thead>
<tbody>
<tr>
<td>Static analysis</td>
<td>SonarQube, ESLint, PyLint, Understand</td>
</tr>
<tr>
<td>Call graph generation</td>
<td>Doxygen, pycallgraph, CodeScene</td>
</tr>
<tr>
<td>Dependency visualization</td>
<td>Sourcegraph, IntelliJ dependency view</td>
</tr>
<tr>
<td>Runtime profiling</td>
<td>py-spy, perf, async-profiler</td>
</tr>
<tr>
<td>Git history mining</td>
<td><code>git log --follow</code>, git blame, GitLens</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="7-software-aging-and-rejuvenation">7. Software Aging and Rejuvenation<a class="header-link" href="#7-software-aging-and-rejuvenation" title="Permanent link">&para;</a></h2>
<h3 id="71-software-aging">7.1 Software Aging<a class="header-link" href="#71-software-aging" title="Permanent link">&para;</a></h3>
<p>David Parnas introduced the concept of <strong>software aging</strong> in 1994. Software ages because:</p>
<ol>
<li><strong>Drift</strong>: The system's design assumptions become less valid over time as the environment and requirements change</li>
<li><strong>Accumulation</strong>: Each patch and quick fix leaves behind complexity, unused code, and inconsistency</li>
<li><strong>Ignorance</strong>: Knowledge of why things are the way they are gradually leaves the team</li>
</ol>
<p>Symptoms of software aging:
- Increasing time to implement new features
- High defect rates in old modules
- Fear of touching certain parts of the codebase
- Only one or two people understand specific subsystems
- Build and test cycles grow progressively longer</p>
<h3 id="72-software-rejuvenation">7.2 Software Rejuvenation<a class="header-link" href="#72-software-rejuvenation" title="Permanent link">&para;</a></h3>
<p><strong>Rejuvenation</strong> is the planned, sustained effort to reverse software aging:</p>
<ul>
<li>Regular refactoring sprints or "tech debt sprints"</li>
<li>Architectural reviews and modernization roadmaps</li>
<li>Knowledge transfer through pair programming and documentation</li>
<li>Replacing outdated frameworks and libraries on a planned schedule</li>
<li>Improving build and test infrastructure to reduce feedback latency</li>
</ul>
<p>A useful heuristic: allocate 10â€“20% of engineering capacity to ongoing rejuvenation. Teams that skip this eventually face a "big rewrite" crisis.</p>
<hr />
<h2 id="8-technical-debt">8. Technical Debt<a class="header-link" href="#8-technical-debt" title="Permanent link">&para;</a></h2>
<p>Ward Cunningham coined the term <strong>technical debt</strong> in 1992 to describe the implied cost of rework caused by choosing an easy solution now instead of a better approach that would take longer. Like financial debt, technical debt accumulates interest over time â€” every future change in a debt-laden area costs more than it otherwise would.</p>
<h3 id="81-types-of-technical-debt">8.1 Types of Technical Debt<a class="header-link" href="#81-types-of-technical-debt" title="Permanent link">&para;</a></h3>
<p>Martin Fowler's <strong>Technical Debt Quadrant</strong> classifies debt by intent and prudence:</p>
<div class="highlight"><pre><span></span><code><span class="w">                  </span><span class="nv">Reckless</span><span class="w">           </span><span class="nv">Prudent</span>
<span class="w">                     </span>â”‚<span class="w">                 </span>â”‚
<span class="nv">Deliberate</span><span class="w">    </span><span class="s2">&quot;We don&#39;t have    &quot;</span><span class="nv">We</span><span class="w"> </span><span class="nv">must</span><span class="w"> </span><span class="nv">ship</span><span class="w"> </span><span class="nv">now</span>
<span class="w">              </span><span class="nv">time</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">design</span><span class="s2">&quot;  and deal with it later&quot;</span>
<span class="w">                     </span>â”‚<span class="w">                 </span>â”‚
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
<span class="w">                     </span>â”‚<span class="w">                 </span>â”‚
<span class="nv">Inadvertent</span><span class="w">   </span><span class="s2">&quot;What&#39;s layering?&quot;</span><span class="w">  </span><span class="err">&quot;Now we know how</span>
<span class="w">                     </span>â”‚<span class="w">            </span><span class="nv">we</span><span class="w"> </span><span class="nv">should</span><span class="w"> </span><span class="nv">have</span><span class="w"> </span><span class="nv">done</span><span class="w"> </span><span class="nv">it</span><span class="err">&quot;</span>
</code></pre></div>

<table>
<thead>
<tr>
<th>Quadrant</th>
<th>Example</th>
<th>Appropriate Response</th>
</tr>
</thead>
<tbody>
<tr>
<td>Deliberate + Reckless</td>
<td>Skipping design "to go fast"</td>
<td>Stop â€” this rarely pays off</td>
</tr>
<tr>
<td>Deliberate + Prudent</td>
<td>Hardcoding config to hit a launch deadline</td>
<td>Accept, with a tracked payback plan</td>
</tr>
<tr>
<td>Inadvertent + Reckless</td>
<td>Design antipatterns from inexperience</td>
<td>Invest in team skills, fix during maintenance</td>
</tr>
<tr>
<td>Inadvertent + Prudent</td>
<td>Realizing a better design after implementation</td>
<td>Normal learning; refactor when economically justified</td>
</tr>
</tbody>
</table>
<h3 id="82-technical-debt-register">8.2 Technical Debt Register<a class="header-link" href="#82-technical-debt-register" title="Permanent link">&para;</a></h3>
<p>Similar to a risk register, a <strong>technical debt register</strong> makes debt visible and actionable:</p>
<div class="highlight"><pre><span></span><code>| ID   | Location          | Description                          | Impact     | Effort  | Priority |
|------|-------------------|--------------------------------------|------------|---------|----------|
| TD01 | auth/session.py   | Pickle serialization; blocks upgrades | High       | 3 days  | P1       |
| TD02 | reports/generate  | 2,400-line god function              | High       | 5 days  | P1       |
| TD03 | models/product.py | No type annotations                  | Medium     | 2 days  | P2       |
| TD04 | tests/integration | Flaky sleep()-based async tests      | Medium     | 3 days  | P2       |
| TD05 | frontend/styles   | 800-line CSS file, no BEM            | Low        | 4 days  | P3       |
</code></pre></div>

<h3 id="83-managing-technical-debt">8.3 Managing Technical Debt<a class="header-link" href="#83-managing-technical-debt" title="Permanent link">&para;</a></h3>
<p>Effective debt management balances paydown against feature delivery:</p>
<ul>
<li><strong>The Boy Scout Rule</strong>: "Always leave the code a little cleaner than you found it." Small, continuous improvements compound over time.</li>
<li><strong>Dedicated debt sprints</strong>: Allocate one sprint per quarter exclusively to debt reduction. Teams that never do this eventually reach a crisis point.</li>
<li><strong>Definition of Done</strong>: Include debt creation criteria in the team's Definition of Done (e.g., "No new functions longer than 50 lines without review").</li>
<li><strong>Debt budgets</strong>: Some teams set a maximum debt-to-feature ratio â€” for every 4 sprints of feature work, at least 1 sprint of debt reduction.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># Code review checklist item: flag new technical debt</span>
<span class="c1"># Good practice: track it in the PR description</span>

<span class="c1">## PR #847: Add bulk export feature</span>

<span class="c1">### Technical Debt Created</span>
<span class="o">-</span> <span class="n">The</span> <span class="n">CSV</span> <span class="n">serialization</span> <span class="ow">is</span> <span class="n">hardcoded</span> <span class="k">for</span> <span class="n">the</span> <span class="n">current</span> <span class="n">schema</span><span class="o">.</span>
  <span class="n">Tracked</span> <span class="k">as</span> <span class="n">TD</span><span class="o">-</span><span class="mi">023</span> <span class="ow">in</span> <span class="n">tech</span> <span class="n">debt</span> <span class="n">register</span><span class="o">.</span>
  <span class="n">Plan</span> <span class="n">to</span> <span class="n">abstract</span> <span class="k">with</span> <span class="n">a</span> <span class="n">serializer</span> <span class="n">interface</span> <span class="ow">in</span> <span class="n">Q3</span><span class="o">.</span>

<span class="c1">### Technical Debt Reduced</span>
<span class="o">-</span> <span class="n">Refactored</span> <span class="n">the</span> <span class="err">`</span><span class="n">ReportBuilder</span><span class="err">`</span> <span class="k">class</span><span class="w"> </span><span class="err">(</span><span class="nc">was</span> <span class="mi">800</span> <span class="n">lines</span> <span class="err">â†’</span> <span class="n">now</span> <span class="mi">4</span> <span class="n">classes</span> <span class="err">Ã—</span> <span class="o">~</span><span class="mi">200</span> <span class="n">lines</span><span class="p">)</span>
  <span class="n">Closes</span> <span class="n">TD</span><span class="o">-</span><span class="mf">019.</span>
</code></pre></div>

<h3 id="84-debt-induced-velocity-decline">8.4 Debt-Induced Velocity Decline<a class="header-link" href="#84-debt-induced-velocity-decline" title="Permanent link">&para;</a></h3>
<p>Without active debt management, teams experience a characteristic pattern:</p>
<div class="highlight"><pre><span></span><code>Team Velocity
     â”‚
100% â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
 90% â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
 80% â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
 70% â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ
 60% â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
 50% â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Time (quarters)
           Q1  Q2  Q3  Q4  Q5  Q6  Q7  Q8

Without debt reduction, velocity declines ~10% per quarter in high-churn codebases.
</code></pre></div>

<p>This pattern explains why a team that was delivering 40 story points per sprint in year one is delivering 18 story points in year three â€” not because the team is less capable, but because each change now requires navigating a complex web of accumulated technical debt.</p>
<hr />
<h2 id="10-migration-strategies">10. Migration Strategies<a class="header-link" href="#10-migration-strategies" title="Permanent link">&para;</a></h2>
<p>When moving from one platform, database, or architecture to another, three main strategies exist:</p>
<h3 id="81-big-bang-migration">8.1 Big Bang Migration<a class="header-link" href="#81-big-bang-migration" title="Permanent link">&para;</a></h3>
<p>Replace the old system with the new one in a single cutover event.</p>
<div class="highlight"><pre><span></span><code>Old System  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Cutover â”€â”€â”€â”€â”€â”€â”€â”€ Retired
New System                                           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
</code></pre></div>

<ul>
<li><strong>Advantage</strong>: Simple to manage; no long-running parallel operation</li>
<li><strong>Risk</strong>: If the new system has defects on day one, the full user population is impacted immediately</li>
<li><strong>When appropriate</strong>: Small systems, low traffic, well-understood domains with excellent test coverage</li>
</ul>
<h3 id="82-phased-migration">8.2 Phased Migration<a class="header-link" href="#82-phased-migration" title="Permanent link">&para;</a></h3>
<p>Migrate functionality module by module, running old and new systems in parallel.</p>
<div class="highlight"><pre><span></span><code><span class="k">Module</span><span class="w"> </span><span class="nn">A</span><span class="p">:</span><span class="w">  </span><span class="n">Old</span><span class="w"> </span><span class="err">â”€â”€â”€â”€</span><span class="w"> </span><span class="k">New</span>
<span class="k">Module</span><span class="w"> </span><span class="nn">B</span><span class="p">:</span><span class="w">        </span><span class="n">Old</span><span class="w"> </span><span class="err">â”€â”€â”€â”€</span><span class="w"> </span><span class="k">New</span>
<span class="k">Module</span><span class="w"> </span><span class="nn">C</span><span class="p">:</span><span class="w">              </span><span class="n">Old</span><span class="w"> </span><span class="err">â”€â”€â”€â”€</span><span class="w"> </span><span class="k">New</span>
</code></pre></div>

<ul>
<li><strong>Advantage</strong>: Lower risk per phase; allows learning before migrating complex parts</li>
<li><strong>Risk</strong>: Dual-system data synchronization complexity; longer overall timeline</li>
<li><strong>When appropriate</strong>: Most medium-to-large systems (the default recommendation)</li>
</ul>
<h3 id="83-parallel-operation">8.3 Parallel Operation<a class="header-link" href="#83-parallel-operation" title="Permanent link">&para;</a></h3>
<p>Run both old and new systems simultaneously, comparing outputs.</p>
<div class="highlight"><pre><span></span><code><span class="nv">All</span><span class="w"> </span><span class="nv">Requests</span><span class="w"> </span>â”€â”€â”¬â”€â”€â–¶<span class="w"> </span><span class="nv">Old</span><span class="w"> </span><span class="nv">System</span><span class="w"> </span>â”€â”€â–¶<span class="w"> </span><span class="nv">Authoritative</span><span class="w"> </span><span class="nv">Response</span>
<span class="w">               </span>â””â”€â”€â–¶<span class="w"> </span><span class="nv">New</span><span class="w"> </span><span class="nv">System</span><span class="w"> </span>â”€â”€â–¶<span class="w"> </span><span class="nv">Logged</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">comparison</span>
</code></pre></div>

<ul>
<li><strong>Advantage</strong>: Validate correctness before switching traffic</li>
<li><strong>Risk</strong>: Double the infrastructure cost; complex comparison logic</li>
<li><strong>When appropriate</strong>: High-stakes systems (financial calculations, medical records)</li>
</ul>
<hr />
<h2 id="11-deprecation-policies">11. Deprecation Policies<a class="header-link" href="#11-deprecation-policies" title="Permanent link">&para;</a></h2>
<p>Deprecation is the process of phasing out APIs, features, or services. Well-managed deprecation prevents breaking changes from surprising consumers.</p>
<h3 id="91-deprecation-best-practices">9.1 Deprecation Best Practices<a class="header-link" href="#91-deprecation-best-practices" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">warnings</span>

<span class="k">def</span><span class="w"> </span><span class="nf">legacy_calculate_discount</span><span class="p">(</span><span class="n">order_total</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">user_tier</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate discount based on order total and user tier.</span>

<span class="sd">    .. deprecated:: 2.4.0</span>
<span class="sd">        Use :func:`calculate_discount_v2` instead. This function will be</span>
<span class="sd">        removed in version 4.0.0 (scheduled for 2026-Q1).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
        <span class="s2">&quot;legacy_calculate_discount is deprecated and will be removed in v4.0.0. &quot;</span>
        <span class="s2">&quot;Use calculate_discount_v2() instead.&quot;</span><span class="p">,</span>
        <span class="ne">DeprecationWarning</span><span class="p">,</span>
        <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">order_total</span> <span class="o">*</span> <span class="mf">0.1</span> <span class="k">if</span> <span class="n">user_tier</span> <span class="o">==</span> <span class="s2">&quot;premium&quot;</span> <span class="k">else</span> <span class="mf">0.0</span>
</code></pre></div>

<p><strong>Deprecation timeline guidelines:</strong></p>
<table>
<thead>
<tr>
<th>System Type</th>
<th>Minimum Deprecation Period</th>
</tr>
</thead>
<tbody>
<tr>
<td>Internal library (single team)</td>
<td>1 sprint to 1 quarter</td>
</tr>
<tr>
<td>Internal API (multiple teams)</td>
<td>2â€“4 quarters</td>
</tr>
<tr>
<td>Public API (external developers)</td>
<td>1â€“2 years minimum</td>
</tr>
<tr>
<td>Platform/language feature</td>
<td>2â€“5 years</td>
</tr>
</tbody>
</table>
<p>Communicate deprecations through: changelogs, compiler/runtime warnings, developer newsletters, migration guides.</p>
<hr />
<h2 id="12-anti-patterns-in-software-maintenance">12. Anti-Patterns in Software Maintenance<a class="header-link" href="#12-anti-patterns-in-software-maintenance" title="Permanent link">&para;</a></h2>
<p>Recognizing common failure modes helps teams avoid them proactively.</p>
<h3 id="121-the-lava-layer-anti-pattern">12.1 The Lava Layer Anti-Pattern<a class="header-link" href="#121-the-lava-layer-anti-pattern" title="Permanent link">&para;</a></h3>
<p>Each generation of developers adds new layers on top of old code without removing obsolete layers, creating a "lava layer" stack of different technologies and paradigms:</p>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Vue.js 3 components (2025)         â”‚  â† Current team
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Angular 1.x controllers (2019)     â”‚  â† Previous team
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  jQuery widgets (2015)              â”‚  â† Team before that
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Legacy server-rendered HTML (2011) â”‚  â† Original team
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<p><strong>Symptoms</strong>: Multiple JavaScript frameworks coexist; new developers cannot understand which pattern to follow; performance degrades because multiple rendering systems run simultaneously.</p>
<p><strong>Resolution</strong>: Establish a deprecation plan for each old layer with a committed end date. Do not add new features in the old style.</p>
<h3 id="122-the-if-it-aint-broke-trap">12.2 The "If It Ain't Broke" Trap<a class="header-link" href="#122-the-if-it-aint-broke-trap" title="Permanent link">&para;</a></h3>
<p>Resistance to necessary updates because the system currently works. This is most dangerous for:
- Security patches ("we haven't been breached yet")
- Dependency upgrades ("the old version still runs")
- Architecture modernization ("why fix what works?")</p>
<p>The risk accumulates invisibly until a critical vulnerability is exploited or a major version jump makes the upgrade 10Ã— harder than it would have been done incrementally.</p>
<h3 id="123-heroic-maintenance">12.3 Heroic Maintenance<a class="header-link" href="#123-heroic-maintenance" title="Permanent link">&para;</a></h3>
<p>A single engineer who "knows the system" handles all production incidents. This creates:
- Single point of failure (what happens when they quit, get sick, or are on vacation?)
- No incentive to improve the system (the hero's status depends on it remaining complex)
- Burn-out for the hero, resentment from peers</p>
<p><strong>Resolution</strong>: Runbooks, on-call rotation, blameless post-mortems that produce documentation, and deliberate knowledge sharing sessions.</p>
<h3 id="124-the-boiled-frog">12.4 The Boiled Frog<a class="header-link" href="#124-the-boiled-frog" title="Permanent link">&para;</a></h3>
<p>Technical debt is added so gradually that the team never perceives a sudden change to trigger alarm. Each sprint adds a little more debt, each incident is resolved with a quick fix, until suddenly the team is spending 80% of every sprint on maintenance and cannot explain how they got there.</p>
<p><strong>Prevention</strong>: Track debt metrics continuously (see Section 8.2). Set thresholds that trigger action: "If technical debt ratio exceeds 10%, we pause feature work until it drops below 7%."</p>
<hr />
<h2 id="13-maintenance-metrics">13. Maintenance Metrics<a class="header-link" href="#13-maintenance-metrics" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Definition</th>
<th>Healthy Target</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>MTTR</strong> (Mean Time to Repair)</td>
<td>Average time from failure detection to resolution</td>
<td>As low as possible; hours for P1</td>
</tr>
<tr>
<td><strong>Change Failure Rate</strong></td>
<td>% of deployments that cause production incidents</td>
<td>&lt; 5% (Elite teams: &lt; 1%)</td>
</tr>
<tr>
<td><strong>Defect Density</strong></td>
<td>Bugs per KLOC or per feature</td>
<td>Trending down over time</td>
</tr>
<tr>
<td><strong>Technical Debt Ratio</strong></td>
<td>Estimated debt remediation cost / total development cost</td>
<td>&lt; 5%</td>
</tr>
<tr>
<td><strong>Code Churn</strong></td>
<td>% of code changed within a period</td>
<td>High churn in stable modules = concern</td>
</tr>
<tr>
<td><strong>Mean Time Between Failures</strong> (MTBF)</td>
<td>Average time between production failures</td>
<td>Trending upward</td>
</tr>
</tbody>
</table>
<p>The DORA metrics (Deployment Frequency, Lead Time, MTTR, Change Failure Rate) from the <em>Accelerate</em> research are the most validated predictor of organizational performance in software delivery.</p>
<hr />
<h2 id="14-case-study-modernizing-a-monolith">14. Case Study: Modernizing a Monolith<a class="header-link" href="#14-case-study-modernizing-a-monolith" title="Permanent link">&para;</a></h2>
<p><strong>Scenario</strong>: A 15-year-old e-commerce platform built in PHP 5.3. The monolith handles product catalog, orders, payments, and shipping. It has no tests, no API layer, and relies on a MySQL 5.5 database. The team wants to modernize without stopping product development.</p>
<p><strong>Chosen Strategy</strong>: Strangler Fig + Phased Migration</p>
<p><strong>Phase 1: Wrap and Stabilize (6 months)</strong>
- Add integration tests using the UI (Selenium) to characterize existing behavior
- Introduce a routing proxy (nginx) in front of the monolith
- Extract user authentication as a standalone service (least risky component)</p>
<p><strong>Phase 2: Extract High-Value Services (12 months)</strong>
- New product catalog service (Python/FastAPI) â€” routes 10%, then 50%, then 100% of catalog traffic
- New order service â€” run in parallel mode (shadow traffic) for 4 weeks before cutover
- Database: CDC (Change Data Capture) streams MySQL changes to new PostgreSQL databases</p>
<p><strong>Phase 3: Decommission (6 months)</strong>
- Migrate payments to a dedicated payment service (Stripe-backed)
- Retire the PHP monolith module by module
- Shut down legacy MySQL instance after 30-day clean observation period</p>
<p><strong>Lessons from this case:</strong>
- Shadow traffic parallel testing discovered 3 calculation discrepancies in the legacy code that nobody knew existed
- The authentication extraction took twice as long as estimated due to undocumented session behavior
- The team celebrated "strangle events" (module retirements) which maintained morale during a long project</p>
<hr />
<h2 id="summary">Summary<a class="header-link" href="#summary" title="Permanent link">&para;</a></h2>
<p>Software maintenance is not an afterthought â€” it consumes the majority of software lifecycle cost and requires deliberate strategy:</p>
<ul>
<li><strong>Four maintenance types</strong>: Corrective (fix bugs), Adaptive (survive environment changes), Perfective (add features), Preventive (reduce future risk)</li>
<li><strong>Lehman's Laws</strong>: Complexity grows and quality declines by default; sustained investment is the only counter</li>
<li><strong>Legacy systems</strong>: Contain valuable encoded business logic; modernize incrementally with Strangler Fig rather than big-bang rewrites</li>
<li><strong>Refactoring</strong>: The safe, incremental alternative to rewriting â€” always backed by tests</li>
<li><strong>Migration strategies</strong>: Phased or parallel are safer than big bang for most systems</li>
<li><strong>Deprecation</strong>: Give consumers ample notice; use compiler/runtime warnings and migration guides</li>
<li><strong>Metrics</strong>: MTTR and Change Failure Rate are leading indicators of maintenance health</li>
</ul>
<hr />
<h2 id="practice-exercises">Practice Exercises<a class="header-link" href="#practice-exercises" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p><strong>Maintenance Classification</strong>: Classify each of the following tasks as Corrective, Adaptive, Perfective, or Preventive, and justify your classification: (a) fixing a crash that occurs when a user uploads a PNG with EXIF data; (b) updating the SMS library after the vendor retires their v1 API; (c) adding dark mode to the UI; (d) refactoring the 3,000-line <code>OrderProcessor</code> class into smaller components; (e) adding rate limiting to the API before a marketing campaign launches.</p>
</li>
<li>
<p><strong>Lehman's Laws Analysis</strong>: Choose a well-known open-source project (e.g., Linux kernel, Python interpreter, Firefox). Research its commit history and release notes. Identify two specific examples where Lehman's Law I (Continuing Change) and Law II (Increasing Complexity) are visible. How has the project counteracted complexity growth?</p>
</li>
<li>
<p><strong>Strangler Fig Design</strong>: You maintain a monolithic Java application that handles HR functions: payroll, leave management, performance reviews, and onboarding. You want to migrate to microservices. Design a Strangler Fig migration plan: identify which service to extract first and why, describe the routing proxy strategy, and define the criteria for declaring a "strangle event" complete.</p>
</li>
<li>
<p><strong>Refactoring Practice</strong>: Take the following code and apply at least three named refactoring patterns. Preserve the observable behavior. Document which pattern you applied and why.
   <code>python
   def x(d, t, u, s):
       r = 0
       for i in d:
           if i['type'] == t and i['user'] == u and i['status'] == s:
               r += i['amount']
       if r &gt; 1000:
           r = r * 0.95
       return r</code></p>
</li>
<li>
<p><strong>Deprecation Policy Design</strong>: You are the platform team at a company with 50 internal service consumers of your authentication API. You need to deprecate the <code>GET /auth/token?user=X&amp;pass=Y</code> endpoint (which sends credentials in query parameters, a security violation) and replace it with <code>POST /auth/token</code> with credentials in the request body. Design a complete deprecation plan: timeline, communication strategy, monitoring approach, and hard cutover criteria.</p>
</li>
</ol>
<hr />
<h2 id="further-reading">Further Reading<a class="header-link" href="#further-reading" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Books</strong>:</li>
<li>Feathers, M. (2004). <em>Working Effectively with Legacy Code</em>. Prentice Hall. (The definitive guide to adding tests to untested code)</li>
<li>Fowler, M. (2018). <em>Refactoring: Improving the Design of Existing Code</em>, 2nd Ed. Addison-Wesley.</li>
<li>
<p>Parnas, D. (1994). "Software Aging." <em>Proceedings of ICSE 1994</em>. (Original paper on the concept)</p>
</li>
<li>
<p><strong>Articles and Papers</strong>:</p>
</li>
<li>Fowler, M. "Strangler Fig Application." <a href="https://martinfowler.com/bliki/StranglerFigApplication.html">martinfowler.com</a></li>
<li>Spolsky, J. "Things You Should Never Do, Part I." <a href="https://www.joelonsoftware.com/2000/04/06/things-you-should-never-do-part-i/">Joel on Software</a></li>
<li>
<p>Forsgren, N., Humble, J. &amp; Kim, G. (2018). <em>Accelerate</em>. IT Revolution. (DORA metrics research)</p>
</li>
<li>
<p><strong>Standards</strong>:</p>
</li>
<li>ISO/IEC 14764:2006 â€” Software Engineering: Software Life Cycle Processes â€” Maintenance</li>
<li>ISO/IEC 25010 â€” Systems and Software Quality Models (replaces ISO 9126)</li>
</ul>
<hr />
<p><strong>Previous</strong>: <a href="./10_Project_Management.md">Project Management</a> | <strong>Next</strong>: <a href="./12_Process_Improvement.md">Process Improvement</a></p>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/Software_Engineering/10_Project_Management.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Lesson 10: Software Project Management</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/Software_Engineering/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/Software_Engineering/12_Process_Improvement.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Lesson 12: Software Process Improvement</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">â†‘</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'en';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}