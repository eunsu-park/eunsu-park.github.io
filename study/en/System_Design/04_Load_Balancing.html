{% raw %}
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Load Balancing - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/en/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/en/" class="nav-item ">
                    <span class="nav-icon">ğŸ </span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">ğŸ’»</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/en/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" selected>
                        English
                    </option>
                    
                    <option value="ko" >
                        í•œêµ­ì–´
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">â˜€ï¸</span>
                    <span class="theme-icon dark">ğŸŒ™</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/en/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/en/System_Design/">System Design</a>
    <span class="separator">/</span>
    <span class="current">Load Balancing</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>Load Balancing</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/System_Design/03_Network_Fundamentals_Review.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Network Fundamentals Review</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/System_Design/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/System_Design/05_Reverse_Proxy_API_Gateway.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Reverse Proxy and API Gateway</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#1-what-is-load-balancing">1. What is Load Balancing?</a><ul>
<li><a href="#11-definition">1.1 Definition</a></li>
<li><a href="#12-load-balancer-roles">1.2 Load Balancer Roles</a></li>
</ul>
</li>
<li><a href="#2-l4-vs-l7-load-balancer">2. L4 vs L7 Load Balancer</a><ul>
<li><a href="#21-l4-load-balancer-transport-layer">2.1 L4 Load Balancer (Transport Layer)</a></li>
<li><a href="#22-l7-load-balancer-application-layer">2.2 L7 Load Balancer (Application Layer)</a></li>
<li><a href="#23-comparison-summary">2.3 Comparison Summary</a></li>
</ul>
</li>
<li><a href="#3-distribution-algorithms">3. Distribution Algorithms</a><ul>
<li><a href="#31-round-robin">3.1 Round Robin</a></li>
<li><a href="#32-weighted-round-robin">3.2 Weighted Round Robin</a></li>
<li><a href="#33-least-connections">3.3 Least Connections</a></li>
<li><a href="#34-ip-hash">3.4 IP Hash</a></li>
<li><a href="#35-algorithm-comparison-summary">3.5 Algorithm Comparison Summary</a></li>
</ul>
</li>
<li><a href="#4-sticky-session">4. Sticky Session</a><ul>
<li><a href="#41-what-is-sticky-session">4.1 What is Sticky Session?</a></li>
<li><a href="#42-sticky-session-implementation-methods">4.2 Sticky Session Implementation Methods</a></li>
<li><a href="#43-sticky-session-problems">4.3 Sticky Session Problems</a></li>
</ul>
</li>
<li><a href="#5-health-checks">5. Health Checks</a><ul>
<li><a href="#51-what-are-health-checks">5.1 What are Health Checks?</a></li>
<li><a href="#52-active-vs-passive-health-checks">5.2 Active vs Passive Health Checks</a></li>
<li><a href="#53-health-check-endpoint-design">5.3 Health Check Endpoint Design</a></li>
</ul>
</li>
<li><a href="#6-high-availability-configuration">6. High Availability Configuration</a><ul>
<li><a href="#61-active-passive-hot-standby">6.1 Active-Passive (Hot Standby)</a></li>
<li><a href="#62-active-active">6.2 Active-Active</a></li>
<li><a href="#63-cloud-load-balancers">6.3 Cloud Load Balancers</a></li>
</ul>
</li>
<li><a href="#7-practice-problems">7. Practice Problems</a><ul>
<li><a href="#problem-1-choose-load-balancer">Problem 1: Choose Load Balancer</a></li>
<li><a href="#problem-2-choose-distribution-algorithm">Problem 2: Choose Distribution Algorithm</a></li>
<li><a href="#problem-3-health-check-design">Problem 3: Health Check Design</a></li>
<li><a href="#problem-4-architecture-design">Problem 4: Architecture Design</a></li>
</ul>
</li>
<li><a href="#answers">Answers</a><ul>
<li><a href="#problem-1-answer">Problem 1 Answer</a></li>
<li><a href="#problem-2-answer">Problem 2 Answer</a></li>
<li><a href="#problem-3-answer">Problem 3 Answer</a></li>
<li><a href="#problem-4-answer">Problem 4 Answer</a></li>
</ul>
</li>
<li><a href="#8-next-steps">8. Next Steps</a><ul>
<li><a href="#next-lesson">Next Lesson</a></li>
<li><a href="#related-lessons">Related Lessons</a></li>
<li><a href="#recommended-practice">Recommended Practice</a></li>
</ul>
</li>
<li><a href="#9-references">9. References</a><ul>
<li><a href="#tools">Tools</a></li>
<li><a href="#documentation">Documentation</a></li>
<li><a href="#online-resources">Online Resources</a></li>
</ul>
</li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="load-balancing">Load Balancing<a class="header-link" href="#load-balancing" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="header-link" href="#overview" title="Permanent link">&para;</a></h2>
<p>This document covers the core concepts of Load Balancing. You'll learn the differences between L4/L7 load balancers, various traffic distribution algorithms, Sticky Sessions, and health check mechanisms.</p>
<p><strong>Difficulty</strong>: â­â­â­
<strong>Estimated Study Time</strong>: 2-3 hours
<strong>Prerequisites</strong>: <a href="./03_Network_Fundamentals_Review.md">03_Network_Fundamentals_Review.md</a></p>
<hr />
<h2 id="table-of-contents">Table of Contents<a class="header-link" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#1-what-is-load-balancing">What is Load Balancing?</a></li>
<li><a href="#2-l4-vs-l7-load-balancer">L4 vs L7 Load Balancer</a></li>
<li><a href="#3-distribution-algorithms">Distribution Algorithms</a></li>
<li><a href="#4-sticky-session">Sticky Session</a></li>
<li><a href="#5-health-checks">Health Checks</a></li>
<li><a href="#6-high-availability-configuration">High Availability Configuration</a></li>
<li><a href="#7-practice-problems">Practice Problems</a></li>
<li><a href="#8-next-steps">Next Steps</a></li>
<li><a href="#9-references">References</a></li>
</ol>
<hr />
<h2 id="1-what-is-load-balancing">1. What is Load Balancing?<a class="header-link" href="#1-what-is-load-balancing" title="Permanent link">&para;</a></h2>
<h3 id="11-definition">1.1 Definition<a class="header-link" href="#11-definition" title="Permanent link">&para;</a></h3>
<p>Load balancing is a technique that distributes incoming network traffic across multiple servers to improve system availability and performance.</p>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                  </span><span class="k">Load</span><span class="w"> </span><span class="n">Balancing</span><span class="w"> </span><span class="n">Concept</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="k">Without</span><span class="w"> </span><span class="k">load</span><span class="w"> </span><span class="nl">balancer</span><span class="p">:</span><span class="w">                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Client</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">â”€â”€â”€â”€â”€â”</span><span class="w">                                           </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Client</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶</span><span class="w"> </span><span class="n">Server</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="n">Overloaded</span><span class="err">!</span><span class="p">)</span><span class="w">          </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Client</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="err">â”€â”€â”€â”€â”€â”¤</span><span class="w">                                           </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">     </span><span class="p">...</span><span class="w">        </span><span class="err">â”‚</span><span class="w">                                           </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Client</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="err">â”€â”€â”€â”€â”€â”˜</span><span class="w">                                           </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nl">Problem</span><span class="p">:</span><span class="w"> </span><span class="n">Single</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">overload</span><span class="p">,</span><span class="w"> </span><span class="n">service</span><span class="w"> </span><span class="n">down</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">failure</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="k">With</span><span class="w"> </span><span class="k">load</span><span class="w"> </span><span class="nl">balancer</span><span class="p">:</span><span class="w">                                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Client</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">â”€â”€â”€â”€â”€â”</span><span class="w">         </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¶</span><span class="w"> </span><span class="n">Server</span><span class="w"> </span><span class="mi">1</span><span class="w">               </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Client</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">â”€â”€â”€â”€â”€â”¼â”€â–¶</span><span class="w"> </span><span class="o">[</span><span class="n">LB</span><span class="o">]</span><span class="w"> </span><span class="err">â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â–¶</span><span class="w"> </span><span class="n">Server</span><span class="w"> </span><span class="mi">2</span><span class="w">               </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Client</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="err">â”€â”€â”€â”€â”€â”¤</span><span class="w">         </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â–¶</span><span class="w"> </span><span class="n">Server</span><span class="w"> </span><span class="mi">3</span><span class="w">               </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">     </span><span class="p">...</span><span class="w">        </span><span class="err">â”‚</span><span class="w">                                           </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Client</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="err">â”€â”€â”€â”€â”€â”˜</span><span class="w">                                           </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nl">Solution</span><span class="p">:</span><span class="w"> </span><span class="k">Distributed</span><span class="w"> </span><span class="k">load</span><span class="p">,</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">availability</span><span class="p">,</span><span class="w"> </span><span class="n">horizontal</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">           </span><span class="n">scaling</span><span class="w"> </span><span class="n">possible</span><span class="w">                                 </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="12-load-balancer-roles">1.2 Load Balancer Roles<a class="header-link" href="#12-load-balancer-roles" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                 </span><span class="n">Load</span><span class="w"> </span><span class="n">Balancer</span><span class="w"> </span><span class="n">Key</span><span class="w"> </span><span class="n">Functions</span><span class="w">                      </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mf">1.</span><span class="w"> </span><span class="n">Traffic</span><span class="w"> </span><span class="n">Distribution</span><span class="w">                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Distribute</span><span class="w"> </span><span class="n">requests</span><span class="w"> </span><span class="n">evenly</span><span class="w"> </span><span class="n">across</span><span class="w"> </span><span class="n">servers</span><span class="w">                </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Can</span><span class="w"> </span><span class="n">apply</span><span class="w"> </span><span class="n">weights</span><span class="w"> </span><span class="n">based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">capacity</span><span class="w">               </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mf">2.</span><span class="w"> </span><span class="n">High</span><span class="w"> </span><span class="n">Availability</span><span class="w">                                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Detect</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">failures</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">automatically</span><span class="w"> </span><span class="n">switch</span><span class="w"> </span><span class="n">traffic</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Users</span><span class="w"> </span><span class="n">don</span><span class="s1">&#39;t notice failures                              â”‚ â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mf">3.</span><span class="w"> </span><span class="n">Scalability</span><span class="w">                                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Easy</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">add</span><span class="o">/</span><span class="n">remove</span><span class="w"> </span><span class="n">servers</span><span class="w">                               </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Zero</span><span class="o">-</span><span class="n">downtime</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">replacement</span><span class="w"> </span><span class="n">possible</span><span class="w">                </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mf">4.</span><span class="w"> </span><span class="n">SSL</span><span class="w"> </span><span class="n">Termination</span><span class="w">                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Handle</span><span class="w"> </span><span class="n">HTTPS</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">LB</span><span class="p">,</span><span class="w"> </span><span class="n">backend</span><span class="w"> </span><span class="n">uses</span><span class="w"> </span><span class="n">HTTP</span><span class="w">                    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Reduce</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="nb">load</span><span class="p">,</span><span class="w"> </span><span class="n">centralize</span><span class="w"> </span><span class="n">certificate</span><span class="w"> </span><span class="n">management</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mf">5.</span><span class="w"> </span><span class="n">Session</span><span class="w"> </span><span class="n">Management</span><span class="w">                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Sticky</span><span class="w"> </span><span class="n">Session</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">keep</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">server</span><span class="w">                       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Ensure</span><span class="w"> </span><span class="n">session</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">consistency</span><span class="w">                          </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="2-l4-vs-l7-load-balancer">2. L4 vs L7 Load Balancer<a class="header-link" href="#2-l4-vs-l7-load-balancer" title="Permanent link">&para;</a></h2>
<h3 id="21-l4-load-balancer-transport-layer">2.1 L4 Load Balancer (Transport Layer)<a class="header-link" href="#21-l4-load-balancer-transport-layer" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  L4 Load Balancer                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  OSI Layer 4 (Transport) - Operates at TCP/UDP level            â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  Checks only packet header info:                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ â”‚
â”‚  â”‚  â”‚ Source IP    â”‚ Dest IP     â”‚ Source   â”‚ Dest   â”‚       â”‚ â”‚
â”‚  â”‚  â”‚ 203.0.113.50 â”‚ 10.0.0.100  â”‚ Port     â”‚ Port   â”‚       â”‚ â”‚
â”‚  â”‚  â”‚              â”‚             â”‚ 54321    â”‚ 80     â”‚       â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ â”‚
â”‚  â”‚                       â†‘                                    â”‚ â”‚
â”‚  â”‚                  Routes using this info                    â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚  How it works:                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  Client â”€â”€â–¶ LB (10.0.0.100:80)                             â”‚ â”‚
â”‚  â”‚                    â”‚                                       â”‚ â”‚
â”‚  â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚ â”‚
â”‚  â”‚           â”‚ IP/Port based   â”‚                              â”‚ â”‚
â”‚  â”‚           â”‚ routing decisionâ”‚                              â”‚ â”‚
â”‚  â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚ â”‚
â”‚  â”‚                    â”‚                                       â”‚ â”‚
â”‚  â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚ â”‚
â”‚  â”‚          â–¼         â–¼         â–¼                             â”‚ â”‚
â”‚  â”‚     Server 1   Server 2   Server 3                         â”‚ â”‚
â”‚  â”‚     10.0.1.1   10.0.1.2   10.0.1.3                         â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚  Pros:                                                          â”‚
â”‚  â€¢ Fast processing (no packet content inspection)               â”‚
â”‚  â€¢ Low resource usage                                           â”‚
â”‚  â€¢ Protocol independent (TCP, UDP both work)                    â”‚
â”‚                                                                  â”‚
â”‚  Cons:                                                          â”‚
â”‚  â€¢ No application awareness                                     â”‚
â”‚  â€¢ Cannot route based on URL                                    â”‚
â”‚  â€¢ Cannot make content-based decisions                          â”‚
â”‚                                                                  â”‚
â”‚  Examples: AWS NLB, HAProxy (TCP mode), LVS                     â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="22-l7-load-balancer-application-layer">2.2 L7 Load Balancer (Application Layer)<a class="header-link" href="#22-l7-load-balancer-application-layer" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  L7 Load Balancer                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  OSI Layer 7 (Application) - Operates at HTTP/HTTPS level       â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  Analyzes HTTP request content:                            â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ â”‚
â”‚  â”‚  â”‚ GET /api/users HTTP/1.1                         â”‚       â”‚ â”‚
â”‚  â”‚  â”‚ Host: api.example.com                           â”‚       â”‚ â”‚
â”‚  â”‚  â”‚ Cookie: session=abc123                          â”‚       â”‚ â”‚
â”‚  â”‚  â”‚ Authorization: Bearer xxx                       â”‚       â”‚ â”‚
â”‚  â”‚  â”‚ Content-Type: application/json                  â”‚       â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ â”‚
â”‚  â”‚           â†‘                                                â”‚ â”‚
â”‚  â”‚      Analyzes full content to route                        â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚  URL-based routing:                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  /api/users/*   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ User Service                   â”‚ â”‚
â”‚  â”‚  /api/orders/*  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Order Service                  â”‚ â”‚
â”‚  â”‚  /api/products/*â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Product Service                â”‚ â”‚
â”‚  â”‚  /static/*      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ CDN/Static Server              â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚  Host-based routing:                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  api.example.com   â”€â”€â”€â”€â”€â”€â–¶ API Servers                     â”‚ â”‚
â”‚  â”‚  www.example.com   â”€â”€â”€â”€â”€â”€â–¶ Web Servers                     â”‚ â”‚
â”‚  â”‚  admin.example.com â”€â”€â”€â”€â”€â”€â–¶ Admin Servers                   â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚  Pros:                                                          â”‚
â”‚  â€¢ Smart routing based on content                               â”‚
â”‚  â€¢ SSL termination                                              â”‚
â”‚  â€¢ Can modify requests/responses                                â”‚
â”‚  â€¢ A/B testing, canary deployment                               â”‚
â”‚                                                                  â”‚
â”‚  Cons:                                                          â”‚
â”‚  â€¢ Slower than L4 (needs packet analysis)                       â”‚
â”‚  â€¢ More resource usage                                          â”‚
â”‚  â€¢ Limited to HTTP/HTTPS                                        â”‚
â”‚                                                                  â”‚
â”‚  Examples: AWS ALB, Nginx, HAProxy (HTTP mode), Envoy          â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="23-comparison-summary">2.3 Comparison Summary<a class="header-link" href="#23-comparison-summary" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Item</th>
<th>L4 Load Balancer</th>
<th>L7 Load Balancer</th>
</tr>
</thead>
<tbody>
<tr>
<td>OSI Layer</td>
<td>4 (Transport)</td>
<td>7 (Application)</td>
</tr>
<tr>
<td>Analysis Target</td>
<td>IP, Port</td>
<td>HTTP headers, URL, cookies, etc.</td>
</tr>
<tr>
<td>Protocol</td>
<td>TCP, UDP</td>
<td>HTTP, HTTPS, WebSocket</td>
</tr>
<tr>
<td>Speed</td>
<td>Very Fast</td>
<td>Fast</td>
</tr>
<tr>
<td>Resources</td>
<td>Low</td>
<td>High</td>
</tr>
<tr>
<td>Features</td>
<td>Simple distribution</td>
<td>Smart routing, SSL, caching</td>
</tr>
<tr>
<td>Use Cases</td>
<td>Game servers, DNS, internal comms</td>
<td>Web services, APIs</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="3-distribution-algorithms">3. Distribution Algorithms<a class="header-link" href="#3-distribution-algorithms" title="Permanent link">&para;</a></h2>
<h3 id="31-round-robin">3.1 Round Robin<a class="header-link" href="#31-round-robin" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                      </span><span class="nx">Round</span><span class="w"> </span><span class="nx">Robin</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="s">&quot;Distribute in sequential order&quot;</span><span class="w">                               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Request</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">â”€â”€â–¶</span><span class="w"> </span><span class="nx">Server</span><span class="w"> </span><span class="nx">A</span><span class="w">                                    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Request</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">â”€â”€â–¶</span><span class="w"> </span><span class="nx">Server</span><span class="w"> </span><span class="nx">B</span><span class="w">                                    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Request</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="err">â”€â”€â–¶</span><span class="w"> </span><span class="nx">Server</span><span class="w"> </span><span class="nx">C</span><span class="w">                                    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Request</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="err">â”€â”€â–¶</span><span class="w"> </span><span class="nx">Server</span><span class="w"> </span><span class="nx">A</span><span class="w">  </span><span class="p">(</span><span class="nx">cycles</span><span class="w"> </span><span class="nx">back</span><span class="p">)</span><span class="w">                     </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Request</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="err">â”€â”€â–¶</span><span class="w"> </span><span class="nx">Server</span><span class="w"> </span><span class="nx">B</span><span class="w">                                    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Request</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="err">â”€â”€â–¶</span><span class="w"> </span><span class="nx">Server</span><span class="w"> </span><span class="nx">C</span><span class="w">                                    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">       </span><span class="o">...</span><span class="w">                                                  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nx">Pros</span><span class="p">:</span><span class="w">                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Simple</span><span class="w"> </span><span class="nx">implementation</span><span class="w">                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">No</span><span class="w"> </span><span class="nx">state</span><span class="w"> </span><span class="nx">storage</span><span class="w"> </span><span class="nx">needed</span><span class="w">                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Even</span><span class="w"> </span><span class="nx">distribution</span><span class="w"> </span><span class="p">(</span><span class="k">for</span><span class="w"> </span><span class="nx">same</span><span class="o">-</span><span class="nx">performance</span><span class="w"> </span><span class="nx">servers</span><span class="p">)</span><span class="w">             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nx">Cons</span><span class="p">:</span><span class="w">                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Doesn</span><span class="err">&#39;</span><span class="nx">t</span><span class="w"> </span><span class="nx">consider</span><span class="w"> </span><span class="nx">server</span><span class="w"> </span><span class="nx">performance</span><span class="w"> </span><span class="nx">differences</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Doesn</span><span class="err">&#39;</span><span class="nx">t</span><span class="w"> </span><span class="nx">consider</span><span class="w"> </span><span class="nx">connection</span><span class="w"> </span><span class="nx">duration</span><span class="w">                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nx">Suitable</span><span class="p">:</span><span class="w"> </span><span class="nx">Servers</span><span class="w"> </span><span class="nx">with</span><span class="w"> </span><span class="nx">same</span><span class="w"> </span><span class="nx">performance</span><span class="p">,</span><span class="w"> </span><span class="nx">similar</span><span class="w"> </span><span class="nx">request</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="nx">processing</span><span class="w"> </span><span class="nx">times</span><span class="w">                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="32-weighted-round-robin">3.2 Weighted Round Robin<a class="header-link" href="#32-weighted-round-robin" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Weighted Round Robin                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  &quot;Assign weights based on server performance&quot;                   â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  Server A: Weight 5  (high performance)                    â”‚ â”‚
â”‚  â”‚  Server B: Weight 3  (medium performance)                  â”‚ â”‚
â”‚  â”‚  Server C: Weight 2  (low performance)                     â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  10 requests distribution:                                 â”‚ â”‚
â”‚  â”‚  A A A A A B B B C C                                       â”‚ â”‚
â”‚  â”‚  â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â–²â”€â–²                                       â”‚ â”‚
â”‚  â”‚  5         3     2                                         â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚  Suitable: Different server performances, gradual new server    â”‚
â”‚           introduction (canary)                                 â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="33-least-connections">3.3 Least Connections<a class="header-link" href="#33-least-connections" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                    </span><span class="n">Least</span><span class="w"> </span><span class="n">Connections</span><span class="w">                             </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="s2">&quot;Distribute to server with fewest connections&quot;</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Current</span><span class="w"> </span><span class="n">state</span><span class="p">:</span><span class="w">                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Server</span><span class="w"> </span><span class="n">A</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">connections</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Server</span><span class="w"> </span><span class="n">B</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">connections</span><span class="w">  </span><span class="err">â—€â”€â”€</span><span class="w"> </span><span class="n">New</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">assigned</span><span class="w">         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Server</span><span class="w"> </span><span class="n">C</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="n">connections</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">After</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">request</span><span class="p">:</span><span class="w">                                        </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Server</span><span class="w"> </span><span class="n">A</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">connections</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Server</span><span class="w"> </span><span class="n">B</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">connections</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Server</span><span class="w"> </span><span class="n">C</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="n">connections</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Weighted</span><span class="w"> </span><span class="n">Least</span><span class="w"> </span><span class="n">Connections</span><span class="p">:</span><span class="w">                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Assign</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">smallest</span><span class="w"> </span><span class="p">(</span><span class="n">connections</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">weight</span><span class="p">)</span><span class="w">     </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Server</span><span class="w"> </span><span class="n">A</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">conn</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="w">                         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Server</span><span class="w"> </span><span class="n">B</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">conn</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.5</span><span class="w">                         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Server</span><span class="w"> </span><span class="n">C</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">conn</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.33</span><span class="w">                        </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â†’</span><span class="w"> </span><span class="n">Assign</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">Server</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">smallest</span><span class="p">)</span><span class="w">                    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Pros</span><span class="p">:</span><span class="w">                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Dynamic</span><span class="w"> </span><span class="nb">load</span><span class="w"> </span><span class="n">distribution</span><span class="w">                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Effective</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">requests</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">varying</span><span class="w"> </span><span class="n">processing</span><span class="w"> </span><span class="n">times</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Suitable</span><span class="p">:</span><span class="w"> </span><span class="n">Varying</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">processing</span><span class="w"> </span><span class="n">times</span><span class="p">,</span><span class="w"> </span><span class="n">long</span><span class="w"> </span><span class="n">connections</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">           </span><span class="p">(</span><span class="n">WebSocket</span><span class="p">)</span><span class="w">                                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="34-ip-hash">3.4 IP Hash<a class="header-link" href="#34-ip-hash" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       IP Hash                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  &quot;Hash client IP to always route to same server&quot;                â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  hash(Client IP) % server count = server index             â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  Client 203.0.113.50:                                      â”‚ â”‚
â”‚  â”‚    hash(203.0.113.50) = 12345                              â”‚ â”‚
â”‚  â”‚    12345 % 3 = 0 â”€â”€â–¶ Server A                              â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  Client 198.51.100.25:                                     â”‚ â”‚
â”‚  â”‚    hash(198.51.100.25) = 67890                             â”‚ â”‚
â”‚  â”‚    67890 % 3 = 1 â”€â”€â–¶ Server B                              â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  â€» Same IP always routes to same server!                  â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚  Pros:                                                          â”‚
â”‚  â€¢ Guarantees same server without Sticky Session                â”‚
â”‚  â€¢ Cache efficiency (same user = same server cache)             â”‚
â”‚                                                                  â”‚
â”‚  Cons:                                                          â”‚
â”‚  â€¢ Many users redistributed when adding/removing servers        â”‚
â”‚  â€¢ Imbalance in NAT environments (same public IP)               â”‚
â”‚                                                                  â”‚
â”‚  Alternative: Consistent Hashing (minimizes impact of server    â”‚
â”‚              changes)                                           â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="35-algorithm-comparison-summary">3.5 Algorithm Comparison Summary<a class="header-link" href="#35-algorithm-comparison-summary" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Algorithm</th>
<th>Operation</th>
<th>Pros</th>
<th>Cons</th>
<th>Use Cases</th>
</tr>
</thead>
<tbody>
<tr>
<td>Round Robin</td>
<td>Sequential</td>
<td>Simple, even</td>
<td>Ignores performance</td>
<td>Same servers</td>
</tr>
<tr>
<td>Weighted RR</td>
<td>Weight-based</td>
<td>Reflects performance</td>
<td>Static weights</td>
<td>Various servers</td>
</tr>
<tr>
<td>Least Conn</td>
<td>Minimum connections</td>
<td>Dynamic distribution</td>
<td>Needs state tracking</td>
<td>Long connections</td>
</tr>
<tr>
<td>IP Hash</td>
<td>IP hash</td>
<td>Consistency</td>
<td>Possible imbalance</td>
<td>Session persistence</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="4-sticky-session">4. Sticky Session<a class="header-link" href="#4-sticky-session" title="Permanent link">&para;</a></h2>
<h3 id="41-what-is-sticky-session">4.1 What is Sticky Session?<a class="header-link" href="#41-what-is-sticky-session" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Sticky Session                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  &quot;Always route same user&#39;s requests to same server&quot;             â”‚
â”‚                                                                  â”‚
â”‚  Problem (without Sticky Session):                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  User â”€â”€Request 1â”€â”€â–¶ Server A (login, create session)      â”‚ â”‚
â”‚  â”‚  User â”€â”€Request 2â”€â”€â–¶ Server B (no session? logged out!)    â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚  Solution (Sticky Session):                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  User â”€â”€Request 1â”€â”€â–¶ Server A (create session)             â”‚ â”‚
â”‚  â”‚  User â”€â”€Request 2â”€â”€â–¶ Server A (same server!)               â”‚ â”‚
â”‚  â”‚  User â”€â”€Request 3â”€â”€â–¶ Server A (same server!)               â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚ â”‚
â”‚  â”‚           â”‚ Load Balancer                           â”‚      â”‚ â”‚
â”‚  â”‚           â”‚ User A â†’ Server A (Cookie/IP based)     â”‚      â”‚ â”‚
â”‚  â”‚           â”‚ User B â†’ Server B                       â”‚      â”‚ â”‚
â”‚  â”‚           â”‚ User C â†’ Server A                       â”‚      â”‚ â”‚
â”‚  â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="42-sticky-session-implementation-methods">4.2 Sticky Session Implementation Methods<a class="header-link" href="#42-sticky-session-implementation-methods" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">              </span><span class="nv">Sticky</span><span class="w"> </span><span class="nv">Session</span><span class="w"> </span><span class="nv">Implementation</span><span class="w"> </span><span class="nv">Methods</span><span class="w">               </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                                  </span>â”‚
â”‚<span class="w">  </span><span class="mi">1</span>.<span class="w"> </span><span class="nv">Cookie</span><span class="o">-</span><span class="nv">based</span><span class="w">                                                </span>â”‚
â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="nv">First</span><span class="w"> </span><span class="nv">request</span>:<span class="w">                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="nv">Client</span><span class="w"> </span>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶<span class="w"> </span><span class="nv">LB</span><span class="w"> </span>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶<span class="w"> </span><span class="nv">Server</span><span class="w"> </span><span class="nv">A</span><span class="w">                </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">         </span>â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<span class="w">    </span>â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<span class="w">                         </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">    </span><span class="nv">Set</span><span class="o">-</span><span class="nv">Cookie</span>:<span class="w"> </span><span class="nv">SERVERID</span><span class="o">=</span><span class="nv">server</span><span class="o">-</span><span class="nv">a</span><span class="w">                           </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="nv">Subsequent</span><span class="w"> </span><span class="nv">requests</span>:<span class="w">                                      </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="nv">Client</span><span class="w"> </span>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶<span class="w"> </span><span class="nv">LB</span><span class="w"> </span><span class="ss">(</span><span class="nv">check</span><span class="w"> </span><span class="nv">cookie</span><span class="ss">)</span><span class="w"> </span>â”€â”€â–¶<span class="w"> </span><span class="nv">Server</span><span class="w"> </span><span class="nv">A</span><span class="w">         </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">    </span><span class="nv">Cookie</span>:<span class="w"> </span><span class="nv">SERVERID</span><span class="o">=</span><span class="nv">server</span><span class="o">-</span><span class="nv">a</span><span class="w">                               </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="nv">Pros</span>:<span class="w"> </span><span class="nv">Most</span><span class="w"> </span><span class="nv">common</span>,<span class="w"> </span><span class="nv">reliable</span><span class="w">                               </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="nv">Cons</span>:<span class="w"> </span><span class="nv">Doesn</span><span class="err">&#39;t work if cookies disabled                    â”‚ â”‚</span>
<span class="err">â”‚  â”‚                                                            â”‚ â”‚</span>
<span class="err">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚</span>
<span class="err">â”‚                                                                  â”‚</span>
<span class="err">â”‚  2. Source IP-based                                             â”‚</span>
<span class="err">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚</span>
<span class="err">â”‚  â”‚                                                            â”‚ â”‚</span>
<span class="err">â”‚  â”‚  Client IP 203.0.113.50 â†’ always Server A                  â”‚ â”‚</span>
<span class="err">â”‚  â”‚  Client IP 198.51.100.25 â†’ always Server B                 â”‚ â”‚</span>
<span class="err">â”‚  â”‚                                                            â”‚ â”‚</span>
<span class="err">â”‚  â”‚  Pros: No cookies needed                                   â”‚ â”‚</span>
<span class="err">â”‚  â”‚  Cons: Issues in NAT, proxy environments                   â”‚ â”‚</span>
<span class="err">â”‚  â”‚                                                            â”‚ â”‚</span>
<span class="err">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚</span>
<span class="err">â”‚                                                                  â”‚</span>
<span class="err">â”‚  3. Application Cookie (Session ID)                             â”‚</span>
<span class="err">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚</span>
<span class="err">â”‚  â”‚                                                            â”‚ â”‚</span>
<span class="err">â”‚  â”‚  Use app-generated session ID (JSESSIONID, etc.)           â”‚ â”‚</span>
<span class="err">â”‚  â”‚  Cookie: JSESSIONID=abc123 â†’ hash(abc123) â†’ Server A       â”‚ â”‚</span>
<span class="err">â”‚  â”‚                                                            â”‚ â”‚</span>
<span class="err">â”‚  â”‚  Pros: Matches app session                                 â”‚ â”‚</span>
<span class="err">â”‚  â”‚  Cons: No cookie on first request                          â”‚ â”‚</span>
<span class="err">â”‚  â”‚                                                            â”‚ â”‚</span>
<span class="err">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚</span>
<span class="err">â”‚                                                                  â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="43-sticky-session-problems">4.3 Sticky Session Problems<a class="header-link" href="#43-sticky-session-problems" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">             </span><span class="nv">Sticky</span><span class="w"> </span><span class="nv">Session</span><span class="w"> </span><span class="nv">Problems</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">Alternatives</span><span class="w">             </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                                  </span>â”‚
â”‚<span class="w">  </span><span class="nv">Problems</span>:<span class="w">                                                      </span>â”‚
â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="mi">1</span>.<span class="w"> </span><span class="nv">Load</span><span class="w"> </span><span class="nv">imbalance</span><span class="w">                                         </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">     </span><span class="s2">&quot;Heavy&quot;</span><span class="w"> </span><span class="nv">users</span><span class="w"> </span><span class="nv">may</span><span class="w"> </span><span class="nv">cluster</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">specific</span><span class="w"> </span><span class="nv">servers</span><span class="w">          </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="mi">2</span>.<span class="w"> </span><span class="nv">Session</span><span class="w"> </span><span class="nv">loss</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">failure</span><span class="w">                                </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">     </span><span class="nv">Server</span><span class="w"> </span><span class="nv">down</span><span class="w"> </span>â†’<span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">users</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">server</span><span class="w"> </span><span class="nv">lose</span><span class="w"> </span><span class="nv">sessions</span><span class="w">   </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="mi">3</span>.<span class="w"> </span><span class="nv">Difficult</span><span class="w"> </span><span class="nv">Auto</span><span class="w"> </span><span class="nv">Scaling</span><span class="w">                                 </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">     </span><span class="nv">Need</span><span class="w"> </span><span class="nv">user</span><span class="w"> </span><span class="nv">redistribution</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">adding</span><span class="o">/</span><span class="nv">removing</span><span class="w"> </span><span class="nv">servers</span><span class="w">  </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="mi">4</span>.<span class="w"> </span><span class="nv">Horizontal</span><span class="w"> </span><span class="nv">scaling</span><span class="w"> </span><span class="nv">limitations</span><span class="w">                         </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">     </span><span class="nv">Stateful</span><span class="w"> </span><span class="nv">architecture</span><span class="w"> </span><span class="nv">limitations</span><span class="w">                      </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w"> </span>â”‚
â”‚<span class="w">                                                                  </span>â”‚
â”‚<span class="w">  </span><span class="nv">Alternatives</span><span class="w"> </span><span class="ss">(</span><span class="nv">Stateless</span><span class="w"> </span><span class="nv">Architecture</span><span class="ss">)</span>:<span class="w">                         </span>â”‚
â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="mi">1</span>.<span class="w"> </span><span class="nv">External</span><span class="w"> </span><span class="nv">session</span><span class="w"> </span><span class="nv">storage</span><span class="w"> </span><span class="ss">(</span><span class="nv">Redis</span>,<span class="w"> </span><span class="nv">Memcached</span><span class="ss">)</span><span class="w">            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">     </span><span class="nv">All</span><span class="w"> </span><span class="nv">servers</span><span class="w"> </span><span class="nv">access</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">session</span><span class="w"> </span><span class="nv">data</span><span class="w">                   </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="mi">2</span>.<span class="w"> </span><span class="nv">JWT</span><span class="w"> </span><span class="ss">(</span><span class="nv">JSON</span><span class="w"> </span><span class="nv">Web</span><span class="w"> </span><span class="nv">Token</span><span class="ss">)</span><span class="w">                                   </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">     </span><span class="k">Include</span><span class="w"> </span><span class="nv">session</span><span class="w"> </span><span class="nv">info</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">token</span>,<span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">server</span><span class="w"> </span><span class="nv">storage</span><span class="w">       </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="mi">3</span>.<span class="w"> </span><span class="nv">Database</span><span class="w"> </span><span class="nv">sessions</span><span class="w">                                      </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">     </span><span class="nv">Store</span><span class="w"> </span><span class="nv">sessions</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">DB</span><span class="w"> </span><span class="ss">(</span><span class="nv">slower</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">reliable</span><span class="ss">)</span><span class="w">             </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w"> </span>â”‚
â”‚<span class="w">                                                                  </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<hr />
<h2 id="5-health-checks">5. Health Checks<a class="header-link" href="#5-health-checks" title="Permanent link">&para;</a></h2>
<h3 id="51-what-are-health-checks">5.1 What are Health Checks?<a class="header-link" href="#51-what-are-health-checks" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">                      </span><span class="nv">Health</span><span class="w"> </span><span class="nv">Checks</span><span class="w">                               </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                                  </span>â”‚
â”‚<span class="w">  </span><span class="s2">&quot;Periodically check server status to detect failures&quot;</span><span class="w">          </span>â”‚
â”‚<span class="w">                                                                  </span>â”‚
â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">           </span><span class="nv">Load</span><span class="w"> </span><span class="nv">Balancer</span><span class="w">                                    </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">               </span>â”‚<span class="w">                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">    </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">                                 </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">    </span>â”‚<span class="w">          </span>â”‚<span class="w">          </span>â”‚<span class="w">                                 </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">    </span>â–¼<span class="w">          </span>â–¼<span class="w">          </span>â–¼<span class="w">                                 </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="nv">Server</span><span class="w"> </span><span class="nv">A</span><span class="w">   </span><span class="nv">Server</span><span class="w"> </span><span class="nv">B</span><span class="w">   </span><span class="nv">Server</span><span class="w"> </span><span class="nv">C</span><span class="w">                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">    </span>âœ“<span class="w">          </span>âœ“<span class="w">          </span>âœ—<span class="w"> </span><span class="ss">(</span><span class="nv">failed</span><span class="ss">)</span><span class="w">                        </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="nv">Traffic</span><span class="w"> </span><span class="nv">distribution</span>:<span class="w"> </span><span class="nv">A</span>,<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="ss">(</span><span class="nv">exclude</span><span class="w"> </span><span class="nv">C</span><span class="ss">)</span><span class="w">               </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w"> </span>â”‚
â”‚<span class="w">                                                                  </span>â”‚
â”‚<span class="w">  </span><span class="nv">Periodically</span>:<span class="w">                                                  </span>â”‚
â”‚<span class="w">  </span><span class="mi">1</span>.<span class="w"> </span><span class="k">Send</span><span class="w"> </span><span class="nv">health</span><span class="w"> </span><span class="nv">check</span><span class="w"> </span><span class="nv">request</span><span class="w">                                   </span>â”‚
â”‚<span class="w">  </span><span class="mi">2</span>.<span class="w"> </span><span class="nv">Check</span><span class="w"> </span><span class="nv">response</span><span class="w">                                              </span>â”‚
â”‚<span class="w">  </span><span class="mi">3</span>.<span class="w"> </span><span class="nv">Accumulate</span><span class="w"> </span><span class="nv">failure</span><span class="w"> </span><span class="nv">count</span><span class="w">                                    </span>â”‚
â”‚<span class="w">  </span><span class="mi">4</span>.<span class="w"> </span><span class="nv">Exclude</span><span class="w"> </span><span class="nv">server</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">threshold</span><span class="w"> </span><span class="nv">exceeded</span><span class="w">                      </span>â”‚
â”‚<span class="w">  </span><span class="mi">5</span>.<span class="w"> </span><span class="k">Include</span><span class="w"> </span><span class="nv">again</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">recovered</span><span class="w">                                </span>â”‚
â”‚<span class="w">                                                                  </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="52-active-vs-passive-health-checks">5.2 Active vs Passive Health Checks<a class="header-link" href="#52-active-vs-passive-health-checks" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">              </span><span class="n">Active</span><span class="w"> </span><span class="n">vs</span><span class="w"> </span><span class="n">Passive</span><span class="w"> </span><span class="n">Health</span><span class="w"> </span><span class="n">Checks</span><span class="w">                     </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Active</span><span class="w"> </span><span class="n">Health</span><span class="w"> </span><span class="n">Check</span><span class="w"> </span><span class="p">(</span><span class="n">Proactive</span><span class="p">)</span><span class="w">                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">LB</span><span class="w"> </span><span class="n">periodically</span><span class="w"> </span><span class="n">sends</span><span class="w"> </span><span class="n">requests</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">server</span><span class="w">                  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”</span><span class="w">   </span><span class="n">GET</span><span class="w"> </span><span class="o">/</span><span class="n">health</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”</span><span class="w">                         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">LB</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚</span><span class="n">Server</span><span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">   </span><span class="mi">200</span><span class="w"> </span><span class="n">OK</span><span class="w">        </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Configuration</span><span class="w"> </span><span class="n">example</span><span class="p">:</span><span class="w">                                    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Interval</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="n">seconds</span><span class="w">                                    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Timeout</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">seconds</span><span class="w">                                      </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Failure</span><span class="w"> </span><span class="n">threshold</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">times</span><span class="w">                              </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Recovery</span><span class="w"> </span><span class="n">threshold</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">times</span><span class="w">                             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Pros</span><span class="p">:</span><span class="w"> </span><span class="n">Detect</span><span class="w"> </span><span class="n">failures</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">traffic</span><span class="w">                     </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Cons</span><span class="p">:</span><span class="w"> </span><span class="n">Additional</span><span class="w"> </span><span class="nb">load</span><span class="p">,</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="n">traffic</span><span class="w">                    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Passive</span><span class="w"> </span><span class="n">Health</span><span class="w"> </span><span class="n">Check</span><span class="w"> </span><span class="p">(</span><span class="n">Reactive</span><span class="p">)</span><span class="w">                                </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Monitor</span><span class="w"> </span><span class="n">actual</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">responses</span><span class="w">                          </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Client</span><span class="w"> </span><span class="err">â”€â”€â–¶</span><span class="w"> </span><span class="n">LB</span><span class="w"> </span><span class="err">â”€â”€â–¶</span><span class="w"> </span><span class="n">Server</span><span class="w">                                  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                      </span><span class="err">â”‚</span><span class="w">                                     </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">5</span><span class="n">xx</span><span class="w"> </span><span class="n">error</span><span class="err">?</span><span class="w">    </span><span class="err">â”‚</span><span class="w">                             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Timeout</span><span class="err">?</span><span class="w">      </span><span class="err">â”‚</span><span class="w">                             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Connect</span><span class="w"> </span><span class="n">fail</span><span class="err">?</span><span class="w"> </span><span class="err">â”‚</span><span class="w">                             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                      </span><span class="err">â”‚</span><span class="w">                                     </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">              </span><span class="n">Increment</span><span class="w"> </span><span class="n">failure</span><span class="w"> </span><span class="n">count</span><span class="w">                       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Pros</span><span class="p">:</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="n">traffic</span><span class="p">,</span><span class="w"> </span><span class="n">reflects</span><span class="w"> </span><span class="n">real</span><span class="w"> </span><span class="n">conditions</span><span class="w">     </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Cons</span><span class="p">:</span><span class="w"> </span><span class="n">Real</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="n">experience</span><span class="w"> </span><span class="n">errors</span><span class="w">                        </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Recommendation</span><span class="p">:</span><span class="w"> </span><span class="n">Active</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Passive</span><span class="w"> </span><span class="n">combination</span><span class="w">                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="53-health-check-endpoint-design">5.3 Health Check Endpoint Design<a class="header-link" href="#53-health-check-endpoint-design" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">              </span><span class="nx">Health</span><span class="w"> </span><span class="nx">Check</span><span class="w"> </span><span class="nx">Endpoint</span><span class="w"> </span><span class="nx">Design</span><span class="w">                        </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="nx">Simple</span><span class="w"> </span><span class="nx">Health</span><span class="w"> </span><span class="nx">Check</span><span class="w">                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">GET</span><span class="w"> </span><span class="o">/</span><span class="nx">health</span><span class="w">                                               </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Response</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="nx">OK</span><span class="w">                                          </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;healthy&quot;</span><span class="w"> </span><span class="p">}</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Purpose</span><span class="p">:</span><span class="w"> </span><span class="nx">Check</span><span class="w"> </span><span class="nx">process</span><span class="w"> </span><span class="nx">alive</span><span class="w">                              </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="nx">Detailed</span><span class="w"> </span><span class="nx">Health</span><span class="w"> </span><span class="nx">Check</span><span class="w">                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">GET</span><span class="w"> </span><span class="o">/</span><span class="nx">health</span><span class="o">/</span><span class="nx">details</span><span class="w">                                       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Response</span><span class="p">:</span><span class="w">                                                 </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="p">{</span><span class="w">                                                         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="s">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;healthy&quot;</span><span class="p">,</span><span class="w">                                    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="s">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1.2.3&quot;</span><span class="p">,</span><span class="w">                                     </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="s">&quot;uptime&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3d 5h 20m&quot;</span><span class="p">,</span><span class="w">                                  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="s">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">                                       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">      </span><span class="s">&quot;database&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;healthy&quot;</span><span class="p">,</span><span class="w">                                </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">      </span><span class="s">&quot;redis&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;healthy&quot;</span><span class="p">,</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">      </span><span class="s">&quot;external_api&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;degraded&quot;</span><span class="w">                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="p">}</span><span class="w">                                                       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="p">}</span><span class="w">                                                         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Purpose</span><span class="p">:</span><span class="w"> </span><span class="nx">Debugging</span><span class="p">,</span><span class="w"> </span><span class="nx">monitoring</span><span class="w"> </span><span class="nx">dashboard</span><span class="w">                  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="nx">Readiness</span><span class="w"> </span><span class="nx">vs</span><span class="w"> </span><span class="nx">Liveness</span><span class="w"> </span><span class="p">(</span><span class="nx">Kubernetes</span><span class="p">)</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Liveness</span><span class="p">:</span><span class="w"> </span><span class="nx">Is</span><span class="w"> </span><span class="nx">process</span><span class="w"> </span><span class="nx">alive</span><span class="p">?</span><span class="w">                               </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="nx">GET</span><span class="w"> </span><span class="o">/</span><span class="nx">health</span><span class="o">/</span><span class="nx">live</span><span class="w">                                        </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="nx">On</span><span class="w"> </span><span class="nx">failure</span><span class="p">:</span><span class="w"> </span><span class="nx">Restart</span><span class="w"> </span><span class="nx">container</span><span class="w">                           </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Readiness</span><span class="p">:</span><span class="w"> </span><span class="nx">Ready</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">receive</span><span class="w"> </span><span class="nx">traffic</span><span class="p">?</span><span class="w">                      </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="nx">GET</span><span class="w"> </span><span class="o">/</span><span class="nx">health</span><span class="o">/</span><span class="nx">ready</span><span class="w">                                       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="nx">On</span><span class="w"> </span><span class="nx">failure</span><span class="p">:</span><span class="w"> </span><span class="nx">Exclude</span><span class="w"> </span><span class="nx">from</span><span class="w"> </span><span class="nx">traffic</span><span class="w"> </span><span class="p">(</span><span class="nx">don</span><span class="err">&#39;</span><span class="nx">t</span><span class="w"> </span><span class="nx">restart</span><span class="p">)</span><span class="w">        </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="6-high-availability-configuration">6. High Availability Configuration<a class="header-link" href="#6-high-availability-configuration" title="Permanent link">&para;</a></h2>
<h3 id="61-active-passive-hot-standby">6.1 Active-Passive (Hot Standby)<a class="header-link" href="#61-active-passive-hot-standby" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                  </span><span class="nx">Active</span><span class="o">-</span><span class="nx">Passive</span><span class="w"> </span><span class="nx">Configuration</span><span class="w">                    </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="s">&quot;Standby takes over when one dies&quot;</span><span class="w">                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Normal</span><span class="w"> </span><span class="nx">state</span><span class="p">:</span><span class="w">                                             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Clients</span><span class="w"> </span><span class="err">â”€â”€â–¶</span><span class="w"> </span><span class="nx">VIP</span><span class="w"> </span><span class="p">(</span><span class="m m-Double">10.0.0.100</span><span class="p">)</span><span class="w"> </span><span class="err">â”€â”€â–¶</span><span class="w"> </span><span class="nx">LB</span><span class="w"> </span><span class="nx">Primary</span><span class="w"> </span><span class="p">(</span><span class="nx">Active</span><span class="p">)</span><span class="w">      </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                     </span><span class="err">â”‚</span><span class="w">                      </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                     </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Heartbeat</span><span class="w">            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                     </span><span class="err">â–¼</span><span class="w">                      </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                               </span><span class="nx">LB</span><span class="w"> </span><span class="nx">Secondary</span><span class="w"> </span><span class="p">(</span><span class="nx">Standby</span><span class="p">)</span><span class="w">       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">On</span><span class="w"> </span><span class="nx">failure</span><span class="p">:</span><span class="w">                                               </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nx">Clients</span><span class="w"> </span><span class="err">â”€â”€â–¶</span><span class="w"> </span><span class="nx">VIP</span><span class="w"> </span><span class="p">(</span><span class="m m-Double">10.0.0.100</span><span class="p">)</span><span class="w"> </span><span class="err">â”€â”€â–¶</span><span class="w"> </span><span class="nx">LB</span><span class="w"> </span><span class="nx">Primary</span><span class="w"> </span><span class="p">(</span><span class="nx">Down</span><span class="p">!)</span><span class="w">       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                    </span><span class="err">â”‚</span><span class="w">                                       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                    </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">VIP</span><span class="w"> </span><span class="nx">takeover</span><span class="w"> </span><span class="p">(</span><span class="nx">Failover</span><span class="p">)</span><span class="w">                </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                    </span><span class="err">â–¼</span><span class="w">                                       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">               </span><span class="nx">LB</span><span class="w"> </span><span class="nx">Secondary</span><span class="w"> </span><span class="p">(</span><span class="nx">Active</span><span class="p">)</span><span class="w">                        </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nx">Implementation</span><span class="p">:</span><span class="w"> </span><span class="nx">VRRP</span><span class="p">,</span><span class="w"> </span><span class="nx">Keepalived</span><span class="p">,</span><span class="w"> </span><span class="nx">Pacemaker</span><span class="w">                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nx">Pros</span><span class="p">:</span><span class="w"> </span><span class="nx">Simple</span><span class="p">,</span><span class="w"> </span><span class="nx">resource</span><span class="w"> </span><span class="nx">efficient</span><span class="w"> </span><span class="p">(</span><span class="nx">Standby</span><span class="w"> </span><span class="nx">just</span><span class="w"> </span><span class="nx">waits</span><span class="p">)</span><span class="w">          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nx">Cons</span><span class="p">:</span><span class="w"> </span><span class="nx">Standby</span><span class="w"> </span><span class="nx">resource</span><span class="w"> </span><span class="nx">waste</span><span class="p">,</span><span class="w"> </span><span class="nx">brief</span><span class="w"> </span><span class="nx">downtime</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">switch</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="62-active-active">6.2 Active-Active<a class="header-link" href="#62-active-active" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                   </span><span class="n">Active</span><span class="o">-</span><span class="n">Active</span><span class="w"> </span><span class="n">Configuration</span><span class="w">                    </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="s2">&quot;Both load balancers handle traffic simultaneously&quot;</span><span class="w">            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                      </span><span class="n">DNS</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                       </span><span class="err">â”‚</span><span class="w">                                    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">            </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">            </span><span class="err">â”‚</span><span class="w">                     </span><span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">            </span><span class="err">â–¼</span><span class="w">                     </span><span class="err">â–¼</span><span class="w">                         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">     </span><span class="n">LB</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="n">Active</span><span class="p">)</span><span class="w">          </span><span class="n">LB</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="n">Active</span><span class="p">)</span><span class="w">                   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">     </span><span class="n">VIP</span><span class="p">:</span><span class="w"> </span><span class="mf">10.0</span><span class="o">.</span><span class="mf">0.100</span><span class="w">        </span><span class="n">VIP</span><span class="p">:</span><span class="w"> </span><span class="mf">10.0</span><span class="o">.</span><span class="mf">0.101</span><span class="w">                 </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">            </span><span class="err">â”‚</span><span class="w">                     </span><span class="err">â”‚</span><span class="w">                         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">            </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                       </span><span class="err">â”‚</span><span class="w">                                    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">            </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">            </span><span class="err">â–¼</span><span class="w">          </span><span class="err">â–¼</span><span class="w">          </span><span class="err">â–¼</span><span class="w">                         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">        </span><span class="n">Server</span><span class="w"> </span><span class="mi">1</span><span class="w">   </span><span class="n">Server</span><span class="w"> </span><span class="mi">2</span><span class="w">   </span><span class="n">Server</span><span class="w"> </span><span class="mi">3</span><span class="w">                      </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">On</span><span class="w"> </span><span class="n">failure</span><span class="p">:</span><span class="w">                                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">LB</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="n">Down</span><span class="o">!</span><span class="p">)</span><span class="w"> </span><span class="err">â”€â”€â–¶</span><span class="w"> </span><span class="n">Remove</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">DNS</span><span class="w"> </span><span class="ow">or</span><span class="w">                       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                  </span><span class="n">LB</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">takes</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="n">VIP</span><span class="w">                       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Pros</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="n">utilization</span><span class="p">,</span><span class="w"> </span><span class="n">higher</span><span class="w"> </span><span class="n">throughput</span><span class="w">             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Cons</span><span class="p">:</span><span class="w"> </span><span class="n">Complex</span><span class="w"> </span><span class="n">configuration</span><span class="p">,</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">sync</span><span class="w"> </span><span class="n">needed</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="63-cloud-load-balancers">6.3 Cloud Load Balancers<a class="header-link" href="#63-cloud-load-balancers" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                  </span><span class="n">Cloud</span><span class="w"> </span><span class="n">Load</span><span class="w"> </span><span class="n">Balancers</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nl">AWS:</span><span class="w">                                                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="n">ALB</span><span class="w"> </span><span class="p">(</span><span class="n">Application</span><span class="w"> </span><span class="n">Load</span><span class="w"> </span><span class="n">Balancer</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">L7</span><span class="w">                     </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="n">URL</span><span class="o">/</span><span class="n">host</span><span class="o">-</span><span class="n">based</span><span class="w"> </span><span class="n">routing</span><span class="p">,</span><span class="w"> </span><span class="n">WebSocket</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP</span><span class="o">/</span><span class="mh">2</span><span class="w">                </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="n">NLB</span><span class="w"> </span><span class="p">(</span><span class="n">Network</span><span class="w"> </span><span class="n">Load</span><span class="w"> </span><span class="n">Balancer</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">L4</span><span class="w">                         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="n">Ultra</span><span class="o">-</span><span class="n">low</span><span class="w"> </span><span class="n">latency</span><span class="p">,</span><span class="w"> </span><span class="n">fixed</span><span class="w"> </span><span class="n">IP</span><span class="p">,</span><span class="w"> </span><span class="n">TCP</span><span class="o">/</span><span class="n">UDP</span><span class="w">                     </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="n">CLB</span><span class="w"> </span><span class="p">(</span><span class="n">Classic</span><span class="w"> </span><span class="n">Load</span><span class="w"> </span><span class="n">Balancer</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">L4</span><span class="o">/</span><span class="n">L7</span><span class="w"> </span><span class="p">(</span><span class="n">legacy</span><span class="p">)</span><span class="w">             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nl">GCP:</span><span class="w">                                                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="n">HTTP</span><span class="p">(</span><span class="n">S</span><span class="p">)</span><span class="w"> </span><span class="n">Load</span><span class="w"> </span><span class="n">Balancer</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">L7</span><span class="p">,</span><span class="w"> </span><span class="n">global</span><span class="w">                       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="n">TCP</span><span class="o">/</span><span class="n">UDP</span><span class="w"> </span><span class="n">Load</span><span class="w"> </span><span class="n">Balancer</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">L4</span><span class="p">,</span><span class="w"> </span><span class="n">regional</span><span class="w">                     </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Internal</span><span class="w"> </span><span class="n">Load</span><span class="w"> </span><span class="n">Balancer</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">internal</span><span class="w"> </span><span class="n">traffic</span><span class="w">                </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nl">Advantages:</span><span class="w">                                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Managed</span><span class="w"> </span><span class="n">service</span><span class="w"> </span><span class="p">(</span><span class="n">reduced</span><span class="w"> </span><span class="n">operations</span><span class="w"> </span><span class="n">burden</span><span class="p">)</span><span class="w">                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Auto</span><span class="w"> </span><span class="n">scaling</span><span class="p">,</span><span class="w"> </span><span class="n">built</span><span class="o">-</span><span class="n">in</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">availability</span><span class="w">                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Integrated</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">Auto</span><span class="w"> </span><span class="n">Scaling</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Security</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="p">(</span><span class="n">WAF</span><span class="p">,</span><span class="w"> </span><span class="n">DDoS</span><span class="w"> </span><span class="n">protection</span><span class="p">)</span><span class="w">                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="7-practice-problems">7. Practice Problems<a class="header-link" href="#7-practice-problems" title="Permanent link">&para;</a></h2>
<h3 id="problem-1-choose-load-balancer">Problem 1: Choose Load Balancer<a class="header-link" href="#problem-1-choose-load-balancer" title="Permanent link">&para;</a></h3>
<p>Choose appropriate load balancer type (L4/L7) for these scenarios and explain why.</p>
<p>a) gRPC communication between microservices
b) Multi-language website (URL: /ko/, /en/, /jp/)
c) Real-time game server
d) API gateway</p>
<h3 id="problem-2-choose-distribution-algorithm">Problem 2: Choose Distribution Algorithm<a class="header-link" href="#problem-2-choose-distribution-algorithm" title="Permanent link">&para;</a></h3>
<p>Choose most suitable distribution algorithm for these situations.</p>
<p>a) All servers same specs, similar request processing times
b) WebSocket-based chat service
c) Gradually introducing new server (canary)
d) Service utilizing server-side caching</p>
<h3 id="problem-3-health-check-design">Problem 3: Health Check Design<a class="header-link" href="#problem-3-health-check-design" title="Permanent link">&para;</a></h3>
<p>Design health check endpoint for e-commerce service.</p>
<p>Conditions:
- Depends on database, Redis, payment API
- Kubernetes environment
- Need fast failure detection</p>
<h3 id="problem-4-architecture-design">Problem 4: Architecture Design<a class="header-link" href="#problem-4-architecture-design" title="Permanent link">&para;</a></h3>
<p>Design load balancer architecture for service handling 100M daily requests.</p>
<p>Conditions:
- Global users (Asia, North America, Europe)
- 99.99% availability requirement
- Cost optimization</p>
<hr />
<h2 id="answers">Answers<a class="header-link" href="#answers" title="Permanent link">&para;</a></h2>
<h3 id="problem-1-answer">Problem 1 Answer<a class="header-link" href="#problem-1-answer" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>a) gRPC comms: L4 (NLB)
   - gRPC is HTTP/2-based but L4 sufficient
   - Low latency, high throughput

b) Multi-language website: L7 (ALB)
   - URL-based routing needed (/ko â†’ Korean server)
   - Host header analysis

c) Game server: L4 (NLB)
   - UDP support needed
   - Minimal latency critical
   - TCP/UDP game protocols

d) API gateway: L7 (ALB)
   - URL/header-based routing
   - Authentication, Rate Limiting
   - SSL termination
</code></pre></div>

<h3 id="problem-2-answer">Problem 2 Answer<a class="header-link" href="#problem-2-answer" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="n">Round</span><span class="w"> </span><span class="n">Robin</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Same</span><span class="w"> </span><span class="n">servers</span><span class="p">,</span><span class="w"> </span><span class="n">similar</span><span class="w"> </span><span class="n">requests</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">simple</span><span class="w"> </span><span class="n">rotation</span><span class="w"> </span><span class="n">efficient</span>

<span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="n">Least</span><span class="w"> </span><span class="n">Connections</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">WebSocket</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">long</span><span class="w"> </span><span class="n">connections</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Connection</span><span class="w"> </span><span class="n">count</span><span class="o">-</span><span class="n">based</span><span class="w"> </span><span class="n">distribution</span><span class="w"> </span><span class="n">effective</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nb">load</span><span class="w"> </span><span class="n">balance</span>

<span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="n">Weighted</span><span class="w"> </span><span class="n">Round</span><span class="w"> </span><span class="n">Robin</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">New</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">low</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="o">%</span><span class="p">)</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Gradually</span><span class="w"> </span><span class="n">increase</span><span class="w"> </span><span class="n">weight</span>

<span class="n">d</span><span class="p">)</span><span class="w"> </span><span class="n">IP</span><span class="w"> </span><span class="n">Hash</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">Consistent</span><span class="w"> </span><span class="n">Hashing</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Same</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">increased</span><span class="w"> </span><span class="n">cache</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="n">rate</span>
</code></pre></div>

<h3 id="problem-3-answer">Problem 3 Answer<a class="header-link" href="#problem-3-answer" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// GET /health/ready (Readiness)</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;healthy&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;checks&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;database&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;healthy&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;latency_ms&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;redis&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;healthy&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;latency_ms&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;payment_api&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;healthy&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;latency_ms&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// GET /health/live (Liveness)</span>
<span class="p">{</span><span class="w"> </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;healthy&quot;</span><span class="w"> </span><span class="p">}</span>

<span class="err">Co</span><span class="kc">nf</span><span class="err">igura</span><span class="kc">t</span><span class="err">io</span><span class="kc">n</span><span class="p">:</span>
<span class="mi">-</span><span class="w"> </span><span class="err">Readi</span><span class="kc">ness</span><span class="p">:</span><span class="w"> </span><span class="err">i</span><span class="kc">nter</span><span class="err">val</span><span class="w"> </span><span class="mi">5</span><span class="err">s</span><span class="p">,</span><span class="w"> </span><span class="kc">fa</span><span class="err">ilure</span><span class="w"> </span><span class="kc">t</span><span class="err">hreshold</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="err">recovery</span><span class="w"> </span><span class="kc">t</span><span class="err">hreshold</span><span class="w"> </span><span class="mi">1</span>
<span class="mi">-</span><span class="w"> </span><span class="err">Live</span><span class="kc">ness</span><span class="p">:</span><span class="w"> </span><span class="err">i</span><span class="kc">nter</span><span class="err">val</span><span class="w"> </span><span class="mi">10</span><span class="err">s</span><span class="p">,</span><span class="w"> </span><span class="kc">fa</span><span class="err">ilure</span><span class="w"> </span><span class="kc">t</span><span class="err">hreshold</span><span class="w"> </span><span class="mi">3</span>

<span class="err">Readi</span><span class="kc">ness</span><span class="w"> </span><span class="kc">fa</span><span class="err">ilure</span><span class="p">:</span><span class="w"> </span><span class="err">Exclude</span><span class="w"> </span><span class="kc">fr</span><span class="err">om</span><span class="w"> </span><span class="kc">traff</span><span class="err">ic</span><span class="w"> </span><span class="err">(depe</span><span class="kc">n</span><span class="err">de</span><span class="kc">n</span><span class="err">cy</span><span class="w"> </span><span class="err">issues</span><span class="w"> </span><span class="err">like</span><span class="w"> </span><span class="err">payme</span><span class="kc">nt</span><span class="err">)</span>
<span class="err">Live</span><span class="kc">ness</span><span class="w"> </span><span class="kc">fa</span><span class="err">ilure</span><span class="p">:</span><span class="w"> </span><span class="err">Res</span><span class="kc">tart</span><span class="w"> </span><span class="err">co</span><span class="kc">nta</span><span class="err">i</span><span class="kc">ner</span>
</code></pre></div>

<h3 id="problem-4-answer">Problem 4 Answer<a class="header-link" href="#problem-4-answer" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Architecture</span><span class="p">:</span>

<span class="mf">1.</span><span class="w"> </span><span class="n">Global</span><span class="w"> </span><span class="n">Load</span><span class="w"> </span><span class="n">Balancing</span><span class="w"> </span><span class="p">(</span><span class="n">DNS</span><span class="p">)</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">AWS</span><span class="w"> </span><span class="n">Route</span><span class="w"> </span><span class="mi">53</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">Cloudflare</span><span class="w"> </span><span class="p">(</span><span class="n">Latency</span><span class="o">-</span><span class="n">based</span><span class="p">)</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Asia</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Seoul</span><span class="w"> </span><span class="n">region</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">North</span><span class="w"> </span><span class="n">America</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Virginia</span><span class="w"> </span><span class="n">region</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Europe</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Frankfurt</span><span class="w"> </span><span class="n">region</span>

<span class="mf">2.</span><span class="w"> </span><span class="n">Per</span><span class="o">-</span><span class="n">region</span><span class="w"> </span><span class="n">configuration</span><span class="p">:</span>
<span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">CDN</span><span class="w"> </span><span class="p">(</span><span class="n">CloudFront</span><span class="o">/</span><span class="n">Cloudflare</span><span class="p">)</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="n">Static</span><span class="w"> </span><span class="n">content</span>
<span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
<span class="w">                    </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">L7</span><span class="w"> </span><span class="n">Load</span><span class="w"> </span><span class="n">Balancer</span><span class="w"> </span><span class="p">(</span><span class="n">ALB</span><span class="p">)</span><span class="w">         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="n">URL</span><span class="w"> </span><span class="n">routing</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Auto</span><span class="w"> </span><span class="n">Scaling</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">WAF</span><span class="w"> </span><span class="n">integration</span><span class="w">              </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
<span class="w">                    </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="n">Application</span><span class="w"> </span><span class="n">Servers</span><span class="w">            </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="p">(</span><span class="n">Auto</span><span class="w"> </span><span class="n">Scaling</span><span class="w"> </span><span class="n">Group</span><span class="p">)</span><span class="w">           </span><span class="err">â”‚</span>
<span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="mf">3.</span><span class="w"> </span><span class="n">Ensure</span><span class="w"> </span><span class="n">availability</span><span class="p">:</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Multi</span><span class="o">-</span><span class="n">AZ</span><span class="w"> </span><span class="n">deployment</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Health</span><span class="w"> </span><span class="n">checks</span><span class="p">:</span><span class="w"> </span><span class="n">Active</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Passive</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Enable</span><span class="w"> </span><span class="n">Cross</span><span class="o">-</span><span class="n">Zone</span><span class="w"> </span><span class="n">Load</span><span class="w"> </span><span class="n">Balancing</span>

<span class="mf">4.</span><span class="w"> </span><span class="n">Cost</span><span class="w"> </span><span class="n">optimization</span><span class="p">:</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Reserved</span><span class="w"> </span><span class="n">Instances</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">CDN</span><span class="w"> </span><span class="n">reduces</span><span class="w"> </span><span class="n">Origin</span><span class="w"> </span><span class="nb">load</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Auto</span><span class="w"> </span><span class="n">Scaling</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="n">traffic</span><span class="w"> </span><span class="n">patterns</span>
</code></pre></div>

<hr />
<h2 id="8-next-steps">8. Next Steps<a class="header-link" href="#8-next-steps" title="Permanent link">&para;</a></h2>
<p>Now that you understand load balancing, learn about reverse proxy and API gateway.</p>
<h3 id="next-lesson">Next Lesson<a class="header-link" href="#next-lesson" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="./05_Reverse_Proxy_API_Gateway.md">05_Reverse_Proxy_API_Gateway.md</a></li>
</ul>
<h3 id="related-lessons">Related Lessons<a class="header-link" href="#related-lessons" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="./02_Scalability_Basics.md">02_Scalability_Basics.md</a> - Stateless architecture</li>
<li><a href="./07_Distributed_Cache_Systems.md">07_Distributed_Cache_Systems.md</a> - Session storage</li>
</ul>
<h3 id="recommended-practice">Recommended Practice<a class="header-link" href="#recommended-practice" title="Permanent link">&para;</a></h3>
<ol>
<li>Configure load balancer with Nginx</li>
<li>HAProxy practice</li>
<li>AWS ALB/NLB comparison test</li>
</ol>
<hr />
<h2 id="9-references">9. References<a class="header-link" href="#9-references" title="Permanent link">&para;</a></h2>
<h3 id="tools">Tools<a class="header-link" href="#tools" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://nginx.org/">Nginx</a> - Web server &amp; load balancer</li>
<li><a href="https://www.haproxy.org/">HAProxy</a> - High-performance load balancer</li>
<li><a href="https://www.envoyproxy.io/">Envoy</a> - Cloud-native proxy</li>
</ul>
<h3 id="documentation">Documentation<a class="header-link" href="#documentation" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://aws.amazon.com/elasticloadbalancing/">AWS Elastic Load Balancing</a></li>
<li><a href="https://cloud.google.com/load-balancing">GCP Cloud Load Balancing</a></li>
<li><a href="https://docs.nginx.com/nginx/admin-guide/load-balancer/">Nginx Load Balancing</a></li>
</ul>
<h3 id="online-resources">Online Resources<a class="header-link" href="#online-resources" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://www.nginx.com/blog/nginx-high-availability-with-haproxy/">High Availability Load Balancers</a></li>
</ul>
<hr />
<p><strong>Document Information</strong>
- Last Updated: 2024
- Difficulty: â­â­â­
- Estimated Study Time: 2-3 hours</p>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/System_Design/03_Network_Fundamentals_Review.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Network Fundamentals Review</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/System_Design/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/System_Design/05_Reverse_Proxy_API_Gateway.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Reverse Proxy and API Gateway</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">â†‘</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'en';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}