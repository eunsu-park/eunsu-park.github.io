{% raw %}
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Distributed Cache Systems - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/en/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/en/" class="nav-item ">
                    <span class="nav-icon">ğŸ </span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">ğŸ’»</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/en/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" selected>
                        English
                    </option>
                    
                    <option value="ko" >
                        í•œêµ­ì–´
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">â˜€ï¸</span>
                    <span class="theme-icon dark">ğŸŒ™</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/en/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/en/System_Design/">System Design</a>
    <span class="separator">/</span>
    <span class="current">Distributed Cache Systems</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>Distributed Cache Systems</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/System_Design/06_Caching_Strategies.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Caching Strategies</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/System_Design/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/System_Design/08_Database_Scaling.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Database Scaling</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#1-what-is-distributed-cache">1. What is Distributed Cache?</a><ul>
<li><a href="#11-need-for-distributed-cache">1.1 Need for Distributed Cache</a></li>
<li><a href="#12-local-cache-vs-distributed-cache">1.2 Local Cache vs Distributed Cache</a></li>
</ul>
</li>
<li><a href="#2-redis-data-structures">2. Redis Data Structures</a><ul>
<li><a href="#21-string">2.1 String</a></li>
<li><a href="#22-hash">2.2 Hash</a></li>
<li><a href="#23-list">2.3 List</a></li>
<li><a href="#24-set">2.4 Set</a></li>
<li><a href="#25-sorted-set-zset">2.5 Sorted Set (ZSet)</a></li>
<li><a href="#26-data-structure-summary">2.6 Data Structure Summary</a></li>
</ul>
</li>
<li><a href="#3-redis-cluster-and-sentinel">3. Redis Cluster and Sentinel</a><ul>
<li><a href="#31-redis-sentinel">3.1 Redis Sentinel</a></li>
<li><a href="#32-redis-cluster">3.2 Redis Cluster</a></li>
<li><a href="#33-sentinel-vs-cluster">3.3 Sentinel vs Cluster</a></li>
</ul>
</li>
<li><a href="#4-memcached-comparison">4. Memcached Comparison</a><ul>
<li><a href="#41-redis-vs-memcached">4.1 Redis vs Memcached</a></li>
<li><a href="#42-comparison-table">4.2 Comparison Table</a></li>
<li><a href="#43-selection-criteria">4.3 Selection Criteria</a></li>
</ul>
</li>
<li><a href="#5-consistent-hashing">5. Consistent Hashing</a><ul>
<li><a href="#51-traditional-hashing-problem">5.1 Traditional Hashing Problem</a></li>
<li><a href="#52-consistent-hashing-principle">5.2 Consistent Hashing Principle</a></li>
<li><a href="#53-virtual-nodes">5.3 Virtual Nodes</a></li>
</ul>
</li>
<li><a href="#6-practice-problems">6. Practice Problems</a><ul>
<li><a href="#problem-1-redis-data-structure-selection">Problem 1: Redis Data Structure Selection</a></li>
<li><a href="#problem-2-sentinel-vs-cluster">Problem 2: Sentinel vs Cluster</a></li>
<li><a href="#problem-3-consistent-hashing">Problem 3: Consistent Hashing</a></li>
<li><a href="#problem-4-redis-design">Problem 4: Redis Design</a></li>
</ul>
</li>
<li><a href="#answers">Answers</a><ul>
<li><a href="#problem-1-answer">Problem 1 Answer</a></li>
<li><a href="#problem-2-answer">Problem 2 Answer</a></li>
<li><a href="#problem-3-answer">Problem 3 Answer</a></li>
<li><a href="#problem-4-answer">Problem 4 Answer</a></li>
</ul>
</li>
<li><a href="#7-next-steps">7. Next Steps</a><ul>
<li><a href="#next-lesson">Next Lesson</a></li>
<li><a href="#related-lessons">Related Lessons</a></li>
<li><a href="#recommended-practice">Recommended Practice</a></li>
</ul>
</li>
<li><a href="#8-references">8. References</a><ul>
<li><a href="#official-documentation">Official Documentation</a></li>
<li><a href="#tools">Tools</a></li>
<li><a href="#papers">Papers</a></li>
</ul>
</li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="distributed-cache-systems">Distributed Cache Systems<a class="header-link" href="#distributed-cache-systems" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="header-link" href="#overview" title="Permanent link">&para;</a></h2>
<p>This document covers core concepts of distributed cache systems. Learn about Redis data structures and cluster configuration, comparison with Memcached, and Consistent Hashing.</p>
<p><strong>Difficulty</strong>: â­â­â­
<strong>Estimated Learning Time</strong>: 2-3 hours
<strong>Prerequisites</strong>: <a href="./06_Caching_Strategies.md">06_Caching_Strategies.md</a></p>
<hr />
<h2 id="table-of-contents">Table of Contents<a class="header-link" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#1-what-is-distributed-cache">What is Distributed Cache?</a></li>
<li><a href="#2-redis-data-structures">Redis Data Structures</a></li>
<li><a href="#3-redis-cluster-and-sentinel">Redis Cluster and Sentinel</a></li>
<li><a href="#4-memcached-comparison">Memcached Comparison</a></li>
<li><a href="#5-consistent-hashing">Consistent Hashing</a></li>
<li><a href="#6-practice-problems">Practice Problems</a></li>
<li><a href="#7-next-steps">Next Steps</a></li>
<li><a href="#8-references">References</a></li>
</ol>
<hr />
<h2 id="1-what-is-distributed-cache">1. What is Distributed Cache?<a class="header-link" href="#1-what-is-distributed-cache" title="Permanent link">&para;</a></h2>
<h3 id="11-need-for-distributed-cache">1.1 Need for Distributed Cache<a class="header-link" href="#11-need-for-distributed-cache" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">                   </span><span class="nv">Need</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">Distributed</span><span class="w"> </span><span class="nv">Cache</span><span class="w">                     </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                                  </span>â”‚
â”‚<span class="w">  </span><span class="nv">Local</span><span class="w"> </span><span class="nv">cache</span><span class="w"> </span><span class="nv">problems</span>:<span class="w">                                           </span>â”‚
â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>[<span class="nv">Server</span><span class="w"> </span><span class="mi">1</span>]<span class="w">     </span>[<span class="nv">Server</span><span class="w"> </span><span class="mi">2</span>]<span class="w">     </span>[<span class="nv">Server</span><span class="w"> </span><span class="mi">3</span>]<span class="w">                  </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="nv">Local</span><span class="w"> </span><span class="nv">Cache</span><span class="w">    </span><span class="nv">Local</span><span class="w"> </span><span class="nv">Cache</span><span class="w">    </span><span class="nv">Local</span><span class="w"> </span><span class="nv">Cache</span><span class="w">                 </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="nv">user</span>:<span class="mi">123</span><span class="w"> </span>âœ“<span class="w">     </span><span class="nv">user</span>:<span class="mi">123</span><span class="w"> </span>âœ—<span class="w">     </span><span class="nv">user</span>:<span class="mi">123</span><span class="w"> </span>âœ—<span class="w">                  </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="nv">Problems</span>:<span class="w">                                                 </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="mi">1</span>.<span class="w"> </span><span class="nv">Different</span><span class="w"> </span><span class="nv">cache</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">each</span><span class="w"> </span><span class="nv">server</span><span class="w"> </span><span class="ss">(</span><span class="nv">inconsistency</span><span class="ss">)</span><span class="w">         </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="mi">2</span>.<span class="w"> </span><span class="nv">Memory</span><span class="w"> </span><span class="nv">waste</span><span class="w"> </span><span class="ss">(</span><span class="nv">duplicate</span><span class="w"> </span><span class="nv">data</span><span class="ss">)</span><span class="w">                          </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="mi">3</span>.<span class="w"> </span><span class="nv">Difficult</span><span class="w"> </span><span class="nv">cache</span><span class="w"> </span><span class="nv">invalidation</span><span class="w">                           </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w"> </span>â”‚
â”‚<span class="w">                                                                  </span>â”‚
â”‚<span class="w">  </span><span class="nv">With</span><span class="w"> </span><span class="nv">distributed</span><span class="w"> </span><span class="nv">cache</span>:<span class="w">                                         </span>â”‚
â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>[<span class="nv">Server</span><span class="w"> </span><span class="mi">1</span>]<span class="w">     </span>[<span class="nv">Server</span><span class="w"> </span><span class="mi">2</span>]<span class="w">     </span>[<span class="nv">Server</span><span class="w"> </span><span class="mi">3</span>]<span class="w">                  </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">       </span>â”‚<span class="w">              </span>â”‚<span class="w">              </span>â”‚<span class="w">                      </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">       </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">                      </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                      </span>â”‚<span class="w">                                     </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                      </span>â–¼<span class="w">                                     </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">            </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">                          </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">            </span>â”‚<span class="w">   </span><span class="nv">Distributed</span><span class="w">      </span>â”‚<span class="w">                          </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">            </span>â”‚<span class="w">   </span><span class="nv">Cache</span><span class="w"> </span><span class="ss">(</span><span class="nv">Redis</span><span class="ss">)</span><span class="w">    </span>â”‚<span class="w">                          </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">            </span>â”‚<span class="w">   </span><span class="nv">user</span>:<span class="mi">123</span><span class="w"> </span>âœ“<span class="w">       </span>â”‚<span class="w">                          </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">            </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">                          </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="nv">Benefits</span>:<span class="w">                                                 </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="mi">1</span>.<span class="w"> </span><span class="nv">All</span><span class="w"> </span><span class="nv">servers</span><span class="w"> </span><span class="nv">share</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">cache</span><span class="w">                           </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="mi">2</span>.<span class="w"> </span><span class="nv">Cache</span><span class="w"> </span><span class="nv">consistency</span><span class="w"> </span><span class="nv">maintained</span><span class="w">                           </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="mi">3</span>.<span class="w"> </span><span class="nv">Centralized</span><span class="w"> </span><span class="nv">management</span><span class="w">                                 </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w"> </span>â”‚
â”‚<span class="w">                                                                  </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="12-local-cache-vs-distributed-cache">1.2 Local Cache vs Distributed Cache<a class="header-link" href="#12-local-cache-vs-distributed-cache" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Item</th>
<th>Local Cache</th>
<th>Distributed Cache</th>
</tr>
</thead>
<tbody>
<tr>
<td>Storage location</td>
<td>Application memory</td>
<td>Separate server (Redis etc.)</td>
</tr>
<tr>
<td>Speed</td>
<td>Very fast (ns~us)</td>
<td>Fast (ms)</td>
</tr>
<tr>
<td>Capacity</td>
<td>Server memory limit</td>
<td>Scalable</td>
</tr>
<tr>
<td>Consistency</td>
<td>Different per server</td>
<td>Shared/consistent</td>
</tr>
<tr>
<td>Failure</td>
<td>Lost on server restart</td>
<td>Can be managed independently</td>
</tr>
<tr>
<td>Use case</td>
<td>Single server, read-only</td>
<td>Multiple servers, sessions etc.</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="2-redis-data-structures">2. Redis Data Structures<a class="header-link" href="#2-redis-data-structures" title="Permanent link">&para;</a></h2>
<h3 id="21-string">2.1 String<a class="header-link" href="#21-string" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">                       </span><span class="nv">String</span><span class="w">                                     </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                                  </span>â”‚
â”‚<span class="w">  </span><span class="nv">Most</span><span class="w"> </span><span class="nv">basic</span><span class="w"> </span><span class="nv">key</span><span class="o">-</span><span class="nv">value</span><span class="w"> </span><span class="nv">storage</span><span class="w">                                   </span>â”‚
â”‚<span class="w">                                                                  </span>â”‚
â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="nv">SET</span><span class="w"> </span><span class="nv">user</span>:<span class="mi">123</span>:<span class="nv">name</span><span class="w"> </span><span class="s2">&quot;John&quot;</span><span class="w">                                  </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="nv">GET</span><span class="w"> </span><span class="nv">user</span>:<span class="mi">123</span>:<span class="nv">name</span><span class="w">  </span>â†’<span class="w"> </span><span class="s2">&quot;John&quot;</span><span class="w">                               </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>#<span class="w"> </span><span class="nv">Set</span><span class="w"> </span><span class="nv">expiry</span><span class="w"> </span><span class="nv">time</span><span class="w"> </span><span class="ss">(</span><span class="nv">seconds</span><span class="ss">)</span><span class="w">                               </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="nv">SET</span><span class="w"> </span><span class="nv">session</span>:<span class="nv">abc</span><span class="w"> </span><span class="s2">&quot;data&quot;</span><span class="w"> </span><span class="nv">EX</span><span class="w"> </span><span class="mi">3600</span><span class="w">                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="nv">SETEX</span><span class="w"> </span><span class="nv">session</span>:<span class="nv">abc</span><span class="w"> </span><span class="mi">3600</span><span class="w"> </span><span class="s2">&quot;data&quot;</span><span class="w">  </span>#<span class="w"> </span><span class="nv">Same</span><span class="w">                     </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>#<span class="w"> </span><span class="nv">Atomic</span><span class="w"> </span><span class="nv">increment</span><span class="o">/</span><span class="nv">decrement</span><span class="w">                              </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="nv">SET</span><span class="w"> </span><span class="nv">counter</span><span class="w"> </span><span class="mi">0</span><span class="w">                                             </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="nv">INCR</span><span class="w"> </span><span class="nv">counter</span><span class="w">  </span>â†’<span class="w"> </span><span class="mi">1</span><span class="w">                                         </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="nv">INCRBY</span><span class="w"> </span><span class="nv">counter</span><span class="w"> </span><span class="mi">10</span><span class="w">  </span>â†’<span class="w"> </span><span class="mi">11</span><span class="w">                                   </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="nv">DECR</span><span class="w"> </span><span class="nv">counter</span><span class="w">  </span>â†’<span class="w"> </span><span class="mi">10</span><span class="w">                                        </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>#<span class="w"> </span><span class="nv">NX</span><span class="w"> </span><span class="ss">(</span><span class="nv">Not</span><span class="w"> </span><span class="nv">eXists</span><span class="ss">)</span>:<span class="w"> </span><span class="nv">Set</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">key</span><span class="w"> </span><span class="nv">doesn</span><span class="err">&#39;t exist          â”‚ â”‚</span>
<span class="err">â”‚  â”‚  SET lock:resource &quot;owner&quot; NX EX 30  # Distributed lock    â”‚ â”‚</span>
<span class="err">â”‚  â”‚                                                            â”‚ â”‚</span>
<span class="err">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚</span>
<span class="err">â”‚                                                                  â”‚</span>
<span class="err">â”‚  Use cases:                                                      â”‚</span>
<span class="err">â”‚  â€¢ Session storage                                               â”‚</span>
<span class="err">â”‚  â€¢ Cache (JSON serialization)                                    â”‚</span>
<span class="err">â”‚  â€¢ Counters (views, likes)                                       â”‚</span>
<span class="err">â”‚  â€¢ Distributed locks                                             â”‚</span>
<span class="err">â”‚                                                                  â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="22-hash">2.2 Hash<a class="header-link" href="#22-hash" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                        </span><span class="n">Hash</span><span class="w">                                      </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Collection</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">field</span><span class="o">-</span><span class="k">value</span><span class="w"> </span><span class="n">pairs</span><span class="w"> </span><span class="p">(</span><span class="n">good</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">storing</span><span class="w"> </span><span class="n">objects</span><span class="p">)</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="n">Store</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="k">object</span><span class="w">                                       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">HSET</span><span class="w"> </span><span class="k">user</span><span class="err">:</span><span class="mi">123</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="ss">&quot;John&quot;</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="mi">30</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="ss">&quot;john@example.com&quot;</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="k">Get</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">field</span><span class="w">                                        </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">HGET</span><span class="w"> </span><span class="k">user</span><span class="err">:</span><span class="mi">123</span><span class="w"> </span><span class="n">name</span><span class="w">  </span><span class="err">â†’</span><span class="w"> </span><span class="ss">&quot;John&quot;</span><span class="w">                              </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="k">Get</span><span class="w"> </span><span class="ow">all</span><span class="w"> </span><span class="n">fields</span><span class="w">                                          </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">HGETALL</span><span class="w"> </span><span class="k">user</span><span class="err">:</span><span class="mi">123</span><span class="w">                                          </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â†’</span><span class="w"> </span><span class="err">{</span><span class="ss">&quot;name&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;John&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;age&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;30&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;email&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;...&quot;</span><span class="err">}</span><span class="w">           </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="n">Increment</span><span class="w"> </span><span class="n">field</span><span class="w">                                         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">HINCRBY</span><span class="w"> </span><span class="k">user</span><span class="err">:</span><span class="mi">123</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="err">â†’</span><span class="w"> </span><span class="mi">31</span><span class="w">                              </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="k">Check</span><span class="w"> </span><span class="n">field</span><span class="w"> </span><span class="n">existence</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">HEXISTS</span><span class="w"> </span><span class="k">user</span><span class="err">:</span><span class="mi">123</span><span class="w"> </span><span class="n">name</span><span class="w">  </span><span class="err">â†’</span><span class="w"> </span><span class="mi">1</span><span class="w">                                </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="k">Structure</span><span class="err">:</span><span class="w">                                                </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="k">user</span><span class="err">:</span><span class="mi">123</span><span class="w">                                        </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="ss">&quot;John&quot;</span><span class="w">                              </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€</span><span class="w"> </span><span class="nl">age</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€</span><span class="w"> </span><span class="nl">email</span><span class="p">:</span><span class="w"> </span><span class="ss">&quot;john@example.com&quot;</span><span class="w">                 </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Advantages</span><span class="w"> </span><span class="p">(</span><span class="n">vs</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">JSON</span><span class="p">)</span><span class="err">:</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Access</span><span class="o">/</span><span class="k">modify</span><span class="w"> </span><span class="n">individual</span><span class="w"> </span><span class="n">fields</span><span class="w">                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Efficient</span><span class="w"> </span><span class="k">partial</span><span class="w"> </span><span class="n">updates</span><span class="w">                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Memory</span><span class="w"> </span><span class="n">efficient</span><span class="w"> </span><span class="p">(</span><span class="k">for</span><span class="w"> </span><span class="n">small</span><span class="w"> </span><span class="n">hashes</span><span class="p">)</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="23-list">2.3 List<a class="header-link" href="#23-list" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                        </span><span class="n">List</span><span class="w">                                      </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Ordered</span><span class="w"> </span><span class="n">collection</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">strings</span><span class="w"> </span><span class="p">(</span><span class="n">Linked</span><span class="w"> </span><span class="n">List</span><span class="p">)</span><span class="w">                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="n">Push</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="nf">right</span><span class="w"> </span><span class="p">(</span><span class="n">Queue</span><span class="w"> </span><span class="k">use</span><span class="p">)</span><span class="w">                               </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">RPUSH</span><span class="w"> </span><span class="nl">queue</span><span class="p">:</span><span class="n">jobs</span><span class="w"> </span><span class="ss">&quot;job1&quot;</span><span class="w"> </span><span class="ss">&quot;job2&quot;</span><span class="w"> </span><span class="ss">&quot;job3&quot;</span><span class="w">                     </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="n">Pop</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="nf">left</span><span class="w">                                           </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">LPOP</span><span class="w"> </span><span class="nl">queue</span><span class="p">:</span><span class="n">jobs</span><span class="w">  </span><span class="err">â†’</span><span class="w"> </span><span class="ss">&quot;job1&quot;</span><span class="w">                                 </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="n">Push</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="nf">left</span><span class="w"> </span><span class="p">(</span><span class="n">Stack</span><span class="w"> </span><span class="k">use</span><span class="p">)</span><span class="w">                                </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">LPUSH</span><span class="w"> </span><span class="nl">stack</span><span class="p">:</span><span class="n">items</span><span class="w"> </span><span class="ss">&quot;item1&quot;</span><span class="w">                                 </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">LPOP</span><span class="w"> </span><span class="nl">stack</span><span class="p">:</span><span class="n">items</span><span class="w">  </span><span class="err">â†’</span><span class="w"> </span><span class="ss">&quot;item1&quot;</span><span class="w">                               </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="k">Range</span><span class="w"> </span><span class="n">query</span><span class="w">                                             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">LRANGE</span><span class="w"> </span><span class="nl">queue</span><span class="p">:</span><span class="n">jobs</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w">  </span><span class="err">â†’</span><span class="w"> </span><span class="o">[</span><span class="n">&quot;job2&quot;, &quot;job3&quot;</span><span class="o">]</span><span class="w">                </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="n">Blocking</span><span class="w"> </span><span class="n">Pop</span><span class="w"> </span><span class="p">(</span><span class="k">for</span><span class="w"> </span><span class="n">job</span><span class="w"> </span><span class="n">queue</span><span class="p">)</span><span class="w">                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">BLPOP</span><span class="w"> </span><span class="nl">queue</span><span class="p">:</span><span class="n">jobs</span><span class="w"> </span><span class="mi">30</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="n">Wait</span><span class="w"> </span><span class="mi">30</span><span class="w"> </span><span class="n">seconds</span><span class="w">                    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="k">Structure</span><span class="err">:</span><span class="w">                                                </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="nl">queue</span><span class="p">:</span><span class="n">jobs</span><span class="w">                                      </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="o">[</span><span class="n">job2</span><span class="o">]</span><span class="w"> </span><span class="err">â†â†’</span><span class="w"> </span><span class="o">[</span><span class="n">job3</span><span class="o">]</span><span class="w">                              </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">    </span><span class="n">Head</span><span class="w">        </span><span class="n">Tail</span><span class="w">                             </span><span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="k">Use</span><span class="w"> </span><span class="nl">cases</span><span class="p">:</span><span class="w">                                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Job</span><span class="w"> </span><span class="n">Queue</span><span class="w">                                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Recent</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="p">(</span><span class="n">recently</span><span class="w"> </span><span class="n">viewed</span><span class="w"> </span><span class="n">products</span><span class="p">)</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Timeline</span><span class="w">                                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="24-set">2.4 Set<a class="header-link" href="#24-set" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Set                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Unordered collection of unique strings                         â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  # Add members                                             â”‚ â”‚
â”‚  â”‚  SADD user:123:followers &quot;user:456&quot; &quot;user:789&quot;             â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  # Check membership                                        â”‚ â”‚
â”‚  â”‚  SISMEMBER user:123:followers &quot;user:456&quot;  â†’ 1              â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  # Get all members                                         â”‚ â”‚
â”‚  â”‚  SMEMBERS user:123:followers  â†’ {&quot;user:456&quot;, &quot;user:789&quot;}   â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  # Set operations                                          â”‚ â”‚
â”‚  â”‚  SINTER user:123:followers user:456:followers  # Intersectionâ”‚ â”‚
â”‚  â”‚  SUNION user:123:followers user:456:followers  # Union     â”‚ â”‚
â”‚  â”‚  SDIFF user:123:followers user:456:followers   # Differenceâ”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  # Count                                                   â”‚ â”‚
â”‚  â”‚  SCARD user:123:followers  â†’ 2                             â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  Structure:                                                â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ â”‚
â”‚  â”‚  â”‚ user:123:followers                              â”‚       â”‚ â”‚
â”‚  â”‚  â”‚   { &quot;user:456&quot;, &quot;user:789&quot; }                    â”‚       â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚  Use cases:                                                      â”‚
â”‚  â€¢ Tags                                                          â”‚
â”‚  â€¢ Followers/Following                                           â”‚
â”‚  â€¢ Likes user list                                               â”‚
â”‚  â€¢ Unique visitors                                               â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="25-sorted-set-zset">2.5 Sorted Set (ZSet)<a class="header-link" href="#25-sorted-set-zset" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Sorted Set                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Set sorted by score                                             â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  # Add with scores                                         â”‚ â”‚
â”‚  â”‚  ZADD leaderboard 100 &quot;user:123&quot; 85 &quot;user:456&quot; 92 &quot;user:789&quot;â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  # Range query (ascending)                                 â”‚ â”‚
â”‚  â”‚  ZRANGE leaderboard 0 2 WITHSCORES                         â”‚ â”‚
â”‚  â”‚  â†’ [(&quot;user:456&quot;, 85), (&quot;user:789&quot;, 92), (&quot;user:123&quot;, 100)] â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  # Range query (descending) - Top 3                        â”‚ â”‚
â”‚  â”‚  ZREVRANGE leaderboard 0 2 WITHSCORES                      â”‚ â”‚
â”‚  â”‚  â†’ [(&quot;user:123&quot;, 100), (&quot;user:789&quot;, 92), (&quot;user:456&quot;, 85)] â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  # Score range query                                       â”‚ â”‚
â”‚  â”‚  ZRANGEBYSCORE leaderboard 80 95 WITHSCORES                â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  # Rank query                                              â”‚ â”‚
â”‚  â”‚  ZRANK leaderboard &quot;user:123&quot;  â†’ 2 (0-based)               â”‚ â”‚
â”‚  â”‚  ZREVRANK leaderboard &quot;user:123&quot;  â†’ 0 (1st place)          â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  # Increment score                                         â”‚ â”‚
â”‚  â”‚  ZINCRBY leaderboard 10 &quot;user:456&quot;  â†’ 95                   â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  Structure:                                                â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ â”‚
â”‚  â”‚  â”‚ leaderboard                                     â”‚       â”‚ â”‚
â”‚  â”‚  â”‚   score: 85  â†’ &quot;user:456&quot;                       â”‚       â”‚ â”‚
â”‚  â”‚  â”‚   score: 92  â†’ &quot;user:789&quot;                       â”‚       â”‚ â”‚
â”‚  â”‚  â”‚   score: 100 â†’ &quot;user:123&quot;                       â”‚       â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚  Use cases:                                                      â”‚
â”‚  â€¢ Leaderboard                                                   â”‚
â”‚  â€¢ Priority queue                                                â”‚
â”‚  â€¢ Timeline sorted by time (score = timestamp)                  â”‚
â”‚  â€¢ Rate Limiting (sliding window)                               â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="26-data-structure-summary">2.6 Data Structure Summary<a class="header-link" href="#26-data-structure-summary" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Type</th>
<th>Structure</th>
<th>Time Complexity</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td>String</td>
<td>Key-Value</td>
<td>O(1)</td>
<td>Cache, session, counter</td>
</tr>
<tr>
<td>Hash</td>
<td>Field-Value Map</td>
<td>O(1)</td>
<td>Objects, user profiles</td>
</tr>
<tr>
<td>List</td>
<td>Linked List</td>
<td>O(1) Push/Pop</td>
<td>Queue, recent items</td>
</tr>
<tr>
<td>Set</td>
<td>HashSet</td>
<td>O(1)</td>
<td>Tags, unique visitors</td>
</tr>
<tr>
<td>Sorted Set</td>
<td>Skip List</td>
<td>O(log N)</td>
<td>Leaderboard, ranking</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="3-redis-cluster-and-sentinel">3. Redis Cluster and Sentinel<a class="header-link" href="#3-redis-cluster-and-sentinel" title="Permanent link">&para;</a></h2>
<h3 id="31-redis-sentinel">3.1 Redis Sentinel<a class="header-link" href="#31-redis-sentinel" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                    </span><span class="nx">Redis</span><span class="w"> </span><span class="nx">Sentinel</span><span class="w">                                </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="s">&quot;Monitoring and automatic failover for Redis high availability&quot;</span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span><span class="w">         </span><span class="nx">Sentinels</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">     </span><span class="err">â”‚</span><span class="w">             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="nx">Sent</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="nx">Sent</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span><span class="nx">Sent</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="err">â”‚</span><span class="w">     </span><span class="err">â”‚</span><span class="w">             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”¬â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â””â”€â”€â”€â”¬â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â””â”€â”€â”€â”¬â”€â”€â”€â”˜</span><span class="w">     </span><span class="err">â”‚</span><span class="w">             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span><span class="w">      </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span><span class="w">             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">               </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span><span class="w">         </span><span class="err">â”‚</span><span class="w">                        </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”</span><span class="w">                 </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span><span class="w">                                 </span><span class="err">â”‚</span><span class="w">                 </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â–¼</span><span class="w">                                 </span><span class="err">â–¼</span><span class="w">                 </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">                      </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Master</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â•â•â•â•</span><span class="nx">replication</span><span class="err">â•â•â–¶</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="nx">Replica</span><span class="w"> </span><span class="err">â”‚</span><span class="w">             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">  </span><span class="p">(</span><span class="nx">R</span><span class="o">/</span><span class="nx">W</span><span class="p">)</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                      </span><span class="err">â”‚</span><span class="w">  </span><span class="p">(</span><span class="nx">R</span><span class="o">/</span><span class="nx">O</span><span class="p">)</span><span class="w">  </span><span class="err">â”‚</span><span class="w">             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">                      </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nx">Roles</span><span class="p">:</span><span class="w">                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="nx">Monitoring</span><span class="p">:</span><span class="w"> </span><span class="nx">Watch</span><span class="w"> </span><span class="nx">Master</span><span class="o">/</span><span class="nx">Replica</span><span class="w"> </span><span class="nx">status</span><span class="w">                </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="nx">Notification</span><span class="p">:</span><span class="w"> </span><span class="nx">Alert</span><span class="w"> </span><span class="nx">admins</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">failure</span><span class="w">                  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="nx">Automatic</span><span class="w"> </span><span class="nx">failover</span><span class="p">:</span><span class="w"> </span><span class="nx">Promote</span><span class="w"> </span><span class="nx">Replica</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">Master</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">failure</span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">4</span><span class="p">.</span><span class="w"> </span><span class="nx">Configuration</span><span class="w"> </span><span class="nx">provider</span><span class="p">:</span><span class="w"> </span><span class="nx">Provide</span><span class="w"> </span><span class="nx">current</span><span class="w"> </span><span class="nx">Master</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">     </span><span class="nx">to</span><span class="w"> </span><span class="nx">clients</span><span class="w">                                             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nx">Failover</span><span class="w"> </span><span class="nx">process</span><span class="p">:</span><span class="w">                                               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="nx">Detect</span><span class="w"> </span><span class="nx">Master</span><span class="w"> </span><span class="nx">failure</span><span class="w"> </span><span class="p">(</span><span class="nx">majority</span><span class="w"> </span><span class="nx">Sentinel</span><span class="w"> </span><span class="nx">agreement</span><span class="p">)</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="nx">Elect</span><span class="w"> </span><span class="nx">one</span><span class="w"> </span><span class="nx">Sentinel</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nx">leader</span><span class="w">                           </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="nx">Leader</span><span class="w"> </span><span class="nx">promotes</span><span class="w"> </span><span class="nx">one</span><span class="w"> </span><span class="nx">Replica</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">Master</span><span class="w">                  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">4</span><span class="p">.</span><span class="w"> </span><span class="nx">Other</span><span class="w"> </span><span class="nx">Replicas</span><span class="w"> </span><span class="nx">connect</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">new</span><span class="w"> </span><span class="nx">Master</span><span class="w">                   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">5</span><span class="p">.</span><span class="w"> </span><span class="nx">Notify</span><span class="w"> </span><span class="nx">clients</span><span class="w"> </span><span class="nx">of</span><span class="w"> </span><span class="nx">new</span><span class="w"> </span><span class="nx">Master</span><span class="w"> </span><span class="nx">address</span><span class="w">                   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nx">Limitations</span><span class="p">:</span><span class="w">                                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">No</span><span class="w"> </span><span class="nx">horizontal</span><span class="w"> </span><span class="nx">scaling</span><span class="w"> </span><span class="p">(</span><span class="nx">single</span><span class="w"> </span><span class="nx">Master</span><span class="p">)</span><span class="w">                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Writes</span><span class="w"> </span><span class="nx">only</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">Master</span><span class="w">                                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="32-redis-cluster">3.2 Redis Cluster<a class="header-link" href="#32-redis-cluster" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">                    </span><span class="nv">Redis</span><span class="w"> </span><span class="nv">Cluster</span><span class="w">                                 </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                                  </span>â”‚
â”‚<span class="w">  </span><span class="s2">&quot;Redis horizontal scaling and automatic sharding&quot;</span><span class="w">              </span>â”‚
â”‚<span class="w">                                                                  </span>â”‚
â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="mi">16384</span><span class="w"> </span><span class="nv">Hash</span><span class="w"> </span><span class="nv">Slots</span><span class="w"> </span><span class="nv">distribution</span>:<span class="w">                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w"> </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w"> </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">          </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â”‚<span class="w">   </span><span class="nv">Node</span><span class="w"> </span><span class="nv">A</span><span class="w">    </span>â”‚<span class="w"> </span>â”‚<span class="w">   </span><span class="nv">Node</span><span class="w"> </span><span class="nv">B</span><span class="w">    </span>â”‚<span class="w"> </span>â”‚<span class="w">   </span><span class="nv">Node</span><span class="w"> </span><span class="nv">C</span><span class="w">    </span>â”‚<span class="w">          </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â”‚<span class="w"> </span><span class="nv">Master</span><span class="w">      </span>â”‚<span class="w"> </span>â”‚<span class="w"> </span><span class="nv">Master</span><span class="w">      </span>â”‚<span class="w"> </span>â”‚<span class="w"> </span><span class="nv">Master</span><span class="w">      </span>â”‚<span class="w">          </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â”‚<span class="w"> </span><span class="nv">Slots</span>:<span class="w">      </span>â”‚<span class="w"> </span>â”‚<span class="w"> </span><span class="nv">Slots</span>:<span class="w">      </span>â”‚<span class="w"> </span>â”‚<span class="w"> </span><span class="nv">Slots</span>:<span class="w">      </span>â”‚<span class="w">          </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â”‚<span class="w"> </span><span class="mi">0</span><span class="o">-</span><span class="mi">5460</span><span class="w">      </span>â”‚<span class="w"> </span>â”‚<span class="w"> </span><span class="mi">5461</span><span class="o">-</span><span class="mi">10922</span><span class="w">  </span>â”‚<span class="w"> </span>â”‚<span class="w"> </span><span class="mi">10923</span><span class="o">-</span><span class="mi">16383</span><span class="w"> </span>â”‚<span class="w">          </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜<span class="w"> </span>â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜<span class="w"> </span>â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜<span class="w">          </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">         </span>â”‚<span class="w">               </span>â”‚<span class="w">               </span>â”‚<span class="w">                  </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">         </span>â–¼<span class="w">               </span>â–¼<span class="w">               </span>â–¼<span class="w">                  </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w"> </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w"> </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">          </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="nv">Replica</span><span class="w"> </span><span class="nv">A</span><span class="w">  </span>â”‚<span class="w"> </span>â”‚<span class="w">  </span><span class="nv">Replica</span><span class="w"> </span><span class="nv">B</span><span class="w">  </span>â”‚<span class="w"> </span>â”‚<span class="w">  </span><span class="nv">Replica</span><span class="w"> </span><span class="nv">C</span><span class="w">  </span>â”‚<span class="w">          </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w"> </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w"> </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">          </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w"> </span>â”‚
â”‚<span class="w">                                                                  </span>â”‚
â”‚<span class="w">  </span><span class="nv">Hash</span><span class="w"> </span><span class="nv">Slot</span><span class="w"> </span><span class="nv">calculation</span>:<span class="w">                                          </span>â”‚
â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="nv">slot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">CRC16</span><span class="ss">(</span><span class="nv">key</span><span class="ss">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">16384</span><span class="w">                                 </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="nv">Example</span>:<span class="w"> </span><span class="nv">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;user:123&quot;</span><span class="w">                                 </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">      </span><span class="k">CRC16</span><span class="ss">(</span><span class="s2">&quot;user:123&quot;</span><span class="ss">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12345</span><span class="w">                             </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">      </span><span class="nv">slot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12345</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">16384</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12345</span><span class="w"> </span>â†’<span class="w"> </span><span class="nv">Node</span><span class="w"> </span><span class="nv">C</span><span class="w">                 </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w"> </span>â”‚
â”‚<span class="w">                                                                  </span>â”‚
â”‚<span class="w">  </span><span class="nv">Hash</span><span class="w"> </span><span class="nv">Tag</span><span class="w"> </span><span class="ss">(</span><span class="nv">force</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">slot</span><span class="ss">)</span>:<span class="w">                                     </span>â”‚
â”‚<span class="w">  </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>#<span class="w"> </span>{<span class="nv">user</span>:<span class="mi">123</span>}<span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">hash</span><span class="w"> </span><span class="nv">target</span><span class="w">                               </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="nv">user</span>:{<span class="nv">user</span>:<span class="mi">123</span>}:<span class="nv">profile</span><span class="w">                                   </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="nv">user</span>:{<span class="nv">user</span>:<span class="mi">123</span>}:<span class="nv">settings</span><span class="w">                                  </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span><span class="nv">user</span>:{<span class="nv">user</span>:<span class="mi">123</span>}:<span class="nv">orders</span><span class="w">                                    </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â†’<span class="w"> </span><span class="nv">All</span><span class="w"> </span><span class="nv">stored</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">slot</span><span class="w">                                 </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">  </span>â†’<span class="w"> </span><span class="nv">Multi</span><span class="o">-</span><span class="nv">key</span><span class="w"> </span><span class="nv">operations</span><span class="w"> </span><span class="nv">possible</span><span class="w">                           </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â”‚<span class="w">                                                            </span>â”‚<span class="w"> </span>â”‚
â”‚<span class="w">  </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w"> </span>â”‚
â”‚<span class="w">                                                                  </span>â”‚
â”‚<span class="w">  </span><span class="nv">Features</span>:<span class="w">                                                       </span>â”‚
â”‚<span class="w">  </span>â€¢<span class="w"> </span><span class="nv">Horizontal</span><span class="w"> </span><span class="nv">scaling</span><span class="w"> </span><span class="ss">(</span><span class="nv">add</span><span class="w"> </span><span class="nv">nodes</span><span class="ss">)</span><span class="w">                               </span>â”‚
â”‚<span class="w">  </span>â€¢<span class="w"> </span><span class="nv">Automatic</span><span class="w"> </span><span class="nv">sharding</span><span class="w">                                            </span>â”‚
â”‚<span class="w">  </span>â€¢<span class="w"> </span><span class="nv">High</span><span class="w"> </span><span class="nv">availability</span><span class="w"> </span><span class="ss">(</span><span class="nv">auto</span><span class="w"> </span><span class="nv">Replica</span><span class="w"> </span><span class="nv">failover</span><span class="ss">)</span><span class="w">                    </span>â”‚
â”‚<span class="w">  </span>â€¢<span class="w"> </span><span class="nv">Some</span><span class="w"> </span><span class="nv">limitations</span>:<span class="w"> </span><span class="nv">Multi</span><span class="o">-</span><span class="nv">key</span><span class="w"> </span><span class="nv">ops</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">within</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">slot</span><span class="w">        </span>â”‚
â”‚<span class="w">                                                                  </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="33-sentinel-vs-cluster">3.3 Sentinel vs Cluster<a class="header-link" href="#33-sentinel-vs-cluster" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Item</th>
<th>Sentinel</th>
<th>Cluster</th>
</tr>
</thead>
<tbody>
<tr>
<td>Purpose</td>
<td>High availability</td>
<td>HA + Horizontal scaling</td>
</tr>
<tr>
<td>Sharding</td>
<td>None (single Master)</td>
<td>Auto sharding</td>
</tr>
<tr>
<td>Capacity</td>
<td>Single server memory</td>
<td>Distributed storage</td>
</tr>
<tr>
<td>Complexity</td>
<td>Low</td>
<td>High</td>
</tr>
<tr>
<td>Multi-key ops</td>
<td>Free</td>
<td>Hash Tag needed</td>
</tr>
<tr>
<td>Suitable for</td>
<td>Small-medium scale</td>
<td>Large scale</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="4-memcached-comparison">4. Memcached Comparison<a class="header-link" href="#4-memcached-comparison" title="Permanent link">&para;</a></h2>
<h3 id="41-redis-vs-memcached">4.1 Redis vs Memcached<a class="header-link" href="#41-redis-vs-memcached" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                  </span><span class="nx">Redis</span><span class="w"> </span><span class="nx">vs</span><span class="w"> </span><span class="nx">Memcached</span><span class="w">                              </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nx">Redis</span><span class="p">:</span><span class="w">                                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Various</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="nx">structures</span><span class="w"> </span><span class="p">(</span><span class="nx">String</span><span class="p">,</span><span class="w"> </span><span class="nx">Hash</span><span class="p">,</span><span class="w"> </span><span class="nx">List</span><span class="p">,</span><span class="w"> </span><span class="nx">Set</span><span class="p">,</span><span class="w"> </span><span class="nx">ZSet</span><span class="p">)</span><span class="w"> </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Persistence</span><span class="w"> </span><span class="nx">options</span><span class="w"> </span><span class="p">(</span><span class="nx">RDB</span><span class="p">,</span><span class="w"> </span><span class="nx">AOF</span><span class="p">)</span><span class="w">                          </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Replication</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="nx">cluster</span><span class="w"> </span><span class="nx">support</span><span class="w">                         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Pub</span><span class="o">/</span><span class="nx">Sub</span><span class="p">,</span><span class="w"> </span><span class="nx">Lua</span><span class="w"> </span><span class="nx">scripts</span><span class="w">                                    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Transactions</span><span class="w"> </span><span class="p">(</span><span class="nx">MULTI</span><span class="o">/</span><span class="nx">EXEC</span><span class="p">)</span><span class="w">                               </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Single</span><span class="o">-</span><span class="nx">threaded</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="w"> </span><span class="nx">loop</span><span class="p">)</span><span class="w">                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nx">Memcached</span><span class="p">:</span><span class="w">                                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Simple</span><span class="w"> </span><span class="nx">key</span><span class="o">-</span><span class="nx">value</span><span class="w"> </span><span class="nx">storage</span><span class="w"> </span><span class="p">(</span><span class="nx">String</span><span class="w"> </span><span class="nx">only</span><span class="p">)</span><span class="w">                  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">No</span><span class="w"> </span><span class="nx">persistence</span><span class="w"> </span><span class="p">(</span><span class="nx">pure</span><span class="w"> </span><span class="nx">cache</span><span class="p">)</span><span class="w">                             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Multi</span><span class="o">-</span><span class="nx">threaded</span><span class="w"> </span><span class="p">(</span><span class="nx">utilizes</span><span class="w"> </span><span class="nx">multi</span><span class="o">-</span><span class="nx">core</span><span class="p">)</span><span class="w">                    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Simple</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="nx">lightweight</span><span class="w">                                  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">LRU</span><span class="w"> </span><span class="nx">cache</span><span class="w"> </span><span class="nx">policy</span><span class="w">                                        </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Slab</span><span class="w"> </span><span class="nx">allocator</span><span class="w"> </span><span class="p">(</span><span class="nx">memory</span><span class="w"> </span><span class="nx">efficient</span><span class="p">)</span><span class="w">                       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="42-comparison-table">4.2 Comparison Table<a class="header-link" href="#42-comparison-table" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Item</th>
<th>Redis</th>
<th>Memcached</th>
</tr>
</thead>
<tbody>
<tr>
<td>Data structures</td>
<td>Various</td>
<td>String only</td>
</tr>
<tr>
<td>Persistence</td>
<td>RDB, AOF</td>
<td>None</td>
</tr>
<tr>
<td>Replication</td>
<td>Supported</td>
<td>None</td>
</tr>
<tr>
<td>Cluster</td>
<td>Supported</td>
<td>Client sharding</td>
</tr>
<tr>
<td>Threading</td>
<td>Single (6.0+ multi)</td>
<td>Multi</td>
</tr>
<tr>
<td>Memory efficiency</td>
<td>Good</td>
<td>Very good</td>
</tr>
<tr>
<td>Max value size</td>
<td>512MB</td>
<td>1MB</td>
</tr>
<tr>
<td>Use cases</td>
<td>General purpose, session, queue</td>
<td>Simple cache</td>
</tr>
</tbody>
</table>
<h3 id="43-selection-criteria">4.3 Selection Criteria<a class="header-link" href="#43-selection-criteria" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                     </span><span class="nx">Selection</span><span class="w"> </span><span class="nx">Guide</span><span class="w">                              </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nx">Choose</span><span class="w"> </span><span class="nx">Redis</span><span class="w"> </span><span class="nx">when</span><span class="p">:</span><span class="w">                                              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Need</span><span class="w"> </span><span class="nx">complex</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="nx">structures</span><span class="w"> </span><span class="p">(</span><span class="nx">List</span><span class="p">,</span><span class="w"> </span><span class="nx">Set</span><span class="p">,</span><span class="w"> </span><span class="nx">Sorted</span><span class="w"> </span><span class="nx">Set</span><span class="p">)</span><span class="w">     </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Need</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="nx">persistence</span><span class="w">                                    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Need</span><span class="w"> </span><span class="nx">Pub</span><span class="o">/</span><span class="nx">Sub</span><span class="p">,</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="nx">queue</span><span class="w"> </span><span class="nx">features</span><span class="w">                     </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Need</span><span class="w"> </span><span class="nx">replication</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="nx">high</span><span class="w"> </span><span class="nx">availability</span><span class="w">                   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Session</span><span class="w"> </span><span class="nx">storage</span><span class="w">                                          </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Leaderboard</span><span class="p">,</span><span class="w"> </span><span class="nx">Rate</span><span class="w"> </span><span class="nx">Limiting</span><span class="w">                               </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nx">Choose</span><span class="w"> </span><span class="nx">Memcached</span><span class="w"> </span><span class="nx">when</span><span class="p">:</span><span class="w">                                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Only</span><span class="w"> </span><span class="nx">need</span><span class="w"> </span><span class="nx">simple</span><span class="w"> </span><span class="nx">key</span><span class="o">-</span><span class="nx">value</span><span class="w"> </span><span class="nx">cache</span><span class="w">                         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Multi</span><span class="o">-</span><span class="nx">core</span><span class="w"> </span><span class="nx">utilization</span><span class="w"> </span><span class="nx">important</span><span class="w">                         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Memory</span><span class="w"> </span><span class="nx">efficiency</span><span class="w"> </span><span class="nx">critical</span><span class="w">                               </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Persistence</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">needed</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â€¢</span><span class="w"> </span><span class="nx">Very</span><span class="w"> </span><span class="nx">high</span><span class="w"> </span><span class="nx">throughput</span><span class="w"> </span><span class="nx">needed</span><span class="w">                              </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nx">Most</span><span class="w"> </span><span class="nx">cases</span><span class="w"> </span><span class="nx">recommend</span><span class="w"> </span><span class="nx">Redis</span><span class="w"> </span><span class="p">(</span><span class="nx">feature</span><span class="w"> </span><span class="nx">diversity</span><span class="p">,</span><span class="w"> </span><span class="nx">ecosystem</span><span class="p">)</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="5-consistent-hashing">5. Consistent Hashing<a class="header-link" href="#5-consistent-hashing" title="Permanent link">&para;</a></h2>
<h3 id="51-traditional-hashing-problem">5.1 Traditional Hashing Problem<a class="header-link" href="#51-traditional-hashing-problem" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                   </span><span class="n">Traditional</span><span class="w"> </span><span class="n">Hashing</span><span class="w"> </span><span class="n">Problem</span><span class="w">                    </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Modular</span><span class="w"> </span><span class="n">hashing</span><span class="p">:</span><span class="w"> </span><span class="nb">hash</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">N</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="mi">3</span><span class="w"> </span><span class="n">servers</span><span class="p">:</span><span class="w">                                                </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nb">hash</span><span class="p">(</span><span class="s2">&quot;user:1&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Server</span><span class="w"> </span><span class="mi">1</span><span class="w">                         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nb">hash</span><span class="p">(</span><span class="s2">&quot;user:2&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Server</span><span class="w"> </span><span class="mi">2</span><span class="w">                         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nb">hash</span><span class="p">(</span><span class="s2">&quot;user:3&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Server</span><span class="w"> </span><span class="mi">0</span><span class="w">                         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Add</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="p">(</span><span class="mi">4</span><span class="w"> </span><span class="n">total</span><span class="p">):</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nb">hash</span><span class="p">(</span><span class="s2">&quot;user:1&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Server</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="p">(</span><span class="n">changed</span><span class="o">!</span><span class="p">)</span><span class="w">             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nb">hash</span><span class="p">(</span><span class="s2">&quot;user:2&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Server</span><span class="w"> </span><span class="mi">2</span><span class="w">                         </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="nb">hash</span><span class="p">(</span><span class="s2">&quot;user:3&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Server</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="p">(</span><span class="n">changed</span><span class="o">!</span><span class="p">)</span><span class="w">             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Problem</span><span class="p">:</span><span class="w"> </span><span class="n">Most</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="n">redistributed</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">add</span><span class="o">/</span><span class="n">remove</span><span class="o">!</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">        </span><span class="err">â†’</span><span class="w"> </span><span class="n">Cache</span><span class="w"> </span><span class="n">miss</span><span class="w"> </span><span class="n">surge</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Database</span><span class="w"> </span><span class="nb">load</span><span class="w">                        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">N</span><span class="w"> </span><span class="n">servers</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">N</span><span class="o">+</span><span class="mi">1</span><span class="w"> </span><span class="n">servers</span><span class="p">:</span><span class="w"> </span><span class="n">N</span><span class="o">/</span><span class="p">(</span><span class="n">N</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="n">redistributed</span><span class="w">       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Example</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="mi">101</span><span class="w"> </span><span class="n">servers</span><span class="p">:</span><span class="w"> </span><span class="o">~</span><span class="mi">99</span><span class="o">%</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="n">redistributed</span><span class="o">!</span><span class="w">      </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="52-consistent-hashing-principle">5.2 Consistent Hashing Principle<a class="header-link" href="#52-consistent-hashing-principle" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Consistent Hashing                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  &quot;Minimize key redistribution on server add/remove&quot;             â”‚
â”‚                                                                  â”‚
â”‚  Hash Ring:                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚                         0                                  â”‚ â”‚
â”‚  â”‚                         â”‚                                  â”‚ â”‚
â”‚  â”‚                    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                             â”‚ â”‚
â”‚  â”‚                    â”‚         â”‚                             â”‚ â”‚
â”‚  â”‚           Node A â”€â”€â—         â—â”€â”€ key1                      â”‚ â”‚
â”‚  â”‚                   /           \                            â”‚ â”‚
â”‚  â”‚                  /             \                           â”‚ â”‚
â”‚  â”‚       key2 â—â”€â”€â”€â—                 â—â”€â”€â”€ Node B               â”‚ â”‚
â”‚  â”‚              Node C               \                        â”‚ â”‚
â”‚  â”‚                  \                 \                       â”‚ â”‚
â”‚  â”‚                   \                 â—â”€â”€ key3               â”‚ â”‚
â”‚  â”‚                    \               /                       â”‚ â”‚
â”‚  â”‚                     â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—                        â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  Key â†’ Assigned to first node clockwise                   â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  key1 â†’ Node B                                             â”‚ â”‚
â”‚  â”‚  key2 â†’ Node C                                             â”‚ â”‚
â”‚  â”‚  key3 â†’ Node A                                             â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚  When adding node:                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚           Node A â”€â”€â—                                       â”‚ â”‚
â”‚  â”‚                   /                                        â”‚ â”‚
â”‚  â”‚       key2 â—â”€â”€â”€â—                    â—â”€â”€ Node D (newly added)â”‚ â”‚
â”‚  â”‚              Node C                 â”‚                      â”‚ â”‚
â”‚  â”‚                                     â—â”€â”€ key1 (moved to D)  â”‚ â”‚
â”‚  â”‚                                     â”‚                      â”‚ â”‚
â”‚  â”‚                    â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”˜                      â”‚ â”‚
â”‚  â”‚                         Node B                             â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  Only key1 moved: Node B â†’ Node D                          â”‚ â”‚
â”‚  â”‚  Others stay!                                              â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚  Theory: Only K/N keys redistributed (K=total keys, N=nodes)    â”‚
â”‚  Example: 100 nodes â†’ 101: Only ~1% redistributed!              â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="53-virtual-nodes">5.3 Virtual Nodes<a class="header-link" href="#53-virtual-nodes" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                    </span><span class="n">Virtual</span><span class="w"> </span><span class="n">Nodes</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nl">Problem</span><span class="p">:</span><span class="w"> </span><span class="n">Uneven</span><span class="w"> </span><span class="n">distribution</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">few</span><span class="w"> </span><span class="n">nodes</span><span class="w">                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="k">With</span><span class="w"> </span><span class="k">only</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nl">nodes</span><span class="p">:</span><span class="w">                                        </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">           </span><span class="n">Node</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="err">â”€â”€â—</span><span class="w">                                       </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                   </span><span class="o">/</span><span class="w">   </span><span class="err">\</span><span class="w">                                    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                  </span><span class="o">/</span><span class="w">     </span><span class="err">\</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                 </span><span class="o">/</span><span class="w">       </span><span class="err">\</span><span class="w">                                  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                </span><span class="o">/</span><span class="w">    </span><span class="n">Many</span><span class="w"> </span><span class="n">keys</span><span class="w">                              </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">               </span><span class="o">/</span><span class="w">     </span><span class="k">go</span><span class="w"> </span><span class="k">to</span><span class="w">                                  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">              </span><span class="err">â—â”€â”€â”€â”€â”€</span><span class="w"> </span><span class="n">Node</span><span class="w"> </span><span class="n">B</span><span class="w">                                 </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â†’</span><span class="w"> </span><span class="n">Uneven</span><span class="err">!</span><span class="w">                                                 </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nl">Solution</span><span class="p">:</span><span class="w"> </span><span class="k">Use</span><span class="w"> </span><span class="n">virtual</span><span class="w"> </span><span class="n">nodes</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Represent</span><span class="w"> </span><span class="k">each</span><span class="w"> </span><span class="n">physical</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="n">virtual</span><span class="w"> </span><span class="n">nodes</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Node</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">A</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">A</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">A</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">A</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="w">                          </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Node</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">B</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">B</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">B</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">B</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="w">                          </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">            </span><span class="n">A</span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="err">â—</span><span class="w">                                           </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">               </span><span class="o">/</span><span class="w">  </span><span class="n">B</span><span class="o">-</span><span class="mi">2</span><span class="w"> </span><span class="err">â—</span><span class="w">                                     </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">              </span><span class="o">/</span><span class="w">       </span><span class="o">/</span><span class="w"> </span><span class="n">A</span><span class="o">-</span><span class="mi">3</span><span class="w"> </span><span class="err">â—</span><span class="w">                               </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">         </span><span class="n">B</span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="err">â—</span><span class="w">       </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">                                </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                    </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">                                 </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">              </span><span class="n">A</span><span class="o">-</span><span class="mi">2</span><span class="w"> </span><span class="err">â—â”€â”€â”€â”€â”€â—â”€â”€</span><span class="w"> </span><span class="n">B</span><span class="o">-</span><span class="mi">3</span><span class="w">                             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â†’</span><span class="w"> </span><span class="n">More</span><span class="w"> </span><span class="n">even</span><span class="w"> </span><span class="n">distribution</span><span class="err">!</span><span class="w">                                 </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                            </span><span class="err">â”‚</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w"> </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Virtual</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="nf">count</span><span class="err">:</span><span class="w">                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">More</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">even</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">higher</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="k">usage</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Typically</span><span class="w"> </span><span class="mi">100</span><span class="o">-</span><span class="mi">200</span><span class="w"> </span><span class="n">virtual</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">physical</span><span class="w"> </span><span class="n">node</span><span class="w">            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                                  </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="6-practice-problems">6. Practice Problems<a class="header-link" href="#6-practice-problems" title="Permanent link">&para;</a></h2>
<h3 id="problem-1-redis-data-structure-selection">Problem 1: Redis Data Structure Selection<a class="header-link" href="#problem-1-redis-data-structure-selection" title="Permanent link">&para;</a></h3>
<p>Choose the appropriate Redis data structure for the following requirements:</p>
<p>a) Store user session (ID, name, permissions, etc.)
b) Real-time game leaderboard
c) Store 10 recently viewed products
d) List of posts user liked
e) Chat room message queue</p>
<h3 id="problem-2-sentinel-vs-cluster">Problem 2: Sentinel vs Cluster<a class="header-link" href="#problem-2-sentinel-vs-cluster" title="Permanent link">&para;</a></h3>
<p>Choose between Sentinel and Cluster for the following scenarios:</p>
<p>a) 10GB data, high availability needed
b) 1TB data, horizontal scaling needed
c) Service with many complex transactions
d) Simple cache, 1 million requests per second</p>
<h3 id="problem-3-consistent-hashing">Problem 3: Consistent Hashing<a class="header-link" href="#problem-3-consistent-hashing" title="Permanent link">&para;</a></h3>
<p>With 4 cache servers, when adding 1 server:
a) What % of keys redistributed with traditional hashing?
b) What % of keys redistributed with consistent hashing?</p>
<h3 id="problem-4-redis-design">Problem 4: Redis Design<a class="header-link" href="#problem-4-redis-design" title="Permanent link">&para;</a></h3>
<p>Design a social media follow feature using Redis.</p>
<p>Requirements:
- User A follows B
- View A's following list
- View B's follower list
- Find common following between A and B</p>
<hr />
<h2 id="answers">Answers<a class="header-link" href="#answers" title="Permanent link">&para;</a></h2>
<h3 id="problem-1-answer">Problem 1 Answer<a class="header-link" href="#problem-1-answer" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>a) User session: Hash
   HSET session:abc123 user_id 123 name &quot;John&quot; role &quot;admin&quot;

b) Leaderboard: Sorted Set
   ZADD leaderboard 1000 &quot;user:123&quot; 950 &quot;user:456&quot;

c) Recently viewed: List (with size limit)
   LPUSH user:123:recent &quot;product:789&quot;
   LTRIM user:123:recent 0 9  # Keep only 10

d) Liked posts: Set
   SADD user:123:likes &quot;post:456&quot; &quot;post:789&quot;

e) Chat message queue: List
   RPUSH chat:room1 &quot;{message...}&quot;
   BLPOP chat:room1 0  # Consumer waits
</code></pre></div>

<h3 id="problem-2-answer">Problem 2 Answer<a class="header-link" href="#problem-2-answer" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="mi">10</span><span class="n">GB</span><span class="p">,</span><span class="w"> </span><span class="n">HA</span><span class="p">:</span><span class="w"> </span><span class="n">Sentinel</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Data</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">fits</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">server</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Sentinel</span><span class="w"> </span><span class="n">provides</span><span class="w"> </span><span class="n">HA</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Simple</span><span class="w"> </span><span class="n">configuration</span>

<span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="mi">1</span><span class="n">TB</span><span class="p">,</span><span class="w"> </span><span class="n">horizontal</span><span class="w"> </span><span class="n">scaling</span><span class="p">:</span><span class="w"> </span><span class="n">Cluster</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Large</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">needs</span><span class="w"> </span><span class="n">distributed</span><span class="w"> </span><span class="n">storage</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Horizontal</span><span class="w"> </span><span class="n">scaling</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">throughput</span>

<span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="n">Complex</span><span class="w"> </span><span class="n">transactions</span><span class="p">:</span><span class="w"> </span><span class="n">Sentinel</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Cluster</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">multi</span><span class="o">-</span><span class="n">key</span><span class="w"> </span><span class="n">transaction</span><span class="w"> </span><span class="n">limitations</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Single</span><span class="w"> </span><span class="n">Master</span><span class="w"> </span><span class="n">easier</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">transactions</span>

<span class="n">d</span><span class="p">)</span><span class="w"> </span><span class="n">Simple</span><span class="w"> </span><span class="n">cache</span><span class="p">,</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">throughput</span><span class="p">:</span><span class="w"> </span><span class="n">Cluster</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">Memcached</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Cluster</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nb">load</span><span class="w"> </span><span class="n">distribution</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Memcached</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">viable</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">simple</span><span class="w"> </span><span class="n">cache</span>
</code></pre></div>

<h3 id="problem-3-answer">Problem 3 Answer<a class="header-link" href="#problem-3-answer" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>a) Traditional hashing: ~80%
   N/(N+1) = 4/5 = 80% keys redistributed

b) Consistent hashing: ~20%
   K/N = 1/5 = 20% keys only
   (keys in new node&#39;s range)
</code></pre></div>

<h3 id="problem-4-answer">Problem 4 Answer<a class="header-link" href="#problem-4-answer" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>#<span class="w"> </span><span class="nv">Follow</span><span class="w"> </span><span class="nv">relationship</span>
#<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">follows</span><span class="w"> </span><span class="nv">B</span>
<span class="nv">SADD</span><span class="w"> </span><span class="nv">user</span>:<span class="nv">A</span>:<span class="nv">following</span><span class="w"> </span><span class="s2">&quot;B&quot;</span>
<span class="nv">SADD</span><span class="w"> </span><span class="nv">user</span>:<span class="nv">B</span>:<span class="nv">followers</span><span class="w"> </span><span class="s2">&quot;A&quot;</span>

#<span class="w"> </span><span class="nv">A</span><span class="err">&#39;s following list</span>
<span class="err">SMEMBERS user:A:following</span>

#<span class="w"> </span><span class="nv">B</span><span class="err">&#39;s follower list</span>
<span class="err">SMEMBERS user:B:followers</span>

<span class="err"># Common following between A and B</span>
<span class="err">SINTER user:A:following user:B:following</span>

<span class="err"># Follower count</span>
<span class="err">SCARD user:B:followers</span>

<span class="err"># Check if following</span>
<span class="err">SISMEMBER user:A:following &quot;B&quot;</span>

<span class="err"># Unfollow</span>
<span class="err">SREM user:A:following &quot;B&quot;</span>
<span class="err">SREM user:B:followers &quot;A&quot;</span>
</code></pre></div>

<hr />
<h2 id="7-next-steps">7. Next Steps<a class="header-link" href="#7-next-steps" title="Permanent link">&para;</a></h2>
<p>If you've understood distributed cache, learn about database scaling next.</p>
<h3 id="next-lesson">Next Lesson<a class="header-link" href="#next-lesson" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="./08_Database_Scaling.md">08_Database_Scaling.md</a></li>
</ul>
<h3 id="related-lessons">Related Lessons<a class="header-link" href="#related-lessons" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="./06_Caching_Strategies.md">06_Caching_Strategies.md</a> - Caching patterns</li>
<li><a href="./09_Database_Replication.md">09_Database_Replication.md</a> - Replication strategies</li>
</ul>
<h3 id="recommended-practice">Recommended Practice<a class="header-link" href="#recommended-practice" title="Permanent link">&para;</a></h3>
<ol>
<li>Install Redis and practice data structures</li>
<li>Configure Redis Sentinel</li>
<li>Implement consistent hashing yourself</li>
</ol>
<hr />
<h2 id="8-references">8. References<a class="header-link" href="#8-references" title="Permanent link">&para;</a></h2>
<h3 id="official-documentation">Official Documentation<a class="header-link" href="#official-documentation" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://redis.io/documentation">Redis Documentation</a></li>
<li><a href="https://github.com/memcached/memcached/wiki">Memcached Wiki</a></li>
</ul>
<h3 id="tools">Tools<a class="header-link" href="#tools" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://github.com/joeferner/redis-commander">Redis Commander</a> - GUI</li>
<li><a href="https://redis.com/redis-enterprise/redis-insight/">RedisInsight</a> - Official GUI</li>
</ul>
<h3 id="papers">Papers<a class="header-link" href="#papers" title="Permanent link">&para;</a></h3>
<ul>
<li>"Consistent Hashing and Random Trees" - Karger et al.</li>
</ul>
<hr />
<p><strong>Document Information</strong>
- Last Modified: 2024
- Difficulty: â­â­â­
- Estimated Learning Time: 2-3 hours</p>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/en/System_Design/06_Caching_Strategies.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Caching Strategies</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/en/System_Design/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/en/System_Design/08_Database_Scaling.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Database Scaling</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">â†‘</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'en';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}