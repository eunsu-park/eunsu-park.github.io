<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>비동기 JavaScript 예제</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 { text-align: center; color: #333; }
        h2 { color: #2c3e50; border-bottom: 2px solid #e74c3c; padding-bottom: 10px; }
        .section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        button {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #c0392b; }
        button:disabled { background: #bdc3c7; cursor: not-allowed; }
        .output {
            background: #2c3e50;
            color: #2ecc71;
            padding: 15px;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
            min-height: 100px;
            max-height: 300px;
            overflow-y: auto;
        }
        pre {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
        }
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #e74c3c;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
            vertical-align: middle;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .user-card {
            display: inline-block;
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin: 10px;
            width: 200px;
            text-align: center;
        }
        .user-card img {
            width: 80px;
            height: 80px;
            border-radius: 50%;
        }
        .user-card h4 { margin: 10px 0 5px; }
        .user-card p { color: #666; font-size: 0.9em; margin: 0; }
    </style>
</head>
<body>
    <h1>비동기 JavaScript 예제</h1>

    <!-- 1. 콜백 함수 -->
    <div class="section">
        <h2>1. 콜백 함수</h2>
        <button onclick="runCallback()">콜백 실행</button>
        <button onclick="runCallbackHell()">콜백 지옥 예시</button>
        <div class="output" id="callbackOutput">결과가 여기에 표시됩니다.</div>
        <pre>
// 콜백 패턴
function fetchData(callback) {
    setTimeout(() => {
        callback("데이터 로드 완료");
    }, 1000);
}

fetchData((result) => {
    console.log(result);
});
        </pre>
    </div>

    <!-- 2. Promise -->
    <div class="section">
        <h2>2. Promise</h2>
        <button onclick="runPromise()">Promise 실행</button>
        <button onclick="runPromiseChain()">Promise 체이닝</button>
        <button onclick="runPromiseError()">에러 처리</button>
        <div class="output" id="promiseOutput">결과가 여기에 표시됩니다.</div>
        <pre>
// Promise 생성
const promise = new Promise((resolve, reject) => {
    setTimeout(() => {
        resolve("성공!");
        // reject(new Error("실패!"));
    }, 1000);
});

// Promise 사용
promise
    .then(result => console.log(result))
    .catch(error => console.error(error))
    .finally(() => console.log("완료"));
        </pre>
    </div>

    <!-- 3. async/await -->
    <div class="section">
        <h2>3. async/await</h2>
        <button onclick="runAsyncAwait()">async/await 실행</button>
        <button onclick="runAsyncError()">에러 처리</button>
        <div class="output" id="asyncOutput">결과가 여기에 표시됩니다.</div>
        <pre>
async function fetchData() {
    try {
        const response = await fetch(url);
        const data = await response.json();
        return data;
    } catch (error) {
        console.error(error);
    }
}
        </pre>
    </div>

    <!-- 4. Promise.all, Promise.race -->
    <div class="section">
        <h2>4. Promise.all, Promise.race</h2>
        <button onclick="runPromiseAll()">Promise.all</button>
        <button onclick="runPromiseRace()">Promise.race</button>
        <button onclick="runPromiseAllSettled()">Promise.allSettled</button>
        <div class="output" id="promiseAllOutput">결과가 여기에 표시됩니다.</div>
    </div>

    <!-- 5. Fetch API -->
    <div class="section">
        <h2>5. Fetch API</h2>
        <button onclick="fetchUsers()" id="fetchUsersBtn">사용자 목록 가져오기</button>
        <button onclick="fetchPost()">게시글 가져오기</button>
        <div id="fetchOutput" class="output" style="min-height: 150px;">
            API 결과가 여기에 표시됩니다.
        </div>
    </div>

    <!-- 6. POST 요청 -->
    <div class="section">
        <h2>6. POST 요청</h2>
        <input type="text" id="postTitle" placeholder="제목">
        <input type="text" id="postBody" placeholder="내용">
        <button onclick="createPost()">게시글 생성</button>
        <div class="output" id="postOutput">결과가 여기에 표시됩니다.</div>
    </div>

    <!-- 7. 에러 처리 패턴 -->
    <div class="section">
        <h2>7. 에러 처리 패턴</h2>
        <button onclick="testErrorHandling()">에러 처리 테스트</button>
        <button onclick="testNetworkError()">네트워크 에러 테스트</button>
        <div class="output" id="errorOutput">결과가 여기에 표시됩니다.</div>
    </div>

    <!-- 8. 실전 예제: 사용자 카드 -->
    <div class="section">
        <h2>8. 실전 예제: 사용자 카드</h2>
        <button onclick="loadUserCards()" id="loadCardsBtn">사용자 카드 로드</button>
        <div id="userCards" style="margin-top: 15px;"></div>
    </div>

    <!-- 9. setTimeout, setInterval -->
    <div class="section">
        <h2>9. setTimeout, setInterval</h2>
        <button onclick="startTimer()">타이머 시작</button>
        <button onclick="stopTimer()">타이머 중지</button>
        <button onclick="runDebounceDemo()">Debounce 테스트</button>
        <div class="output" id="timerOutput">타이머: 0</div>
    </div>

    <script src="script.js"></script>
</body>
</html>
