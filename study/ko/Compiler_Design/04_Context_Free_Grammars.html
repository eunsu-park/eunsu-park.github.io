{% raw %}
<!DOCTYPE html>
<html lang="ko" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë ˆìŠ¨ 4: ë¬¸ë§¥ ììœ  ë¬¸ë²• - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/ko/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/ko/" class="nav-item ">
                    <span class="nav-icon">ğŸ </span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">ğŸ’»</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/ko/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" >
                        English
                    </option>
                    
                    <option value="ko" selected>
                        í•œêµ­ì–´
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">â˜€ï¸</span>
                    <span class="theme-icon dark">ğŸŒ™</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/ko/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/ko/Compiler_Design/">Compiler Design</a>
    <span class="separator">/</span>
    <span class="current">ë ˆìŠ¨ 4: ë¬¸ë§¥ ììœ  ë¬¸ë²•</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>ë ˆìŠ¨ 4: ë¬¸ë§¥ ììœ  ë¬¸ë²•</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/ko/Compiler_Design/03_Finite_Automata.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">ë ˆìŠ¨ 3: ìœ í•œ ì˜¤í† ë§ˆí†¤(Finite Automata)</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/ko/Compiler_Design/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/ko/Compiler_Design/05_Top_Down_Parsing.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">ë ˆìŠ¨ 5: í•˜í–¥ì‹ íŒŒì‹±(Top-Down Parsing)</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#_1">í•™ìŠµ ëª©í‘œ</a></li>
<li><a href="#1">1. ë¬¸ë§¥ ììœ  ë¬¸ë²•ì˜ í˜•ì‹ì  ì •ì˜</a><ul>
<li><a href="#_2">í‘œê¸° ê·œì•½</a></li>
<li><a href="#cfg">CFG ì˜ˆì‹œ</a></li>
<li><a href="#derivation">ìœ ë„(Derivation)</a></li>
<li><a href="#_3">ë¬¸ë²•ì˜ ì–¸ì–´</a></li>
<li><a href="#python">Python í‘œí˜„</a></li>
</ul>
</li>
<li><a href="#2-bnf-ebnf">2. BNFì™€ EBNF í‘œê¸°ë²•</a><ul>
<li><a href="#-backus-naur-form-bnf">ë°°ì»¤ìŠ¤-ë‚˜ìš°ë¥´ í˜•ì‹(Backus-Naur Form, BNF)</a></li>
<li><a href="#bnfextended-bnf-ebnf">í™•ì¥ BNF(Extended BNF, EBNF)</a></li>
<li><a href="#ebnf-bnf">EBNFë¥¼ BNFë¡œ ë³€í™˜</a></li>
<li><a href="#python_1">Python êµ¬í˜„</a></li>
</ul>
</li>
<li><a href="#3-derivations">3. ìœ ë„(Derivations)</a><ul>
<li><a href="#leftmost-derivation">ìµœì¢Œë‹¨ ìœ ë„(Leftmost Derivation)</a></li>
<li><a href="#rightmost-derivation">ìµœìš°ë‹¨ ìœ ë„(Rightmost Derivation)</a></li>
<li><a href="#_4">ìœ ë„ ìˆœì„œê°€ ì¤‘ìš”í•œ ì´ìœ </a></li>
<li><a href="#python_2">Python êµ¬í˜„</a></li>
</ul>
</li>
<li><a href="#4-parse-trees">4. íŒŒìŠ¤ íŠ¸ë¦¬(Parse Trees)</a><ul>
<li><a href="#_5">ì •ì˜</a></li>
<li><a href="#_6">íŒŒìŠ¤ íŠ¸ë¦¬ ì˜ˆì‹œ</a></li>
<li><a href="#_7">ìœ ë„ì™€ì˜ ê´€ê³„</a></li>
<li><a href="#python_3">Python êµ¬í˜„</a></li>
</ul>
</li>
<li><a href="#5-ambiguity">5. ëª¨í˜¸ì„±(Ambiguity)</a><ul>
<li><a href="#_8">ì •ì˜</a></li>
<li><a href="#_9">ëª¨í˜¸í•œ ë¬¸ë²• ì˜ˆì‹œ</a></li>
<li><a href="#_10">ëª¨í˜¸ì„±ì´ ì¤‘ìš”í•œ ì´ìœ </a></li>
<li><a href="#inherent-ambiguity">ë³¸ì§ˆì  ëª¨í˜¸ì„±(Inherent Ambiguity)</a></li>
<li><a href="#_11">ëª¨í˜¸ì„± ê°ì§€</a></li>
</ul>
</li>
<li><a href="#6">6. ëª¨í˜¸ì„± í•´ì†Œ</a><ul>
<li><a href="#1-operator-precedence">ì „ëµ 1: ì—°ì‚°ì ìš°ì„ ìˆœìœ„(Operator Precedence)</a></li>
<li><a href="#2-associativity">ì „ëµ 2: ê²°í•©ì„±(Associativity)</a></li>
<li><a href="#3">ì „ëµ 3: ì™¸ë¶€ ëª¨í˜¸ì„± í•´ì†Œ ê·œì¹™</a></li>
<li><a href="#4-elsedangling-else">ì „ëµ 4: ë§¤ë‹¬ë¦° else(Dangling Else) ë¬¸ì œ</a></li>
<li><a href="#python_4">Python ì˜ˆì‹œ: ëª¨í˜¸ì„± í•´ì†Œ</a></li>
</ul>
</li>
<li><a href="#7-chomsky-normal-form-cnf">7. ì´˜ìŠ¤í‚¤ ì •ê·œí˜•(Chomsky Normal Form, CNF)</a><ul>
<li><a href="#cnf">CNFê°€ ì¤‘ìš”í•œ ì´ìœ </a></li>
<li><a href="#cnf_1">CNFë¡œ ë³€í™˜</a></li>
<li><a href="#python_5">Python êµ¬í˜„</a></li>
</ul>
</li>
<li><a href="#8-greibach-normal-form-gnf">8. ê·¸ë¼ì´ë°”í ì •ê·œí˜•(Greibach Normal Form, GNF)</a><ul>
<li><a href="#_12">ì†ì„±</a></li>
<li><a href="#_13">ì •ê·œí˜• ë¹„êµ</a></li>
</ul>
</li>
<li><a href="#9-cyk">9. CYK ì•Œê³ ë¦¬ì¦˜</a><ul>
<li><a href="#_14">ì•Œê³ ë¦¬ì¦˜</a></li>
<li><a href="#_15">ê³„ì‚° ì˜ˆì‹œ</a></li>
<li><a href="#python_6">Python êµ¬í˜„</a></li>
</ul>
</li>
<li><a href="#10-pushdown-automata">10. í‘¸ì‹œë‹¤ìš´ ì˜¤í† ë§ˆíƒ€(Pushdown Automata) ê°œìš”</a><ul>
<li><a href="#_16">í˜•ì‹ì  ì •ì˜</a></li>
<li><a href="#pda">PDAì˜ ì‘ë™ ë°©ì‹</a></li>
<li><a href="#cfg_1">CFGì™€ì˜ ë™ë“±ì„±</a></li>
<li><a href="#python-pda">Python: ê°„ë‹¨í•œ PDA ì‹œë®¬ë ˆì´ì…˜</a></li>
</ul>
</li>
<li><a href="#11">11. ë¬¸ë§¥ ììœ  ì–¸ì–´ì— ëŒ€í•œ íŒí•‘ ë³´ì¡° ì •ë¦¬</a><ul>
<li><a href="#_17">ì„œìˆ </a></li>
<li><a href="#_18">ì¦ëª… ì•„ì´ë””ì–´</a></li>
<li><a href="#cfl">CFL íŒí•‘ ë³´ì¡° ì •ë¦¬ ì‚¬ìš©ë²•</a></li>
<li><a href="#latex198">ì˜ˆì‹œ:  LATEX198 ì€ ë¬¸ë§¥ ììœ ê°€ ì•„ë‹˜</a></li>
<li><a href="#_19">ë¬¸ë§¥ ììœ ë¥¼ ë„˜ì–´ì„œëŠ” ì–¸ì–´ë“¤</a></li>
</ul>
</li>
<li><a href="#12-chomsky-hierarchy">12. ì´˜ìŠ¤í‚¤ ê³„ì¸µ(Chomsky Hierarchy)</a><ul>
<li><a href="#_20">ì»´íŒŒì¼ëŸ¬ ì„¤ê³„ì™€ì˜ ê´€ë ¨ì„±</a></li>
</ul>
</li>
<li><a href="#13">13. ë¬¸ë²• ë³€í™˜</a><ul>
<li><a href="#eliminating-left-recursion">ì¢Œì¬ê·€ ì œê±°(Eliminating Left Recursion)</a></li>
<li><a href="#left-factoring">ì¢Œì¸ìˆ˜ë¶„í•´(Left Factoring)</a></li>
<li><a href="#python_7">Python êµ¬í˜„</a></li>
</ul>
</li>
<li><a href="#_21">ìš”ì•½</a></li>
<li><a href="#_22">ì—°ìŠµ ë¬¸ì œ</a><ul>
<li><a href="#1_1">ì—°ìŠµ 1: ë¬¸ë²• ì‘ì„±</a></li>
<li><a href="#2">ì—°ìŠµ 2: ìœ ë„ì™€ íŒŒìŠ¤ íŠ¸ë¦¬</a></li>
<li><a href="#3_1">ì—°ìŠµ 3: ëª¨í˜¸ì„± ë¶„ì„</a></li>
<li><a href="#4-cnf">ì—°ìŠµ 4: CNF ë³€í™˜</a></li>
<li><a href="#5-cyk">ì—°ìŠµ 5: CYK ì•Œê³ ë¦¬ì¦˜</a></li>
<li><a href="#6_1">ì—°ìŠµ 6: íŒí•‘ ë³´ì¡° ì •ë¦¬</a></li>
</ul>
</li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="4">ë ˆìŠ¨ 4: ë¬¸ë§¥ ììœ  ë¬¸ë²•<a class="header-link" href="#4" title="Permanent link">&para;</a></h1>
<h2 id="_1">í•™ìŠµ ëª©í‘œ<a class="header-link" href="#_1" title="Permanent link">&para;</a></h2>
<p>ì´ ë ˆìŠ¨ì„ ì™„ë£Œí•˜ë©´ ë‹¤ìŒì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<ol>
<li>ë¬¸ë§¥ ììœ  ë¬¸ë²•(Context-Free Grammar, CFG)ì˜ í˜•ì‹ì  ì •ì˜ë¥¼ ì œì‹œí•  ìˆ˜ ìˆë‹¤</li>
<li>BNF ë° EBNF í‘œê¸°ë²•ì„ ì‚¬ìš©í•˜ì—¬ ë¬¸ë²•ì„ ì‘ì„±í•  ìˆ˜ ìˆë‹¤</li>
<li>ì£¼ì–´ì§„ ë¬¸ìì—´ì— ëŒ€í•œ ìµœì¢Œë‹¨(leftmost) ë° ìµœìš°ë‹¨(rightmost) ìœ ë„ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤</li>
<li>íŒŒìŠ¤ íŠ¸ë¦¬(parse tree)ë¥¼ êµ¬ì„±í•˜ê³  ìœ ë„ì™€ì˜ ê´€ê³„ë¥¼ ì´í•´í•  ìˆ˜ ìˆë‹¤</li>
<li>ë¬¸ë²•ì˜ ëª¨í˜¸ì„±(ambiguity)ì„ ì‹ë³„í•˜ê³  í•´ì†Œí•  ìˆ˜ ìˆë‹¤</li>
<li>ë¬¸ë²•ì„ ì´˜ìŠ¤í‚¤ ì •ê·œí˜•(Chomsky Normal Form, CNF) ë° ê·¸ë¼ì´ë°”í ì •ê·œí˜•(Greibach Normal Form, GNF)ìœ¼ë¡œ ë³€í™˜í•  ìˆ˜ ìˆë‹¤</li>
<li>CYK íŒŒì‹± ì•Œê³ ë¦¬ì¦˜ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤</li>
<li>CFGì™€ í‘¸ì‹œë‹¤ìš´ ì˜¤í† ë§ˆíƒ€(pushdown automata)ì˜ ì—°ê´€ì„±ì„ ì´í•´í•  ìˆ˜ ìˆë‹¤</li>
<li>ë¬¸ë§¥ ììœ  ì–¸ì–´ì— ëŒ€í•œ íŒí•‘ ë³´ì¡° ì •ë¦¬(pumping lemma)ë¥¼ ì ìš©í•  ìˆ˜ ìˆë‹¤</li>
<li>Pythonìœ¼ë¡œ ë¬¸ë²• ì¡°ì‘ ë° CYK íŒŒì‹±ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤</li>
</ol>
<hr />
<h2 id="1">1. ë¬¸ë§¥ ììœ  ë¬¸ë²•ì˜ í˜•ì‹ì  ì •ì˜<a class="header-link" href="#1" title="Permanent link">&para;</a></h2>
<p><strong>ë¬¸ë§¥ ììœ  ë¬¸ë²•(Context-Free Grammar, CFG)</strong>ì€ 4-íŠœí”Œ(4-tuple)ì…ë‹ˆë‹¤:</p>
<p>$$G = (V, \Sigma, P, S)$$</p>
<p>ì—¬ê¸°ì„œ:</p>
<ul>
<li>$V$ëŠ” <strong>ë³€ìˆ˜(variable)</strong>(ë˜ëŠ” <strong>ë¹„ë‹¨ë§(nonterminal)</strong>ì´ë¼ê³ ë„ í•¨)ì˜ ìœ í•œ ì§‘í•©</li>
<li>$\Sigma$ëŠ” <strong>ë‹¨ë§ ê¸°í˜¸(terminal symbol)</strong>(ì•ŒíŒŒë²³)ì˜ ìœ í•œ ì§‘í•©ì´ë©°, $V \cap \Sigma = \emptyset$</li>
<li>$P$ëŠ” <strong>ìƒì„± ê·œì¹™(production)</strong>(ê·œì¹™)ì˜ ìœ í•œ ì§‘í•©ìœ¼ë¡œ, ê° ê·œì¹™ì€ $A \rightarrow \alpha$ í˜•íƒœ ($A \in V$, $\alpha \in (V \cup \Sigma)^*$)</li>
<li>$S \in V$ëŠ” <strong>ì‹œì‘ ê¸°í˜¸(start symbol)</strong></li>
</ul>
<h3 id="_2">í‘œê¸° ê·œì•½<a class="header-link" href="#_2" title="Permanent link">&para;</a></h3>
<p>ì´ ë ˆìŠ¨ ì „ì²´ì—ì„œ ë‹¤ìŒ í‘œê¸°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤:</p>
<table>
<thead>
<tr>
<th>ê¸°í˜¸</th>
<th>ì˜ë¯¸</th>
</tr>
</thead>
<tbody>
<tr>
<td>$A, B, C, S$</td>
<td>ë³€ìˆ˜(ë¹„ë‹¨ë§), ëŒ€ë¬¸ì</td>
</tr>
<tr>
<td>$a, b, c$</td>
<td>ë‹¨ë§, ì†Œë¬¸ì</td>
</tr>
<tr>
<td>$\alpha, \beta, \gamma$</td>
<td>$(V \cup \Sigma)^*$ì˜ ë¬¸ìì—´</td>
</tr>
<tr>
<td>$w, x, y, z$</td>
<td>$\Sigma^*$ì˜ ë¬¸ìì—´ (ë‹¨ë§ ë¬¸ìì—´)</td>
</tr>
<tr>
<td>$\epsilon$</td>
<td>ë¹ˆ ë¬¸ìì—´</td>
</tr>
</tbody>
</table>
<h3 id="cfg">CFG ì˜ˆì‹œ<a class="header-link" href="#cfg" title="Permanent link">&para;</a></h3>
<p>ê°„ë‹¨í•œ ì‚°ìˆ  í‘œí˜„ì‹ì„ ìœ„í•œ ë¬¸ë²•:</p>
<p>$$G = (\{E, T, F\}, \{+, *, (, ), \texttt{id}\}, P, E)$$</p>
<p>ìƒì„± ê·œì¹™ $P$:</p>
<p>$$E \rightarrow E + T \mid T$$
$$T \rightarrow T * F \mid F$$
$$F \rightarrow (E) \mid \texttt{id}$$</p>
<p>ì´ ë¬¸ë²•ì€ <code>+</code>, <code>*</code>, ê´„í˜¸, ì‹ë³„ìë¥¼ ì‚¬ìš©í•œ ì‚°ìˆ  í‘œí˜„ì‹ì˜ ì–¸ì–´ë¥¼ ì •ì˜í•˜ë©°, ì¼ë°˜ì ì¸ ìš°ì„ ìˆœìœ„(<code>*</code>ê°€ <code>+</code>ë³´ë‹¤ ê°•í•˜ê²Œ ê²°í•©)ë¥¼ ë”°ë¦…ë‹ˆë‹¤.</p>
<h3 id="derivation">ìœ ë„(Derivation)<a class="header-link" href="#derivation" title="Permanent link">&para;</a></h3>
<p><strong>ìœ ë„(derivation)</strong>ëŠ” ì‹œì‘ ê¸°í˜¸ë¥¼ ë‹¨ë§ ê¸°í˜¸ë¡œ ì´ë£¨ì–´ì§„ ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ëŠ” ë‹¨ê³„ë“¤ì˜ ì—°ì†ì…ë‹ˆë‹¤. ê° ë‹¨ê³„ì—ì„œ ë³€ìˆ˜ë¥¼ í•´ë‹¹ ìƒì„± ê·œì¹™ì˜ ìš°ë³€ìœ¼ë¡œ ë°˜ë³µì ìœ¼ë¡œ ëŒ€ì²´í•©ë‹ˆë‹¤.</p>
<p>$A \rightarrow \beta$ê°€ ìƒì„± ê·œì¹™ì´ê³  $\alpha A \gamma$ê°€ ë¬¸ì¥ í˜•ì‹(sentential form)ì´ë©´:</p>
<p>$$\alpha A \gamma \Rightarrow \alpha \beta \gamma$$</p>
<p>$\alpha \xRightarrow{*} \beta$ëŠ” 0ë²ˆ ì´ìƒì˜ ìœ ë„ ë‹¨ê³„ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</p>
<h3 id="_3">ë¬¸ë²•ì˜ ì–¸ì–´<a class="header-link" href="#_3" title="Permanent link">&para;</a></h3>
<p>$G$ê°€ ìƒì„±í•˜ëŠ” <strong>ì–¸ì–´</strong>:</p>
<p>$$L(G) = \{w \in \Sigma^* \mid S \xRightarrow{*} w\}$$</p>
<p>ì‹œì‘ ê¸°í˜¸ì—ì„œ ìœ ë„ ê°€ëŠ¥í•œ ëª¨ë“  ë‹¨ë§ ë¬¸ìì—´ì˜ ì§‘í•©ì…ë‹ˆë‹¤.</p>
<h3 id="python">Python í‘œí˜„<a class="header-link" href="#python" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span><span class="p">,</span> <span class="n">field</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Set</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Optional</span>


<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Production</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A grammar production A -&gt; symbols.&quot;&quot;&quot;</span>
    <span class="n">head</span><span class="p">:</span> <span class="nb">str</span>                 <span class="c1"># Left-hand side (nonterminal)</span>
    <span class="n">body</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>     <span class="c1"># Right-hand side (tuple of symbols)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">body_str</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span> <span class="k">else</span> <span class="s1">&#39;Îµ&#39;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">head</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">body_str</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">head</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Production</span><span class="p">)</span> <span class="ow">and</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">head</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">head</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Grammar</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Context-Free Grammar.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">terminals</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
                 <span class="n">productions</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Production</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variables</span> <span class="o">=</span> <span class="n">variables</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">terminals</span> <span class="o">=</span> <span class="n">terminals</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">productions</span> <span class="o">=</span> <span class="n">productions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">start</span>

        <span class="c1"># Index productions by head</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prod_index</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Production</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">productions</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">prod_index</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">head</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_string</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">grammar_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Grammar&#39;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse a grammar from a multi-line string.</span>
<span class="sd">        Format: &#39;A -&gt; Î± | Î² | Î³&#39; (one nonterminal per line).</span>
<span class="sd">        Nonterminals are uppercase single letters or quoted names.</span>
<span class="sd">        Use &#39;Îµ&#39; or &#39;epsilon&#39; for epsilon productions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">variables</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">terminals</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">productions</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">grammar_str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">):</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span> <span class="ow">or</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="p">):</span>
                <span class="k">continue</span>

            <span class="n">head</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">body_str</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s1">&#39;-&gt;&#39;</span><span class="p">)</span>
            <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">variables</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">alt</span> <span class="ow">in</span> <span class="n">body_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;|&#39;</span><span class="p">):</span>
                <span class="n">alt</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">alt</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;Îµ&#39;</span><span class="p">,</span> <span class="s1">&#39;epsilon&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">):</span>
                    <span class="n">productions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Production</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="p">()))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">symbols</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">alt</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
                    <span class="n">productions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Production</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="n">symbols</span><span class="p">))</span>

        <span class="c1"># Infer terminals</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">productions</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">sym</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">sym</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">:</span>
                    <span class="n">terminals</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sym</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">start</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">start</span> <span class="o">=</span> <span class="n">productions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">head</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">variables</span><span class="p">,</span> <span class="n">terminals</span><span class="p">,</span> <span class="n">productions</span><span class="p">,</span> <span class="n">start</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;Grammar(start=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="p">):</span>
            <span class="n">prods</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prod_index</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="p">[])</span>
            <span class="n">bodies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">)</span> <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">body</span> <span class="k">else</span> <span class="s1">&#39;Îµ&#39;</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prods</span><span class="p">]</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">var</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="s1">&#39; | &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">bodies</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_terminal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">symbol</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminals</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">symbol</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variables</span>


<span class="c1"># Example: Arithmetic expression grammar</span>
<span class="n">expr_grammar</span> <span class="o">=</span> <span class="n">Grammar</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">E -&gt; E + T | T</span>
<span class="s2">T -&gt; T * F | F</span>
<span class="s2">F -&gt; ( E ) | id</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">expr_grammar</span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="2-bnf-ebnf">2. BNFì™€ EBNF í‘œê¸°ë²•<a class="header-link" href="#2-bnf-ebnf" title="Permanent link">&para;</a></h2>
<h3 id="-backus-naur-form-bnf">ë°°ì»¤ìŠ¤-ë‚˜ìš°ë¥´ í˜•ì‹(Backus-Naur Form, BNF)<a class="header-link" href="#-backus-naur-form-bnf" title="Permanent link">&para;</a></h3>
<p><strong>BNF</strong>(Backus-Naur Form)ëŠ” John Backusê°€ ALGOL 60 ë³´ê³ ì„œë¥¼ ìœ„í•´ ë„ì…í•œ ë¬¸ë§¥ ììœ  ë¬¸ë²•ì˜ í‘œì¤€ í‘œê¸°ë²•ì…ë‹ˆë‹¤.</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nc">expression</span><span class="p">&gt;</span>  <span class="o">::=</span> <span class="p">&lt;</span><span class="nc">expression</span><span class="p">&gt;</span> &quot;+&quot; <span class="p">&lt;</span><span class="nc">term</span><span class="p">&gt;</span> | <span class="p">&lt;</span><span class="nc">term</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nc">term</span><span class="p">&gt;</span>        <span class="o">::=</span> <span class="p">&lt;</span><span class="nc">term</span><span class="p">&gt;</span> &quot;*&quot; <span class="p">&lt;</span><span class="nc">factor</span><span class="p">&gt;</span> | <span class="p">&lt;</span><span class="nc">factor</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nc">factor</span><span class="p">&gt;</span>      <span class="o">::=</span> &quot;(&quot; <span class="p">&lt;</span><span class="nc">expression</span><span class="p">&gt;</span> &quot;)&quot; | <span class="p">&lt;</span><span class="nc">identifier</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nc">identifier</span><span class="p">&gt;</span>  <span class="o">::=</span> <span class="p">&lt;</span><span class="nc">letter</span><span class="p">&gt;</span> | <span class="p">&lt;</span><span class="nc">identifier</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nc">letter</span><span class="p">&gt;</span> | <span class="p">&lt;</span><span class="nc">identifier</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nc">digit</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nc">letter</span><span class="p">&gt;</span>      <span class="o">::=</span> &quot;a&quot; | &quot;b&quot; | ... | &quot;z&quot;
<span class="p">&lt;</span><span class="nc">digit</span><span class="p">&gt;</span>       <span class="o">::=</span> &quot;0&quot; | &quot;1&quot; | ... | &quot;9&quot;
</code></pre></div>

<p>BNF í‘œê¸° ê·œì•½:
- ë¹„ë‹¨ë§ì€ êº¾ì‡  ê´„í˜¸ë¡œ ê°ìŒˆ: <code>&lt;expression&gt;</code>
- ë‹¨ë§ì€ ë”°ì˜´í‘œë¡œ ê°ìŒˆ: <code>"+"</code>
- <code>::=</code>ëŠ” "~ë¡œ ì •ì˜ëœë‹¤"ë¥¼ ì˜ë¯¸
- <code>|</code>ëŠ” ëŒ€ì•ˆì„ êµ¬ë¶„
- ê° ê·œì¹™ì€ í•˜ë‚˜ì˜ ë¹„ë‹¨ë§ì„ ì •ì˜</p>
<h3 id="bnfextended-bnf-ebnf">í™•ì¥ BNF(Extended BNF, EBNF)<a class="header-link" href="#bnfextended-bnf-ebnf" title="Permanent link">&para;</a></h3>
<p><strong>EBNF</strong>ëŠ” BNFì— í¸ì˜ í‘œê¸°ë¥¼ ì¶”ê°€í•˜ì—¬ í•„ìš”í•œ ê·œì¹™ ìˆ˜ë¥¼ ì¤„ì…ë‹ˆë‹¤:</p>
<table>
<thead>
<tr>
<th>EBNF í‘œê¸°</th>
<th>ì˜ë¯¸</th>
<th>BNF ë™ë“± í‘œí˜„</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>{X}</code> ë˜ëŠ” <code>X*</code></td>
<td>Xì˜ 0ë²ˆ ì´ìƒ ë°˜ë³µ</td>
<td>ì¬ê·€ë¥¼ ì‚¬ìš©í•œ ìƒˆ ë¹„ë‹¨ë§</td>
</tr>
<tr>
<td><code>[X]</code> ë˜ëŠ” <code>X?</code></td>
<td>ì„ íƒì  (0ë²ˆ ë˜ëŠ” 1ë²ˆ)</td>
<td>ì—¡ì‹¤ë¡  ëŒ€ì•ˆì„ ê°€ì§„ ìƒˆ ë¹„ë‹¨ë§</td>
</tr>
<tr>
<td><code>(X \| Y)</code></td>
<td>ê·¸ë£¹í™”</td>
<td>ìƒˆ ë¹„ë‹¨ë§</td>
</tr>
<tr>
<td><code>X+</code></td>
<td>Xì˜ 1ë²ˆ ì´ìƒ ë°˜ë³µ</td>
<td>ì¬ê·€ë¥¼ ì‚¬ìš©í•œ ìƒˆ ë¹„ë‹¨ë§</td>
</tr>
</tbody>
</table>
<p><strong>ì˜ˆì‹œ</strong>: EBNFë¡œ í‘œí˜„í•œ í‘œí˜„ì‹ ë¬¸ë²•:</p>
<div class="highlight"><pre><span></span><code><span class="k">expression </span><span class="o">=</span> <span class="k">term </span><span class="p">{</span> <span class="s2">&quot;+&quot;</span> <span class="k">term </span><span class="p">}</span> <span class="p">.</span>
<span class="k">term       </span><span class="o">=</span> <span class="k">factor </span><span class="p">{</span> <span class="s2">&quot;*&quot;</span> <span class="k">factor </span><span class="p">}</span> <span class="p">.</span>
<span class="k">factor     </span><span class="o">=</span> <span class="s2">&quot;(&quot;</span> <span class="k">expression </span><span class="s2">&quot;)&quot;</span> <span class="p">|</span> <span class="k">identifier </span><span class="p">.</span>
<span class="k">identifier </span><span class="o">=</span> <span class="k">letter </span><span class="p">{</span> <span class="k">letter </span><span class="p">|</span> <span class="k">digit </span><span class="p">}</span> <span class="p">.</span>
</code></pre></div>

<p>ë°˜ë³µ(<code>{...}</code>)ì´ ëª…ì‹œì  ì¬ê·€ë¥¼ ëŒ€ì²´í•˜ë¯€ë¡œ ë” ê°„ê²°í•©ë‹ˆë‹¤.</p>
<h3 id="ebnf-bnf">EBNFë¥¼ BNFë¡œ ë³€í™˜<a class="header-link" href="#ebnf-bnf" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">EBNF</span><span class="o">:</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">Î±</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="err">Î²</span><span class="w"> </span><span class="o">}</span><span class="w"> </span><span class="err">Î³</span><span class="w"> </span><span class="o">.</span>
<span class="n">BNF</span><span class="o">:</span><span class="w">  </span><span class="n">A</span><span class="w">  </span><span class="o">-&gt;</span><span class="w"> </span><span class="err">Î±</span><span class="w"> </span><span class="n">A</span><span class="s1">&#39; Î³</span>
<span class="s1">      A&#39;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="err">Î²</span><span class="w"> </span><span class="n">A</span><span class="s1">&#39; | Îµ</span>

<span class="s1">EBNF: A = Î± [ Î² ] Î³ .</span>
<span class="s1">BNF:  A -&gt; Î± Î² Î³ | Î± Î³</span>

<span class="s1">EBNF: A = Î± ( Î² | Î³ ) Î´ .</span>
<span class="s1">BNF:  A  -&gt; Î± A&#39;</span><span class="w"> </span><span class="err">Î´</span>
<span class="w">      </span><span class="n">A</span><span class="err">&#39;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="err">Î²</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">Î³</span>
</code></pre></div>

<h3 id="python_1">Python êµ¬í˜„<a class="header-link" href="#python_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">ebnf_to_bnf</span><span class="p">(</span><span class="n">ebnf_rules</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert EBNF notation to BNF.</span>
<span class="sd">    Handles: { } (repetition), [ ] (optional), ( | ) (grouping).</span>

<span class="sd">    This is a simplified converter for demonstration.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bnf_rules</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">aux_counter</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">new_aux</span><span class="p">(</span><span class="n">base_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">aux_counter</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">base_name</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">aux_counter</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">ebnf_rules</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">):</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="n">head</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">body</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
        <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>

        <span class="c1"># For simplicity, just handle the basic transformations</span>
        <span class="c1"># In practice, you&#39;d need a proper EBNF parser</span>

        <span class="c1"># Handle { X } -&gt; X_rep where X_rep -&gt; X X_rep | Îµ</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">re</span>
        <span class="k">while</span> <span class="s1">&#39;{&#39;</span> <span class="ow">in</span> <span class="n">body</span><span class="p">:</span>
            <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\{([^</span><span class="si">{}</span><span class="s1">]+)\}&#39;</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">match</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">inner</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">aux</span> <span class="o">=</span> <span class="n">new_aux</span><span class="p">(</span><span class="n">head</span> <span class="o">+</span> <span class="s2">&quot;_rep&quot;</span><span class="p">)</span>
            <span class="n">body</span> <span class="o">=</span> <span class="n">body</span><span class="p">[:</span><span class="n">match</span><span class="o">.</span><span class="n">start</span><span class="p">()]</span> <span class="o">+</span> <span class="n">aux</span> <span class="o">+</span> <span class="n">body</span><span class="p">[</span><span class="n">match</span><span class="o">.</span><span class="n">end</span><span class="p">():]</span>
            <span class="n">bnf_rules</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">aux</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">inner</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">aux</span><span class="si">}</span><span class="s2"> | Îµ&quot;</span><span class="p">)</span>

        <span class="c1"># Handle [ X ] -&gt; X_opt where X_opt -&gt; X | Îµ</span>
        <span class="k">while</span> <span class="s1">&#39;[&#39;</span> <span class="ow">in</span> <span class="n">body</span><span class="p">:</span>
            <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\[([^\[\]]+)\]&#39;</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">match</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">inner</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">aux</span> <span class="o">=</span> <span class="n">new_aux</span><span class="p">(</span><span class="n">head</span> <span class="o">+</span> <span class="s2">&quot;_opt&quot;</span><span class="p">)</span>
            <span class="n">body</span> <span class="o">=</span> <span class="n">body</span><span class="p">[:</span><span class="n">match</span><span class="o">.</span><span class="n">start</span><span class="p">()]</span> <span class="o">+</span> <span class="n">aux</span> <span class="o">+</span> <span class="n">body</span><span class="p">[</span><span class="n">match</span><span class="o">.</span><span class="n">end</span><span class="p">():]</span>
            <span class="n">bnf_rules</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">aux</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">inner</span><span class="si">}</span><span class="s2"> | Îµ&quot;</span><span class="p">)</span>

        <span class="n">bnf_rules</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">head</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">body</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">bnf_rules</span><span class="p">)</span>


<span class="n">ebnf</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">expr = term { + term } .</span>
<span class="s2">term = factor { * factor } .</span>
<span class="s2">factor = ( expr ) | id .</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== EBNF to BNF Conversion ===</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;EBNF:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ebnf</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;BNF:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ebnf_to_bnf</span><span class="p">(</span><span class="n">ebnf</span><span class="p">))</span>
</code></pre></div>

<hr />
<h2 id="3-derivations">3. ìœ ë„(Derivations)<a class="header-link" href="#3-derivations" title="Permanent link">&para;</a></h2>
<h3 id="leftmost-derivation">ìµœì¢Œë‹¨ ìœ ë„(Leftmost Derivation)<a class="header-link" href="#leftmost-derivation" title="Permanent link">&para;</a></h3>
<p><strong>ìµœì¢Œë‹¨ ìœ ë„(leftmost derivation)</strong>ì—ì„œëŠ” ê° ë‹¨ê³„ë§ˆë‹¤ ë¬¸ì¥ í˜•ì‹ì—ì„œ <strong>ê°€ì¥ ì™¼ìª½</strong> ë³€ìˆ˜ë¥¼ ëŒ€ì²´í•©ë‹ˆë‹¤.</p>
<p><strong>í‘œê¸°</strong>: $\alpha \xRightarrow{lm} \beta$</p>
<p><strong>ì˜ˆì‹œ</strong>: í‘œí˜„ì‹ ë¬¸ë²•ì„ ì‚¬ìš©í•˜ì—¬ <code>id + id * id</code>ë¥¼ ìœ ë„í•©ë‹ˆë‹¤.</p>
<p>$$E \xRightarrow{lm} E + T \xRightarrow{lm} T + T \xRightarrow{lm} F + T \xRightarrow{lm} \texttt{id} + T$$
$$\xRightarrow{lm} \texttt{id} + T * F \xRightarrow{lm} \texttt{id} + F * F \xRightarrow{lm} \texttt{id} + \texttt{id} * F \xRightarrow{lm} \texttt{id} + \texttt{id} * \texttt{id}$$</p>
<h3 id="rightmost-derivation">ìµœìš°ë‹¨ ìœ ë„(Rightmost Derivation)<a class="header-link" href="#rightmost-derivation" title="Permanent link">&para;</a></h3>
<p><strong>ìµœìš°ë‹¨ ìœ ë„(rightmost derivation)</strong>(ë˜ëŠ” <strong>ì •ê·œ ìœ ë„(canonical derivation)</strong>ë¼ê³ ë„ í•¨)ì—ì„œëŠ” ê° ë‹¨ê³„ë§ˆë‹¤ <strong>ê°€ì¥ ì˜¤ë¥¸ìª½</strong> ë³€ìˆ˜ë¥¼ ëŒ€ì²´í•©ë‹ˆë‹¤.</p>
<p><strong>í‘œê¸°</strong>: $\alpha \xRightarrow{rm} \beta$</p>
<p>$$E \xRightarrow{rm} E + T \xRightarrow{rm} E + T * F \xRightarrow{rm} E + T * \texttt{id} \xRightarrow{rm} E + F * \texttt{id}$$
$$\xRightarrow{rm} E + \texttt{id} * \texttt{id} \xRightarrow{rm} T + \texttt{id} * \texttt{id} \xRightarrow{rm} F + \texttt{id} * \texttt{id} \xRightarrow{rm} \texttt{id} + \texttt{id} * \texttt{id}$$</p>
<p>ë‘ ìœ ë„ ëª¨ë‘ ë™ì¼í•œ íŒŒìŠ¤ íŠ¸ë¦¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤(ë¹„ëª¨í˜¸ ë¬¸ë²•ì—ì„œ).</p>
<h3 id="_4">ìœ ë„ ìˆœì„œê°€ ì¤‘ìš”í•œ ì´ìœ <a class="header-link" href="#_4" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>í•˜í–¥ì‹ íŒŒì„œ(top-down parser)</strong>(LL)ëŠ” ìµœì¢Œë‹¨ ìœ ë„ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤</li>
<li><strong>ìƒí–¥ì‹ íŒŒì„œ(bottom-up parser)</strong>(LR)ëŠ” ìµœìš°ë‹¨ ìœ ë„ë¥¼ ì—­ìˆœìœ¼ë¡œ êµ¬ì„±í•©ë‹ˆë‹¤</li>
<li>ë¹„ëª¨í˜¸ ë¬¸ë²•ì—ì„œ ë‘ ë°©ì‹ ëª¨ë‘ ë™ì¼í•œ íŒŒìŠ¤ íŠ¸ë¦¬ë¥¼ ì‚°ì¶œí•©ë‹ˆë‹¤</li>
<li>ëª¨í˜¸ ë¬¸ë²•ì—ì„œëŠ” ë‹¤ë¥¸ ìœ ë„ ìˆœì„œê°€ ë‹¤ë¥¸ íŒŒìŠ¤ íŠ¸ë¦¬ë¥¼ ì‚°ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</li>
</ul>
<h3 id="python_2">Python êµ¬í˜„<a class="header-link" href="#python_2" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">leftmost_derivation</span><span class="p">(</span><span class="n">grammar</span><span class="p">:</span> <span class="n">Grammar</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Find a leftmost derivation of target string.</span>
<span class="sd">    Uses brute-force search (only practical for short strings).</span>
<span class="sd">    Returns list of sentential forms, or None if not derivable.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">target_symbols</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">target</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>

    <span class="c1"># BFS</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">deque</span>

    <span class="n">queue</span> <span class="o">=</span> <span class="n">deque</span><span class="p">()</span>
    <span class="n">queue</span><span class="o">.</span><span class="n">append</span><span class="p">(((</span><span class="n">grammar</span><span class="o">.</span><span class="n">start</span><span class="p">,),</span> <span class="p">[(</span><span class="n">grammar</span><span class="o">.</span><span class="n">start</span><span class="p">,)]))</span>
    <span class="n">visited</span> <span class="o">=</span> <span class="p">{(</span><span class="n">grammar</span><span class="o">.</span><span class="n">start</span><span class="p">,)}</span>

    <span class="n">max_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">target_symbols</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span>  <span class="c1"># Bound to prevent infinite search</span>

    <span class="k">while</span> <span class="n">queue</span><span class="p">:</span>
        <span class="n">current</span><span class="p">,</span> <span class="n">history</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>

        <span class="c1"># Check if we&#39;ve derived the target</span>
        <span class="k">if</span> <span class="n">current</span> <span class="o">==</span> <span class="n">target_symbols</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sf</span><span class="p">)</span> <span class="k">for</span> <span class="n">sf</span> <span class="ow">in</span> <span class="n">history</span><span class="p">]</span>

        <span class="c1"># If current is all terminals, no more derivations possible</span>
        <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">grammar</span><span class="o">.</span><span class="n">is_terminal</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">current</span><span class="p">):</span>
            <span class="k">continue</span>

        <span class="c1"># If too long, skip</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">current</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">max_len</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="c1"># Find leftmost variable</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">sym</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">current</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">grammar</span><span class="o">.</span><span class="n">is_variable</span><span class="p">(</span><span class="n">sym</span><span class="p">):</span>
                <span class="c1"># Try all productions for this variable</span>
                <span class="k">for</span> <span class="n">prod</span> <span class="ow">in</span> <span class="n">grammar</span><span class="o">.</span><span class="n">prod_index</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sym</span><span class="p">,</span> <span class="p">[]):</span>
                    <span class="n">new_form</span> <span class="o">=</span> <span class="n">current</span><span class="p">[:</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">prod</span><span class="o">.</span><span class="n">body</span> <span class="o">+</span> <span class="n">current</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>
                    <span class="k">if</span> <span class="n">new_form</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">:</span>
                        <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">new_form</span><span class="p">)</span>
                        <span class="n">queue</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">new_form</span><span class="p">,</span> <span class="n">history</span> <span class="o">+</span> <span class="p">[</span><span class="n">new_form</span><span class="p">]))</span>
                <span class="k">break</span>  <span class="c1"># Only expand leftmost variable</span>

    <span class="k">return</span> <span class="kc">None</span>


<span class="c1"># Example</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== Leftmost Derivation ===</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">derivation</span> <span class="o">=</span> <span class="n">leftmost_derivation</span><span class="p">(</span><span class="n">expr_grammar</span><span class="p">,</span> <span class="s2">&quot;id + id * id&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">derivation</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">step</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">derivation</span><span class="p">):</span>
        <span class="n">arrow</span> <span class="o">=</span> <span class="s2">&quot;  &quot;</span> <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">&quot;=&gt;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">arrow</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">step</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="4-parse-trees">4. íŒŒìŠ¤ íŠ¸ë¦¬(Parse Trees)<a class="header-link" href="#4-parse-trees" title="Permanent link">&para;</a></h2>
<p><strong>íŒŒìŠ¤ íŠ¸ë¦¬(parse tree)</strong>(ë˜ëŠ” <strong>ìœ ë„ íŠ¸ë¦¬(derivation tree)</strong> í˜¹ì€ <strong>êµ¬ì²´ êµ¬ë¬¸ íŠ¸ë¦¬(concrete syntax tree)</strong>ë¼ê³ ë„ í•¨)ëŠ” ìœ ë„ì˜ ê·¸ë˜í”½ í‘œí˜„ì…ë‹ˆë‹¤.</p>
<h3 id="_5">ì •ì˜<a class="header-link" href="#_5" title="Permanent link">&para;</a></h3>
<p>ë¬¸ë²• $G = (V, \Sigma, P, S)$ì— ëŒ€í•´ íŒŒìŠ¤ íŠ¸ë¦¬ëŠ” ë‹¤ìŒ íŠ¹ì„±ì„ ê°€ì§‘ë‹ˆë‹¤:</p>
<ol>
<li><strong>ë£¨íŠ¸(root)</strong>ëŠ” ì‹œì‘ ê¸°í˜¸ $S$ë¡œ ë ˆì´ë¸”ë©ë‹ˆë‹¤</li>
<li>ê° <strong>ë‚´ë¶€ ë…¸ë“œ(interior node)</strong>ëŠ” ë³€ìˆ˜ $A \in V$ë¡œ ë ˆì´ë¸”ë©ë‹ˆë‹¤</li>
<li>ê° <strong>ì(leaf)</strong>ì€ ë‹¨ë§ $a \in \Sigma$ ë˜ëŠ” $\epsilon$ìœ¼ë¡œ ë ˆì´ë¸”ë©ë‹ˆë‹¤</li>
<li>ë‚´ë¶€ ë…¸ë“œ $A$ê°€ ìì‹ $X_1, X_2, \ldots, X_k$ë¥¼ ê°€ì§€ë©´, $A \rightarrow X_1 X_2 \cdots X_k \in P$</li>
</ol>
<h3 id="_6">íŒŒìŠ¤ íŠ¸ë¦¬ ì˜ˆì‹œ<a class="header-link" href="#_6" title="Permanent link">&para;</a></h3>
<p>í‘œí˜„ì‹ ë¬¸ë²•ìœ¼ë¡œ <code>id + id * id</code>ì— ëŒ€í•œ íŒŒìŠ¤ íŠ¸ë¦¬:</p>
<div class="highlight"><pre><span></span><code>             E
           / | \
          E  +  T
          |    /|\
          T  T  *  F
          |  |     |
          F  F    id
          |  |
         id  id
</code></pre></div>

<p>ìì„ ì™¼ìª½ì—ì„œ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì½ìœ¼ë©´ ìœ ë„ëœ ë¬¸ìì—´ <code>id + id * id</code>ê°€ ë‚˜ì˜µë‹ˆë‹¤.</p>
<h3 id="_7">ìœ ë„ì™€ì˜ ê´€ê³„<a class="header-link" href="#_7" title="Permanent link">&para;</a></h3>
<ul>
<li>ëª¨ë“  ìœ ë„ëŠ” ì •í™•íˆ í•˜ë‚˜ì˜ íŒŒìŠ¤ íŠ¸ë¦¬ì— ëŒ€ì‘í•©ë‹ˆë‹¤(ë¹„ëª¨í˜¸ ë¬¸ë²•ì—ì„œ)</li>
<li>ëª¨ë“  íŒŒìŠ¤ íŠ¸ë¦¬ëŠ” ì •í™•íˆ í•˜ë‚˜ì˜ ìµœì¢Œë‹¨ ìœ ë„ì™€ í•˜ë‚˜ì˜ ìµœìš°ë‹¨ ìœ ë„ì— ëŒ€ì‘í•©ë‹ˆë‹¤</li>
<li>ì„œë¡œ ë‹¤ë¥¸ ìœ ë„(ìµœì¢Œë‹¨, ìµœìš°ë‹¨, ë˜ëŠ” ì„ì˜ ìˆœì„œ)ê°€ <strong>ë™ì¼í•œ</strong> íŒŒìŠ¤ íŠ¸ë¦¬ì— ëŒ€ì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</li>
</ul>
<h3 id="python_3">Python êµ¬í˜„<a class="header-link" href="#python_3" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ParseTreeNode</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A node in a parse tree.&quot;&quot;&quot;</span>
    <span class="n">symbol</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">children</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s1">&#39;ParseTreeNode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">is_terminal</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_terminal</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">symbol</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">symbol</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">leaves</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the leaves (yield) of the parse tree.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_terminal</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">symbol</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">symbol</span> <span class="o">!=</span> <span class="s1">&#39;Îµ&#39;</span> <span class="k">else</span> <span class="p">[]</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="n">result</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">leaves</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">pretty_print</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">is_last</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Print the tree in a readable format.&quot;&quot;&quot;</span>
        <span class="n">connector</span> <span class="o">=</span> <span class="s2">&quot;â””â”€â”€ &quot;</span> <span class="k">if</span> <span class="n">is_last</span> <span class="k">else</span> <span class="s2">&quot;â”œâ”€â”€ &quot;</span>
        <span class="n">label</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">symbol</span><span class="si">}</span><span class="s2">&#39;&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_terminal</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">symbol</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">prefix</span> <span class="o">+</span> <span class="n">connector</span> <span class="o">+</span> <span class="n">label</span><span class="p">)</span>
        <span class="n">new_prefix</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;    &quot;</span> <span class="k">if</span> <span class="n">is_last</span> <span class="k">else</span> <span class="s2">&quot;â”‚   &quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">child</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">):</span>
            <span class="n">child</span><span class="o">.</span><span class="n">pretty_print</span><span class="p">(</span><span class="n">new_prefix</span><span class="p">,</span> <span class="n">i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">build_parse_tree</span><span class="p">(</span><span class="n">grammar</span><span class="p">:</span> <span class="n">Grammar</span><span class="p">,</span> <span class="n">derivation_steps</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ParseTreeNode</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Build a parse tree from a leftmost derivation.</span>
<span class="sd">    Each step is a sentential form (list of symbols).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Start with root</span>
    <span class="n">root</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="n">grammar</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>

    <span class="c1"># Track which nodes need expansion</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">find_leftmost_unexpanded</span><span class="p">(</span><span class="n">node</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Find the leftmost nonterminal leaf that hasn&#39;t been expanded.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">is_terminal</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">grammar</span><span class="o">.</span><span class="n">is_variable</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">symbol</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">node</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">find_leftmost_unexpanded</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">result</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="c1"># Process each derivation step</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">derivation_steps</span><span class="p">)):</span>
        <span class="n">current</span> <span class="o">=</span> <span class="n">derivation_steps</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
        <span class="n">prev</span> <span class="o">=</span> <span class="n">derivation_steps</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>

        <span class="c1"># Find which variable was expanded</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">find_leftmost_unexpanded</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">break</span>

        <span class="c1"># Find the production used</span>
        <span class="k">for</span> <span class="n">prod</span> <span class="ow">in</span> <span class="n">grammar</span><span class="o">.</span><span class="n">prod_index</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">symbol</span><span class="p">,</span> <span class="p">[]):</span>
            <span class="c1"># Check if this production could have been applied</span>
            <span class="n">expanded</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">sym</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">prev</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">sym</span> <span class="o">==</span> <span class="n">node</span><span class="o">.</span><span class="n">symbol</span> <span class="ow">and</span> <span class="n">j</span> <span class="o">==</span> <span class="n">prev</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">symbol</span><span class="p">):</span>
                    <span class="n">expanded</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">prod</span><span class="o">.</span><span class="n">body</span> <span class="k">if</span> <span class="n">prod</span><span class="o">.</span><span class="n">body</span> <span class="k">else</span> <span class="p">[</span><span class="s1">&#39;Îµ&#39;</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">expanded</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sym</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">expanded</span> <span class="o">==</span> <span class="n">current</span> <span class="ow">or</span> <span class="p">(</span><span class="ow">not</span> <span class="n">prod</span><span class="o">.</span><span class="n">body</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">current</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">prev</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                <span class="c1"># This is the right production</span>
                <span class="k">if</span> <span class="n">prod</span><span class="o">.</span><span class="n">body</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">sym</span> <span class="ow">in</span> <span class="n">prod</span><span class="o">.</span><span class="n">body</span><span class="p">:</span>
                        <span class="n">child</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span>
                            <span class="n">sym</span><span class="p">,</span>
                            <span class="n">is_terminal</span><span class="o">=</span><span class="n">grammar</span><span class="o">.</span><span class="n">is_terminal</span><span class="p">(</span><span class="n">sym</span><span class="p">)</span>
                        <span class="p">)</span>
                        <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s1">&#39;Îµ&#39;</span><span class="p">,</span> <span class="n">is_terminal</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="k">break</span>

    <span class="k">return</span> <span class="n">root</span>


<span class="c1"># Manually build a parse tree for &quot;id + id * id&quot;</span>
<span class="k">def</span><span class="w"> </span><span class="nf">make_expr_tree</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Build the parse tree for &#39;id + id * id&#39; manually.&quot;&quot;&quot;</span>
    <span class="c1"># F -&gt; id (three instances)</span>
    <span class="n">id1</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">is_terminal</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">id2</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">is_terminal</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">id3</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">is_terminal</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">f1</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">id1</span><span class="p">])</span>
    <span class="n">f2</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">id2</span><span class="p">])</span>
    <span class="n">f3</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">id3</span><span class="p">])</span>

    <span class="c1"># T -&gt; F (left), T -&gt; T * F (right)</span>
    <span class="n">t1</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">f1</span><span class="p">])</span>
    <span class="n">t2</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="p">[</span>
        <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">f2</span><span class="p">]),</span>
        <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="n">is_terminal</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
        <span class="n">f3</span>
    <span class="p">])</span>

    <span class="c1"># E -&gt; E + T</span>
    <span class="n">plus</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">is_terminal</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">e</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="p">[</span>
        <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">t1</span><span class="p">]),</span>
        <span class="n">plus</span><span class="p">,</span>
        <span class="n">t2</span>
    <span class="p">])</span>

    <span class="k">return</span> <span class="n">e</span>

<span class="n">tree</span> <span class="o">=</span> <span class="n">make_expr_tree</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== Parse Tree for &#39;id + id * id&#39; ===</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">tree</span><span class="o">.</span><span class="n">pretty_print</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">is_last</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Yield: </span><span class="si">{</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tree</span><span class="o">.</span><span class="n">leaves</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="5-ambiguity">5. ëª¨í˜¸ì„±(Ambiguity)<a class="header-link" href="#5-ambiguity" title="Permanent link">&para;</a></h2>
<h3 id="_8">ì •ì˜<a class="header-link" href="#_8" title="Permanent link">&para;</a></h3>
<p>ë¬¸ë²• $G$ëŠ” $L(G)$ì— ì†í•˜ëŠ” ì–´ë–¤ ë¬¸ìì—´ $w$ê°€ <strong>ë‘ ê°œ ì´ìƒì˜ ì„œë¡œ ë‹¤ë¥¸ íŒŒìŠ¤ íŠ¸ë¦¬</strong>(ë˜ëŠ” ë‘ ê°œ ì´ìƒì˜ ì„œë¡œ ë‹¤ë¥¸ ìµœì¢Œë‹¨ ìœ ë„)ë¥¼ ê°€ì§€ë©´ <strong>ëª¨í˜¸(ambiguous)</strong>í•©ë‹ˆë‹¤.</p>
<h3 id="_9">ëª¨í˜¸í•œ ë¬¸ë²• ì˜ˆì‹œ<a class="header-link" href="#_9" title="Permanent link">&para;</a></h3>
<p>ë‹¤ìŒê³¼ ê°™ì€ ë” ê°„ë‹¨í•œ í‘œí˜„ì‹ ë¬¸ë²•ì„ ê³ ë ¤í•©ë‹ˆë‹¤:</p>
<p>$$E \rightarrow E + E \mid E * E \mid (E) \mid \texttt{id}$$</p>
<p>ë¬¸ìì—´ <code>id + id * id</code>ëŠ” ë‘ ê°œì˜ íŒŒìŠ¤ íŠ¸ë¦¬ë¥¼ ê°€ì§‘ë‹ˆë‹¤:</p>
<p><strong>íŠ¸ë¦¬ 1</strong> (ê³±ì…ˆì´ ë” ê°•í•˜ê²Œ ê²°í•©):</p>
<div class="highlight"><pre><span></span><code>       E
      /|\
     E + E
     |  /|\
    id E * E
       |   |
      id  id
</code></pre></div>

<p>í•´ì„: <code>id + (id * id)</code></p>
<p><strong>íŠ¸ë¦¬ 2</strong> (ë§ì…ˆì´ ë” ê°•í•˜ê²Œ ê²°í•©):</p>
<div class="highlight"><pre><span></span><code>       E
      /|\
     E * E
    /|\   |
   E + E  id
   |   |
  id  id
</code></pre></div>

<p>í•´ì„: <code>(id + id) * id</code></p>
<p>ì´ ë‘ íŒŒìŠ¤ íŠ¸ë¦¬ëŠ” ë™ì¼í•œ í‘œí˜„ì‹ì— ì„œë¡œ ë‹¤ë¥¸ ì˜ë¯¸ë¥¼ ë¶€ì—¬í•©ë‹ˆë‹¤!</p>
<h3 id="_10">ëª¨í˜¸ì„±ì´ ì¤‘ìš”í•œ ì´ìœ <a class="header-link" href="#_10" title="Permanent link">&para;</a></h3>
<ul>
<li>ì„œë¡œ ë‹¤ë¥¸ íŒŒìŠ¤ íŠ¸ë¦¬ $\rightarrow$ ì„œë¡œ ë‹¤ë¥¸ ì˜ë¯¸ë¡ (semantics)</li>
<li>ì»´íŒŒì¼ëŸ¬ëŠ” <strong>ìœ ì¼í•œ</strong> í•´ì„ì„ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤</li>
<li>ë¬¸ë²•ì˜ ëª¨í˜¸ì„±ì€ íŒŒì‹±ì„ ë¹„ê²°ì •ì (nondeterministic)ìœ¼ë¡œ ë§Œë“­ë‹ˆë‹¤</li>
</ul>
<h3 id="inherent-ambiguity">ë³¸ì§ˆì  ëª¨í˜¸ì„±(Inherent Ambiguity)<a class="header-link" href="#inherent-ambiguity" title="Permanent link">&para;</a></h3>
<p>ë¬¸ë§¥ ììœ  <strong>ì–¸ì–´</strong>ê°€ <strong>ë³¸ì§ˆì ìœ¼ë¡œ ëª¨í˜¸(inherently ambiguous)</strong>í•˜ë‹¤ëŠ” ê²ƒì€ ê·¸ ì–¸ì–´ì— ëŒ€í•œ ëª¨ë“  ë¬¸ë²•ì´ ëª¨í˜¸í•˜ë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤. (ì´ëŠ” ë¬¸ë²•ì´ ëª¨í˜¸í•œ ê²ƒê³¼ ë‹¤ë¦…ë‹ˆë‹¤ -- ê°™ì€ ì–¸ì–´ì— ëŒ€í•´ ë¹„ëª¨í˜¸ ë¬¸ë²•ì„ ì°¾ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.)</p>
<p>ê³ ì „ì ì¸ ì˜ˆì‹œ:</p>
<p>$$L = \{a^i b^j c^k \mid i = j \text{ ë˜ëŠ” } j = k\}$$</p>
<p>ì´ ì–¸ì–´ëŠ” ë³¸ì§ˆì ìœ¼ë¡œ ëª¨í˜¸í•©ë‹ˆë‹¤. ë¬¸ìì—´ $a^n b^n c^n$ì€ $i = j$ë¥¼ ë§ì¶”ê±°ë‚˜ $j = k$ë¥¼ ë§ì¶”ëŠ” ë°©ì‹ìœ¼ë¡œ íŒŒì‹±ë  ìˆ˜ ìˆìœ¼ë©°, ì´ ì–¸ì–´ì— ëŒ€í•œ ë¹„ëª¨í˜¸ ë¬¸ë²•ì€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
<h3 id="_11">ëª¨í˜¸ì„± ê°ì§€<a class="header-link" href="#_11" title="Permanent link">&para;</a></h3>
<p><strong>ê²°ì • ë¶ˆê°€(Undecidable)</strong>: ì„ì˜ì˜ CFGê°€ ì£¼ì–´ì§ˆ ë•Œ ê·¸ê²ƒì´ ëª¨í˜¸í•œì§€ ê²°ì •í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. (ì´ëŠ” Postì˜ ëŒ€ì‘ ë¬¸ì œ(Post's Correspondence Problem)ë¡œ í™˜ì›ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.)</p>
<p>ê·¸ëŸ¬ë‚˜ íŠ¹ì • ì¢…ë¥˜ì˜ ë¬¸ë²•(LL(1), LR(1))ì€ ë¹„ëª¨í˜¸ì„ì´ ë³´ì¥ë©ë‹ˆë‹¤.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">check_ambiguity_brute_force</span><span class="p">(</span><span class="n">grammar</span><span class="p">:</span> <span class="n">Grammar</span><span class="p">,</span> <span class="n">max_length</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">6</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Brute-force check: enumerate all leftmost derivations up to a given</span>
<span class="sd">    string length and check for strings with multiple derivations.</span>

<span class="sd">    WARNING: Exponential complexity. Only for very small grammars.</span>
<span class="sd">    Returns list of (string, count) for ambiguous strings.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">defaultdict</span>

    <span class="n">derivation_count</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">derive</span><span class="p">(</span><span class="n">sentential_form</span><span class="p">,</span> <span class="n">depth</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Enumerate all leftmost derivations.&quot;&quot;&quot;</span>
        <span class="c1"># Check if all terminals</span>
        <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">grammar</span><span class="o">.</span><span class="n">is_terminal</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">sentential_form</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sentential_form</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">max_length</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sentential_form</span><span class="p">)</span>
                <span class="n">derivation_count</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">return</span>

        <span class="c1"># Prune: too many symbols</span>
        <span class="n">terminal_count</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">sentential_form</span> <span class="k">if</span> <span class="n">grammar</span><span class="o">.</span><span class="n">is_terminal</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">terminal_count</span> <span class="o">&gt;</span> <span class="n">max_length</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">depth</span> <span class="o">&gt;</span> <span class="n">max_length</span> <span class="o">*</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="c1"># Find leftmost variable</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">sym</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sentential_form</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">grammar</span><span class="o">.</span><span class="n">is_variable</span><span class="p">(</span><span class="n">sym</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">prod</span> <span class="ow">in</span> <span class="n">grammar</span><span class="o">.</span><span class="n">prod_index</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sym</span><span class="p">,</span> <span class="p">[]):</span>
                    <span class="n">new_form</span> <span class="o">=</span> <span class="n">sentential_form</span><span class="p">[:</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">prod</span><span class="o">.</span><span class="n">body</span><span class="p">)</span> <span class="o">+</span> <span class="n">sentential_form</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>
                    <span class="n">derive</span><span class="p">(</span><span class="n">new_form</span><span class="p">,</span> <span class="n">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                <span class="k">break</span>

    <span class="n">derive</span><span class="p">([</span><span class="n">grammar</span><span class="o">.</span><span class="n">start</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>

    <span class="n">ambiguous</span> <span class="o">=</span> <span class="p">[(</span><span class="n">s</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">derivation_count</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">c</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">ambiguous</span>


<span class="c1"># Test with the ambiguous grammar</span>
<span class="n">ambig_grammar</span> <span class="o">=</span> <span class="n">Grammar</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">E -&gt; E + E | E * E | ( E ) | id</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== Ambiguity Check ===</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">check_ambiguity_brute_force</span><span class="p">(</span><span class="n">ambig_grammar</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="k">if</span> <span class="n">results</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Ambiguous strings found:&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  &#39;</span><span class="si">{</span><span class="n">s</span><span class="si">}</span><span class="s2">&#39; has </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2"> distinct leftmost derivations&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No ambiguity found (up to given length)&quot;</span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="6">6. ëª¨í˜¸ì„± í•´ì†Œ<a class="header-link" href="#6" title="Permanent link">&para;</a></h2>
<h3 id="1-operator-precedence">ì „ëµ 1: ì—°ì‚°ì ìš°ì„ ìˆœìœ„(Operator Precedence)<a class="header-link" href="#1-operator-precedence" title="Permanent link">&para;</a></h3>
<p>ìš°ì„ ìˆœìœ„ ìˆ˜ì¤€ë³„ë¡œ ë¹„ë‹¨ë§ ê³„ì¸µì„ ë„ì…í•©ë‹ˆë‹¤:</p>
<div class="highlight"><pre><span></span><code><span class="n">Level</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="n">lowest</span><span class="p">)</span><span class="o">:</span><span class="w">   </span><span class="n">E</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">T</span><span class="w">        </span><span class="p">(</span><span class="n">addition</span><span class="p">)</span>
<span class="n">Level</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="w">            </span><span class="n">T</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">F</span><span class="w">        </span><span class="p">(</span><span class="n">multiplication</span><span class="p">)</span>
<span class="n">Level</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="n">highest</span><span class="p">)</span><span class="o">:</span><span class="w">  </span><span class="n">F</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">       </span><span class="p">(</span><span class="n">atoms</span><span class="p">)</span>
</code></pre></div>

<p>ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ ì—°ì‚°ìëŠ” ë¬¸ë²•ì—ì„œ ë” ê¹Šì´ ìœ„ì¹˜í•˜ë¯€ë¡œ ë” ê°•í•˜ê²Œ ê²°í•©ë©ë‹ˆë‹¤.</p>
<p>ë„¤ ìˆ˜ì¤€ì˜ ìš°ì„ ìˆœìœ„ë¥¼ ê°€ì§„ ì–¸ì–´:</p>
<div class="highlight"><pre><span></span><code><span class="n">expr</span><span class="w">   </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">or_t</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">or_t</span><span class="w">            </span><span class="c1">// Level 0: logical OR</span>
<span class="n">or_t</span><span class="w">   </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">or_t</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">and_t</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">and_t</span><span class="w">          </span><span class="c1">// Level 1: logical AND</span>
<span class="n">and_t</span><span class="w">  </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">and_t</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">rel_t</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">rel_t</span><span class="w">         </span><span class="c1">// Level 2: equality</span>
<span class="n">rel_t</span><span class="w">  </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">rel_t</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">factor</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">factor</span><span class="w">        </span><span class="c1">// Level 3: relational</span>
<span class="n">factor</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">num</span><span class="w">            </span><span class="c1">// Level 4: atoms</span>
</code></pre></div>

<h3 id="2-associativity">ì „ëµ 2: ê²°í•©ì„±(Associativity)<a class="header-link" href="#2-associativity" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>ì¢Œê²°í•©(left-associative)</strong> ì—°ì‚°ìëŠ” <strong>ì¢Œì¬ê·€(left recursion)</strong> ì‚¬ìš©: $E \rightarrow E + T$</li>
<li>
<p><code>a + b + c</code>ëŠ” <code>(a + b) + c</code>ë¡œ íŒŒì‹±ë©ë‹ˆë‹¤</p>
</li>
<li>
<p><strong>ìš°ê²°í•©(right-associative)</strong> ì—°ì‚°ìëŠ” <strong>ìš°ì¬ê·€(right recursion)</strong> ì‚¬ìš©: $E \rightarrow T = E$</p>
</li>
<li>
<p><code>a = b = c</code>ëŠ” <code>a = (b = c)</code>ë¡œ íŒŒì‹±ë©ë‹ˆë‹¤</p>
</li>
<li>
<p><strong>ë¹„ê²°í•©(non-associative)</strong> ì—°ì‚°ì: ê°™ì€ ìˆ˜ì¤€ì—ì„œ ì¬ê·€ ì—†ìŒ</p>
</li>
<li><code>a &lt; b &lt; c</code>ëŠ” êµ¬ë¬¸ ì˜¤ë¥˜</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="cp"># Left-associative: a + b + c = (a + b) + c</span>
<span class="n">E</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">T</span>

<span class="cp"># Right-associative: a = b = c = a = (b = c)</span>
<span class="n">E</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">T</span>

<span class="cp"># Non-associative: a &lt; b is ok, a &lt; b &lt; c is error</span>
<span class="n">E</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">T</span>
</code></pre></div>

<h3 id="3">ì „ëµ 3: ì™¸ë¶€ ëª¨í˜¸ì„± í•´ì†Œ ê·œì¹™<a class="header-link" href="#3" title="Permanent link">&para;</a></h3>
<p>ì¼ë¶€ íŒŒì„œ ìƒì„±ê¸°ëŠ” ìš°ì„ ìˆœìœ„ì™€ ê²°í•©ì„±ì„ ë¬¸ë²•ì— ì¸ì½”ë”©í•˜ëŠ” ëŒ€ì‹  <strong>ì™¸ë¶€ì ìœ¼ë¡œ</strong> ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<div class="highlight"><pre><span></span><code><span class="cm">/* Yacc/Bison precedence declarations */</span>
<span class="nf">%left</span><span class="w"> </span><span class="sc">&#39;+&#39;</span><span class="w"> </span><span class="sc">&#39;-&#39;</span><span class="w">         </span><span class="cm">/* lowest precedence, left-associative */</span>
<span class="nf">%left</span><span class="w"> </span><span class="sc">&#39;*&#39;</span><span class="w"> </span><span class="sc">&#39;/&#39;</span><span class="w">         </span><span class="cm">/* higher precedence, left-associative */</span>
<span class="nf">%right</span><span class="w"> </span><span class="n">UMINUS</span><span class="w">         </span><span class="cm">/* highest precedence, right-associative (unary minus) */</span>

<span class="o">%%</span>
<span class="nl">expr</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="sc">&#39;+&#39;</span><span class="w"> </span><span class="n">expr</span>
<span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="sc">&#39;-&#39;</span><span class="w"> </span><span class="n">expr</span>
<span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="sc">&#39;*&#39;</span><span class="w"> </span><span class="n">expr</span>
<span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="sc">&#39;/&#39;</span><span class="w"> </span><span class="n">expr</span>
<span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="sc">&#39;-&#39;</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="nf">%prec</span><span class="w"> </span><span class="n">UMINUS</span>
<span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="sc">&#39;(&#39;</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="sc">&#39;)&#39;</span>
<span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">NUMBER</span>
<span class="w">     </span><span class="p">;</span>
</code></pre></div>

<p>ì´ ë°©ë²•ì€ ë¬¸ë²•ì„ ë‹¨ìˆœí•˜ê²Œ(ê·¸ë¦¬ê³  ëª¨í˜¸í•˜ê²Œ) ìœ ì§€í•˜ë©´ì„œ ëª…ì‹œì  ê·œì¹™ìœ¼ë¡œ ëª¨í˜¸ì„±ì„ í•´ì†Œí•©ë‹ˆë‹¤.</p>
<h3 id="4-elsedangling-else">ì „ëµ 4: ë§¤ë‹¬ë¦° else(Dangling Else) ë¬¸ì œ<a class="header-link" href="#4-elsedangling-else" title="Permanent link">&para;</a></h3>
<p><strong>ë§¤ë‹¬ë¦° else</strong>ëŠ” ê³ ì „ì ì¸ ëª¨í˜¸ì„± ë¬¸ì œì…ë‹ˆë‹¤:</p>
<div class="highlight"><pre><span></span><code><span class="n">stmt</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">stmt</span>
<span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">stmt</span><span class="w"> </span><span class="n">else</span><span class="w"> </span><span class="n">stmt</span>
<span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">other</span>
</code></pre></div>

<p><code>if E1 then if E2 then S1 else S2</code>ì— ëŒ€í•´ ë‘ ê°œì˜ íŒŒìŠ¤ íŠ¸ë¦¬ê°€ ì¡´ì¬í•©ë‹ˆë‹¤:</p>
<div class="highlight"><pre><span></span><code><span class="nv">Parse</span><span class="w"> </span><span class="nv">tree</span><span class="w"> </span><span class="mi">1</span>:<span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">E1</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="ss">(</span><span class="k">if</span><span class="w"> </span><span class="nv">E2</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="nv">S1</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="nv">S2</span><span class="ss">)</span><span class="w">     </span><span class="o">--</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">inner</span><span class="w"> </span><span class="k">if</span>
<span class="nv">Parse</span><span class="w"> </span><span class="nv">tree</span><span class="w"> </span><span class="mi">2</span>:<span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">E1</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="ss">(</span><span class="k">if</span><span class="w"> </span><span class="nv">E2</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="nv">S1</span><span class="ss">)</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="nv">S2</span><span class="w">      </span><span class="o">--</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">outer</span><span class="w"> </span><span class="k">if</span>
</code></pre></div>

<p><strong>í•´ì†Œ</strong>: ê´€ë¡€ì ìœ¼ë¡œ <code>else</code>ëŠ” <strong>ê°€ì¥ ê°€ê¹Œìš´ ë§¤ì¹­ë˜ì§€ ì•Šì€</strong> <code>if</code>ì™€ ì—°ê²°ë©ë‹ˆë‹¤. ì´ëŠ” ë¬¸ë²•ìœ¼ë¡œ ì¸ì½”ë”©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<div class="highlight"><pre><span></span><code><span class="n">stmt</span><span class="w">         </span><span class="o">-&gt;</span><span class="w"> </span><span class="nf">matched</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">unmatched</span>
<span class="nf">matched</span><span class="w">      </span><span class="o">-&gt;</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="nf">matched</span><span class="w"> </span><span class="n">else</span><span class="w"> </span><span class="nf">matched</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">other</span>
<span class="n">unmatched</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">stmt</span>
<span class="w">              </span><span class="o">|</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="nf">matched</span><span class="w"> </span><span class="n">else</span><span class="w"> </span><span class="n">unmatched</span>
</code></pre></div>

<p>ë˜ëŠ” ì™¸ë¶€ì ìœ¼ë¡œ í•´ì†Œ: ëŒ€ë¶€ë¶„ì˜ íŒŒì„œ ìƒì„±ê¸°ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ <code>else</code>ë¥¼ ê°€ì¥ ê°€ê¹Œìš´ <code>if</code>ì™€ ì—°ê²°í•©ë‹ˆë‹¤.</p>
<h3 id="python_4">Python ì˜ˆì‹œ: ëª¨í˜¸ì„± í•´ì†Œ<a class="header-link" href="#python_4" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Ambiguous grammar for expressions</span>
<span class="n">ambiguous</span> <span class="o">=</span> <span class="n">Grammar</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">E -&gt; E + E | E * E | ( E ) | id</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>

<span class="c1"># Unambiguous grammar (precedence + left-associativity)</span>
<span class="n">unambiguous</span> <span class="o">=</span> <span class="n">Grammar</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">E -&gt; E + T | T</span>
<span class="s2">T -&gt; T * F | F</span>
<span class="s2">F -&gt; ( E ) | id</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== Ambiguous Grammar ===&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ambiguous</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== Unambiguous Grammar (same language) ===&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">unambiguous</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>

<span class="c1"># Verify they generate the same strings (for small strings)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">generate_strings</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span> <span class="n">max_depth</span><span class="o">=</span><span class="mi">8</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate all strings derivable up to a certain derivation depth.&quot;&quot;&quot;</span>
    <span class="n">strings</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">derive</span><span class="p">(</span><span class="n">form</span><span class="p">,</span> <span class="n">depth</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">depth</span> <span class="o">&gt;</span> <span class="n">max_depth</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">grammar</span><span class="o">.</span><span class="n">is_terminal</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">form</span><span class="p">):</span>
            <span class="n">strings</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">form</span><span class="p">))</span>
            <span class="k">return</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">sym</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">form</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">grammar</span><span class="o">.</span><span class="n">is_variable</span><span class="p">(</span><span class="n">sym</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">prod</span> <span class="ow">in</span> <span class="n">grammar</span><span class="o">.</span><span class="n">prod_index</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sym</span><span class="p">,</span> <span class="p">[]):</span>
                    <span class="n">new_form</span> <span class="o">=</span> <span class="n">form</span><span class="p">[:</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">prod</span><span class="o">.</span><span class="n">body</span><span class="p">)</span> <span class="o">+</span> <span class="n">form</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>
                    <span class="n">derive</span><span class="p">(</span><span class="n">new_form</span><span class="p">,</span> <span class="n">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                <span class="k">break</span>

    <span class="n">derive</span><span class="p">([</span><span class="n">grammar</span><span class="o">.</span><span class="n">start</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">strings</span><span class="p">}</span>

<span class="n">strings_ambig</span> <span class="o">=</span> <span class="n">generate_strings</span><span class="p">(</span><span class="n">ambiguous</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="n">strings_unambig</span> <span class="o">=</span> <span class="n">generate_strings</span><span class="p">(</span><span class="n">unambiguous</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Ambiguous grammar generates </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">strings_ambig</span><span class="p">)</span><span class="si">}</span><span class="s2"> strings (depth 6)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unambiguous grammar generates </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">strings_unambig</span><span class="p">)</span><span class="si">}</span><span class="s2"> strings (depth 8)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Strings in ambiguous but not unambiguous: </span><span class="si">{</span><span class="n">strings_ambig</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">strings_unambig</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Strings in unambiguous but not ambiguous: </span><span class="si">{</span><span class="n">strings_unambig</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">strings_ambig</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="7-chomsky-normal-form-cnf">7. ì´˜ìŠ¤í‚¤ ì •ê·œí˜•(Chomsky Normal Form, CNF)<a class="header-link" href="#7-chomsky-normal-form-cnf" title="Permanent link">&para;</a></h2>
<p>CFGê°€ <strong>ì´˜ìŠ¤í‚¤ ì •ê·œí˜•(Chomsky Normal Form)</strong>ì´ë ¤ë©´ ëª¨ë“  ìƒì„± ê·œì¹™ì´ ë‹¤ìŒ í˜•íƒœ ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•©ë‹ˆë‹¤:</p>
<ol>
<li>$A \rightarrow BC$ (ë‘ ë¹„ë‹¨ë§, $B, C \in V$)</li>
<li>$A \rightarrow a$ ($a \in \Sigma$, í•˜ë‚˜ì˜ ë‹¨ë§)</li>
<li>$S \rightarrow \epsilon$ (ì˜¤ì§ $\epsilon \in L(G)$ì¸ ê²½ìš°ì—ë§Œ, ê·¸ë¦¬ê³  $S$ëŠ” ì–´ë–¤ ìš°ë³€ì—ë„ ë‚˜íƒ€ë‚˜ì§€ ì•ŠìŒ)</li>
</ol>
<h3 id="cnf">CNFê°€ ì¤‘ìš”í•œ ì´ìœ <a class="header-link" href="#cnf" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>CYK íŒŒì‹± ì•Œê³ ë¦¬ì¦˜</strong>ì€ CNFë¥¼ ìš”êµ¬í•©ë‹ˆë‹¤ (9ì ˆ ì°¸ì¡°)</li>
<li>CNFì˜ ëª¨ë“  íŒŒìŠ¤ íŠ¸ë¦¬ëŠ” <strong>ì´ì§„ íŠ¸ë¦¬(binary tree)</strong>ì…ë‹ˆë‹¤ (ë¶„ì„ì— ìœ ìš©)</li>
<li>ëª¨ë“  CFGëŠ” ë™ë“±í•œ CNF ë¬¸ë²•ìœ¼ë¡œ ë³€í™˜ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤</li>
<li>CNFì—ì„œ ê¸¸ì´ $n$ì¸ ë¬¸ìì—´ì˜ ìœ ë„ëŠ” ì •í™•íˆ $2n - 1$ ë‹¨ê³„ë¥¼ ê°€ì§‘ë‹ˆë‹¤</li>
</ul>
<h3 id="cnf_1">CNFë¡œ ë³€í™˜<a class="header-link" href="#cnf_1" title="Permanent link">&para;</a></h3>
<p><strong>ì…ë ¥</strong>: CFG $G = (V, \Sigma, P, S)$
<strong>ì¶œë ¥</strong>: CNFì˜ ë™ë“±í•œ CFG $G'$</p>
<p><strong>ë‹¨ê³„ 1: $\epsilon$-ìƒì„± ê·œì¹™ ì œê±°</strong> ($S \rightarrow \epsilon$ì€ í•„ìš”ì— ë”°ë¼ ì˜ˆì™¸)</p>
<p><strong>ë„ê°€ëŠ¥(nullable)</strong> ë³€ìˆ˜ ì°¾ê¸°: $A$ê°€ ë„ê°€ëŠ¥í•˜ë©´ $A \xRightarrow{*} \epsilon$ì…ë‹ˆë‹¤.</p>
<p>ê° ìƒì„± ê·œì¹™ $B \rightarrow \alpha$ì— ëŒ€í•´, ë„ê°€ëŠ¥ ê¸°í˜¸ì˜ ê°€ëŠ¥í•œ ëª¨ë“  ë¶€ë¶„ ì§‘í•©ì´ ì œê±°ëœ ìƒˆ ìƒì„± ê·œì¹™ì„ ì¶”ê°€í•©ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ëª¨ë“  $\epsilon$-ìƒì„± ê·œì¹™ì„ ì‚­ì œí•©ë‹ˆë‹¤(í•„ìš”í•œ ê²½ìš° $S \rightarrow \epsilon$ ì œì™¸).</p>
<p><strong>ë‹¨ê³„ 2: ë‹¨ìœ„ ìƒì„± ê·œì¹™ ì œê±°</strong> ($A \rightarrow B$)</p>
<p>ëª¨ë“  ë‹¨ìœ„ ìŒ ì°¾ê¸°: $(A, B)$ (ë‹¨ìœ„ ìƒì„± ê·œì¹™ë§Œ ì‚¬ìš©í•˜ì—¬ $A \xRightarrow{*} B$ì¸ ê²½ìš°). ê° ë‹¨ìœ„ ì²´ì¸ì„ ì§ì ‘ ìƒì„± ê·œì¹™ìœ¼ë¡œ ëŒ€ì²´í•©ë‹ˆë‹¤.</p>
<p><strong>ë‹¨ê³„ 3: ê¸´ ìƒì„± ê·œì¹™ êµì²´</strong></p>
<p>$A \rightarrow B_1 B_2 \cdots B_k$ ($k > 2$)ë¥¼ ë‹¤ìŒìœ¼ë¡œ êµì²´í•©ë‹ˆë‹¤:</p>
<p>$$A \rightarrow B_1 C_1$$
$$C_1 \rightarrow B_2 C_2$$
$$\vdots$$
$$C_{k-2} \rightarrow B_{k-1} B_k$$</p>
<p><strong>ë‹¨ê³„ 4: ë‹¨ë§-ë¹„ë‹¨ë§ í˜¼í•© êµì²´</strong></p>
<p>$|\alpha| \geq 2$ì¸ ìƒì„± ê·œì¹™ $A \rightarrow \alpha$ì—ì„œ, ê° ë‹¨ë§ $a$ë¥¼ ìƒˆ ë³€ìˆ˜ $T_a$ë¡œ êµì²´í•˜ê³  $T_a \rightarrow a$ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.</p>
<h3 id="python_5">Python êµ¬í˜„<a class="header-link" href="#python_5" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_cnf</span><span class="p">(</span><span class="n">grammar</span><span class="p">:</span> <span class="n">Grammar</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Grammar</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert a grammar to Chomsky Normal Form.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">variables</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">grammar</span><span class="o">.</span><span class="n">variables</span><span class="p">)</span>
    <span class="n">terminals</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">grammar</span><span class="o">.</span><span class="n">terminals</span><span class="p">)</span>
    <span class="n">productions</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">grammar</span><span class="o">.</span><span class="n">productions</span><span class="p">)</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">grammar</span><span class="o">.</span><span class="n">start</span>

    <span class="n">aux_counter</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">new_var</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;X&quot;</span><span class="p">):</span>
        <span class="n">aux_counter</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">aux_counter</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">variables</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">name</span>

    <span class="c1"># ============================================================</span>
    <span class="c1"># Step 0: New start symbol (ensure S doesn&#39;t appear on RHS)</span>
    <span class="c1"># ============================================================</span>
    <span class="n">rhs_symbols</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">productions</span><span class="p">:</span>
        <span class="n">rhs_symbols</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">start</span> <span class="ow">in</span> <span class="n">rhs_symbols</span><span class="p">:</span>
        <span class="n">new_start</span> <span class="o">=</span> <span class="n">new_var</span><span class="p">(</span><span class="s2">&quot;S&quot;</span><span class="p">)</span>
        <span class="n">productions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Production</span><span class="p">(</span><span class="n">new_start</span><span class="p">,</span> <span class="p">(</span><span class="n">start</span><span class="p">,)))</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">new_start</span>

    <span class="c1"># ============================================================</span>
    <span class="c1"># Step 1: Remove Îµ-productions</span>
    <span class="c1"># ============================================================</span>

    <span class="c1"># Find nullable variables</span>
    <span class="n">nullable</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="n">changed</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">while</span> <span class="n">changed</span><span class="p">:</span>
        <span class="n">changed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">productions</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">p</span><span class="o">.</span><span class="n">body</span> <span class="ow">or</span> <span class="nb">all</span><span class="p">(</span><span class="n">s</span> <span class="ow">in</span> <span class="n">nullable</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">head</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">nullable</span><span class="p">:</span>
                    <span class="n">nullable</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">head</span><span class="p">)</span>
                    <span class="n">changed</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="c1"># Generate new productions with nullable symbols optionally removed</span>
    <span class="n">new_prods</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">productions</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">:</span>
            <span class="c1"># Îµ-production: only keep for start symbol</span>
            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">head</span> <span class="o">==</span> <span class="n">start</span><span class="p">:</span>
                <span class="n">new_prods</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
            <span class="k">continue</span>

        <span class="c1"># Find all positions with nullable symbols</span>
        <span class="n">nullable_positions</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">)</span> <span class="k">if</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">nullable</span><span class="p">]</span>

        <span class="c1"># Generate all subsets of nullable positions</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">itertools</span><span class="w"> </span><span class="kn">import</span> <span class="n">combinations</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">nullable_positions</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">positions_to_remove</span> <span class="ow">in</span> <span class="n">combinations</span><span class="p">(</span><span class="n">nullable_positions</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
                <span class="n">new_body</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span>
                    <span class="n">s</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">positions_to_remove</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">new_body</span><span class="p">:</span>  <span class="c1"># Don&#39;t add empty unless it&#39;s start</span>
                    <span class="n">new_prods</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Production</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">head</span><span class="p">,</span> <span class="n">new_body</span><span class="p">))</span>
                <span class="k">elif</span> <span class="n">p</span><span class="o">.</span><span class="n">head</span> <span class="o">==</span> <span class="n">start</span><span class="p">:</span>
                    <span class="n">new_prods</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Production</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">head</span><span class="p">,</span> <span class="p">()))</span>

    <span class="n">productions</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">new_prods</span><span class="p">)</span>

    <span class="c1"># ============================================================</span>
    <span class="c1"># Step 2: Remove unit productions (A -&gt; B)</span>
    <span class="c1"># ============================================================</span>

    <span class="c1"># Find unit pairs using transitive closure</span>
    <span class="n">unit_pairs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">:</span>
        <span class="n">unit_pairs</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">v</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>  <span class="c1"># Reflexive</span>

    <span class="n">changed</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">while</span> <span class="n">changed</span><span class="p">:</span>
        <span class="n">changed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">productions</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">:</span>
                <span class="k">for</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">unit_pairs</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">b</span> <span class="o">==</span> <span class="n">p</span><span class="o">.</span><span class="n">head</span><span class="p">:</span>
                        <span class="n">new_pair</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                        <span class="k">if</span> <span class="n">new_pair</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">unit_pairs</span><span class="p">:</span>
                            <span class="n">unit_pairs</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">new_pair</span><span class="p">)</span>
                            <span class="n">changed</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="c1"># Replace unit productions</span>
    <span class="n">new_prods</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">productions</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">:</span>
            <span class="k">continue</span>  <span class="c1"># Skip unit productions</span>

        <span class="c1"># For each unit pair (A, B) where B is the head of this production</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="ow">in</span> <span class="n">unit_pairs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">b</span> <span class="o">==</span> <span class="n">p</span><span class="o">.</span><span class="n">head</span><span class="p">:</span>
                <span class="n">new_prods</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Production</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">))</span>

    <span class="n">productions</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">new_prods</span><span class="p">)</span>

    <span class="c1"># ============================================================</span>
    <span class="c1"># Step 3: Replace terminals in mixed productions</span>
    <span class="c1"># ============================================================</span>
    <span class="n">term_vars</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># terminal -&gt; variable name</span>
    <span class="n">additional</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">final_prods</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">productions</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">final_prods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
            <span class="k">continue</span>

        <span class="c1"># Replace terminals with new variables</span>
        <span class="n">new_body</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">sym</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sym</span> <span class="ow">in</span> <span class="n">terminals</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">sym</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">term_vars</span><span class="p">:</span>
                    <span class="n">tv</span> <span class="o">=</span> <span class="n">new_var</span><span class="p">(</span><span class="s2">&quot;T&quot;</span><span class="p">)</span>
                    <span class="n">term_vars</span><span class="p">[</span><span class="n">sym</span><span class="p">]</span> <span class="o">=</span> <span class="n">tv</span>
                    <span class="n">additional</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Production</span><span class="p">(</span><span class="n">tv</span><span class="p">,</span> <span class="p">(</span><span class="n">sym</span><span class="p">,)))</span>
                <span class="n">new_body</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">term_vars</span><span class="p">[</span><span class="n">sym</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">new_body</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sym</span><span class="p">)</span>
        <span class="n">final_prods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Production</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">head</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">new_body</span><span class="p">)))</span>

    <span class="n">productions</span> <span class="o">=</span> <span class="n">final_prods</span> <span class="o">+</span> <span class="n">additional</span>

    <span class="c1"># ============================================================</span>
    <span class="c1"># Step 4: Break long productions into binary</span>
    <span class="c1"># ============================================================</span>
    <span class="n">final_prods</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">productions</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">final_prods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
            <span class="k">continue</span>

        <span class="c1"># A -&gt; B1 B2 B3 ... Bk  =&gt;  A -&gt; B1 C1, C1 -&gt; B2 C2, ..., Ck-2 -&gt; Bk-1 Bk</span>
        <span class="n">symbols</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
        <span class="n">current_head</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">head</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">symbols</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">new_head</span> <span class="o">=</span> <span class="n">new_var</span><span class="p">(</span><span class="s2">&quot;C&quot;</span><span class="p">)</span>
            <span class="n">final_prods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Production</span><span class="p">(</span><span class="n">current_head</span><span class="p">,</span> <span class="p">(</span><span class="n">symbols</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">new_head</span><span class="p">)))</span>
            <span class="n">symbols</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
            <span class="n">current_head</span> <span class="o">=</span> <span class="n">new_head</span>
        <span class="n">final_prods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Production</span><span class="p">(</span><span class="n">current_head</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">symbols</span><span class="p">)))</span>

    <span class="n">productions</span> <span class="o">=</span> <span class="n">final_prods</span>

    <span class="k">return</span> <span class="n">Grammar</span><span class="p">(</span><span class="n">variables</span><span class="p">,</span> <span class="n">terminals</span><span class="p">,</span> <span class="n">productions</span><span class="p">,</span> <span class="n">start</span><span class="p">)</span>


<span class="c1"># Example</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== CNF Conversion ===</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">expr_g</span> <span class="o">=</span> <span class="n">Grammar</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">E -&gt; E + T | T</span>
<span class="s2">T -&gt; T * F | F</span>
<span class="s2">F -&gt; ( E ) | id</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Original grammar:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">expr_g</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>

<span class="n">cnf</span> <span class="o">=</span> <span class="n">to_cnf</span><span class="p">(</span><span class="n">expr_g</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CNF grammar:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">cnf</span><span class="o">.</span><span class="n">productions</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">head</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">)):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">p</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Verify: check that some strings are still derivable</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Verification (derivability check):&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;id + id&quot;</span><span class="p">,</span> <span class="s2">&quot;id * id&quot;</span><span class="p">,</span> <span class="s2">&quot;id + id * id&quot;</span><span class="p">]:</span>
    <span class="n">symbols</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="c1"># We&#39;ll verify using CYK (next section)</span>
</code></pre></div>

<hr />
<h2 id="8-greibach-normal-form-gnf">8. ê·¸ë¼ì´ë°”í ì •ê·œí˜•(Greibach Normal Form, GNF)<a class="header-link" href="#8-greibach-normal-form-gnf" title="Permanent link">&para;</a></h2>
<p>CFGê°€ <strong>ê·¸ë¼ì´ë°”í ì •ê·œí˜•(Greibach Normal Form)</strong>ì´ë ¤ë©´ ëª¨ë“  ìƒì„± ê·œì¹™ì´ ë‹¤ìŒ í˜•íƒœì—¬ì•¼ í•©ë‹ˆë‹¤:</p>
<p>$$A \rightarrow a B_1 B_2 \cdots B_k$$</p>
<p>ì—¬ê¸°ì„œ $a \in \Sigma$ì´ê³  $B_1, \ldots, B_k \in V$ ($k \geq 0$).</p>
<p>ì¦‰, ëª¨ë“  ìƒì„± ê·œì¹™ì€ ì •í™•íˆ í•˜ë‚˜ì˜ ë‹¨ë§ë¡œ ì‹œì‘í•˜ê³ , ê·¸ ë’¤ì— 0ê°œ ì´ìƒì˜ ë¹„ë‹¨ë§ì´ ë”°ë¼ì˜µë‹ˆë‹¤.</p>
<h3 id="_12">ì†ì„±<a class="header-link" href="#_12" title="Permanent link">&para;</a></h3>
<ol>
<li>GNFì˜ ê° ìœ ë„ ë‹¨ê³„ëŠ” ì •í™•íˆ í•˜ë‚˜ì˜ ë‹¨ë§ì„ ì†Œë¹„í•©ë‹ˆë‹¤</li>
<li>ê¸¸ì´ $n$ì¸ ë¬¸ìì—´ì€ ì •í™•íˆ $n$ë²ˆì˜ ìœ ë„ ë‹¨ê³„ë¥¼ í•„ìš”ë¡œ í•©ë‹ˆë‹¤($\epsilon$-ìƒì„± ê·œì¹™ ì—†ìŒ, $S \rightarrow \epsilon$ì€ ê°€ëŠ¥)</li>
<li>GNFëŠ” í‘¸ì‹œë‹¤ìš´ ì˜¤í† ë§ˆíƒ€ êµ¬ì„±ì— ìœ ìš©í•©ë‹ˆë‹¤</li>
<li>GNFë¡œì˜ ë³€í™˜ì€ ì¢Œì¬ê·€ ì œê±°ê°€ í•„ìš”í•©ë‹ˆë‹¤ (ë ˆìŠ¨ 5ì—ì„œ ë‹¤ë£¸)</li>
</ol>
<h3 id="_13">ì •ê·œí˜• ë¹„êµ<a class="header-link" href="#_13" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>ì†ì„±</th>
<th>CNF</th>
<th>GNF</th>
</tr>
</thead>
<tbody>
<tr>
<td>ìƒì„± ê·œì¹™ í˜•íƒœ</td>
<td>$A \rightarrow BC$ ë˜ëŠ” $A \rightarrow a$</td>
<td>$A \rightarrow a\alpha$ ($\alpha \in V^*$)</td>
</tr>
<tr>
<td>íŒŒìŠ¤ íŠ¸ë¦¬ í˜•íƒœ</td>
<td>ì´ì§„ íŠ¸ë¦¬</td>
<td>ë†’ì€ ë¶„ê¸° ì¸ìˆ˜</td>
</tr>
<tr>
<td>$|w| = n$ì— ëŒ€í•œ ìœ ë„ ê¸¸ì´</td>
<td>$2n - 1$</td>
<td>$n$</td>
</tr>
<tr>
<td>ì£¼ìš” ìš©ë„</td>
<td>CYK ì•Œê³ ë¦¬ì¦˜</td>
<td>PDA êµ¬ì„±</td>
</tr>
<tr>
<td>ì¢Œì¬ê·€ í—ˆìš© ì—¬ë¶€</td>
<td>í—ˆìš©</td>
<td>ë¶ˆí—ˆ</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="9-cyk">9. CYK ì•Œê³ ë¦¬ì¦˜<a class="header-link" href="#9-cyk" title="Permanent link">&para;</a></h2>
<p><strong>ì½”í¬-ì˜ê±°-ì¹´ì‚¬ë¯¸(Cocke-Younger-Kasami, CYK) ì•Œê³ ë¦¬ì¦˜</strong>ì€ CNFì˜ ë¬¸ë²• $G$ì— ëŒ€í•´ ë¬¸ìì—´ $w$ê°€ $L(G)$ì— ì†í•˜ëŠ”ì§€ íŒë‹¨í•˜ëŠ” ë™ì  í”„ë¡œê·¸ë˜ë° ì•Œê³ ë¦¬ì¦˜ì…ë‹ˆë‹¤. íŒŒìŠ¤ íŠ¸ë¦¬ë„ êµ¬ì„±í•©ë‹ˆë‹¤.</p>
<h3 id="_14">ì•Œê³ ë¦¬ì¦˜<a class="header-link" href="#_14" title="Permanent link">&para;</a></h3>
<p><strong>ì…ë ¥</strong>: CNFì˜ ë¬¸ë²• $G$, ë¬¸ìì—´ $w = a_1 a_2 \cdots a_n$
<strong>ì¶œë ¥</strong>: $w \in L(G)$ ì—¬ë¶€, ë° íŒŒìŠ¤ í…Œì´ë¸”</p>
<p><strong>ì•„ì´ë””ì–´</strong>: ì‚¼ê°í˜• í…Œì´ë¸” $T$ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤. $T[i][j]$ëŠ” ë¶€ë¶„ ë¬¸ìì—´ $a_i a_{i+1} \cdots a_j$ë¥¼ ìœ ë„í•  ìˆ˜ ìˆëŠ” ë³€ìˆ˜ë“¤ì˜ ì§‘í•©ì…ë‹ˆë‹¤.</p>
<p>$$T[i][j] = \{A \in V \mid A \xRightarrow{*} a_i a_{i+1} \cdots a_j\}$$</p>
<p><strong>ì•Œê³ ë¦¬ì¦˜</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Base</span><span class="w"> </span><span class="k">case</span><span class="err">:</span><span class="w"> </span><span class="n">substrings</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="mi">1</span>
<span class="w">   </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="nl">n</span><span class="p">:</span>
<span class="w">       </span><span class="n">T</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">i</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span><span class="n">A</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">aáµ¢</span><span class="w"> </span><span class="err">âˆˆ</span><span class="w"> </span><span class="n">P</span><span class="err">}</span>

<span class="mf">2.</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Inductive</span><span class="w"> </span><span class="k">case</span><span class="err">:</span><span class="w"> </span><span class="n">substrings</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="p">...,</span><span class="w"> </span><span class="n">n</span>
<span class="w">   </span><span class="k">for</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="nl">n</span><span class="p">:</span>
<span class="w">       </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="err">:</span>
<span class="w">           </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span>
<span class="w">           </span><span class="n">T</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">âˆ…</span>
<span class="w">           </span><span class="k">for</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="err">:</span>
<span class="w">               </span><span class="k">for</span><span class="w"> </span><span class="k">each</span><span class="w"> </span><span class="n">production</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nl">BC</span><span class="p">:</span>
<span class="w">                   </span><span class="k">if</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="err">âˆˆ</span><span class="w"> </span><span class="n">T</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">k</span><span class="o">]</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="err">âˆˆ</span><span class="w"> </span><span class="n">T</span><span class="o">[</span><span class="n">k+1</span><span class="o">][</span><span class="n">j</span><span class="o">]</span><span class="err">:</span>
<span class="w">                       </span><span class="n">T</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span><span class="w"> </span><span class="err">âˆª</span><span class="w"> </span><span class="err">{</span><span class="n">A</span><span class="err">}</span>

<span class="mf">3.</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Accept</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">start</span><span class="w"> </span><span class="n">symbol</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">top</span><span class="o">-</span><span class="nf">right</span><span class="w"> </span><span class="n">cell</span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="err">âˆˆ</span><span class="w"> </span><span class="n">T</span><span class="o">[</span><span class="n">1</span><span class="o">][</span><span class="n">n</span><span class="o">]</span>
</code></pre></div>

<p><strong>ì‹œê°„ ë³µì¡ë„</strong>: $O(n^3 \cdot |P|)$
<strong>ê³µê°„ ë³µì¡ë„</strong>: $O(n^2)$</p>
<h3 id="_15">ê³„ì‚° ì˜ˆì‹œ<a class="header-link" href="#_15" title="Permanent link">&para;</a></h3>
<p>CNFì˜ ë¬¸ë²•:</p>
<p>$$S \rightarrow AB \mid BC$$
$$A \rightarrow BA \mid a$$
$$B \rightarrow CC \mid b$$
$$C \rightarrow AB \mid a$$</p>
<p><code>"baaba"</code> íŒŒì‹±:</p>
<div class="highlight"><pre><span></span><code><span class="nl">String</span><span class="p">:</span><span class="w">  </span><span class="n">b</span><span class="w">   </span><span class="n">a</span><span class="w">   </span><span class="n">a</span><span class="w">   </span><span class="n">b</span><span class="w">   </span><span class="n">a</span>
<span class="k">Index</span><span class="err">:</span><span class="w">   </span><span class="mi">1</span><span class="w">   </span><span class="mi">2</span><span class="w">   </span><span class="mi">3</span><span class="w">   </span><span class="mi">4</span><span class="w">   </span><span class="mi">5</span>

<span class="nc">Table</span><span class="w"> </span><span class="n">T</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span><span class="err">:</span>

<span class="n">i</span><span class="err">\</span><span class="n">j</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w">      </span><span class="mi">2</span><span class="w">       </span><span class="mi">3</span><span class="w">       </span><span class="mi">4</span><span class="w">       </span><span class="mi">5</span>
<span class="c1">----+-------------------------------------------</span>
<span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="err">{</span><span class="n">B</span><span class="err">}</span><span class="w">   </span><span class="err">{</span><span class="n">S</span><span class="p">,</span><span class="n">A</span><span class="err">}</span><span class="w">  </span><span class="err">{</span><span class="n">B</span><span class="err">}</span><span class="w">     </span><span class="err">{</span><span class="n">S</span><span class="p">,</span><span class="n">A</span><span class="p">,</span><span class="n">C</span><span class="err">}</span><span class="w"> </span><span class="err">{</span><span class="n">B</span><span class="err">}</span>
<span class="w"> </span><span class="mi">2</span><span class="w">  </span><span class="o">|</span><span class="w">        </span><span class="err">{</span><span class="n">A</span><span class="p">,</span><span class="n">C</span><span class="err">}</span><span class="w">  </span><span class="err">{</span><span class="n">S</span><span class="p">,</span><span class="n">C</span><span class="err">}</span><span class="w">   </span><span class="err">{</span><span class="n">B</span><span class="err">}</span><span class="w">    </span><span class="err">{</span><span class="n">S</span><span class="p">,</span><span class="n">A</span><span class="p">,</span><span class="n">C</span><span class="err">}</span>
<span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="o">|</span><span class="w">               </span><span class="err">{</span><span class="n">A</span><span class="p">,</span><span class="n">C</span><span class="err">}</span><span class="w">   </span><span class="err">{</span><span class="n">S</span><span class="p">,</span><span class="n">A</span><span class="err">}</span><span class="w">  </span><span class="err">{</span><span class="n">B</span><span class="err">}</span>
<span class="w"> </span><span class="mi">4</span><span class="w">  </span><span class="o">|</span><span class="w">                        </span><span class="err">{</span><span class="n">B</span><span class="err">}</span><span class="w">   </span><span class="err">{</span><span class="n">S</span><span class="p">,</span><span class="n">A</span><span class="p">,</span><span class="n">C</span><span class="err">}</span>
<span class="w"> </span><span class="mi">5</span><span class="w">  </span><span class="o">|</span><span class="w">                               </span><span class="err">{</span><span class="n">A</span><span class="p">,</span><span class="n">C</span><span class="err">}</span>
</code></pre></div>

<p>ë‹¨ê³„ë³„ ê³„ì‚°:</p>
<p><strong>ê¸¸ì´ 1</strong> (ëŒ€ê°ì„ ):
- $T[1][1]$: $b$ëŠ” $B \rightarrow b$ì™€ ì¼ì¹˜, ë”°ë¼ì„œ $\{B\}$
- $T[2][2]$: $a$ëŠ” $A \rightarrow a$ì™€ $C \rightarrow a$ì™€ ì¼ì¹˜, ë”°ë¼ì„œ $\{A, C\}$
- ìœ„ì¹˜ 3, 4, 5ì— ëŒ€í•´ ë§ˆì°¬ê°€ì§€</p>
<p><strong>ê¸¸ì´ 2</strong>:
- $T[1][2]$: $k=1$ì—ì„œ ë¶„í• : $T[1][1] \times T[2][2] = \{B\} \times \{A,C\}$
  - $B, A$: $? \rightarrow BA$ í™•ì¸: $A \rightarrow BA$ëŠ” $A$ë¥¼, $S \rightarrow BC$ëŠ” $(B,C)$ í•„ìš”: $B \in T[1][1]$ì´ê³  $C \in T[2][2]$ì´ë¯€ë¡œ $S$.
  - $A \rightarrow BA$: $B \in T[1][1]$ì´ê³  $A \in T[2][2]$ì´ë¯€ë¡œ $A$.
  - ê²°ê³¼: $\{S, A\}$</p>
<p>(ë‚˜ë¨¸ì§€ ì…€ë“¤ì— ëŒ€í•´ ë§ˆì°¬ê°€ì§€ë¡œ ê³„ì†...)</p>
<p>$S \in T[1][5]$ì´ë¯€ë¡œ ë¬¸ìì—´ <code>"baaba"</code>ëŠ” ì–¸ì–´ì— ì†í•©ë‹ˆë‹¤.</p>
<h3 id="python_6">Python êµ¬í˜„<a class="header-link" href="#python_6" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">cyk_parse</span><span class="p">(</span><span class="n">grammar</span><span class="p">:</span> <span class="n">Grammar</span><span class="p">,</span> <span class="n">word</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    CYK parsing algorithm.</span>
<span class="sd">    Grammar must be in Chomsky Normal Form.</span>
<span class="sd">    word is a space-separated string of terminals.</span>

<span class="sd">    Returns (accepted, table) where table[i][j] is the set of</span>
<span class="sd">    variables that can derive word[i..j].</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">symbols</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">symbols</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># Check if S -&gt; Îµ exists</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">grammar</span><span class="o">.</span><span class="n">prod_index</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">grammar</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="p">[]):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="p">[])</span>

    <span class="c1"># Initialize table: T[i][j] = set of variables</span>
    <span class="c1"># Using 0-indexed</span>
    <span class="n">T</span> <span class="o">=</span> <span class="p">[[</span><span class="nb">set</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>

    <span class="c1"># Also store back-pointers for parse tree construction</span>
    <span class="c1"># back[i][j][A] = (B, C, k) meaning A -&gt; BC, B derives [i..k], C derives [k+1..j]</span>
    <span class="n">back</span> <span class="o">=</span> <span class="p">[[{}</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>

    <span class="c1"># Step 1: Base case (length 1)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">grammar</span><span class="o">.</span><span class="n">productions</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">symbols</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                <span class="n">T</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">head</span><span class="p">)</span>
                <span class="n">back</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="n">p</span><span class="o">.</span><span class="n">head</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;terminal&#39;</span><span class="p">,</span> <span class="n">symbols</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

    <span class="c1"># Step 2: Fill table for increasing lengths</span>
    <span class="k">for</span> <span class="n">length</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="n">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">j</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">length</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">):</span>
                <span class="c1"># Try all productions A -&gt; BC</span>
                <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">grammar</span><span class="o">.</span><span class="n">productions</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                        <span class="n">B</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">body</span>
                        <span class="k">if</span> <span class="n">B</span> <span class="ow">in</span> <span class="n">T</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="ow">and</span> <span class="n">C</span> <span class="ow">in</span> <span class="n">T</span><span class="p">[</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="p">]:</span>
                            <span class="n">T</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">head</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">head</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">back</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]:</span>
                                <span class="n">back</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="n">p</span><span class="o">.</span><span class="n">head</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;split&#39;</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>

    <span class="n">accepted</span> <span class="o">=</span> <span class="n">grammar</span><span class="o">.</span><span class="n">start</span> <span class="ow">in</span> <span class="n">T</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="c1"># Print table</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;CYK Table for &#39;</span><span class="si">{</span><span class="n">word</span><span class="si">}</span><span class="s2">&#39;:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">col_width</span> <span class="o">=</span> <span class="mi">12</span>
    <span class="n">header</span> <span class="o">=</span> <span class="s2">&quot;i</span><span class="se">\\</span><span class="s2">j |&quot;</span> <span class="o">+</span> <span class="s2">&quot;|&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">j</span><span class="si">:</span><span class="s2">^</span><span class="si">{</span><span class="n">col_width</span><span class="si">}}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">header</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">cells</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">:</span>
                <span class="n">cells</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="n">col_width</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">cell</span> <span class="o">=</span> <span class="s2">&quot;{&quot;</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]))</span> <span class="o">+</span> <span class="s2">&quot;}&quot;</span> <span class="k">if</span> <span class="n">T</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="k">else</span> <span class="s2">&quot;âˆ…&quot;</span>
                <span class="n">cells</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">cell</span><span class="si">:</span><span class="s2">^</span><span class="si">{</span><span class="n">col_width</span><span class="si">}}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">  |&quot;</span> <span class="o">+</span> <span class="s2">&quot;|&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cells</span><span class="p">))</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Accepted: </span><span class="si">{</span><span class="n">accepted</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Build parse tree</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">build_tree</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">):</span>
        <span class="n">info</span> <span class="o">=</span> <span class="n">back</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">info</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="p">[</span><span class="n">ParseTreeNode</span><span class="p">(</span><span class="s2">&quot;?&quot;</span><span class="p">,</span> <span class="n">is_terminal</span><span class="o">=</span><span class="kc">True</span><span class="p">)])</span>
        <span class="k">if</span> <span class="n">info</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;terminal&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="p">[</span><span class="n">ParseTreeNode</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">is_terminal</span><span class="o">=</span><span class="kc">True</span><span class="p">)])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="n">info</span>
            <span class="n">left</span> <span class="o">=</span> <span class="n">build_tree</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
            <span class="n">right</span> <span class="o">=</span> <span class="n">build_tree</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="p">[</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">])</span>

    <span class="k">if</span> <span class="n">accepted</span><span class="p">:</span>
        <span class="n">tree</span> <span class="o">=</span> <span class="n">build_tree</span><span class="p">(</span><span class="n">grammar</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Parse tree:&quot;</span><span class="p">)</span>
        <span class="n">tree</span><span class="o">.</span><span class="n">pretty_print</span><span class="p">()</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">accepted</span><span class="p">,</span> <span class="n">T</span><span class="p">)</span>


<span class="c1"># Example: CYK parsing</span>
<span class="n">cnf_grammar</span> <span class="o">=</span> <span class="n">Grammar</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">S -&gt; A B | B C</span>
<span class="s2">A -&gt; B A | a</span>
<span class="s2">B -&gt; C C | b</span>
<span class="s2">C -&gt; A B | a</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== CYK Parsing ===</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Grammar:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cnf_grammar</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>

<span class="n">cyk_parse</span><span class="p">(</span><span class="n">cnf_grammar</span><span class="p">,</span> <span class="s2">&quot;b a a b a&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="n">cyk_parse</span><span class="p">(</span><span class="n">cnf_grammar</span><span class="p">,</span> <span class="s2">&quot;a b&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="n">cyk_parse</span><span class="p">(</span><span class="n">cnf_grammar</span><span class="p">,</span> <span class="s2">&quot;b b b&quot;</span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="10-pushdown-automata">10. í‘¸ì‹œë‹¤ìš´ ì˜¤í† ë§ˆíƒ€(Pushdown Automata) ê°œìš”<a class="header-link" href="#10-pushdown-automata" title="Permanent link">&para;</a></h2>
<p><strong>í‘¸ì‹œë‹¤ìš´ ì˜¤í† ë§ˆíƒ€(Pushdown Automaton, PDA)</strong>ëŠ” <strong>ìŠ¤íƒ(stack)</strong>ìœ¼ë¡œ ê°•í™”ëœ ìœ í•œ ì˜¤í† ë§ˆíƒ€ì…ë‹ˆë‹¤. PDAëŠ” ì •í™•íˆ ë¬¸ë§¥ ììœ  ì–¸ì–´ë¥¼ ì¸ì‹í•©ë‹ˆë‹¤.</p>
<h3 id="_16">í˜•ì‹ì  ì •ì˜<a class="header-link" href="#_16" title="Permanent link">&para;</a></h3>
<p>PDAëŠ” 7-íŠœí”Œ(7-tuple)ì…ë‹ˆë‹¤:</p>
<p>$$M = (Q, \Sigma, \Gamma, \delta, q_0, Z_0, F)$$</p>
<p>ì—¬ê¸°ì„œ:</p>
<ul>
<li>$Q$ëŠ” ìƒíƒœì˜ ìœ í•œ ì§‘í•©</li>
<li>$\Sigma$ëŠ” ì…ë ¥ ì•ŒíŒŒë²³</li>
<li>$\Gamma$ëŠ” <strong>ìŠ¤íƒ ì•ŒíŒŒë²³(stack alphabet)</strong></li>
<li>$\delta: Q \times (\Sigma \cup \{\epsilon\}) \times \Gamma \rightarrow \mathcal{P}(Q \times \Gamma^*)$ëŠ” ì „ì´ í•¨ìˆ˜</li>
<li>$q_0 \in Q$ëŠ” ì‹œì‘ ìƒíƒœ</li>
<li>$Z_0 \in \Gamma$ëŠ” ì´ˆê¸° ìŠ¤íƒ ê¸°í˜¸</li>
<li>$F \subseteq Q$ëŠ” ìˆ˜ë½ ìƒíƒœì˜ ì§‘í•©</li>
</ul>
<h3 id="pda">PDAì˜ ì‘ë™ ë°©ì‹<a class="header-link" href="#pda" title="Permanent link">&para;</a></h3>
<p>ê° ë‹¨ê³„ì—ì„œ ë‹¤ìŒì— ê¸°ë°˜í•˜ì—¬:
1. í˜„ì¬ ìƒíƒœ
2. í˜„ì¬ ì…ë ¥ ê¸°í˜¸ (ë˜ëŠ” $\epsilon$, ì…ë ¥ ì—†ìŒ)
3. ìŠ¤íƒì˜ ë§¨ ìœ„</p>
<p>PDAëŠ”:
1. ìƒˆë¡œìš´ ìƒíƒœë¡œ ì´ë™í•©ë‹ˆë‹¤
2. ì„ íƒì ìœ¼ë¡œ ì…ë ¥ ê¸°í˜¸ë¥¼ ì†Œë¹„í•©ë‹ˆë‹¤
3. ìŠ¤íƒì˜ ë§¨ ìœ„ë¥¼ 0ê°œ ì´ìƒì˜ ê¸°í˜¸ë¡œ êµì²´í•©ë‹ˆë‹¤</p>
<h3 id="cfg_1">CFGì™€ì˜ ë™ë“±ì„±<a class="header-link" href="#cfg_1" title="Permanent link">&para;</a></h3>
<p><strong>ì •ë¦¬</strong>: ì–¸ì–´ê°€ ë¬¸ë§¥ ììœ ì¸ ê²ƒì€ ì–´ë–¤ PDAì— ì˜í•´ ì¸ì‹ë˜ëŠ” ê²ƒê³¼ ë™ì¹˜ì…ë‹ˆë‹¤.</p>
<p><strong>CFG $\rightarrow$ PDA</strong>: ëª¨ë“  CFGì— ëŒ€í•´, ìµœì¢Œë‹¨ ìœ ë„ë¥¼ ì‹œë®¬ë ˆì´ì…˜í•˜ëŠ” PDAë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. PDAëŠ” ìŠ¤íƒì„ ì‚¬ìš©í•˜ì—¬ ìœ ë„ë  ë‚¨ì€ ê¸°í˜¸ë“¤ì„ ì¶”ì í•©ë‹ˆë‹¤.</p>
<p><strong>PDA $\rightarrow$ CFG</strong>: ëª¨ë“  PDAì— ëŒ€í•´, CFGë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ êµ¬ì„±ì€ "PDAê°€ $A$ë¥¼ ìŠ¤íƒì—ì„œ íŒí•˜ë©´ì„œ ìƒíƒœ $q_i$ì—ì„œ ìƒíƒœ $q_j$ë¡œ ì´ë™í•œë‹¤"ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë³€ìˆ˜ $[q_i, A, q_j]$ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p>
<h3 id="python-pda">Python: ê°„ë‹¨í•œ PDA ì‹œë®¬ë ˆì´ì…˜<a class="header-link" href="#python-pda" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PDA</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Simple Pushdown Automaton simulation.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transitions</span><span class="p">,</span> <span class="n">start_state</span><span class="p">,</span> <span class="n">start_stack</span><span class="p">,</span> <span class="n">accept_states</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        transitions: dict mapping (state, input_or_eps, stack_top) -&gt;</span>
<span class="sd">                     list of (new_state, stack_push)</span>
<span class="sd">        stack_push is a tuple: () means pop, (&#39;A&#39;,) means replace with A,</span>
<span class="sd">                                (&#39;A&#39;, &#39;B&#39;) means replace top with A then push B</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transitions</span> <span class="o">=</span> <span class="n">transitions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_state</span> <span class="o">=</span> <span class="n">start_state</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_stack</span> <span class="o">=</span> <span class="n">start_stack</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">accept_states</span> <span class="o">=</span> <span class="n">accept_states</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">accepts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the PDA accepts the word (by final state).&quot;&quot;&quot;</span>
        <span class="c1"># Configuration: (state, remaining_input_pos, stack)</span>
        <span class="c1"># Use BFS to explore all nondeterministic choices</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">deque</span>

        <span class="n">initial</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start_state</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start_stack</span><span class="p">,))</span>
        <span class="n">queue</span> <span class="o">=</span> <span class="n">deque</span><span class="p">([</span><span class="n">initial</span><span class="p">])</span>
        <span class="n">visited</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="n">symbols</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="k">if</span> <span class="n">word</span> <span class="k">else</span> <span class="p">[]</span>

        <span class="k">while</span> <span class="n">queue</span><span class="p">:</span>
            <span class="n">state</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">stack</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>

            <span class="n">config</span> <span class="o">=</span> <span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">stack</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">config</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>

            <span class="c1"># Check acceptance</span>
            <span class="k">if</span> <span class="n">pos</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">symbols</span><span class="p">)</span> <span class="ow">and</span> <span class="n">state</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">accept_states</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">stack</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">top</span> <span class="o">=</span> <span class="n">stack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">rest</span> <span class="o">=</span> <span class="n">stack</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

            <span class="c1"># Try epsilon transitions</span>
            <span class="k">for</span> <span class="n">new_state</span><span class="p">,</span> <span class="n">push</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">transitions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="s1">&#39;Îµ&#39;</span><span class="p">,</span> <span class="n">top</span><span class="p">),</span> <span class="p">[]</span>
            <span class="p">):</span>
                <span class="n">new_stack</span> <span class="o">=</span> <span class="n">rest</span> <span class="o">+</span> <span class="n">push</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_stack</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>  <span class="c1"># Bound stack size</span>
                    <span class="n">queue</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">new_state</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">new_stack</span><span class="p">))</span>

            <span class="c1"># Try input transitions</span>
            <span class="k">if</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">symbols</span><span class="p">):</span>
                <span class="n">ch</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">new_state</span><span class="p">,</span> <span class="n">push</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">transitions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                    <span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">ch</span><span class="p">,</span> <span class="n">top</span><span class="p">),</span> <span class="p">[]</span>
                <span class="p">):</span>
                    <span class="n">new_stack</span> <span class="o">=</span> <span class="n">rest</span> <span class="o">+</span> <span class="n">push</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_stack</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
                        <span class="n">queue</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">new_state</span><span class="p">,</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">new_stack</span><span class="p">))</span>

        <span class="k">return</span> <span class="kc">False</span>


<span class="c1"># PDA for {a^n b^n | n &gt;= 0}</span>
<span class="c1"># States: q0 (push a&#39;s), q1 (pop a&#39;s matching b&#39;s), q_accept</span>
<span class="n">pda_anbn</span> <span class="o">=</span> <span class="n">PDA</span><span class="p">(</span>
    <span class="n">transitions</span><span class="o">=</span><span class="p">{</span>
        <span class="c1"># In q0, push a&#39;s onto stack</span>
        <span class="p">(</span><span class="s1">&#39;q0&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;Z&#39;</span><span class="p">):</span> <span class="p">[(</span><span class="s1">&#39;q0&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;Z&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">))],</span>    <span class="c1"># Push A, keep Z</span>
        <span class="p">(</span><span class="s1">&#39;q0&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">):</span> <span class="p">[(</span><span class="s1">&#39;q0&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">))],</span>    <span class="c1"># Push A</span>
        <span class="c1"># Switch to q1 when seeing b</span>
        <span class="p">(</span><span class="s1">&#39;q0&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">):</span> <span class="p">[(</span><span class="s1">&#39;q1&#39;</span><span class="p">,</span> <span class="p">())],</span>             <span class="c1"># Pop A</span>
        <span class="c1"># In q0, accept empty string</span>
        <span class="p">(</span><span class="s1">&#39;q0&#39;</span><span class="p">,</span> <span class="s1">&#39;Îµ&#39;</span><span class="p">,</span> <span class="s1">&#39;Z&#39;</span><span class="p">):</span> <span class="p">[(</span><span class="s1">&#39;q_accept&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;Z&#39;</span><span class="p">,))],</span>
        <span class="c1"># In q1, pop a&#39;s matching b&#39;s</span>
        <span class="p">(</span><span class="s1">&#39;q1&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">):</span> <span class="p">[(</span><span class="s1">&#39;q1&#39;</span><span class="p">,</span> <span class="p">())],</span>             <span class="c1"># Pop A</span>
        <span class="c1"># Accept when stack has only Z</span>
        <span class="p">(</span><span class="s1">&#39;q1&#39;</span><span class="p">,</span> <span class="s1">&#39;Îµ&#39;</span><span class="p">,</span> <span class="s1">&#39;Z&#39;</span><span class="p">):</span> <span class="p">[(</span><span class="s1">&#39;q_accept&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;Z&#39;</span><span class="p">,))],</span>
    <span class="p">},</span>
    <span class="n">start_state</span><span class="o">=</span><span class="s1">&#39;q0&#39;</span><span class="p">,</span>
    <span class="n">start_stack</span><span class="o">=</span><span class="s1">&#39;Z&#39;</span><span class="p">,</span>
    <span class="n">accept_states</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;q_accept&#39;</span><span class="p">}</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== PDA for {a^n b^n | n &gt;= 0} ===</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;ab&quot;</span><span class="p">,</span> <span class="s2">&quot;aabb&quot;</span><span class="p">,</span> <span class="s2">&quot;aaabbb&quot;</span><span class="p">,</span> <span class="s2">&quot;aab&quot;</span><span class="p">,</span> <span class="s2">&quot;abb&quot;</span><span class="p">,</span> <span class="s2">&quot;ba&quot;</span><span class="p">,</span> <span class="s2">&quot;abab&quot;</span><span class="p">]:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="s2">&quot;accept&quot;</span> <span class="k">if</span> <span class="n">pda_anbn</span><span class="o">.</span><span class="n">accepts</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;reject&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  &#39;</span><span class="si">{</span><span class="n">w</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="11">11. ë¬¸ë§¥ ììœ  ì–¸ì–´ì— ëŒ€í•œ íŒí•‘ ë³´ì¡° ì •ë¦¬<a class="header-link" href="#11" title="Permanent link">&para;</a></h2>
<h3 id="_17">ì„œìˆ <a class="header-link" href="#_17" title="Permanent link">&para;</a></h3>
<p>$L$ì´ ë¬¸ë§¥ ììœ  ì–¸ì–´ì´ë©´, $|w| \geq p$ì¸ $L$ì˜ ëª¨ë“  ë¬¸ìì—´ $w$ë¥¼ ë‹¤ì„¯ ë¶€ë¶„ìœ¼ë¡œ ë¶„í• í•  ìˆ˜ ìˆëŠ” ìƒìˆ˜ $p \geq 1$ì´ ì¡´ì¬í•©ë‹ˆë‹¤:</p>
<p>$$w = uvxyz$$</p>
<p>ë‹¤ìŒ ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´ì„œ:</p>
<ol>
<li>$|vy| > 0$ ($v$ì™€ $y$ ì¤‘ ì ì–´ë„ í•˜ë‚˜ëŠ” ë¹„ì–´ìˆì§€ ì•ŠìŒ)</li>
<li>$|vxy| \leq p$</li>
<li>$\forall i \geq 0: uv^ixy^iz \in L$ ($v$ì™€ $y$ë¥¼ í•¨ê»˜ íŒí•‘)</li>
</ol>
<h3 id="_18">ì¦ëª… ì•„ì´ë””ì–´<a class="header-link" href="#_18" title="Permanent link">&para;</a></h3>
<p>ì¶©ë¶„íˆ ê¸´ ë¬¸ìì—´ì€ ë†’ì´ê°€ $|V|$ (ë³€ìˆ˜ì˜ ìˆ˜)ë³´ë‹¤ í° ìœ ë„ íŠ¸ë¦¬ë¥¼ ê°€ì ¸ì•¼ í•©ë‹ˆë‹¤. ë¹„ë‘˜ê¸°ì§‘ ì›ë¦¬(pigeonhole principle)ì— ì˜í•´, ë£¨íŠ¸ì—ì„œ ìê¹Œì§€ì˜ ì–´ë–¤ ê²½ë¡œì—ì„œ ë³€ìˆ˜ $A$ê°€ ë°˜ë³µë˜ì–´ì•¼ í•©ë‹ˆë‹¤:</p>
<div class="highlight"><pre><span></span><code>        S
       / \
      /   \
     /     \
    A       &lt;-- first occurrence of A
   / \
  v   A    &lt;-- second occurrence of A
     / \
    x   y
</code></pre></div>

<p>ì²« ë²ˆì§¸ $A$ë¥¼ ë£¨íŠ¸ë¡œ í•˜ëŠ” ë¶€ë¶„ íŠ¸ë¦¬ëŠ” $vxy$ë¥¼ ìƒì„±í•˜ê³ , ë‘ ë²ˆì§¸ $A$ë¥¼ ë£¨íŠ¸ë¡œ í•˜ëŠ” ë¶€ë¶„ íŠ¸ë¦¬ëŠ” $x$ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ë‘ $A$ ì‚¬ì´ì˜ ë¶€ë¶„ì„ ë°˜ë³µí•˜ê±°ë‚˜ ì œê±°í•¨ìœ¼ë¡œì¨ "íŒí•‘"í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h3 id="cfl">CFL íŒí•‘ ë³´ì¡° ì •ë¦¬ ì‚¬ìš©ë²•<a class="header-link" href="#cfl" title="Permanent link">&para;</a></h3>
<p>ì–¸ì–´ê°€ ë¬¸ë§¥ ììœ ê°€ ì•„ë‹˜ì„ ì¦ëª…í•˜ê¸° ìœ„í•´:</p>
<ol>
<li>$L$ì´ ë¬¸ë§¥ ììœ ë¼ê³  ê°€ì •í•©ë‹ˆë‹¤</li>
<li>$p$ë¥¼ íŒí•‘ ê¸¸ì´ë¼ê³  í•©ë‹ˆë‹¤</li>
<li>$|w| \geq p$ì¸ íŠ¹ì • $w \in L$ì„ ì„ íƒí•©ë‹ˆë‹¤</li>
<li>$|vy| > 0$ì´ê³  $|vxy| \leq p$ì¸ <strong>ëª¨ë“ </strong> ë¶„í•´ $w = uvxyz$ì— ëŒ€í•´, $uv^ixy^iz \notin L$ì¸ $i$ê°€ ì¡´ì¬í•¨ì„ ë³´ì…ë‹ˆë‹¤</li>
<li>ëª¨ìˆœ ë„ì¶œ</li>
</ol>
<h3 id="latex198">ì˜ˆì‹œ: $L = \{a^n b^n c^n \mid n \geq 0\}$ì€ ë¬¸ë§¥ ììœ ê°€ ì•„ë‹˜<a class="header-link" href="#latex198" title="Permanent link">&para;</a></h3>
<p><strong>ì¦ëª…</strong>:</p>
<ol>
<li>íŒí•‘ ê¸¸ì´ $p$ë¡œ $L$ì´ ë¬¸ë§¥ ììœ ë¼ê³  ê°€ì •í•©ë‹ˆë‹¤.</li>
<li>$w = a^p b^p c^p \in L$ì„ ì„ íƒí•©ë‹ˆë‹¤. $|w| = 3p \geq p$.</li>
<li>$|vy| > 0$ì´ê³  $|vxy| \leq p$ì¸ $w = uvxyz$ë¡œ ë¶„í•´í•©ë‹ˆë‹¤.</li>
<li>$|vxy| \leq p$ì´ë¯€ë¡œ, ë¶€ë¶„ ë¬¸ìì—´ $vxy$ëŠ” ì„¸ ê·¸ë£¹($a$, $b$, $c$) ì¤‘ ìµœëŒ€ ë‘ ê·¸ë£¹ì— ê±¸ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
<li>ê²½ìš° ë¶„ì„:</li>
<li>$vxy$ê°€ $a^p$ ë‚´ì—: íŒí•‘í•˜ë©´ $a$ ê°œìˆ˜ëŠ” ë³€í•˜ì§€ë§Œ $b$ë‚˜ $c$ëŠ” ë³€í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</li>
<li>$vxy$ê°€ $a^p b^p$ ë‚´ì—: íŒí•‘í•˜ë©´ $a$ì™€/ë˜ëŠ” $b$ëŠ” ë³€í•˜ì§€ë§Œ $c$ëŠ” ë³€í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</li>
<li>$vxy$ê°€ $b^p$ ë‚´ì—: íŒí•‘í•˜ë©´ $b$ëŠ” ë³€í•˜ì§€ë§Œ $a$ë‚˜ $c$ëŠ” ë³€í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</li>
<li>$vxy$ê°€ $b^p c^p$ ë‚´ì—: íŒí•‘í•˜ë©´ $b$ì™€/ë˜ëŠ” $c$ëŠ” ë³€í•˜ì§€ë§Œ $a$ëŠ” ë³€í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</li>
<li>$vxy$ê°€ $c^p$ ë‚´ì—: íŒí•‘í•˜ë©´ $c$ëŠ” ë³€í•˜ì§€ë§Œ $a$ë‚˜ $b$ëŠ” ë³€í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</li>
<li>ëª¨ë“  ê²½ìš°ì—ì„œ, íŒí•‘ ($i = 2$)ì€ ì„¸ ì¹´ìš´íŠ¸ê°€ ë¶ˆê· ë“±í•œ ë¬¸ìì—´ì„ ìƒì„±í•˜ë¯€ë¡œ $uv^2xy^2z \notin L$ì…ë‹ˆë‹¤.</li>
<li>ëª¨ìˆœ. $\blacksquare$</li>
</ol>
<h3 id="_19">ë¬¸ë§¥ ììœ ë¥¼ ë„˜ì–´ì„œëŠ” ì–¸ì–´ë“¤<a class="header-link" href="#_19" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>ì–¸ì–´</th>
<th>ìœ í˜•</th>
<th>ë¹„ë¬¸ë§¥ ììœ ì¸ ì´ìœ </th>
</tr>
</thead>
<tbody>
<tr>
<td>$\{a^n b^n c^n \mid n \geq 0\}$</td>
<td>ë¬¸ë§¥ ê°ì‘ì </td>
<td>ì„¸ ë°©í–¥ ë§¤ì¹­ í•„ìš”</td>
</tr>
<tr>
<td>$\{ww \mid w \in \{a,b\}^*\}$</td>
<td>ë¬¸ë§¥ ê°ì‘ì </td>
<td>ë³µì‚¬ ì–¸ì–´</td>
</tr>
<tr>
<td>$\{a^{2^n} \mid n \geq 0\}$</td>
<td>ë¬¸ë§¥ ê°ì‘ì </td>
<td>ì§€ìˆ˜ì  ì¦ê°€</td>
</tr>
<tr>
<td>ì„ì˜ì˜ ê²°ì • ê°€ëŠ¥í•œ ì–¸ì–´</td>
<td>Type 0 ì´í•˜</td>
<td>íŠœë§ ê¸°ê³„ í•„ìš”</td>
</tr>
</tbody>
</table>
<p>ì°¸ê³ : $\{a^n b^n \mid n \geq 0\}$ì€ ë¬¸ë§¥ ììœ ì…ë‹ˆë‹¤. í•œê³„ëŠ” ì„¸ ê°œ ì´ìƒì˜ ë§¤ì¹­ëœ ê·¸ë£¹ì— ìˆìŠµë‹ˆë‹¤.</p>
<hr />
<h2 id="12-chomsky-hierarchy">12. ì´˜ìŠ¤í‚¤ ê³„ì¸µ(Chomsky Hierarchy)<a class="header-link" href="#12-chomsky-hierarchy" title="Permanent link">&para;</a></h2>
<p><strong>ì´˜ìŠ¤í‚¤ ê³„ì¸µ(Chomsky hierarchy)</strong>ì€ í˜•ì‹ ì–¸ì–´ë¥¼ ë„¤ ìˆ˜ì¤€ìœ¼ë¡œ ë¶„ë¥˜í•©ë‹ˆë‹¤:</p>
<table>
<thead>
<tr>
<th>ìœ í˜•</th>
<th>ì´ë¦„</th>
<th>ë¬¸ë²• ì œì•½</th>
<th>ì˜¤í† ë§ˆíƒ€</th>
<th>ì˜ˆì‹œ</th>
</tr>
</thead>
<tbody>
<tr>
<td>3</td>
<td>ì •ê·œ(Regular)</td>
<td>$A \rightarrow aB$ ë˜ëŠ” $A \rightarrow a$</td>
<td>ìœ í•œ ì˜¤í† ë§ˆíƒ€(DFA/NFA)</td>
<td>$a^*b^*$</td>
</tr>
<tr>
<td>2</td>
<td>ë¬¸ë§¥ ììœ (Context-free)</td>
<td>$A \rightarrow \alpha$ ($\alpha \in (V \cup \Sigma)^*$)</td>
<td>í‘¸ì‹œë‹¤ìš´ ì˜¤í† ë§ˆíƒ€</td>
<td>$a^nb^n$</td>
</tr>
<tr>
<td>1</td>
<td>ë¬¸ë§¥ ê°ì‘(Context-sensitive)</td>
<td>$\alpha A \beta \rightarrow \alpha \gamma \beta$ ($|\gamma| \geq 1$)</td>
<td>ì„ í˜• ìœ ê³„ ì˜¤í† ë§ˆíƒ€</td>
<td>$a^nb^nc^n$</td>
</tr>
<tr>
<td>0</td>
<td>ì¬ê·€ ì—´ê±° ê°€ëŠ¥(Recursively enumerable)</td>
<td>ì œí•œ ì—†ìŒ</td>
<td>íŠœë§ ê¸°ê³„</td>
<td>ì •ì§€ ë¬¸ì œì˜ ì—¬(complement)</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code>Hierarchy (proper inclusions):

Regular  âŠ‚  Context-Free  âŠ‚  Context-Sensitive  âŠ‚  Recursively Enumerable
  (Type 3)    (Type 2)         (Type 1)              (Type 0)
</code></pre></div>

<h3 id="_20">ì»´íŒŒì¼ëŸ¬ ì„¤ê³„ì™€ì˜ ê´€ë ¨ì„±<a class="header-link" href="#_20" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>ë‹¨ê³„</th>
<th>ì–¸ì–´ ìœ í˜•</th>
<th>í˜•ì‹ë¡ </th>
</tr>
</thead>
<tbody>
<tr>
<td>ì–´íœ˜ ë¶„ì„(Lexical analysis)</td>
<td>ì •ê·œ (Type 3)</td>
<td>DFA, ì •ê·œ í‘œí˜„ì‹</td>
</tr>
<tr>
<td>êµ¬ë¬¸ ë¶„ì„(Syntax analysis)</td>
<td>ë¬¸ë§¥ ììœ  (Type 2)</td>
<td>CFG, í‘¸ì‹œë‹¤ìš´ ì˜¤í† ë§ˆíƒ€</td>
</tr>
<tr>
<td>ì˜ë¯¸ ë¶„ì„(Semantic analysis)</td>
<td>ë¬¸ë§¥ ê°ì‘ (Type 1)</td>
<td>ì†ì„± ë¬¸ë²•, íƒ€ì… ì‹œìŠ¤í…œ</td>
</tr>
<tr>
<td>ì „ì²´ ì–¸ì–´ ì˜ë¯¸ë¡ </td>
<td>CF ì´ìƒ</td>
<td>íŠœë§ ê¸°ê³„ (ì¼ë°˜ì ìœ¼ë¡œ ê²°ì • ë¶ˆê°€)</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="13">13. ë¬¸ë²• ë³€í™˜<a class="header-link" href="#13" title="Permanent link">&para;</a></h2>
<h3 id="eliminating-left-recursion">ì¢Œì¬ê·€ ì œê±°(Eliminating Left Recursion)<a class="header-link" href="#eliminating-left-recursion" title="Permanent link">&para;</a></h3>
<p>ë¬¸ë²•ì— $A \xRightarrow{+} A\alpha$ì¸ ì–´ë–¤ $\alpha$ì— ëŒ€í•œ ìœ ë„ê°€ ì¡´ì¬í•˜ë©´ <strong>ì¢Œì¬ê·€(left recursion)</strong>ê°€ ìˆìŠµë‹ˆë‹¤. ì¢Œì¬ê·€ëŠ” í•˜í–¥ì‹ íŒŒì„œì— ë¬¸ì œë¥¼ ì¼ìœ¼í‚µë‹ˆë‹¤(ë¬´í•œ ë£¨í”„).</p>
<p><strong>ì§ì ‘ ì¢Œì¬ê·€(Direct left recursion)</strong> ($A \rightarrow A\alpha \mid \beta$):</p>
<p>ë‹¤ìŒìœ¼ë¡œ êµì²´í•©ë‹ˆë‹¤:
$$A \rightarrow \beta A'$$
$$A' \rightarrow \alpha A' \mid \epsilon$$</p>
<p><strong>ì˜ˆì‹œ</strong>:
$$E \rightarrow E + T \mid T$$</p>
<p>ëŠ” ë‹¤ìŒì´ ë©ë‹ˆë‹¤:
$$E \rightarrow T E'$$
$$E' \rightarrow + T E' \mid \epsilon$$</p>
<h3 id="left-factoring">ì¢Œì¸ìˆ˜ë¶„í•´(Left Factoring)<a class="header-link" href="#left-factoring" title="Permanent link">&para;</a></h3>
<p>ë™ì¼í•œ ë¹„ë‹¨ë§ì— ëŒ€í•œ ë‘ ìƒì„± ê·œì¹™ì´ ê³µí†µ ì ‘ë‘ì‚¬ë¥¼ ê³µìœ í•  ë•Œ:</p>
<p>$$A \rightarrow \alpha \beta_1 \mid \alpha \beta_2$$</p>
<p>ë‹¤ìŒìœ¼ë¡œ êµì²´í•©ë‹ˆë‹¤:
$$A \rightarrow \alpha A'$$
$$A' \rightarrow \beta_1 \mid \beta_2$$</p>
<h3 id="python_7">Python êµ¬í˜„<a class="header-link" href="#python_7" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">eliminate_left_recursion</span><span class="p">(</span><span class="n">grammar</span><span class="p">:</span> <span class="n">Grammar</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Grammar</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Eliminate immediate left recursion from all productions.</span>
<span class="sd">    (Does not handle indirect left recursion.)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">new_productions</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">new_variables</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">grammar</span><span class="o">.</span><span class="n">variables</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">grammar</span><span class="o">.</span><span class="n">variables</span><span class="p">):</span>
        <span class="n">prods</span> <span class="o">=</span> <span class="n">grammar</span><span class="o">.</span><span class="n">prod_index</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="p">[])</span>

        <span class="c1"># Separate left-recursive and non-left-recursive productions</span>
        <span class="n">left_recursive</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># A -&gt; A Î±</span>
        <span class="n">non_recursive</span> <span class="o">=</span> <span class="p">[]</span>   <span class="c1"># A -&gt; Î²</span>

        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prods</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">body</span> <span class="ow">and</span> <span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">var</span><span class="p">:</span>
                <span class="n">left_recursive</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>  <span class="c1"># Î± (without leading A)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">non_recursive</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">left_recursive</span><span class="p">:</span>
            <span class="c1"># No left recursion for this variable</span>
            <span class="n">new_productions</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">prods</span><span class="p">)</span>
            <span class="k">continue</span>

        <span class="c1"># Eliminate left recursion</span>
        <span class="c1"># A -&gt; Î²1 | Î²2 | ... | A Î±1 | A Î±2 | ...</span>
        <span class="c1"># becomes:</span>
        <span class="c1"># A  -&gt; Î²1 A&#39; | Î²2 A&#39; | ...</span>
        <span class="c1"># A&#39; -&gt; Î±1 A&#39; | Î±2 A&#39; | ... | Îµ</span>

        <span class="n">new_var</span> <span class="o">=</span> <span class="n">var</span> <span class="o">+</span> <span class="s2">&quot;&#39;&quot;</span>
        <span class="k">while</span> <span class="n">new_var</span> <span class="ow">in</span> <span class="n">new_variables</span><span class="p">:</span>
            <span class="n">new_var</span> <span class="o">+=</span> <span class="s2">&quot;&#39;&quot;</span>
        <span class="n">new_variables</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">new_var</span><span class="p">)</span>

        <span class="c1"># A -&gt; Î²i A&#39;</span>
        <span class="k">for</span> <span class="n">beta</span> <span class="ow">in</span> <span class="n">non_recursive</span><span class="p">:</span>
            <span class="n">new_body</span> <span class="o">=</span> <span class="n">beta</span> <span class="o">+</span> <span class="p">(</span><span class="n">new_var</span><span class="p">,)</span> <span class="k">if</span> <span class="n">beta</span> <span class="k">else</span> <span class="p">(</span><span class="n">new_var</span><span class="p">,)</span>
            <span class="n">new_productions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Production</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">new_body</span><span class="p">))</span>

        <span class="c1"># A&#39; -&gt; Î±i A&#39;</span>
        <span class="k">for</span> <span class="n">alpha</span> <span class="ow">in</span> <span class="n">left_recursive</span><span class="p">:</span>
            <span class="n">new_body</span> <span class="o">=</span> <span class="n">alpha</span> <span class="o">+</span> <span class="p">(</span><span class="n">new_var</span><span class="p">,)</span>
            <span class="n">new_productions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Production</span><span class="p">(</span><span class="n">new_var</span><span class="p">,</span> <span class="n">new_body</span><span class="p">))</span>

        <span class="c1"># A&#39; -&gt; Îµ</span>
        <span class="n">new_productions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Production</span><span class="p">(</span><span class="n">new_var</span><span class="p">,</span> <span class="p">()))</span>

    <span class="k">return</span> <span class="n">Grammar</span><span class="p">(</span>
        <span class="n">new_variables</span><span class="p">,</span> <span class="n">grammar</span><span class="o">.</span><span class="n">terminals</span><span class="p">,</span>
        <span class="n">new_productions</span><span class="p">,</span> <span class="n">grammar</span><span class="o">.</span><span class="n">start</span>
    <span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">left_factor</span><span class="p">(</span><span class="n">grammar</span><span class="p">:</span> <span class="n">Grammar</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Grammar</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Apply left factoring to a grammar.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">new_productions</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">grammar</span><span class="o">.</span><span class="n">productions</span><span class="p">)</span>
    <span class="n">new_variables</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">grammar</span><span class="o">.</span><span class="n">variables</span><span class="p">)</span>
    <span class="n">aux_counter</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">changed</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">while</span> <span class="n">changed</span><span class="p">:</span>
        <span class="n">changed</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># Index by head</span>
        <span class="n">prod_index</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">new_productions</span><span class="p">:</span>
            <span class="n">prod_index</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">head</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

        <span class="n">next_prods</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">processed_vars</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">prod_index</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="k">if</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">processed_vars</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">prods</span> <span class="o">=</span> <span class="n">prod_index</span><span class="p">[</span><span class="n">var</span><span class="p">]</span>

            <span class="c1"># Find longest common prefix among any two productions</span>
            <span class="n">best_prefix</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">best_group</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">prods</span><span class="p">)):</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">prods</span><span class="p">)):</span>
                    <span class="c1"># Find common prefix</span>
                    <span class="n">prefix</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">prods</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">body</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">prods</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">body</span><span class="p">))):</span>
                        <span class="k">if</span> <span class="n">prods</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">==</span> <span class="n">prods</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="n">k</span><span class="p">]:</span>
                            <span class="n">prefix</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prods</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">break</span>

                    <span class="k">if</span> <span class="n">prefix</span> <span class="ow">and</span> <span class="p">(</span><span class="n">best_prefix</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">best_prefix</span><span class="p">)):</span>
                        <span class="n">best_prefix</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span>
                        <span class="c1"># Find all productions sharing this prefix</span>
                        <span class="n">group</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prods</span> <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">)]</span> <span class="o">==</span> <span class="n">best_prefix</span><span class="p">]</span>
                        <span class="n">best_group</span> <span class="o">=</span> <span class="n">group</span>

            <span class="k">if</span> <span class="n">best_prefix</span> <span class="ow">and</span> <span class="n">best_group</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">best_group</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">changed</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">processed_vars</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>

                <span class="c1"># Create new variable</span>
                <span class="n">aux_counter</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">new_var</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">var</span><span class="si">}</span><span class="s2">_LF</span><span class="si">{</span><span class="n">aux_counter</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">new_variables</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">new_var</span><span class="p">)</span>

                <span class="c1"># A -&gt; prefix A_LF</span>
                <span class="n">next_prods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Production</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">best_prefix</span> <span class="o">+</span> <span class="p">(</span><span class="n">new_var</span><span class="p">,)))</span>

                <span class="c1"># A_LF -&gt; remaining1 | remaining2 | ...</span>
                <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">best_group</span><span class="p">:</span>
                    <span class="n">remaining</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">best_prefix</span><span class="p">):]</span>
                    <span class="n">next_prods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Production</span><span class="p">(</span><span class="n">new_var</span><span class="p">,</span> <span class="n">remaining</span> <span class="k">if</span> <span class="n">remaining</span> <span class="k">else</span> <span class="p">()))</span>

                <span class="c1"># Keep non-matching productions</span>
                <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prods</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">p</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">best_group</span><span class="p">:</span>
                        <span class="n">next_prods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">next_prods</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">prods</span><span class="p">)</span>

        <span class="n">new_productions</span> <span class="o">=</span> <span class="n">next_prods</span>

    <span class="k">return</span> <span class="n">Grammar</span><span class="p">(</span>
        <span class="n">new_variables</span><span class="p">,</span> <span class="n">grammar</span><span class="o">.</span><span class="n">terminals</span><span class="p">,</span>
        <span class="n">new_productions</span><span class="p">,</span> <span class="n">grammar</span><span class="o">.</span><span class="n">start</span>
    <span class="p">)</span>


<span class="c1"># Example: Eliminate left recursion</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== Eliminating Left Recursion ===</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Original:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">expr_grammar</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>

<span class="n">no_lr</span> <span class="o">=</span> <span class="n">eliminate_left_recursion</span><span class="p">(</span><span class="n">expr_grammar</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After eliminating left recursion:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">no_lr</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>

<span class="c1"># Example: Left factoring</span>
<span class="n">lf_grammar</span> <span class="o">=</span> <span class="n">Grammar</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">S -&gt; if E then S else S | if E then S | other</span>
<span class="s2">E -&gt; id</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== Left Factoring ===</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Original:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">lf_grammar</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>

<span class="n">factored</span> <span class="o">=</span> <span class="n">left_factor</span><span class="p">(</span><span class="n">lf_grammar</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After left factoring:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">factored</span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="_21">ìš”ì•½<a class="header-link" href="#_21" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>ë¬¸ë§¥ ììœ  ë¬¸ë²•(context-free grammar)</strong> $G = (V, \Sigma, P, S)$ëŠ” ìœ ë„ë¥¼ í†µí•´ ì–¸ì–´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤</li>
<li><strong>BNF</strong>ì™€ <strong>EBNF</strong>ëŠ” ë¬¸ë²• ì‘ì„±ì„ ìœ„í•œ í‘œì¤€ í‘œê¸°ë²•ì…ë‹ˆë‹¤</li>
<li><strong>ìµœì¢Œë‹¨</strong>ê³¼ <strong>ìµœìš°ë‹¨</strong> ìœ ë„ëŠ” ì„œë¡œ ë‹¤ë¥¸ íŒŒì‹± ì „ëµì— ëŒ€ì‘í•©ë‹ˆë‹¤</li>
<li><strong>íŒŒìŠ¤ íŠ¸ë¦¬(parse tree)</strong>ëŠ” ìœ ë„ì˜ êµ¬ì¡°ì  í‘œí˜„ì…ë‹ˆë‹¤</li>
<li>ë¬¸ë²•ì´ <strong>ëª¨í˜¸(ambiguous)</strong>í•˜ë‹¤ëŠ” ê²ƒì€ ì–´ë–¤ ë¬¸ìì—´ì´ ì—¬ëŸ¬ íŒŒìŠ¤ íŠ¸ë¦¬ë¥¼ ê°€ì§„ë‹¤ëŠ” ê²ƒì´ë©°, ëª¨í˜¸ì„±ì€ ì¼ë°˜ì ìœ¼ë¡œ ê²°ì • ë¶ˆê°€ì…ë‹ˆë‹¤</li>
<li>ëª¨í˜¸ì„±ì€ <strong>ìš°ì„ ìˆœìœ„(precedence)</strong>, <strong>ê²°í•©ì„±(associativity)</strong>, ë¬¸ë²• ì¬êµ¬ì„±ì„ í†µí•´ í•´ì†Œë©ë‹ˆë‹¤</li>
<li><strong>ì´˜ìŠ¤í‚¤ ì •ê·œí˜•(Chomsky Normal Form)</strong>(ì´ì§„ ìƒì„± ê·œì¹™)ì€ $O(n^3)$ì— íŒŒì‹±í•˜ëŠ” <strong>CYK ì•Œê³ ë¦¬ì¦˜</strong>ì„ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤</li>
<li><strong>ê·¸ë¼ì´ë°”í ì •ê·œí˜•(Greibach Normal Form)</strong>(ë‹¨ë§ ìš°ì„  ìƒì„± ê·œì¹™)ì€ PDA êµ¬ì„±ì— ìœ ìš©í•©ë‹ˆë‹¤</li>
<li><strong>í‘¸ì‹œë‹¤ìš´ ì˜¤í† ë§ˆíƒ€(Pushdown automata)</strong>ëŠ” ì •í™•íˆ ë¬¸ë§¥ ììœ  ì–¸ì–´ë¥¼ ì¸ì‹í•©ë‹ˆë‹¤</li>
<li><strong>CFL íŒí•‘ ë³´ì¡° ì •ë¦¬(CFL pumping lemma)</strong>ëŠ” $\{a^n b^n c^n\}$ ê°™ì€ ì–¸ì–´ë“¤ì´ ë¬¸ë§¥ ììœ ê°€ ì•„ë‹˜ì„ ì¦ëª…í•©ë‹ˆë‹¤</li>
<li><strong>ì´˜ìŠ¤í‚¤ ê³„ì¸µ(Chomsky hierarchy)</strong>ì€ ì–¸ì–´ë¥¼ ì •ê·œ, ë¬¸ë§¥ ììœ , ë¬¸ë§¥ ê°ì‘, ì¬ê·€ ì—´ê±° ê°€ëŠ¥ì˜ ë„¤ ìœ í˜•ìœ¼ë¡œ ë¶„ë¥˜í•©ë‹ˆë‹¤</li>
<li><strong>ì¢Œì¬ê·€ ì œê±°(left recursion elimination)</strong>ì™€ <strong>ì¢Œì¸ìˆ˜ë¶„í•´(left factoring)</strong>ëŠ” í•˜í–¥ì‹ íŒŒì‹±ì„ ìœ„í•œ ë¬¸ë²•ì„ ì¤€ë¹„í•©ë‹ˆë‹¤</li>
</ul>
<hr />
<h2 id="_22">ì—°ìŠµ ë¬¸ì œ<a class="header-link" href="#_22" title="Permanent link">&para;</a></h2>
<h3 id="1_1">ì—°ìŠµ 1: ë¬¸ë²• ì‘ì„±<a class="header-link" href="#1_1" title="Permanent link">&para;</a></h3>
<p>ë‹¤ìŒ ê° ì–¸ì–´ì— ëŒ€í•œ ë¬¸ë§¥ ììœ  ë¬¸ë²•ì„ ì‘ì„±í•˜ì„¸ìš”:</p>
<ol>
<li>$\{a, b\}$ì— ëŒ€í•œ íšŒë¬¸(palindrome)</li>
<li>(ì¤‘ì²© ê°€ëŠ¥í•œ) ê· í˜• ì¡íŒ ê´„í˜¸</li>
<li>$\{a^i b^j c^k \mid i = j \text{ ë˜ëŠ” } j = k\}$</li>
<li>ë‹¨ìˆœí™”ëœ Python <code>if</code>/<code>elif</code>/<code>else</code> êµ¬ë¬¸ì˜ ë¶€ë¶„ ì§‘í•©</li>
<li><code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, ë‹¨í•­ <code>-</code>, ê´„í˜¸ë¥¼ ê°€ì§„ ì‚°ìˆ  í‘œí˜„ì‹ìœ¼ë¡œ, í‘œì¤€ ìš°ì„ ìˆœìœ„ì™€ ì¢Œê²°í•©ì„±ì„ ë”°ë¦„</li>
</ol>
<h3 id="2">ì—°ìŠµ 2: ìœ ë„ì™€ íŒŒìŠ¤ íŠ¸ë¦¬<a class="header-link" href="#2" title="Permanent link">&para;</a></h3>
<p>ë¬¸ë²• $E \rightarrow E + T \mid T$, $T \rightarrow T * F \mid F$, $F \rightarrow (E) \mid \texttt{id} \mid \texttt{num}$ì„ ì‚¬ìš©í•˜ì—¬:</p>
<ol>
<li><code>id * (num + id)</code>ì— ëŒ€í•œ ìµœì¢Œë‹¨ ìœ ë„ë¥¼ êµ¬í•©ë‹ˆë‹¤</li>
<li>ê°™ì€ ë¬¸ìì—´ì— ëŒ€í•œ ìµœìš°ë‹¨ ìœ ë„ë¥¼ êµ¬í•©ë‹ˆë‹¤</li>
<li>íŒŒìŠ¤ íŠ¸ë¦¬ë¥¼ ê·¸ë¦½ë‹ˆë‹¤</li>
<li>ë‘ ìœ ë„ê°€ ë™ì¼í•œ íŒŒìŠ¤ íŠ¸ë¦¬ì— ëŒ€ì‘í•¨ì„ í™•ì¸í•©ë‹ˆë‹¤</li>
</ol>
<h3 id="3_1">ì—°ìŠµ 3: ëª¨í˜¸ì„± ë¶„ì„<a class="header-link" href="#3_1" title="Permanent link">&para;</a></h3>
<p>ë‹¤ìŒ ë¬¸ë²•ì„ ê³ ë ¤í•©ë‹ˆë‹¤:</p>
<p>$$S \rightarrow aSb \mid aSbb \mid \epsilon$$</p>
<ol>
<li>ì´ ë¬¸ë²•ì´ ìƒì„±í•˜ëŠ” ì–¸ì–´ëŠ” ë¬´ì—‡ì…ë‹ˆê¹Œ?</li>
<li>ì´ ë¬¸ë²•ì€ ëª¨í˜¸í•©ë‹ˆê¹Œ? ëª¨í˜¸í•˜ë‹¤ë©´, ë‘ ê°œì˜ íŒŒìŠ¤ íŠ¸ë¦¬ë¥¼ ê°€ì§€ëŠ” ë¬¸ìì—´ì„ ì°¾ìœ¼ì„¸ìš”.</li>
<li>ë™ì¼í•œ ì–¸ì–´ì— ëŒ€í•œ ë¹„ëª¨í˜¸ ë¬¸ë²•ì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆê¹Œ?</li>
</ol>
<h3 id="4-cnf">ì—°ìŠµ 4: CNF ë³€í™˜<a class="header-link" href="#4-cnf" title="Permanent link">&para;</a></h3>
<p>ë‹¤ìŒ ë¬¸ë²•ì„ ì´˜ìŠ¤í‚¤ ì •ê·œí˜•ìœ¼ë¡œ ë³€í™˜í•˜ì„¸ìš”:</p>
<p>$$S \rightarrow ASA \mid aB$$
$$A \rightarrow B \mid S$$
$$B \rightarrow b \mid \epsilon$$</p>
<p>ë³€í™˜ ê³¼ì •ì˜ ê° ë‹¨ê³„ë¥¼ ë³´ì´ì„¸ìš”.</p>
<h3 id="5-cyk">ì—°ìŠµ 5: CYK ì•Œê³ ë¦¬ì¦˜<a class="header-link" href="#5-cyk" title="Permanent link">&para;</a></h3>
<p>ì—°ìŠµ 4ì—ì„œ êµ¬í•œ CNF ë¬¸ë²•(ë˜ëŠ” 9ì ˆì—ì„œ ì œê³µëœ ê²ƒ)ì„ ì‚¬ìš©í•˜ì—¬ ë‹¤ìŒ ë¬¸ìì—´ì— CYK ì•Œê³ ë¦¬ì¦˜ì„ ì‹¤í–‰í•˜ì„¸ìš”:
1. <code>"aabb"</code>
2. <code>"abab"</code>
3. <code>"baba"</code></p>
<p>ê° ë¬¸ìì—´ì— ëŒ€í•œ ì „ì²´ í…Œì´ë¸”ì„ ë³´ì´ì„¸ìš”.</p>
<h3 id="6_1">ì—°ìŠµ 6: íŒí•‘ ë³´ì¡° ì •ë¦¬<a class="header-link" href="#6_1" title="Permanent link">&para;</a></h3>
<p>CFL íŒí•‘ ë³´ì¡° ì •ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ìŒ ì–¸ì–´ë“¤ì´ ë¬¸ë§¥ ììœ ê°€ ì•„ë‹˜ì„ ì¦ëª…í•˜ì„¸ìš”:</p>
<ol>
<li>$L_1 = \{a^n b^n c^n d^n \mid n \geq 0\}$</li>
<li>$L_2 = \{a^i b^j c^k \mid 0 \leq i \leq j \leq k\}$</li>
<li>$L_3 = \{ww \mid w \in \{a, b\}^*\}$ (ë³µì‚¬ ì–¸ì–´)</li>
</ol>
<hr />
<p><a href="./03_Finite_Automata.md">Previous: Finite Automata</a> | <a href="./05_Top_Down_Parsing.md">Next: Top-Down Parsing</a> | <a href="./00_Overview.md">Overview</a></p>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/ko/Compiler_Design/03_Finite_Automata.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">ë ˆìŠ¨ 3: ìœ í•œ ì˜¤í† ë§ˆí†¤(Finite Automata)</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/ko/Compiler_Design/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/ko/Compiler_Design/05_Top_Down_Parsing.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">ë ˆìŠ¨ 5: í•˜í–¥ì‹ íŒŒì‹±(Top-Down Parsing)</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">â†‘</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'ko';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}