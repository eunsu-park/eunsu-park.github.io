{% raw %}
<!DOCTYPE html>
<html lang="ko" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPU 구조 기초 - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/ko/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/ko/" class="nav-item ">
                    <span class="nav-icon">🏠</span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">💻</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/ko/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" >
                        English
                    </option>
                    
                    <option value="ko" selected>
                        한국어
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">☀️</span>
                    <span class="theme-icon dark">🌙</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/ko/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/ko/Computer_Architecture/">Computer Architecture</a>
    <span class="separator">/</span>
    <span class="current">CPU 구조 기초</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>CPU 구조 기초</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/ko/Computer_Architecture/06_Sequential_Logic.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">순차 논리 회로</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">🔗</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/ko/Computer_Architecture/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">📋</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/ko/Computer_Architecture/08_Control_Unit.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">제어장치</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#_1">개요</a></li>
<li><a href="#_2">목차</a></li>
<li><a href="#1-cpu">1. CPU의 구성요소</a><ul>
<li><a href="#11-cpu">1.1 CPU 전체 구조</a></li>
<li><a href="#12-alu-arithmetic-logic-unit">1.2 ALU (Arithmetic Logic Unit)</a><ul>
<li><a href="#alu">ALU가 수행하는 연산</a></li>
<li><a href="#_3">상태 플래그 레지스터</a></li>
</ul>
</li>
<li><a href="#13-control-unit">1.3 제어 장치 (Control Unit)</a><ul>
<li><a href="#_4">제어 신호 예시</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#2">2. 레지스터 종류</a><ul>
<li><a href="#21-general-purpose-registers">2.1 범용 레지스터 (General Purpose Registers)</a><ul>
<li><a href="#x86">레지스터 크기 관계 (x86)</a></li>
</ul>
</li>
<li><a href="#22">2.2 특수 목적 레지스터</a><ul>
<li><a href="#pc">PC (프로그램 카운터) 동작</a></li>
</ul>
</li>
<li><a href="#23-arm">2.3 ARM 레지스터 구조</a></li>
</ul>
</li>
<li><a href="#3">3. 데이터패스</a><ul>
<li><a href="#31">3.1 데이터패스 개념</a></li>
<li><a href="#32-mips">3.2 MIPS 데이터패스 (상세)</a></li>
<li><a href="#33">3.3 데이터패스 구성 요소</a></li>
</ul>
</li>
<li><a href="#4">4. 명령어 실행 사이클 상세</a><ul>
<li><a href="#41">4.1 기본 실행 사이클</a></li>
<li><a href="#42">4.2 각 단계 상세</a><ul>
<li><a href="#1-instruction-fetch">1단계: 명령어 인출 (Instruction Fetch)</a></li>
<li><a href="#2-instruction-decode">2단계: 명령어 해독 (Instruction Decode)</a></li>
<li><a href="#3-execute">3단계: 명령어 실행 (Execute)</a></li>
<li><a href="#4-memory-access">4단계: 메모리 접근 (Memory Access)</a></li>
<li><a href="#5-write-back">5단계: 쓰기 (Write Back)</a></li>
</ul>
</li>
<li><a href="#43">4.3 명령어별 실행 예시</a></li>
</ul>
</li>
<li><a href="#5-vs">5. 단일 사이클 vs 다중 사이클</a><ul>
<li><a href="#51">5.1 단일 사이클 구현</a><ul>
<li><a href="#_5">단일 사이클 장단점</a></li>
</ul>
</li>
<li><a href="#52">5.2 다중 사이클 구현</a><ul>
<li><a href="#_6">다중 사이클 상태 다이어그램</a></li>
</ul>
</li>
<li><a href="#53">5.3 성능 비교</a></li>
<li><a href="#54">5.4 두 방식의 비교 정리</a></li>
</ul>
</li>
<li><a href="#6">6. 연습 문제</a><ul>
<li><a href="#_7">기초 문제</a></li>
<li><a href="#_8">데이터패스 문제</a></li>
<li><a href="#_9">성능 분석 문제</a></li>
<li><a href="#_10">심화 문제</a></li>
</ul>
</li>
<li><a href="#_11">다음 단계</a></li>
<li><a href="#_12">참고 자료</a></li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="cpu">CPU 구조 기초<a class="header-link" href="#cpu" title="Permanent link">&para;</a></h1>
<h2 id="_1">개요<a class="header-link" href="#_1" title="Permanent link">&para;</a></h2>
<p>CPU(Central Processing Unit)는 컴퓨터의 두뇌로서, 프로그램의 명령어를 해석하고 실행하는 핵심 장치입니다. 이 레슨에서는 CPU의 내부 구성요소, 레지스터의 종류, 데이터패스 구조, 그리고 명령어 실행 사이클에 대해 상세히 학습합니다.</p>
<p><strong>난이도</strong>: ⭐⭐</p>
<p><strong>선수 지식</strong>: 논리 게이트, 순차 논리 회로, 조합 논리 회로</p>
<hr />
<h2 id="_2">목차<a class="header-link" href="#_2" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#1-cpu의-구성요소">CPU의 구성요소</a></li>
<li><a href="#2-레지스터-종류">레지스터 종류</a></li>
<li><a href="#3-데이터패스">데이터패스</a></li>
<li><a href="#4-명령어-실행-사이클-상세">명령어 실행 사이클 상세</a></li>
<li><a href="#5-단일-사이클-vs-다중-사이클">단일 사이클 vs 다중 사이클</a></li>
<li><a href="#6-연습-문제">연습 문제</a></li>
</ol>
<hr />
<h2 id="1-cpu">1. CPU의 구성요소<a class="header-link" href="#1-cpu" title="Permanent link">&para;</a></h2>
<h3 id="11-cpu">1.1 CPU 전체 구조<a class="header-link" href="#11-cpu" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌──────────────────────────────────────────────────────────────────┐
│                            CPU                                    │
│  ┌────────────────────────────────────────────────────────────┐  │
│  │                    제어 장치 (Control Unit)                 │  │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────┐ │  │
│  │  │ 명령어 해독  │  │  제어 신호  │  │  타이밍 &amp; 시퀀싱    │ │  │
│  │  │   (Decoder) │  │   생성기    │  │    (Sequencer)      │ │  │
│  │  └─────────────┘  └─────────────┘  └─────────────────────┘ │  │
│  └────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  ┌─────────────────────┐    ┌─────────────────────────────────┐  │
│  │   레지스터 파일      │    │      ALU (산술논리장치)          │  │
│  │  ┌─────┐ ┌─────┐   │    │  ┌─────────────────────────┐    │  │
│  │  │ R0  │ │ R1  │   │    │  │   산술 연산 유닛         │    │  │
│  │  ├─────┤ ├─────┤   │    │  │   (+, -, *, /)          │    │  │
│  │  │ R2  │ │ R3  │   │    │  ├─────────────────────────┤    │  │
│  │  ├─────┤ ├─────┤   │    │  │   논리 연산 유닛         │    │  │
│  │  │ ... │ │ ... │   │    │  │   (AND, OR, XOR, NOT)   │    │  │
│  │  ├─────┤ ├─────┤   │    │  ├─────────────────────────┤    │  │
│  │  │ PC  │ │ IR  │   │    │  │   시프트 유닛            │    │  │
│  │  └─────┘ └─────┘   │    │  │   (&lt;&lt;, &gt;&gt;)              │    │  │
│  └─────────────────────┘    └─────────────────────────────────┘  │
│                                                                   │
│  ┌────────────────────────────────────────────────────────────┐  │
│  │                   내부 버스 (Internal Bus)                  │  │
│  └────────────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────────────┘
                              │
                    ┌─────────┴─────────┐
                    │    시스템 버스     │
                    └───────────────────┘
</code></pre></div>

<h3 id="12-alu-arithmetic-logic-unit">1.2 ALU (Arithmetic Logic Unit)<a class="header-link" href="#12-alu-arithmetic-logic-unit" title="Permanent link">&para;</a></h3>
<p>ALU는 CPU에서 실제 연산을 수행하는 핵심 장치입니다.</p>
<div class="highlight"><pre><span></span><code>                    ┌──────────────┐
        A ─────────►│              │
        (피연산자1)  │              │
                    │     ALU      │────────► 결과
        B ─────────►│              │
        (피연산자2)  │              │────────► 상태 플래그
                    │              │          (Zero, Carry,
        연산 코드 ──►│              │           Overflow, Sign)
        (Op Code)   └──────────────┘
</code></pre></div>

<h4 id="alu">ALU가 수행하는 연산<a class="header-link" href="#alu" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>연산 종류</th>
<th>연산</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>산술 연산</td>
<td>ADD</td>
<td>덧셈</td>
</tr>
<tr>
<td></td>
<td>SUB</td>
<td>뺄셈</td>
</tr>
<tr>
<td></td>
<td>MUL</td>
<td>곱셈</td>
</tr>
<tr>
<td></td>
<td>DIV</td>
<td>나눗셈</td>
</tr>
<tr>
<td></td>
<td>INC</td>
<td>1 증가</td>
</tr>
<tr>
<td></td>
<td>DEC</td>
<td>1 감소</td>
</tr>
<tr>
<td>논리 연산</td>
<td>AND</td>
<td>논리곱</td>
</tr>
<tr>
<td></td>
<td>OR</td>
<td>논리합</td>
</tr>
<tr>
<td></td>
<td>XOR</td>
<td>배타적 논리합</td>
</tr>
<tr>
<td></td>
<td>NOT</td>
<td>논리 부정</td>
</tr>
<tr>
<td>시프트 연산</td>
<td>SHL</td>
<td>왼쪽 시프트</td>
</tr>
<tr>
<td></td>
<td>SHR</td>
<td>오른쪽 시프트 (논리)</td>
</tr>
<tr>
<td></td>
<td>SAR</td>
<td>오른쪽 시프트 (산술)</td>
</tr>
<tr>
<td>비교 연산</td>
<td>CMP</td>
<td>비교 (뺄셈 후 플래그 설정)</td>
</tr>
</tbody>
</table>
<h4 id="_3">상태 플래그 레지스터<a class="header-link" href="#_3" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>┌───┬───┬───┬───┬───┬───┬───┬───┐
│ S │ Z │ - │ A │ - │ P │ - │ C │
└───┴───┴───┴───┴───┴───┴───┴───┘
  │   │       │       │       │
  │   │       │       │       └─ Carry (자리올림/내림)
  │   │       │       └───────── Parity (패리티)
  │   │       └───────────────── Auxiliary Carry
  │   └───────────────────────── Zero (결과가 0)
  └───────────────────────────── Sign (부호, 음수면 1)

추가 플래그:
- Overflow (O): 오버플로우 발생
- Interrupt (I): 인터럽트 허용 여부
- Direction (D): 문자열 연산 방향
</code></pre></div>

<h3 id="13-control-unit">1.3 제어 장치 (Control Unit)<a class="header-link" href="#13-control-unit" title="Permanent link">&para;</a></h3>
<p>제어 장치는 명령어를 해독하고 각 구성요소에 적절한 제어 신호를 보내는 역할을 합니다.</p>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────┐
│                      제어 장치 (CU)                          │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │              명령어 레지스터 (IR)                     │   │
│  │    ┌────────────┬────────────┬────────────────┐     │   │
│  │    │  Opcode    │   Rs/Rd    │   Immediate    │     │   │
│  │    │  (연산코드) │  (레지스터) │   (즉시값)     │     │   │
│  │    └────────────┴────────────┴────────────────┘     │   │
│  └─────────────────────────────────────────────────────┘   │
│                           │                                 │
│                           ▼                                 │
│  ┌─────────────────────────────────────────────────────┐   │
│  │              명령어 디코더 (Decoder)                  │   │
│  └─────────────────────────────────────────────────────┘   │
│                           │                                 │
│           ┌───────────────┼───────────────┐                │
│           ▼               ▼               ▼                │
│     ┌──────────┐   ┌──────────┐   ┌──────────┐            │
│     │ ALU 제어 │   │ 레지스터 │   │ 메모리   │            │
│     │   신호   │   │   제어   │   │   제어   │            │
│     └──────────┘   └──────────┘   └──────────┘            │
└─────────────────────────────────────────────────────────────┘
</code></pre></div>

<h4 id="_4">제어 신호 예시<a class="header-link" href="#_4" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>제어 신호</th>
<th>기능</th>
</tr>
</thead>
<tbody>
<tr>
<td>RegWrite</td>
<td>레지스터 쓰기 활성화</td>
</tr>
<tr>
<td>ALUSrc</td>
<td>ALU 입력 소스 선택</td>
</tr>
<tr>
<td>ALUOp</td>
<td>ALU 연산 종류 지정</td>
</tr>
<tr>
<td>MemRead</td>
<td>메모리 읽기 활성화</td>
</tr>
<tr>
<td>MemWrite</td>
<td>메모리 쓰기 활성화</td>
</tr>
<tr>
<td>MemtoReg</td>
<td>메모리→레지스터 경로 선택</td>
</tr>
<tr>
<td>Branch</td>
<td>분기 여부</td>
</tr>
<tr>
<td>Jump</td>
<td>점프 여부</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="2">2. 레지스터 종류<a class="header-link" href="#2" title="Permanent link">&para;</a></h2>
<h3 id="21-general-purpose-registers">2.1 범용 레지스터 (General Purpose Registers)<a class="header-link" href="#21-general-purpose-registers" title="Permanent link">&para;</a></h3>
<p>프로그래머가 자유롭게 사용할 수 있는 레지스터입니다.</p>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────┐
│                      범용 레지스터 (x86-64)                      │
├─────────────┬─────────┬─────────┬──────────────────────────────┤
│   64비트    │  32비트 │  16비트 │           용도               │
├─────────────┼─────────┼─────────┼──────────────────────────────┤
│    RAX      │   EAX   │   AX    │ 누산기 (산술 연산 결과)       │
│    RBX      │   EBX   │   BX    │ 베이스 (메모리 주소 기준)     │
│    RCX      │   ECX   │   CX    │ 카운터 (반복문 카운터)        │
│    RDX      │   EDX   │   DX    │ 데이터 (입출력 연산)          │
│    RSI      │   ESI   │   SI    │ 소스 인덱스                   │
│    RDI      │   EDI   │   DI    │ 목적지 인덱스                 │
│    RBP      │   EBP   │   BP    │ 베이스 포인터 (스택 프레임)   │
│    RSP      │   ESP   │   SP    │ 스택 포인터                   │
│   R8-R15    │ R8D-R15D│ R8W-R15W│ 추가 범용 레지스터 (x64)      │
└─────────────┴─────────┴─────────┴──────────────────────────────┘
</code></pre></div>

<h4 id="x86">레지스터 크기 관계 (x86)<a class="header-link" href="#x86" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="mf">64</span><span class="n">비트</span><span class="p">:</span><span class="w"> </span><span class="err">├──────────────────────────────────────────────────────────┤</span><span class="w"> </span><span class="n">RAX</span>
<span class="mf">32</span><span class="n">비트</span><span class="p">:</span><span class="w">                                 </span><span class="err">├──────────────────────────┤</span><span class="w"> </span><span class="n">EAX</span>
<span class="mf">16</span><span class="n">비트</span><span class="p">:</span><span class="w">                                                 </span><span class="err">├──────────┤</span><span class="w"> </span><span class="n">AX</span>
<span class="w"> </span><span class="mf">8</span><span class="n">비트</span><span class="p">:</span><span class="w">                                                 </span><span class="err">├────┬─────┤</span>
<span class="w">                                                         </span><span class="n">AH</span><span class="w">    </span><span class="n">AL</span>
</code></pre></div>

<h3 id="22">2.2 특수 목적 레지스터<a class="header-link" href="#22" title="Permanent link">&para;</a></h3>
<p>프로세서 동작에 필수적인 레지스터들입니다.</p>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────┐
│                     특수 목적 레지스터                           │
├──────────────┬──────────────────────────────────────────────────┤
│   레지스터    │                    역할                          │
├──────────────┼──────────────────────────────────────────────────┤
│ PC (Program  │ 다음에 실행할 명령어의 주소를 저장                │
│  Counter)    │ 명령어 인출 후 자동 증가                          │
├──────────────┼──────────────────────────────────────────────────┤
│ IR (Instruc- │ 현재 실행 중인 명령어를 저장                      │
│ tion Reg.)   │ 제어 장치가 해독하는 대상                         │
├──────────────┼──────────────────────────────────────────────────┤
│ MAR (Memory  │ 접근할 메모리 주소를 저장                         │
│ Address Reg.)│ 주소 버스에 연결                                  │
├──────────────┼──────────────────────────────────────────────────┤
│ MBR/MDR      │ 메모리에서 읽거나 쓸 데이터를 저장                │
│ (Memory Data)│ 데이터 버스에 연결                                │
├──────────────┼──────────────────────────────────────────────────┤
│ SP (Stack    │ 스택의 최상단 주소를 저장                         │
│  Pointer)    │ PUSH/POP 연산 시 자동 조정                        │
├──────────────┼──────────────────────────────────────────────────┤
│ PSW/FLAGS    │ 프로세서 상태 정보 저장                           │
│ (Status Reg.)│ Zero, Carry, Overflow 등의 플래그                 │
└──────────────┴──────────────────────────────────────────────────┘
</code></pre></div>

<h4 id="pc">PC (프로그램 카운터) 동작<a class="header-link" href="#pc" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="err">메모리</span><span class="o">:</span><span class="w">                              </span><span class="n">PC</span><span class="w"> </span><span class="err">동작</span><span class="o">:</span>
<span class="err">┌─────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="mh">0x1000</span><span class="o">:</span><span class="w"> </span><span class="n">ADD</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="err">◄───</span><span class="w"> </span><span class="n">PC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x1000</span><span class="w"> </span><span class="o">(</span><span class="err">현재</span><span class="o">)</span>
<span class="err">├─────────────┤</span>
<span class="err">│</span><span class="w"> </span><span class="mh">0x1004</span><span class="o">:</span><span class="w"> </span><span class="n">SUB</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="err">◄───</span><span class="w"> </span><span class="n">PC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x1004</span><span class="w"> </span><span class="o">(</span><span class="err">다음</span><span class="o">)</span>
<span class="err">├─────────────┤</span>
<span class="err">│</span><span class="w"> </span><span class="mh">0x1008</span><span class="o">:</span><span class="w"> </span><span class="n">MUL</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="err">◄───</span><span class="w"> </span><span class="n">PC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x1008</span>
<span class="err">├─────────────┤</span>
<span class="err">│</span><span class="w"> </span><span class="mh">0x100</span><span class="n">C</span><span class="o">:</span><span class="w"> </span><span class="n">JMP</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="err">◄───</span><span class="w"> </span><span class="err">분기</span><span class="w"> </span><span class="err">시</span><span class="w"> </span><span class="n">PC</span><span class="w"> </span><span class="err">값</span><span class="w"> </span><span class="err">변경</span>
<span class="err">├─────────────┤</span>
<span class="err">│</span><span class="w">    </span><span class="o">...</span><span class="w">      </span><span class="err">│</span>
<span class="err">└─────────────┘</span>

<span class="err">순차</span><span class="w"> </span><span class="err">실행</span><span class="o">:</span><span class="w"> </span><span class="n">PC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PC</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="err">명령어</span><span class="w"> </span><span class="err">크기</span>
<span class="err">분기</span><span class="w"> </span><span class="err">실행</span><span class="o">:</span><span class="w"> </span><span class="n">PC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">분기</span><span class="w"> </span><span class="err">대상</span><span class="w"> </span><span class="err">주소</span>
</code></pre></div>

<h3 id="23-arm">2.3 ARM 레지스터 구조<a class="header-link" href="#23-arm" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────┐
│                      ARM 레지스터 (AArch64)                      │
├──────────────┬──────────────────────────────────────────────────┤
│   레지스터    │                    역할                          │
├──────────────┼──────────────────────────────────────────────────┤
│   X0 - X7    │ 인자 전달 및 반환값 레지스터                      │
│   X8         │ 간접 결과 레지스터                                │
│   X9 - X15   │ 임시 레지스터 (caller-saved)                      │
│  X16 - X17   │ 인트라-프로시저 호출 레지스터                     │
│   X18        │ 플랫폼 레지스터                                   │
│  X19 - X28   │ Callee-saved 레지스터                             │
│   X29 (FP)   │ 프레임 포인터                                     │
│   X30 (LR)   │ 링크 레지스터 (반환 주소)                         │
│   SP         │ 스택 포인터                                       │
│   PC         │ 프로그램 카운터                                   │
└──────────────┴──────────────────────────────────────────────────┘
</code></pre></div>

<hr />
<h2 id="3">3. 데이터패스<a class="header-link" href="#3" title="Permanent link">&para;</a></h2>
<h3 id="31">3.1 데이터패스 개념<a class="header-link" href="#31" title="Permanent link">&para;</a></h3>
<p>데이터패스는 CPU 내에서 데이터가 이동하는 경로와 이 경로에서 데이터를 처리하는 기능 유닛들의 집합입니다.</p>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────┐
│                         기본 데이터패스                              │
│                                                                     │
│    ┌──────┐         ┌──────────────┐                               │
│    │  PC  │────────►│   명령어     │                               │
│    └──────┘         │   메모리     │                               │
│        │            └──────┬───────┘                               │
│        │                   │                                        │
│        ▼                   ▼                                        │
│    ┌──────┐         ┌──────────────┐         ┌──────────────┐      │
│    │ +4   │         │  명령어 IR   │────────►│  제어 장치   │      │
│    └──────┘         └──────┬───────┘         └──────┬───────┘      │
│                            │                        │               │
│                            ▼                        ▼               │
│                    ┌───────────────┐         제어 신호들            │
│         ┌─────────┤  레지스터     │                                │
│         │         │    파일       │                                │
│         │         └───┬───────┬───┘                                │
│         │             │       │                                     │
│         │             ▼       ▼                                     │
│         │         ┌───────────────┐                                │
│         │         │     ALU       │                                │
│         │         └───────┬───────┘                                │
│         │                 │                                         │
│         │                 ▼                                         │
│         │         ┌───────────────┐                                │
│         └────────►│  데이터       │                                │
│                   │  메모리       │                                │
│                   └───────────────┘                                │
└─────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="32-mips">3.2 MIPS 데이터패스 (상세)<a class="header-link" href="#32-mips" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────────┐
│<span class="w">                              </span><span class="nv">MIPS</span><span class="w"> </span>데이터패스<span class="w">                                 </span>│
│<span class="w">                                                                             </span>│
│<span class="w">                                                                             </span>│
│<span class="w">    </span>┌────────────────────────────────────────────────────────────────────┐<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">                         </span>명령어<span class="w"> </span>인출<span class="w"> </span><span class="ss">(</span><span class="k">IF</span><span class="ss">)</span><span class="w">                            </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">                                                                    </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">   </span>┌──────┐<span class="w">    </span>┌──────┐<span class="w">    </span>┌────────────────┐<span class="w">                       </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">   </span>│<span class="w">  </span><span class="nv">PC</span><span class="w">  </span>│───►│<span class="w"> </span><span class="o">+</span><span class="mi">4</span><span class="w">   </span>│<span class="w">    </span>│<span class="w">   </span>명령어<span class="w">       </span>│<span class="w">                       </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">   </span>└──────┘<span class="w">    </span>└───┬──┘<span class="w">    </span>│<span class="w">   </span>메모리<span class="w">       </span>│<span class="w">                       </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">       </span>│<span class="w">           </span>│<span class="w">       </span>└────────┬───────┘<span class="w">                       </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">       </span>└───────────┴────────────────┘<span class="w">                               </span>│<span class="w">  </span>│
│<span class="w">    </span>└────────────────────────────────────────────────────────────────────┘<span class="w">  </span>│
│<span class="w">                                    </span>│<span class="w">                                        </span>│
│<span class="w">                                    </span>▼<span class="w"> </span>[<span class="mi">31</span>:<span class="mi">0</span>]<span class="w"> </span>명령어<span class="w">                          </span>│
│<span class="w">    </span>┌────────────────────────────────────────────────────────────────────┐<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">                      </span>명령어<span class="w"> </span>해독<span class="w"> </span><span class="ss">(</span><span class="nv">ID</span><span class="ss">)</span><span class="w">                               </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">                                                                    </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">    </span>[<span class="mi">25</span>:<span class="mi">21</span>]<span class="w">  </span>┌──────────────┐<span class="w">                                       </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">    </span>────────►│<span class="w">   </span><span class="nv">Read</span><span class="w">       </span>│───►<span class="w"> </span><span class="nv">Read</span><span class="w"> </span><span class="nv">Data</span><span class="w"> </span><span class="mi">1</span><span class="w">                       </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">    </span>[<span class="mi">20</span>:<span class="mi">16</span>]<span class="w">  </span>│<span class="w">   </span><span class="nv">Register</span><span class="w">   </span>│<span class="w">                                       </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">    </span>────────►│<span class="w">   </span><span class="nv">File</span><span class="w">       </span>│───►<span class="w"> </span><span class="nv">Read</span><span class="w"> </span><span class="nv">Data</span><span class="w"> </span><span class="mi">2</span><span class="w">                       </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">    </span>[<span class="mi">15</span>:<span class="mi">11</span>]<span class="w">  </span>│<span class="w">              </span>│<span class="w">                                       </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">    </span>────────►│<span class="w">   </span><span class="nv">Write</span><span class="w"> </span><span class="nv">Reg</span><span class="w">  </span>│◄──<span class="w"> </span><span class="nv">Write</span><span class="w"> </span><span class="nv">Data</span><span class="w">                         </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">             </span>└──────────────┘<span class="w">                                       </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">                                                                    </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">    </span>[<span class="mi">15</span>:<span class="mi">0</span>]<span class="w">   </span>┌──────────────┐<span class="w">                                       </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">    </span>────────►│<span class="w">  </span><span class="nv">Sign</span><span class="w">        </span>│───►<span class="w"> </span><span class="mi">32</span>비트<span class="w"> </span>즉시값<span class="w">                      </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">             </span>│<span class="w">  </span><span class="nv">Extend</span><span class="w">      </span>│<span class="w">                                       </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">             </span>└──────────────┘<span class="w">                                       </span>│<span class="w">  </span>│
│<span class="w">    </span>└────────────────────────────────────────────────────────────────────┘<span class="w">  </span>│
│<span class="w">                                    </span>│<span class="w">                                        </span>│
│<span class="w">                                    </span>▼<span class="w">                                        </span>│
│<span class="w">    </span>┌────────────────────────────────────────────────────────────────────┐<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">                         </span>실행<span class="w"> </span><span class="ss">(</span><span class="nv">EX</span><span class="ss">)</span><span class="w">                                   </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">                                                                    </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">    </span><span class="nv">Read</span><span class="w"> </span><span class="nv">Data</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span>───►┌──────────────┐<span class="w">                                </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">                    </span>│<span class="w">              </span>│<span class="w">                                </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">    </span><span class="nv">MUX</span><span class="w"> </span>출력<span class="w">    </span>───►│<span class="w">     </span><span class="nv">ALU</span><span class="w">      </span>│───►<span class="w"> </span><span class="nv">ALU</span><span class="w"> </span>결과<span class="w">                   </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">                    </span>│<span class="w">              </span>│───►<span class="w"> </span><span class="nv">Zero</span><span class="w"> </span>플래그<span class="w">                </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">                    </span>└──────────────┘<span class="w">                                </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">                                                                    </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">    </span><span class="nv">Read</span><span class="w"> </span><span class="nv">Data</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span>───►┌──────┐<span class="w">                                        </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">    </span>즉시값<span class="w">      </span>───►│<span class="w"> </span><span class="nv">MUX</span><span class="w">  </span>│───►<span class="w"> </span><span class="nv">ALU</span><span class="w"> </span>입력<span class="w"> </span><span class="nv">B</span><span class="w">                         </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">                    </span>└──────┘<span class="w">                                        </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">                     </span>▲<span class="w"> </span><span class="nv">ALUSrc</span><span class="w">                                       </span>│<span class="w">  </span>│
│<span class="w">    </span>└────────────────────────────────────────────────────────────────────┘<span class="w">  </span>│
│<span class="w">                                    </span>│<span class="w">                                        </span>│
│<span class="w">                                    </span>▼<span class="w">                                        </span>│
│<span class="w">    </span>┌────────────────────────────────────────────────────────────────────┐<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">                      </span>메모리<span class="w"> </span>접근<span class="w"> </span><span class="ss">(</span><span class="nv">MEM</span><span class="ss">)</span><span class="w">                              </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">                                                                    </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">    </span><span class="nv">ALU</span><span class="w"> </span>결과<span class="w"> </span>─────►┌────────────────┐<span class="w">                               </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">    </span><span class="ss">(</span>주소<span class="ss">)</span><span class="w">         </span>│<span class="w">   </span>데이터<span class="w">       </span>│───►<span class="w"> </span><span class="nv">Read</span><span class="w"> </span><span class="nv">Data</span><span class="w">                 </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">                   </span>│<span class="w">   </span>메모리<span class="w">       </span>│<span class="w">                               </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">    </span><span class="nv">Write</span><span class="w"> </span><span class="nv">Data</span><span class="w"> </span>───►│<span class="w">               </span>│<span class="w">                               </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">                   </span>└────────────────┘<span class="w">                               </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">                    </span>▲<span class="w"> </span><span class="nv">MemRead</span><span class="o">/</span><span class="nv">MemWrite</span><span class="w">                              </span>│<span class="w">  </span>│
│<span class="w">    </span>└────────────────────────────────────────────────────────────────────┘<span class="w">  </span>│
│<span class="w">                                    </span>│<span class="w">                                        </span>│
│<span class="w">                                    </span>▼<span class="w">                                        </span>│
│<span class="w">    </span>┌────────────────────────────────────────────────────────────────────┐<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">                       </span>쓰기<span class="w"> </span><span class="ss">(</span><span class="nv">WB</span><span class="ss">)</span><span class="w">                                     </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">                                                                    </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">    </span><span class="nv">ALU</span><span class="w"> </span>결과<span class="w">    </span>───►┌──────┐<span class="w">                                        </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">    </span><span class="nv">Memory</span><span class="w"> </span><span class="nv">Data</span><span class="w"> </span>───►│<span class="w"> </span><span class="nv">MUX</span><span class="w">  </span>│───►<span class="w"> </span>레지스터<span class="w"> </span>파일<span class="w"> </span><span class="nv">Write</span><span class="w"> </span><span class="nv">Data</span><span class="w">           </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">                    </span>└──────┘<span class="w">                                        </span>│<span class="w">  </span>│
│<span class="w">    </span>│<span class="w">                     </span>▲<span class="w"> </span><span class="nv">MemtoReg</span><span class="w">                                     </span>│<span class="w">  </span>│
│<span class="w">    </span>└────────────────────────────────────────────────────────────────────┘<span class="w">  </span>│
│<span class="w">                                                                             </span>│
└─────────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="33">3.3 데이터패스 구성 요소<a class="header-link" href="#33" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>구성 요소</th>
<th>기능</th>
<th>제어 신호</th>
</tr>
</thead>
<tbody>
<tr>
<td>PC</td>
<td>다음 명령어 주소 저장</td>
<td>-</td>
</tr>
<tr>
<td>명령어 메모리</td>
<td>명령어 저장 및 제공</td>
<td>-</td>
</tr>
<tr>
<td>레지스터 파일</td>
<td>레지스터 읽기/쓰기</td>
<td>RegWrite</td>
</tr>
<tr>
<td>ALU</td>
<td>산술/논리 연산</td>
<td>ALUOp</td>
</tr>
<tr>
<td>데이터 메모리</td>
<td>데이터 저장/로드</td>
<td>MemRead, MemWrite</td>
</tr>
<tr>
<td>MUX</td>
<td>데이터 경로 선택</td>
<td>ALUSrc, MemtoReg</td>
</tr>
<tr>
<td>Sign Extend</td>
<td>16비트 → 32비트 확장</td>
<td>-</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="4">4. 명령어 실행 사이클 상세<a class="header-link" href="#4" title="Permanent link">&para;</a></h2>
<h3 id="41">4.1 기본 실행 사이클<a class="header-link" href="#41" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────┐
│                    명령어 실행 사이클                            │
│                                                                 │
│   ┌────────┐   ┌────────┐   ┌────────┐   ┌────────┐   ┌──────┐ │
│   │ Fetch  │──►│ Decode │──►│Execute │──►│ Memory │──►│Write │ │
│   │ (인출) │   │ (해독) │   │ (실행) │   │ (접근) │   │Back  │ │
│   └────────┘   └────────┘   └────────┘   └────────┘   └──────┘ │
│       │                                                   │     │
│       └───────────────────────────────────────────────────┘     │
│                           반복                                   │
└─────────────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="42">4.2 각 단계 상세<a class="header-link" href="#42" title="Permanent link">&para;</a></h3>
<h4 id="1-instruction-fetch">1단계: 명령어 인출 (Instruction Fetch)<a class="header-link" href="#1-instruction-fetch" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nl">동작</span><span class="p">:</span>
<span class="mf">1.</span><span class="w"> </span><span class="n">PC의</span><span class="w"> </span><span class="n">값을</span><span class="w"> </span><span class="n">MAR로</span><span class="w"> </span><span class="n">복사</span>
<span class="mf">2.</span><span class="w"> </span><span class="n">메모리</span><span class="o">[</span><span class="n">MAR</span><span class="o">]</span><span class="n">의</span><span class="w"> </span><span class="n">내용을</span><span class="w"> </span><span class="n">MBR로</span><span class="w"> </span><span class="n">읽음</span>
<span class="mf">3.</span><span class="w"> </span><span class="n">MBR의</span><span class="w"> </span><span class="n">내용을</span><span class="w"> </span><span class="n">IR로</span><span class="w"> </span><span class="n">복사</span>
<span class="mf">4.</span><span class="w"> </span><span class="n">PC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PC</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">명령어</span><span class="w"> </span><span class="n">크기</span>

<span class="n">마이크로</span><span class="w"> </span><span class="nl">연산</span><span class="p">:</span>
<span class="n">MAR</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="n">PC</span>
<span class="n">MBR</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="n">Memory</span><span class="o">[</span><span class="n">MAR</span><span class="o">]</span>
<span class="n">IR</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="n">MBR</span>
<span class="n">PC</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="n">PC</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">4</span>

<span class="n">타이밍</span><span class="w"> </span><span class="nl">다이어그램</span><span class="p">:</span>
<span class="err">─────┬─────┬─────┬─────┬─────</span>
<span class="w"> </span><span class="n">T0</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="n">T1</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="n">T2</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="n">T3</span><span class="w">  </span><span class="err">│</span>
<span class="err">─────┴─────┴─────┴─────┴─────</span>
<span class="n">MAR</span><span class="err">←</span><span class="n">PC</span><span class="w">    </span><span class="n">MBR</span><span class="err">←</span><span class="n">Mem</span><span class="w">  </span><span class="n">IR</span><span class="err">←</span><span class="n">MBR</span><span class="w">  </span><span class="n">PC</span><span class="err">←</span><span class="n">PC</span><span class="o">+</span><span class="mi">4</span>
</code></pre></div>

<h4 id="2-instruction-decode">2단계: 명령어 해독 (Instruction Decode)<a class="header-link" href="#2-instruction-decode" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="err">동작</span><span class="o">:</span>
<span class="mi">1</span><span class="o">.</span><span class="w"> </span><span class="n">IR의</span><span class="w"> </span><span class="n">opcode</span><span class="w"> </span><span class="err">필드</span><span class="w"> </span><span class="err">분석</span>
<span class="mi">2</span><span class="o">.</span><span class="w"> </span><span class="err">피연산자</span><span class="w"> </span><span class="err">주소</span><span class="w"> </span><span class="err">계산</span>
<span class="mi">3</span><span class="o">.</span><span class="w"> </span><span class="err">필요한</span><span class="w"> </span><span class="err">레지스터</span><span class="w"> </span><span class="err">값</span><span class="w"> </span><span class="err">읽기</span>

<span class="err">마이크로</span><span class="w"> </span><span class="err">연산</span><span class="o">:</span>
<span class="n">A</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="n">Regs</span><span class="o">[</span><span class="n">IR</span><span class="o">[</span><span class="mi">25</span><span class="o">:</span><span class="mi">21</span><span class="o">]]</span><span class="w">      </span><span class="c1">// rs 레지스터 읽기</span>
<span class="n">B</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="n">Regs</span><span class="o">[</span><span class="n">IR</span><span class="o">[</span><span class="mi">20</span><span class="o">:</span><span class="mi">16</span><span class="o">]]</span><span class="w">      </span><span class="c1">// rt 레지스터 읽기</span>
<span class="n">ALUOut</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="n">PC</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">(</span><span class="n">sign</span><span class="o">-</span><span class="n">extend</span><span class="o">(</span><span class="n">IR</span><span class="o">[</span><span class="mi">15</span><span class="o">:</span><span class="mi">0</span><span class="o">])</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">2</span><span class="o">)</span><span class="w">  </span><span class="c1">// 분기 주소 계산</span>

<span class="err">명령어</span><span class="w"> </span><span class="err">형식</span><span class="w"> </span><span class="err">분석</span><span class="w"> </span><span class="o">(</span><span class="n">MIPS</span><span class="o">):</span>
<span class="err">┌────────┬───────┬───────┬───────┬───────┬────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="n">opcode</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="n">rs</span><span class="w">   </span><span class="err">│</span><span class="w">  </span><span class="n">rt</span><span class="w">   </span><span class="err">│</span><span class="w">  </span><span class="n">rd</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="n">shamt</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="n">funct</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="n">R</span><span class="o">-</span><span class="n">type</span>
<span class="err">│</span><span class="w">  </span><span class="mi">6</span><span class="err">비트</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="mi">5</span><span class="err">비트</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="mi">5</span><span class="err">비트</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="mi">5</span><span class="err">비트</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="mi">5</span><span class="err">비트</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="mi">6</span><span class="err">비트</span><span class="w">  </span><span class="err">│</span>
<span class="err">└────────┴───────┴───────┴───────┴───────┴────────┘</span>

<span class="err">┌────────┬───────┬───────┬─────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="n">opcode</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="n">rs</span><span class="w">   </span><span class="err">│</span><span class="w">  </span><span class="n">rt</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="n">immediate</span><span class="w">         </span><span class="err">│</span><span class="w">  </span><span class="n">I</span><span class="o">-</span><span class="n">type</span>
<span class="err">│</span><span class="w">  </span><span class="mi">6</span><span class="err">비트</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="mi">5</span><span class="err">비트</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="mi">5</span><span class="err">비트</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="mi">16</span><span class="err">비트</span><span class="w">           </span><span class="err">│</span>
<span class="err">└────────┴───────┴───────┴─────────────────────────┘</span>
</code></pre></div>

<h4 id="3-execute">3단계: 명령어 실행 (Execute)<a class="header-link" href="#3-execute" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nx">명령어</span><span class="w"> </span><span class="nx">종류별</span><span class="w"> </span><span class="nx">실행</span><span class="p">:</span>

<span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="nx">산술</span><span class="o">/</span><span class="nx">논리</span><span class="w"> </span><span class="nx">연산</span><span class="w"> </span><span class="p">(</span><span class="nx">R</span><span class="o">-</span><span class="k">type</span><span class="p">):</span>
<span class="w">   </span><span class="nx">ALUOut</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="nx">op</span><span class="w"> </span><span class="nx">B</span>

<span class="w">   </span><span class="nx">예</span><span class="p">:</span><span class="w"> </span><span class="nx">ADD</span><span class="w"> </span><span class="err">$</span><span class="nx">t0</span><span class="p">,</span><span class="w"> </span><span class="err">$</span><span class="nx">t1</span><span class="p">,</span><span class="w"> </span><span class="err">$</span><span class="nx">t2</span>
<span class="w">   </span><span class="nx">ALUOut</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="nx">Regs</span><span class="p">[</span><span class="err">$</span><span class="nx">t1</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">Regs</span><span class="p">[</span><span class="err">$</span><span class="nx">t2</span><span class="p">]</span>

<span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="nx">메모리</span><span class="w"> </span><span class="nx">참조</span><span class="p">:</span>
<span class="w">   </span><span class="nx">ALUOut</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">sign</span><span class="o">-</span><span class="nx">extend</span><span class="p">(</span><span class="nx">IR</span><span class="p">[</span><span class="mi">15</span><span class="p">:</span><span class="mi">0</span><span class="p">])</span>

<span class="w">   </span><span class="nx">예</span><span class="p">:</span><span class="w"> </span><span class="nx">LW</span><span class="w"> </span><span class="err">$</span><span class="nx">t0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">(</span><span class="err">$</span><span class="nx">t1</span><span class="p">)</span>
<span class="w">   </span><span class="nx">ALUOut</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="nx">Regs</span><span class="p">[</span><span class="err">$</span><span class="nx">t1</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">100</span>

<span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="nx">분기</span><span class="p">:</span>
<span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">A</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">B</span><span class="p">)</span><span class="w"> </span><span class="nx">PC</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="nx">ALUOut</span>

<span class="w">   </span><span class="nx">예</span><span class="p">:</span><span class="w"> </span><span class="nx">BEQ</span><span class="w"> </span><span class="err">$</span><span class="nx">t0</span><span class="p">,</span><span class="w"> </span><span class="err">$</span><span class="nx">t1</span><span class="p">,</span><span class="w"> </span><span class="nx">label</span>
<span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">Regs</span><span class="p">[</span><span class="err">$</span><span class="nx">t0</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">Regs</span><span class="p">[</span><span class="err">$</span><span class="nx">t1</span><span class="p">])</span>
<span class="w">       </span><span class="nx">PC</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="nx">PC</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">offset</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="mi">4</span>
</code></pre></div>

<h4 id="4-memory-access">4단계: 메모리 접근 (Memory Access)<a class="header-link" href="#4-memory-access" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">Load</span><span class="w"> </span><span class="nl">명령어</span><span class="p">:</span>
<span class="n">MDR</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="n">Memory</span><span class="o">[</span><span class="n">ALUOut</span><span class="o">]</span>

<span class="nl">예</span><span class="p">:</span><span class="w"> </span><span class="n">LW</span><span class="w"> </span><span class="err">$</span><span class="n">t0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">(</span><span class="err">$</span><span class="n">t1</span><span class="p">)</span>
<span class="n">MDR</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="n">Memory</span><span class="o">[</span><span class="n">Regs[$t1</span><span class="o">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">100</span><span class="err">]</span>

<span class="n">Store</span><span class="w"> </span><span class="nl">명령어</span><span class="p">:</span>
<span class="n">Memory</span><span class="o">[</span><span class="n">ALUOut</span><span class="o">]</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="n">B</span>

<span class="nl">예</span><span class="p">:</span><span class="w"> </span><span class="n">SW</span><span class="w"> </span><span class="err">$</span><span class="n">t0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">(</span><span class="err">$</span><span class="n">t1</span><span class="p">)</span>
<span class="n">Memory</span><span class="o">[</span><span class="n">Regs[$t1</span><span class="o">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">100</span><span class="err">]</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="n">Regs</span><span class="o">[</span><span class="n">$t0</span><span class="o">]</span>
</code></pre></div>

<h4 id="5-write-back">5단계: 쓰기 (Write Back)<a class="header-link" href="#5-write-back" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nx">R</span><span class="o">-</span><span class="k">type</span><span class="w"> </span><span class="nx">명령어</span><span class="p">:</span>
<span class="nx">Regs</span><span class="p">[</span><span class="nx">IR</span><span class="p">[</span><span class="mi">15</span><span class="p">:</span><span class="mi">11</span><span class="p">]]</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="nx">ALUOut</span>

<span class="nx">예</span><span class="p">:</span><span class="w"> </span><span class="nx">ADD</span><span class="w"> </span><span class="err">$</span><span class="nx">t0</span><span class="p">,</span><span class="w"> </span><span class="err">$</span><span class="nx">t1</span><span class="p">,</span><span class="w"> </span><span class="err">$</span><span class="nx">t2</span>
<span class="nx">Regs</span><span class="p">[</span><span class="err">$</span><span class="nx">t0</span><span class="p">]</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="nx">ALUOut</span>

<span class="nx">Load</span><span class="w"> </span><span class="nx">명령어</span><span class="p">:</span>
<span class="nx">Regs</span><span class="p">[</span><span class="nx">IR</span><span class="p">[</span><span class="mi">20</span><span class="p">:</span><span class="mi">16</span><span class="p">]]</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="nx">MDR</span>

<span class="nx">예</span><span class="p">:</span><span class="w"> </span><span class="nx">LW</span><span class="w"> </span><span class="err">$</span><span class="nx">t0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">(</span><span class="err">$</span><span class="nx">t1</span><span class="p">)</span>
<span class="nx">Regs</span><span class="p">[</span><span class="err">$</span><span class="nx">t0</span><span class="p">]</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="nx">MDR</span>
</code></pre></div>

<h3 id="43">4.3 명령어별 실행 예시<a class="header-link" href="#43" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nl">예시</span><span class="p">:</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="err">$</span><span class="n">t0</span><span class="p">,</span><span class="w"> </span><span class="err">$</span><span class="n">t1</span><span class="p">,</span><span class="w"> </span><span class="err">$</span><span class="n">t2</span><span class="w"> </span><span class="p">(</span><span class="n">R</span><span class="o">-</span><span class="n">type</span><span class="p">)</span>

<span class="n">단계</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="k">IF</span><span class="p">)</span><span class="err">:</span>
<span class="w">  </span><span class="n">MAR</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="n">PC</span>
<span class="w">  </span><span class="n">IR</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="n">Memory</span><span class="o">[</span><span class="n">MAR</span><span class="o">]</span>
<span class="w">  </span><span class="n">PC</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="n">PC</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">4</span>

<span class="n">단계</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="n">ID</span><span class="p">)</span><span class="err">:</span>
<span class="w">  </span><span class="n">A</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="n">Regs</span><span class="o">[</span><span class="n">$t1</span><span class="o">]</span>
<span class="w">  </span><span class="n">B</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="n">Regs</span><span class="o">[</span><span class="n">$t2</span><span class="o">]</span>

<span class="n">단계</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(</span><span class="n">EX</span><span class="p">)</span><span class="err">:</span>
<span class="w">  </span><span class="n">ALUOut</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">B</span>

<span class="n">단계</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">(</span><span class="n">MEM</span><span class="p">)</span><span class="err">:</span>
<span class="w">  </span><span class="p">(</span><span class="n">없음</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">메모리</span><span class="w"> </span><span class="n">접근</span><span class="w"> </span><span class="n">필요</span><span class="w"> </span><span class="n">없음</span><span class="p">)</span>

<span class="n">단계</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="p">(</span><span class="n">WB</span><span class="p">)</span><span class="err">:</span>
<span class="w">  </span><span class="n">Regs</span><span class="o">[</span><span class="n">$t0</span><span class="o">]</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="n">ALUOut</span>


<span class="nl">예시</span><span class="p">:</span><span class="w"> </span><span class="n">LW</span><span class="w"> </span><span class="err">$</span><span class="n">t0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">(</span><span class="err">$</span><span class="n">t1</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">I</span><span class="o">-</span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="k">Load</span><span class="p">)</span>

<span class="n">단계</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="k">IF</span><span class="p">)</span><span class="err">:</span>
<span class="w">  </span><span class="n">MAR</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="n">PC</span>
<span class="w">  </span><span class="n">IR</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="n">Memory</span><span class="o">[</span><span class="n">MAR</span><span class="o">]</span>
<span class="w">  </span><span class="n">PC</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="n">PC</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">4</span>

<span class="n">단계</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="n">ID</span><span class="p">)</span><span class="err">:</span>
<span class="w">  </span><span class="n">A</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="n">Regs</span><span class="o">[</span><span class="n">$t1</span><span class="o">]</span>

<span class="n">단계</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(</span><span class="n">EX</span><span class="p">)</span><span class="err">:</span>
<span class="w">  </span><span class="n">ALUOut</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">100</span>

<span class="n">단계</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">(</span><span class="n">MEM</span><span class="p">)</span><span class="err">:</span>
<span class="w">  </span><span class="n">MDR</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="n">Memory</span><span class="o">[</span><span class="n">ALUOut</span><span class="o">]</span>

<span class="n">단계</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="p">(</span><span class="n">WB</span><span class="p">)</span><span class="err">:</span>
<span class="w">  </span><span class="n">Regs</span><span class="o">[</span><span class="n">$t0</span><span class="o">]</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="n">MDR</span>
</code></pre></div>

<hr />
<h2 id="5-vs">5. 단일 사이클 vs 다중 사이클<a class="header-link" href="#5-vs" title="Permanent link">&para;</a></h2>
<h3 id="51">5.1 단일 사이클 구현<a class="header-link" href="#51" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────┐
│<span class="w">                    </span>단일<span class="w"> </span>사이클<span class="w"> </span><span class="ss">(</span><span class="nv">Single</span><span class="o">-</span><span class="nv">Cycle</span><span class="ss">)</span><span class="w">                    </span>│
│<span class="w">                                                                 </span>│
│<span class="w">  </span>특징:<span class="w"> </span>모든<span class="w"> </span>명령어가<span class="w"> </span>한<span class="w"> </span>클럭<span class="w"> </span>사이클에<span class="w"> </span>완료<span class="w">                       </span>│
│<span class="w">                                                                 </span>│
│<span class="w">  </span>┌──────────────────────────────────────────────────────────┐<span class="w">  </span>│
│<span class="w">  </span>│<span class="w">                    </span><span class="mi">1</span><span class="w"> </span>클럭<span class="w"> </span>사이클<span class="w">                          </span>│<span class="w">  </span>│
│<span class="w">  </span>│<span class="w">  </span>┌─────┬─────┬─────┬─────┬─────┐<span class="w">                         </span>│<span class="w">  </span>│
│<span class="w">  </span>│<span class="w">  </span>│<span class="w"> </span><span class="k">IF</span><span class="w">  </span>│<span class="w"> </span><span class="nv">ID</span><span class="w">  </span>│<span class="w"> </span><span class="nv">EX</span><span class="w">  </span>│<span class="w"> </span><span class="nv">MEM</span><span class="w"> </span>│<span class="w"> </span><span class="nv">WB</span><span class="w">  </span>│<span class="w">                         </span>│<span class="w">  </span>│
│<span class="w">  </span>│<span class="w">  </span>└─────┴─────┴─────┴─────┴─────┘<span class="w">                         </span>│<span class="w">  </span>│
│<span class="w">  </span>└──────────────────────────────────────────────────────────┘<span class="w">  </span>│
│<span class="w">                                                                 </span>│
│<span class="w">  </span>클럭<span class="w"> </span>주기<span class="w"> </span><span class="o">=</span><span class="w"> </span>가장<span class="w"> </span>긴<span class="w"> </span>명령어<span class="ss">(</span><span class="nv">Load</span><span class="ss">)</span>의<span class="w"> </span>실행<span class="w"> </span>시간<span class="w">                   </span>│
│<span class="w">                                                                 </span>│
│<span class="w">  </span>예시<span class="w"> </span><span class="ss">(</span>각<span class="w"> </span>단계<span class="w"> </span>소요<span class="w"> </span>시간<span class="ss">)</span>:<span class="w">                                      </span>│
│<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="k">IF</span>:<span class="w"> </span><span class="mi">200</span><span class="nv">ps</span><span class="w">                                                   </span>│
│<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nv">ID</span>:<span class="w"> </span><span class="mi">100</span><span class="nv">ps</span><span class="w">                                                   </span>│
│<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nv">EX</span>:<span class="w"> </span><span class="mi">200</span><span class="nv">ps</span><span class="w">                                                   </span>│
│<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nv">MEM</span>:<span class="w"> </span><span class="mi">200</span><span class="nv">ps</span><span class="w">                                                  </span>│
│<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nv">WB</span>:<span class="w"> </span><span class="mi">100</span><span class="nv">ps</span><span class="w">                                                   </span>│
│<span class="w">                                                                 </span>│
│<span class="w">  </span>클럭<span class="w"> </span>주기<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">800</span><span class="nv">ps</span><span class="w">               </span>│
│<span class="w">                                                                 </span>│
└─────────────────────────────────────────────────────────────────┘
</code></pre></div>

<h4 id="_5">단일 사이클 장단점<a class="header-link" href="#_5" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>장점</th>
<th>단점</th>
</tr>
</thead>
<tbody>
<tr>
<td>구현이 간단</td>
<td>클럭 주기가 김 (가장 느린 명령어 기준)</td>
</tr>
<tr>
<td>제어 논리가 단순</td>
<td>모든 명령어가 동일한 시간 소요</td>
</tr>
<tr>
<td>CPI = 1 (명령어당 1사이클)</td>
<td>하드웨어 자원 활용도 낮음</td>
</tr>
</tbody>
</table>
<h3 id="52">5.2 다중 사이클 구현<a class="header-link" href="#52" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">┌─────────────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w">                    </span><span class="nx">다중</span><span class="w"> </span><span class="nx">사이클</span><span class="w"> </span><span class="p">(</span><span class="nx">Multi</span><span class="o">-</span><span class="nx">Cycle</span><span class="p">)</span><span class="w">                     </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                                 </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nx">특징</span><span class="p">:</span><span class="w"> </span><span class="nx">명령어를</span><span class="w"> </span><span class="nx">여러</span><span class="w"> </span><span class="nx">클럭</span><span class="w"> </span><span class="nx">사이클에</span><span class="w"> </span><span class="nx">걸쳐</span><span class="w"> </span><span class="nx">실행</span><span class="w">                     </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                                 </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nx">각</span><span class="w"> </span><span class="nx">단계가</span><span class="w"> </span><span class="nx">별도의</span><span class="w"> </span><span class="nx">사이클</span><span class="p">:</span><span class="w">                                        </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">┌─────┐</span><span class="w"> </span><span class="err">┌─────┐</span><span class="w"> </span><span class="err">┌─────┐</span><span class="w"> </span><span class="err">┌─────┐</span><span class="w"> </span><span class="err">┌─────┐</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="nx">IF</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="nx">ID</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="nx">EX</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="nx">MEM</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="nx">WB</span><span class="w">  </span><span class="err">│</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">└─────┘</span><span class="w"> </span><span class="err">└─────┘</span><span class="w"> </span><span class="err">└─────┘</span><span class="w"> </span><span class="err">└─────┘</span><span class="w"> </span><span class="err">└─────┘</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nx">사이클1</span><span class="w"> </span><span class="nx">사이클2</span><span class="w"> </span><span class="nx">사이클3</span><span class="w"> </span><span class="nx">사이클4</span><span class="w"> </span><span class="nx">사이클5</span><span class="w">                         </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                                 </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nx">클럭</span><span class="w"> </span><span class="nx">주기</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">가장</span><span class="w"> </span><span class="nx">긴</span><span class="w"> </span><span class="nx">단계의</span><span class="w"> </span><span class="nx">시간</span><span class="w">                                </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="p">=</span><span class="w"> </span><span class="nx">max</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">200</span><span class="nx">ps</span><span class="w">                        </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                                 </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nx">명령어별</span><span class="w"> </span><span class="nx">사이클</span><span class="w"> </span><span class="nx">수</span><span class="p">:</span><span class="w">                                            </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">Load</span><span class="p">:</span><span class="w">  </span><span class="mi">5</span><span class="nx">사이클</span><span class="w"> </span><span class="p">(</span><span class="nx">IF</span><span class="p">,</span><span class="w"> </span><span class="nx">ID</span><span class="p">,</span><span class="w"> </span><span class="nx">EX</span><span class="p">,</span><span class="w"> </span><span class="nx">MEM</span><span class="p">,</span><span class="w"> </span><span class="nx">WB</span><span class="p">)</span><span class="w">                        </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">Store</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="nx">사이클</span><span class="w"> </span><span class="p">(</span><span class="nx">IF</span><span class="p">,</span><span class="w"> </span><span class="nx">ID</span><span class="p">,</span><span class="w"> </span><span class="nx">EX</span><span class="p">,</span><span class="w"> </span><span class="nx">MEM</span><span class="p">)</span><span class="w">                            </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">R</span><span class="o">-</span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="nx">사이클</span><span class="w"> </span><span class="p">(</span><span class="nx">IF</span><span class="p">,</span><span class="w"> </span><span class="nx">ID</span><span class="p">,</span><span class="w"> </span><span class="nx">EX</span><span class="p">,</span><span class="w"> </span><span class="nx">WB</span><span class="p">)</span><span class="w">                            </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">Branch</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="nx">사이클</span><span class="w"> </span><span class="p">(</span><span class="nx">IF</span><span class="p">,</span><span class="w"> </span><span class="nx">ID</span><span class="p">,</span><span class="w"> </span><span class="nx">EX</span><span class="p">)</span><span class="w">                                </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                                 </span><span class="err">│</span>
<span class="err">└─────────────────────────────────────────────────────────────────┘</span>
</code></pre></div>

<h4 id="_6">다중 사이클 상태 다이어그램<a class="header-link" href="#_6" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="w">                    </span><span class="err">┌─────────────────────────────────┐</span>
<span class="w">                    </span><span class="err">│</span><span class="w">                                 </span><span class="err">│</span>
<span class="w">                    </span><span class="err">▼</span><span class="w">                                 </span><span class="err">│</span>
<span class="w">              </span><span class="err">┌──────────┐</span><span class="w">                           </span><span class="err">│</span>
<span class="w">              </span><span class="err">│</span><span class="w">  </span><span class="nx">IF</span><span class="w">      </span><span class="err">│</span><span class="w">                           </span><span class="err">│</span>
<span class="w">              </span><span class="err">│</span><span class="w"> </span><span class="p">(</span><span class="nx">인출</span><span class="p">)</span><span class="w">   </span><span class="err">│</span><span class="w">                           </span><span class="err">│</span>
<span class="w">              </span><span class="err">└────┬─────┘</span><span class="w">                           </span><span class="err">│</span>
<span class="w">                   </span><span class="err">│</span><span class="w">                                 </span><span class="err">│</span>
<span class="w">                   </span><span class="err">▼</span><span class="w">                                 </span><span class="err">│</span>
<span class="w">              </span><span class="err">┌──────────┐</span><span class="w">                           </span><span class="err">│</span>
<span class="w">              </span><span class="err">│</span><span class="w">  </span><span class="nx">ID</span><span class="w">      </span><span class="err">│</span><span class="w">                           </span><span class="err">│</span>
<span class="w">              </span><span class="err">│</span><span class="w"> </span><span class="p">(</span><span class="nx">해독</span><span class="p">)</span><span class="w">   </span><span class="err">│</span><span class="w">                           </span><span class="err">│</span>
<span class="w">              </span><span class="err">└────┬─────┘</span><span class="w">                           </span><span class="err">│</span>
<span class="w">                   </span><span class="err">│</span><span class="w">                                 </span><span class="err">│</span>
<span class="w">         </span><span class="err">┌─────────┼─────────┐</span><span class="w">                       </span><span class="err">│</span>
<span class="w">         </span><span class="err">│</span><span class="w">         </span><span class="err">│</span><span class="w">         </span><span class="err">│</span><span class="w">                       </span><span class="err">│</span>
<span class="w">         </span><span class="err">▼</span><span class="w">         </span><span class="err">▼</span><span class="w">         </span><span class="err">▼</span><span class="w">                       </span><span class="err">│</span>
<span class="w">    </span><span class="err">┌────────┐</span><span class="w"> </span><span class="err">┌────────┐</span><span class="w"> </span><span class="err">┌────────┐</span><span class="w">                </span><span class="err">│</span>
<span class="w">    </span><span class="err">│</span><span class="w"> </span><span class="nx">MEM주소</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="nx">R</span><span class="o">-</span><span class="k">type</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="nx">Branch</span><span class="w"> </span><span class="err">│───────────────┘</span>
<span class="w">    </span><span class="err">│</span><span class="w">  </span><span class="nx">계산</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="nx">실행</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="nx">완료</span><span class="w">  </span><span class="err">│</span>
<span class="w">    </span><span class="err">└────┬───┘</span><span class="w"> </span><span class="err">└────┬───┘</span><span class="w"> </span><span class="err">└────────┘</span>
<span class="w">         </span><span class="err">│</span><span class="w">         </span><span class="err">│</span>
<span class="w">    </span><span class="err">┌────┴────┐</span><span class="w">    </span><span class="err">│</span>
<span class="w">    </span><span class="err">│</span><span class="w">         </span><span class="err">│</span><span class="w">    </span><span class="err">│</span>
<span class="w">    </span><span class="err">▼</span><span class="w">         </span><span class="err">▼</span><span class="w">    </span><span class="err">│</span>
<span class="err">┌───────┐</span><span class="w"> </span><span class="err">┌───────┐│</span>
<span class="err">│</span><span class="w">  </span><span class="nx">Load</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="nx">Store</span><span class="w"> </span><span class="err">││</span>
<span class="err">│</span><span class="w">  </span><span class="nx">MEM</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="nx">MEM</span><span class="w">  </span><span class="err">││</span>
<span class="err">└───┬───┘</span><span class="w"> </span><span class="err">└───────┘│</span>
<span class="w">    </span><span class="err">│</span><span class="w">              </span><span class="err">│</span>
<span class="w">    </span><span class="err">▼</span><span class="w">              </span><span class="err">│</span>
<span class="err">┌───────┐</span><span class="w">    </span><span class="err">┌─────┴─────┐</span>
<span class="err">│</span><span class="w"> </span><span class="nx">Load</span><span class="w">  </span><span class="err">│</span><span class="w">    </span><span class="err">│</span><span class="w">  </span><span class="nx">R</span><span class="o">-</span><span class="k">type</span><span class="w">   </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nx">WB</span><span class="w">   </span><span class="err">│</span><span class="w">    </span><span class="err">│</span><span class="w">    </span><span class="nx">WB</span><span class="w">     </span><span class="err">│</span>
<span class="err">└───────┘</span><span class="w">    </span><span class="err">└───────────┘</span>
</code></pre></div>

<h3 id="53">5.3 성능 비교<a class="header-link" href="#53" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">┌─────────────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w">                        </span><span class="nx">성능</span><span class="w"> </span><span class="nx">비교</span><span class="w"> </span><span class="nx">예시</span><span class="w">                            </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                                 </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nx">가정</span><span class="p">:</span><span class="w">                                                          </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">명령어</span><span class="w"> </span><span class="nx">분포</span><span class="p">:</span><span class="w"> </span><span class="nx">Load</span><span class="w"> </span><span class="mi">25</span><span class="o">%</span><span class="p">,</span><span class="w"> </span><span class="nx">Store</span><span class="w"> </span><span class="mi">10</span><span class="o">%</span><span class="p">,</span><span class="w"> </span><span class="nx">R</span><span class="o">-</span><span class="k">type</span><span class="w"> </span><span class="mi">45</span><span class="o">%</span><span class="p">,</span><span class="w"> </span><span class="nx">Branch</span><span class="w"> </span><span class="mi">20</span><span class="o">%</span><span class="w">    </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">단일</span><span class="w"> </span><span class="nx">사이클</span><span class="w"> </span><span class="nx">클럭</span><span class="p">:</span><span class="w"> </span><span class="mi">800</span><span class="nx">ps</span><span class="w">                                      </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">다중</span><span class="w"> </span><span class="nx">사이클</span><span class="w"> </span><span class="nx">클럭</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="nx">ps</span><span class="w">                                      </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                                 </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nx">단일</span><span class="w"> </span><span class="nx">사이클</span><span class="p">:</span><span class="w">                                                   </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nx">평균</span><span class="w"> </span><span class="nx">시간</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">800</span><span class="nx">ps</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">800</span><span class="nx">ps</span><span class="o">/</span><span class="nx">명령어</span><span class="w">                          </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                                 </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nx">다중</span><span class="w"> </span><span class="nx">사이클</span><span class="p">:</span><span class="w">                                                   </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nx">평균</span><span class="w"> </span><span class="nx">CPI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m m-Double">0.25</span><span class="err">×</span><span class="mi">5</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m m-Double">0.10</span><span class="err">×</span><span class="mi">4</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m m-Double">0.45</span><span class="err">×</span><span class="mi">4</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m m-Double">0.20</span><span class="err">×</span><span class="mi">3</span><span class="w">                  </span><span class="err">│</span>
<span class="err">│</span><span class="w">           </span><span class="p">=</span><span class="w"> </span><span class="m m-Double">1.25</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m m-Double">0.40</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m m-Double">1.80</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m m-Double">0.60</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m m-Double">4.05</span><span class="w">                   </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nx">평균</span><span class="w"> </span><span class="nx">시간</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">200</span><span class="nx">ps</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="m m-Double">4.05</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">810</span><span class="nx">ps</span><span class="o">/</span><span class="nx">명령어</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                                 </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nx">결론</span><span class="p">:</span><span class="w"> </span><span class="nx">이</span><span class="w"> </span><span class="nx">예시에서는</span><span class="w"> </span><span class="nx">거의</span><span class="w"> </span><span class="nx">비슷한</span><span class="w"> </span><span class="nx">성능</span><span class="w">                           </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="p">(</span><span class="nx">하지만</span><span class="w"> </span><span class="nx">다중</span><span class="w"> </span><span class="nx">사이클은</span><span class="w"> </span><span class="nx">하드웨어</span><span class="w"> </span><span class="nx">자원을</span><span class="w"> </span><span class="nx">더</span><span class="w"> </span><span class="nx">효율적으로</span><span class="w"> </span><span class="nx">사용</span><span class="p">)</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                                 </span><span class="err">│</span>
<span class="err">└─────────────────────────────────────────────────────────────────┘</span>
</code></pre></div>

<h3 id="54">5.4 두 방식의 비교 정리<a class="header-link" href="#54" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>특성</th>
<th>단일 사이클</th>
<th>다중 사이클</th>
</tr>
</thead>
<tbody>
<tr>
<td>CPI</td>
<td>1</td>
<td>가변 (3~5)</td>
</tr>
<tr>
<td>클럭 주기</td>
<td>길다 (가장 긴 명령어)</td>
<td>짧다 (가장 긴 단계)</td>
</tr>
<tr>
<td>제어 논리</td>
<td>단순</td>
<td>복잡 (FSM 필요)</td>
</tr>
<tr>
<td>하드웨어 사용</td>
<td>비효율적</td>
<td>효율적 (공유)</td>
</tr>
<tr>
<td>메모리</td>
<td>명령어/데이터 분리</td>
<td>통합 가능</td>
</tr>
<tr>
<td>구현 복잡도</td>
<td>낮음</td>
<td>중간</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="6">6. 연습 문제<a class="header-link" href="#6" title="Permanent link">&para;</a></h2>
<h3 id="_7">기초 문제<a class="header-link" href="#_7" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>CPU의 3대 구성요소는 무엇인가?</p>
</li>
<li>
<p>다음 레지스터의 역할을 설명하시오:</p>
</li>
<li>(a) PC (Program Counter)</li>
<li>(b) IR (Instruction Register)</li>
<li>
<p>(c) MAR (Memory Address Register)</p>
</li>
<li>
<p>ALU에서 수행하는 연산의 종류 3가지를 쓰시오.</p>
</li>
</ol>
<h3 id="_8">데이터패스 문제<a class="header-link" href="#_8" title="Permanent link">&para;</a></h3>
<ol>
<li>다음 MIPS 명령어 실행 시 활성화되는 제어 신호를 모두 고르시오:</li>
</ol>
<p><code>ADD $t0, $t1, $t2</code></p>
<ul>
<li>(a) RegWrite</li>
<li>(b) ALUSrc</li>
<li>(c) MemRead</li>
<li>(d) MemWrite</li>
<li>
<p>(e) MemtoReg</p>
</li>
<li>
<p><code>LW $t0, 100($t1)</code> 명령어의 5단계 실행 과정을 순서대로 설명하시오.</p>
</li>
</ul>
<h3 id="_9">성능 분석 문제<a class="header-link" href="#_9" title="Permanent link">&para;</a></h3>
<ol>
<li>단일 사이클 CPU에서 각 단계의 소요 시간이 다음과 같을 때:</li>
<li>IF: 250ps</li>
<li>ID: 150ps</li>
<li>EX: 200ps</li>
<li>MEM: 300ps</li>
<li>WB: 100ps</li>
</ol>
<p>(a) 클럭 주기는 얼마인가?
   (b) 1초에 몇 개의 명령어를 실행할 수 있는가?</p>
<ol>
<li>다중 사이클 CPU에서 명령어 분포가 다음과 같을 때 평균 CPI를 구하시오:</li>
<li>Load: 30% (5 사이클)</li>
<li>Store: 15% (4 사이클)</li>
<li>R-type: 40% (4 사이클)</li>
<li>Branch: 15% (3 사이클)</li>
</ol>
<h3 id="_10">심화 문제<a class="header-link" href="#_10" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>폰 노이만 병목을 해결하기 위한 CPU 설계 기법 3가지를 설명하시오.</p>
</li>
<li>
<p>다음 코드 시퀀스가 단일 사이클 CPU와 다중 사이클 CPU에서 실행될 때 각각의 총 실행 시간을 계산하시오 (위 6번 문제의 시간 가정 사용):</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code>LW   $t0, 0($s0)
ADD  $t1, $t0, $t2
SW   $t1, 4($s0)
</code></pre></div>

<details>
<summary>정답</summary>

1. ALU (산술논리장치), Control Unit (제어장치), Register (레지스터)

2.
   - (a) PC: 다음에 실행할 명령어의 주소를 저장
   - (b) IR: 현재 실행 중인 명령어를 저장
   - (c) MAR: 접근할 메모리 주소를 저장

3. 산술 연산 (덧셈, 뺄셈 등), 논리 연산 (AND, OR 등), 시프트 연산 (또는 비교 연산)

4. (a) RegWrite - 레지스터에 결과를 쓰므로 활성화
   - ALUSrc = 0 (레지스터 값 사용)
   - MemtoReg = 0 (ALU 결과 선택)

5.
   - IF: PC에서 명령어 인출, PC+4
   - ID: $t1 레지스터 값 읽기, 오프셋(100) 부호 확장
   - EX: $t1 + 100 주소 계산
   - MEM: 계산된 주소에서 데이터 읽기
   - WB: 읽은 데이터를 $t0에 저장

6.
   - (a) 클럭 주기 = 250 + 150 + 200 + 300 + 100 = 1000ps = 1ns
   - (b) 1초 / 1ns = 10^9 = 1 GIPS (Giga Instructions Per Second)

7. 평균 CPI = 0.30×5 + 0.15×4 + 0.40×4 + 0.15×3
           = 1.50 + 0.60 + 1.60 + 0.45 = 4.15

8.
   - 캐시 메모리: CPU와 메모리 사이에 고속 메모리 배치
   - 파이프라이닝: 여러 명령어를 동시에 처리
   - 프리페치: 필요한 데이터를 미리 가져옴

9.
   - 단일 사이클: 3 × 1000ps = 3000ps = 3ns
   - 다중 사이클: (5 + 4 + 4) × 300ps = 13 × 300ps = 3900ps = 3.9ns
     (클럭 주기 = max(250, 150, 200, 300, 100) = 300ps)

</details>

<hr />
<h2 id="_11">다음 단계<a class="header-link" href="#_11" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="./08_Control_Unit.md">08_Control_Unit.md</a> - 하드와이어드/마이크로프로그램 제어</li>
</ul>
<hr />
<h2 id="_12">참고 자료<a class="header-link" href="#_12" title="Permanent link">&para;</a></h2>
<ul>
<li>Computer Organization and Design (Patterson &amp; Hennessy)</li>
<li>Computer Architecture: A Quantitative Approach (Hennessy &amp; Patterson)</li>
<li><a href="https://cpuvisualsimulator.github.io/">CPU 시뮬레이터</a></li>
<li><a href="https://courses.cs.washington.edu/courses/cse378/09au/lectures/datapath.html">MIPS 데이터패스 시뮬레이터</a></li>
</ul>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/ko/Computer_Architecture/06_Sequential_Logic.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">순차 논리 회로</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">🔗</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/ko/Computer_Architecture/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">📋</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/ko/Computer_Architecture/08_Control_Unit.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">제어장치</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">↑</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'ko';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}