{% raw %}
<!DOCTYPE html>
<html lang="ko" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>메모리 계층 구조 - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/ko/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/ko/" class="nav-item ">
                    <span class="nav-icon">🏠</span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">💻</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/ko/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" >
                        English
                    </option>
                    
                    <option value="ko" selected>
                        한국어
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">☀️</span>
                    <span class="theme-icon dark">🌙</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/ko/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/ko/Computer_Architecture/">Computer Architecture</a>
    <span class="separator">/</span>
    <span class="current">메모리 계층 구조</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>메모리 계층 구조</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/ko/Computer_Architecture/13_Superscalar_Out_of_Order.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">슈퍼스칼라와 비순차 실행</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">🔗</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/ko/Computer_Architecture/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">📋</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/ko/Computer_Architecture/15_Cache_Memory.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">캐시 메모리</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#_2">개요</a></li>
<li><a href="#_3">목차</a></li>
<li><a href="#1">1. 메모리 계층 구조의 필요성</a><ul>
<li><a href="#11-cpu-">1.1 CPU-메모리 속도 격차</a></li>
<li><a href="#12-vs">1.2 이상적인 메모리 vs 현실</a></li>
<li><a href="#13">1.3 메모리 계층 개념</a></li>
</ul>
</li>
<li><a href="#2">2. 지역성 원리</a><ul>
<li><a href="#21">2.1 지역성이란?</a></li>
<li><a href="#22-temporal-locality">2.2 시간적 지역성 (Temporal Locality)</a></li>
<li><a href="#23-spatial-locality">2.3 공간적 지역성 (Spatial Locality)</a></li>
<li><a href="#24">2.4 지역성을 활용한 최적화</a></li>
<li><a href="#25-working-set">2.5 Working Set</a></li>
</ul>
</li>
<li><a href="#3">3. 메모리 기술 비교</a><ul>
<li><a href="#31-sram-static-ram">3.1 SRAM (Static RAM)</a></li>
<li><a href="#32-dram-dynamic-ram">3.2 DRAM (Dynamic RAM)</a></li>
<li><a href="#33-ssd">3.3 플래시 메모리 (SSD)</a></li>
<li><a href="#34">3.4 메모리 기술 비교표</a></li>
</ul>
</li>
<li><a href="#4">4. 메모리 계층</a><ul>
<li><a href="#41">4.1 레지스터</a></li>
<li><a href="#42">4.2 캐시 메모리</a></li>
<li><a href="#43-dram">4.3 메인 메모리 (DRAM)</a></li>
<li><a href="#44">4.4 보조 기억장치</a></li>
</ul>
</li>
<li><a href="#5">5. 메모리 대역폭과 지연시간</a><ul>
<li><a href="#51-bandwidth">5.1 대역폭 (Bandwidth)</a></li>
<li><a href="#52-latency">5.2 지연시간 (Latency)</a></li>
<li><a href="#53-latency-vs-bandwidth">5.3 Latency vs Bandwidth 관계</a></li>
<li><a href="#54-amat-average-memory-access-time">5.4 AMAT (Average Memory Access Time)</a></li>
</ul>
</li>
<li><a href="#6">6. 메모리 성능 최적화</a><ul>
<li><a href="#61">6.1 데이터 레이아웃 최적화</a></li>
<li><a href="#62">6.2 루프 최적화</a></li>
<li><a href="#63">6.3 프리페칭</a></li>
<li><a href="#64">6.4 메모리 정렬</a></li>
</ul>
</li>
<li><a href="#7">7. 연습 문제</a><ul>
<li><a href="#_4">기초 문제</a></li>
<li><a href="#_5">중급 문제</a></li>
<li><a href="#_6">심화 문제</a></li>
</ul>
</li>
<li><a href="#_7">다음 단계</a></li>
<li><a href="#_8">참고 자료</a></li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="_1">메모리 계층 구조<a class="header-link" href="#_1" title="Permanent link">&para;</a></h1>
<h2 id="_2">개요<a class="header-link" href="#_2" title="Permanent link">&para;</a></h2>
<p>컴퓨터 시스템에서 CPU와 메모리 간의 속도 차이는 성능의 주요 병목입니다. 메모리 계층 구조(Memory Hierarchy)는 속도, 용량, 비용의 트레이드오프를 최적화하여 이 문제를 해결합니다. 이 레슨에서는 메모리 계층 구조의 원리, 지역성의 개념, 그리고 각 계층의 특성을 학습합니다.</p>
<p><strong>난이도</strong>: ⭐⭐</p>
<p><strong>선수 지식</strong>: 컴퓨터 시스템 개요, CPU 구조 기초</p>
<hr />
<h2 id="_3">목차<a class="header-link" href="#_3" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#1-메모리-계층-구조의-필요성">메모리 계층 구조의 필요성</a></li>
<li><a href="#2-지역성-원리">지역성 원리</a></li>
<li><a href="#3-메모리-기술-비교">메모리 기술 비교</a></li>
<li><a href="#4-메모리-계층">메모리 계층</a></li>
<li><a href="#5-메모리-대역폭과-지연시간">메모리 대역폭과 지연시간</a></li>
<li><a href="#6-메모리-성능-최적화">메모리 성능 최적화</a></li>
<li><a href="#7-연습-문제">연습 문제</a></li>
</ol>
<hr />
<h2 id="1">1. 메모리 계층 구조의 필요성<a class="header-link" href="#1" title="Permanent link">&para;</a></h2>
<h3 id="11-cpu-">1.1 CPU-메모리 속도 격차<a class="header-link" href="#11-cpu-" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>CPU와 메모리 성능 발전 추이 (1980-2020):

성능
  │
  │                                        ●────────── CPU
  │                                   ●
  │                              ●
  │                         ●
  │                    ●
  │               ●
  │          ●                               ◆───────── 메모리
  │     ●                              ◆
  │ ●                            ◆
  │                        ◆
  │                  ◆
  │            ◆
  │      ◆
  │ ◆
  └─────────────────────────────────────────────────── 연도
   1980    1990    2000    2010    2020

CPU: 연간 ~50% 성능 향상 (1980-2000)
메모리: 연간 ~7% 성능 향상

결과: &quot;Memory Wall&quot; - 메모리가 시스템 성능의 병목
</code></pre></div>

<h3 id="12-vs">1.2 이상적인 메모리 vs 현실<a class="header-link" href="#12-vs" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>이상적인 메모리:
┌─────────────────────────────────────────┐
│  - 무한대 용량                           │
│  - 0 접근 시간                           │
│  - 무료                                 │
└─────────────────────────────────────────┘

현실:
┌─────────────────────────────────────────────────────────────┐
│  속도 ↑ = 비용 ↑, 용량 ↓                                     │
│  용량 ↑ = 비용 ↑, 속도 ↓                                     │
│  비용 ↓ = 속도 ↓, 용량 제한                                   │
└─────────────────────────────────────────────────────────────┘

해결책: 메모리 계층 구조
- 여러 종류의 메모리를 계층적으로 배치
- 빠르고 작은 메모리를 CPU 가까이
- 느리고 큰 메모리를 멀리
- 자주 사용하는 데이터를 빠른 메모리에 유지
</code></pre></div>

<h3 id="13">1.3 메모리 계층 개념<a class="header-link" href="#13" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>                        ┌───────────┐
                        │ 레지스터   │  ← 가장 빠름, 가장 작음, 가장 비쌈
                        │   ~1KB    │
                        └─────┬─────┘
                              │
                        ┌─────┴─────┐
                        │ L1 캐시   │
                        │  ~64KB   │
                        └─────┬─────┘
                              │
                    ┌─────────┴─────────┐
                    │     L2 캐시        │
                    │    ~256KB-1MB     │
                    └─────────┬─────────┘
                              │
            ┌─────────────────┴─────────────────┐
            │            L3 캐시                  │
            │           ~2-32MB                 │
            └─────────────────┬─────────────────┘
                              │
    ┌─────────────────────────┴─────────────────────────┐
    │                   메인 메모리                        │
    │                  ~8-128GB                         │
    └─────────────────────────┬─────────────────────────┘
                              │
┌─────────────────────────────┴─────────────────────────────┐
│                        SSD/HDD                             │
│                     ~256GB-10TB                            │  ← 가장 느림, 가장 큼, 가장 저렴
└───────────────────────────────────────────────────────────┘

위로 갈수록: 빠름, 작음, 비쌈, CPU에 가까움
아래로 갈수록: 느림, 큼, 저렴, CPU에서 멀음
</code></pre></div>

<hr />
<h2 id="2">2. 지역성 원리<a class="header-link" href="#2" title="Permanent link">&para;</a></h2>
<h3 id="21">2.1 지역성이란?<a class="header-link" href="#21" title="Permanent link">&para;</a></h3>
<p>프로그램이 메모리를 접근하는 패턴에는 규칙성이 있습니다. 이를 <strong>지역성(Locality)</strong>이라 하며, 메모리 계층 구조가 효과적인 이유입니다.</p>
<h3 id="22-temporal-locality">2.2 시간적 지역성 (Temporal Locality)<a class="header-link" href="#22-temporal-locality" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nl">정의</span><span class="p">:</span><span class="w"> </span><span class="n">최근에</span><span class="w"> </span><span class="n">접근한</span><span class="w"> </span><span class="n">데이터는</span><span class="w"> </span><span class="n">가까운</span><span class="w"> </span><span class="n">미래에</span><span class="w"> </span><span class="n">다시</span><span class="w"> </span><span class="n">접근될</span><span class="w"> </span><span class="n">가능성이</span><span class="w"> </span><span class="n">높음</span>

<span class="n">예시</span><span class="w"> </span><span class="mi">1</span><span class="err">:</span><span class="w"> </span><span class="n">반복문의</span><span class="w"> </span><span class="n">변수</span>
<span class="err">┌─────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1000</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">     </span><span class="nf">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="k">array</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">;</span><span class="w">               </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">}</span><span class="w">                                  </span><span class="err">│</span>
<span class="err">└─────────────────────────────────────┘</span>
<span class="w">  </span><span class="n">변수</span><span class="w"> </span><span class="s1">&#39;sum&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;i&#39;</span><span class="n">는</span><span class="w"> </span><span class="mi">1000</span><span class="n">번</span><span class="w"> </span><span class="n">반복</span><span class="w"> </span><span class="n">접근</span>

<span class="n">예시</span><span class="w"> </span><span class="mi">2</span><span class="err">:</span><span class="w"> </span><span class="n">자주</span><span class="w"> </span><span class="n">호출되는</span><span class="w"> </span><span class="n">함수</span>
<span class="err">┌─────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">running</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w">                  </span><span class="err">│</span>
<span class="err">│</span><span class="w">     </span><span class="n">process_event</span><span class="p">();</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">반복</span><span class="w"> </span><span class="n">호출</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w">     </span><span class="n">update_state</span><span class="p">();</span><span class="w">   </span><span class="o">//</span><span class="w"> </span><span class="n">반복</span><span class="w"> </span><span class="n">호출</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">}</span><span class="w">                                  </span><span class="err">│</span>
<span class="err">└─────────────────────────────────────┘</span>
<span class="w">  </span><span class="n">함수</span><span class="w"> </span><span class="n">코드는</span><span class="w"> </span><span class="n">계속</span><span class="w"> </span><span class="n">재사용됨</span>

<span class="n">시간적</span><span class="w"> </span><span class="n">지역성</span><span class="w"> </span><span class="nl">활용</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">최근</span><span class="w"> </span><span class="n">접근한</span><span class="w"> </span><span class="n">데이터를</span><span class="w"> </span><span class="n">캐시에</span><span class="w"> </span><span class="n">유지</span>
<span class="o">-</span><span class="w"> </span><span class="n">다시</span><span class="w"> </span><span class="n">접근</span><span class="w"> </span><span class="n">시</span><span class="w"> </span><span class="n">캐시에서</span><span class="w"> </span><span class="n">빠르게</span><span class="w"> </span><span class="n">제공</span>
</code></pre></div>

<h3 id="23-spatial-locality">2.3 공간적 지역성 (Spatial Locality)<a class="header-link" href="#23-spatial-locality" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nl">정의</span><span class="p">:</span><span class="w"> </span><span class="n">접근한</span><span class="w"> </span><span class="n">데이터</span><span class="w"> </span><span class="n">주변의</span><span class="w"> </span><span class="n">데이터도</span><span class="w"> </span><span class="n">곧</span><span class="w"> </span><span class="n">접근될</span><span class="w"> </span><span class="n">가능성이</span><span class="w"> </span><span class="n">높음</span>

<span class="n">예시</span><span class="w"> </span><span class="mi">1</span><span class="err">:</span><span class="w"> </span><span class="n">배열</span><span class="w"> </span><span class="n">순차</span><span class="w"> </span><span class="n">접근</span>
<span class="err">┌─────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w">          </span><span class="err">│</span>
<span class="err">│</span><span class="w">     </span><span class="nf">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="k">array</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">;</span><span class="w">               </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">}</span><span class="w">                                  </span><span class="err">│</span>
<span class="err">└─────────────────────────────────────┘</span>

<span class="n">메모리</span><span class="w"> </span><span class="nl">레이아웃</span><span class="p">:</span>
<span class="nl">주소</span><span class="p">:</span><span class="w">  </span><span class="mh">0x100</span><span class="w">  </span><span class="mh">0x104</span><span class="w">  </span><span class="mh">0x108</span><span class="w">  </span><span class="mh">0x10C</span><span class="w">  </span><span class="mh">0x110</span><span class="w">  </span><span class="mh">0x114</span>
<span class="w">       </span><span class="err">┌──────┬──────┬──────┬──────┬──────┬──────┐</span>
<span class="k">array</span><span class="err">:</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="n">a</span><span class="o">[</span><span class="n">0</span><span class="o">]</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="n">a</span><span class="o">[</span><span class="n">1</span><span class="o">]</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="n">a</span><span class="o">[</span><span class="n">2</span><span class="o">]</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="n">a</span><span class="o">[</span><span class="n">3</span><span class="o">]</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="n">a</span><span class="o">[</span><span class="n">4</span><span class="o">]</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="n">a</span><span class="o">[</span><span class="n">5</span><span class="o">]</span><span class="w"> </span><span class="err">│</span>
<span class="w">       </span><span class="err">└──────┴──────┴──────┴──────┴──────┴──────┘</span>
<span class="w">         </span><span class="err">↓</span><span class="w">      </span><span class="err">↓</span><span class="w">      </span><span class="err">↓</span><span class="w">      </span><span class="err">↓</span><span class="w">      </span><span class="err">↓</span><span class="w">      </span><span class="err">↓</span>
<span class="w">       </span><span class="n">순차적으로</span><span class="w"> </span><span class="n">접근</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">공간적</span><span class="w"> </span><span class="n">지역성</span><span class="w"> </span><span class="n">높음</span>

<span class="n">예시</span><span class="w"> </span><span class="mi">2</span><span class="err">:</span><span class="w"> </span><span class="n">구조체</span><span class="w"> </span><span class="n">접근</span>
<span class="err">┌─────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="n">struct</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="nc">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">z</span><span class="p">;</span><span class="w"> </span><span class="err">}</span><span class="p">;</span><span class="w">     </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="n">p</span><span class="p">;</span><span class="w">                           </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="n">distance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sqrt</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w">          </span><span class="err">│</span>
<span class="err">│</span><span class="w">                 </span><span class="n">p</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">p</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">+</span><span class="w">          </span><span class="err">│</span>
<span class="err">│</span><span class="w">                 </span><span class="n">p</span><span class="p">.</span><span class="n">z</span><span class="o">*</span><span class="n">p</span><span class="p">.</span><span class="n">z</span><span class="p">);</span><span class="w">          </span><span class="err">│</span>
<span class="err">└─────────────────────────────────────┘</span>
<span class="w">  </span><span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">z는</span><span class="w"> </span><span class="n">메모리상</span><span class="w"> </span><span class="n">인접</span>

<span class="n">공간적</span><span class="w"> </span><span class="n">지역성</span><span class="w"> </span><span class="nl">활용</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">캐시</span><span class="w"> </span><span class="n">라인</span><span class="p">(</span><span class="n">블록</span><span class="p">)</span><span class="w"> </span><span class="n">단위로</span><span class="w"> </span><span class="n">데이터</span><span class="w"> </span><span class="n">로드</span>
<span class="o">-</span><span class="w"> </span><span class="n">한</span><span class="w"> </span><span class="n">번에</span><span class="w"> </span><span class="n">여러</span><span class="w"> </span><span class="n">인접</span><span class="w"> </span><span class="n">데이터</span><span class="w"> </span><span class="n">가져옴</span>
<span class="o">-</span><span class="w"> </span><span class="mi">64</span><span class="n">바이트</span><span class="w"> </span><span class="n">캐시</span><span class="w"> </span><span class="n">라인</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="n">개</span><span class="w"> </span><span class="nc">int</span><span class="w"> </span><span class="n">포함</span>
</code></pre></div>

<h3 id="24">2.4 지역성을 활용한 최적화<a class="header-link" href="#24" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">좋은</span><span class="w"> </span><span class="n">코드</span><span class="w"> </span><span class="p">(</span><span class="n">높은</span><span class="w"> </span><span class="n">지역성</span><span class="p">)</span><span class="err">:</span>

<span class="o">//</span><span class="w"> </span><span class="n">행</span><span class="w"> </span><span class="n">우선</span><span class="w"> </span><span class="n">순회</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">메모리</span><span class="w"> </span><span class="n">레이아웃에</span><span class="w"> </span><span class="n">맞춤</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="nf">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">matrix</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>

<span class="n">메모리</span><span class="w"> </span><span class="n">접근</span><span class="w"> </span><span class="nl">패턴</span><span class="p">:</span>
<span class="o">[</span><span class="n">0,0</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">0,1</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">0,2</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">0,3</span><span class="o">]</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="o">[</span><span class="n">1,0</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">1,1</span><span class="o">]</span><span class="w"> </span><span class="p">...</span>
<span class="w">  </span><span class="err">↓</span><span class="w">     </span><span class="err">↓</span><span class="w">     </span><span class="err">↓</span><span class="w">     </span><span class="err">↓</span><span class="w">        </span><span class="err">↓</span><span class="w">     </span><span class="err">↓</span>
<span class="n">순차적</span><span class="w"> </span><span class="n">접근</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="n">캐시</span><span class="w"> </span><span class="n">히트율</span><span class="w"> </span><span class="n">높음</span>


<span class="n">나쁜</span><span class="w"> </span><span class="n">코드</span><span class="w"> </span><span class="p">(</span><span class="n">낮은</span><span class="w"> </span><span class="n">지역성</span><span class="p">)</span><span class="err">:</span>

<span class="o">//</span><span class="w"> </span><span class="n">열</span><span class="w"> </span><span class="n">우선</span><span class="w"> </span><span class="n">순회</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">메모리</span><span class="w"> </span><span class="n">레이아웃과</span><span class="w"> </span><span class="n">불일치</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="nf">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">matrix</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>

<span class="n">메모리</span><span class="w"> </span><span class="n">접근</span><span class="w"> </span><span class="nl">패턴</span><span class="p">:</span>
<span class="o">[</span><span class="n">0,0</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">1,0</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">2,0</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">3,0</span><span class="o">]</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="o">[</span><span class="n">0,1</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">1,1</span><span class="o">]</span><span class="w"> </span><span class="p">...</span>
<span class="w">  </span><span class="err">↓</span><span class="w">     </span><span class="err">↓</span><span class="w">     </span><span class="err">↓</span><span class="w">     </span><span class="err">↓</span><span class="w">        </span><span class="err">↓</span><span class="w">     </span><span class="err">↓</span>
<span class="n">N개</span><span class="w"> </span><span class="n">간격</span><span class="w"> </span><span class="n">점프</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="n">캐시</span><span class="w"> </span><span class="n">미스</span><span class="w"> </span><span class="n">빈번</span>


<span class="n">성능</span><span class="w"> </span><span class="n">차이</span><span class="w"> </span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="n">바이트</span><span class="w"> </span><span class="n">원소</span><span class="p">)</span><span class="err">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">행</span><span class="w"> </span><span class="nl">우선</span><span class="p">:</span><span class="w"> </span><span class="o">~</span><span class="mi">50</span><span class="n">ms</span>
<span class="o">-</span><span class="w"> </span><span class="n">열</span><span class="w"> </span><span class="nl">우선</span><span class="p">:</span><span class="w"> </span><span class="o">~</span><span class="mi">500</span><span class="n">ms</span><span class="w"> </span><span class="p">(</span><span class="mi">10</span><span class="n">배</span><span class="w"> </span><span class="n">느림</span><span class="p">)</span>
</code></pre></div>

<h3 id="25-working-set">2.5 Working Set<a class="header-link" href="#25-working-set" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">정의</span><span class="o">:</span><span class="w"> </span><span class="err">특정</span><span class="w"> </span><span class="err">시간</span><span class="w"> </span><span class="err">구간</span><span class="w"> </span><span class="err">동안</span><span class="w"> </span><span class="err">프로그램이</span><span class="w"> </span><span class="err">활발히</span><span class="w"> </span><span class="err">사용하는</span><span class="w"> </span><span class="err">메모리</span><span class="w"> </span><span class="err">영역</span>

<span class="err">┌─────────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w">                                                              </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">프로그램</span><span class="w"> </span><span class="err">실행</span><span class="w"> </span><span class="err">단계별</span><span class="w"> </span><span class="n">Working</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="err">변화</span><span class="w">                         </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                              </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">단계</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="w"> </span><span class="err">초기화</span><span class="w">                                               </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="n">Working</span><span class="w"> </span><span class="n">Set</span><span class="o">:</span><span class="w"> </span><span class="o">[</span><span class="err">초기화</span><span class="w"> </span><span class="err">코드</span><span class="o">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">[</span><span class="err">설정</span><span class="w"> </span><span class="err">데이터</span><span class="o">]</span><span class="w">                   </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">크기</span><span class="o">:</span><span class="w"> </span><span class="o">~</span><span class="mi">100</span><span class="n">KB</span><span class="w">                                                </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                              </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">단계</span><span class="w"> </span><span class="mi">2</span><span class="o">:</span><span class="w"> </span><span class="err">데이터</span><span class="w"> </span><span class="err">처리</span><span class="w">                                          </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="n">Working</span><span class="w"> </span><span class="n">Set</span><span class="o">:</span><span class="w"> </span><span class="o">[</span><span class="err">처리</span><span class="w"> </span><span class="err">코드</span><span class="o">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">[</span><span class="err">입력</span><span class="w"> </span><span class="err">버퍼</span><span class="o">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">[</span><span class="err">출력</span><span class="w"> </span><span class="err">버퍼</span><span class="o">]</span><span class="w">          </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">크기</span><span class="o">:</span><span class="w"> </span><span class="o">~</span><span class="mi">10</span><span class="n">MB</span><span class="w">                                                 </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                              </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">단계</span><span class="w"> </span><span class="mi">3</span><span class="o">:</span><span class="w"> </span><span class="err">결과</span><span class="w"> </span><span class="err">출력</span><span class="w">                                            </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="n">Working</span><span class="w"> </span><span class="n">Set</span><span class="o">:</span><span class="w"> </span><span class="o">[</span><span class="err">출력</span><span class="w"> </span><span class="err">코드</span><span class="o">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">[</span><span class="err">출력</span><span class="w"> </span><span class="err">버퍼</span><span class="o">]</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">크기</span><span class="o">:</span><span class="w"> </span><span class="o">~</span><span class="mi">500</span><span class="n">KB</span><span class="w">                                                </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                              </span><span class="err">│</span>
<span class="err">└─────────────────────────────────────────────────────────────┘</span>

<span class="err">캐시</span><span class="w"> </span><span class="err">크기와</span><span class="w"> </span><span class="n">Working</span><span class="w"> </span><span class="n">Set</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">Working</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="err">캐시</span><span class="w"> </span><span class="err">크기</span><span class="o">:</span><span class="w"> </span><span class="err">높은</span><span class="w"> </span><span class="err">히트율</span>
<span class="o">-</span><span class="w"> </span><span class="n">Working</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="err">캐시</span><span class="w"> </span><span class="err">크기</span><span class="o">:</span><span class="w"> </span><span class="err">스래싱</span><span class="w"> </span><span class="err">발생</span><span class="w"> </span><span class="err">가능</span>
</code></pre></div>

<hr />
<h2 id="3">3. 메모리 기술 비교<a class="header-link" href="#3" title="Permanent link">&para;</a></h2>
<h3 id="31-sram-static-ram">3.1 SRAM (Static RAM)<a class="header-link" href="#31-sram-static-ram" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>SRAM 셀 구조 (6T SRAM):

        Vdd                         Vdd
         │                           │
      ┌──┴──┐                     ┌──┴──┐
      │ P1  │                     │ P2  │
      └──┬──┘                     └──┬──┘
         │          ┌───┐            │
         ├──────────┤   ├────────────┤
         │          └───┘            │
      ┌──┴──┐                     ┌──┴──┐
      │ N1  │        Word         │ N2  │
      └──┬──┘        Line         └──┬──┘
         │            │              │
         │         ┌──┴──┐           │
         │         │ N3  │           │
         │         └──┬──┘           │
         │            │              │
        Bit         GND            ~Bit
        Line                       Line

특징:
- 6개 트랜지스터로 1비트 저장
- 전원 공급 시 데이터 유지 (리프레시 불필요)
- 빠른 접근 속도 (~1-2ns)
- 높은 비용, 낮은 집적도
- 용도: 캐시 메모리, 레지스터 파일
</code></pre></div>

<h3 id="32-dram-dynamic-ram">3.2 DRAM (Dynamic RAM)<a class="header-link" href="#32-dram-dynamic-ram" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>DRAM 셀 구조 (1T1C DRAM):

    Word Line
        │
     ┌──┴──┐
     │  T  │ (트랜지스터)
     └──┬──┘
        │
     ┌──┴──┐
     │  C  │ (커패시터)
     └──┬──┘
        │
    Bit Line

특징:
- 1개 트랜지스터 + 1개 커패시터로 1비트 저장
- 커패시터 누수로 인해 주기적 리프레시 필요 (~64ms)
- 느린 접근 속도 (~50-100ns)
- 저렴한 비용, 높은 집적도
- 용도: 메인 메모리 (DDR4, DDR5)

DRAM 접근 과정:
1. Row Activate (RAS): 행 선택, 센스 앰프로 데이터 이동
2. Column Read (CAS): 열 선택, 데이터 출력
3. Precharge: 다음 접근 준비

┌─────────────────────────────────────────────────────┐
│ RAS Latency │ CAS Latency │ Precharge │ = 전체 지연 │
└─────────────────────────────────────────────────────┘
    ~15ns        ~15ns         ~15ns       ~45ns+
</code></pre></div>

<h3 id="33-ssd">3.3 플래시 메모리 (SSD)<a class="header-link" href="#33-ssd" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>NAND Flash 구조:

     Word Line 0  Word Line 1  Word Line 2
          │           │           │
    ┌─────┼───────────┼───────────┼─────┐
    │  ┌──┴──┐     ┌──┴──┐     ┌──┴──┐  │
    │  │Cell │     │Cell │     │Cell │  │ String 0
    │  └──┬──┘     └──┬──┘     └──┬──┘  │
    │     │           │           │     │
    │  ┌──┴──┐     ┌──┴──┐     ┌──┴──┐  │
    │  │Cell │     │Cell │     │Cell │  │ String 1
    │  └──┬──┘     └──┬──┘     └──┬──┘  │
    └─────┼───────────┼───────────┼─────┘
          │           │           │
       Bit Line    Bit Line    Bit Line

특징:
- 플로팅 게이트에 전하 저장
- 비휘발성 (전원 없어도 데이터 유지)
- 읽기: ~25us, 쓰기: ~250us, 삭제: ~2ms
- 블록 단위 삭제만 가능
- 용도: SSD, USB 드라이브, SD 카드
</code></pre></div>

<h3 id="34">3.4 메모리 기술 비교표<a class="header-link" href="#34" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌──────────────┬───────────┬───────────┬───────────┬───────────┐
│    특성       │   SRAM    │   DRAM    │  NAND     │   HDD     │
├──────────────┼───────────┼───────────┼───────────┼───────────┤
│ 접근 시간     │  1-2ns    │  50-100ns │  25us     │  5-10ms   │
├──────────────┼───────────┼───────────┼───────────┼───────────┤
│ 비용/GB      │  ~$5000   │  ~$3-5    │  ~$0.1    │  ~$0.02   │
├──────────────┼───────────┼───────────┼───────────┼───────────┤
│ 휘발성       │    Yes    │    Yes    │    No     │    No     │
├──────────────┼───────────┼───────────┼───────────┼───────────┤
│ 일반 용량    │  ~32MB    │  ~128GB   │  ~4TB     │  ~20TB    │
├──────────────┼───────────┼───────────┼───────────┼───────────┤
│ 밀도         │    낮음    │   높음    │  매우 높음 │  매우 높음 │
├──────────────┼───────────┼───────────┼───────────┼───────────┤
│ 전력 소비    │    높음    │   중간    │   낮음    │   높음    │
├──────────────┼───────────┼───────────┼───────────┼───────────┤
│ 주 용도      │  캐시     │ 메인 메모리│   SSD    │ 대용량 저장│
└──────────────┴───────────┴───────────┴───────────┴───────────┘
</code></pre></div>

<hr />
<h2 id="4">4. 메모리 계층<a class="header-link" href="#4" title="Permanent link">&para;</a></h2>
<h3 id="41">4.1 레지스터<a class="header-link" href="#41" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nl">위치</span><span class="p">:</span><span class="w"> </span><span class="n">CPU</span><span class="w"> </span><span class="n">내부</span>
<span class="nl">용량</span><span class="p">:</span><span class="w"> </span><span class="n">수십</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">수백</span><span class="w"> </span><span class="n">개</span><span class="w"> </span><span class="p">(</span><span class="n">x86</span><span class="o">-</span><span class="mi">64</span><span class="err">:</span><span class="w"> </span><span class="mi">16</span><span class="n">개</span><span class="w"> </span><span class="n">범용</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">기타</span><span class="p">)</span>
<span class="nl">속도</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">사이클</span><span class="w"> </span><span class="p">(</span><span class="mf">0.3</span><span class="n">ns</span><span class="w"> </span><span class="err">@</span><span class="w"> </span><span class="mi">3</span><span class="n">GHz</span><span class="p">)</span>

<span class="n">레지스터</span><span class="w"> </span><span class="nl">종류</span><span class="p">:</span>
<span class="err">┌────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="n">범용</span><span class="w"> </span><span class="n">레지스터</span><span class="w">    </span><span class="err">│</span><span class="w"> </span><span class="n">RAX</span><span class="p">,</span><span class="w"> </span><span class="n">RBX</span><span class="p">,</span><span class="w"> </span><span class="n">RCX</span><span class="p">,</span><span class="w"> </span><span class="n">RDX</span><span class="p">,</span><span class="w"> </span><span class="n">RSI</span><span class="p">,</span><span class="w"> </span><span class="n">RDI</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="w">   </span><span class="err">│</span>
<span class="err">├────────────────────────────────────────────────────────┤</span>
<span class="err">│</span><span class="w"> </span><span class="n">프로그램</span><span class="w"> </span><span class="n">카운터</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="n">RIP</span><span class="w"> </span><span class="p">(</span><span class="n">Instruction</span><span class="w"> </span><span class="n">Pointer</span><span class="p">)</span><span class="w">           </span><span class="err">│</span>
<span class="err">├────────────────────────────────────────────────────────┤</span>
<span class="err">│</span><span class="w"> </span><span class="n">스택</span><span class="w"> </span><span class="n">포인터</span><span class="w">     </span><span class="err">│</span><span class="w"> </span><span class="n">RSP</span><span class="p">,</span><span class="w"> </span><span class="n">RBP</span><span class="w">                             </span><span class="err">│</span>
<span class="err">├────────────────────────────────────────────────────────┤</span>
<span class="err">│</span><span class="w"> </span><span class="n">플래그</span><span class="w"> </span><span class="n">레지스터</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="n">RFLAGS</span><span class="w"> </span><span class="p">(</span><span class="n">Zero</span><span class="p">,</span><span class="w"> </span><span class="n">Carry</span><span class="p">,</span><span class="w"> </span><span class="nf">Sign</span><span class="p">,</span><span class="w"> </span><span class="p">...)</span><span class="w">    </span><span class="err">│</span>
<span class="err">├────────────────────────────────────────────────────────┤</span>
<span class="err">│</span><span class="w"> </span><span class="n">벡터</span><span class="w"> </span><span class="n">레지스터</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="n">XMM0</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="n">YMM0</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="n">ZMM0</span><span class="o">-</span><span class="mi">31</span><span class="w"> </span><span class="p">(</span><span class="n">SIMD</span><span class="p">)</span><span class="w">    </span><span class="err">│</span>
<span class="err">├────────────────────────────────────────────────────────┤</span>
<span class="err">│</span><span class="w"> </span><span class="n">부동소수점</span><span class="w">      </span><span class="err">│</span><span class="w"> </span><span class="n">ST0</span><span class="o">-</span><span class="n">ST7</span><span class="w"> </span><span class="p">(</span><span class="n">x87</span><span class="p">),</span><span class="w"> </span><span class="n">XMM</span><span class="w"> </span><span class="p">(</span><span class="n">SSE</span><span class="p">)</span><span class="w">            </span><span class="err">│</span>
<span class="err">└────────────────────────────────────────────────────────┘</span>

<span class="n">레지스터</span><span class="w"> </span><span class="n">vs</span><span class="w"> </span><span class="n">메모리</span><span class="w"> </span><span class="nl">성능</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">레지스터</span><span class="w"> </span><span class="nl">연산</span><span class="p">:</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="n">R1</span><span class="p">,</span><span class="w"> </span><span class="n">R2</span><span class="p">,</span><span class="w"> </span><span class="n">R3</span><span class="w">  </span><span class="err">→</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">사이클</span>
<span class="o">-</span><span class="w"> </span><span class="n">메모리</span><span class="w"> </span><span class="nl">연산</span><span class="p">:</span><span class="w">   </span><span class="k">ADD</span><span class="w"> </span><span class="n">R1</span><span class="p">,</span><span class="w"> </span><span class="o">[</span><span class="n">mem</span><span class="o">]</span><span class="w">   </span><span class="err">→</span><span class="w"> </span><span class="mi">4</span><span class="o">+</span><span class="w"> </span><span class="n">사이클</span><span class="w"> </span><span class="p">(</span><span class="n">L1</span><span class="w"> </span><span class="n">히트</span><span class="p">)</span>
</code></pre></div>

<h3 id="42">4.2 캐시 메모리<a class="header-link" href="#42" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>캐시 계층 (현대 CPU):

┌─────────────────────────────────────────────────────────────┐
│                          Core 0                              │
│  ┌─────────────────────────────────────────────────────┐    │
│  │  ┌──────────────┐    ┌──────────────┐               │    │
│  │  │ L1 I-Cache   │    │ L1 D-Cache   │               │    │
│  │  │   32KB       │    │   32KB       │               │    │
│  │  │   4 cycles   │    │   4 cycles   │               │    │
│  │  └──────┬───────┘    └──────┬───────┘               │    │
│  │         │                   │                        │    │
│  │         └─────────┬─────────┘                        │    │
│  │                   │                                  │    │
│  │         ┌─────────┴─────────┐                        │    │
│  │         │     L2 Cache      │                        │    │
│  │         │      256KB        │                        │    │
│  │         │     12 cycles     │                        │    │
│  │         └─────────┬─────────┘                        │    │
│  └───────────────────┼──────────────────────────────────┘    │
│                      │                                       │
├──────────────────────┼───────────────────────────────────────┤
│                      │           Core 1                      │
│                      │     (동일 구조)                        │
├──────────────────────┼───────────────────────────────────────┤
│           ┌──────────┴──────────┐                            │
│           │     L3 Cache         │                            │
│           │   8-32MB (공유)       │                            │
│           │    40 cycles         │                            │
│           └──────────┬──────────┘                            │
└──────────────────────┼───────────────────────────────────────┘
                       │
                       ▼
              ┌─────────────────┐
              │   Main Memory   │
              │   100+ cycles   │
              └─────────────────┘

캐시 특성 요약:
┌───────┬──────────┬───────────────┬──────────────────────────┐
│ 레벨  │   용량    │  지연시간     │         특징              │
├───────┼──────────┼───────────────┼──────────────────────────┤
│  L1   │  32-64KB │   4 cycles    │ 코어 전용, I/D 분리       │
├───────┼──────────┼───────────────┼──────────────────────────┤
│  L2   │ 256KB-1MB│  12 cycles    │ 코어 전용 또는 공유       │
├───────┼──────────┼───────────────┼──────────────────────────┤
│  L3   │  8-64MB  │  40 cycles    │ 전체 코어 공유            │
└───────┴──────────┴───────────────┴──────────────────────────┘
</code></pre></div>

<h3 id="43-dram">4.3 메인 메모리 (DRAM)<a class="header-link" href="#43-dram" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>현대 메모리 시스템 구조:

          ┌─────────────────────────────────────────────┐
          │               Memory Controller              │
          │            (CPU 또는 노스브리지 내장)         │
          └──────────────────┬──────────────────────────┘
                             │
         ┌───────────────────┼───────────────────┐
         │                   │                   │
    ┌────┴────┐         ┌────┴────┐         ┌────┴────┐
    │Channel 0│         │Channel 1│         │Channel 2│
    └────┬────┘         └────┬────┘         └────┬────┘
         │                   │                   │
    ┌────┴────┐         ┌────┴────┐         ┌────┴────┐
    │ DIMM 0  │         │ DIMM 0  │         │ DIMM 0  │
    │ 16GB    │         │ 16GB    │         │ 16GB    │
    └─────────┘         └─────────┘         └─────────┘

DDR (Double Data Rate) 발전:
┌────────┬─────────────┬──────────────┬───────────────────┐
│ 세대    │  클럭 속도   │  대역폭/채널  │     특징          │
├────────┼─────────────┼──────────────┼───────────────────┤
│ DDR3   │  800-2133   │  6.4-17GB/s  │ 1.5V             │
├────────┼─────────────┼──────────────┼───────────────────┤
│ DDR4   │ 1600-3200   │ 12.8-25.6GB/s│ 1.2V, 뱅크 그룹   │
├────────┼─────────────┼──────────────┼───────────────────┤
│ DDR5   │ 3200-6400+  │ 25.6-51.2GB/s│ 1.1V, 내장 ECC   │
└────────┴─────────────┴──────────────┴───────────────────┘
</code></pre></div>

<h3 id="44">4.4 보조 기억장치<a class="header-link" href="#44" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>SSD 구조:
┌─────────────────────────────────────────────────────────────┐
│                        SSD Controller                        │
│  ┌─────────────────────────────────────────────────────┐    │
│  │ Flash Translation Layer (FTL)                        │    │
│  │ - 논리 주소 → 물리 주소 변환                          │    │
│  │ - Wear Leveling                                     │    │
│  │ - Garbage Collection                                │    │
│  └─────────────────────────────────────────────────────┘    │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐           │
│  │ NAND    │ │ NAND    │ │ NAND    │ │ NAND    │           │
│  │ Package │ │ Package │ │ Package │ │ Package │           │
│  │   0     │ │   1     │ │   2     │ │   3     │           │
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘           │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐           │
│  │ NAND    │ │ NAND    │ │ NAND    │ │ NAND    │           │
│  │ Package │ │ Package │ │ Package │ │ Package │           │
│  │   4     │ │   5     │ │   6     │ │   7     │           │
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘           │
└─────────────────────────────────────────────────────────────┘

HDD vs SSD 비교:
┌─────────────────┬────────────────┬────────────────┐
│      특성        │      HDD       │      SSD       │
├─────────────────┼────────────────┼────────────────┤
│ 순차 읽기       │   150 MB/s     │  500-7000 MB/s │
├─────────────────┼────────────────┼────────────────┤
│ 랜덤 읽기       │   0.5 MB/s     │  50-500 MB/s   │
├─────────────────┼────────────────┼────────────────┤
│ 지연시간        │   5-10 ms      │   0.02-0.1 ms  │
├─────────────────┼────────────────┼────────────────┤
│ IOPS (랜덤)    │    ~200        │  10K-1M        │
├─────────────────┼────────────────┼────────────────┤
│ 내충격성        │    약함         │    강함        │
├─────────────────┼────────────────┼────────────────┤
│ GB당 가격       │   $0.02        │   $0.10        │
└─────────────────┴────────────────┴────────────────┘
</code></pre></div>

<hr />
<h2 id="5">5. 메모리 대역폭과 지연시간<a class="header-link" href="#5" title="Permanent link">&para;</a></h2>
<h3 id="51-bandwidth">5.1 대역폭 (Bandwidth)<a class="header-link" href="#51-bandwidth" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">정의</span><span class="o">:</span><span class="w"> </span><span class="err">단위</span><span class="w"> </span><span class="err">시간당</span><span class="w"> </span><span class="err">전송</span><span class="w"> </span><span class="err">가능한</span><span class="w"> </span><span class="err">데이터</span><span class="w"> </span><span class="err">양</span><span class="w"> </span><span class="o">(</span><span class="n">bytes</span><span class="o">/</span><span class="n">second</span><span class="o">)</span>

<span class="err">계산</span><span class="o">:</span>
<span class="err">대역폭</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">버스</span><span class="w"> </span><span class="err">폭</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="err">전송</span><span class="w"> </span><span class="err">속도</span>

<span class="err">예시</span><span class="w"> </span><span class="o">(</span><span class="n">DDR4</span><span class="o">-</span><span class="mi">3200</span><span class="o">):</span>
<span class="o">-</span><span class="w"> </span><span class="err">버스</span><span class="w"> </span><span class="err">폭</span><span class="o">:</span><span class="w"> </span><span class="mi">64</span><span class="err">비트</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="err">바이트</span>
<span class="o">-</span><span class="w"> </span><span class="err">전송</span><span class="w"> </span><span class="err">속도</span><span class="o">:</span><span class="w"> </span><span class="mi">3200</span><span class="w"> </span><span class="n">MT</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="o">(</span><span class="n">Mega</span><span class="w"> </span><span class="n">Transfers</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">second</span><span class="o">)</span>
<span class="o">-</span><span class="w"> </span><span class="err">대역폭</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="mi">3200</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">25</span><span class="o">,</span><span class="mi">600</span><span class="w"> </span><span class="n">MB</span><span class="sr">/s = 25.6 GB/s</span><span class="w"> </span><span class="o">(</span><span class="err">채널당</span><span class="o">)</span>

<span class="err">듀얼</span><span class="w"> </span><span class="err">채널</span><span class="o">:</span><span class="w"> </span><span class="mf">25.6</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">51.2</span><span class="w"> </span><span class="n">GB</span><span class="o">/</span><span class="n">s</span>
<span class="err">쿼드</span><span class="w"> </span><span class="err">채널</span><span class="o">:</span><span class="w"> </span><span class="mf">25.6</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">102.4</span><span class="w"> </span><span class="n">GB</span><span class="o">/</span><span class="n">s</span>

<span class="err">시스템별</span><span class="w"> </span><span class="err">메모리</span><span class="w"> </span><span class="err">대역폭</span><span class="o">:</span>
<span class="err">┌─────────────────────────┬────────────────────────┐</span>
<span class="err">│</span><span class="w">        </span><span class="err">시스템</span><span class="w">            </span><span class="err">│</span><span class="w">       </span><span class="err">대역폭</span><span class="w">           </span><span class="err">│</span>
<span class="err">├─────────────────────────┼────────────────────────┤</span>
<span class="err">│</span><span class="w"> </span><span class="err">일반</span><span class="w"> </span><span class="err">데스크톱</span><span class="w"> </span><span class="o">(</span><span class="n">DDR4</span><span class="o">)</span><span class="w">     </span><span class="err">│</span><span class="w">    </span><span class="mi">25</span><span class="o">-</span><span class="mi">50</span><span class="w"> </span><span class="n">GB</span><span class="o">/</span><span class="n">s</span><span class="w">        </span><span class="err">│</span>
<span class="err">├─────────────────────────┼────────────────────────┤</span>
<span class="err">│</span><span class="w"> </span><span class="err">하이엔드</span><span class="w"> </span><span class="err">워크스테이션</span><span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="mi">100</span><span class="o">-</span><span class="mi">200</span><span class="w"> </span><span class="n">GB</span><span class="o">/</span><span class="n">s</span><span class="w">       </span><span class="err">│</span>
<span class="err">├─────────────────────────┼────────────────────────┤</span>
<span class="err">│</span><span class="w"> </span><span class="err">서버</span><span class="w"> </span><span class="o">(</span><span class="mi">8</span><span class="err">채널</span><span class="w"> </span><span class="n">DDR5</span><span class="o">)</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="mi">300</span><span class="o">-</span><span class="mi">400</span><span class="w"> </span><span class="n">GB</span><span class="o">/</span><span class="n">s</span><span class="w">       </span><span class="err">│</span>
<span class="err">├─────────────────────────┼────────────────────────┤</span>
<span class="err">│</span><span class="w"> </span><span class="n">GPU</span><span class="w"> </span><span class="o">(</span><span class="n">HBM2</span><span class="o">)</span><span class="w">              </span><span class="err">│</span><span class="w">   </span><span class="mi">1</span><span class="o">-</span><span class="mi">2</span><span class="w"> </span><span class="n">TB</span><span class="o">/</span><span class="n">s</span><span class="w">           </span><span class="err">│</span>
<span class="err">└─────────────────────────┴────────────────────────┘</span>
</code></pre></div>

<h3 id="52-latency">5.2 지연시간 (Latency)<a class="header-link" href="#52-latency" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">정의</span><span class="o">:</span><span class="w"> </span><span class="err">데이터</span><span class="w"> </span><span class="err">요청부터</span><span class="w"> </span><span class="err">수신까지</span><span class="w"> </span><span class="err">걸리는</span><span class="w"> </span><span class="err">시간</span>

<span class="err">메모리</span><span class="w"> </span><span class="err">계층별</span><span class="w"> </span><span class="err">지연시간</span><span class="o">:</span>

<span class="err">레벨</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="err">지연시간</span><span class="w"> </span><span class="o">(</span><span class="n">cycles</span><span class="o">)</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">지연시간</span><span class="w"> </span><span class="o">(</span><span class="n">ns</span><span class="o">)</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">상대</span><span class="w"> </span><span class="err">비용</span>
<span class="err">────────────┼───────────────────┼───────────────┼───────────</span>
<span class="err">레지스터</span><span class="w">     </span><span class="err">│</span><span class="w">        </span><span class="mi">1</span><span class="w">         </span><span class="err">│</span><span class="w">     </span><span class="o">~</span><span class="mf">0.3</span><span class="w">     </span><span class="err">│</span><span class="w">    </span><span class="mi">1</span><span class="n">x</span>
<span class="n">L1</span><span class="w"> </span><span class="err">캐시</span><span class="w">     </span><span class="err">│</span><span class="w">       </span><span class="mi">4</span><span class="o">-</span><span class="mi">5</span><span class="w">        </span><span class="err">│</span><span class="w">     </span><span class="o">~</span><span class="mf">1.5</span><span class="w">     </span><span class="err">│</span><span class="w">    </span><span class="mi">4</span><span class="n">x</span>
<span class="n">L2</span><span class="w"> </span><span class="err">캐시</span><span class="w">     </span><span class="err">│</span><span class="w">      </span><span class="mi">12</span><span class="o">-</span><span class="mi">14</span><span class="w">       </span><span class="err">│</span><span class="w">     </span><span class="o">~</span><span class="mi">4</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="mi">12</span><span class="n">x</span>
<span class="n">L3</span><span class="w"> </span><span class="err">캐시</span><span class="w">     </span><span class="err">│</span><span class="w">      </span><span class="mi">40</span><span class="o">-</span><span class="mi">50</span><span class="w">       </span><span class="err">│</span><span class="w">    </span><span class="o">~</span><span class="mi">15</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="mi">40</span><span class="n">x</span>
<span class="err">메인</span><span class="w"> </span><span class="err">메모리</span><span class="w">  </span><span class="err">│</span><span class="w">     </span><span class="mi">100</span><span class="o">-</span><span class="mi">300</span><span class="w">      </span><span class="err">│</span><span class="w">   </span><span class="o">~</span><span class="mi">60</span><span class="o">-</span><span class="mi">100</span><span class="w">    </span><span class="err">│</span><span class="w">  </span><span class="mi">200</span><span class="n">x</span>
<span class="n">SSD</span><span class="w">        </span><span class="err">│</span><span class="w">   </span><span class="mi">10</span><span class="o">,</span><span class="mi">000</span><span class="o">-</span><span class="mi">50</span><span class="o">,</span><span class="mi">000</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="mi">25</span><span class="o">-</span><span class="mi">100</span><span class="n">us</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="mi">50</span><span class="o">,</span><span class="mi">000</span><span class="n">x</span>
<span class="n">HDD</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="mi">10</span><span class="o">,</span><span class="mi">000</span><span class="o">,</span><span class="mi">000</span><span class="o">+</span><span class="w">       </span><span class="err">│</span><span class="w">    </span><span class="mi">5</span><span class="o">-</span><span class="mi">10</span><span class="n">ms</span><span class="w">    </span><span class="err">│</span><span class="w"> </span><span class="mi">20</span><span class="o">,</span><span class="mi">000</span><span class="o">,</span><span class="mi">000</span><span class="n">x</span>

<span class="err">시각화</span><span class="o">:</span>
<span class="err">┌───────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w">                                                           </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="n">L1</span><span class="o">:</span><span class="w">    </span><span class="err">●</span><span class="w">                                                 </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="n">L2</span><span class="o">:</span><span class="w">    </span><span class="err">●●●</span><span class="w">                                               </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="n">L3</span><span class="o">:</span><span class="w">    </span><span class="err">●●●●●●●●●●●●●</span><span class="w">                                      </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="n">RAM</span><span class="o">:</span><span class="w">   </span><span class="err">●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                           </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="n">SSD</span><span class="o">:</span><span class="w">   </span><span class="o">[...]</span><span class="w">                    </span><span class="o">(</span><span class="err">너무</span><span class="w"> </span><span class="err">길어</span><span class="w"> </span><span class="err">표시</span><span class="w"> </span><span class="err">불가</span><span class="o">)</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="n">HDD</span><span class="o">:</span><span class="w">   </span><span class="o">[...]</span><span class="w">                    </span><span class="o">(</span><span class="err">더더욱</span><span class="w"> </span><span class="err">표시</span><span class="w"> </span><span class="err">불가</span><span class="o">)</span><span class="w">          </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                           </span><span class="err">│</span>
<span class="err">└───────────────────────────────────────────────────────────┘</span>
</code></pre></div>

<h3 id="53-latency-vs-bandwidth">5.3 Latency vs Bandwidth 관계<a class="header-link" href="#53-latency-vs-bandwidth" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>Little&#39;s Law:
동시 요청 수 = 대역폭 × 지연시간

메모리 시스템에서의 의미:
- 대역폭 활용을 위해 다수의 동시 요청 필요
- 지연시간이 길면 더 많은 동시 요청 필요

예시:
- 대역폭: 50 GB/s
- 지연시간: 100 ns
- 캐시 라인: 64 bytes

필요한 동시 요청 수:
= (50 × 10^9) × (100 × 10^-9) / 64
= 78개 동시 요청

해결책:
- 비순차 실행으로 다수의 로드 동시 발행
- 프리페치로 미리 데이터 요청
- 메모리 레벨 병렬성 (MLP) 활용
</code></pre></div>

<h3 id="54-amat-average-memory-access-time">5.4 AMAT (Average Memory Access Time)<a class="header-link" href="#54-amat-average-memory-access-time" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">공식</span><span class="o">:</span>
<span class="n">AMAT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Hit</span><span class="w"> </span><span class="n">Time</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">(</span><span class="n">Miss</span><span class="w"> </span><span class="n">Rate</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="n">Miss</span><span class="w"> </span><span class="n">Penalty</span><span class="o">)</span>

<span class="err">예시</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">L1</span><span class="w"> </span><span class="err">히트</span><span class="w"> </span><span class="err">시간</span><span class="o">:</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="err">사이클</span>
<span class="o">-</span><span class="w"> </span><span class="n">L1</span><span class="w"> </span><span class="err">미스율</span><span class="o">:</span><span class="w"> </span><span class="mi">5</span><span class="o">%</span>
<span class="o">-</span><span class="w"> </span><span class="n">L2</span><span class="w"> </span><span class="err">히트</span><span class="w"> </span><span class="err">시간</span><span class="o">:</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="err">사이클</span>
<span class="o">-</span><span class="w"> </span><span class="n">L2</span><span class="w"> </span><span class="err">미스율</span><span class="o">:</span><span class="w"> </span><span class="mi">20</span><span class="o">%</span><span class="w"> </span><span class="o">(</span><span class="n">L1</span><span class="w"> </span><span class="err">미스</span><span class="w"> </span><span class="err">중</span><span class="o">)</span>
<span class="o">-</span><span class="w"> </span><span class="err">메모리</span><span class="w"> </span><span class="err">접근</span><span class="w"> </span><span class="err">시간</span><span class="o">:</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="err">사이클</span>

<span class="err">계산</span><span class="o">:</span>
<span class="n">AMAT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">0.05</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="o">(</span><span class="mi">12</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">0.20</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="mi">200</span><span class="o">)</span>
<span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">0.05</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="o">(</span><span class="mi">12</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">40</span><span class="o">)</span>
<span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">0.05</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="mi">52</span>
<span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">2.6</span>
<span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="mf">6.6</span><span class="w"> </span><span class="err">사이클</span>

<span class="err">다중</span><span class="w"> </span><span class="err">레벨</span><span class="w"> </span><span class="err">캐시의</span><span class="w"> </span><span class="n">AMAT</span><span class="o">:</span>
<span class="err">┌──────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="n">AMAT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T_L1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">MR_L1</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="o">(</span><span class="n">T_L2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">MR_L2</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="o">(</span><span class="n">T_L3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">MR_L3</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="n">T_Mem</span><span class="o">))</span><span class="err">│</span>
<span class="err">└──────────────────────────────────────────────────────────┘</span>
</code></pre></div>

<hr />
<h2 id="6">6. 메모리 성능 최적화<a class="header-link" href="#6" title="Permanent link">&para;</a></h2>
<h3 id="61">6.1 데이터 레이아웃 최적화<a class="header-link" href="#61" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nt">Structure</span><span class="w"> </span><span class="nt">of</span><span class="w"> </span><span class="nt">Arrays</span><span class="w"> </span><span class="o">(</span><span class="nt">SoA</span><span class="o">)</span><span class="w"> </span><span class="nt">vs</span><span class="w"> </span><span class="nt">Array</span><span class="w"> </span><span class="nt">of</span><span class="w"> </span><span class="nt">Structures</span><span class="w"> </span><span class="o">(</span><span class="nt">AoS</span><span class="o">):</span>

<span class="nt">AoS</span><span class="w"> </span><span class="o">(</span><span class="nt">Array</span><span class="w"> </span><span class="nt">of</span><span class="w"> </span><span class="nt">Structures</span><span class="o">):</span>
<span class="nt">struct</span><span class="w"> </span><span class="nt">Particle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">float</span><span class="w"> </span><span class="err">x,</span><span class="w"> </span><span class="err">y,</span><span class="w"> </span><span class="err">z</span><span class="p">;</span><span class="w">      </span><span class="err">//</span><span class="w"> </span><span class="err">12</span><span class="w"> </span><span class="err">bytes</span>
<span class="w">    </span><span class="err">float</span><span class="w"> </span><span class="err">vx,</span><span class="w"> </span><span class="err">vy,</span><span class="w"> </span><span class="err">vz</span><span class="p">;</span><span class="w">   </span><span class="err">//</span><span class="w"> </span><span class="err">12</span><span class="w"> </span><span class="err">bytes</span>
<span class="w">    </span><span class="err">float</span><span class="w"> </span><span class="err">mass</span><span class="p">;</span><span class="w">         </span><span class="err">//</span><span class="w"> </span><span class="err">4</span><span class="w"> </span><span class="err">bytes</span>
<span class="w">    </span><span class="err">int</span><span class="w">   </span><span class="err">id</span><span class="p">;</span><span class="w">           </span><span class="err">//</span><span class="w"> </span><span class="err">4</span><span class="w"> </span><span class="err">bytes</span>
<span class="p">}</span><span class="o">;</span><span class="w">                      </span><span class="o">//</span><span class="w"> </span><span class="nt">총</span><span class="w"> </span><span class="nt">32</span><span class="w"> </span><span class="nt">bytes</span>

<span class="nt">Particle</span><span class="w"> </span><span class="nt">particles</span><span class="cp">[</span><span class="mi">1000</span><span class="cp">]</span><span class="o">;</span>

<span class="nt">메모리</span><span class="w"> </span><span class="nt">레이아웃</span><span class="o">:</span>
<span class="cp">[</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">,</span><span class="nx">z</span><span class="p">,</span><span class="nx">vx</span><span class="p">,</span><span class="nx">vy</span><span class="p">,</span><span class="nx">vz</span><span class="p">,</span><span class="nx">mass</span><span class="p">,</span><span class="nx">id</span><span class="cp">][</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">,</span><span class="nx">z</span><span class="p">,</span><span class="nx">vx</span><span class="p">,</span><span class="nx">vy</span><span class="p">,</span><span class="nx">vz</span><span class="p">,</span><span class="nx">mass</span><span class="p">,</span><span class="nx">id</span><span class="cp">][</span><span class="nx">...</span><span class="cp">]</span>

<span class="nt">x</span><span class="w"> </span><span class="nt">좌표만</span><span class="w"> </span><span class="nt">접근할</span><span class="w"> </span><span class="nt">때</span><span class="o">:</span><span class="w"> </span><span class="nt">32바이트마다</span><span class="w"> </span><span class="nt">4바이트만</span><span class="w"> </span><span class="nt">사용</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="nt">낭비</span>


<span class="nt">SoA</span><span class="w"> </span><span class="o">(</span><span class="nt">Structure</span><span class="w"> </span><span class="nt">of</span><span class="w"> </span><span class="nt">Arrays</span><span class="o">):</span>
<span class="nt">struct</span><span class="w"> </span><span class="nt">Particles</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">float</span><span class="w"> </span><span class="err">x</span><span class="cp">[</span><span class="mi">1000</span><span class="cp">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">float</span><span class="w"> </span><span class="err">y</span><span class="cp">[</span><span class="mi">1000</span><span class="cp">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">float</span><span class="w"> </span><span class="err">z</span><span class="cp">[</span><span class="mi">1000</span><span class="cp">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">float</span><span class="w"> </span><span class="err">vx</span><span class="cp">[</span><span class="mi">1000</span><span class="cp">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">float</span><span class="w"> </span><span class="err">vy</span><span class="cp">[</span><span class="mi">1000</span><span class="cp">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">float</span><span class="w"> </span><span class="err">vz</span><span class="cp">[</span><span class="mi">1000</span><span class="cp">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">float</span><span class="w"> </span><span class="err">mass</span><span class="cp">[</span><span class="mi">1000</span><span class="cp">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">int</span><span class="w">   </span><span class="err">id</span><span class="cp">[</span><span class="mi">1000</span><span class="cp">]</span><span class="p">;</span>
<span class="p">}</span><span class="o">;</span>

<span class="nt">메모리</span><span class="w"> </span><span class="nt">레이아웃</span><span class="o">:</span>
<span class="cp">[</span><span class="nx">x0</span><span class="p">,</span><span class="nx">x1</span><span class="p">,</span><span class="nx">x2</span><span class="p">,</span><span class="nx">...</span><span class="cp">][</span><span class="nx">y0</span><span class="p">,</span><span class="nx">y1</span><span class="p">,</span><span class="nx">y2</span><span class="p">,</span><span class="nx">...</span><span class="cp">][</span><span class="nx">z0</span><span class="p">,</span><span class="nx">z1</span><span class="p">,</span><span class="nx">z2</span><span class="p">,</span><span class="nx">...</span><span class="cp">]</span><span class="o">...</span>

<span class="nt">x</span><span class="w"> </span><span class="nt">좌표만</span><span class="w"> </span><span class="nt">접근할</span><span class="w"> </span><span class="nt">때</span><span class="o">:</span><span class="w"> </span><span class="nt">연속된</span><span class="w"> </span><span class="nt">메모리</span><span class="w"> </span><span class="nt">접근</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="nt">효율적</span>

<span class="nt">성능</span><span class="w"> </span><span class="nt">차이</span><span class="o">:</span><span class="w"> </span><span class="nt">SoA가</span><span class="w"> </span><span class="nt">최대</span><span class="w"> </span><span class="nt">4-8배</span><span class="w"> </span><span class="nt">빠를</span><span class="w"> </span><span class="nt">수</span><span class="w"> </span><span class="nt">있음</span><span class="w"> </span><span class="o">(</span><span class="nt">SIMD</span><span class="w"> </span><span class="nt">활용</span><span class="w"> </span><span class="nt">시</span><span class="o">)</span>
</code></pre></div>

<h3 id="62">6.2 루프 최적화<a class="header-link" href="#62" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">루프</span><span class="w"> </span><span class="n">타일링</span><span class="w"> </span><span class="p">(</span><span class="n">Loop</span><span class="w"> </span><span class="n">Tiling</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">Blocking</span><span class="p">)</span><span class="err">:</span>

<span class="o">//</span><span class="w"> </span><span class="n">원본</span><span class="w"> </span><span class="n">코드</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">캐시</span><span class="w"> </span><span class="n">효율</span><span class="w"> </span><span class="n">낮음</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">k</span><span class="o">++</span><span class="p">)</span>
<span class="w">            </span><span class="n">C</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">A</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">k</span><span class="o">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">B</span><span class="o">[</span><span class="n">k</span><span class="o">][</span><span class="n">j</span><span class="o">]</span><span class="p">;</span>

<span class="o">//</span><span class="w"> </span><span class="n">타일링</span><span class="w"> </span><span class="n">적용</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">캐시</span><span class="w"> </span><span class="n">효율</span><span class="w"> </span><span class="n">높음</span>
<span class="n">#define</span><span class="w"> </span><span class="n">BLOCK</span><span class="w"> </span><span class="mi">64</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">ii</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">ii</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">ii</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">BLOCK</span><span class="p">)</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">jj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">jj</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">jj</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">BLOCK</span><span class="p">)</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">kk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">kk</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">kk</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">BLOCK</span><span class="p">)</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ii</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nf">min</span><span class="p">(</span><span class="n">ii</span><span class="o">+</span><span class="n">BLOCK</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="p">);</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jj</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nf">min</span><span class="p">(</span><span class="n">jj</span><span class="o">+</span><span class="n">BLOCK</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="p">);</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
<span class="w">                    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">kk</span><span class="p">;</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nf">min</span><span class="p">(</span><span class="n">kk</span><span class="o">+</span><span class="n">BLOCK</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="p">);</span><span class="w"> </span><span class="n">k</span><span class="o">++</span><span class="p">)</span>
<span class="w">                        </span><span class="n">C</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">A</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">k</span><span class="o">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">B</span><span class="o">[</span><span class="n">k</span><span class="o">][</span><span class="n">j</span><span class="o">]</span><span class="p">;</span>

<span class="nl">효과</span><span class="p">:</span>
<span class="err">┌──────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="nl">원본</span><span class="p">:</span><span class="w"> </span><span class="n">큰</span><span class="w"> </span><span class="n">행렬</span><span class="w"> </span><span class="n">전체를</span><span class="w"> </span><span class="n">반복</span><span class="w"> </span><span class="n">접근</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="n">캐시</span><span class="w"> </span><span class="n">스래싱</span><span class="w">             </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="nl">타일링</span><span class="p">:</span><span class="w"> </span><span class="n">작은</span><span class="w"> </span><span class="n">블록을</span><span class="w"> </span><span class="n">완전히</span><span class="w"> </span><span class="n">처리</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="n">캐시에</span><span class="w"> </span><span class="n">유지</span><span class="w">           </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                          </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="n">N</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span><span class="w"> </span><span class="n">BLOCK</span><span class="o">=</span><span class="mi">64</span><span class="n">일</span><span class="w"> </span><span class="nl">때</span><span class="p">:</span><span class="w">                                  </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nl">원본</span><span class="p">:</span><span class="w"> </span><span class="o">~</span><span class="mi">10</span><span class="n">초</span><span class="w">                                           </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nl">타일링</span><span class="p">:</span><span class="w"> </span><span class="o">~</span><span class="mi">2</span><span class="n">초</span><span class="w"> </span><span class="p">(</span><span class="mi">5</span><span class="n">배</span><span class="w"> </span><span class="n">향상</span><span class="p">)</span><span class="w">                               </span><span class="err">│</span>
<span class="err">└──────────────────────────────────────────────────────────┘</span>
</code></pre></div>

<h3 id="63">6.3 프리페칭<a class="header-link" href="#63" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">하드웨어</span><span class="w"> </span><span class="nl">프리페치</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">CPU가</span><span class="w"> </span><span class="n">접근</span><span class="w"> </span><span class="n">패턴을</span><span class="w"> </span><span class="n">감지하여</span><span class="w"> </span><span class="n">자동으로</span><span class="w"> </span><span class="n">프리페치</span>
<span class="o">-</span><span class="w"> </span><span class="n">순차</span><span class="w"> </span><span class="n">접근</span><span class="p">,</span><span class="w"> </span><span class="n">스트라이드</span><span class="w"> </span><span class="n">접근에</span><span class="w"> </span><span class="n">효과적</span>
<span class="o">-</span><span class="w"> </span><span class="n">불규칙한</span><span class="w"> </span><span class="n">접근에는</span><span class="w"> </span><span class="n">비효과적</span>

<span class="n">소프트웨어</span><span class="w"> </span><span class="nl">프리페치</span><span class="p">:</span>
<span class="o">//</span><span class="w"> </span><span class="n">Intel</span><span class="w"> </span><span class="n">intrinsic</span><span class="w"> </span><span class="n">예시</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">_mm_prefetch</span><span class="p">(</span><span class="o">&amp;</span><span class="k">array</span><span class="o">[</span><span class="n">i + 16</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">_MM_HINT_T0</span><span class="p">);</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">L1으로</span><span class="w"> </span><span class="n">프리페치</span>
<span class="w">    </span><span class="nf">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="k">array</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">;</span>
<span class="err">}</span>

<span class="n">프리페치</span><span class="w"> </span><span class="n">거리</span><span class="w"> </span><span class="nl">계산</span><span class="p">:</span>
<span class="n">거리</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">메모리</span><span class="w"> </span><span class="n">지연시간</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">루프</span><span class="w"> </span><span class="n">반복당</span><span class="w"> </span><span class="n">시간</span>

<span class="nl">예시</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">메모리</span><span class="w"> </span><span class="nl">지연시간</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="n">사이클</span>
<span class="o">-</span><span class="w"> </span><span class="n">루프</span><span class="w"> </span><span class="n">반복당</span><span class="w"> </span><span class="nl">시간</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">사이클</span>
<span class="o">-</span><span class="w"> </span><span class="n">프리페치</span><span class="w"> </span><span class="nl">거리</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="n">요소</span><span class="w"> </span><span class="n">앞서</span><span class="w"> </span><span class="n">프리페치</span>

<span class="nl">주의사항</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">너무</span><span class="w"> </span><span class="n">빠른</span><span class="w"> </span><span class="nl">프리페치</span><span class="p">:</span><span class="w"> </span><span class="n">캐시에서</span><span class="w"> </span><span class="n">밀려남</span>
<span class="o">-</span><span class="w"> </span><span class="n">너무</span><span class="w"> </span><span class="n">느린</span><span class="w"> </span><span class="nl">프리페치</span><span class="p">:</span><span class="w"> </span><span class="n">데이터</span><span class="w"> </span><span class="n">도착</span><span class="w"> </span><span class="n">안</span><span class="w"> </span><span class="n">됨</span>
<span class="o">-</span><span class="w"> </span><span class="n">불필요한</span><span class="w"> </span><span class="nl">프리페치</span><span class="p">:</span><span class="w"> </span><span class="n">캐시</span><span class="w"> </span><span class="n">오염</span>
</code></pre></div>

<h3 id="64">6.4 메모리 정렬<a class="header-link" href="#64" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nt">정렬</span><span class="o">(</span><span class="nt">Alignment</span><span class="o">)</span><span class="w"> </span><span class="nt">중요성</span><span class="o">:</span>

<span class="nt">정렬된</span><span class="w"> </span><span class="nt">접근</span><span class="o">:</span>
<span class="nt">주소</span><span class="o">:</span><span class="w"> </span><span class="nt">0x1000</span><span class="w"> </span><span class="o">(</span><span class="nt">64바이트</span><span class="w"> </span><span class="nt">정렬</span><span class="o">)</span>
<span class="err">┌───────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w">                </span><span class="nt">64바이트</span><span class="w"> </span><span class="nt">캐시</span><span class="w"> </span><span class="nt">라인</span><span class="w">               </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="cp">[</span><span class="nx">데이터</span><span class="w"> </span><span class="mi">64</span><span class="nx">바이트가</span><span class="w"> </span><span class="nx">한</span><span class="w"> </span><span class="nx">라인에</span><span class="w"> </span><span class="nx">모두</span><span class="w"> </span><span class="nx">포함</span><span class="cp">]</span><span class="w">         </span><span class="err">│</span>
<span class="err">└───────────────────────────────────────────────┘</span>
<span class="nt">접근</span><span class="w"> </span><span class="nt">횟수</span><span class="o">:</span><span class="w"> </span><span class="nt">1회</span>

<span class="nt">비정렬</span><span class="w"> </span><span class="nt">접근</span><span class="o">:</span>
<span class="nt">주소</span><span class="o">:</span><span class="w"> </span><span class="nt">0x1020</span><span class="w"> </span><span class="o">(</span><span class="nt">32바이트</span><span class="w"> </span><span class="nt">오프셋</span><span class="o">)</span>
<span class="err">┌─────────────────────┬─────────────────────────┐</span>
<span class="err">│</span><span class="w">     </span><span class="nt">캐시</span><span class="w"> </span><span class="nt">라인</span><span class="w"> </span><span class="nt">1</span><span class="w">      </span><span class="err">│</span><span class="w">      </span><span class="nt">캐시</span><span class="w"> </span><span class="nt">라인</span><span class="w"> </span><span class="nt">2</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="cp">[</span><span class="nx">...32바이트...</span><span class="cp">]</span><span class="w">    </span><span class="err">│</span><span class="w">  </span><span class="cp">[</span><span class="nx">...32바이트...</span><span class="cp">]</span><span class="w">       </span><span class="err">│</span>
<span class="err">└─────────────────────┴─────────────────────────┘</span>
<span class="nt">접근</span><span class="w"> </span><span class="nt">횟수</span><span class="o">:</span><span class="w"> </span><span class="nt">2회</span>

<span class="nt">정렬</span><span class="w"> </span><span class="nt">지시어</span><span class="o">:</span>
<span class="o">//</span><span class="w"> </span><span class="nt">C</span><span class="o">/</span><span class="nt">C</span><span class="o">++</span>
<span class="nt">struct</span><span class="w"> </span><span class="nt">alignas</span><span class="o">(</span><span class="nt">64</span><span class="o">)</span><span class="w"> </span><span class="nt">CacheLine</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">int</span><span class="w"> </span><span class="err">data</span><span class="cp">[</span><span class="mi">16</span><span class="cp">]</span><span class="p">;</span>
<span class="p">}</span><span class="o">;</span>

<span class="o">//</span><span class="w"> </span><span class="nt">동적</span><span class="w"> </span><span class="nt">할당</span>
<span class="nt">void</span><span class="o">*</span><span class="w"> </span><span class="nt">ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">aligned_alloc</span><span class="o">(</span><span class="nt">64</span><span class="o">,</span><span class="w"> </span><span class="nt">size</span><span class="o">);</span>
</code></pre></div>

<hr />
<h2 id="7">7. 연습 문제<a class="header-link" href="#7" title="Permanent link">&para;</a></h2>
<h3 id="_4">기초 문제<a class="header-link" href="#_4" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>메모리 계층 구조가 필요한 이유를 설명하시오.</p>
</li>
<li>
<p>다음 코드에서 시간적 지역성과 공간적 지역성을 찾으시오:
   <code>c
   for (i = 0; i &lt; 100; i++) {
       sum += array[i];
   }</code></p>
</li>
<li>
<p>SRAM과 DRAM의 주요 차이점 3가지는?</p>
</li>
</ol>
<h3 id="_5">중급 문제<a class="header-link" href="#_5" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>L1 캐시 히트 시간이 4사이클, 미스율이 8%, L2 접근 시간이 12사이클일 때 AMAT는?</p>
</li>
<li>
<p>다음 중 공간적 지역성을 해치는 코드는?
   ```c
   // (a)
   for (i = 0; i &lt; N; i++)
       for (j = 0; j &lt; N; j++)
           sum += a[i][j];</p>
</li>
</ol>
<p>// (b)
   for (j = 0; j &lt; N; j++)
       for (i = 0; i &lt; N; i++)
           sum += a[i][j];
   ```</p>
<ol>
<li>DDR4-3200 듀얼 채널의 이론적 최대 대역폭은?</li>
</ol>
<h3 id="_6">심화 문제<a class="header-link" href="#_6" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Working Set 크기가 캐시 크기보다 클 때 발생하는 문제와 해결책을 설명하시오.</p>
</li>
<li>
<p>다음 행렬 곱셈 코드를 루프 타일링을 적용하여 최적화하시오:
   <code>c
   for (i = 0; i &lt; N; i++)
       for (j = 0; j &lt; N; j++)
           for (k = 0; k &lt; N; k++)
               C[i][j] += A[i][k] * B[k][j];</code></p>
</li>
<li>
<p>프리페치 거리를 계산하시오:</p>
</li>
<li>메모리 지연시간: 60ns</li>
<li>CPU 클럭: 3GHz</li>
<li>루프당 명령어: 10개, CPI: 1</li>
</ol>
<details>
<summary>정답</summary>

1. CPU와 메모리 간 속도 격차를 해소하기 위해. 빠르고 비싼 메모리를 CPU 가까이, 느리고 저렴한 메모리를 멀리 배치하여 비용 대비 성능 최적화.

2. - 시간적 지역성: 변수 `sum`, `i` (100번 반복 접근)
   - 공간적 지역성: `array[i]` (연속된 메모리 주소 접근)

3. SRAM vs DRAM:
   - 구조: SRAM 6T, DRAM 1T1C
   - 리프레시: SRAM 불필요, DRAM 필요
   - 속도: SRAM 빠름 (~2ns), DRAM 느림 (~50ns)
   - 비용/밀도: SRAM 비쌈/낮음, DRAM 저렴/높음

4. AMAT = 4 + 0.08 × 12 = 4 + 0.96 = 4.96 사이클

5. (b) 열 우선 순회 - C/C++에서 배열은 행 우선 저장되므로

6. DDR4-3200: 8바이트 × 3200MT/s × 2채널 = 51.2 GB/s

7. 캐시 스래싱 발생 - 필요한 데이터가 반복적으로 교체됨
   해결책: 루프 타일링, 데이터 레이아웃 최적화, 알고리즘 변경

8. 타일링 적용:
   ```c
   #define B 64
   for (ii = 0; ii < N; ii += B)
     for (jj = 0; jj < N; jj += B)
       for (kk = 0; kk < N; kk += B)
         for (i = ii; i < ii+B && i < N; i++)
           for (j = jj; j < jj+B && j < N; j++)
             for (k = kk; k < kk+B && k < N; k++)
               C[i][j] += A[i][k] * B[k][j];
   ```

9. 프리페치 거리:
   - 메모리 지연: 60ns × 3GHz = 180 사이클
   - 루프 시간: 10 명령어 × 1 CPI = 10 사이클
   - 거리: 180 / 10 = 18 요소 앞서 프리페치

</details>

<hr />
<h2 id="_7">다음 단계<a class="header-link" href="#_7" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="./15_Cache_Memory.md">15_Cache_Memory.md</a> - 캐시 사상 방식, 교체 정책, 쓰기 정책</li>
</ul>
<hr />
<h2 id="_8">참고 자료<a class="header-link" href="#_8" title="Permanent link">&para;</a></h2>
<ul>
<li>Computer Architecture: A Quantitative Approach (Hennessy &amp; Patterson)</li>
<li>What Every Programmer Should Know About Memory (Ulrich Drepper)</li>
<li><a href="https://software.intel.com/content/www/us/en/develop/articles/intelr-memory-latency-checker.html">Intel Memory Latency Checker</a></li>
<li><a href="https://www.youtube.com/watch?v=p3q5zWCw8J4">Memory hierarchy visualization</a></li>
</ul>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/ko/Computer_Architecture/13_Superscalar_Out_of_Order.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">슈퍼스칼라와 비순차 실행</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">🔗</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/ko/Computer_Architecture/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">📋</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/ko/Computer_Architecture/15_Cache_Memory.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">캐시 메모리</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">↑</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'ko';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}