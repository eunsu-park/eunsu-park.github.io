{% raw %}
<!DOCTYPE html>
<html lang="ko" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í—ˆí”„ ë³€í™˜ (Hough Transform) - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/ko/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/ko/" class="nav-item ">
                    <span class="nav-icon">ğŸ </span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">ğŸ’»</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/ko/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" >
                        English
                    </option>
                    
                    <option value="ko" selected>
                        í•œêµ­ì–´
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">â˜€ï¸</span>
                    <span class="theme-icon dark">ğŸŒ™</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/ko/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/ko/Computer_Vision/">Computer Vision</a>
    <span class="separator">/</span>
    <span class="current">í—ˆí”„ ë³€í™˜ (Hough Transform)</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>í—ˆí”„ ë³€í™˜ (Hough Transform)</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/ko/Computer_Vision/10_Shape_Analysis.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">ë„í˜• ë¶„ì„ (Shape Analysis)</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/ko/Computer_Vision/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/ko/Computer_Vision/12_Histogram_Analysis.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">íˆìŠ¤í† ê·¸ë¨ ë¶„ì„ (Histogram Analysis)</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#_1">ê°œìš”</a></li>
<li><a href="#_2">ëª©ì°¨</a></li>
<li><a href="#1">1. í—ˆí”„ ë³€í™˜ ê°œë…</a><ul>
<li><a href="#hough-space">í—ˆí”„ ê³µê°„ (Hough Space)</a></li>
<li><a href="#_3">í—ˆí”„ ë³€í™˜ ê³¼ì •</a></li>
<li><a href="#_4">ê°„ë‹¨í•œ ì˜ˆì œ</a></li>
</ul>
</li>
<li><a href="#2">2. í—ˆí”„ ì§ì„  ë³€í™˜</a><ul>
<li><a href="#cv2houghlines">cv2.HoughLines() í•¨ìˆ˜</a></li>
<li><a href="#_5">ê¸°ë³¸ ì‚¬ìš©ë²•</a></li>
<li><a href="#_6">ìˆ˜í‰ì„ /ìˆ˜ì§ì„ ë§Œ ê²€ì¶œ</a></li>
</ul>
</li>
<li><a href="#3">3. í™•ë¥ ì  í—ˆí”„ ì§ì„  ë³€í™˜</a><ul>
<li><a href="#cv2houghlinesp">cv2.HoughLinesP() í•¨ìˆ˜</a></li>
<li><a href="#_7">ê¸°ë³¸ ì‚¬ìš©ë²•</a></li>
<li><a href="#_8">ì„ ë¶„ í•„í„°ë§</a></li>
<li><a href="#_9">ì„ ë¶„ ë³‘í•©</a></li>
</ul>
</li>
<li><a href="#4">4. í—ˆí”„ ì› ë³€í™˜</a><ul>
<li><a href="#cv2houghcircles">cv2.HoughCircles() í•¨ìˆ˜</a></li>
<li><a href="#_10">ê¸°ë³¸ ì‚¬ìš©ë²•</a></li>
<li><a href="#_11">ë™ì „ ê²€ì¶œ</a></li>
<li><a href="#hough_gradient_alt-opencv-43">HOUGH_GRADIENT_ALT (OpenCV 4.3+)</a></li>
</ul>
</li>
<li><a href="#5">5. íŒŒë¼ë¯¸í„° íŠœë‹ ì „ëµ</a><ul>
<li><a href="#_12">ì§ì„  ê²€ì¶œ íŒŒë¼ë¯¸í„°</a></li>
<li><a href="#_13">ì› ê²€ì¶œ íŒŒë¼ë¯¸í„°</a></li>
<li><a href="#_14">íŠ¸ë™ë°”ë¡œ íŒŒë¼ë¯¸í„° íŠœë‹</a></li>
</ul>
</li>
<li><a href="#6">6. ì°¨ì„  ê²€ì¶œ ê¸°ì´ˆ</a><ul>
<li><a href="#_15">ì°¨ì„  ê²€ì¶œ íŒŒì´í”„ë¼ì¸</a></li>
<li><a href="#_16">ê¸°ë³¸ ì°¨ì„  ê²€ì¶œ</a></li>
<li><a href="#_17">ì¢Œ/ìš° ì°¨ì„  ë¶„ë¦¬</a></li>
<li><a href="#_18">ì°¨ì„  í‰ê· í™”</a></li>
</ul>
</li>
<li><a href="#7">7. ì—°ìŠµ ë¬¸ì œ</a><ul>
<li><a href="#1_1">ë¬¸ì œ 1: ì²´ìŠ¤íŒ ê²€ì¶œ</a></li>
<li><a href="#2_1">ë¬¸ì œ 2: ì•„ì´ë¦¬ìŠ¤ ê²€ì¶œ</a></li>
<li><a href="#3_1">ë¬¸ì œ 3: ì›í˜• ë„ë¡œ í‘œì§€íŒ ê²€ì¶œ</a></li>
<li><a href="#_19">ì¶”ì²œ ë¬¸ì œ</a></li>
</ul>
</li>
<li><a href="#_20">ë‹¤ìŒ ë‹¨ê³„</a></li>
<li><a href="#_21">ì°¸ê³  ìë£Œ</a></li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="hough-transform">í—ˆí”„ ë³€í™˜ (Hough Transform)<a class="header-link" href="#hough-transform" title="Permanent link">&para;</a></h1>
<h2 id="_1">ê°œìš”<a class="header-link" href="#_1" title="Permanent link">&para;</a></h2>
<p>í—ˆí”„ ë³€í™˜ì€ ì´ë¯¸ì§€ì—ì„œ ì§ì„ , ì› ë“±ì˜ ê¸°í•˜í•™ì  í˜•íƒœë¥¼ ê²€ì¶œí•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì…ë‹ˆë‹¤. ì—£ì§€ ê²€ì¶œ ê²°ê³¼ì—ì„œ íŠ¹ì • ëª¨ì–‘ì„ ì°¾ëŠ” ë° ì‚¬ìš©ë˜ë©°, ì°¨ì„  ê²€ì¶œ, ë™ì „ ê²€ì¶œ ë“± ë‹¤ì–‘í•œ ì‘ìš© ë¶„ì•¼ê°€ ìˆìŠµë‹ˆë‹¤.</p>
<hr />
<h2 id="_2">ëª©ì°¨<a class="header-link" href="#_2" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#1-í—ˆí”„-ë³€í™˜-ê°œë…">í—ˆí”„ ë³€í™˜ ê°œë…</a></li>
<li><a href="#2-í—ˆí”„-ì§ì„ -ë³€í™˜">í—ˆí”„ ì§ì„  ë³€í™˜</a></li>
<li><a href="#3-í™•ë¥ ì -í—ˆí”„-ì§ì„ -ë³€í™˜">í™•ë¥ ì  í—ˆí”„ ì§ì„  ë³€í™˜</a></li>
<li><a href="#4-í—ˆí”„-ì›-ë³€í™˜">í—ˆí”„ ì› ë³€í™˜</a></li>
<li><a href="#5-íŒŒë¼ë¯¸í„°-íŠœë‹-ì „ëµ">íŒŒë¼ë¯¸í„° íŠœë‹ ì „ëµ</a></li>
<li><a href="#6-ì°¨ì„ -ê²€ì¶œ-ê¸°ì´ˆ">ì°¨ì„  ê²€ì¶œ ê¸°ì´ˆ</a></li>
<li><a href="#7-ì—°ìŠµ-ë¬¸ì œ">ì—°ìŠµ ë¬¸ì œ</a></li>
</ol>
<hr />
<h2 id="1">1. í—ˆí”„ ë³€í™˜ ê°œë…<a class="header-link" href="#1" title="Permanent link">&para;</a></h2>
<h3 id="hough-space">í—ˆí”„ ê³µê°„ (Hough Space)<a class="header-link" href="#hough-space" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>ê¸°ë³¸ ì•„ì´ë””ì–´:
ì´ë¯¸ì§€ ê³µê°„ì˜ ì  â†’ í—ˆí”„ ê³µê°„ì˜ ê³¡ì„ 
ì´ë¯¸ì§€ ê³µê°„ì˜ ì§ì„  â†’ í—ˆí”„ ê³µê°„ì˜ ì 

ì´ë¯¸ì§€ ê³µê°„ (x, y)              í—ˆí”„ ê³µê°„ (Ï, Î¸)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 â”‚            â”‚                 â”‚
â”‚    â€¢            â”‚            â”‚      â•±â•²         â”‚
â”‚      â•²          â”‚    â”€â”€â–¶     â”‚     â•±  â•²        â”‚
â”‚        â•²        â”‚            â”‚    â•± â€¢  â•²       â”‚
â”‚          â€¢      â”‚            â”‚   â•±      â•²      â”‚
â”‚                 â”‚            â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ì§ì„  ìœ„ì˜ ì ë“¤                   ì  í•˜ë‚˜ë¡œ í‘œí˜„

ì§ì„ ì˜ í‘œí˜„:
y = mx + b  (ê¸°ìš¸ê¸°, yì ˆí¸) â†’ ìˆ˜ì§ì„  í‘œí˜„ ë¶ˆê°€
Ï = xÂ·cos(Î¸) + yÂ·sin(Î¸)    â†’ ê·¹ì¢Œí‘œ í‘œí˜„ (ì„ í˜¸)

Ï: ì›ì ì—ì„œ ì§ì„ ê¹Œì§€ì˜ ìˆ˜ì§ ê±°ë¦¬
Î¸: ìˆ˜ì§ì„ ê³¼ xì¶•ì´ ì´ë£¨ëŠ” ê°ë„
</code></pre></div>

<h3 id="_3">í—ˆí”„ ë³€í™˜ ê³¼ì •<a class="header-link" href="#_3" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="n">ì—£ì§€</span><span class="w"> </span><span class="n">ê²€ì¶œ</span><span class="w"> </span><span class="p">(</span><span class="n">Canny</span><span class="w"> </span><span class="n">ë“±</span><span class="p">)</span>
<span class="w">         </span><span class="err">â”‚</span>
<span class="w">         </span><span class="err">â–¼</span>
<span class="mf">2.</span><span class="w"> </span><span class="n">ê°</span><span class="w"> </span><span class="n">ì—£ì§€</span><span class="w"> </span><span class="n">ì ì—</span><span class="w"> </span><span class="n">ëŒ€í•´</span><span class="w"> </span><span class="n">ê°€ëŠ¥í•œ</span><span class="w"> </span><span class="n">ëª¨ë“ </span><span class="w"> </span><span class="n">ì§ì„ </span><span class="w"> </span><span class="n">ê³„ì‚°</span>
<span class="w">   </span><span class="p">(</span><span class="n">Î¸ë¥¼</span><span class="w"> </span><span class="mf">0</span><span class="err">Â°~</span><span class="mf">180</span><span class="err">Â°</span><span class="w"> </span><span class="n">ë³€í™”ì‹œí‚¤ë©°</span><span class="w"> </span><span class="n">Ï</span><span class="w"> </span><span class="n">ê³„ì‚°</span><span class="p">)</span>
<span class="w">         </span><span class="err">â”‚</span>
<span class="w">         </span><span class="err">â–¼</span>
<span class="mf">3.</span><span class="w"> </span><span class="n">ëˆ„ì </span><span class="w"> </span><span class="n">ë°°ì—´</span><span class="p">(</span><span class="n">Accumulator</span><span class="p">)</span><span class="n">ì—</span><span class="w"> </span><span class="n">íˆ¬í‘œ</span>
<span class="w">         </span><span class="err">â”‚</span>
<span class="w">         </span><span class="err">â–¼</span>
<span class="mf">4.</span><span class="w"> </span><span class="n">ì„ê³„ê°’</span><span class="w"> </span><span class="n">ì´ìƒì˜</span><span class="w"> </span><span class="n">íˆ¬í‘œë¥¼</span><span class="w"> </span><span class="n">ë°›ì€</span><span class="w"> </span><span class="n">ì </span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ì§ì„ </span>

<span class="n">ëˆ„ì </span><span class="w"> </span><span class="n">ë°°ì—´</span><span class="w"> </span><span class="n">ì‹œê°í™”</span><span class="p">:</span>
<span class="w">        </span><span class="n">Î¸</span>
<span class="w">      </span><span class="mf">0</span><span class="err">Â°</span><span class="w"> </span><span class="err">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶</span><span class="w"> </span><span class="mf">180</span><span class="err">Â°</span>
<span class="w">    </span><span class="n">Ï</span><span class="w"> </span><span class="err">â”‚</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span>
<span class="w">  </span><span class="o">-</span><span class="n">max</span><span class="err">â”‚</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">â˜…</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">   </span><span class="err">â˜…</span><span class="p">:</span><span class="w"> </span><span class="n">ë§ì€</span><span class="w"> </span><span class="n">íˆ¬í‘œ</span>
<span class="w">      </span><span class="err">â”‚</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">â˜…</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="n">ì§ì„ </span><span class="w"> </span><span class="n">ì¡´ì¬</span>
<span class="w">      </span><span class="err">â”‚</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span>
<span class="w">   </span><span class="n">max</span><span class="err">â”‚</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span><span class="w">  </span><span class="err">Â·</span>
<span class="w">      </span><span class="err">â–¼</span>
</code></pre></div>

<h3 id="_4">ê°„ë‹¨í•œ ì˜ˆì œ<a class="header-link" href="#_4" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="c1"># í—ˆí”„ ë³€í™˜ ì‹œê°í™”</span>
<span class="k">def</span><span class="w"> </span><span class="nf">visualize_hough_space</span><span class="p">(</span><span class="n">image_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;í—ˆí”„ ê³µê°„ ì‹œê°í™”&quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_path</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">IMREAD_GRAYSCALE</span><span class="p">)</span>
    <span class="n">edges</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">Canny</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">150</span><span class="p">)</span>

    <span class="c1"># í—ˆí”„ ì§ì„  ë³€í™˜ (ëˆ„ì  ë°°ì—´ ë°˜í™˜)</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">HoughLines</span><span class="p">(</span><span class="n">edges</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

    <span class="c1"># ì‹œê°í™”</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_GRAY2BGR</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">lines</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
            <span class="n">rho</span><span class="p">,</span> <span class="n">theta</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
            <span class="n">x0</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">rho</span>
            <span class="n">y0</span> <span class="o">=</span> <span class="n">b</span> <span class="o">*</span> <span class="n">rho</span>

            <span class="c1"># ì§ì„  ê·¸ë¦¬ê¸° (ì–‘ ë°©í–¥ìœ¼ë¡œ ê¸¸ê²Œ)</span>
            <span class="n">x1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">x0</span> <span class="o">+</span> <span class="mi">1000</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="n">b</span><span class="p">))</span>
            <span class="n">y1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">y0</span> <span class="o">+</span> <span class="mi">1000</span> <span class="o">*</span> <span class="p">(</span><span class="n">a</span><span class="p">))</span>
            <span class="n">x2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">x0</span> <span class="o">-</span> <span class="mi">1000</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="n">b</span><span class="p">))</span>
            <span class="n">y2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">y0</span> <span class="o">-</span> <span class="mi">1000</span> <span class="o">*</span> <span class="p">(</span><span class="n">a</span><span class="p">))</span>

            <span class="n">cv2</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">),</span> <span class="p">(</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>

    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Edges&#39;</span><span class="p">,</span> <span class="n">edges</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Hough Lines&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">visualize_hough_space</span><span class="p">(</span><span class="s1">&#39;lines.jpg&#39;</span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="2">2. í—ˆí”„ ì§ì„  ë³€í™˜<a class="header-link" href="#2" title="Permanent link">&para;</a></h2>
<h3 id="cv2houghlines">cv2.HoughLines() í•¨ìˆ˜<a class="header-link" href="#cv2houghlines" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">lines</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">HoughLines</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">rho</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">threshold</span><span class="p">)</span>
</code></pre></div>

<table>
<thead>
<tr>
<th>íŒŒë¼ë¯¸í„°</th>
<th>ì„¤ëª…</th>
</tr>
</thead>
<tbody>
<tr>
<td>image</td>
<td>ì…ë ¥ ì´ë¯¸ì§€ (8ë¹„íŠ¸, ë‹¨ì¼ ì±„ë„, ì´ì§„í™”ëœ ì—£ì§€ ì´ë¯¸ì§€)</td>
</tr>
<tr>
<td>rho</td>
<td>Ï í•´ìƒë„ (í”½ì…€ ë‹¨ìœ„, ë³´í†µ 1)</td>
</tr>
<tr>
<td>theta</td>
<td>Î¸ í•´ìƒë„ (ë¼ë””ì•ˆ ë‹¨ìœ„, ë³´í†µ np.pi/180)</td>
</tr>
<tr>
<td>threshold</td>
<td>ì§ì„ ìœ¼ë¡œ ì¸ì •í•  ìµœì†Œ íˆ¬í‘œ ìˆ˜</td>
</tr>
<tr>
<td>lines</td>
<td>ê²€ì¶œëœ ì§ì„  [(Ï, Î¸), ...]</td>
</tr>
</tbody>
</table>
<h3 id="_5">ê¸°ë³¸ ì‚¬ìš©ë²•<a class="header-link" href="#_5" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">hough_lines_example</span><span class="p">(</span><span class="n">image_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;í‘œì¤€ í—ˆí”„ ì§ì„  ê²€ì¶œ&quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>

    <span class="c1"># ì—£ì§€ ê²€ì¶œ</span>
    <span class="n">edges</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">Canny</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="n">apertureSize</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

    <span class="c1"># í—ˆí”„ ì§ì„  ë³€í™˜</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">HoughLines</span><span class="p">(</span>
        <span class="n">edges</span><span class="p">,</span>
        <span class="n">rho</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>              <span class="c1"># Ï í•´ìƒë„: 1 í”½ì…€</span>
        <span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">,</span>    <span class="c1"># Î¸ í•´ìƒë„: 1ë„</span>
        <span class="n">threshold</span><span class="o">=</span><span class="mi">100</span>       <span class="c1"># ìµœì†Œ íˆ¬í‘œ ìˆ˜</span>
    <span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">lines</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ê²€ì¶œëœ ì§ì„  ìˆ˜: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
            <span class="n">rho</span><span class="p">,</span> <span class="n">theta</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

            <span class="c1"># ê·¹ì¢Œí‘œ â†’ ì§êµì¢Œí‘œ ë³€í™˜</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
            <span class="n">x0</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">rho</span>
            <span class="n">y0</span> <span class="o">=</span> <span class="n">b</span> <span class="o">*</span> <span class="n">rho</span>

            <span class="c1"># ì§ì„  ê·¸ë¦¬ê¸° (ë¬´í•œ ì§ì„ )</span>
            <span class="n">x1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">x0</span> <span class="o">+</span> <span class="mi">1000</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="n">b</span><span class="p">))</span>
            <span class="n">y1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">y0</span> <span class="o">+</span> <span class="mi">1000</span> <span class="o">*</span> <span class="p">(</span><span class="n">a</span><span class="p">))</span>
            <span class="n">x2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">x0</span> <span class="o">-</span> <span class="mi">1000</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="n">b</span><span class="p">))</span>
            <span class="n">y2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">y0</span> <span class="o">-</span> <span class="mi">1000</span> <span class="o">*</span> <span class="p">(</span><span class="n">a</span><span class="p">))</span>

            <span class="n">cv2</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">),</span> <span class="p">(</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>

    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Original&#39;</span><span class="p">,</span> <span class="n">img</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Edges&#39;</span><span class="p">,</span> <span class="n">edges</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Hough Lines&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">hough_lines_example</span><span class="p">(</span><span class="s1">&#39;building.jpg&#39;</span><span class="p">)</span>
</code></pre></div>

<h3 id="_6">ìˆ˜í‰ì„ /ìˆ˜ì§ì„ ë§Œ ê²€ì¶œ<a class="header-link" href="#_6" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">detect_horizontal_vertical_lines</span><span class="p">(</span><span class="n">image_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ìˆ˜í‰ì„ ê³¼ ìˆ˜ì§ì„ ë§Œ ê²€ì¶œ&quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>
    <span class="n">edges</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">Canny</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">150</span><span class="p">)</span>

    <span class="n">lines</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">HoughLines</span><span class="p">(</span><span class="n">edges</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">horizontal</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">vertical</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="n">lines</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
            <span class="n">rho</span><span class="p">,</span> <span class="n">theta</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

            <span class="c1"># ê°ë„ë¡œ ë¶„ë¥˜ (í—ˆìš© ì˜¤ì°¨ 5ë„)</span>
            <span class="n">angle_deg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>

            <span class="k">if</span> <span class="mi">85</span> <span class="o">&lt;</span> <span class="n">angle_deg</span> <span class="o">&lt;</span> <span class="mi">95</span><span class="p">:</span>  <span class="c1"># ìˆ˜ì§ì„  (Î¸ â‰ˆ 90Â°)</span>
                <span class="n">vertical</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">rho</span><span class="p">,</span> <span class="n">theta</span><span class="p">))</span>
                <span class="n">color</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># íŒŒë‘</span>
            <span class="k">elif</span> <span class="n">angle_deg</span> <span class="o">&lt;</span> <span class="mi">5</span> <span class="ow">or</span> <span class="n">angle_deg</span> <span class="o">&gt;</span> <span class="mi">175</span><span class="p">:</span>  <span class="c1"># ìˆ˜í‰ì„  (Î¸ â‰ˆ 0Â° ë˜ëŠ” 180Â°)</span>
                <span class="n">horizontal</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">rho</span><span class="p">,</span> <span class="n">theta</span><span class="p">))</span>
                <span class="n">color</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># ë…¹ìƒ‰</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="c1"># ì§ì„  ê·¸ë¦¬ê¸°</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
            <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">rho</span><span class="p">,</span> <span class="n">b</span> <span class="o">*</span> <span class="n">rho</span>
            <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">x0</span> <span class="o">+</span> <span class="mi">1000</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="n">b</span><span class="p">)),</span> <span class="nb">int</span><span class="p">(</span><span class="n">y0</span> <span class="o">+</span> <span class="mi">1000</span> <span class="o">*</span> <span class="p">(</span><span class="n">a</span><span class="p">))</span>
            <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">x0</span> <span class="o">-</span> <span class="mi">1000</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="n">b</span><span class="p">)),</span> <span class="nb">int</span><span class="p">(</span><span class="n">y0</span> <span class="o">-</span> <span class="mi">1000</span> <span class="o">*</span> <span class="p">(</span><span class="n">a</span><span class="p">))</span>
            <span class="n">cv2</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">),</span> <span class="p">(</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">),</span> <span class="n">color</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ìˆ˜í‰ì„ : </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">horizontal</span><span class="p">)</span><span class="si">}</span><span class="s2">ê°œ&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ìˆ˜ì§ì„ : </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">vertical</span><span class="p">)</span><span class="si">}</span><span class="s2">ê°œ&quot;</span><span class="p">)</span>

    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;H/V Lines&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">detect_horizontal_vertical_lines</span><span class="p">(</span><span class="s1">&#39;grid.jpg&#39;</span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="3">3. í™•ë¥ ì  í—ˆí”„ ì§ì„  ë³€í™˜<a class="header-link" href="#3" title="Permanent link">&para;</a></h2>
<h3 id="cv2houghlinesp">cv2.HoughLinesP() í•¨ìˆ˜<a class="header-link" href="#cv2houghlinesp" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>í‘œì¤€ í—ˆí”„ vs í™•ë¥ ì  í—ˆí”„:

í‘œì¤€ í—ˆí”„ (HoughLines):
- ë¬´í•œ ì§ì„  ë°˜í™˜ (Ï, Î¸)
- ëª¨ë“  ì  ê²€ì‚¬
- ëŠë¦¼, ì •í™•

í™•ë¥ ì  í—ˆí”„ (HoughLinesP):
- ì„ ë¶„ ë°˜í™˜ (x1, y1, x2, y2)
- ë¬´ì‘ìœ„ ì  ìƒ˜í”Œë§
- ë¹ ë¦„, ì‹¤ìš©ì 
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="n">lines</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">HoughLinesP</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">rho</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">minLineLength</span><span class="p">,</span> <span class="n">maxLineGap</span><span class="p">)</span>
</code></pre></div>

<table>
<thead>
<tr>
<th>íŒŒë¼ë¯¸í„°</th>
<th>ì„¤ëª…</th>
</tr>
</thead>
<tbody>
<tr>
<td>image</td>
<td>ì…ë ¥ ì—£ì§€ ì´ë¯¸ì§€</td>
</tr>
<tr>
<td>rho</td>
<td>Ï í•´ìƒë„</td>
</tr>
<tr>
<td>theta</td>
<td>Î¸ í•´ìƒë„</td>
</tr>
<tr>
<td>threshold</td>
<td>ìµœì†Œ íˆ¬í‘œ ìˆ˜</td>
</tr>
<tr>
<td>minLineLength</td>
<td>ìµœì†Œ ì„ ë¶„ ê¸¸ì´</td>
</tr>
<tr>
<td>maxLineGap</td>
<td>ì„ ë¶„ ì‚¬ì´ ìµœëŒ€ í—ˆìš© ê°„ê²©</td>
</tr>
<tr>
<td>lines</td>
<td>ê²€ì¶œëœ ì„ ë¶„ [(x1, y1, x2, y2), ...]</td>
</tr>
</tbody>
</table>
<h3 id="_7">ê¸°ë³¸ ì‚¬ìš©ë²•<a class="header-link" href="#_7" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">hough_lines_p_example</span><span class="p">(</span><span class="n">image_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;í™•ë¥ ì  í—ˆí”„ ì§ì„  ê²€ì¶œ&quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>
    <span class="n">edges</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">Canny</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">150</span><span class="p">)</span>

    <span class="c1"># í™•ë¥ ì  í—ˆí”„ ë³€í™˜</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">HoughLinesP</span><span class="p">(</span>
        <span class="n">edges</span><span class="p">,</span>
        <span class="n">rho</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">,</span>
        <span class="n">threshold</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
        <span class="n">minLineLength</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>    <span class="c1"># ìµœì†Œ 50í”½ì…€ ì´ìƒ</span>
        <span class="n">maxLineGap</span><span class="o">=</span><span class="mi">10</span>        <span class="c1"># 10í”½ì…€ ì´ë‚´ ê°„ê²©ì€ ì—°ê²°</span>
    <span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">lines</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ê²€ì¶œëœ ì„ ë¶„ ìˆ˜: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
            <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">cv2</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">),</span> <span class="p">(</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>

            <span class="c1"># ì„ ë¶„ ëì  í‘œì‹œ</span>
            <span class="n">cv2</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">),</span> <span class="mi">5</span><span class="p">,</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">cv2</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">),</span> <span class="mi">5</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;HoughLinesP&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">hough_lines_p_example</span><span class="p">(</span><span class="s1">&#39;document.jpg&#39;</span><span class="p">)</span>
</code></pre></div>

<h3 id="_8">ì„ ë¶„ í•„í„°ë§<a class="header-link" href="#_8" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">filter_lines</span><span class="p">(</span><span class="n">image_path</span><span class="p">,</span> <span class="n">angle_threshold</span><span class="o">=</span><span class="mi">30</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ê°ë„ì™€ ê¸¸ì´ë¡œ ì„ ë¶„ í•„í„°ë§&quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>
    <span class="n">edges</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">Canny</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">150</span><span class="p">)</span>

    <span class="n">lines</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">HoughLinesP</span><span class="p">(</span><span class="n">edges</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="n">minLineLength</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">maxLineGap</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">lines</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
        <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c1"># ì„ ë¶„ ê¸¸ì´ ê³„ì‚°</span>
        <span class="n">length</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

        <span class="c1"># ê°ë„ ê³„ì‚° (ìˆ˜í‰ ê¸°ì¤€)</span>
        <span class="k">if</span> <span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">angle</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arctan</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">)</span> <span class="o">/</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">angle</span> <span class="o">=</span> <span class="mi">90</span>

        <span class="c1"># í•„í„°ë§: íŠ¹ì • ê°ë„ ì´í•˜ë§Œ</span>
        <span class="k">if</span> <span class="n">angle</span> <span class="o">&lt;</span> <span class="n">angle_threshold</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># ê±°ì˜ ìˆ˜í‰</span>
        <span class="k">elif</span> <span class="n">angle</span> <span class="o">&gt;</span> <span class="mi">90</span> <span class="o">-</span> <span class="n">angle_threshold</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># ê±°ì˜ ìˆ˜ì§</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">continue</span>  <span class="c1"># ëŒ€ê°ì„ ì€ ë¬´ì‹œ</span>

        <span class="n">cv2</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">),</span> <span class="p">(</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">),</span> <span class="n">color</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Filtered Lines&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">result</span>

<span class="n">filter_lines</span><span class="p">(</span><span class="s1">&#39;building.jpg&#39;</span><span class="p">,</span> <span class="n">angle_threshold</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</code></pre></div>

<h3 id="_9">ì„ ë¶„ ë³‘í•©<a class="header-link" href="#_9" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">defaultdict</span>

<span class="k">def</span><span class="w"> </span><span class="nf">merge_lines</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">angle_threshold</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">distance_threshold</span><span class="o">=</span><span class="mi">20</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ìœ ì‚¬í•œ ì„ ë¶„ë“¤ ë³‘í•©&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">lines</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="c1"># ì„ ë¶„ì„ ê°ë„ë³„ë¡œ ê·¸ë£¹í™”</span>
    <span class="n">groups</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
        <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c1"># ê°ë„ ê³„ì‚°</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arctan2</span><span class="p">(</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">))</span> <span class="o">%</span> <span class="mi">180</span>

        <span class="c1"># ê°ë„ ê·¸ë£¹ (angle_threshold ë‹¨ìœ„ë¡œ ì–‘ìí™”)</span>
        <span class="n">angle_group</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">angle</span> <span class="o">/</span> <span class="n">angle_threshold</span><span class="p">)</span> <span class="o">*</span> <span class="n">angle_threshold</span>
        <span class="n">groups</span><span class="p">[</span><span class="n">angle_group</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="n">merged</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">angle</span><span class="p">,</span> <span class="n">group_lines</span> <span class="ow">in</span> <span class="n">groups</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">group_lines</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">merged</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">group_lines</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">continue</span>

        <span class="c1"># ê°™ì€ ê·¸ë£¹ ë‚´ì—ì„œ ê°€ê¹Œìš´ ì„ ë¶„ë“¤ ë³‘í•©</span>
        <span class="c1"># ê°„ë‹¨íˆ: ì „ì²´ ì ë“¤ì˜ ìµœì†Œ/ìµœëŒ€ ì¢Œí‘œë¡œ í•˜ë‚˜ì˜ ì„ ë¶„ ìƒì„±</span>
        <span class="n">all_points</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="ow">in</span> <span class="n">group_lines</span><span class="p">:</span>
            <span class="n">all_points</span><span class="o">.</span><span class="n">extend</span><span class="p">([(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">),</span> <span class="p">(</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">)])</span>

        <span class="n">all_points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">all_points</span><span class="p">)</span>

        <span class="c1"># ì£¼ ë°©í–¥ìœ¼ë¡œ ì •ë ¬í•˜ì—¬ ì–‘ ëì  ì„ íƒ</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">angle</span><span class="p">)))</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>
            <span class="c1"># ìˆ˜í‰ì— ê°€ê¹Œì›€: xë¡œ ì •ë ¬</span>
            <span class="n">sorted_pts</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">all_points</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># ìˆ˜ì§ì— ê°€ê¹Œì›€: yë¡œ ì •ë ¬</span>
            <span class="n">sorted_pts</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">all_points</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

        <span class="n">start</span> <span class="o">=</span> <span class="n">sorted_pts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">end</span> <span class="o">=</span> <span class="n">sorted_pts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">merged</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">start</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">end</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">end</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>

    <span class="k">return</span> <span class="n">merged</span>
</code></pre></div>

<hr />
<h2 id="4">4. í—ˆí”„ ì› ë³€í™˜<a class="header-link" href="#4" title="Permanent link">&para;</a></h2>
<h3 id="cv2houghcircles">cv2.HoughCircles() í•¨ìˆ˜<a class="header-link" href="#cv2houghcircles" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>í—ˆí”„ ì› ë³€í™˜:
ì´ë¯¸ì§€ì—ì„œ ì› ê²€ì¶œ

ì›ì˜ ë°©ì •ì‹: (x - a)Â² + (y - b)Â² = rÂ²
íŒŒë¼ë¯¸í„°: ì¤‘ì‹¬ (a, b), ë°˜ì§€ë¦„ r

3ì°¨ì› ëˆ„ì  ë°°ì—´ í•„ìš” â†’ ë¹„íš¨ìœ¨ì 
â†’ ê·¸ë˜ë””ì–¸íŠ¸ ê¸°ë°˜ ë°©ë²• ì‚¬ìš© (cv2.HOUGH_GRADIENT)

cv2.HOUGH_GRADIENT ë™ì‘:
1. ì—£ì§€ ê²€ì¶œ
2. ê° ì—£ì§€ ì ì—ì„œ ê·¸ë˜ë””ì–¸íŠ¸ ë°©í–¥ìœ¼ë¡œ íˆ¬í‘œ
3. ì¤‘ì‹¬ í›„ë³´ ì„ ì •
4. ë°˜ì§€ë¦„ ì¶”ì •
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="n">circles</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">HoughCircles</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">dp</span><span class="p">,</span> <span class="n">minDist</span><span class="p">,</span> <span class="n">param1</span><span class="p">,</span> <span class="n">param2</span><span class="p">,</span> <span class="n">minRadius</span><span class="p">,</span> <span class="n">maxRadius</span><span class="p">)</span>
</code></pre></div>

<table>
<thead>
<tr>
<th>íŒŒë¼ë¯¸í„°</th>
<th>ì„¤ëª…</th>
</tr>
</thead>
<tbody>
<tr>
<td>image</td>
<td>ì…ë ¥ ê·¸ë ˆì´ìŠ¤ì¼€ì¼ ì´ë¯¸ì§€</td>
</tr>
<tr>
<td>method</td>
<td>ê²€ì¶œ ë°©ë²• (cv2.HOUGH_GRADIENT ë˜ëŠ” cv2.HOUGH_GRADIENT_ALT)</td>
</tr>
<tr>
<td>dp</td>
<td>ëˆ„ì  ë°°ì—´ í•´ìƒë„ ë¹„ìœ¨ (1 = ì›ë³¸ê³¼ ë™ì¼)</td>
</tr>
<tr>
<td>minDist</td>
<td>ê²€ì¶œëœ ì› ì¤‘ì‹¬ ê°„ ìµœì†Œ ê±°ë¦¬</td>
</tr>
<tr>
<td>param1</td>
<td>Canny ì—£ì§€ì˜ ìƒìœ„ ì„ê³„ê°’</td>
</tr>
<tr>
<td>param2</td>
<td>ì› ê²€ì¶œ ì„ê³„ê°’ (ë‚®ì„ìˆ˜ë¡ ë§ì´ ê²€ì¶œ)</td>
</tr>
<tr>
<td>minRadius</td>
<td>ìµœì†Œ ë°˜ì§€ë¦„ (0 = ë¬´ì œí•œ)</td>
</tr>
<tr>
<td>maxRadius</td>
<td>ìµœëŒ€ ë°˜ì§€ë¦„ (0 = ë¬´ì œí•œ)</td>
</tr>
</tbody>
</table>
<h3 id="_10">ê¸°ë³¸ ì‚¬ìš©ë²•<a class="header-link" href="#_10" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">hough_circles_example</span><span class="p">(</span><span class="n">image_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;í—ˆí”„ ì› ê²€ì¶œ&quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>

    <span class="c1"># ë…¸ì´ì¦ˆ ì œê±° (ì› ê²€ì¶œì— ì¤‘ìš”)</span>
    <span class="n">blurred</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">GaussianBlur</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>

    <span class="c1"># í—ˆí”„ ì› ë³€í™˜</span>
    <span class="n">circles</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">HoughCircles</span><span class="p">(</span>
        <span class="n">blurred</span><span class="p">,</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">HOUGH_GRADIENT</span><span class="p">,</span>
        <span class="n">dp</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>              <span class="c1"># ì›ë³¸ í•´ìƒë„</span>
        <span class="n">minDist</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>        <span class="c1"># ì› ì¤‘ì‹¬ ê°„ ìµœì†Œ ê±°ë¦¬</span>
        <span class="n">param1</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>        <span class="c1"># Canny ìƒìœ„ ì„ê³„ê°’</span>
        <span class="n">param2</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>         <span class="c1"># ì› ê²€ì¶œ ì„ê³„ê°’</span>
        <span class="n">minRadius</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>      <span class="c1"># ìµœì†Œ ë°˜ì§€ë¦„</span>
        <span class="n">maxRadius</span><span class="o">=</span><span class="mi">100</span>      <span class="c1"># ìµœëŒ€ ë°˜ì§€ë¦„</span>
    <span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">circles</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">circles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">uint16</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">around</span><span class="p">(</span><span class="n">circles</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">circle</span> <span class="ow">in</span> <span class="n">circles</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]:</span>
            <span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="n">circle</span>

            <span class="c1"># ì› ê·¸ë¦¬ê¸°</span>
            <span class="n">cv2</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">),</span> <span class="n">r</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>

            <span class="c1"># ì¤‘ì‹¬ì </span>
            <span class="n">cv2</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">),</span> <span class="mi">3</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ì›: ì¤‘ì‹¬(</span><span class="si">{</span><span class="n">cx</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">cy</span><span class="si">}</span><span class="s2">), ë°˜ì§€ë¦„=</span><span class="si">{</span><span class="n">r</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ê²€ì¶œëœ ì› ìˆ˜: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">circles</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Circles&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">hough_circles_example</span><span class="p">(</span><span class="s1">&#39;coins.jpg&#39;</span><span class="p">)</span>
</code></pre></div>

<h3 id="_11">ë™ì „ ê²€ì¶œ<a class="header-link" href="#_11" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">detect_coins</span><span class="p">(</span><span class="n">image_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ë™ì „ ê²€ì¶œ ë° ë¶„ë¥˜&quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>
    <span class="n">blurred</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">GaussianBlur</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>

    <span class="c1"># í—ˆí”„ ì› ë³€í™˜</span>
    <span class="n">circles</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">HoughCircles</span><span class="p">(</span>
        <span class="n">blurred</span><span class="p">,</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">HOUGH_GRADIENT</span><span class="p">,</span>
        <span class="n">dp</span><span class="o">=</span><span class="mf">1.2</span><span class="p">,</span>
        <span class="n">minDist</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span>
        <span class="n">param1</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">param2</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span>
        <span class="n">minRadius</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
        <span class="n">maxRadius</span><span class="o">=</span><span class="mi">80</span>
    <span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">coin_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">total_value</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">if</span> <span class="n">circles</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">circles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">uint16</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">around</span><span class="p">(</span><span class="n">circles</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">circle</span> <span class="ow">in</span> <span class="n">circles</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]:</span>
            <span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="n">circle</span>
            <span class="n">coin_count</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="c1"># í¬ê¸°ë¡œ ë™ì „ ì¢…ë¥˜ ì¶”ì • (ì˜ˆì‹œ)</span>
            <span class="k">if</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="mi">40</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="mi">10</span>
                <span class="n">color</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>    <span class="c1"># íŒŒë‘</span>
            <span class="k">elif</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="mi">55</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="mi">50</span>
                <span class="n">color</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>    <span class="c1"># ë…¹ìƒ‰</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="mi">100</span>
                <span class="n">color</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>    <span class="c1"># ë¹¨ê°•</span>

            <span class="n">total_value</span> <span class="o">+=</span> <span class="n">value</span>

            <span class="c1"># ê·¸ë¦¬ê¸°</span>
            <span class="n">cv2</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">),</span> <span class="n">r</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
            <span class="n">cv2</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">),</span> <span class="mi">3</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">cv2</span><span class="o">.</span><span class="n">putText</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">cx</span> <span class="o">-</span> <span class="mi">15</span><span class="p">,</span> <span class="n">cy</span> <span class="o">+</span> <span class="mi">5</span><span class="p">),</span>
                        <span class="n">cv2</span><span class="o">.</span><span class="n">FONT_HERSHEY_SIMPLEX</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ë™ì „ ê°œìˆ˜: </span><span class="si">{</span><span class="n">coin_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ì´ì•¡: </span><span class="si">{</span><span class="n">total_value</span><span class="si">}</span><span class="s2">ì›&quot;</span><span class="p">)</span>

    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Coins&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">coin_count</span><span class="p">,</span> <span class="n">total_value</span>

<span class="n">detect_coins</span><span class="p">(</span><span class="s1">&#39;coins.jpg&#39;</span><span class="p">)</span>
</code></pre></div>

<h3 id="hough_gradient_alt-opencv-43">HOUGH_GRADIENT_ALT (OpenCV 4.3+)<a class="header-link" href="#hough_gradient_alt-opencv-43" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">hough_circles_alt</span><span class="p">(</span><span class="n">image_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;HOUGH_GRADIENT_ALT ì‚¬ìš© (ë” ì •í™•)&quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>
    <span class="n">blurred</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">GaussianBlur</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>

    <span class="c1"># HOUGH_GRADIENT_ALT: ë” ì •í™•í•˜ì§€ë§Œ ëŠë¦¼</span>
    <span class="n">circles</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">HoughCircles</span><span class="p">(</span>
        <span class="n">blurred</span><span class="p">,</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">HOUGH_GRADIENT_ALT</span><span class="p">,</span>  <span class="c1"># ëŒ€ì²´ ì•Œê³ ë¦¬ì¦˜</span>
        <span class="n">dp</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span>
        <span class="n">minDist</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
        <span class="n">param1</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>    <span class="c1"># ì—£ì§€ ê·¸ë˜ë””ì–¸íŠ¸ ì„ê³„ê°’</span>
        <span class="n">param2</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span>    <span class="c1"># ì›í˜•ë„ ì„ê³„ê°’ (0-1, ë†’ì„ìˆ˜ë¡ ì—„ê²©)</span>
        <span class="n">minRadius</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
        <span class="n">maxRadius</span><span class="o">=</span><span class="mi">100</span>
    <span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">circles</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">circles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">uint16</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">around</span><span class="p">(</span><span class="n">circles</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">,</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">circles</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]:</span>
            <span class="n">cv2</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">),</span> <span class="n">r</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
            <span class="n">cv2</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">),</span> <span class="mi">3</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;HOUGH_GRADIENT_ALT&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">hough_circles_alt</span><span class="p">(</span><span class="s1">&#39;circles.jpg&#39;</span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="5">5. íŒŒë¼ë¯¸í„° íŠœë‹ ì „ëµ<a class="header-link" href="#5" title="Permanent link">&para;</a></h2>
<h3 id="_12">ì§ì„  ê²€ì¶œ íŒŒë¼ë¯¸í„°<a class="header-link" href="#_12" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    HoughLines íŒŒë¼ë¯¸í„°                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ rho (Ï í•´ìƒë„)                                                  â”‚
â”‚ - ì‘ì„ìˆ˜ë¡: ë” ì •ë°€, ë” ë§ì€ ë©”ëª¨ë¦¬, ë” ëŠë¦¼                     â”‚
â”‚ - ê¶Œì¥: 1 (1í”½ì…€)                                               â”‚
â”‚                                                                â”‚
â”‚ theta (Î¸ í•´ìƒë„)                                                â”‚
â”‚ - ì‘ì„ìˆ˜ë¡: ë” ì •ë°€í•œ ê°ë„                                       â”‚
â”‚ - ê¶Œì¥: np.pi/180 (1ë„)                                         â”‚
â”‚                                                                â”‚
â”‚ threshold (ìµœì†Œ íˆ¬í‘œ ìˆ˜)                                        â”‚
â”‚ - ë†’ì„ìˆ˜ë¡: ë” ê°•í•œ(ê¸´) ì§ì„ ë§Œ ê²€ì¶œ                             â”‚
â”‚ - ë‚®ì„ìˆ˜ë¡: ì•½í•œ(ì§§ì€) ì§ì„ ë„ ê²€ì¶œ, ë…¸ì´ì¦ˆ ì¦ê°€                 â”‚
â”‚ - íŠœë‹ ë°©ë²•: ì´ë¯¸ì§€ í¬ê¸°ì™€ ì˜ˆìƒ ì§ì„  ê¸¸ì´ì— ë”°ë¼ ì¡°ì •           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   HoughLinesP íŒŒë¼ë¯¸í„°                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ minLineLength (ìµœì†Œ ì„ ë¶„ ê¸¸ì´)                                  â”‚
â”‚ - ë†’ì„ìˆ˜ë¡: ê¸´ ì„ ë¶„ë§Œ ê²€ì¶œ                                      â”‚
â”‚ - ë…¸ì´ì¦ˆ ê°ì†Œì— íš¨ê³¼ì                                           â”‚
â”‚                                                                â”‚
â”‚ maxLineGap (ìµœëŒ€ ê°„ê²©)                                         â”‚
â”‚ - ë†’ì„ìˆ˜ë¡: ëŠì–´ì§„ ì„ ë¶„ë„ í•˜ë‚˜ë¡œ ì—°ê²°                           â”‚
â”‚ - ì ì„  ê²€ì¶œ ì‹œ ìœ ìš©                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="_13">ì› ê²€ì¶œ íŒŒë¼ë¯¸í„°<a class="header-link" href="#_13" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   HoughCircles íŒŒë¼ë¯¸í„°                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ dp (í•´ìƒë„ ë¹„ìœ¨)                                                â”‚
â”‚ - 1: ì›ë³¸ í•´ìƒë„ â†’ ì •í™•í•˜ì§€ë§Œ ëŠë¦¼                              â”‚
â”‚ - 2: 1/2 í•´ìƒë„ â†’ ë¹ ë¥´ì§€ë§Œ ëœ ì •í™•                              â”‚
â”‚ - ê¶Œì¥: 1 ~ 1.5                                                 â”‚
â”‚                                                                â”‚
â”‚ minDist (ìµœì†Œ ì¤‘ì‹¬ ê±°ë¦¬)                                        â”‚
â”‚ - ë„ˆë¬´ ì‘ìœ¼ë©´: ê°™ì€ ì›ì„ ì—¬ëŸ¬ ë²ˆ ê²€ì¶œ                           â”‚
â”‚ - ë„ˆë¬´ í¬ë©´: ê°€ê¹Œìš´ ì› ë†“ì¹¨                                     â”‚
â”‚ - ê¶Œì¥: ì˜ˆìƒ ì› ë°˜ì§€ë¦„ * 2 ì´ìƒ                                 â”‚
â”‚                                                                â”‚
â”‚ param1 (Canny ìƒìœ„ ì„ê³„ê°’)                                      â”‚
â”‚ - ë†’ì„ìˆ˜ë¡: ê°•í•œ ì—£ì§€ë§Œ ì‚¬ìš©                                    â”‚
â”‚ - ê¶Œì¥: 100 ~ 200                                               â”‚
â”‚                                                                â”‚
â”‚ param2 (ëˆ„ì  ì„ê³„ê°’)                                            â”‚
â”‚ - ë†’ì„ìˆ˜ë¡: í™•ì‹¤í•œ ì›ë§Œ ê²€ì¶œ                                    â”‚
â”‚ - ë‚®ì„ìˆ˜ë¡: ë¶ˆì™„ì „í•œ ì›ë„ ê²€ì¶œ                                  â”‚
â”‚ - ê¶Œì¥: 20 ~ 50                                                 â”‚
â”‚                                                                â”‚
â”‚ minRadius, maxRadius                                            â”‚
â”‚ - ì˜ˆìƒ ì› í¬ê¸° ë²”ìœ„ ì§€ì •                                        â”‚
â”‚ - ì˜ëª» ì„¤ì •í•˜ë©´ ê²€ì¶œ ì‹¤íŒ¨                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="_14">íŠ¸ë™ë°”ë¡œ íŒŒë¼ë¯¸í„° íŠœë‹<a class="header-link" href="#_14" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">tune_hough_circles</span><span class="p">(</span><span class="n">image_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;íŠ¸ë™ë°”ë¡œ HoughCircles íŒŒë¼ë¯¸í„° íŠœë‹&quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>
    <span class="n">blurred</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">GaussianBlur</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>

    <span class="n">cv2</span><span class="o">.</span><span class="n">namedWindow</span><span class="p">(</span><span class="s1">&#39;Circles&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">nothing</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="n">cv2</span><span class="o">.</span><span class="n">createTrackbar</span><span class="p">(</span><span class="s1">&#39;minDist&#39;</span><span class="p">,</span> <span class="s1">&#39;Circles&#39;</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="n">nothing</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">createTrackbar</span><span class="p">(</span><span class="s1">&#39;param1&#39;</span><span class="p">,</span> <span class="s1">&#39;Circles&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="n">nothing</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">createTrackbar</span><span class="p">(</span><span class="s1">&#39;param2&#39;</span><span class="p">,</span> <span class="s1">&#39;Circles&#39;</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="n">nothing</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">createTrackbar</span><span class="p">(</span><span class="s1">&#39;minRadius&#39;</span><span class="p">,</span> <span class="s1">&#39;Circles&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="n">nothing</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">createTrackbar</span><span class="p">(</span><span class="s1">&#39;maxRadius&#39;</span><span class="p">,</span> <span class="s1">&#39;Circles&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="n">nothing</span><span class="p">)</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">minDist</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">getTrackbarPos</span><span class="p">(</span><span class="s1">&#39;minDist&#39;</span><span class="p">,</span> <span class="s1">&#39;Circles&#39;</span><span class="p">)</span>
        <span class="n">param1</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">getTrackbarPos</span><span class="p">(</span><span class="s1">&#39;param1&#39;</span><span class="p">,</span> <span class="s1">&#39;Circles&#39;</span><span class="p">)</span>
        <span class="n">param2</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">getTrackbarPos</span><span class="p">(</span><span class="s1">&#39;param2&#39;</span><span class="p">,</span> <span class="s1">&#39;Circles&#39;</span><span class="p">)</span>
        <span class="n">minRadius</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">getTrackbarPos</span><span class="p">(</span><span class="s1">&#39;minRadius&#39;</span><span class="p">,</span> <span class="s1">&#39;Circles&#39;</span><span class="p">)</span>
        <span class="n">maxRadius</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">getTrackbarPos</span><span class="p">(</span><span class="s1">&#39;maxRadius&#39;</span><span class="p">,</span> <span class="s1">&#39;Circles&#39;</span><span class="p">)</span>

        <span class="c1"># ìœ íš¨ì„± ê²€ì‚¬</span>
        <span class="k">if</span> <span class="n">minDist</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">minDist</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">param2</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">param2</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="n">circles</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">HoughCircles</span><span class="p">(</span>
            <span class="n">blurred</span><span class="p">,</span>
            <span class="n">cv2</span><span class="o">.</span><span class="n">HOUGH_GRADIENT</span><span class="p">,</span>
            <span class="n">dp</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">minDist</span><span class="o">=</span><span class="n">minDist</span><span class="p">,</span>
            <span class="n">param1</span><span class="o">=</span><span class="n">param1</span><span class="p">,</span>
            <span class="n">param2</span><span class="o">=</span><span class="n">param2</span><span class="p">,</span>
            <span class="n">minRadius</span><span class="o">=</span><span class="n">minRadius</span><span class="p">,</span>
            <span class="n">maxRadius</span><span class="o">=</span><span class="n">maxRadius</span>
        <span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">circles</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">circles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">uint16</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">around</span><span class="p">(</span><span class="n">circles</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">,</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">circles</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]:</span>
                <span class="n">cv2</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">),</span> <span class="n">r</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">cv2</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">),</span> <span class="mi">3</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

            <span class="c1"># ê²€ì¶œëœ ì› ìˆ˜ í‘œì‹œ</span>
            <span class="n">cv2</span><span class="o">.</span><span class="n">putText</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;Circles: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">circles</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
                        <span class="n">cv2</span><span class="o">.</span><span class="n">FONT_HERSHEY_SIMPLEX</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>

        <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Circles&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFF</span> <span class="o">==</span> <span class="mi">27</span><span class="p">:</span>
            <span class="k">break</span>

    <span class="n">cv2</span><span class="o">.</span><span class="n">destroyAllWindows</span><span class="p">()</span>

<span class="n">tune_hough_circles</span><span class="p">(</span><span class="s1">&#39;coins.jpg&#39;</span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="6">6. ì°¨ì„  ê²€ì¶œ ê¸°ì´ˆ<a class="header-link" href="#6" title="Permanent link">&para;</a></h2>
<h3 id="_15">ì°¨ì„  ê²€ì¶œ íŒŒì´í”„ë¼ì¸<a class="header-link" href="#_15" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="n">ê´€ì‹¬</span><span class="w"> </span><span class="n">ì˜ì—­</span><span class="p">(</span><span class="n">ROI</span><span class="p">)</span><span class="w"> </span><span class="n">ì„¤ì •</span>
<span class="w">         </span><span class="err">â”‚</span>
<span class="w">         </span><span class="err">â–¼</span>
<span class="mf">2.</span><span class="w"> </span><span class="n">ê·¸ë ˆì´ìŠ¤ì¼€ì¼</span><span class="w"> </span><span class="n">ë³€í™˜</span>
<span class="w">         </span><span class="err">â”‚</span>
<span class="w">         </span><span class="err">â–¼</span>
<span class="mf">3.</span><span class="w"> </span><span class="n">ê°€ìš°ì‹œì•ˆ</span><span class="w"> </span><span class="n">ë¸”ëŸ¬</span>
<span class="w">         </span><span class="err">â”‚</span>
<span class="w">         </span><span class="err">â–¼</span>
<span class="mf">4.</span><span class="w"> </span><span class="n">Canny</span><span class="w"> </span><span class="n">ì—£ì§€</span><span class="w"> </span><span class="n">ê²€ì¶œ</span>
<span class="w">         </span><span class="err">â”‚</span>
<span class="w">         </span><span class="err">â–¼</span>
<span class="mf">5.</span><span class="w"> </span><span class="n">ê´€ì‹¬</span><span class="w"> </span><span class="n">ì˜ì—­</span><span class="w"> </span><span class="n">ë§ˆìŠ¤í‚¹</span>
<span class="w">         </span><span class="err">â”‚</span>
<span class="w">         </span><span class="err">â–¼</span>
<span class="mf">6.</span><span class="w"> </span><span class="n">í—ˆí”„</span><span class="w"> </span><span class="n">ì§ì„ </span><span class="w"> </span><span class="n">ë³€í™˜</span>
<span class="w">         </span><span class="err">â”‚</span>
<span class="w">         </span><span class="err">â–¼</span>
<span class="mf">7.</span><span class="w"> </span><span class="n">ì„ ë¶„</span><span class="w"> </span><span class="n">í•„í„°ë§</span><span class="w"> </span><span class="n">ë°</span><span class="w"> </span><span class="n">í‰ê· í™”</span>
<span class="w">         </span><span class="err">â”‚</span>
<span class="w">         </span><span class="err">â–¼</span>
<span class="mf">8.</span><span class="w"> </span><span class="n">ê²°ê³¼</span><span class="w"> </span><span class="n">í•©ì„±</span>
</code></pre></div>

<h3 id="_16">ê¸°ë³¸ ì°¨ì„  ê²€ì¶œ<a class="header-link" href="#_16" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">detect_lane_lines</span><span class="p">(</span><span class="n">image</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ê¸°ë³¸ ì°¨ì„  ê²€ì¶œ&quot;&quot;&quot;</span>
    <span class="n">height</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>

    <span class="c1"># ê·¸ë ˆì´ìŠ¤ì¼€ì¼</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>

    <span class="c1"># ê°€ìš°ì‹œì•ˆ ë¸”ëŸ¬</span>
    <span class="n">blurred</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">GaussianBlur</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>

    <span class="c1"># Canny ì—£ì§€</span>
    <span class="n">edges</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">Canny</span><span class="p">(</span><span class="n">blurred</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">150</span><span class="p">)</span>

    <span class="c1"># ê´€ì‹¬ ì˜ì—­ (ì‚¬ë‹¤ë¦¬ê¼´)</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">edges</span><span class="p">)</span>
    <span class="n">vertices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span>
        <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">height</span><span class="p">),</span>
        <span class="p">(</span><span class="n">width</span> <span class="o">*</span> <span class="mf">0.45</span><span class="p">,</span> <span class="n">height</span> <span class="o">*</span> <span class="mf">0.6</span><span class="p">),</span>
        <span class="p">(</span><span class="n">width</span> <span class="o">*</span> <span class="mf">0.55</span><span class="p">,</span> <span class="n">height</span> <span class="o">*</span> <span class="mf">0.6</span><span class="p">),</span>
        <span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
    <span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">fillPoly</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">vertices</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
    <span class="n">masked_edges</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">bitwise_and</span><span class="p">(</span><span class="n">edges</span><span class="p">,</span> <span class="n">mask</span><span class="p">)</span>

    <span class="c1"># í—ˆí”„ ì§ì„  ë³€í™˜</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">HoughLinesP</span><span class="p">(</span>
        <span class="n">masked_edges</span><span class="p">,</span>
        <span class="n">rho</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">,</span>
        <span class="n">threshold</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
        <span class="n">minLineLength</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
        <span class="n">maxLineGap</span><span class="o">=</span><span class="mi">150</span>
    <span class="p">)</span>

    <span class="c1"># ê²°ê³¼ ì´ë¯¸ì§€</span>
    <span class="n">line_image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">lines</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
            <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">cv2</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">line_image</span><span class="p">,</span> <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">),</span> <span class="p">(</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>

    <span class="c1"># ì›ë³¸ê³¼ í•©ì„±</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">addWeighted</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="n">line_image</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">result</span>

<span class="c1"># ì‚¬ìš© ì˜ˆ</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;road.jpg&#39;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">detect_lane_lines</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Lane Detection&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>

<h3 id="_17">ì¢Œ/ìš° ì°¨ì„  ë¶„ë¦¬<a class="header-link" href="#_17" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">separate_lanes</span><span class="p">(</span><span class="n">image</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ì¢Œ/ìš° ì°¨ì„  ë¶„ë¦¬ ê²€ì¶œ&quot;&quot;&quot;</span>
    <span class="n">height</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>

    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>
    <span class="n">blurred</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">GaussianBlur</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">edges</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">Canny</span><span class="p">(</span><span class="n">blurred</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">150</span><span class="p">)</span>

    <span class="c1"># ROI ë§ˆìŠ¤í¬</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">edges</span><span class="p">)</span>
    <span class="n">vertices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span>
        <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">height</span><span class="p">),</span>
        <span class="p">(</span><span class="n">width</span> <span class="o">*</span> <span class="mf">0.45</span><span class="p">,</span> <span class="n">height</span> <span class="o">*</span> <span class="mf">0.6</span><span class="p">),</span>
        <span class="p">(</span><span class="n">width</span> <span class="o">*</span> <span class="mf">0.55</span><span class="p">,</span> <span class="n">height</span> <span class="o">*</span> <span class="mf">0.6</span><span class="p">),</span>
        <span class="p">(</span><span class="n">width</span> <span class="o">-</span> <span class="mi">50</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
    <span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">fillPoly</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">vertices</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
    <span class="n">masked</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">bitwise_and</span><span class="p">(</span><span class="n">edges</span><span class="p">,</span> <span class="n">mask</span><span class="p">)</span>

    <span class="n">lines</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">HoughLinesP</span><span class="p">(</span><span class="n">masked</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span>
                             <span class="n">minLineLength</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">maxLineGap</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

    <span class="n">left_lines</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">right_lines</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="n">lines</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
            <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

            <span class="c1"># ê¸°ìš¸ê¸° ê³„ì‚°</span>
            <span class="k">if</span> <span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">slope</span> <span class="o">=</span> <span class="p">(</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span>

            <span class="c1"># ê¸°ìš¸ê¸°ë¡œ ì¢Œ/ìš° ë¶„ë¥˜</span>
            <span class="c1"># ì´ë¯¸ì§€ ì¢Œí‘œê³„: yì¶•ì´ ì•„ë˜ë¡œ ì¦ê°€</span>
            <span class="c1"># ì™¼ìª½ ì°¨ì„ : ìŒì˜ ê¸°ìš¸ê¸° (/)</span>
            <span class="c1"># ì˜¤ë¥¸ìª½ ì°¨ì„ : ì–‘ì˜ ê¸°ìš¸ê¸° (\)</span>
            <span class="k">if</span> <span class="n">slope</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">:</span>
                <span class="n">left_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">elif</span> <span class="n">slope</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>
                <span class="n">right_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="c1"># ì¢Œ/ìš° ì°¨ì„  ê·¸ë¦¬ê¸°</span>
    <span class="k">for</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="ow">in</span> <span class="n">left_lines</span><span class="p">:</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">),</span> <span class="p">(</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">),</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>  <span class="c1"># íŒŒë‘</span>

    <span class="k">for</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="ow">in</span> <span class="n">right_lines</span><span class="p">:</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">),</span> <span class="p">(</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>  <span class="c1"># ë¹¨ê°•</span>

    <span class="k">return</span> <span class="n">result</span><span class="p">,</span> <span class="n">left_lines</span><span class="p">,</span> <span class="n">right_lines</span>

<span class="c1"># ì‚¬ìš© ì˜ˆ</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;road.jpg&#39;</span><span class="p">)</span>
<span class="n">result</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="n">separate_lanes</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ì™¼ìª½ ì°¨ì„ : </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">left</span><span class="p">)</span><span class="si">}</span><span class="s2">ê°œ&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ì˜¤ë¥¸ìª½ ì°¨ì„ : </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">right</span><span class="p">)</span><span class="si">}</span><span class="s2">ê°œ&quot;</span><span class="p">)</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Lanes&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>

<h3 id="_18">ì°¨ì„  í‰ê· í™”<a class="header-link" href="#_18" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">average_lane_lines</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ì„ ë¶„ë“¤ì„ í‰ê· í•˜ì—¬ í•˜ë‚˜ì˜ ì§ì„ ìœ¼ë¡œ&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="c1"># ëª¨ë“  ì  ìˆ˜ì§‘</span>
    <span class="n">x_coords</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">y_coords</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
        <span class="n">x_coords</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">])</span>
        <span class="n">y_coords</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">])</span>

    <span class="c1"># 1ì°¨ ë‹¤í•­ì‹ í”¼íŒ… (ì§ì„ )</span>
    <span class="n">poly</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">y_coords</span><span class="p">,</span> <span class="n">x_coords</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="c1"># ì§ì„ ì˜ ì‹œì‘ì ê³¼ ëì  ê³„ì‚°</span>
    <span class="n">y1</span> <span class="o">=</span> <span class="n">height</span>
    <span class="n">y2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">height</span> <span class="o">*</span> <span class="mf">0.6</span><span class="p">)</span>
    <span class="n">x1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyval</span><span class="p">(</span><span class="n">poly</span><span class="p">,</span> <span class="n">y1</span><span class="p">))</span>
    <span class="n">x2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyval</span><span class="p">(</span><span class="n">poly</span><span class="p">,</span> <span class="n">y2</span><span class="p">))</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">detect_lanes_averaged</span><span class="p">(</span><span class="n">image</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;í‰ê· í™”ëœ ì°¨ì„  ê²€ì¶œ&quot;&quot;&quot;</span>
    <span class="n">height</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>

    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>
    <span class="n">blurred</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">GaussianBlur</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">edges</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">Canny</span><span class="p">(</span><span class="n">blurred</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">150</span><span class="p">)</span>

    <span class="c1"># ROI</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">edges</span><span class="p">)</span>
    <span class="n">vertices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span>
        <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">height</span><span class="p">),</span>
        <span class="p">(</span><span class="n">width</span> <span class="o">*</span> <span class="mf">0.45</span><span class="p">,</span> <span class="n">height</span> <span class="o">*</span> <span class="mf">0.6</span><span class="p">),</span>
        <span class="p">(</span><span class="n">width</span> <span class="o">*</span> <span class="mf">0.55</span><span class="p">,</span> <span class="n">height</span> <span class="o">*</span> <span class="mf">0.6</span><span class="p">),</span>
        <span class="p">(</span><span class="n">width</span> <span class="o">-</span> <span class="mi">50</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
    <span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">fillPoly</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">vertices</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
    <span class="n">masked</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">bitwise_and</span><span class="p">(</span><span class="n">edges</span><span class="p">,</span> <span class="n">mask</span><span class="p">)</span>

    <span class="n">lines</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">HoughLinesP</span><span class="p">(</span><span class="n">masked</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span>
                             <span class="n">minLineLength</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">maxLineGap</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

    <span class="n">left_lines</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">right_lines</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="n">lines</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
            <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">slope</span> <span class="o">=</span> <span class="p">(</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">slope</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">:</span>
                <span class="n">left_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">elif</span> <span class="n">slope</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>
                <span class="n">right_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="c1"># í‰ê· í™”ëœ ì°¨ì„  ê·¸ë¦¬ê¸°</span>
    <span class="n">left_avg</span> <span class="o">=</span> <span class="n">average_lane_lines</span><span class="p">(</span><span class="n">left_lines</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
    <span class="n">right_avg</span> <span class="o">=</span> <span class="n">average_lane_lines</span><span class="p">(</span><span class="n">right_lines</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">left_avg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">left_avg</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">left_avg</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                 <span class="p">(</span><span class="n">left_avg</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">left_avg</span><span class="p">[</span><span class="mi">3</span><span class="p">]),</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">5</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">right_avg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">right_avg</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">right_avg</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                 <span class="p">(</span><span class="n">right_avg</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">right_avg</span><span class="p">[</span><span class="mi">3</span><span class="p">]),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="mi">5</span><span class="p">)</span>

    <span class="c1"># ì°¨ì„  ì˜ì—­ ì±„ìš°ê¸°</span>
    <span class="k">if</span> <span class="n">left_avg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">right_avg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">pts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
            <span class="p">[</span><span class="n">left_avg</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">left_avg</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
            <span class="p">[</span><span class="n">left_avg</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">left_avg</span><span class="p">[</span><span class="mi">3</span><span class="p">]],</span>
            <span class="p">[</span><span class="n">right_avg</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">right_avg</span><span class="p">[</span><span class="mi">3</span><span class="p">]],</span>
            <span class="p">[</span><span class="n">right_avg</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">right_avg</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
        <span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>

        <span class="n">overlay</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">fillPoly</span><span class="p">(</span><span class="n">overlay</span><span class="p">,</span> <span class="p">[</span><span class="n">pts</span><span class="p">],</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">addWeighted</span><span class="p">(</span><span class="n">overlay</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">result</span>

<span class="c1"># ì‚¬ìš© ì˜ˆ</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;road.jpg&#39;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">detect_lanes_averaged</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Averaged Lanes&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="7">7. ì—°ìŠµ ë¬¸ì œ<a class="header-link" href="#7" title="Permanent link">&para;</a></h2>
<h3 id="1_1">ë¬¸ì œ 1: ì²´ìŠ¤íŒ ê²€ì¶œ<a class="header-link" href="#1_1" title="Permanent link">&para;</a></h3>
<p>ì²´ìŠ¤íŒ ì´ë¯¸ì§€ì—ì„œ ëª¨ë“  ì§ì„ ì„ ê²€ì¶œí•˜ê³  êµì°¨ì ì„ ì°¾ìœ¼ì„¸ìš”.</p>
<details>
<summary>ì •ë‹µ ì½”ë“œ</summary>


<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">detect_chessboard_lines</span><span class="p">(</span><span class="n">image_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ì²´ìŠ¤íŒ ì§ì„ ê³¼ êµì°¨ì  ê²€ì¶œ&quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>
    <span class="n">edges</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">Canny</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">150</span><span class="p">)</span>

    <span class="n">lines</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">HoughLines</span><span class="p">(</span><span class="n">edges</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">horizontal</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">vertical</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="n">lines</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
            <span class="n">rho</span><span class="p">,</span> <span class="n">theta</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">angle</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>

            <span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>

            <span class="c1"># ìˆ˜í‰ì„ /ìˆ˜ì§ì„  ë¶„ë¥˜</span>
            <span class="k">if</span> <span class="mi">80</span> <span class="o">&lt;</span> <span class="n">angle</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>  <span class="c1"># ìˆ˜ì§</span>
                <span class="n">vertical</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">rho</span><span class="p">,</span> <span class="n">theta</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">angle</span> <span class="o">&lt;</span> <span class="mi">10</span> <span class="ow">or</span> <span class="n">angle</span> <span class="o">&gt;</span> <span class="mi">170</span><span class="p">:</span>  <span class="c1"># ìˆ˜í‰</span>
                <span class="n">horizontal</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">rho</span><span class="p">,</span> <span class="n">theta</span><span class="p">))</span>

    <span class="c1"># êµì°¨ì  ê³„ì‚°</span>
    <span class="n">intersections</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">h_rho</span><span class="p">,</span> <span class="n">h_theta</span> <span class="ow">in</span> <span class="n">horizontal</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">v_rho</span><span class="p">,</span> <span class="n">v_theta</span> <span class="ow">in</span> <span class="n">vertical</span><span class="p">:</span>
            <span class="c1"># ë‘ ì§ì„ ì˜ êµì°¨ì </span>
            <span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
                <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">h_theta</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">h_theta</span><span class="p">)],</span>
                <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">v_theta</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">v_theta</span><span class="p">)]</span>
            <span class="p">])</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">h_rho</span><span class="p">,</span> <span class="n">v_rho</span><span class="p">])</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
                <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">and</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="n">intersections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="p">)))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>

    <span class="c1"># ê·¸ë¦¬ê¸°</span>
    <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">intersections</span><span class="p">:</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="mi">5</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;êµì°¨ì  ìˆ˜: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">intersections</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Chessboard&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">detect_chessboard_lines</span><span class="p">(</span><span class="s1">&#39;chessboard.jpg&#39;</span><span class="p">)</span>
</code></pre></div>



</details>

<h3 id="2_1">ë¬¸ì œ 2: ì•„ì´ë¦¬ìŠ¤ ê²€ì¶œ<a class="header-link" href="#2_1" title="Permanent link">&para;</a></h3>
<p>ëˆˆ ì´ë¯¸ì§€ì—ì„œ í™ì±„ ì›ì„ ê²€ì¶œí•˜ì„¸ìš”.</p>
<details>
<summary>ì •ë‹µ ì½”ë“œ</summary>


<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">detect_iris</span><span class="p">(</span><span class="n">image_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ëˆˆì—ì„œ í™ì±„ ê²€ì¶œ&quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>

    <span class="c1"># ë°ê¸° ê· ì¼í™”</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">equalizeHist</span><span class="p">(</span><span class="n">gray</span><span class="p">)</span>
    <span class="n">blurred</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">GaussianBlur</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>

    <span class="c1"># í™ì±„ ê²€ì¶œ (ì–´ë‘ìš´ ì›)</span>
    <span class="n">circles</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">HoughCircles</span><span class="p">(</span>
        <span class="n">blurred</span><span class="p">,</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">HOUGH_GRADIENT</span><span class="p">,</span>
        <span class="n">dp</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">minDist</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">param1</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">param2</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span>
        <span class="n">minRadius</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
        <span class="n">maxRadius</span><span class="o">=</span><span class="mi">60</span>
    <span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">circles</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">circles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">uint16</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">around</span><span class="p">(</span><span class="n">circles</span><span class="p">))</span>

        <span class="c1"># ê°€ì¥ í° ì› ì„ íƒ (í™ì±„)</span>
        <span class="k">for</span> <span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">,</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">circles</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="o">-</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">])[:</span><span class="mi">1</span><span class="p">]:</span>
            <span class="c1"># í™ì±„</span>
            <span class="n">cv2</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">),</span> <span class="n">r</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
            <span class="n">cv2</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">),</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>

    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Iris&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">detect_iris</span><span class="p">(</span><span class="s1">&#39;eye.jpg&#39;</span><span class="p">)</span>
</code></pre></div>



</details>

<h3 id="3_1">ë¬¸ì œ 3: ì›í˜• ë„ë¡œ í‘œì§€íŒ ê²€ì¶œ<a class="header-link" href="#3_1" title="Permanent link">&para;</a></h3>
<p>ë¹¨ê°„ìƒ‰ ì›í˜• êµí†µ í‘œì§€íŒì„ ê²€ì¶œí•˜ì„¸ìš”.</p>
<details>
<summary>ì •ë‹µ ì½”ë“œ</summary>


<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">detect_red_signs</span><span class="p">(</span><span class="n">image_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ë¹¨ê°„ ì›í˜• í‘œì§€íŒ ê²€ì¶œ&quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
    <span class="n">hsv</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2HSV</span><span class="p">)</span>

    <span class="c1"># ë¹¨ê°„ìƒ‰ ë§ˆìŠ¤í¬ (HSVì—ì„œ ë¹¨ê°•ì€ 0ë„ì™€ 180ë„ ë¶€ê·¼)</span>
    <span class="n">lower_red1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
    <span class="n">upper_red1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">])</span>
    <span class="n">lower_red2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">160</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
    <span class="n">upper_red2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">180</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">])</span>

    <span class="n">mask1</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">inRange</span><span class="p">(</span><span class="n">hsv</span><span class="p">,</span> <span class="n">lower_red1</span><span class="p">,</span> <span class="n">upper_red1</span><span class="p">)</span>
    <span class="n">mask2</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">inRange</span><span class="p">(</span><span class="n">hsv</span><span class="p">,</span> <span class="n">lower_red2</span><span class="p">,</span> <span class="n">upper_red2</span><span class="p">)</span>
    <span class="n">red_mask</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">bitwise_or</span><span class="p">(</span><span class="n">mask1</span><span class="p">,</span> <span class="n">mask2</span><span class="p">)</span>

    <span class="c1"># ëª¨í´ë¡œì§€ ì—°ì‚°</span>
    <span class="n">kernel</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
    <span class="n">red_mask</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">morphologyEx</span><span class="p">(</span><span class="n">red_mask</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">MORPH_CLOSE</span><span class="p">,</span> <span class="n">kernel</span><span class="p">)</span>
    <span class="n">red_mask</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">morphologyEx</span><span class="p">(</span><span class="n">red_mask</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">MORPH_OPEN</span><span class="p">,</span> <span class="n">kernel</span><span class="p">)</span>

    <span class="c1"># ì› ê²€ì¶œ</span>
    <span class="n">circles</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">HoughCircles</span><span class="p">(</span>
        <span class="n">red_mask</span><span class="p">,</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">HOUGH_GRADIENT</span><span class="p">,</span>
        <span class="n">dp</span><span class="o">=</span><span class="mf">1.2</span><span class="p">,</span>
        <span class="n">minDist</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
        <span class="n">param1</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
        <span class="n">param2</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
        <span class="n">minRadius</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
        <span class="n">maxRadius</span><span class="o">=</span><span class="mi">100</span>
    <span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">circles</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">circles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">uint16</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">around</span><span class="p">(</span><span class="n">circles</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">,</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">circles</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">cv2</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">),</span> <span class="n">r</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
            <span class="n">cv2</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">),</span> <span class="mi">3</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Red Signs&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Mask&#39;</span><span class="p">,</span> <span class="n">red_mask</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">detect_red_signs</span><span class="p">(</span><span class="s1">&#39;traffic_sign.jpg&#39;</span><span class="p">)</span>
</code></pre></div>



</details>

<h3 id="_19">ì¶”ì²œ ë¬¸ì œ<a class="header-link" href="#_19" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>ë‚œì´ë„</th>
<th>ì£¼ì œ</th>
<th>ì„¤ëª…</th>
</tr>
</thead>
<tbody>
<tr>
<td>â­</td>
<td>ì§ì„  ê²€ì¶œ</td>
<td>ê±´ë¬¼ ì‚¬ì§„ì—ì„œ ìˆ˜í‰/ìˆ˜ì§ì„  ê²€ì¶œ</td>
</tr>
<tr>
<td>â­â­</td>
<td>ë™ì „ ì„¸ê¸°</td>
<td>ë™ì „ ì‚¬ì§„ì—ì„œ ê°œìˆ˜ì™€ ê¸ˆì•¡ ê³„ì‚°</td>
</tr>
<tr>
<td>â­â­</td>
<td>ë¬¸ì„œ ê²€ì¶œ</td>
<td>ë¬¸ì„œ ê²½ê³„ì„  4ê°œ ê²€ì¶œ</td>
</tr>
<tr>
<td>â­â­â­</td>
<td>ì°¨ì„  ê²€ì¶œ</td>
<td>ë„ë¡œ ì˜ìƒì—ì„œ ì‹¤ì‹œê°„ ì°¨ì„  ê²€ì¶œ</td>
</tr>
<tr>
<td>â­â­â­</td>
<td>ê³„ê¸°íŒ</td>
<td>ì•„ë‚ ë¡œê·¸ ê²Œì´ì§€ ëˆˆê¸ˆ ì½ê¸°</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="_20">ë‹¤ìŒ ë‹¨ê³„<a class="header-link" href="#_20" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="./12_Histogram_Analysis.md">12_Histogram_Analysis.md</a> - calcHist, equalizeHist, CLAHE</li>
</ul>
<hr />
<h2 id="_21">ì°¸ê³  ìë£Œ<a class="header-link" href="#_21" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://docs.opencv.org/4.x/d6/d10/tutorial_py_houghlines.html">OpenCV Hough Line Transform</a></li>
<li><a href="https://docs.opencv.org/4.x/da/d53/tutorial_py_houghcircles.html">OpenCV Hough Circle Transform</a></li>
<li><a href="https://towardsdatascience.com/tutorial-build-a-lane-detector-679fd8953132">Lane Detection Tutorial</a></li>
</ul>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/ko/Computer_Vision/10_Shape_Analysis.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">ë„í˜• ë¶„ì„ (Shape Analysis)</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/ko/Computer_Vision/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/ko/Computer_Vision/12_Histogram_Analysis.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">íˆìŠ¤í† ê·¸ë¨ ë¶„ì„ (Histogram Analysis)</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">â†‘</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'ko';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}