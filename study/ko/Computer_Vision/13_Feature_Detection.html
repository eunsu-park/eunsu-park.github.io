{% raw %}
<!DOCTYPE html>
<html lang="ko" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íŠ¹ì§•ì  ê²€ì¶œ (Feature Detection) - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/ko/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/ko/" class="nav-item ">
                    <span class="nav-icon">ğŸ </span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">ğŸ’»</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/ko/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" >
                        English
                    </option>
                    
                    <option value="ko" selected>
                        í•œêµ­ì–´
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">â˜€ï¸</span>
                    <span class="theme-icon dark">ğŸŒ™</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/ko/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/ko/Computer_Vision/">Computer Vision</a>
    <span class="separator">/</span>
    <span class="current">íŠ¹ì§•ì  ê²€ì¶œ (Feature Detection)</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>íŠ¹ì§•ì  ê²€ì¶œ (Feature Detection)</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/ko/Computer_Vision/12_Histogram_Analysis.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">íˆìŠ¤í† ê·¸ë¨ ë¶„ì„ (Histogram Analysis)</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/ko/Computer_Vision/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/ko/Computer_Vision/14_Feature_Matching.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">íŠ¹ì§•ì  ë§¤ì¹­ (Feature Matching)</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#_1">ê°œìš”</a></li>
<li><a href="#_2">ëª©ì°¨</a></li>
<li><a href="#1">1. íŠ¹ì§•ì  ê¸°ì´ˆ ê°œë…</a><ul>
<li><a href="#_3">íŠ¹ì§•ì ì´ë€?</a></li>
<li><a href="#_4">íŠ¹ì§•ì  ê²€ì¶œ íŒŒì´í”„ë¼ì¸</a></li>
<li><a href="#_5">ê²€ì¶œê¸° ë¹„êµ</a></li>
</ul>
</li>
<li><a href="#2-harris">2. ì½”ë„ˆ ê²€ì¶œ - Harris</a><ul>
<li><a href="#_6">ê°œë…</a></li>
<li><a href="#cv2cornerharris">cv2.cornerHarris()</a></li>
<li><a href="#_7">ì„œë¸Œí”½ì…€ ì •í™•ë„</a></li>
</ul>
</li>
<li><a href="#3-goodfeaturestotrack">3. ì¢‹ì€ íŠ¹ì§•ì  - goodFeaturesToTrack</a><ul>
<li><a href="#cv2goodfeaturestotrack">cv2.goodFeaturesToTrack()</a></li>
<li><a href="#_8">ë§ˆìŠ¤í¬ë¥¼ ì´ìš©í•œ ì˜ì—­ ì œí•œ</a></li>
</ul>
</li>
<li><a href="#4-fast">4. FAST ê²€ì¶œê¸°</a><ul>
<li><a href="#_9">ê°œë…</a></li>
<li><a href="#cv2fastfeaturedetector">cv2.FastFeatureDetector</a></li>
<li><a href="#fast">FAST íŒŒë¼ë¯¸í„° ë¹„êµ</a></li>
</ul>
</li>
<li><a href="#5-sift">5. SIFT ê²€ì¶œê¸°</a><ul>
<li><a href="#_10">ê°œë…</a></li>
<li><a href="#cv2sift_create">cv2.SIFT_create()</a></li>
<li><a href="#sift">SIFT í‚¤í¬ì¸íŠ¸ ë¶„ì„</a></li>
</ul>
</li>
<li><a href="#6-orb">6. ORB ê²€ì¶œê¸°</a><ul>
<li><a href="#_11">ê°œë…</a></li>
<li><a href="#cv2orb_create">cv2.ORB_create()</a></li>
<li><a href="#sift-vs-orb">SIFT vs ORB ë¹„êµ</a></li>
</ul>
</li>
<li><a href="#7">7. í‚¤í¬ì¸íŠ¸ì™€ ë””ìŠ¤í¬ë¦½í„°</a><ul>
<li><a href="#keypoint">KeyPoint êµ¬ì¡°</a></li>
<li><a href="#_12">ë””ìŠ¤í¬ë¦½í„° ì´í•´</a></li>
<li><a href="#_13">ë‹¤ì–‘í•œ ê²€ì¶œê¸° ì‚¬ìš©</a></li>
</ul>
</li>
<li><a href="#8">8. ì—°ìŠµ ë¬¸ì œ</a><ul>
<li><a href="#1_1">ë¬¸ì œ 1: ìµœì  íŠ¹ì§•ì  ì„ íƒ</a></li>
<li><a href="#2">ë¬¸ì œ 2: ê· ì¼ ë¶„í¬ íŠ¹ì§•ì </a></li>
<li><a href="#3">ë¬¸ì œ 3: íšŒì „ ë¶ˆë³€ì„± í…ŒìŠ¤íŠ¸</a></li>
<li><a href="#_14">ì¶”ì²œ ë¬¸ì œ</a></li>
</ul>
</li>
<li><a href="#_15">ë‹¤ìŒ ë‹¨ê³„</a></li>
<li><a href="#_16">ì°¸ê³  ìë£Œ</a></li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="feature-detection">íŠ¹ì§•ì  ê²€ì¶œ (Feature Detection)<a class="header-link" href="#feature-detection" title="Permanent link">&para;</a></h1>
<h2 id="_1">ê°œìš”<a class="header-link" href="#_1" title="Permanent link">&para;</a></h2>
<p>íŠ¹ì§•ì (Feature)ì€ ì´ë¯¸ì§€ì—ì„œ ê³ ìœ í•˜ê³  ë°˜ë³µì ìœ¼ë¡œ ê²€ì¶œ ê°€ëŠ¥í•œ ì§€ì ì…ë‹ˆë‹¤. ì½”ë„ˆ, ë¸”ë¡­, ì—£ì§€ êµì°¨ì  ë“±ì´ ìˆìœ¼ë©°, ì´ë¯¸ì§€ ë§¤ì¹­, ê°ì²´ ì¸ì‹, 3D ì¬êµ¬ì„± ë“±ì— í™œìš©ë©ë‹ˆë‹¤. ì´ ë ˆìŠ¨ì—ì„œëŠ” Harris, FAST, SIFT, ORB ë“± ë‹¤ì–‘í•œ íŠ¹ì§•ì  ê²€ì¶œ ì•Œê³ ë¦¬ì¦˜ì„ í•™ìŠµí•©ë‹ˆë‹¤.</p>
<hr />
<h2 id="_2">ëª©ì°¨<a class="header-link" href="#_2" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#1-íŠ¹ì§•ì -ê¸°ì´ˆ-ê°œë…">íŠ¹ì§•ì  ê¸°ì´ˆ ê°œë…</a></li>
<li><a href="#2-ì½”ë„ˆ-ê²€ì¶œ---harris">ì½”ë„ˆ ê²€ì¶œ - Harris</a></li>
<li><a href="#3-ì¢‹ì€-íŠ¹ì§•ì ---goodfeaturestotrack">ì¢‹ì€ íŠ¹ì§•ì  - goodFeaturesToTrack</a></li>
<li><a href="#4-fast-ê²€ì¶œê¸°">FAST ê²€ì¶œê¸°</a></li>
<li><a href="#5-sift-ê²€ì¶œê¸°">SIFT ê²€ì¶œê¸°</a></li>
<li><a href="#6-orb-ê²€ì¶œê¸°">ORB ê²€ì¶œê¸°</a></li>
<li><a href="#7-í‚¤í¬ì¸íŠ¸ì™€-ë””ìŠ¤í¬ë¦½í„°">í‚¤í¬ì¸íŠ¸ì™€ ë””ìŠ¤í¬ë¦½í„°</a></li>
<li><a href="#8-ì—°ìŠµ-ë¬¸ì œ">ì—°ìŠµ ë¬¸ì œ</a></li>
</ol>
<hr />
<h2 id="1">1. íŠ¹ì§•ì  ê¸°ì´ˆ ê°œë…<a class="header-link" href="#1" title="Permanent link">&para;</a></h2>
<h3 id="_3">íŠ¹ì§•ì ì´ë€?<a class="header-link" href="#_3" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">íŠ¹ì§•ì </span><span class="w"> </span><span class="p">(</span><span class="n">Feature</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">Keypoint</span><span class="p">):</span>
<span class="err">ì´ë¯¸ì§€ì—ì„œ</span><span class="w"> </span><span class="err">ê³ ìœ í•˜ê²Œ</span><span class="w"> </span><span class="err">ì‹ë³„</span><span class="w"> </span><span class="err">ê°€ëŠ¥í•œ</span><span class="w"> </span><span class="err">ì§€ì </span>

<span class="err">ì¢‹ì€</span><span class="w"> </span><span class="err">íŠ¹ì§•ì ì˜</span><span class="w"> </span><span class="err">ì¡°ê±´</span><span class="p">:</span>
<span class="mf">1.</span><span class="w"> </span><span class="err">ë°˜ë³µì„±</span><span class="w"> </span><span class="p">(</span><span class="n">Repeatability</span><span class="p">):</span><span class="w"> </span><span class="err">ê°™ì€</span><span class="w"> </span><span class="err">ë¬¼ì²´ëŠ”</span><span class="w"> </span><span class="err">í•­ìƒ</span><span class="w"> </span><span class="err">ê°™ì€</span><span class="w"> </span><span class="err">íŠ¹ì§•ì </span>
<span class="mf">2.</span><span class="w"> </span><span class="err">êµ¬ë³„ì„±</span><span class="w"> </span><span class="p">(</span><span class="n">Distinctiveness</span><span class="p">):</span><span class="w"> </span><span class="err">ì„œë¡œ</span><span class="w"> </span><span class="err">ë‹¤ë¥¸</span><span class="w"> </span><span class="err">íŠ¹ì§•ì ì€</span><span class="w"> </span><span class="err">êµ¬ë³„</span><span class="w"> </span><span class="err">ê°€ëŠ¥</span>
<span class="mf">3.</span><span class="w"> </span><span class="err">ë¶ˆë³€ì„±</span><span class="w"> </span><span class="p">(</span><span class="n">Invariance</span><span class="p">):</span><span class="w"> </span><span class="err">íšŒì „</span><span class="p">,</span><span class="w"> </span><span class="err">í¬ê¸°</span><span class="p">,</span><span class="w"> </span><span class="err">ì¡°ëª…</span><span class="w"> </span><span class="err">ë³€í™”ì—</span><span class="w"> </span><span class="err">ê°•ê±´</span>
<span class="mf">4.</span><span class="w"> </span><span class="err">ì •í™•ì„±</span><span class="w"> </span><span class="p">(</span><span class="n">Accuracy</span><span class="p">):</span><span class="w"> </span><span class="err">ì •í™•í•œ</span><span class="w"> </span><span class="err">ìœ„ì¹˜</span><span class="w"> </span><span class="err">ê²€ì¶œ</span>

<span class="err">íŠ¹ì§•ì ì˜</span><span class="w"> </span><span class="err">ì¢…ë¥˜</span><span class="p">:</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">ì½”ë„ˆ</span><span class="w"> </span><span class="p">(</span><span class="n">Corner</span><span class="p">)</span><span class="w">              </span><span class="err">ë¸”ë¡­</span><span class="w"> </span><span class="p">(</span><span class="n">Blob</span><span class="p">)</span><span class="w">                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">       </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€</span><span class="w">              </span><span class="err">â—â—â—â—â—</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">       </span><span class="err">â”‚</span><span class="w">                    </span><span class="err">â—â—â—â—â—â—â—</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="err">â”€â”€â”€â”˜</span><span class="w">                    </span><span class="err">â—â—â—â—â—â—â—â—</span><span class="w">                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                            </span><span class="err">â—â—â—â—â—â—â—</span><span class="w">                          </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">ë‘</span><span class="w"> </span><span class="err">ë°©í–¥ìœ¼ë¡œ</span><span class="w"> </span><span class="err">ë³€í™”</span><span class="w">           </span><span class="err">â—â—â—â—â—</span><span class="w">                            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                          </span><span class="err">íŠ¹ì •</span><span class="w"> </span><span class="err">í¬ê¸°ì˜</span><span class="w"> </span><span class="err">ì˜ì—­</span><span class="w">                     </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="_4">íŠ¹ì§•ì  ê²€ì¶œ íŒŒì´í”„ë¼ì¸<a class="header-link" href="#_4" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="n">íŠ¹ì§•ì </span><span class="w"> </span><span class="n">ê²€ì¶œ</span><span class="w"> </span><span class="p">(</span><span class="n">Detection</span><span class="p">)</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">ì´ë¯¸ì§€ì—ì„œ</span><span class="w"> </span><span class="n">í‚¤í¬ì¸íŠ¸</span><span class="w"> </span><span class="n">ìœ„ì¹˜</span><span class="w"> </span><span class="n">ì°¾ê¸°</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Harris</span><span class="p">,</span><span class="w"> </span><span class="n">FAST</span><span class="p">,</span><span class="w"> </span><span class="n">SIFT</span><span class="p">,</span><span class="w"> </span><span class="ow">OR</span><span class="n">B</span><span class="w"> </span><span class="n">ë“±</span>
<span class="w">         </span><span class="err">â”‚</span>
<span class="w">         </span><span class="err">â–¼</span>
<span class="mf">2.</span><span class="w"> </span><span class="n">íŠ¹ì§•ì </span><span class="w"> </span><span class="n">ê¸°ìˆ </span><span class="w"> </span><span class="p">(</span><span class="n">Description</span><span class="p">)</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">ê°</span><span class="w"> </span><span class="n">í‚¤í¬ì¸íŠ¸</span><span class="w"> </span><span class="n">ì£¼ë³€ì˜</span><span class="w"> </span><span class="n">íŠ¹ì§•</span><span class="w"> </span><span class="n">ë²¡í„°</span><span class="w"> </span><span class="n">ìƒì„±</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">SIFT</span><span class="w"> </span><span class="n">descriptor</span><span class="p">,</span><span class="w"> </span><span class="ow">OR</span><span class="n">B</span><span class="w"> </span><span class="n">descriptor</span><span class="p">,</span><span class="w"> </span><span class="n">BRIEF</span><span class="w"> </span><span class="n">ë“±</span>
<span class="w">         </span><span class="err">â”‚</span>
<span class="w">         </span><span class="err">â–¼</span>
<span class="mf">3.</span><span class="w"> </span><span class="n">íŠ¹ì§•ì </span><span class="w"> </span><span class="n">ë§¤ì¹­</span><span class="w"> </span><span class="p">(</span><span class="n">Matching</span><span class="p">)</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">ë‹¤ë¥¸</span><span class="w"> </span><span class="n">ì´ë¯¸ì§€ì˜</span><span class="w"> </span><span class="n">ë””ìŠ¤í¬ë¦½í„°ì™€</span><span class="w"> </span><span class="n">ë¹„êµ</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">BFMatcher</span><span class="p">,</span><span class="w"> </span><span class="n">FLANN</span><span class="w"> </span><span class="n">ë“±</span>
</code></pre></div>

<h3 id="_5">ê²€ì¶œê¸° ë¹„êµ<a class="header-link" href="#_5" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì•Œê³ ë¦¬ì¦˜       â”‚ ì†ë„      â”‚ íšŒì „ ë¶ˆë³€ â”‚ í¬ê¸° ë¶ˆë³€ â”‚ íŠ¹í—ˆ     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Harris         â”‚ ë¹ ë¦„      â”‚ â—‹         â”‚ âœ—         â”‚ ì—†ìŒ     â”‚
â”‚ FAST           â”‚ ë§¤ìš° ë¹ ë¦„ â”‚ âœ—         â”‚ âœ—         â”‚ ì—†ìŒ     â”‚
â”‚ SIFT           â”‚ ëŠë¦¼      â”‚ â—‹         â”‚ â—‹         â”‚ ë§Œë£Œ     â”‚
â”‚ SURF           â”‚ ë³´í†µ      â”‚ â—‹         â”‚ â—‹         â”‚ ìˆìŒ     â”‚
â”‚ ORB            â”‚ ë¹ ë¦„      â”‚ â—‹         â”‚ â—‹         â”‚ ì—†ìŒ     â”‚
â”‚ AKAZE          â”‚ ë³´í†µ      â”‚ â—‹         â”‚ â—‹         â”‚ ì—†ìŒ     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<hr />
<h2 id="2-harris">2. ì½”ë„ˆ ê²€ì¶œ - Harris<a class="header-link" href="#2-harris" title="Permanent link">&para;</a></h2>
<h3 id="_6">ê°œë…<a class="header-link" href="#_6" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Harris</span><span class="w"> </span><span class="n">ì½”ë„ˆ</span><span class="w"> </span><span class="n">ê²€ì¶œ</span><span class="o">:</span>
<span class="n">ì´ë¯¸ì§€</span><span class="w"> </span><span class="n">íŒ¨ì¹˜ë¥¼</span><span class="w"> </span><span class="n">ì´ë™ì‹œì¼°ì„</span><span class="w"> </span><span class="n">ë•Œ</span><span class="w"> </span><span class="n">ë°ê¸°</span><span class="w"> </span><span class="n">ë³€í™”</span><span class="w"> </span><span class="n">ë¶„ì„</span>

<span class="o">-</span><span class="w"> </span><span class="n">í‰íƒ„</span><span class="w"> </span><span class="n">ì˜ì—­</span><span class="o">:</span><span class="w"> </span><span class="n">ëª¨ë“ </span><span class="w"> </span><span class="n">ë°©í–¥ìœ¼ë¡œ</span><span class="w"> </span><span class="n">ë³€í™”</span><span class="w"> </span><span class="n">ì—†ìŒ</span>
<span class="o">-</span><span class="w"> </span><span class="n">ì—£ì§€</span><span class="o">:</span><span class="w"> </span><span class="n">ì—£ì§€</span><span class="w"> </span><span class="n">ë°©í–¥ì€</span><span class="w"> </span><span class="n">ë³€í™”</span><span class="w"> </span><span class="n">ì—†ìŒ</span><span class="p">,</span><span class="w"> </span><span class="n">ìˆ˜ì§</span><span class="w"> </span><span class="n">ë°©í–¥ì€</span><span class="w"> </span><span class="n">ë³€í™”</span><span class="w"> </span><span class="n">í¼</span>
<span class="o">-</span><span class="w"> </span><span class="n">ì½”ë„ˆ</span><span class="o">:</span><span class="w"> </span><span class="n">ëª¨ë“ </span><span class="w"> </span><span class="n">ë°©í–¥ìœ¼ë¡œ</span><span class="w"> </span><span class="n">ë³€í™”</span><span class="w"> </span><span class="n">í¼</span>

<span class="n">ìê¸°ìƒê´€</span><span class="w"> </span><span class="n">í–‰ë ¬</span><span class="w"> </span><span class="n">M</span><span class="o">:</span>
<span class="n">M</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Î£</span><span class="w"> </span><span class="p">[</span><span class="n">IxÂ²</span><span class="w">    </span><span class="n">IxIy</span><span class="p">]</span>
<span class="w">    </span><span class="p">[</span><span class="n">IxIy</span><span class="w">   </span><span class="n">IyÂ²</span><span class="w"> </span><span class="p">]</span>

<span class="n">Ix</span><span class="p">,</span><span class="w"> </span><span class="n">Iy</span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">ë°©í–¥</span><span class="w"> </span><span class="n">ë¯¸ë¶„</span>

<span class="n">ì½”ë„ˆ</span><span class="w"> </span><span class="n">ì‘ë‹µ</span><span class="w"> </span><span class="n">í•¨ìˆ˜</span><span class="o">:</span>
<span class="n">R</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">det</span><span class="p">(</span><span class="n">M</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="err">Ã—</span><span class="w"> </span><span class="p">(</span><span class="n">trace</span><span class="p">(</span><span class="n">M</span><span class="p">))</span><span class="n">Â²</span>
<span class="n">R</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Î»1</span><span class="err">Ã—</span><span class="n">Î»2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">k</span><span class="p">(</span><span class="n">Î»1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Î»2</span><span class="p">)</span><span class="n">Â²</span>

<span class="o">-</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">threshold</span><span class="o">:</span><span class="w"> </span><span class="n">ì½”ë„ˆ</span>
<span class="o">-</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="err">â‰ˆ</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="w"> </span><span class="n">í‰íƒ„</span>
<span class="o">-</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="w"> </span><span class="n">ì—£ì§€</span>
</code></pre></div>

<h3 id="cv2cornerharris">cv2.cornerHarris()<a class="header-link" href="#cv2cornerharris" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">harris_corner_detection</span><span class="p">(</span><span class="n">image_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Harris ì½”ë„ˆ ê²€ì¶œ&quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">(</span><span class="n">gray</span><span class="p">)</span>

    <span class="c1"># Harris ì½”ë„ˆ ê²€ì¶œ</span>
    <span class="n">dst</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cornerHarris</span><span class="p">(</span>
        <span class="n">gray</span><span class="p">,</span>
        <span class="n">blockSize</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>     <span class="c1"># ì´ì›ƒ í¬ê¸°</span>
        <span class="n">ksize</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>         <span class="c1"># Sobel ì»¤ë„ í¬ê¸°</span>
        <span class="n">k</span><span class="o">=</span><span class="mf">0.04</span>           <span class="c1"># Harris íŒŒë¼ë¯¸í„°</span>
    <span class="p">)</span>

    <span class="c1"># ê²°ê³¼ íŒ½ì°½ (ì½”ë„ˆ ê°•ì¡°)</span>
    <span class="n">dst</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">dilate</span><span class="p">(</span><span class="n">dst</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="c1"># ì„ê³„ê°’ ì´ìƒì˜ ì ì„ ì½”ë„ˆë¡œ í‘œì‹œ</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">result</span><span class="p">[</span><span class="n">dst</span> <span class="o">&gt;</span> <span class="mf">0.01</span> <span class="o">*</span> <span class="n">dst</span><span class="o">.</span><span class="n">max</span><span class="p">()]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">]</span>

    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Harris Corners&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">dst</span>

<span class="n">harris_corner_detection</span><span class="p">(</span><span class="s1">&#39;chessboard.jpg&#39;</span><span class="p">)</span>
</code></pre></div>

<h3 id="_7">ì„œë¸Œí”½ì…€ ì •í™•ë„<a class="header-link" href="#_7" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">harris_subpixel</span><span class="p">(</span><span class="n">image_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ì„œë¸Œí”½ì…€ ì •í™•ë„ì˜ Harris ì½”ë„ˆ&quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>
    <span class="n">gray_float</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">(</span><span class="n">gray</span><span class="p">)</span>

    <span class="c1"># Harris ì½”ë„ˆ</span>
    <span class="n">dst</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cornerHarris</span><span class="p">(</span><span class="n">gray_float</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">0.04</span><span class="p">)</span>

    <span class="c1"># ì½”ë„ˆ ìœ„ì¹˜ ì¶”ì¶œ</span>
    <span class="n">dst</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">dilate</span><span class="p">(</span><span class="n">dst</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">ret</span><span class="p">,</span> <span class="n">dst_thresh</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">threshold</span><span class="p">(</span><span class="n">dst</span><span class="p">,</span> <span class="mf">0.01</span> <span class="o">*</span> <span class="n">dst</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">dst_thresh</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">(</span><span class="n">dst_thresh</span><span class="p">)</span>

    <span class="c1"># ì—°ê²° ìš”ì†Œë¡œ ì½”ë„ˆ ì¤‘ì‹¬ ì°¾ê¸°</span>
    <span class="n">ret</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">stats</span><span class="p">,</span> <span class="n">centroids</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">connectedComponentsWithStats</span><span class="p">(</span><span class="n">dst_thresh</span><span class="p">)</span>

    <span class="c1"># ì„œë¸Œí”½ì…€ ì •ë°€ë„ë¡œ ê°œì„ </span>
    <span class="n">criteria</span> <span class="o">=</span> <span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">TERM_CRITERIA_EPS</span> <span class="o">+</span> <span class="n">cv2</span><span class="o">.</span><span class="n">TERM_CRITERIA_MAX_ITER</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">)</span>
    <span class="n">corners</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cornerSubPix</span><span class="p">(</span>
        <span class="n">gray</span><span class="p">,</span>
        <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">(</span><span class="n">centroids</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>      <span class="c1"># ìœˆë„ìš° í¬ê¸°</span>
        <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span>    <span class="c1"># ì œë¡œ ì¡´</span>
        <span class="n">criteria</span>
    <span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">corner</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">corners</span><span class="p">):</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">corner</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># ì²« ë²ˆì§¸ëŠ” ë°°ê²½</span>
            <span class="k">continue</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="p">)),</span> <span class="mi">5</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;SubPixel Corners&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">corners</span>

<span class="n">harris_subpixel</span><span class="p">(</span><span class="s1">&#39;chessboard.jpg&#39;</span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="3-goodfeaturestotrack">3. ì¢‹ì€ íŠ¹ì§•ì  - goodFeaturesToTrack<a class="header-link" href="#3-goodfeaturestotrack" title="Permanent link">&para;</a></h2>
<h3 id="cv2goodfeaturestotrack">cv2.goodFeaturesToTrack()<a class="header-link" href="#cv2goodfeaturestotrack" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>Shi-Tomasi ì½”ë„ˆ ê²€ì¶œ (Harris ê°œì„ ):
R = min(Î»1, Î»2)

Harrisë³´ë‹¤ ë” ì•ˆì •ì ì¸ ì½”ë„ˆ ê²€ì¶œ
â†’ ê´‘í•™ íë¦„(Optical Flow) ì¶”ì ì— ì í•©
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">good_features_demo</span><span class="p">(</span><span class="n">image_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ì¢‹ì€ íŠ¹ì§•ì  ê²€ì¶œ&quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>

    <span class="c1"># ì¢‹ì€ íŠ¹ì§•ì  ê²€ì¶œ</span>
    <span class="n">corners</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">goodFeaturesToTrack</span><span class="p">(</span>
        <span class="n">gray</span><span class="p">,</span>
        <span class="n">maxCorners</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>     <span class="c1"># ìµœëŒ€ ì½”ë„ˆ ìˆ˜</span>
        <span class="n">qualityLevel</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>  <span class="c1"># í’ˆì§ˆ ìˆ˜ì¤€ (ìµœëŒ€ ì‘ë‹µì˜ ë¹„ìœ¨)</span>
        <span class="n">minDistance</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>     <span class="c1"># ì½”ë„ˆ ê°„ ìµœì†Œ ê±°ë¦¬</span>
        <span class="n">blockSize</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>        <span class="c1"># ì´ì›ƒ í¬ê¸°</span>
        <span class="n">useHarrisDetector</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># Shi-Tomasi ì‚¬ìš©</span>
        <span class="n">k</span><span class="o">=</span><span class="mf">0.04</span>              <span class="c1"># Harris íŒŒë¼ë¯¸í„° (Harris ì‚¬ìš©ì‹œ)</span>
    <span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">corners</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">corners</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">int_</span><span class="p">(</span><span class="n">corners</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">corner</span> <span class="ow">in</span> <span class="n">corners</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">corner</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
            <span class="n">cv2</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="mi">5</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ê²€ì¶œëœ ì½”ë„ˆ ìˆ˜: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">corners</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Good Features&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">corners</span>

<span class="n">good_features_demo</span><span class="p">(</span><span class="s1">&#39;building.jpg&#39;</span><span class="p">)</span>
</code></pre></div>

<h3 id="_8">ë§ˆìŠ¤í¬ë¥¼ ì´ìš©í•œ ì˜ì—­ ì œí•œ<a class="header-link" href="#_8" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">features_with_mask</span><span class="p">(</span><span class="n">image_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;íŠ¹ì • ì˜ì—­ì—ì„œë§Œ íŠ¹ì§•ì  ê²€ì¶œ&quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>
    <span class="n">h</span><span class="p">,</span> <span class="n">w</span> <span class="o">=</span> <span class="n">gray</span><span class="o">.</span><span class="n">shape</span>

    <span class="c1"># ROI ë§ˆìŠ¤í¬ ìƒì„± (ì¤‘ì•™ ì˜ì—­ë§Œ)</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="p">(</span><span class="n">w</span><span class="o">//</span><span class="mi">4</span><span class="p">,</span> <span class="n">h</span><span class="o">//</span><span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">w</span><span class="o">//</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="o">*</span><span class="n">h</span><span class="o">//</span><span class="mi">4</span><span class="p">),</span> <span class="mi">255</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

    <span class="c1"># ë§ˆìŠ¤í¬ ì˜ì—­ì—ì„œë§Œ íŠ¹ì§•ì  ê²€ì¶œ</span>
    <span class="n">corners</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">goodFeaturesToTrack</span><span class="p">(</span>
        <span class="n">gray</span><span class="p">,</span>
        <span class="n">maxCorners</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
        <span class="n">qualityLevel</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
        <span class="n">minDistance</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
        <span class="n">mask</span><span class="o">=</span><span class="n">mask</span>
    <span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="c1"># ë§ˆìŠ¤í¬ ì˜ì—­ í‘œì‹œ</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">w</span><span class="o">//</span><span class="mi">4</span><span class="p">,</span> <span class="n">h</span><span class="o">//</span><span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">w</span><span class="o">//</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="o">*</span><span class="n">h</span><span class="o">//</span><span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">corners</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">corner</span> <span class="ow">in</span> <span class="n">corners</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">corner</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
            <span class="n">cv2</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="p">)),</span> <span class="mi">5</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Features with Mask&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">features_with_mask</span><span class="p">(</span><span class="s1">&#39;scene.jpg&#39;</span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="4-fast">4. FAST ê²€ì¶œê¸°<a class="header-link" href="#4-fast" title="Permanent link">&para;</a></h2>
<h3 id="_9">ê°œë…<a class="header-link" href="#_9" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>FAST (Features from Accelerated Segment Test):
ë§¤ìš° ë¹ ë¥¸ ì½”ë„ˆ ê²€ì¶œ ì•Œê³ ë¦¬ì¦˜

ì›ë¦¬:
ì¤‘ì‹¬ í”½ì…€ P ì£¼ë³€ì˜ ì›í˜• íŒ¨í„´(16í”½ì…€) ê²€ì‚¬

        1  2  3
     16           4
   15               5
  14        P        6
   13               7
     12          8
        11 10 9

íŒë‹¨ ê¸°ì¤€ (N=12):
- ì—°ì†ëœ Nê°œ í”½ì…€ì´ Pë³´ë‹¤ ë°ìœ¼ë©´: ì½”ë„ˆ
- ì—°ì†ëœ Nê°œ í”½ì…€ì´ Pë³´ë‹¤ ì–´ë‘ìš°ë©´: ì½”ë„ˆ

íŠ¹ì§•:
- ë§¤ìš° ë¹ ë¦„ (ì‹¤ì‹œê°„ ì²˜ë¦¬)
- íšŒì „ ë¶ˆë³€ì„± ì—†ìŒ
- í¬ê¸° ë¶ˆë³€ì„± ì—†ìŒ
- ë¹„ìµœëŒ€ ì–µì œ(NMS)ë¡œ ë‹¤ì¤‘ ê²€ì¶œ ë°©ì§€
</code></pre></div>

<h3 id="cv2fastfeaturedetector">cv2.FastFeatureDetector<a class="header-link" href="#cv2fastfeaturedetector" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">fast_detection</span><span class="p">(</span><span class="n">image_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;FAST íŠ¹ì§•ì  ê²€ì¶œ&quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>

    <span class="c1"># FAST ê²€ì¶œê¸° ìƒì„±</span>
    <span class="n">fast</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">FastFeatureDetector_create</span><span class="p">(</span>
        <span class="n">threshold</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>           <span class="c1"># ë°ê¸° ì„ê³„ê°’</span>
        <span class="n">nonmaxSuppression</span><span class="o">=</span><span class="kc">True</span>  <span class="c1"># ë¹„ìµœëŒ€ ì–µì œ</span>
    <span class="p">)</span>

    <span class="c1"># íŠ¹ì§•ì  ê²€ì¶œ</span>
    <span class="n">keypoints</span> <span class="o">=</span> <span class="n">fast</span><span class="o">.</span><span class="n">detect</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="c1"># ê²°ê³¼ ê·¸ë¦¬ê¸°</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">drawKeypoints</span><span class="p">(</span>
        <span class="n">img</span><span class="p">,</span> <span class="n">keypoints</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="n">flags</span><span class="o">=</span><span class="n">cv2</span><span class="o">.</span><span class="n">DRAW_MATCHES_FLAGS_DRAW_RICH_KEYPOINTS</span>
    <span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ê²€ì¶œëœ íŠ¹ì§•ì  ìˆ˜: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">keypoints</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;FAST&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">keypoints</span>

<span class="n">fast_detection</span><span class="p">(</span><span class="s1">&#39;building.jpg&#39;</span><span class="p">)</span>
</code></pre></div>

<h3 id="fast">FAST íŒŒë¼ë¯¸í„° ë¹„êµ<a class="header-link" href="#fast" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="k">def</span><span class="w"> </span><span class="nf">compare_fast_thresholds</span><span class="p">(</span><span class="n">image_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;FAST ì„ê³„ê°’ ë¹„êµ&quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>

    <span class="n">thresholds</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">50</span><span class="p">]</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
    <span class="n">axes</span> <span class="o">=</span> <span class="n">axes</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">ax</span><span class="p">,</span> <span class="n">thresh</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">thresholds</span><span class="p">):</span>
        <span class="n">fast</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">FastFeatureDetector_create</span><span class="p">(</span>
            <span class="n">threshold</span><span class="o">=</span><span class="n">thresh</span><span class="p">,</span>
            <span class="n">nonmaxSuppression</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
        <span class="n">kps</span> <span class="o">=</span> <span class="n">fast</span><span class="o">.</span><span class="n">detect</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">drawKeypoints</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">kps</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2RGB</span><span class="p">))</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Threshold=</span><span class="si">{</span><span class="n">thresh</span><span class="si">}</span><span class="s1">, Points=</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">kps</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">compare_fast_thresholds</span><span class="p">(</span><span class="s1">&#39;building.jpg&#39;</span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="5-sift">5. SIFT ê²€ì¶œê¸°<a class="header-link" href="#5-sift" title="Permanent link">&para;</a></h2>
<h3 id="_10">ê°œë…<a class="header-link" href="#_10" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">SIFT</span><span class="w"> </span><span class="p">(</span><span class="n">Scale</span><span class="o">-</span><span class="n">Invariant</span><span class="w"> </span><span class="n">Feature</span><span class="w"> </span><span class="nb nb-Type">Transform</span><span class="p">):</span>
<span class="err">í¬ê¸°ì™€</span><span class="w"> </span><span class="err">íšŒì „ì—</span><span class="w"> </span><span class="err">ë¶ˆë³€í•œ</span><span class="w"> </span><span class="err">íŠ¹ì§•ì </span><span class="w"> </span><span class="err">ê²€ì¶œ</span><span class="w"> </span><span class="err">ë°</span><span class="w"> </span><span class="err">ê¸°ìˆ </span>

<span class="err">ë‹¨ê³„</span><span class="p">:</span>
<span class="mf">1.</span><span class="w"> </span><span class="err">ìŠ¤ì¼€ì¼</span><span class="w"> </span><span class="err">ê³µê°„</span><span class="w"> </span><span class="err">ê·¹ê°’</span><span class="w"> </span><span class="err">ê²€ì¶œ</span><span class="w"> </span><span class="p">(</span><span class="n">DoG</span><span class="p">:</span><span class="w"> </span><span class="n">Difference</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">Gaussians</span><span class="p">)</span>
<span class="mf">2.</span><span class="w"> </span><span class="err">í‚¤í¬ì¸íŠ¸</span><span class="w"> </span><span class="err">ì •ë°€í™”</span><span class="w"> </span><span class="p">(</span><span class="err">ì„œë¸Œí”½ì…€</span><span class="w"> </span><span class="err">ì •í™•ë„</span><span class="p">,</span><span class="w"> </span><span class="err">ì—£ì§€</span><span class="w"> </span><span class="err">ì œê±°</span><span class="p">)</span>
<span class="mf">3.</span><span class="w"> </span><span class="err">ë°©í–¥</span><span class="w"> </span><span class="err">í• ë‹¹</span><span class="w"> </span><span class="p">(</span><span class="err">ê·¸ë˜ë””ì–¸íŠ¸</span><span class="w"> </span><span class="err">íˆìŠ¤í† ê·¸ë¨</span><span class="p">)</span>
<span class="mf">4.</span><span class="w"> </span><span class="err">ë””ìŠ¤í¬ë¦½í„°</span><span class="w"> </span><span class="err">ê³„ì‚°</span><span class="w"> </span><span class="p">(</span><span class="mi">4</span><span class="n">x4</span><span class="w"> </span><span class="err">ê·¸ë¦¬ë“œ</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="mi">8</span><span class="err">ë°©í–¥</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">128</span><span class="err">ì°¨ì›</span><span class="p">)</span>

<span class="err">ìŠ¤ì¼€ì¼</span><span class="w"> </span><span class="err">ê³µê°„</span><span class="p">:</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Octave</span><span class="w"> </span><span class="mi">0</span><span class="w">    </span><span class="n">Octave</span><span class="w"> </span><span class="mi">1</span><span class="w">    </span><span class="n">Octave</span><span class="w"> </span><span class="mi">2</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">   </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”</span><span class="w">    </span><span class="err">â”Œâ”€â”€â”€â”</span><span class="w">                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">Ïƒ</span><span class="o">=</span><span class="mf">1.6</span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">Ïƒ</span><span class="o">=</span><span class="mf">1.6</span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚Ïƒ</span><span class="o">=</span><span class="mf">1.6</span><span class="err">â”‚</span><span class="w">  </span><span class="err">â†’</span><span class="w"> </span><span class="err">ìŠ¤ì¼€ì¼ë³„</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">Ïƒ</span><span class="o">=</span><span class="mf">2.0</span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">Ïƒ</span><span class="o">=</span><span class="mf">2.0</span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚Ïƒ</span><span class="o">=</span><span class="mf">2.0</span><span class="err">â”‚</span><span class="w">     </span><span class="err">ê°€ìš°ì‹œì•ˆ</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">Ïƒ</span><span class="o">=</span><span class="mf">2.5</span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">Ïƒ</span><span class="o">=</span><span class="mf">2.5</span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚Ïƒ</span><span class="o">=</span><span class="mf">2.5</span><span class="err">â”‚</span><span class="w">     </span><span class="err">ë¸”ëŸ¬</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w"> </span><span class="err">Ïƒ</span><span class="o">=</span><span class="mf">3.2</span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">Ïƒ</span><span class="o">=</span><span class="mf">3.2</span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚Ïƒ</span><span class="o">=</span><span class="mf">3.2</span><span class="err">â”‚</span><span class="w">                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">   </span><span class="err">â””â”€â”€â”€â”€â”€â”˜</span><span class="w">    </span><span class="err">â””â”€â”€â”€â”˜</span><span class="w">                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">ì›ë³¸</span><span class="w"> </span><span class="err">í¬ê¸°</span><span class="w">    </span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="w"> </span><span class="err">ì¶•ì†Œ</span><span class="w">   </span><span class="mi">1</span><span class="o">/</span><span class="mi">4</span><span class="w"> </span><span class="err">ì¶•ì†Œ</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="n">DoG</span><span class="w"> </span><span class="p">(</span><span class="n">Difference</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">Gaussians</span><span class="p">):</span>
<span class="n">D</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="err">Ïƒ</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">L</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">kÏƒ</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">L</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="err">Ïƒ</span><span class="p">)</span>
<span class="err">â†’</span><span class="w"> </span><span class="err">ì¸ì ‘í•œ</span><span class="w"> </span><span class="err">ìŠ¤ì¼€ì¼</span><span class="w"> </span><span class="err">ê°„ì˜</span><span class="w"> </span><span class="err">ì°¨ì´ë¡œ</span><span class="w"> </span><span class="err">ë¸”ë¡­</span><span class="w"> </span><span class="err">ê²€ì¶œ</span>
</code></pre></div>

<h3 id="cv2sift_create">cv2.SIFT_create()<a class="header-link" href="#cv2sift_create" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">sift_detection</span><span class="p">(</span><span class="n">image_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;SIFT íŠ¹ì§•ì  ê²€ì¶œ&quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>

    <span class="c1"># SIFT ê²€ì¶œê¸° ìƒì„±</span>
    <span class="n">sift</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">SIFT_create</span><span class="p">(</span>
        <span class="n">nfeatures</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>          <span class="c1"># ìµœëŒ€ íŠ¹ì§•ì  ìˆ˜ (0=ë¬´ì œí•œ)</span>
        <span class="n">nOctaveLayers</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>      <span class="c1"># ì˜¥íƒ€ë¸Œë‹¹ ë ˆì´ì–´ ìˆ˜</span>
        <span class="n">contrastThreshold</span><span class="o">=</span><span class="mf">0.04</span><span class="p">,</span>  <span class="c1"># ëŒ€ë¹„ ì„ê³„ê°’</span>
        <span class="n">edgeThreshold</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>     <span class="c1"># ì—£ì§€ ì„ê³„ê°’</span>
        <span class="n">sigma</span><span class="o">=</span><span class="mf">1.6</span>             <span class="c1"># ì´ˆê¸° ê°€ìš°ì‹œì•ˆ ì‹œê·¸ë§ˆ</span>
    <span class="p">)</span>

    <span class="c1"># íŠ¹ì§•ì ê³¼ ë””ìŠ¤í¬ë¦½í„° ê³„ì‚°</span>
    <span class="n">keypoints</span><span class="p">,</span> <span class="n">descriptors</span> <span class="o">=</span> <span class="n">sift</span><span class="o">.</span><span class="n">detectAndCompute</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="c1"># ê²°ê³¼ ê·¸ë¦¬ê¸°</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">drawKeypoints</span><span class="p">(</span>
        <span class="n">img</span><span class="p">,</span> <span class="n">keypoints</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">flags</span><span class="o">=</span><span class="n">cv2</span><span class="o">.</span><span class="n">DRAW_MATCHES_FLAGS_DRAW_RICH_KEYPOINTS</span>
    <span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ê²€ì¶œëœ íŠ¹ì§•ì  ìˆ˜: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">keypoints</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">descriptors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ë””ìŠ¤í¬ë¦½í„° í¬ê¸°: </span><span class="si">{</span><span class="n">descriptors</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;SIFT&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">keypoints</span><span class="p">,</span> <span class="n">descriptors</span>

<span class="n">kps</span><span class="p">,</span> <span class="n">descs</span> <span class="o">=</span> <span class="n">sift_detection</span><span class="p">(</span><span class="s1">&#39;object.jpg&#39;</span><span class="p">)</span>
</code></pre></div>

<h3 id="sift">SIFT í‚¤í¬ì¸íŠ¸ ë¶„ì„<a class="header-link" href="#sift" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">analyze_sift_keypoints</span><span class="p">(</span><span class="n">image_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;SIFT í‚¤í¬ì¸íŠ¸ ìƒì„¸ ë¶„ì„&quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>

    <span class="n">sift</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">SIFT_create</span><span class="p">()</span>
    <span class="n">keypoints</span><span class="p">,</span> <span class="n">descriptors</span> <span class="o">=</span> <span class="n">sift</span><span class="o">.</span><span class="n">detectAndCompute</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;SIFT í‚¤í¬ì¸íŠ¸ ë¶„ì„:&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">50</span><span class="p">)</span>

    <span class="c1"># í‚¤í¬ì¸íŠ¸ ì†ì„±</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">kp</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">keypoints</span><span class="p">[:</span><span class="mi">5</span><span class="p">]):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;í‚¤í¬ì¸íŠ¸ </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  ìœ„ì¹˜ (x, y): (</span><span class="si">{</span><span class="n">kp</span><span class="o">.</span><span class="n">pt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">kp</span><span class="o">.</span><span class="n">pt</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  í¬ê¸° (scale): </span><span class="si">{</span><span class="n">kp</span><span class="o">.</span><span class="n">size</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  ë°©í–¥ (angle): </span><span class="si">{</span><span class="n">kp</span><span class="o">.</span><span class="n">angle</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">ë„&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  ì‘ë‹µ (response): </span><span class="si">{</span><span class="n">kp</span><span class="o">.</span><span class="n">response</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  ì˜¥íƒ€ë¸Œ: </span><span class="si">{</span><span class="n">kp</span><span class="o">.</span><span class="n">octave</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># ìŠ¤ì¼€ì¼ ë¶„í¬</span>
    <span class="n">scales</span> <span class="o">=</span> <span class="p">[</span><span class="n">kp</span><span class="o">.</span><span class="n">size</span> <span class="k">for</span> <span class="n">kp</span> <span class="ow">in</span> <span class="n">keypoints</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ìŠ¤ì¼€ì¼ ë²”ìœ„: </span><span class="si">{</span><span class="nb">min</span><span class="p">(</span><span class="n">scales</span><span class="p">)</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> ~ </span><span class="si">{</span><span class="nb">max</span><span class="p">(</span><span class="n">scales</span><span class="p">)</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># ë””ìŠ¤í¬ë¦½í„° ë¶„ì„</span>
    <span class="k">if</span> <span class="n">descriptors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ë””ìŠ¤í¬ë¦½í„°:&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  ì°¨ì›: </span><span class="si">{</span><span class="n">descriptors</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  ê°’ ë²”ìœ„: </span><span class="si">{</span><span class="n">descriptors</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> ~ </span><span class="si">{</span><span class="n">descriptors</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">analyze_sift_keypoints</span><span class="p">(</span><span class="s1">&#39;object.jpg&#39;</span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="6-orb">6. ORB ê²€ì¶œê¸°<a class="header-link" href="#6-orb" title="Permanent link">&para;</a></h2>
<h3 id="_11">ê°œë…<a class="header-link" href="#_11" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nt">ORB</span><span class="w"> </span><span class="o">(</span><span class="nt">Oriented</span><span class="w"> </span><span class="nt">FAST</span><span class="w"> </span><span class="nt">and</span><span class="w"> </span><span class="nt">Rotated</span><span class="w"> </span><span class="nt">BRIEF</span><span class="o">):</span>
<span class="nt">FAST</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nt">BRIEFì˜</span><span class="w"> </span><span class="nt">ê°œì„ </span><span class="w"> </span><span class="nt">ë²„ì „</span><span class="o">,</span><span class="w"> </span><span class="nt">íŠ¹í—ˆ</span><span class="w"> </span><span class="nt">ë¬´ë£Œ</span>

<span class="nt">êµ¬ì„±</span><span class="o">:</span>
<span class="nt">1</span><span class="o">.</span><span class="w"> </span><span class="nt">oFAST</span><span class="o">:</span><span class="w"> </span><span class="nt">ë°©í–¥</span><span class="w"> </span><span class="nt">ì •ë³´ê°€</span><span class="w"> </span><span class="nt">ì¶”ê°€ëœ</span><span class="w"> </span><span class="nt">FAST</span>
<span class="w">   </span><span class="nt">-</span><span class="w"> </span><span class="nt">íšŒì „</span><span class="w"> </span><span class="nt">ë¶ˆë³€ì„±ì„</span><span class="w"> </span><span class="nt">ìœ„í•´</span><span class="w"> </span><span class="nt">ë°©í–¥</span><span class="o">(</span><span class="nt">orientation</span><span class="o">)</span><span class="w"> </span><span class="nt">ê³„ì‚°</span>
<span class="w">   </span><span class="nt">-</span><span class="w"> </span><span class="nt">ì´ë¯¸ì§€</span><span class="w"> </span><span class="nt">í”¼ë¼ë¯¸ë“œë¡œ</span><span class="w"> </span><span class="nt">ìŠ¤ì¼€ì¼</span><span class="w"> </span><span class="nt">ë¶ˆë³€ì„±</span>

<span class="nt">2</span><span class="o">.</span><span class="w"> </span><span class="nt">rBRIEF</span><span class="o">:</span><span class="w"> </span><span class="nt">íšŒì „ëœ</span><span class="w"> </span><span class="nt">BRIEF</span>
<span class="w">   </span><span class="nt">-</span><span class="w"> </span><span class="nt">BRIEF</span><span class="o">:</span><span class="w"> </span><span class="nt">ë°”ì´ë„ˆë¦¬</span><span class="w"> </span><span class="nt">ë””ìŠ¤í¬ë¦½í„°</span><span class="w"> </span><span class="o">(</span><span class="nt">256ë¹„íŠ¸</span><span class="o">)</span>
<span class="w">   </span><span class="nt">-</span><span class="w"> </span><span class="nt">í•™ìŠµëœ</span><span class="w"> </span><span class="nt">ë¹„êµ</span><span class="w"> </span><span class="nt">íŒ¨í„´ìœ¼ë¡œ</span><span class="w"> </span><span class="nt">êµ¬ë³„ë ¥</span><span class="w"> </span><span class="nt">í–¥ìƒ</span>
<span class="w">   </span><span class="nt">-</span><span class="w"> </span><span class="nt">Hamming</span><span class="w"> </span><span class="nt">ê±°ë¦¬ë¡œ</span><span class="w"> </span><span class="nt">ë¹ ë¥¸</span><span class="w"> </span><span class="nt">ë§¤ì¹­</span>

<span class="nt">íŠ¹ì§•</span><span class="o">:</span>
<span class="nt">-</span><span class="w"> </span><span class="nt">SIFT</span><span class="o">/</span><span class="nt">SURFë³´ë‹¤</span><span class="w"> </span><span class="nt">í›¨ì”¬</span><span class="w"> </span><span class="nt">ë¹ ë¦„</span>
<span class="nt">-</span><span class="w"> </span><span class="nt">íŠ¹í—ˆ</span><span class="w"> </span><span class="nt">ë¬´ë£Œ</span>
<span class="nt">-</span><span class="w"> </span><span class="nt">ì‹¤ì‹œê°„</span><span class="w"> </span><span class="nt">ì²˜ë¦¬ì—</span><span class="w"> </span><span class="nt">ì í•©</span>
<span class="nt">-</span><span class="w"> </span><span class="nt">ë°”ì´ë„ˆë¦¬</span><span class="w"> </span><span class="nt">ë””ìŠ¤í¬ë¦½í„°</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="nt">ë¹ ë¥¸</span><span class="w"> </span><span class="nt">ë§¤ì¹­</span>

<span class="nt">BRIEF</span><span class="w"> </span><span class="nt">ë””ìŠ¤í¬ë¦½í„°</span><span class="o">:</span>
<span class="nt">íŒ¨ì¹˜</span><span class="w"> </span><span class="nt">ë‚´</span><span class="w"> </span><span class="nt">ë‘</span><span class="w"> </span><span class="nt">ì ì˜</span><span class="w"> </span><span class="nt">ë°ê¸°</span><span class="w"> </span><span class="nt">ë¹„êµ</span>
<span class="nt">Ï„</span><span class="o">(</span><span class="nt">P</span><span class="o">;</span><span class="w"> </span><span class="nt">x</span><span class="o">,</span><span class="w"> </span><span class="nt">y</span><span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">1</span><span class="w"> </span><span class="err">if</span><span class="w"> </span><span class="err">P(x)</span><span class="w"> </span><span class="err">&lt;</span><span class="w"> </span><span class="err">P(y)</span>
<span class="w">             </span><span class="err">{</span><span class="w"> </span><span class="err">0</span><span class="w"> </span><span class="err">otherwise</span>
<span class="err">â†’</span><span class="w"> </span><span class="err">nê°œ</span><span class="w"> </span><span class="err">ë¹„êµë¡œ</span><span class="w"> </span><span class="err">në¹„íŠ¸</span><span class="w"> </span><span class="err">ë°”ì´ë„ˆë¦¬</span><span class="w"> </span><span class="err">ë¬¸ìì—´</span>
</code></pre></div>

<h3 id="cv2orb_create">cv2.ORB_create()<a class="header-link" href="#cv2orb_create" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">orb_detection</span><span class="p">(</span><span class="n">image_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ORB íŠ¹ì§•ì  ê²€ì¶œ&quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>

    <span class="c1"># ORB ê²€ì¶œê¸° ìƒì„±</span>
    <span class="n">orb</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">ORB_create</span><span class="p">(</span>
        <span class="n">nfeatures</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>        <span class="c1"># ìµœëŒ€ íŠ¹ì§•ì  ìˆ˜</span>
        <span class="n">scaleFactor</span><span class="o">=</span><span class="mf">1.2</span><span class="p">,</span>      <span class="c1"># í”¼ë¼ë¯¸ë“œ ìŠ¤ì¼€ì¼ íŒ©í„°</span>
        <span class="n">nlevels</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>            <span class="c1"># í”¼ë¼ë¯¸ë“œ ë ˆë²¨ ìˆ˜</span>
        <span class="n">edgeThreshold</span><span class="o">=</span><span class="mi">31</span><span class="p">,</span>     <span class="c1"># ì—£ì§€ ì„ê³„ê°’</span>
        <span class="n">firstLevel</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>         <span class="c1"># ì²« í”¼ë¼ë¯¸ë“œ ë ˆë²¨</span>
        <span class="n">WTA_K</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>              <span class="c1"># BRIEFì—ì„œ ë¹„êµí•  ì  ìˆ˜ (2, 3, 4)</span>
        <span class="n">scoreType</span><span class="o">=</span><span class="n">cv2</span><span class="o">.</span><span class="n">ORB_HARRIS_SCORE</span><span class="p">,</span>  <span class="c1"># ì ìˆ˜ ìœ í˜•</span>
        <span class="n">patchSize</span><span class="o">=</span><span class="mi">31</span><span class="p">,</span>         <span class="c1"># BRIEF íŒ¨ì¹˜ í¬ê¸°</span>
        <span class="n">fastThreshold</span><span class="o">=</span><span class="mi">20</span>      <span class="c1"># FAST ì„ê³„ê°’</span>
    <span class="p">)</span>

    <span class="c1"># íŠ¹ì§•ì ê³¼ ë””ìŠ¤í¬ë¦½í„° ê³„ì‚°</span>
    <span class="n">keypoints</span><span class="p">,</span> <span class="n">descriptors</span> <span class="o">=</span> <span class="n">orb</span><span class="o">.</span><span class="n">detectAndCompute</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="c1"># ê²°ê³¼ ê·¸ë¦¬ê¸°</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">drawKeypoints</span><span class="p">(</span>
        <span class="n">img</span><span class="p">,</span> <span class="n">keypoints</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="n">flags</span><span class="o">=</span><span class="n">cv2</span><span class="o">.</span><span class="n">DRAW_MATCHES_FLAGS_DRAW_RICH_KEYPOINTS</span>
    <span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ê²€ì¶œëœ íŠ¹ì§•ì  ìˆ˜: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">keypoints</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">descriptors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ë””ìŠ¤í¬ë¦½í„° í¬ê¸°: </span><span class="si">{</span><span class="n">descriptors</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ë””ìŠ¤í¬ë¦½í„° íƒ€ì…: </span><span class="si">{</span><span class="n">descriptors</span><span class="o">.</span><span class="n">dtype</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># uint8 (ë°”ì´ë„ˆë¦¬)</span>

    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;ORB&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">keypoints</span><span class="p">,</span> <span class="n">descriptors</span>

<span class="n">kps</span><span class="p">,</span> <span class="n">descs</span> <span class="o">=</span> <span class="n">orb_detection</span><span class="p">(</span><span class="s1">&#39;object.jpg&#39;</span><span class="p">)</span>
</code></pre></div>

<h3 id="sift-vs-orb">SIFT vs ORB ë¹„êµ<a class="header-link" href="#sift-vs-orb" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="k">def</span><span class="w"> </span><span class="nf">compare_sift_orb</span><span class="p">(</span><span class="n">image_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;SIFTì™€ ORB ì„±ëŠ¥ ë¹„êµ&quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>

    <span class="c1"># SIFT</span>
    <span class="n">sift</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">SIFT_create</span><span class="p">()</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">kps_sift</span><span class="p">,</span> <span class="n">descs_sift</span> <span class="o">=</span> <span class="n">sift</span><span class="o">.</span><span class="n">detectAndCompute</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">sift_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>

    <span class="c1"># ORB</span>
    <span class="n">orb</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">ORB_create</span><span class="p">(</span><span class="n">nfeatures</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">kps_sift</span><span class="p">))</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">kps_orb</span><span class="p">,</span> <span class="n">descs_orb</span> <span class="o">=</span> <span class="n">orb</span><span class="o">.</span><span class="n">detectAndCompute</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">orb_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ì„±ëŠ¥ ë¹„êµ:&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">50</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SIFT: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">kps_sift</span><span class="p">)</span><span class="si">}</span><span class="s2"> points, </span><span class="si">{</span><span class="n">sift_time</span><span class="o">*</span><span class="mi">1000</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">ms&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ORB:  </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">kps_orb</span><span class="p">)</span><span class="si">}</span><span class="s2"> points, </span><span class="si">{</span><span class="n">orb_time</span><span class="o">*</span><span class="mi">1000</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">ms&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ì†ë„ ë¹„ìœ¨: ORBê°€ </span><span class="si">{</span><span class="n">sift_time</span><span class="o">/</span><span class="n">orb_time</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">ë°° ë¹ ë¦„&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">descs_sift</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">descs_orb</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">SIFT ë””ìŠ¤í¬ë¦½í„°: </span><span class="si">{</span><span class="n">descs_sift</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">descs_sift</span><span class="o">.</span><span class="n">dtype</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ORB ë””ìŠ¤í¬ë¦½í„°: </span><span class="si">{</span><span class="n">descs_orb</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">descs_orb</span><span class="o">.</span><span class="n">dtype</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># ì‹œê°í™”</span>
    <span class="n">result_sift</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">drawKeypoints</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">kps_sift</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="n">result_orb</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">drawKeypoints</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">kps_orb</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">))</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>

    <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">result_sift</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2RGB</span><span class="p">))</span>
    <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;SIFT: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">kps_sift</span><span class="p">)</span><span class="si">}</span><span class="s1"> points&#39;</span><span class="p">)</span>
    <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

    <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">result_orb</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2RGB</span><span class="p">))</span>
    <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;ORB: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">kps_orb</span><span class="p">)</span><span class="si">}</span><span class="s1"> points&#39;</span><span class="p">)</span>
    <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">compare_sift_orb</span><span class="p">(</span><span class="s1">&#39;object.jpg&#39;</span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="7">7. í‚¤í¬ì¸íŠ¸ì™€ ë””ìŠ¤í¬ë¦½í„°<a class="header-link" href="#7" title="Permanent link">&para;</a></h2>
<h3 id="keypoint">KeyPoint êµ¬ì¡°<a class="header-link" href="#keypoint" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">keypoint_structure</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;í‚¤í¬ì¸íŠ¸ êµ¬ì¡° ì´í•´&quot;&quot;&quot;</span>
    <span class="c1"># í‚¤í¬ì¸íŠ¸ ìˆ˜ë™ ìƒì„±</span>
    <span class="n">kp</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">KeyPoint</span><span class="p">(</span>
        <span class="n">x</span><span class="o">=</span><span class="mf">100.5</span><span class="p">,</span>        <span class="c1"># x ì¢Œí‘œ</span>
        <span class="n">y</span><span class="o">=</span><span class="mf">200.5</span><span class="p">,</span>        <span class="c1"># y ì¢Œí‘œ</span>
        <span class="n">size</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>        <span class="c1"># íŠ¹ì§•ì  í¬ê¸° (ì§ê²½)</span>
        <span class="n">angle</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span>       <span class="c1"># ë°©í–¥ (ë„)</span>
        <span class="n">response</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>   <span class="c1"># ì‘ë‹µ ê°•ë„</span>
        <span class="n">octave</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>       <span class="c1"># ì˜¥íƒ€ë¸Œ (ìŠ¤ì¼€ì¼)</span>
        <span class="n">class_id</span><span class="o">=-</span><span class="mi">1</span>     <span class="c1"># ë¶„ë¥˜ ID</span>
    <span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;KeyPoint ì†ì„±:&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  ìœ„ì¹˜: (</span><span class="si">{</span><span class="n">kp</span><span class="o">.</span><span class="n">pt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">kp</span><span class="o">.</span><span class="n">pt</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  í¬ê¸°: </span><span class="si">{</span><span class="n">kp</span><span class="o">.</span><span class="n">size</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  ë°©í–¥: </span><span class="si">{</span><span class="n">kp</span><span class="o">.</span><span class="n">angle</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  ì‘ë‹µ: </span><span class="si">{</span><span class="n">kp</span><span class="o">.</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  ì˜¥íƒ€ë¸Œ: </span><span class="si">{</span><span class="n">kp</span><span class="o">.</span><span class="n">octave</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  í´ë˜ìŠ¤ ID: </span><span class="si">{</span><span class="n">kp</span><span class="o">.</span><span class="n">class_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">keypoint_structure</span><span class="p">()</span>
</code></pre></div>

<h3 id="_12">ë””ìŠ¤í¬ë¦½í„° ì´í•´<a class="header-link" href="#_12" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="k">def</span><span class="w"> </span><span class="nf">visualize_descriptors</span><span class="p">(</span><span class="n">image_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ë””ìŠ¤í¬ë¦½í„° ì‹œê°í™”&quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_path</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">IMREAD_GRAYSCALE</span><span class="p">)</span>

    <span class="c1"># SIFT ë””ìŠ¤í¬ë¦½í„° (128ì°¨ì› float)</span>
    <span class="n">sift</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">SIFT_create</span><span class="p">()</span>
    <span class="n">kps_sift</span><span class="p">,</span> <span class="n">descs_sift</span> <span class="o">=</span> <span class="n">sift</span><span class="o">.</span><span class="n">detectAndCompute</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="c1"># ORB ë””ìŠ¤í¬ë¦½í„° (32ë°”ì´íŠ¸ = 256ë¹„íŠ¸)</span>
    <span class="n">orb</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">ORB_create</span><span class="p">()</span>
    <span class="n">kps_orb</span><span class="p">,</span> <span class="n">descs_orb</span> <span class="o">=</span> <span class="n">orb</span><span class="o">.</span><span class="n">detectAndCompute</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

    <span class="c1"># SIFT ë””ìŠ¤í¬ë¦½í„° íˆìŠ¤í† ê·¸ë¨</span>
    <span class="k">if</span> <span class="n">descs_sift</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">descs_sift</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">128</span><span class="p">),</span> <span class="n">descs_sift</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;SIFT Descriptor (128D)&#39;</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Dimension&#39;</span><span class="p">)</span>

        <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">descs_sift</span><span class="p">[:</span><span class="mi">50</span><span class="p">],</span> <span class="n">aspect</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;viridis&#39;</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;SIFT Descriptors (first 50)&#39;</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Dimension&#39;</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Keypoint&#39;</span><span class="p">)</span>

    <span class="c1"># ORB ë””ìŠ¤í¬ë¦½í„° (ë°”ì´ë„ˆë¦¬)</span>
    <span class="k">if</span> <span class="n">descs_orb</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">descs_orb</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># ë°”ì´ë„ˆë¦¬ë¥¼ ë¹„íŠ¸ë¡œ ë³€í™˜</span>
        <span class="n">bits</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unpackbits</span><span class="p">(</span><span class="n">descs_orb</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">256</span><span class="p">),</span> <span class="n">bits</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;ORB Descriptor (256 bits)&#39;</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Bit&#39;</span><span class="p">)</span>

        <span class="c1"># ì—¬ëŸ¬ ë””ìŠ¤í¬ë¦½í„°</span>
        <span class="n">bits_all</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unpackbits</span><span class="p">(</span><span class="n">descs_orb</span><span class="p">[:</span><span class="mi">50</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">bits_all</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;binary&#39;</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;ORB Descriptors (first 50)&#39;</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Bit&#39;</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Keypoint&#39;</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">visualize_descriptors</span><span class="p">(</span><span class="s1">&#39;object.jpg&#39;</span><span class="p">)</span>
</code></pre></div>

<h3 id="_13">ë‹¤ì–‘í•œ ê²€ì¶œê¸° ì‚¬ìš©<a class="header-link" href="#_13" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">use_various_detectors</span><span class="p">(</span><span class="n">image_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ë‹¤ì–‘í•œ íŠ¹ì§•ì  ê²€ì¶œê¸° ì‚¬ìš©&quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>

    <span class="n">detectors</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;SIFT&#39;</span><span class="p">:</span> <span class="n">cv2</span><span class="o">.</span><span class="n">SIFT_create</span><span class="p">(),</span>
        <span class="s1">&#39;ORB&#39;</span><span class="p">:</span> <span class="n">cv2</span><span class="o">.</span><span class="n">ORB_create</span><span class="p">(),</span>
        <span class="s1">&#39;BRISK&#39;</span><span class="p">:</span> <span class="n">cv2</span><span class="o">.</span><span class="n">BRISK_create</span><span class="p">(),</span>
        <span class="s1">&#39;AKAZE&#39;</span><span class="p">:</span> <span class="n">cv2</span><span class="o">.</span><span class="n">AKAZE_create</span><span class="p">(),</span>
        <span class="c1"># &#39;KAZE&#39;: cv2.KAZE_create(),  # ëŠë¦¼</span>
    <span class="p">}</span>

    <span class="n">results</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">detector</span> <span class="ow">in</span> <span class="n">detectors</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">kps</span><span class="p">,</span> <span class="n">descs</span> <span class="o">=</span> <span class="n">detector</span><span class="o">.</span><span class="n">detectAndCompute</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">results</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;keypoints&#39;</span><span class="p">:</span> <span class="n">kps</span><span class="p">,</span>
            <span class="s1">&#39;descriptors&#39;</span><span class="p">:</span> <span class="n">descs</span><span class="p">,</span>
            <span class="s1">&#39;count&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">kps</span><span class="p">),</span>
            <span class="s1">&#39;desc_size&#39;</span><span class="p">:</span> <span class="n">descs</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="n">descs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="p">}</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  íŠ¹ì§•ì  ìˆ˜: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">kps</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">descs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  ë””ìŠ¤í¬ë¦½í„°: </span><span class="si">{</span><span class="n">descs</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">descs</span><span class="o">.</span><span class="n">dtype</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">results</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">use_various_detectors</span><span class="p">(</span><span class="s1">&#39;object.jpg&#39;</span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="8">8. ì—°ìŠµ ë¬¸ì œ<a class="header-link" href="#8" title="Permanent link">&para;</a></h2>
<h3 id="1_1">ë¬¸ì œ 1: ìµœì  íŠ¹ì§•ì  ì„ íƒ<a class="header-link" href="#1_1" title="Permanent link">&para;</a></h3>
<p>ì´ë¯¸ì§€ì—ì„œ ê°€ì¥ ê°•í•œ 50ê°œì˜ íŠ¹ì§•ì ë§Œ ì„ íƒí•˜ì„¸ìš”.</p>
<details>
<summary>ì •ë‹µ ì½”ë“œ</summary>


<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">select_best_keypoints</span><span class="p">(</span><span class="n">image_path</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">50</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ê°€ì¥ ê°•í•œ Nê°œì˜ íŠ¹ì§•ì  ì„ íƒ&quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>

    <span class="c1"># ORBë¡œ íŠ¹ì§•ì  ê²€ì¶œ (ë§ì´ ê²€ì¶œ)</span>
    <span class="n">orb</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">ORB_create</span><span class="p">(</span><span class="n">nfeatures</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
    <span class="n">keypoints</span><span class="p">,</span> <span class="n">descriptors</span> <span class="o">=</span> <span class="n">orb</span><span class="o">.</span><span class="n">detectAndCompute</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="c1"># ì‘ë‹µ ê°•ë„ë¡œ ì •ë ¬</span>
    <span class="n">keypoints_sorted</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">keypoints</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">response</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># ìƒìœ„ Nê°œ ì„ íƒ</span>
    <span class="n">best_keypoints</span> <span class="o">=</span> <span class="n">keypoints_sorted</span><span class="p">[:</span><span class="n">n</span><span class="p">]</span>

    <span class="c1"># í•´ë‹¹ ë””ìŠ¤í¬ë¦½í„°ë„ ì„ íƒ</span>
    <span class="n">indices</span> <span class="o">=</span> <span class="p">[</span><span class="n">keypoints</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">kp</span><span class="p">)</span> <span class="k">for</span> <span class="n">kp</span> <span class="ow">in</span> <span class="n">best_keypoints</span><span class="p">]</span>
    <span class="n">best_descriptors</span> <span class="o">=</span> <span class="n">descriptors</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span> <span class="k">if</span> <span class="n">descriptors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">drawKeypoints</span><span class="p">(</span>
        <span class="n">img</span><span class="p">,</span> <span class="n">best_keypoints</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="n">flags</span><span class="o">=</span><span class="n">cv2</span><span class="o">.</span><span class="n">DRAW_MATCHES_FLAGS_DRAW_RICH_KEYPOINTS</span>
    <span class="p">)</span>

    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Best </span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s1"> Keypoints&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">best_keypoints</span><span class="p">,</span> <span class="n">best_descriptors</span>

<span class="n">kps</span><span class="p">,</span> <span class="n">descs</span> <span class="o">=</span> <span class="n">select_best_keypoints</span><span class="p">(</span><span class="s1">&#39;building.jpg&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
</code></pre></div>



</details>

<h3 id="2">ë¬¸ì œ 2: ê· ì¼ ë¶„í¬ íŠ¹ì§•ì <a class="header-link" href="#2" title="Permanent link">&para;</a></h3>
<p>ì´ë¯¸ì§€ë¥¼ ê·¸ë¦¬ë“œë¡œ ë‚˜ëˆ„ì–´ ê° ì…€ì—ì„œ í•˜ë‚˜ì”© íŠ¹ì§•ì ì„ ì„ íƒí•˜ì„¸ìš”.</p>
<details>
<summary>ì •ë‹µ ì½”ë“œ</summary>


<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">uniform_keypoints</span><span class="p">(</span><span class="n">image_path</span><span class="p">,</span> <span class="n">grid_size</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">)):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ê·¸ë¦¬ë“œë³„ë¡œ ê· ì¼í•˜ê²Œ íŠ¹ì§•ì  ì„ íƒ&quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>
    <span class="n">h</span><span class="p">,</span> <span class="n">w</span> <span class="o">=</span> <span class="n">gray</span><span class="o">.</span><span class="n">shape</span>

    <span class="n">orb</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">ORB_create</span><span class="p">(</span><span class="n">nfeatures</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
    <span class="n">keypoints</span><span class="p">,</span> <span class="n">descriptors</span> <span class="o">=</span> <span class="n">orb</span><span class="o">.</span><span class="n">detectAndCompute</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="c1"># ê·¸ë¦¬ë“œ í¬ê¸° ê³„ì‚°</span>
    <span class="n">cell_h</span> <span class="o">=</span> <span class="n">h</span> <span class="o">//</span> <span class="n">grid_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">cell_w</span> <span class="o">=</span> <span class="n">w</span> <span class="o">//</span> <span class="n">grid_size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="c1"># ê° ì…€ë³„ë¡œ ê°€ì¥ ê°•í•œ íŠ¹ì§•ì  ì„ íƒ</span>
    <span class="n">selected_kps</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">selected_indices</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">grid_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">grid_size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
            <span class="c1"># ì…€ ì˜ì—­</span>
            <span class="n">x_min</span> <span class="o">=</span> <span class="n">col</span> <span class="o">*</span> <span class="n">cell_w</span>
            <span class="n">x_max</span> <span class="o">=</span> <span class="p">(</span><span class="n">col</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">cell_w</span>
            <span class="n">y_min</span> <span class="o">=</span> <span class="n">row</span> <span class="o">*</span> <span class="n">cell_h</span>
            <span class="n">y_max</span> <span class="o">=</span> <span class="p">(</span><span class="n">row</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">cell_h</span>

            <span class="c1"># ì…€ ë‚´ì˜ íŠ¹ì§•ì  í•„í„°ë§</span>
            <span class="n">cell_kps</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">kp</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">keypoints</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">x_min</span> <span class="o">&lt;=</span> <span class="n">kp</span><span class="o">.</span><span class="n">pt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">x_max</span> <span class="ow">and</span> <span class="n">y_min</span> <span class="o">&lt;=</span> <span class="n">kp</span><span class="o">.</span><span class="n">pt</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">y_max</span><span class="p">:</span>
                    <span class="n">cell_kps</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">kp</span><span class="p">))</span>

            <span class="k">if</span> <span class="n">cell_kps</span><span class="p">:</span>
                <span class="c1"># ê°€ì¥ ê°•í•œ íŠ¹ì§•ì  ì„ íƒ</span>
                <span class="n">best_idx</span><span class="p">,</span> <span class="n">best_kp</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">cell_kps</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">response</span><span class="p">)</span>
                <span class="n">selected_kps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">best_kp</span><span class="p">)</span>
                <span class="n">selected_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">best_idx</span><span class="p">)</span>

    <span class="c1"># ë””ìŠ¤í¬ë¦½í„°</span>
    <span class="n">selected_descs</span> <span class="o">=</span> <span class="n">descriptors</span><span class="p">[</span><span class="n">selected_indices</span><span class="p">]</span> <span class="k">if</span> <span class="n">descriptors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">drawKeypoints</span><span class="p">(</span>
        <span class="n">img</span><span class="p">,</span> <span class="n">selected_kps</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="n">flags</span><span class="o">=</span><span class="n">cv2</span><span class="o">.</span><span class="n">DRAW_MATCHES_FLAGS_DRAW_RICH_KEYPOINTS</span>
    <span class="p">)</span>

    <span class="c1"># ê·¸ë¦¬ë“œ í‘œì‹œ</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">grid_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span> <span class="o">*</span> <span class="n">cell_h</span><span class="p">),</span> <span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">row</span> <span class="o">*</span> <span class="n">cell_h</span><span class="p">),</span> <span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">grid_size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">col</span> <span class="o">*</span> <span class="n">cell_w</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="n">col</span> <span class="o">*</span> <span class="n">cell_w</span><span class="p">,</span> <span class="n">h</span><span class="p">),</span> <span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>

    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Uniform Keypoints&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">selected_kps</span><span class="p">,</span> <span class="n">selected_descs</span>

<span class="n">kps</span><span class="p">,</span> <span class="n">descs</span> <span class="o">=</span> <span class="n">uniform_keypoints</span><span class="p">(</span><span class="s1">&#39;building.jpg&#39;</span><span class="p">,</span> <span class="n">grid_size</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
</code></pre></div>



</details>

<h3 id="3">ë¬¸ì œ 3: íšŒì „ ë¶ˆë³€ì„± í…ŒìŠ¤íŠ¸<a class="header-link" href="#3" title="Permanent link">&para;</a></h3>
<p>ì´ë¯¸ì§€ë¥¼ íšŒì „ì‹œí‚¨ í›„ ë™ì¼í•œ íŠ¹ì§•ì ì´ ê²€ì¶œë˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.</p>
<details>
<summary>ì •ë‹µ ì½”ë“œ</summary>


<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_rotation_invariance</span><span class="p">(</span><span class="n">image_path</span><span class="p">,</span> <span class="n">angle</span><span class="o">=</span><span class="mi">45</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;íšŒì „ ë¶ˆë³€ì„± í…ŒìŠ¤íŠ¸&quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>
    <span class="n">h</span><span class="p">,</span> <span class="n">w</span> <span class="o">=</span> <span class="n">gray</span><span class="o">.</span><span class="n">shape</span>

    <span class="c1"># ì´ë¯¸ì§€ íšŒì „</span>
    <span class="n">center</span> <span class="o">=</span> <span class="p">(</span><span class="n">w</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">h</span> <span class="o">//</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">M</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">getRotationMatrix2D</span><span class="p">(</span><span class="n">center</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="n">rotated</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">warpAffine</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="n">M</span><span class="p">,</span> <span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">))</span>

    <span class="c1"># SIFT (íšŒì „ ë¶ˆë³€)</span>
    <span class="n">sift</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">SIFT_create</span><span class="p">(</span><span class="n">nfeatures</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

    <span class="n">kps1</span><span class="p">,</span> <span class="n">descs1</span> <span class="o">=</span> <span class="n">sift</span><span class="o">.</span><span class="n">detectAndCompute</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">kps2</span><span class="p">,</span> <span class="n">descs2</span> <span class="o">=</span> <span class="n">sift</span><span class="o">.</span><span class="n">detectAndCompute</span><span class="p">(</span><span class="n">rotated</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="c1"># íŠ¹ì§•ì  ë§¤ì¹­</span>
    <span class="n">bf</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">BFMatcher</span><span class="p">()</span>
    <span class="n">matches</span> <span class="o">=</span> <span class="n">bf</span><span class="o">.</span><span class="n">knnMatch</span><span class="p">(</span><span class="n">descs1</span><span class="p">,</span> <span class="n">descs2</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="c1"># ì¢‹ì€ ë§¤ì¹­ í•„í„°ë§ (Lowe&#39;s ratio test)</span>
    <span class="n">good_matches</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">m</span><span class="p">,</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">matches</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">distance</span> <span class="o">&lt;</span> <span class="mf">0.75</span> <span class="o">*</span> <span class="n">n</span><span class="o">.</span><span class="n">distance</span><span class="p">:</span>
            <span class="n">good_matches</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ì›ë³¸ íŠ¹ì§•ì : </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">kps1</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;íšŒì „ ì´ë¯¸ì§€ íŠ¹ì§•ì : </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">kps2</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ë§¤ì¹­ëœ íŠ¹ì§•ì : </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">good_matches</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ë§¤ì¹­ë¥ : </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">good_matches</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="n">kps1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">100</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>

    <span class="c1"># ì‹œê°í™”</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">drawMatches</span><span class="p">(</span>
        <span class="n">gray</span><span class="p">,</span> <span class="n">kps1</span><span class="p">,</span> <span class="n">rotated</span><span class="p">,</span> <span class="n">kps2</span><span class="p">,</span>
        <span class="n">good_matches</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">flags</span><span class="o">=</span><span class="n">cv2</span><span class="o">.</span><span class="n">DRAW_MATCHES_FLAGS_NOT_DRAW_SINGLE_POINTS</span>
    <span class="p">)</span>

    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Rotation Invariance Test&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">test_rotation_invariance</span><span class="p">(</span><span class="s1">&#39;object.jpg&#39;</span><span class="p">,</span> <span class="n">angle</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</code></pre></div>



</details>

<h3 id="_14">ì¶”ì²œ ë¬¸ì œ<a class="header-link" href="#_14" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>ë‚œì´ë„</th>
<th>ì£¼ì œ</th>
<th>ì„¤ëª…</th>
</tr>
</thead>
<tbody>
<tr>
<td>â­</td>
<td>ê¸°ë³¸ ê²€ì¶œ</td>
<td>Harris, FAST, ORB ë¹„êµ</td>
</tr>
<tr>
<td>â­â­</td>
<td>ì„±ëŠ¥ ë¹„êµ</td>
<td>ê²€ì¶œ ì†ë„ì™€ ê°œìˆ˜ ë¹„êµ</td>
</tr>
<tr>
<td>â­â­</td>
<td>íŒŒë¼ë¯¸í„° íŠœë‹</td>
<td>ìµœì  íŒŒë¼ë¯¸í„° ì°¾ê¸°</td>
</tr>
<tr>
<td>â­â­â­</td>
<td>ìŠ¤ì¼€ì¼ ë¶ˆë³€ì„±</td>
<td>í¬ê¸° ë³€í™”ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸</td>
</tr>
<tr>
<td>â­â­â­</td>
<td>ì‹¤ì‹œê°„ ê²€ì¶œ</td>
<td>ì›¹ìº ìœ¼ë¡œ ì‹¤ì‹œê°„ íŠ¹ì§•ì  í‘œì‹œ</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="_15">ë‹¤ìŒ ë‹¨ê³„<a class="header-link" href="#_15" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="./14_Feature_Matching.md">14_Feature_Matching.md</a> - BFMatcher, FLANN, Homography</li>
</ul>
<hr />
<h2 id="_16">ì°¸ê³  ìë£Œ<a class="header-link" href="#_16" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://docs.opencv.org/4.x/db/d27/tutorial_py_table_of_contents_feature2d.html">OpenCV Feature Detection</a></li>
<li><a href="https://www.cs.ubc.ca/~lowe/papers/ijcv04.pdf">SIFT Paper</a></li>
<li><a href="https://www.willowgarage.com/sites/default/files/orb_final.pdf">ORB Paper</a></li>
</ul>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/ko/Computer_Vision/12_Histogram_Analysis.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">íˆìŠ¤í† ê·¸ë¨ ë¶„ì„ (Histogram Analysis)</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/ko/Computer_Vision/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/ko/Computer_Vision/14_Feature_Matching.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">íŠ¹ì§•ì  ë§¤ì¹­ (Feature Matching)</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">â†‘</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'ko';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}