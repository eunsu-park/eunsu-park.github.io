{% raw %}
<!DOCTYPE html>
<html lang="ko" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>λ¶„μ‚° λ°μ΄ν„°λ² μ΄μ¤ - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/ko/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/ko/" class="nav-item ">
                    <span class="nav-icon">π </span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">π’»</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/ko/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" >
                        English
                    </option>
                    
                    <option value="ko" selected>
                        ν•κµ­μ–΄
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">β€οΈ</span>
                    <span class="theme-icon dark">π™</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/ko/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/ko/Database_Theory/">Database Theory</a>
    <span class="separator">/</span>
    <span class="current">λ¶„μ‚° λ°μ΄ν„°λ² μ΄μ¤</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>λ¶„μ‚° λ°μ΄ν„°λ² μ΄μ¤</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/ko/Database_Theory/13_NoSQL_Data_Models.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">NoSQL λ°μ΄ν„° λ¨λΈ</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">π”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/ko/Database_Theory/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">π“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/ko/Database_Theory/15_NewSQL_and_Modern_Trends.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">NewSQLκ³Ό ν„λ€ νΈλ λ“</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#_2">λ©μ°¨</a></li>
<li><a href="#1">1. λ¶„μ‚° λ°μ΄ν„°λ² μ΄μ¤ μ•„ν‚¤ν…μ²</a><ul>
<li><a href="#11-shared-nothing">1.1 Shared-Nothing μ•„ν‚¤ν…μ²</a></li>
<li><a href="#12-shared-disk">1.2 Shared-Disk μ•„ν‚¤ν…μ²</a></li>
<li><a href="#13-shared-memory-smp">1.3 Shared-Memory μ•„ν‚¤ν…μ² (SMP)</a></li>
<li><a href="#14">1.4 μ•„ν‚¤ν…μ² λΉ„κµ</a></li>
</ul>
</li>
<li><a href="#2">2. λ°μ΄ν„° λ‹¨νΈν™”</a><ul>
<li><a href="#21">2.1 μν‰ λ‹¨νΈν™”</a></li>
<li><a href="#22">2.2 μμ§ λ‹¨νΈν™”</a></li>
<li><a href="#23">2.3 ν•μ΄λΈλ¦¬λ“ λ‹¨νΈν™”</a></li>
<li><a href="#24">2.4 λ‹¨νΈν™” ν¬λ…μ„±</a></li>
</ul>
</li>
<li><a href="#3">3. λ°μ΄ν„° λ³µμ </a><ul>
<li><a href="#31">3.1 λ³µμ  ν† ν΄λ΅μ§€</a></li>
<li><a href="#32-vs">3.2 λ™κΈ° vs λΉ„λ™κΈ° λ³µμ </a></li>
<li><a href="#33">3.3 μΏΌλΌ κΈ°λ° λ³µμ </a></li>
<li><a href="#34">3.4 μ¶©λ ν•΄κ²°</a></li>
</ul>
</li>
<li><a href="#4">4. λ¶„μ‚° μΏΌλ¦¬ μ²λ¦¬</a><ul>
<li><a href="#41">4.1 κ°μ”</a></li>
<li><a href="#42">4.2 μΏΌλ¦¬ λ¶„ν•΄</a></li>
<li><a href="#43">4.3 λΉ„μ© μ”μ†</a></li>
<li><a href="#44">4.4 λ¶„μ‚° μ΅°μΈ μ „λµ</a></li>
</ul>
</li>
<li><a href="#5-two-phase-commit-2pc">5. λ¶„μ‚° νΈλμ­μ…: Two-Phase Commit (2PC)</a><ul>
<li><a href="#51">5.1 λ¬Έμ </a></li>
<li><a href="#52-two-phase-commit">5.2 Two-Phase Commit ν”„λ΅ν† μ½</a></li>
<li><a href="#53">5.3 μƒνƒ κΈ°κ³„</a></li>
<li><a href="#54">5.4 μ¥μ•  λ¶„μ„</a></li>
<li><a href="#55">5.5 μµμ ν™”</a></li>
</ul>
</li>
<li><a href="#6-three-phase-commit-3pc">6. Three-Phase Commit (3PC)</a><ul>
<li><a href="#61">6.1 λ™κΈ°</a></li>
<li><a href="#62">6.2 ν”„λ΅ν† μ½</a></li>
<li><a href="#63-3pc">6.3 3PCκ°€ μ°¨λ‹¨μ„ ν”Όν•λ” λ°©λ²•</a></li>
<li><a href="#64-3pc">6.4 3PCμ ν•κ³„</a></li>
<li><a href="#65-2pc-vs-3pc">6.5 λΉ„κµ: 2PC vs 3PC</a></li>
</ul>
</li>
<li><a href="#7-paxos-raft">7. ν•©μ μ•κ³ λ¦¬μ¦: Paxosμ™€ Raft</a><ul>
<li><a href="#71">7.1 ν•©μ λ¬Έμ </a></li>
<li><a href="#72-paxos">7.2 Paxos</a></li>
<li><a href="#73-raft">7.3 Raft</a></li>
<li><a href="#74-paxos-vs-raft">7.4 Paxos vs Raft</a></li>
<li><a href="#75">7.5 λ°μ΄ν„°λ² μ΄μ¤μ ν•©μ</a></li>
</ul>
</li>
<li><a href="#8">8. λ¶„μ‚° λ™μ‹μ„± μ μ–΄</a><ul>
<li><a href="#81">8.1 κ³Όμ </a></li>
<li><a href="#82-two-phase-locking-d2pl">8.2 λ¶„μ‚° Two-Phase Locking (D2PL)</a></li>
<li><a href="#83">8.3 λ¶„μ‚° κµμ°© μƒνƒ κ°μ§€</a></li>
<li><a href="#84-timestamp-ordering">8.4 λ¶„μ‚° Timestamp Ordering</a></li>
<li><a href="#85-mvcc">8.5 λ¶„μ‚° MVCC</a></li>
</ul>
</li>
<li><a href="#9-cap">9. λ¶„μ‚° μ„¤κ³„λ¥Ό μ„ν• CAP μ •λ¦¬μ ν•¨μ</a><ul>
<li><a href="#91-cap">9.1 μ„¤κ³„ λ§¥λ½μ—μ„ CAP μ¬κ²€ν† </a></li>
<li><a href="#92-cp">9.2 CP μ„¤κ³„ ν¨ν„΄</a></li>
<li><a href="#93-ap">9.3 AP μ„¤κ³„ ν¨ν„΄</a></li>
<li><a href="#94">9.4 μΌκ΄€μ„± μμ¤€ μ΅°μ •</a></li>
</ul>
</li>
<li><a href="#10">10. νν‹°μ…”λ‹ μ „λµ</a><ul>
<li><a href="#101">10.1 λ²”μ„ νν‹°μ…”λ‹</a></li>
<li><a href="#102">10.2 ν•΄μ‹ νν‹°μ…”λ‹</a></li>
<li><a href="#103">10.3 μΌκ΄€λ ν•΄μ‹±</a></li>
<li><a href="#104">10.4 νν‹°μ…”λ‹ λΉ„κµ</a></li>
<li><a href="#105">10.5 λ³µν•© νν‹°μ…”λ‹</a></li>
</ul>
</li>
<li><a href="#11">11. μ—°μµλ¬Έμ </a><ul>
<li><a href="#1_1">μ—°μµλ¬Έμ  1: μ•„ν‚¤ν…μ² μ„ νƒ</a></li>
<li><a href="#2_1">μ—°μµλ¬Έμ  2: λ‹¨νΈν™” μ„¤κ³„</a></li>
<li><a href="#3_1">μ—°μµλ¬Έμ  3: μΏΌλΌ κ³„μ‚°</a></li>
<li><a href="#4-2pc">μ—°μµλ¬Έμ  4: 2PC μ¶”μ </a></li>
<li><a href="#5">μ—°μµλ¬Έμ  5: ν•©μ μ‹λ‚λ¦¬μ¤</a></li>
<li><a href="#6">μ—°μµλ¬Έμ  6: λ¶„μ‚° κµμ°© μƒνƒ</a></li>
<li><a href="#7">μ—°μµλ¬Έμ  7: νν‹°μ…”λ‹ μ „λµ</a></li>
<li><a href="#8_1">μ—°μµλ¬Έμ  8: μΌκ΄€λ ν•΄μ‹±</a></li>
<li><a href="#9">μ—°μµλ¬Έμ  9: λ³µμ  μ¶©λ ν•΄κ²°</a></li>
<li><a href="#10_1">μ—°μµλ¬Έμ  10: λ¶„μ‚° μΏΌλ¦¬ μµμ ν™”</a></li>
</ul>
</li>
<li><a href="#12">12. μ°Έκ³ λ¬Έν—</a></li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="_1">λ¶„μ‚° λ°μ΄ν„°λ² μ΄μ¤<a class="header-link" href="#_1" title="Permanent link">&para;</a></h1>
<p><strong>μ΄μ „</strong>: <a href="./13_NoSQL_Data_Models.md">13. NoSQL λ°μ΄ν„° λ¨λΈ</a> | <strong>λ‹¤μ</strong>: <a href="./15_NewSQL_and_Modern_Trends.md">15. NewSQLκ³Ό ν„λ€ νΈλ λ“</a></p>
<hr />
<p>ν„λ€ μ• ν”λ¦¬μΌ€μ΄μ…μ€ μ „ μ„Έκ³„ μ‚¬μ©μλ¥Ό μ„λΉ„μ¤ν•κ³ , λ€λ‰μ λ°μ΄ν„°λ¥Ό μƒμ„±ν•λ©°, ν•λ“μ›¨μ–΄ μ¥μ•  μ‹μ—λ„ κ°€μ©μ„±μ„ μ μ§€ν•΄μ•Ό ν•©λ‹λ‹¤. μ•„λ¬΄λ¦¬ κ°•λ ¥ν•΄λ„ λ‹¨μΌ λ°μ΄ν„°λ² μ΄μ¤ μ„λ²„λ” μ΄ μ„Έ κ°€μ§€ μ”κµ¬μ‚¬ν•­μ„ λ™μ‹μ— μ¶©μ΅±ν•  μ μ—†μµλ‹λ‹¤. λ¶„μ‚° λ°μ΄ν„°λ² μ΄μ¤λ” μ—¬λ¬ κΈ°κ³„μ— λ°μ΄ν„°μ™€ κ³„μ‚°μ„ λ¶„μ‚°μ‹μΌ μ΄ λ¬Έμ λ¥Ό ν•΄κ²°ν•©λ‹λ‹¤. μ΄ λ μ¨μ—μ„λ” λ¨λ“  λ¶„μ‚° λ°μ΄ν„°λ² μ΄μ¤ μ‹μ¤ν…μ„ λ’·λ°›μΉ¨ν•λ” μ•„ν‚¤ν…μ², μ•κ³ λ¦¬μ¦, νΈλ μ΄λ“μ¤ν”„λ¥Ό λ°μ΄ν„° λ‹¨νΈν™” λ° λ³µμ λ¶€ν„° ν•©μ ν”„λ΅ν† μ½ λ° λ¶„μ‚° νΈλμ­μ…κΉμ§€ μ‚΄ν΄λ΄…λ‹λ‹¤.</p>
<p><strong>λ‚μ΄λ„</strong>: β­β­β­β­</p>
<p><strong>ν•™μµ λ©ν‘</strong>:
- Shared-nothing, shared-disk, shared-memory μ•„ν‚¤ν…μ² λΉ„κµ
- μν‰, μμ§, ν•μ΄λΈλ¦¬λ“ λ‹¨νΈν™” μ „λµ μ„¤κ³„
- λ™κΈ° vs λΉ„λ™κΈ° λ³µμ  λ° μΏΌλΌ κΈ°λ° ν”„λ΅ν† μ½ λ¶„μ„
- λ¶„μ‚° μΏΌλ¦¬ μ²λ¦¬ λ° μµμ ν™” μ„¤λ…
- Two-Phase Commit (2PC) λ° Three-Phase Commit (3PC) ν”„λ΅ν† μ½ μ¶”μ 
- Paxos λ° Raft ν•©μ μ•κ³ λ¦¬μ¦μ„ κ°λ…μ  μμ¤€μ—μ„ μ„¤λ…
- λ¶„μ‚° λ™μ‹μ„± μ μ–΄ κΈ°μ  μ μ©
- μ μ ν• νν‹°μ…”λ‹ μ „λµ μ„ νƒ (λ²”μ„, ν•΄μ‹, μΌκ΄€λ ν•΄μ‹±)
- λ¶„μ‚° μ‹μ¤ν… μ„¤κ³„μ—μ„ CAP μ •λ¦¬μ ν•¨μμ— λ€ν•΄ μ¶”λ΅ </p>
<hr />
<h2 id="_2">λ©μ°¨<a class="header-link" href="#_2" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#1-λ¶„μ‚°-λ°μ΄ν„°λ² μ΄μ¤-μ•„ν‚¤ν…μ²">λ¶„μ‚° λ°μ΄ν„°λ² μ΄μ¤ μ•„ν‚¤ν…μ²</a></li>
<li><a href="#2-λ°μ΄ν„°-λ‹¨νΈν™”">λ°μ΄ν„° λ‹¨νΈν™”</a></li>
<li><a href="#3-λ°μ΄ν„°-λ³µμ ">λ°μ΄ν„° λ³µμ </a></li>
<li><a href="#4-λ¶„μ‚°-μΏΌλ¦¬-μ²λ¦¬">λ¶„μ‚° μΏΌλ¦¬ μ²λ¦¬</a></li>
<li><a href="#5-λ¶„μ‚°-νΈλμ­μ…-two-phase-commit-2pc">λ¶„μ‚° νΈλμ­μ…: Two-Phase Commit (2PC)</a></li>
<li><a href="#6-three-phase-commit-3pc">Three-Phase Commit (3PC)</a></li>
<li><a href="#7-ν•©μ-μ•κ³ λ¦¬μ¦-paxosμ™€-raft">ν•©μ μ•κ³ λ¦¬μ¦: Paxosμ™€ Raft</a></li>
<li><a href="#8-λ¶„μ‚°-λ™μ‹μ„±-μ μ–΄">λ¶„μ‚° λ™μ‹μ„± μ μ–΄</a></li>
<li><a href="#9-λ¶„μ‚°-μ„¤κ³„λ¥Ό-μ„ν•-cap-μ •λ¦¬μ-ν•¨μ">λ¶„μ‚° μ„¤κ³„λ¥Ό μ„ν• CAP μ •λ¦¬μ ν•¨μ</a></li>
<li><a href="#10-νν‹°μ…”λ‹-μ „λµ">νν‹°μ…”λ‹ μ „λµ</a></li>
<li><a href="#11-μ—°μµλ¬Έμ ">μ—°μµλ¬Έμ </a></li>
<li><a href="#12-μ°Έκ³ λ¬Έν—">μ°Έκ³ λ¬Έν—</a></li>
</ol>
<hr />
<h2 id="1">1. λ¶„μ‚° λ°μ΄ν„°λ² μ΄μ¤ μ•„ν‚¤ν…μ²<a class="header-link" href="#1" title="Permanent link">&para;</a></h2>
<p>λ¶„μ‚° λ°μ΄ν„°λ² μ΄μ¤λ” μ»΄ν“¨ν„° λ„¤νΈμ›ν¬μ— λ¶„μ‚°λ λ…Όλ¦¬μ μΌλ΅ μƒνΈ μ—°κ΄€λ λ°μ΄ν„°λ² μ΄μ¤μ μ§‘ν•©μ…λ‹λ‹¤. λ¦¬μ†μ¤λ¥Ό κ³µμ ν•λ” λ°©λ²•μ— λ”°λΌ κµ¬λ³„λλ” μ„Έ κ°€μ§€ κΈ°λ³Έ μ•„ν‚¤ν…μ²κ°€ μμµλ‹λ‹¤.</p>
<h3 id="11-shared-nothing">1.1 Shared-Nothing μ•„ν‚¤ν…μ²<a class="header-link" href="#11-shared-nothing" title="Permanent link">&para;</a></h3>
<p>Shared-nothing μ•„ν‚¤ν…μ²μ—μ„ κ° λ…Έλ“λ” μμ²΄ CPU, λ©”λ¨λ¦¬, μ €μ¥μ†λ¥Ό κ°€μ§‘λ‹λ‹¤. λ…Έλ“λ” λ„¤νΈμ›ν¬λ¥Ό ν†µν•΄μ„λ§ ν†µμ‹ ν•©λ‹λ‹¤.</p>
<div class="highlight"><pre><span></span><code>β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  Shared-Nothing μ•„ν‚¤ν…μ²                                     β”‚
β”‚                                                             β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”                β”‚
β”‚  β”‚  Node 1 β”‚    β”‚  Node 2 β”‚    β”‚  Node 3 β”‚                β”‚
β”‚  β”‚ β”β”€β”€β”€β”€β”€β” β”‚    β”‚ β”β”€β”€β”€β”€β”€β” β”‚    β”‚ β”β”€β”€β”€β”€β”€β” β”‚                β”‚
β”‚  β”‚ β”‚ CPU β”‚ β”‚    β”‚ β”‚ CPU β”‚ β”‚    β”‚ β”‚ CPU β”‚ β”‚                β”‚
β”‚  β”‚ β”β”€β”€β”€β”€β”€β”¤ β”‚    β”‚ β”β”€β”€β”€β”€β”€β”¤ β”‚    β”‚ β”β”€β”€β”€β”€β”€β”¤ β”‚                β”‚
β”‚  β”‚ β”‚ RAM β”‚ β”‚    β”‚ β”‚ RAM β”‚ β”‚    β”‚ β”‚ RAM β”‚ β”‚                β”‚
β”‚  β”‚ β”β”€β”€β”€β”€β”€β”¤ β”‚    β”‚ β”β”€β”€β”€β”€β”€β”¤ β”‚    β”‚ β”β”€β”€β”€β”€β”€β”¤ β”‚                β”‚
β”‚  β”‚ β”‚Disk β”‚ β”‚    β”‚ β”‚Disk β”‚ β”‚    β”‚ β”‚Disk β”‚ β”‚                β”‚
β”‚  β”‚ β””β”€β”€β”€β”€β”€β” β”‚    β”‚ β””β”€β”€β”€β”€β”€β” β”‚    β”‚ β””β”€β”€β”€β”€β”€β” β”‚                β”‚
β”‚  β””β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”    β””β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”    β””β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”                β”‚
β”‚       β”‚              β”‚              β”‚                      β”‚
β”‚       β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”                      β”‚
β”‚                      β”‚                                      β”‚
β”‚              β”β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”                              β”‚
β”‚              β”‚   Network     β”‚                              β”‚
β”‚              β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”                              β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
</code></pre></div>

<p><strong>νΉμ„±</strong>:
- κ° λ…Έλ“κ°€ λ…λ¦½μ μΌλ΅ μ‘λ™
- λ°μ΄ν„°κ°€ λ…Έλ“ κ°„μ— λ¶„ν• λ¨
- λ…Έλ“λ¥Ό μ¶”κ°€ν•μ—¬ μ„ ν•μΌλ΅ ν™•μ¥
- λ‹¨μΌ μ¥μ•  μ§€μ  μ—†μ (μ¬λ°”λ¥΄κ² μ„¤κ³„λ κ²½μ°)
- λ„¤νΈμ›ν¬κ°€ λ³‘λ©</p>
<p><strong>μ</strong>: Cassandra, CockroachDB, Citus (PostgreSQL ν™•μ¥), Google Spanner, TiDB</p>
<p><strong>μ¥μ </strong>:
- κ±°μ μ„ ν•μ μΈ μν‰ ν™•μ¥μ„±
- λ…Έλ“ κ°„ λ¦¬μ†μ¤ κ²½ν•© μ—†μ
- λΉ„μ© ν¨μ¨μ  (μƒμ© ν•λ“μ›¨μ–΄)</p>
<p><strong>λ‹¨μ </strong>:
- λ…Έλ“ κ°„ μΏΌλ¦¬λ” λ„¤νΈμ›ν¬ ν†µμ‹  ν•„μ”
- λ¶„μ‚° νΈλμ­μ…μ€ λΉ„μ©μ΄ λ§μ΄ λ“¦
- λ…Έλ“ μ¶”κ°€/μ κ±° μ‹ λ°μ΄ν„° μ¬κ· ν•ν™”κ°€ λ³µμ΅ν•¨</p>
<h3 id="12-shared-disk">1.2 Shared-Disk μ•„ν‚¤ν…μ²<a class="header-link" href="#12-shared-disk" title="Permanent link">&para;</a></h3>
<p>Shared-disk μ•„ν‚¤ν…μ²μ—μ„ κ° λ…Έλ“λ” μμ²΄ CPUμ™€ λ©”λ¨λ¦¬λ¥Ό κ°€μ§€μ§€λ§, λ¨λ“  λ…Έλ“κ°€ κ³µμ  μ €μ¥μ† λ μ΄μ–΄(μΌλ°μ μΌλ΅ SAN λλ” λ¶„μ‚° νμΌμ‹μ¤ν…)μ— μ•΅μ„Έμ¤ν•©λ‹λ‹¤.</p>
<div class="highlight"><pre><span></span><code>β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  Shared-Disk μ•„ν‚¤ν…μ²                                        β”‚
β”‚                                                             β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”                β”‚
β”‚  β”‚  Node 1 β”‚    β”‚  Node 2 β”‚    β”‚  Node 3 β”‚                β”‚
β”‚  β”‚ β”β”€β”€β”€β”€β”€β” β”‚    β”‚ β”β”€β”€β”€β”€β”€β” β”‚    β”‚ β”β”€β”€β”€β”€β”€β” β”‚                β”‚
β”‚  β”‚ β”‚ CPU β”‚ β”‚    β”‚ β”‚ CPU β”‚ β”‚    β”‚ β”‚ CPU β”‚ β”‚                β”‚
β”‚  β”‚ β”β”€β”€β”€β”€β”€β”¤ β”‚    β”‚ β”β”€β”€β”€β”€β”€β”¤ β”‚    β”‚ β”β”€β”€β”€β”€β”€β”¤ β”‚                β”‚
β”‚  β”‚ β”‚ RAM β”‚ β”‚    β”‚ β”‚ RAM β”‚ β”‚    β”‚ β”‚ RAM β”‚ β”‚                β”‚
β”‚  β”‚ β””β”€β”€β”€β”€β”€β” β”‚    β”‚ β””β”€β”€β”€β”€β”€β” β”‚    β”‚ β””β”€β”€β”€β”€β”€β” β”‚                β”‚
β”‚  β””β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”    β””β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”    β””β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”                β”‚
β”‚       β”‚              β”‚              β”‚                      β”‚
β”‚       β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”                      β”‚
β”‚                      β”‚                                      β”‚
β”‚              β”β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”                              β”‚
β”‚              β”‚  Shared Disk  β”‚                              β”‚
β”‚              β”‚   (SAN/NAS)   β”‚                              β”‚
β”‚              β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”‚                              β”‚
β”‚              β”‚  β”‚  Disk   β”‚  β”‚                              β”‚
β”‚              β”‚  β”‚  Array  β”‚  β”‚                              β”‚
β”‚              β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”‚                              β”‚
β”‚              β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”                              β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
</code></pre></div>

<p><strong>νΉμ„±</strong>:
- λ¨λ“  λ…Έλ“κ°€ λ™μΌν• λ°μ΄ν„°λ¥Ό λ΄„ (μ €μ¥μ† νν‹°μ…”λ‹ λ¶ν•„μ”)
- μ“°κΈ°λ¥Ό μ΅°μ •ν•κΈ° μ„ν•΄ λ¶„μ‚° μ κΈ κ΄€λ¦¬(DLM) ν•„μ”
- μ €μ¥μ† λ μ΄μ–΄λ” κ³ κ°€μ©μ„±κ³Ό κ³ μ„±λ¥μ΄μ–΄μ•Ό ν•¨
- μ»΄ν“¨ν… λ…Έλ“ μ¶”κ°€λ” μ‰¬μ›€; μ €μ¥μ†κ°€ ν™•μ¥ λ³‘λ©</p>
<p><strong>μ</strong>: Oracle RAC, Amazon Aurora, Neon</p>
<p><strong>μ¥μ </strong>:
- λ” κ°„λ‹¨ν• λ°μ΄ν„° κ΄€λ¦¬ (νν‹°μ…”λ‹ λ΅μ§ μ—†μ)
- μ»΄ν“¨ν… λ…Έλ“ μ¶”κ°€ μ©μ΄
- μ €μ¥μ† λ μ΄μ–΄κ°€ λ‚΄κµ¬μ„±κ³Ό λ³µμ  μ²λ¦¬</p>
<p><strong>λ‹¨μ </strong>:
- κ³µμ  μ €μ¥μ†κ°€ λ³‘λ©μ΄ λ  μ μμ
- λ¶„μ‚° μ κΈ κ΄€λ¦¬κ°€ λ³µμ΅μ„±μ„ μ¶”κ°€
- μ €μ¥μ† λ μ΄μ–΄κ°€ μ μ¬μ  λ‹¨μΌ μ¥μ•  μ§€μ  (μ¤‘λ³µ SANμΌλ΅ μ™„ν™”)</p>
<h3 id="13-shared-memory-smp">1.3 Shared-Memory μ•„ν‚¤ν…μ² (SMP)<a class="header-link" href="#13-shared-memory-smp" title="Permanent link">&para;</a></h3>
<p>Shared-memory (λ€μΉ­ λ‹¤μ¤‘ μ²λ¦¬) μ•„ν‚¤ν…μ²μ—μ„ λ¨λ“  ν”„λ΅μ„Έμ„κ°€ λ™μΌν• λ©”λ¨λ¦¬μ™€ λ””μ¤ν¬λ¥Ό κ³µμ ν•©λ‹λ‹¤.</p>
<div class="highlight"><pre><span></span><code>β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  Shared-Memory μ•„ν‚¤ν…μ² (SMP)                                β”‚
β”‚                                                             β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”  β”β”€β”€β”€β”€β”€β”€β”  β”β”€β”€β”€β”€β”€β”€β”  β”β”€β”€β”€β”€β”€β”€β”                   β”‚
β”‚  β”‚ CPU1 β”‚  β”‚ CPU2 β”‚  β”‚ CPU3 β”‚  β”‚ CPU4 β”‚                   β”‚
β”‚  β””β”€β”€β”¬β”€β”€β”€β”  β””β”€β”€β”¬β”€β”€β”€β”  β””β”€β”€β”¬β”€β”€β”€β”  β””β”€β”€β”¬β”€β”€β”€β”                   β”‚
β”‚     β”‚         β”‚         β”‚         β”‚                        β”‚
β”‚     β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”                        β”‚
β”‚                    β”‚                                        β”‚
β”‚            β”β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”                                β”‚
β”‚            β”‚  Shared RAM   β”‚                                β”‚
β”‚            β”‚  (Shared Bus) β”‚                                β”‚
β”‚            β””β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”                                β”‚
β”‚                    β”‚                                        β”‚
β”‚            β”β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”                                β”‚
β”‚            β”‚  Shared Disk  β”‚                                β”‚
β”‚            β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”                                β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
</code></pre></div>

<p><strong>νΉμ„±</strong>:
- κ°€μ¥ κ°„λ‹¨ν• ν”„λ΅κ·Έλλ° λ¨λΈ (λ¨λ“  CPUκ°€ λ¨λ“  λ°μ΄ν„°μ— μ•΅μ„Έμ¤ κ°€λ¥)
- λ©”λ¨λ¦¬ λ²„μ¤ λ€μ—­ν­μΌλ΅ μ ν•
- λ‹¨μΌ κΈ°κ³„μ ν•κ³„λ¥Ό λ„μ–΄ ν™•μ¥ λ¶κ°€
- μ§„μ •μΌλ΅ "λ¶„μ‚°"λμ§€ μ•μ -- λ‹¨μΌ λ€ν• μ„λ²„</p>
<p><strong>μ</strong>: μ „ν†µμ μΈ μ—”ν„°ν”„λΌμ΄μ¦ λ°μ΄ν„°λ² μ΄μ¤ μ„λ²„ (λ‹¨μΌ λ…Έλ“ PostgreSQL, Oracle, SQL Server)</p>
<p><strong>μ¥μ </strong>:
- κ°€μ¥ λΉ λ¥Έ ν”„λ΅μ„Έμ„ κ°„ ν†µμ‹  (κ³µμ  λ©”λ¨λ¦¬)
- λ°μ΄ν„° μ•΅μ„Έμ¤λ¥Ό μ„ν• λ„¤νΈμ›ν¬ μ¤λ²„ν—¤λ“ μ—†μ
- κ°„λ‹¨ν• νΈλμ­μ… κ΄€λ¦¬</p>
<p><strong>λ‹¨μ </strong>:
- μμ§ ν™•μ¥λ§ κ°€λ¥
- λ©”λ¨λ¦¬ λ²„μ¤κ°€ λ³‘λ©μ΄ λ¨
- λ‹¨μΌ μ¥μ•  μ§€μ </p>
<h3 id="14">1.4 μ•„ν‚¤ν…μ² λΉ„κµ<a class="header-link" href="#14" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>κΈ°λ¥</th>
<th>Shared-Nothing</th>
<th>Shared-Disk</th>
<th>Shared-Memory</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ν™•μ¥μ„±</strong></td>
<td>μ°μ (μν‰)</td>
<td>μΆ‹μ (μ»΄ν“¨ν…) / μ ν•μ  (μ €μ¥μ†)</td>
<td>μ ν•μ  (μμ§)</td>
</tr>
<tr>
<td><strong>λ³µμ΅μ„±</strong></td>
<td>λ†’μ (νν‹°μ…”λ‹, λ¶„μ‚° νΈλμ­μ…)</td>
<td>μ¤‘κ°„ (DLM)</td>
<td>λ‚®μ</td>
</tr>
<tr>
<td><strong>μ¥μ•  ν—μ©μ„±</strong></td>
<td>λ†’μ</td>
<td>μ¤‘κ°„ (μ €μ¥μ†μ— λ”°λΌ)</td>
<td>λ‚®μ</td>
</tr>
<tr>
<td><strong>λΉ„μ©</strong></td>
<td>λ‚®μ (μƒμ© HW)</td>
<td>μ¤‘κ°„-λ†’μ (SAN)</td>
<td>λ†’μ (λ€ν• μ„λ²„)</td>
</tr>
<tr>
<td><strong>λ„¤νΈμ›ν¬ μμ΅΄μ„±</strong></td>
<td>λ†’μ</td>
<td>λ†’μ (μ €μ¥μ†μ©)</td>
<td>μ—†μ</td>
</tr>
<tr>
<td><strong>λ°μ΄ν„° μ§€μ—­μ„±</strong></td>
<td>μ (ν•¨κ» μ„μΉ)</td>
<td>μ•„λ‹μ¤ (μ €μ¥μ†λ΅ λ„¤νΈμ›ν¬)</td>
<td>μ (κ³µμ  λ©”λ¨λ¦¬)</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="2">2. λ°μ΄ν„° λ‹¨νΈν™”<a class="header-link" href="#2" title="Permanent link">&para;</a></h2>
<p>λ°μ΄ν„° λ‹¨νΈν™”(νν‹°μ…”λ‹ λλ” μƒ¤λ”©μ΄λΌκ³ λ„ ν•¨)λ” κ΄€κ³„(ν…μ΄λΈ”)λ¥Ό λ” μ‘μ€ μ΅°κ°μΌλ΅ λ‚λ„κ³  λ…Έλ“μ— λ¶„μ‚°μ‹ν‚¤λ” ν”„λ΅μ„Έμ¤μ…λ‹λ‹¤.</p>
<h3 id="21">2.1 μν‰ λ‹¨νΈν™”<a class="header-link" href="#21" title="Permanent link">&para;</a></h3>
<p>μν‰ λ‹¨νΈν™”λ” ν…μ΄λΈ”μ„ ν–‰μΌλ΅ λ‚λ•λ‹λ‹¤. κ° λ‹¨νΈμ€ μ–΄λ–¤ μ μ–΄λ¥Ό λ§μ΅±ν•λ” νν”μ λ¶€λ¶„μ§‘ν•©μ„ ν¬ν•¨ν•©λ‹λ‹¤.</p>
<div class="highlight"><pre><span></span><code>μ›λ³Έ ν…μ΄λΈ”: employees
β”β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ id  β”‚ name   β”‚ department β”‚ salary β”‚
β”β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ 1   β”‚ Alice  β”‚ Engineeringβ”‚ 95000  β”‚
β”‚ 2   β”‚ Bob    β”‚ Marketing  β”‚ 72000  β”‚
β”‚ 3   β”‚ Charlieβ”‚ Engineeringβ”‚ 88000  β”‚
β”‚ 4   β”‚ Diana  β”‚ Marketing  β”‚ 68000  β”‚
β”‚ 5   β”‚ Eve    β”‚ Engineeringβ”‚ 92000  β”‚
β”‚ 6   β”‚ Frank  β”‚ Marketing  β”‚ 75000  β”‚
β””β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”

departmentλ³„ μν‰ λ‹¨νΈν™”:

Fragment 1 (Node A):                Fragment 2 (Node B):
Οƒ(department=&#39;Engineering&#39;)         Οƒ(department=&#39;Marketing&#39;)
β”β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β” β”β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”
β”‚ 1   β”‚ Alice  β”‚ Engineeringβ”‚95000 β”‚ β”‚ 2   β”‚ Bob   β”‚ Marketing  β”‚72000 β”‚
β”‚ 3   β”‚ Charlieβ”‚ Engineeringβ”‚88000 β”‚ β”‚ 4   β”‚ Diana β”‚ Marketing  β”‚68000 β”‚
β”‚ 5   β”‚ Eve    β”‚ Engineeringβ”‚92000 β”‚ β”‚ 6   β”‚ Frank β”‚ Marketing  β”‚75000 β”‚
β””β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β” β””β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”
</code></pre></div>

<p><strong>μ •ν™•μ„± μ΅°κ±΄</strong>:</p>
<ol>
<li><strong>μ™„μ „μ„±(Completeness)</strong>: μ›λ³Έ κ΄€κ³„μ λ¨λ“  νν”μ€ μ μ–΄λ„ ν•λ‚μ λ‹¨νΈμ— λ‚νƒ€λ‚μ•Ό ν•©λ‹λ‹¤.</li>
<li>
<p><code>R = F1 β F2 β ... β Fn</code></p>
</li>
<li>
<p><strong>μ¬κµ¬μ„±(Reconstruction)</strong>: μ›λ³Έ κ΄€κ³„λ” λ‹¨νΈμΌλ΅λ¶€ν„° λ³µκµ¬ κ°€λ¥ν•΄μ•Ό ν•©λ‹λ‹¤.</p>
</li>
<li>
<p><code>R = F1 β F2 β ... β Fn</code> (μν‰ λ‹¨νΈν™”μ κ²½μ° ν•©μ§‘ν•©)</p>
</li>
<li>
<p><strong>λ¶„λ¦¬μ„±(Disjointness)</strong> (μ„ νƒμ μ΄μ§€λ§ λ°”λμ§): κ° νν”μ€ μ •ν™•ν ν•λ‚μ λ‹¨νΈμ— λ‚νƒ€λ‚©λ‹λ‹¤. μ΄κ²ƒμ€ μ¤‘λ³µμ„ ν”Όν•©λ‹λ‹¤.</p>
</li>
<li><code>Fi β© Fj = β…</code> for all <code>i β‰  j</code></li>
</ol>
<p><strong>μν‰ λ‹¨νΈν™”μ μ ν•</strong>:</p>
<ul>
<li><strong>μ£Ό μν‰ λ‹¨νΈν™”(Primary horizontal fragmentation)</strong>: κ΄€κ³„μ μμ²΄ μ†μ„±μ— λ€ν• μ μ–΄ κΈ°λ°.</li>
<li>
<p>μ: <code>Οƒ(salary &gt; 80000)(employees)</code> λ° <code>Οƒ(salary β‰¤ 80000)(employees)</code></p>
</li>
<li>
<p><strong>νμƒ μν‰ λ‹¨νΈν™”(Derived horizontal fragmentation)</strong>: κ΄€λ ¨ κ΄€κ³„μ— λ€ν• μ μ–΄ κΈ°λ°.</p>
</li>
<li>μ: μ–΄λ–¤ λ¶€μ„κ°€ μ†μ ν•λ”μ§€μ— λ”°λΌ <code>projects</code>λ¥Ό λ‹¨νΈν™”ν•μ—¬ <code>employees</code> λ‹¨νΈν™”μ™€ μ •λ ¬.</li>
</ul>
<h3 id="22">2.2 μμ§ λ‹¨νΈν™”<a class="header-link" href="#22" title="Permanent link">&para;</a></h3>
<p>μμ§ λ‹¨νΈν™”λ” ν…μ΄λΈ”μ„ μ»¬λΌμΌλ΅ λ‚λ•λ‹λ‹¤. κ° λ‹¨νΈμ€ μ†μ„±μ λ¶€λ¶„μ§‘ν•©κ³Ό κΈ°λ³Έ ν‚¤(μ¬κµ¬μ„± κ°€λ¥ν•λ„λ΅)λ¥Ό ν¬ν•¨ν•©λ‹λ‹¤.</p>
<div class="highlight"><pre><span></span><code>μ›λ³Έ ν…μ΄λΈ”: employees
β”β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”
β”‚ id  β”‚ name   β”‚ department β”‚ salary β”‚ ssn         β”‚ email β”‚
β””β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”

μμ§ λ‹¨νΈν™”:

Fragment 1 (Node A):              Fragment 2 (Node B):
κ³µκ° μ •λ³΄                         λ―Όκ° μ •λ³΄
β”β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”     β”β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ id  β”‚ name   β”‚ department β”‚     β”‚ id  β”‚ salary β”‚ ssn         β”‚
β”β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤     β”β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ 1   β”‚ Alice  β”‚ Engineeringβ”‚     β”‚ 1   β”‚ 95000  β”‚ 123-45-6789 β”‚
β”‚ 2   β”‚ Bob    β”‚ Marketing  β”‚     β”‚ 2   β”‚ 72000  β”‚ 234-56-7890 β”‚
β”‚ ... β”‚ ...    β”‚ ...        β”‚     β”‚ ... β”‚ ...    β”‚ ...         β”‚
β””β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”     β””β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”

μ¬κµ¬μ„±: Ο€_{id,name,department}(F1) β‹ Ο€_{id,salary,ssn}(F2) = R
</code></pre></div>

<p><strong>μ •ν™•μ„± μ΅°κ±΄</strong>:
1. <strong>μ™„μ „μ„±</strong>: λ¨λ“  μ†μ„±μ΄ μ μ–΄λ„ ν•λ‚μ λ‹¨νΈμ— λ‚νƒ€λ‚©λ‹λ‹¤.
2. <strong>μ¬κµ¬μ„±</strong>: <code>R = F1 β‹ F2 β‹ ... β‹ Fn</code> (κΈ°λ³Έ ν‚¤μ— λ€ν• μμ—° μ΅°μΈ).
3. <strong>λ¶„λ¦¬μ„±</strong>: μ†μ„±(κΈ°λ³Έ ν‚¤ μ μ™Έ)μ΄ κ²ΉμΉμ§€ μ•μµλ‹λ‹¤.</p>
<p><strong>μ‚¬μ© μ‚¬λ΅€</strong>:
- <strong>λ³΄μ•</strong>: λ―Όκ°ν• μ»¬λΌ(κΈ‰μ—¬, SSN)μ„ λ³„λ„μ λ” μ•μ „ν• λ…Έλ“μ—
- <strong>μ„±λ¥</strong>: μμ£Ό μ•΅μ„Έμ¤λλ” μ»¬λΌμ„ ν•¨κ»; λ“λ¬Όκ² μ•΅μ„Έμ¤λλ” μ»¬λΌμ€ λ¶„λ¦¬
- <strong>νΌν•© μ›ν¬λ΅λ“</strong>: OLTP μΏΌλ¦¬λ” λ‡ κ°μ μ»¬λΌμ— μ•΅μ„Έμ¤; OLAP μΏΌλ¦¬λ” λ§μ€ μ»¬λΌμ— μ•΅μ„Έμ¤</p>
<h3 id="23">2.3 ν•μ΄λΈλ¦¬λ“ λ‹¨νΈν™”<a class="header-link" href="#23" title="Permanent link">&para;</a></h3>
<p>ν•μ΄λΈλ¦¬λ“ λ‹¨νΈν™”λ” μν‰ λ° μμ§ λ‹¨νΈν™”λ¥Ό κ²°ν•©ν•©λ‹λ‹¤. λ¨Όμ € μμ§μΌλ΅ λ‹¨νΈν™”ν• λ‹¤μ μν‰μΌλ΅ (λλ” κ·Έ λ°λ€).</p>
<div class="highlight"><pre><span></span><code>λ‹¨κ³„ 1: μμ§ λ‹¨νΈν™”
   R β†’ V1(id, name, dept) + V2(id, salary, ssn)

λ‹¨κ³„ 2: V1μ μν‰ λ‹¨νΈν™”
   V1 β†’ H1(dept=&#39;Eng&#39;) + H2(dept=&#39;Mktg&#39;)

κ²°κ³Ό: 3κ°μ λ‹¨νΈ
   F1 = H1 (id, name, dept) where dept=&#39;Eng&#39;     β†’ Node A
   F2 = H2 (id, name, dept) where dept=&#39;Mktg&#39;    β†’ Node B
   F3 = V2 (id, salary, ssn)                      β†’ Node C (μ•μ „)
</code></pre></div>

<h3 id="24">2.4 λ‹¨νΈν™” ν¬λ…μ„±<a class="header-link" href="#24" title="Permanent link">&para;</a></h3>
<p>μ΄μƒμ μΌλ΅ λ¶„μ‚° λ°μ΄ν„°λ² μ΄μ¤λ” <strong>λ‹¨νΈν™” ν¬λ…μ„±</strong>μ„ μ κ³µν•©λ‹λ‹¤: μ‚¬μ©μλ” μ „μ—­ μ¤ν‚¤λ§μ— λ€ν•΄ μΏΌλ¦¬λ¥Ό μ‘μ„±ν•κ³ , μ‹μ¤ν…μ€ μλ™μΌλ΅ ν•μ„ μΏΌλ¦¬λ¥Ό μ μ ν• λ‹¨νΈμΌλ΅ λΌμ°ν…ν•©λ‹λ‹¤.</p>
<div class="highlight"><pre><span></span><code>ν¬λ…μ„± μμ¤€:

λ λ²¨ 1: λ‹¨νΈν™” ν¬λ…μ„±
  μ‚¬μ©μκ°€ λ΄„: &quot;SELECT <span class="gs">* FROM employees WHERE dept = &#39;Engineering&#39;&quot;</span>
<span class="gs">  μ‹μ¤ν… μ²λ¦¬: μ¬λ°”λ¥Έ λ‹¨νΈμΌλ΅ λΌμ°ν…</span>

<span class="gs">λ λ²¨ 2: μ„μΉ ν¬λ…μ„±</span>
<span class="gs">  μ‚¬μ©μλ” λ‹¨νΈμ΄ μ΅΄μ¬ν•λ‹¤λ” κ²ƒμ„ μ•μ§€λ§ μ–΄λ””μ— μ €μ¥λμ–΄ μλ”μ§€λ” λ¨λ¦„</span>
<span class="gs">  μ‚¬μ©μ μ‘μ„±: &quot;SELECT *</span> FROM employees_eng&quot;
  μ‹μ¤ν… μ²λ¦¬: employees_engλ¥Ό μ €μ¥ν•λ” λ…Έλ“ μ°ΎκΈ°

λ λ²¨ 3: ν¬λ…μ„± μ—†μ
  μ‚¬μ©μκ°€ λ‹¨νΈκ³Ό μ„μΉλ¥Ό λ¨λ‘ μ§€μ •ν•΄μ•Ό ν•¨
  &quot;SELECT * FROM node_a.employees_eng&quot;
</code></pre></div>

<hr />
<h2 id="3">3. λ°μ΄ν„° λ³µμ <a class="header-link" href="#3" title="Permanent link">&para;</a></h2>
<p>λ³µμ λ” κ°€μ©μ„±, μ¥μ•  ν—μ©μ„±, μ½κΈ° μ„±λ¥μ„ ν–¥μƒμ‹ν‚¤κΈ° μ„ν•΄ μ—¬λ¬ λ…Έλ“μ— λ°μ΄ν„° λ³µμ‚¬λ³Έμ„ μ μ§€ν•©λ‹λ‹¤.</p>
<h3 id="31">3.1 λ³µμ  ν† ν΄λ΅μ§€<a class="header-link" href="#31" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nt">λ‹¨μΌ</span><span class="w"> </span><span class="nt">λ¦¬λ”</span><span class="w"> </span><span class="o">(</span><span class="nt">Master-Slave</span><span class="o">):</span>
<span class="err">β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”</span><span class="w">     </span><span class="err">β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”</span>
<span class="err">β”‚</span><span class="w">  </span><span class="nt">Leader</span><span class="w">   </span><span class="err">β”‚β”€β”€β”€β”€β–¶β”‚</span><span class="w"> </span><span class="nt">Follower</span><span class="w"> </span><span class="err">β”‚</span><span class="w">  </span><span class="o">(</span><span class="nt">μ“°κΈ°λ”</span><span class="w"> </span><span class="nt">λ¦¬λ”λ΅</span><span class="o">,</span>
<span class="err">β”‚</span><span class="w">  </span><span class="o">(</span><span class="nt">R</span><span class="o">/</span><span class="nt">W</span><span class="o">)</span><span class="w">   </span><span class="err">β”‚</span><span class="w">     </span><span class="err">β”‚</span><span class="w">  </span><span class="o">(</span><span class="nt">Read</span><span class="o">)</span><span class="w">  </span><span class="err">β”‚</span><span class="w">   </span><span class="nt">μ½κΈ°λ”</span><span class="w"> </span><span class="nt">ν”λ΅μ›μ—μ„</span><span class="o">)</span>
<span class="err">β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”</span><span class="w">     </span><span class="err">β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”</span>
<span class="w">     </span><span class="err">β”‚</span>
<span class="w">     </span><span class="err">β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”</span>
<span class="w">                 </span><span class="err">β”‚</span><span class="w"> </span><span class="nt">Follower</span><span class="w"> </span><span class="err">β”‚</span>
<span class="w">                 </span><span class="err">β”‚</span><span class="w">  </span><span class="o">(</span><span class="nt">Read</span><span class="o">)</span><span class="w">  </span><span class="err">β”‚</span>
<span class="w">                 </span><span class="err">β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”</span>

<span class="nt">λ‹¤μ¤‘</span><span class="w"> </span><span class="nt">λ¦¬λ”</span><span class="o">:</span>
<span class="err">β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”β—€β”€β”€β”€β–¶β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”</span><span class="w">  </span><span class="o">(</span><span class="nt">μ“°κΈ°λ”</span><span class="w"> </span><span class="nt">λ¨λ“ </span><span class="w"> </span><span class="nt">λ¦¬λ”μ—μ„</span><span class="w"> </span><span class="nt">μλ½</span><span class="o">,</span>
<span class="err">β”‚</span><span class="w"> </span><span class="nt">Leader</span><span class="w"> </span><span class="nt">1</span><span class="w"> </span><span class="err">β”‚</span><span class="w">     </span><span class="err">β”‚</span><span class="w"> </span><span class="nt">Leader</span><span class="w"> </span><span class="nt">2</span><span class="w"> </span><span class="err">β”‚</span><span class="w">   </span><span class="nt">μ–‘λ°©ν–¥</span><span class="w"> </span><span class="nt">λ³µμ </span><span class="o">)</span>
<span class="err">β”‚</span><span class="w">  </span><span class="o">(</span><span class="nt">R</span><span class="o">/</span><span class="nt">W</span><span class="o">)</span><span class="w">   </span><span class="err">β”‚</span><span class="w">     </span><span class="err">β”‚</span><span class="w">  </span><span class="o">(</span><span class="nt">R</span><span class="o">/</span><span class="nt">W</span><span class="o">)</span><span class="w">   </span><span class="err">β”‚</span>
<span class="err">β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”</span><span class="w">     </span><span class="err">β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”</span>

<span class="nt">λ¦¬λ”</span><span class="w"> </span><span class="nt">μ—†μ</span><span class="o">:</span>
<span class="err">β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”</span><span class="w">     </span><span class="err">β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”</span><span class="w">  </span><span class="o">(</span><span class="nt">μ“°κΈ°λ”</span><span class="w"> </span><span class="nt">λ¨λ“ </span><span class="w"> </span><span class="nt">λ³µμ λ³ΈμΌλ΅</span><span class="o">;</span>
<span class="err">β”‚</span><span class="w">  </span><span class="nt">Node</span><span class="w"> </span><span class="nt">1</span><span class="w">  </span><span class="err">β”‚β—€β”€β”€β”€β–¶β”‚</span><span class="w">  </span><span class="nt">Node</span><span class="w"> </span><span class="nt">2</span><span class="w">  </span><span class="err">β”‚</span><span class="w">   </span><span class="nt">μ—¬λ¬</span><span class="w"> </span><span class="nt">λ³µμ λ³Έμ—μ„</span><span class="w"> </span><span class="nt">μ½κΈ°</span><span class="o">)</span>
<span class="err">β”‚</span><span class="w">  </span><span class="o">(</span><span class="nt">R</span><span class="o">/</span><span class="nt">W</span><span class="o">)</span><span class="w">   </span><span class="err">β”‚</span><span class="w">     </span><span class="err">β”‚</span><span class="w">  </span><span class="o">(</span><span class="nt">R</span><span class="o">/</span><span class="nt">W</span><span class="o">)</span><span class="w">   </span><span class="err">β”‚</span>
<span class="err">β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”</span><span class="w">     </span><span class="err">β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”</span>
<span class="w">     </span><span class="err">β–²</span><span class="w">                </span><span class="err">β–²</span>
<span class="w">     </span><span class="err">β”‚</span><span class="w">                </span><span class="err">β”‚</span>
<span class="w">     </span><span class="err">β””β”€β”€β”€β–¶β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”β”‚</span>
<span class="w">          </span><span class="err">β”‚</span><span class="w">  </span><span class="nt">Node</span><span class="w"> </span><span class="nt">3</span><span class="w">  </span><span class="err">β”‚β”</span>
<span class="w">          </span><span class="err">β”‚</span><span class="w">  </span><span class="o">(</span><span class="nt">R</span><span class="o">/</span><span class="nt">W</span><span class="o">)</span><span class="w">   </span><span class="err">β”‚</span>
<span class="w">          </span><span class="err">β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”</span>
</code></pre></div>

<h3 id="32-vs">3.2 λ™κΈ° vs λΉ„λ™κΈ° λ³µμ <a class="header-link" href="#32-vs" title="Permanent link">&para;</a></h3>
<p><strong>λ™κΈ° λ³µμ </strong>: λ¦¬λ”λ” ν΄λΌμ΄μ–ΈνΈμ— ν™•μΈν•κΈ° μ „μ— λ¨λ“ (λλ” μ •μλ λ¶€λ¶„μ§‘ν•©μ) ν”λ΅μ›κ°€ μ“°κΈ°λ¥Ό μΉμΈν•  λ•κΉμ§€ κΈ°λ‹¤λ¦½λ‹λ‹¤.</p>
<div class="highlight"><pre><span></span><code>Client        Leader        Follower 1     Follower 2
  β”‚             β”‚               β”‚              β”‚
  β”‚β”€β”€WRITEβ”€β”€β–¶  β”‚               β”‚              β”‚
  β”‚             β”‚β”€β”€replicateβ”€β”€β–¶β”‚              β”‚
  β”‚             β”‚β”€β”€replicateβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶β”‚
  β”‚             β”‚               β”‚              β”‚
  β”‚             β”‚β—€β”€β”€ACKβ”€β”€β”€β”€β”€β”€β”€β”€β”‚              β”‚
  β”‚             β”‚β—€β”€β”€ACKβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”‚
  β”‚β—€β”€β”€OKβ”€β”€β”€β”€β”€β”€β”€β”‚               β”‚              β”‚
  β”‚             β”‚               β”‚              β”‚

νƒ€μ„λΌμΈ: ν΄λΌμ΄μ–ΈνΈλ” λ¨λ“  ν”λ΅μ›κ°€ μΉμΈν•  λ•κΉμ§€ λ€κΈ°
λ³΄μ¥: OK ν›„ λ°μ΄ν„°λ” λ¨λ“  λ³µμ λ³Έμ—μ„ λ‚΄κµ¬μ„± μμ
μ„ν—: λλ¦° ν”λ΅μ› ν•λ‚κ°€ μ „μ²΄ μ“°κΈ°λ¥Ό μ°¨λ‹¨
</code></pre></div>

<p><strong>λΉ„λ™κΈ° λ³µμ </strong>: λ¦¬λ”λ” μ¦‰μ‹ ν΄λΌμ΄μ–ΈνΈμ— μ“°κΈ°λ¥Ό ν™•μΈν• λ‹¤μ λ°±κ·ΈλΌμ΄λ“μ—μ„ λ³µμ ν•©λ‹λ‹¤.</p>
<div class="highlight"><pre><span></span><code>Client        Leader        Follower 1     Follower 2
  β”‚             β”‚               β”‚              β”‚
  β”‚β”€β”€WRITEβ”€β”€β–¶  β”‚               β”‚              β”‚
  β”‚β—€β”€β”€OKβ”€β”€β”€β”€β”€β”€β”€β”‚               β”‚              β”‚
  β”‚             β”‚               β”‚              β”‚
  β”‚             β”‚β”€β”€replicateβ”€β”€β–¶β”‚              β”‚  (λ°±κ·ΈλΌμ΄λ“)
  β”‚             β”‚β”€β”€replicateβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶β”‚  (λ°±κ·ΈλΌμ΄λ“)
  β”‚             β”‚               β”‚              β”‚
  β”‚             β”‚β—€β”€β”€ACKβ”€β”€β”€β”€β”€β”€β”€β”€β”‚              β”‚
  β”‚             β”‚β—€β”€β”€ACKβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”‚

νƒ€μ„λΌμΈ: ν΄λΌμ΄μ–ΈνΈλ” μ¦‰μ‹ OKλ¥Ό λ°›μ
λ³΄μ¥: OK μ‹μ μ— λ°μ΄ν„°λ” λ¦¬λ”μ—μ„λ§ λ‚΄κµ¬μ„± μμ
μ„ν—: λ³µμ  μ „ λ¦¬λ” ν¬λμ‹ β†’ λ°μ΄ν„° μ†μ‹¤
</code></pre></div>

<p><strong>μ¤€λ™κΈ° λ³µμ </strong>: λ¦¬λ”λ” μµμ†ν• ν•λ‚μ ν”λ΅μ›κ°€ μΉμΈν•  λ•κΉμ§€ κΈ°λ‹¤λ¦½λ‹λ‹¤ (MySQL μ¤€λ™κΈ°, PostgreSQL synchronous_standby_namesμ—μ„ μ‚¬μ©).</p>
<div class="highlight"><pre><span></span><code>Client        Leader        Follower 1     Follower 2
  β”‚             β”‚               β”‚              β”‚
  β”‚β”€β”€WRITEβ”€β”€β–¶  β”‚               β”‚              β”‚
  β”‚             β”‚β”€β”€replicateβ”€β”€β–¶β”‚              β”‚
  β”‚             β”‚β”€β”€replicateβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶β”‚
  β”‚             β”‚β—€β”€β”€ACKβ”€β”€β”€β”€β”€β”€β”€β”€β”‚              β”‚
  β”‚β—€β”€β”€OKβ”€β”€β”€β”€β”€β”€β”€β”‚               β”‚              β”‚  (F2 ACK λ‚μ¤‘μ— λ„μ°©)
  β”‚             β”‚β—€β”€β”€ACKβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”‚

νƒ€μ„λΌμΈ: ν΄λΌμ΄μ–ΈνΈλ” μµμ†ν• ν•λ‚μ ν”λ΅μ›κ°€ μΉμΈν•  λ•κΉμ§€ λ€κΈ°
λ³΄μ¥: λ°μ΄ν„°λ” λ¦¬λ” + ν• ν”λ΅μ› μ¥μ• λ¥Ό κ²¬λ”¤
κ· ν•: μ „μ²΄ λ™κΈ°λ³΄λ‹¤ λΉ λ¥΄κ³ , λΉ„λ™κΈ°λ³΄λ‹¤ μ•μ „
</code></pre></div>

<h3 id="33">3.3 μΏΌλΌ κΈ°λ° λ³µμ <a class="header-link" href="#33" title="Permanent link">&para;</a></h3>
<p>μΏΌλΌ ν”„λ΅ν† μ½μ€ λ™κΈ°/λΉ„λ™κΈ° νΈλ μ΄λ“μ¤ν”„λ¥Ό μΌλ°ν™”ν•©λ‹λ‹¤.</p>
<p>Nκ°μ λ³µμ λ³Έμ΄ μ£Όμ–΄μ§€λ©΄ λ‹¤μμ„ μ •μν•©λ‹λ‹¤:
- <strong>W</strong> = μ“°κΈ°λ¥Ό μΉμΈν•΄μ•Ό ν•λ” λ³µμ λ³Έ μ (μ“°κΈ° μΏΌλΌ)
- <strong>R</strong> = μ½κΈ°μ— μ‘λ‹µν•΄μ•Ό ν•λ” λ³µμ λ³Έ μ (μ½κΈ° μΏΌλΌ)</p>
<p><strong>κ°•ν• μΌκ΄€μ„± μ΅°κ±΄</strong>: <code>W + R &gt; N</code></p>
<p>μ΄κ²ƒμ€ λ¨λ“  μ½κΈ° μΏΌλΌμ΄ λ¨λ“  μ“°κΈ° μΏΌλΌκ³Ό κ²ΉμΉλ„λ΅ λ³΄μ¥ν•μ—¬, μ½κΈ° μ§‘ν•©μ μµμ† ν•λ‚μ λ³µμ λ³Έμ΄ μµμ‹  κ°’μ„ κ°€μ§€λ„λ΅ ν•©λ‹λ‹¤.</p>
<div class="highlight"><pre><span></span><code><span class="err">μ</span><span class="o">:</span><span class="w"> </span><span class="n">N</span><span class="o">=</span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="n">W</span><span class="o">=</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="n">R</span><span class="o">=</span><span class="mi">2</span>

<span class="err">μ“°κΈ°</span><span class="w"> </span><span class="err">μΏΌλΌ</span><span class="w"> </span><span class="o">(</span><span class="n">W</span><span class="o">=</span><span class="mi">2</span><span class="o">):</span><span class="w">     </span><span class="err">μ½κΈ°</span><span class="w"> </span><span class="err">μΏΌλΌ</span><span class="w"> </span><span class="o">(</span><span class="n">R</span><span class="o">=</span><span class="mi">2</span><span class="o">):</span>
<span class="mi">3</span><span class="err">κ°</span><span class="w"> </span><span class="err">μ¤‘</span><span class="w"> </span><span class="mi">2</span><span class="err">κ°μ—</span><span class="w"> </span><span class="err">μ“°κΈ°</span><span class="w">     </span><span class="mi">3</span><span class="err">κ°</span><span class="w"> </span><span class="err">μ¤‘</span><span class="w"> </span><span class="mi">2</span><span class="err">κ°μ—μ„</span><span class="w"> </span><span class="err">μ½κΈ°</span>

<span class="w">   </span><span class="n">N1</span><span class="w"> </span><span class="err">β“</span><span class="w">                    </span><span class="n">N1</span><span class="w"> </span><span class="err">β“</span>
<span class="w">   </span><span class="n">N2</span><span class="w"> </span><span class="err">β“</span><span class="w">                    </span><span class="n">N2</span><span class="w"> </span><span class="err">β“</span>
<span class="w">   </span><span class="n">N3</span><span class="w"> </span><span class="o">(</span><span class="err">μ„ νƒ</span><span class="o">)</span><span class="w">               </span><span class="n">N3</span><span class="w"> </span><span class="o">(</span><span class="err">μ„ νƒ</span><span class="o">)</span>

<span class="err">κ²ΉμΉ¨</span><span class="o">:</span><span class="w"> </span><span class="err">μµμ†ν•</span><span class="w"> </span><span class="err">ν•λ‚μ</span><span class="w"> </span><span class="err">λ…Έλ“</span><span class="w"> </span><span class="o">(</span><span class="n">N1</span><span class="w"> </span><span class="err">λλ”</span><span class="w"> </span><span class="n">N2</span><span class="o">)</span><span class="err">κ°€</span><span class="w"> </span><span class="err">μµμ‹ </span><span class="w"> </span><span class="err">μ“°κΈ°λ¥Ό</span><span class="w"> </span><span class="err">κ°€μ§</span><span class="o">.</span>
<span class="err">μ½κΈ°λ”</span><span class="w"> </span><span class="err">κ°€μ¥</span><span class="w"> </span><span class="err">λ†’μ€</span><span class="w"> </span><span class="err">νƒ€μ„μ¤νƒ¬ν”„</span><span class="o">/</span><span class="err">λ²„μ „μ</span><span class="w"> </span><span class="err">κ°’μ„</span><span class="w"> </span><span class="err">μ„ νƒ</span><span class="o">.</span>
</code></pre></div>

<p><strong>μΌλ°μ μΈ κµ¬μ„±</strong>:</p>
<table>
<thead>
<tr>
<th>N</th>
<th>W</th>
<th>R</th>
<th>W+R &gt; N?</th>
<th>λ™μ‘</th>
</tr>
</thead>
<tbody>
<tr>
<td>3</td>
<td>3</td>
<td>1</td>
<td>4 &gt; 3 β“</td>
<td>κ°•ν• μ½κΈ°, λλ¦° μ“°κΈ°</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>3</td>
<td>4 &gt; 3 β“</td>
<td>λΉ λ¥Έ μ“°κΈ°, λλ¦° μ½κΈ°</td>
</tr>
<tr>
<td>3</td>
<td>2</td>
<td>2</td>
<td>4 &gt; 3 β“</td>
<td>κ· ν• (κ°€μ¥ μΌλ°μ )</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>1</td>
<td>2 &gt; 3 β—</td>
<td>μµμΆ… μΌκ΄€μ„± (λΉ λ¥΄μ§€λ§ μ μ¬μ μΌλ΅ μ¤λλ¨)</td>
</tr>
<tr>
<td>5</td>
<td>3</td>
<td>3</td>
<td>6 &gt; 5 β“</td>
<td>λ†’μ€ κ°€μ©μ„± (2κ° μ¥μ•  ν—μ©)</td>
</tr>
</tbody>
</table>
<p><strong>λμ¨ν• μΏΌλΌκ³Ό ννΈ ν•Έλ“μ¤ν”„</strong>:</p>
<p>μΌλ¶€ λ³µμ λ³Έμ— μ—°κ²°ν•  μ μ—†μ„ λ•, λμ¨ν• μΏΌλΌμ€ λ‹¤λ¥Έ λ…Έλ“(μ§€μ •λ λ³µμ λ³Έμ΄ μ•„λ‹)κ°€ μ“°κΈ°λ¥Ό μλ½ν•κ³  "ννΈ"λ΅ μ €μ¥ν•  μ μκ² ν•©λ‹λ‹¤. μ›λ³Έ λ³µμ λ³Έμ΄ λ³µκµ¬λλ©΄ ννΈκ°€ μ „λ‹¬λ©λ‹λ‹¤. μ΄κ²ƒμ€ μ μ¬μ  μΌκ΄€μ„± μ„λ°μ„ λ€κ°€λ΅ κ°€μ©μ„±μ„ ν–¥μƒμ‹ν‚µλ‹λ‹¤.</p>
<h3 id="34">3.4 μ¶©λ ν•΄κ²°<a class="header-link" href="#34" title="Permanent link">&para;</a></h3>
<p>λ‹¤μ¤‘ λ¦¬λ” λ° λ¦¬λ” μ—†λ” μ‹μ¤ν…μ—μ„ λ™μΌν• ν‚¤μ— λ€ν• λ™μ‹ μ“°κΈ°λ” μ¶©λμ„ μƒμ„±ν•  μ μμµλ‹λ‹¤.</p>
<p><strong>μ¶©λ ν•΄κ²° μ „λµ</strong>:</p>
<table>
<thead>
<tr>
<th>μ „λµ</th>
<th>μ„¤λ…</th>
<th>μ‚¬μ©μ²</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Last-Writer-Wins (LWW)</strong></td>
<td>κ°€μ¥ λ†’μ€ νƒ€μ„μ¤νƒ¬ν”„λ¥Ό κ°€μ§„ μ“°κΈ°κ°€ μΉλ¦¬; λ‹¤λ¥Έ κ²ƒλ“¤μ€ λ²„λ ¤μ§</td>
<td>Cassandra, DynamoDB</td>
</tr>
<tr>
<td><strong>λ²„μ „ λ²΅ν„°</strong></td>
<td>μΈκ³Ό νμ¤ν† λ¦¬ μ¶”μ ; μ§„μ§ μ¶©λ κ°μ§€ (λ™μ‹ μ“°κΈ°)</td>
<td>Riak, Dynamo</td>
</tr>
<tr>
<td><strong>CRDT</strong></td>
<td>μ¶©λ μ—†μ΄ μλ™μΌλ΅ λ³‘ν•©λλ” λ°μ΄ν„° κµ¬μ΅° (Conflict-free Replicated Data Types)</td>
<td>Riak, Redis (CRDT λ¨λ“)</td>
</tr>
<tr>
<td><strong>μ• ν”λ¦¬μΌ€μ΄μ… μμ¤€</strong></td>
<td>λ¨λ“  μ¶©λ λ²„μ „μ„ μ• ν”λ¦¬μΌ€μ΄μ…μ— λ°ν™; κ²°μ •ν•κ² ν•¨</td>
<td>CouchDB, DynamoDB (μ„ νƒμ )</td>
</tr>
<tr>
<td><strong>Operational Transform</strong></td>
<td>μΌκ΄€μ„±μ„ μ μ§€ν•κΈ° μ„ν•΄ λ™μ‹ μ‘μ—…μ„ λ³€ν™ (ν‘μ—… νΈμ§‘μ— μ‚¬μ©)</td>
<td>Google Docs</td>
</tr>
</tbody>
</table>
<p><strong>μ: λ²„μ „ λ²΅ν„°</strong></p>
<div class="highlight"><pre><span></span><code>λ…Έλ“ Aμ™€ λ…Έλ“ Bκ°€ λ¨λ‘ ν‚¤ &quot;cart&quot;λ¥Ό κ°’ [&quot;item1&quot;]λ΅ λ³΄μ 

1. μ‚¬μ©μκ°€ λ…Έλ“ Aμ— μ“°κΈ°: cart = [&quot;item1&quot;, &quot;item2&quot;]
   λ²„μ „: {A:1}

2. μ‚¬μ©μκ°€ λ…Έλ“ Bμ— μ“°κΈ°: cart = [&quot;item1&quot;, &quot;item3&quot;]
   λ²„μ „: {B:1}

3. λ…Έλ“ Aμ™€ B λ™κΈ°ν™”:
   Aλ” {A:1}, Bλ” {B:1} κ°€μ§
   μ–΄λ κ²ƒλ„ μ§€λ°°ν•μ§€ μ•μ β†’ μ¶©λ κ°μ§€

   ν•΄κ²° μµμ…:
   a. λ³‘ν•©: cart = [&quot;item1&quot;, &quot;item2&quot;, &quot;item3&quot;]  (ν•©μ§‘ν•©)
   b. μ‚¬μ©μμ—κ² λ‘ λ‹¤ μ μ‹: &quot;μ–΄λ–¤ μΉ΄νΈλ¥Ό μ›ν•μ„Έμ”?&quot;
   c. LWW: λ” λ†’μ€ νƒ€μ„μ¤νƒ¬ν”„λ¥Ό κ°€μ§„ κ²ƒ μ„ νƒ (ν•λ‚μ μ“°κΈ° μ†μ‹¤)
</code></pre></div>

<hr />
<h2 id="4">4. λ¶„μ‚° μΏΌλ¦¬ μ²λ¦¬<a class="header-link" href="#4" title="Permanent link">&para;</a></h2>
<h3 id="41">4.1 κ°μ”<a class="header-link" href="#41" title="Permanent link">&para;</a></h3>
<p>λ°μ΄ν„°κ°€ λ…Έλ“ κ°„μ— λ‹¨νΈν™”λλ©΄ μΏΌλ¦¬κ°€ μ—¬λ¬ λ…Έλ“μ λ°μ΄ν„°μ— μ•΅μ„Έμ¤ν•΄μ•Ό ν•  μ μμµλ‹λ‹¤. λ¶„μ‚° μΏΌλ¦¬ ν”„λ΅μ„Έμ„λ” λ‹¤μμ„ μν–‰ν•΄μ•Ό ν•©λ‹λ‹¤:</p>
<ol>
<li>μ „μ—­ μΏΌλ¦¬λ¥Ό κ° λ‹¨νΈμ— λ€ν• ν•μ„ μΏΌλ¦¬λ΅ <strong>λ¶„ν•΄</strong></li>
<li>λ°μ΄ν„° μ „μ†΅μ„ μµμ†ν™”ν•κΈ° μ„ν•΄ μ‹¤ν–‰ κ³„ν <strong>μµμ ν™”</strong></li>
<li>κ°€λ¥ν• κ²½μ° ν•μ„ μΏΌλ¦¬λ¥Ό λ³‘λ ¬λ΅ <strong>μ‹¤ν–‰</strong></li>
<li>μµμΆ… κ²°κ³Ό <strong>μ΅°λ¦½</strong></li>
</ol>
<h3 id="42">4.2 μΏΌλ¦¬ λ¶„ν•΄<a class="header-link" href="#42" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nt">μ „μ—­</span><span class="w"> </span><span class="nt">μΏΌλ¦¬</span><span class="o">:</span>
<span class="w">  </span><span class="nt">SELECT</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">name</span><span class="o">,</span><span class="w"> </span><span class="nt">d</span><span class="p">.</span><span class="nc">dept_name</span>
<span class="w">  </span><span class="nt">FROM</span><span class="w"> </span><span class="nt">employees</span><span class="w"> </span><span class="nt">e</span><span class="w"> </span><span class="nt">JOIN</span><span class="w"> </span><span class="nt">departments</span><span class="w"> </span><span class="nt">d</span><span class="w"> </span><span class="nt">ON</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">dept_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">d</span><span class="p">.</span><span class="nc">id</span>
<span class="w">  </span><span class="nt">WHERE</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">80000</span><span class="o">;</span>

<span class="nt">κ°€μ •</span><span class="o">:</span>
<span class="w">  </span><span class="nt">-</span><span class="w"> </span><span class="nt">employeesλ”</span><span class="w"> </span><span class="nt">dept_idλ΅</span><span class="w"> </span><span class="nt">Node</span><span class="w"> </span><span class="nt">Aμ™€</span><span class="w"> </span><span class="nt">Node</span><span class="w"> </span><span class="nt">Bμ—</span><span class="w"> </span><span class="nt">κ±Έμ³</span><span class="w"> </span><span class="nt">μν‰</span><span class="w"> </span><span class="nt">λ‹¨νΈν™”λ¨</span>
<span class="w">  </span><span class="nt">-</span><span class="w"> </span><span class="nt">departmentsλ”</span><span class="w"> </span><span class="nt">λ¨λ“ </span><span class="w"> </span><span class="nt">λ…Έλ“μ—</span><span class="w"> </span><span class="nt">λ³µμ λ¨</span>

<span class="nt">λ¶„ν•΄</span><span class="o">:</span>

<span class="nt">Node</span><span class="w"> </span><span class="nt">A</span><span class="w"> </span><span class="o">(</span><span class="nt">dept_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">1</span><span class="o">.</span><span class="p">.</span><span class="nc">50</span><span class="o">):</span>
<span class="w">  </span><span class="nt">SELECT</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">name</span><span class="o">,</span><span class="w"> </span><span class="nt">d</span><span class="p">.</span><span class="nc">dept_name</span>
<span class="w">  </span><span class="nt">FROM</span><span class="w"> </span><span class="nt">employees_frag_A</span><span class="w"> </span><span class="nt">e</span><span class="w"> </span><span class="nt">JOIN</span><span class="w"> </span><span class="nt">departments</span><span class="w"> </span><span class="nt">d</span><span class="w"> </span><span class="nt">ON</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">dept_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">d</span><span class="p">.</span><span class="nc">id</span>
<span class="w">  </span><span class="nt">WHERE</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">80000</span><span class="o">;</span>

<span class="nt">Node</span><span class="w"> </span><span class="nt">B</span><span class="w"> </span><span class="o">(</span><span class="nt">dept_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">51</span><span class="o">.</span><span class="p">.</span><span class="nc">100</span><span class="o">):</span>
<span class="w">  </span><span class="nt">SELECT</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">name</span><span class="o">,</span><span class="w"> </span><span class="nt">d</span><span class="p">.</span><span class="nc">dept_name</span>
<span class="w">  </span><span class="nt">FROM</span><span class="w"> </span><span class="nt">employees_frag_B</span><span class="w"> </span><span class="nt">e</span><span class="w"> </span><span class="nt">JOIN</span><span class="w"> </span><span class="nt">departments</span><span class="w"> </span><span class="nt">d</span><span class="w"> </span><span class="nt">ON</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">dept_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">d</span><span class="p">.</span><span class="nc">id</span>
<span class="w">  </span><span class="nt">WHERE</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">80000</span><span class="o">;</span>

<span class="nt">Coordinator</span><span class="o">:</span>
<span class="w">  </span><span class="nt">UNION</span><span class="w"> </span><span class="nt">ALL</span><span class="w"> </span><span class="nt">κ²°κ³Όλ¥Ό</span><span class="w"> </span><span class="nt">Node</span><span class="w"> </span><span class="nt">Aμ™€</span><span class="w"> </span><span class="nt">Node</span><span class="w"> </span><span class="nt">Bμ—μ„</span>
</code></pre></div>

<h3 id="43">4.3 λΉ„μ© μ”μ†<a class="header-link" href="#43" title="Permanent link">&para;</a></h3>
<p>λ¶„μ‚° μΏΌλ¦¬ μ²λ¦¬μ μ§€λ°°μ  λΉ„μ©μ€ λ„¤νΈμ›ν¬λ¥Ό ν†µν• <strong>λ°μ΄ν„° μ „μ†΅</strong>μ…λ‹λ‹¤. λ΅μ»¬ I/O λ° CPU λΉ„μ©μ€ λ¶€μ°¨μ μ…λ‹λ‹¤.</p>
<div class="highlight"><pre><span></span><code>λΉ„μ© λ¨λΈ:
  μ΄ λΉ„μ© = Ξ£(κ° λ…Έλ“μ λ΅μ»¬ I/O λΉ„μ©)
           + Ξ£(κ° λ…Έλ“μ CPU λΉ„μ©)
           + Ξ£(λ„¤νΈμ›ν¬ μ „μ†΅ λΉ„μ©)
             β†‘
             μ΄κ²ƒμ΄ μ§€λ°°μ !
</code></pre></div>

<p><strong>λ°μ΄ν„° μ „μ†΅μ„ μµμ†ν™”ν•κΈ° μ„ν• μµμ ν™” μ „λµ</strong>:</p>
<ol>
<li>
<p><strong>μ„ νƒκ³Ό ν¬μμ„ ν‘Έμ‹ λ‹¤μ΄</strong>: κ²°κ³Όλ¥Ό λ³΄λ‚΄κΈ° μ „μ— κ° λ…Έλ“μ—μ„ ν•„ν„°λ§ λ° ν¬μν•μ—¬ μ „μ†΅λλ” λ°μ΄ν„° μ–‘ κ°μ†.</p>
</li>
<li>
<p><strong>μ„Έλ―Έ μ΅°μΈ κ°μ†</strong>: μ΅°μΈμ„ μ„ν•΄ μ „μ²΄ κ΄€κ³„λ¥Ό μ „μ†΅ν•λ” λ€μ‹  μ΅°μΈ μ»¬λΌ κ°’λ§ μ „μ†΅ν• λ‹¤μ μΌμΉν•λ” νν” μ”μ²­.</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code>μ„Έλ―Έ μ΅°μΈ μ—†μ΄:
  Node Aκ°€ μ „μ²΄ employees ν…μ΄λΈ”μ„ μ΅°μΈμ„ μ„ν•΄ Node Bλ΅ μ „μ†΅
  μ „μ†΅: |employees| ν–‰ Γ— row_size λ°”μ΄νΈ

μ„Έλ―Έ μ΅°μΈκ³Ό ν•¨κ»:
  λ‹¨κ³„ 1: Node Bκ°€ Ο€_{dept_id}(departments)λ¥Ό Node Aλ΅ μ „μ†΅    (μ‘μ!)
  λ‹¨κ³„ 2: Node Aκ°€ employees β‹‰ dept_ids κ³„μ‚°               (λ΅μ»¬ ν•„ν„°)
  λ‹¨κ³„ 3: Node Aκ°€ μΌμΉν•λ” employeesλ§ Node Bλ΅ μ „μ†΅      (ν›¨μ”¬ μ‘μ)
</code></pre></div>

<ol>
<li>
<p><strong>λΈ”λ£Έ ν•„ν„° μµμ ν™”</strong>: μ‹¤μ  μ΅°μΈ ν‚¤λ¥Ό λ³΄λ‚΄λ” λ€μ‹  μ»΄ν©νΈν• λΈ”λ£Έ ν•„ν„°λ¥Ό λ³΄λƒ…λ‹λ‹¤. κ±°μ§“ μ–‘μ„±μ΄ λ‡ κ° μ¶”κ°€ ν–‰μ„ λ³΄λ‚΄μ§€λ§ ν•„ν„° ν¬κΈ°λ” κ·Ήμ μΌλ΅ μ‘μµλ‹λ‹¤.</p>
</li>
<li>
<p><strong>λ³‘λ ¬ μ‹¤ν–‰</strong>: λ‹¤λ¥Έ λ…Έλ“μ—μ„ ν•μ„ μΏΌλ¦¬λ¥Ό λ™μ‹μ— μ‹¤ν–‰.</p>
</li>
</ol>
<h3 id="44">4.4 λ¶„μ‚° μ΅°μΈ μ „λµ<a class="header-link" href="#44" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>μ „λµ</th>
<th>μ„¤λ…</th>
<th>μ‚¬μ© μ‹κΈ°</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Ship-whole</strong></td>
<td>ν•λ‚μ μ „μ²΄ κ΄€κ³„λ¥Ό λ‹¤λ¥Έ μ½ λ…Έλ“λ΅ μ „μ†΅</td>
<td>ν•λ‚μ κ΄€κ³„κ°€ λ§¤μ° μ‘μ</td>
</tr>
<tr>
<td><strong>Semi-join</strong></td>
<td>μ΅°μΈ ν‚¤ κµν™, κ·Έλ° λ‹¤μ μΌμΉν•λ” νν” μ „μ†΅</td>
<td>μ„ νƒμ  μ΅°μΈ (λ§¤μΉκ°€ μ μ)</td>
</tr>
<tr>
<td><strong>Hash partitioned join</strong></td>
<td>λ‘ κ΄€κ³„λ¥Ό μ΅°μΈ ν‚¤λ΅ ν•΄μ‹ νν‹°μ…ν•κ³  λ΅μ»¬μ—μ„ μ΅°μΈ</td>
<td>Large-large equi-join</td>
</tr>
<tr>
<td><strong>Broadcast join</strong></td>
<td>μ‘μ€ ν…μ΄λΈ”μ„ λ¨λ“  λ…Έλ“μ— λ³µμ </td>
<td>Small-large join</td>
</tr>
<tr>
<td><strong>Collocated join</strong></td>
<td>λ‘ ν…μ΄λΈ”μ΄ μ΅°μΈ ν‚¤λ΅ νν‹°μ…λ¨ β†’ μ „μ†΅ μ—†μ΄ λ΅μ»¬ μ΅°μΈ</td>
<td>ν…μ΄λΈ”μ΄ ν•¨κ» νν‹°μ…λ¨</td>
</tr>
</tbody>
</table>
<p><strong>Collocated join μμ </strong>:</p>
<div class="highlight"><pre><span></span><code>ordersμ™€ order_itemsκ°€ λ¨λ‘ order_idλ΅ νν‹°μ…λμ—λ‹¤λ©΄:

Node 1: orders (order_id 1-1000)     + order_items (order_id 1-1000)
Node 2: orders (order_id 1001-2000)  + order_items (order_id 1001-2000)
Node 3: orders (order_id 2001-3000)  + order_items (order_id 2001-3000)

JOIN orders o ON o.order_id = order_items.order_id
β†’ κ° λ…Έλ“κ°€ λ΅μ»¬μ—μ„ μ΅°μΈμ„ μ‹¤ν–‰ν•  μ μμ (λ„¤νΈμ›ν¬ μ „μ†΅ μ—†μ!)
</code></pre></div>

<p>μ΄κ²ƒμ΄ μ¬λ°”λ¥Έ νν‹°μ… ν‚¤λ¥Ό μ„ νƒν•λ” κ²ƒμ΄ μ¤‘μ”ν• μ΄μ μ…λ‹λ‹¤: μ–΄λ–¤ μ΅°μΈμ΄ ν•¨κ» μ„μΉν•  μ μλ”μ§€λ¥Ό κ²°μ •ν•©λ‹λ‹¤.</p>
<hr />
<h2 id="5-two-phase-commit-2pc">5. λ¶„μ‚° νΈλμ­μ…: Two-Phase Commit (2PC)<a class="header-link" href="#5-two-phase-commit-2pc" title="Permanent link">&para;</a></h2>
<h3 id="51">5.1 λ¬Έμ <a class="header-link" href="#51" title="Permanent link">&para;</a></h3>
<p>νΈλμ­μ…μ΄ μ—¬λ¬ λ…Έλ“μ— κ±Έμ³ μμ„ λ•, λ¨λ“  λ…Έλ“κ°€ μ»¤λ°‹ λλ” μ¤‘λ‹¨μ— λ™μν•΄μ•Ό ν•©λ‹λ‹¤. λ¶€λ¶„ μ»¤λ°‹(μΌλ¶€ λ…Έλ“λ” μ»¤λ°‹, λ‹¤λ¥Έ λ…Έλ“λ” μ¤‘λ‹¨)μ€ μ›μμ„±μ„ μ„λ°ν•©λ‹λ‹¤.</p>
<div class="highlight"><pre><span></span><code><span class="nt">νΈλμ­μ…</span><span class="w"> </span><span class="nt">T</span><span class="o">:</span><span class="w"> </span><span class="nt">Account</span><span class="w"> </span><span class="nt">A</span><span class="w"> </span><span class="o">(</span><span class="nt">Node</span><span class="w"> </span><span class="nt">1</span><span class="o">)</span><span class="nt">μ—μ„</span><span class="w"> </span><span class="nt">Account</span><span class="w"> </span><span class="nt">B</span><span class="w"> </span><span class="o">(</span><span class="nt">Node</span><span class="w"> </span><span class="nt">2</span><span class="o">)</span><span class="nt">λ΅</span><span class="w"> </span><span class="o">$</span><span class="nt">100</span><span class="w"> </span><span class="nt">μ΄μ²΄</span>

<span class="nt">Node</span><span class="w"> </span><span class="nt">1</span><span class="o">:</span><span class="w"> </span><span class="nt">UPDATE</span><span class="w"> </span><span class="nt">accounts</span><span class="w"> </span><span class="nt">SET</span><span class="w"> </span><span class="nt">balance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">balance</span><span class="w"> </span><span class="nt">-</span><span class="w"> </span><span class="nt">100</span><span class="w"> </span><span class="nt">WHERE</span><span class="w"> </span><span class="nt">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;A&#39;</span><span class="o">;</span>
<span class="nt">Node</span><span class="w"> </span><span class="nt">2</span><span class="o">:</span><span class="w"> </span><span class="nt">UPDATE</span><span class="w"> </span><span class="nt">accounts</span><span class="w"> </span><span class="nt">SET</span><span class="w"> </span><span class="nt">balance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">balance</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nt">100</span><span class="w"> </span><span class="nt">WHERE</span><span class="w"> </span><span class="nt">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;B&#39;</span><span class="o">;</span>

<span class="nt">Node</span><span class="w"> </span><span class="nt">1μ΄</span><span class="w"> </span><span class="nt">μ»¤λ°‹ν•μ§€λ§</span><span class="w"> </span><span class="nt">Node</span><span class="w"> </span><span class="nt">2κ°€</span><span class="w"> </span><span class="nt">ν¬λμ‹ν•λ©΄</span><span class="w"> </span><span class="nt">μ–΄λ–»κ²</span><span class="w"> </span><span class="nt">λλ‚μ”</span><span class="o">?</span>
<span class="err">β†’</span><span class="w"> </span><span class="o">$</span><span class="nt">100μ΄</span><span class="w"> </span><span class="nt">μ‚¬λΌμ§‘λ‹λ‹¤</span><span class="o">!</span><span class="w"> </span><span class="nt">μ›μμ„±</span><span class="w"> </span><span class="nt">μ„λ°</span><span class="o">.</span>
</code></pre></div>

<h3 id="52-two-phase-commit">5.2 Two-Phase Commit ν”„λ΅ν† μ½<a class="header-link" href="#52-two-phase-commit" title="Permanent link">&para;</a></h3>
<p>2PCλ” μ§€μ •λ <strong>μ½”λ””λ„¤μ΄ν„°</strong>μ™€ μ°Έμ—¬ν•λ” <strong>λ…Έλ“</strong>(μ°Έκ°€μ)λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.</p>
<p><strong>Phase 1: Prepare (ν¬ν‘)</strong></p>
<div class="highlight"><pre><span></span><code>Coordinator                  Node 1                  Node 2
    β”‚                          β”‚                       β”‚
    β”‚β”€β”€β”€β”€β”€ PREPARE β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶β”‚                       β”‚
    β”‚β”€β”€β”€β”€β”€ PREPARE β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶ β”‚
    β”‚                          β”‚                       β”‚
    β”‚                    (λ΅μ»¬μ—μ„ txn μ‹¤ν–‰,            β”‚
    β”‚                     μ κΈ νλ“,                    β”‚
    β”‚                     WALμ— μ“°κΈ°)                   β”‚
    β”‚                          β”‚                       β”‚
    β”‚β—€β”€β”€β”€β”€ VOTE YES β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”‚                       β”‚
    β”‚β—€β”€β”€β”€β”€ VOTE YES β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ β”‚
    β”‚                          β”‚                       β”‚
</code></pre></div>

<p>κ° μ°Έκ°€μ:
1. λ΅μ»¬μ—μ„ νΈλμ­μ… μ‹¤ν–‰ (ν•μ§€λ§ μ»¤λ°‹ν•μ§€ μ•μ)
2. WAL(Write-Ahead Log)μ— prepare λ μ½”λ“ μ‘μ„±
3. VOTE YES(μ»¤λ°‹ κ°€λ¥ν• κ²½μ°) λλ” VOTE NO(λ¶κ°€λ¥ν• κ²½μ°)λ΅ μ‘λ‹µ</p>
<p><strong>Phase 2: Commit/Abort (κ²°μ •)</strong></p>
<p>λ¨λ“  μ°Έκ°€μκ°€ YESλ΅ ν¬ν‘ν• κ²½μ°:</p>
<div class="highlight"><pre><span></span><code>Coordinator                  Node 1                  Node 2
    β”‚                          β”‚                       β”‚
    β”‚  (COMMITμ„ μ½”λ””λ„¤μ΄ν„°    β”‚                       β”‚
    β”‚   WALμ— μ“°κΈ°)            β”‚                       β”‚
    β”‚                          β”‚                       β”‚
    β”‚β”€β”€β”€β”€β”€ COMMIT β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶β”‚                       β”‚
    β”‚β”€β”€β”€β”€β”€ COMMIT β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶ β”‚
    β”‚                          β”‚                       β”‚
    β”‚                    (λ΅μ»¬μ—μ„ μ»¤λ°‹,                β”‚
    β”‚                     μ κΈ ν•΄μ ,                    β”‚
    β”‚                     WALμ— commit μ“°κΈ°)           β”‚
    β”‚                          β”‚                       β”‚
    β”‚β—€β”€β”€β”€β”€ ACK β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”‚                       β”‚
    β”‚β—€β”€β”€β”€β”€ ACK β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ β”‚
    β”‚                          β”‚                       β”‚
</code></pre></div>

<p>μ°Έκ°€μκ°€ NOλ΅ ν¬ν‘ν• κ²½μ°:</p>
<div class="highlight"><pre><span></span><code>Coordinator                  Node 1                  Node 2
    β”‚                          β”‚                       β”‚
    β”‚  (ABORTλ¥Ό μ½”λ””λ„¤μ΄ν„°     β”‚                       β”‚
    β”‚   WALμ— μ“°κΈ°)            β”‚                       β”‚
    β”‚                          β”‚                       β”‚
    β”‚β”€β”€β”€β”€β”€ ABORT β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶β”‚                       β”‚
    β”‚β”€β”€β”€β”€β”€ ABORT β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶ β”‚
    β”‚                          β”‚                       β”‚
    β”‚                    (λ΅μ»¬μ—μ„ λ΅¤λ°±,                β”‚
    β”‚                     μ κΈ ν•΄μ )                    β”‚
    β”‚                          β”‚                       β”‚
    β”‚β—€β”€β”€β”€β”€ ACK β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”‚                       β”‚
    β”‚β—€β”€β”€β”€β”€ ACK β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ β”‚
</code></pre></div>

<h3 id="53">5.3 μƒνƒ κΈ°κ³„<a class="header-link" href="#53" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>                    Coordinator                          Participant
              β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”                 β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
              β”‚     INITIAL     β”‚                 β”‚     INITIAL     β”‚
              β””β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”                 β””β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”
                       β”‚ PREPARE μ „μ†΅                      β”‚ PREPARE μμ‹ 
                       β–Ό                                   β–Ό
              β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”                 β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
              β”‚     WAITING     β”‚                 β”‚     READY       β”‚
              β”‚  (ν¬ν‘ λ€κΈ°)    β”‚                 β”‚  (YES ν¬ν‘ν•¨)   β”‚
              β””β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”                 β””β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”
                       β”‚                                   β”‚
              β”β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”                 β”β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”
              β”‚ all YES  β”‚ any NO                 β”‚ COMMIT   β”‚ ABORT
              β–Ό          β–Ό                        β–Ό          β–Ό
        β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”         β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
        β”‚ COMMITTEDβ”‚ β”‚ ABORTED  β”‚         β”‚ COMMITTEDβ”‚ β”‚ ABORTED  β”‚
        β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”         β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
</code></pre></div>

<h3 id="54">5.4 μ¥μ•  λ¶„μ„<a class="header-link" href="#54" title="Permanent link">&para;</a></h3>
<p>2PCλ” λ‹¤μ–‘ν• μ¥μ•  μ‹λ‚λ¦¬μ¤λ¥Ό μ²λ¦¬ν•΄μ•Ό ν•©λ‹λ‹¤:</p>
<p><strong>κ²½μ° 1: μ°Έκ°€μκ°€ ν¬ν‘ μ „μ— ν¬λμ‹</strong></p>
<div class="highlight"><pre><span></span><code>Coordinatorλ” ν¬ν‘ λ€κΈ° μ‹κ°„ μ΄κ³Ό β†’ νΈλμ­μ… ABORT
Participant λ³µκµ¬ β†’ WAL ν™•μΈ β†’ prepare λ μ½”λ“ μ—†μ β†’ μ¤‘λ‹¨μ„ μ•κ² λ¨
</code></pre></div>

<p><strong>κ²½μ° 2: μ°Έκ°€μκ°€ YES ν¬ν‘ ν›„ ν¬λμ‹</strong></p>
<div class="highlight"><pre><span></span><code>Coordinatorλ” YES μμ‹  β†’ μ •μƒ μ§„ν–‰
Participant λ³µκµ¬ β†’ WAL ν™•μΈ β†’ prepare λ μ½”λ“ ν™•μΈ β†’ κ²°μ •μ„ μ„ν•΄ μ½”λ””λ„¤μ΄ν„°μ— μ—°λ½
μ΄κ²ƒμ΄ &quot;μμ‹¬μ¤λ¬μ΄(in-doubt)&quot; μƒνƒ: μ°Έκ°€μλ” YESλ΅ ν¬ν‘ν–μ§€λ§ κ²°κ³Όλ¥Ό λ¨λ¦„
</code></pre></div>

<p><strong>κ²½μ° 3: μ½”λ””λ„¤μ΄ν„°κ°€ ν¬ν‘ μμ§‘ ν›„ ν¬λμ‹</strong></p>
<div class="highlight"><pre><span></span><code>μ΄κ²ƒμ΄ 2PCμ μ¤‘μ”ν• λ¬Έμ μ…λ‹λ‹¤!

μ°Έκ°€μλ“¤μ€ READY μƒνƒ(YESλ΅ ν¬ν‘)μ΄κ³  μ§„ν–‰ν•  μ μ—†μ:
- COMMITν•  μ μ—†μ: μ½”λ””λ„¤μ΄ν„°κ°€ ABORTλ¥Ό κ²°μ •ν–μ„ μ μμ
- ABORTν•  μ μ—†μ: μ½”λ””λ„¤μ΄ν„°κ°€ COMMITμ„ κ²°μ •ν–μ„ μ μμ
- λ‹¤λ¥Έ μ°Έκ°€μμ—κ² λ¬Όμ–΄λ³Ό μ μ—†μ: κ·Έλ“¤λ„ READY μƒνƒμΌ μ μμ

κ²°κ³Ό: μ°Έκ°€μλ“¤μ€ μ½”λ””λ„¤μ΄ν„°κ°€ λ³µκµ¬λ  λ•κΉμ§€ μ°¨λ‹¨λμ–΄μ•Ό ν•¨.
</code></pre></div>

<p>μ΄ <strong>μ°¨λ‹¨ λ¬Έμ </strong>λ” 2PCμ κ·Όλ³Έμ μΈ μ•½μ μ…λ‹λ‹¤. μµμ•…μ κ²½μ°, μ°Έκ°€μλ” μ κΈμ„ λ¬΄ν•μ • λ³΄μ ν•μ—¬ λ‹¤λ¥Έ νΈλμ­μ…μ„ μ°¨λ‹¨ν•©λ‹λ‹¤.</p>
<h3 id="55">5.5 μµμ ν™”<a class="header-link" href="#55" title="Permanent link">&para;</a></h3>
<p><strong>Presumed Abort</strong>: μ½”λ””λ„¤μ΄ν„°κ°€ λ΅κ·Έμ— κ²°μ •μ„ μ“°μ§€ μ•κ³  ν¬λμ‹ν•λ©΄ λ³µκµ¬ μ‹ ABORTλ¥Ό κ°€μ •ν•©λ‹λ‹¤. μ΄κ²ƒμ€ ABORT κ²°μ •μ„ λ΅κ·Έμ— μ“Έ ν•„μ”λ¥Ό μ—†μ•±λ‹λ‹¤.</p>
<p><strong>Read-Only μµμ ν™”</strong>: μ°Έκ°€μκ°€ νΈλμ­μ…μ΄ μμ‹ μ μ‚¬μ΄νΈμ—μ„ μ–΄λ–¤ λ°μ΄ν„°λ„ μμ •ν•μ§€ μ•μ•λ‹¤κ³  νλ‹¨ν•λ©΄ READ-ONLYλ΅ ν¬ν‘ν•κ³  κ²°μ •μ„ κΈ°λ‹¤λ¦¬μ§€ μ•κ³  μ¦‰μ‹ λ¦¬μ†μ¤λ¥Ό ν•΄μ ν•  μ μμµλ‹λ‹¤.</p>
<p><strong>μ΅°μ • μ΄μ „</strong>: μ›λ³Έ μ½”λ””λ„¤μ΄ν„°κ°€ μ‹¤ν¨ν•λ©΄ μ°Έκ°€μκ°€ μ½”λ””λ„¤μ΄ν„° μ—­ν• μ„ μΈμν•  μ μμµλ‹λ‹¤ (λ‚λ¨Έμ§€ μ°Έκ°€μ κ°„ ν•©μ ν•„μ”).</p>
<hr />
<h2 id="6-three-phase-commit-3pc">6. Three-Phase Commit (3PC)<a class="header-link" href="#6-three-phase-commit-3pc" title="Permanent link">&para;</a></h2>
<h3 id="61">6.1 λ™κΈ°<a class="header-link" href="#61" title="Permanent link">&para;</a></h3>
<p>3PCλ” Dale Skeenμ΄ 1981λ…„μ— μ¶”κ°€ λ‹¨κ³„λ¥Ό μ¶”κ°€ν•μ—¬ 2PCμ μ°¨λ‹¨ λ¬Έμ λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ μ μ•ν–μµλ‹λ‹¤.</p>
<h3 id="62">6.2 ν”„λ΅ν† μ½<a class="header-link" href="#62" title="Permanent link">&para;</a></h3>
<p><strong>Phase 1: CanCommit (ν¬ν‘)</strong> -- 2PC Phase 1κ³Ό λ™μΌ.</p>
<p><strong>Phase 2: PreCommit</strong> -- μƒλ΅μ΄ μ¤‘κ°„ λ‹¨κ³„.</p>
<p><strong>Phase 3: DoCommit</strong> -- 2PC Phase 2μ™€ λ™μΌ.</p>
<div class="highlight"><pre><span></span><code>Coordinator              Node 1                 Node 2
    β”‚                      β”‚                      β”‚
    β”‚β”€β”€ CAN_COMMIT? β”€β”€β”€β”€β”€β”€β–¶β”‚                      β”‚
    β”‚β”€β”€ CAN_COMMIT? β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶β”‚
    β”‚                      β”‚                      β”‚
    β”‚β—€β”€β”€ YES β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”‚                      β”‚
    β”‚β—€β”€β”€ YES β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ β”‚
    β”‚                      β”‚                      β”‚
    β”‚β”€β”€ PRE_COMMIT β”€β”€β”€β”€β”€β”€β”€β–¶β”‚                      β”‚   β† μƒ λ‹¨κ³„
    β”‚β”€β”€ PRE_COMMIT β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶β”‚
    β”‚                      β”‚                      β”‚
    β”‚β—€β”€β”€ ACK β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”‚                      β”‚
    β”‚β—€β”€β”€ ACK β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ β”‚
    β”‚                      β”‚                      β”‚
    β”‚β”€β”€ DO_COMMIT β”€β”€β”€β”€β”€β”€β”€β”€β–¶β”‚                      β”‚
    β”‚β”€β”€ DO_COMMIT β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶ β”‚
    β”‚                      β”‚                      β”‚
    β”‚β—€β”€β”€ DONE β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”‚                      β”‚
    β”‚β—€β”€β”€ DONE β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ β”‚
</code></pre></div>

<h3 id="63-3pc">6.3 3PCκ°€ μ°¨λ‹¨μ„ ν”Όν•λ” λ°©λ²•<a class="header-link" href="#63-3pc" title="Permanent link">&para;</a></h3>
<p>μ£Όμ” ν†µμ°°: 3PCμ—μ„ μ°Έκ°€μκ°€ PreCommit μƒνƒμ— μμΌλ©΄ λ¨λ“  μ°Έκ°€μκ°€ YESλ΅ ν¬ν‘ν–μμ„ μ•κ³  μμµλ‹λ‹¤. λ”°λΌμ„:</p>
<ul>
<li>μ½”λ””λ„¤μ΄ν„°κ°€ PreCommit μ¤‘μ— ν¬λμ‹ν•λ©΄, PRE_COMMITμ„ λ°›μ€ μ‚΄μ•„λ‚¨μ€ μ°Έκ°€μλ” μ½”λ””λ„¤μ΄ν„°κ°€ μ»¤λ°‹ν•λ ¤κ³  μλ„ν–μμ„ μ•κ³  μμµλ‹λ‹¤. μƒ μ½”λ””λ„¤μ΄ν„°λ¥Ό μ„ μ¶ν•κ³  COMMITμΌλ΅ μ§„ν–‰ν•  μ μμµλ‹λ‹¤.</li>
<li>μ°Έκ°€μκ°€ PRE_COMMITμ„ λ°›μ§€ λ»ν–λ‹¤λ©΄ μ•μ „ν•κ² ABORTν•  μ μμµλ‹λ‹¤ (μ½”λ””λ„¤μ΄ν„°κ°€ μ»¤λ°‹ κ²°μ •μ— λ„λ‹¬ν•μ§€ λ»ν–μ„ μ μκΈ° λ•λ¬Έ).</li>
</ul>
<p><strong>Non-blocking μ†μ„±</strong>: λ‹¨μΌ λ…Έλ“ μ¥μ• κ°€ λ‚λ¨Έμ§€ λ…Έλ“λ¥Ό λ¬΄ν•μ • μ°¨λ‹¨μ‹ν‚¬ μ μ—†μµλ‹λ‹¤.</p>
<h3 id="64-3pc">6.4 3PCμ ν•κ³„<a class="header-link" href="#64-3pc" title="Permanent link">&para;</a></h3>
<p>μ΄λ΅ μ μΌλ΅ μ°¨λ‹¨ λ¬Έμ λ¥Ό ν•΄κ²°ν•¨μ—λ„ λ¶κµ¬ν•κ³ , 3PCλ” μ‹¤μ©μ μΌλ΅ μ¤‘λ€ν• ν•κ³„κ°€ μμµλ‹λ‹¤:</p>
<ol>
<li><strong>λ„¤νΈμ›ν¬ νν‹°μ…</strong>: 3PCλ” fail-stop λ¨λΈ(λ…Έλ“κ°€ ν¬λμ‹ν•μ§€λ§ νν‹°μ…λμ§€ μ•μ)μ„ κ°€μ •ν•©λ‹λ‹¤. μ‹¤μ  λ„¤νΈμ›ν¬ νν‹°μ…μ—μ„ 3PCλ” μ—¬μ „ν μΌκ΄€μ„±μ„ μ„λ°ν•  μ μμµλ‹λ‹¤:</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="err">μ‹λ‚λ¦¬μ¤</span><span class="o">:</span>
<span class="w">  </span><span class="err">νν‹°μ…μ΄</span><span class="w"> </span><span class="err">λ…Έλ“λ¥Ό</span><span class="w"> </span><span class="o">{</span><span class="n">Coordinator</span><span class="o">,</span><span class="w"> </span><span class="n">Node1</span><span class="o">}</span><span class="err">κ³Ό</span><span class="w"> </span><span class="o">{</span><span class="n">Node2</span><span class="o">}</span><span class="err">λ΅</span><span class="w"> </span><span class="err">λ¶„ν• </span>

<span class="w">  </span><span class="n">Coordinatorκ°€</span><span class="w"> </span><span class="n">Node1μ—</span><span class="w"> </span><span class="n">PRE_COMMIT</span><span class="w"> </span><span class="err">μ „μ†΅</span><span class="w"> </span><span class="o">(</span><span class="err">μμ‹ λ¨</span><span class="o">)</span>
<span class="w">  </span><span class="n">Coordinatorκ°€</span><span class="w"> </span><span class="n">Node2μ—</span><span class="w"> </span><span class="n">PRE_COMMIT</span><span class="w"> </span><span class="err">μ „μ†΅</span><span class="w"> </span><span class="o">(</span><span class="err">νν‹°μ…μΌλ΅</span><span class="w"> </span><span class="err">μΈν•΄</span><span class="w"> </span><span class="err">μ†μ‹¤λ¨</span><span class="o">)</span>

<span class="w">  </span><span class="n">Coordinator</span><span class="w"> </span><span class="err">ν¬λμ‹</span><span class="o">.</span>

<span class="w">  </span><span class="n">Node1</span><span class="w"> </span><span class="o">(</span><span class="n">PRE_COMMIT</span><span class="w"> </span><span class="err">μμ‹ ν•¨</span><span class="o">):</span><span class="w"> </span><span class="s2">&quot;Coordinatorκ°€ μ»¤λ°‹ν•λ ¤ ν–μ&quot;</span><span class="w"> </span><span class="err">β†’</span><span class="w"> </span><span class="n">COMMIT</span>
<span class="w">  </span><span class="n">Node2</span><span class="w"> </span><span class="o">(</span><span class="n">PRE_COMMIT</span><span class="w"> </span><span class="err">λ°›μ§€</span><span class="w"> </span><span class="err">λ»ν•¨</span><span class="o">):</span><span class="w"> </span><span class="s2">&quot;νƒ€μ„μ•„μ›ƒ, PRE_COMMIT μ—†μ&quot;</span><span class="w"> </span><span class="err">β†’</span><span class="w"> </span><span class="n">ABORT</span>

<span class="w">  </span><span class="err">λ¶μΌμΉ</span><span class="o">!</span><span class="w"> </span><span class="n">Node1μ€</span><span class="w"> </span><span class="err">μ»¤λ°‹</span><span class="o">,</span><span class="w"> </span><span class="n">Node2λ”</span><span class="w"> </span><span class="err">μ¤‘λ‹¨</span><span class="o">.</span>
</code></pre></div>

<ol>
<li>
<p><strong>μ¶”κ°€ μ™•λ³µ</strong>: 3PCλ” 2PCλ³΄λ‹¤ ν• λ² λ” μ™•λ³µμ΄ ν•„μ”ν•μ—¬ μ§€μ—°μ΄ μ¦κ°€ν•©λ‹λ‹¤.</p>
</li>
<li>
<p><strong>μ‹¤μ λ΅ κ±°μ μ‚¬μ©λμ§€ μ•μ</strong>: λ„¤νΈμ›ν¬ νν‹°μ… μ·¨μ•½μ„±μΌλ΅ μΈν•΄ λ€λ¶€λ¶„μ ν„λ€ μ‹μ¤ν…μ€ νƒ€μ„μ•„μ›ƒμ„ μ‚¬μ©ν• 2PC λλ” Paxos/Raft κΈ°λ° ν•©μλ¥Ό λ€μ‹  μ‚¬μ©ν•©λ‹λ‹¤.</p>
</li>
</ol>
<h3 id="65-2pc-vs-3pc">6.5 λΉ„κµ: 2PC vs 3PC<a class="header-link" href="#65-2pc-vs-3pc" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>μ†μ„±</th>
<th>2PC</th>
<th>3PC</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>λ‹¨κ³„</strong></td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td><strong>μ°¨λ‹¨</strong></td>
<td>μ (μ½”λ””λ„¤μ΄ν„° ν¬λμ‹)</td>
<td>μ•„λ‹μ¤ (fail-stop λ¨λΈμ—μ„)</td>
</tr>
<tr>
<td><strong>λ„¤νΈμ›ν¬ νν‹°μ…</strong></td>
<td>μ°¨λ‹¨λ¨</td>
<td>λ¶μΌμΉ κ°€λ¥</td>
</tr>
<tr>
<td><strong>μ§€μ—°</strong></td>
<td>2 μ™•λ³µ</td>
<td>3 μ™•λ³µ</td>
</tr>
<tr>
<td><strong>λ³µμ΅μ„±</strong></td>
<td>μ¤‘κ°„</td>
<td>λ†’μ</td>
</tr>
<tr>
<td><strong>μ‹¤μ  μ‚¬μ©</strong></td>
<td>κ΄‘λ²”μ„ν•¨</td>
<td>λ“λ­„</td>
</tr>
<tr>
<td><strong>λ©”μ‹μ§€ μ</strong></td>
<td>4N (prepare + vote + decision + ack)</td>
<td>6N (λ” λ§μ€ λ©”μ‹μ§€)</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="7-paxos-raft">7. ν•©μ μ•κ³ λ¦¬μ¦: Paxosμ™€ Raft<a class="header-link" href="#7-paxos-raft" title="Permanent link">&para;</a></h2>
<h3 id="71">7.1 ν•©μ λ¬Έμ <a class="header-link" href="#71" title="Permanent link">&para;</a></h3>
<p>λ¶„μ‚° μ‹μ¤ν…μ—μ„ ν•©μλ” μ—¬λ¬ λ…Έλ“κ°€ λ‹¨μΌ κ°’μ— λ™μν•λ„λ΅ ν•λ” λ¬Έμ μ…λ‹λ‹¤. μ΄κ²ƒμ€ λ‹¤μμ— κ·Όλ³Έμ μ…λ‹λ‹¤:</p>
<ul>
<li><strong>λ¦¬λ” μ„ μ¶</strong>: μ–΄λ–¤ λ…Έλ“κ°€ ν„μ¬ λ¦¬λ”μΈκ°€?</li>
<li><strong>λ¶„μ‚° νΈλμ­μ…</strong>: μ»¤λ°‹ λλ” μ¤‘λ‹¨ν•΄μ•Ό ν•λ”κ°€?</li>
<li><strong>λ³µμ λ μƒνƒ κΈ°κ³„</strong>: λ‹¤μμ— μ μ©ν•  μ‘μ—…μ€ λ¬΄μ—‡μΈκ°€?</li>
<li><strong>κµ¬μ„± κ΄€λ¦¬</strong>: ν„μ¬ ν΄λ¬μ¤ν„° κµ¬μ„±μ›μ€ λ¬΄μ—‡μΈκ°€?</li>
</ul>
<p><strong>ν•μ‹μ  μ”κµ¬μ‚¬ν•­</strong>:
1. <strong>ν•©μ(Agreement)</strong>: λ¨λ“  μ¬λ°”λ¥Έ λ…Έλ“κ°€ λ™μΌν• κ°’μ„ κ²°μ •.
2. <strong>μ ν¨μ„±(Validity)</strong>: κ²°μ •λ κ°’μ€ μ–΄λ–¤ λ…Έλ“μ— μν•΄ μ μ•λ¨.
3. <strong>μΆ…λ£(Termination)</strong>: λ¨λ“  μ¬λ°”λ¥Έ λ…Έλ“κ°€ κ²°κµ­ κ²°μ •.</p>
<p><strong>FLP λ¶κ°€λ¥μ„± μ •λ¦¬</strong> (Fischer, Lynch, Paterson, 1985)λ” ν•λ‚μ κ²°ν•¨ μλ” λ…Έλ“λΌλ„ μλ” λΉ„λ™κΈ° μ‹μ¤ν…μ—μ„ ν•©μλ¥Ό λ³΄μ¥ν•λ” κ²ƒμ΄ λ¶κ°€λ¥ν•¨μ„ μ¦λ…ν•©λ‹λ‹¤. Paxosμ™€ Raft κ°™μ€ μ‹¤μ©μ  μ•κ³ λ¦¬μ¦μ€ νƒ€μ„μ•„μ›ƒκ³Ό λ¬΄μ‘μ„ν™”λ¥Ό μ‚¬μ©ν•μ—¬ μ΄λ¥Ό κ·Ήλ³µν•©λ‹λ‹¤ (κΈ°μ μ μΌλ΅ μ λ€μ  μ‹λ‚λ¦¬μ¤μ—μ„ μΆ…λ£ν•μ§€ μ•μ„ μ μμ§€λ§ μ‹¤μ λ΅ μ μ‘λ™).</p>
<h3 id="72-paxos">7.2 Paxos<a class="header-link" href="#72-paxos" title="Permanent link">&para;</a></h3>
<p>Leslie Lamportκ°€ 1989λ…„μ— λ°λ…ν• Paxosλ” κΈ°μ΄μ μΈ ν•©μ μ•κ³ λ¦¬μ¦μ…λ‹λ‹¤. μ΄κ²ƒμ€ μ΄ν•΄ν•κΈ°κ°€ λ§¤μ° μ–΄λ µκΈ°λ΅ μ•…λ… λ†’μµλ‹λ‹¤ (Lamportλ” μ²μμ— κ·Έλ¦¬μ¤μ κ°€μƒ μ„¬ Paxosμ μν ν”„λ΅ν† μ½λ΅ μ„¤λ…ν–μµλ‹λ‹¤).</p>
<p><strong>μ—­ν• </strong>:
- <strong>Proposer</strong>: κ°’μ„ μ μ•
- <strong>Acceptor</strong>: μ μ•μ— ν¬ν‘
- <strong>Learner</strong>: κ²°μ •λ κ°’μ„ ν•™μµ</p>
<p>(λ‹¨μΌ λ…Έλ“κ°€ μ—¬λ¬ μ—­ν• μ„ ν•  μ μμ.)</p>
<p><strong>Single-decree Paxos</strong> (ν•λ‚μ κ°’μ— ν•©μ):</p>
<p><strong>Phase 1: Prepare</strong></p>
<div class="highlight"><pre><span></span><code>Proposer                       Acceptors (λ‹¤μ ν•„μ”)
   β”‚                             A1        A2        A3
   β”‚                              β”‚         β”‚         β”‚
   β”‚β”€β”€PREPARE(n=1)β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶β”‚         β”‚         β”‚
   β”‚β”€β”€PREPARE(n=1)β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶ β”‚         β”‚
   β”‚β”€β”€PREPARE(n=1)β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶ β”‚
   β”‚                              β”‚         β”‚         β”‚
   β”‚β—€β”€PROMISE(n=1, null)β”€β”€β”€β”€β”€β”€β”€β”€β”‚         β”‚         β”‚
   β”‚β—€β”€PROMISE(n=1, null)β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ β”‚         β”‚
   β”‚β—€β”€PROMISE(n=1, null)β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ β”‚
   β”‚                              β”‚         β”‚         β”‚

κ° acceptorμ μ•½μ†:
- &quot;λ²νΈ &lt; 1μΈ μ μ•μ„ λ°›μ•„λ“¤μ΄μ§€ μ•κ² μ&quot;
- acceptorκ°€ μ΄μ „μ— κ°’μ„ λ°›μ•„λ“¤μ€λ‹¤λ©΄, κ·Έ κ°’μ„ ν¬ν•¨
</code></pre></div>

<p><strong>Phase 2: Accept</strong></p>
<div class="highlight"><pre><span></span><code>Proposer                       Acceptors
   β”‚                             A1        A2        A3
   β”‚                              β”‚         β”‚         β”‚
   β”‚β”€β”€ACCEPT(n=1, v=&quot;X&quot;)β”€β”€β”€β”€β”€β”€β”€β”€β–¶β”‚         β”‚         β”‚
   β”‚β”€β”€ACCEPT(n=1, v=&quot;X&quot;)β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶ β”‚         β”‚
   β”‚β”€β”€ACCEPT(n=1, v=&quot;X&quot;)β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶ β”‚
   β”‚                              β”‚         β”‚         β”‚
   β”‚β—€β”€ACCEPTED(n=1)β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”‚         β”‚         β”‚
   β”‚β—€β”€ACCEPTED(n=1)β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ β”‚         β”‚
   β”‚β—€β”€ACCEPTED(n=1)β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ β”‚
   β”‚                              β”‚         β”‚         β”‚

λ‹¤μκ°€ λ°›μ•„λ“¤μ„ β†’ κ°’ &quot;X&quot;κ°€ μ„ νƒλ¨
</code></pre></div>

<p><strong>μ£Όμ” ν†µμ°°</strong>: proposerκ°€ μ΄μ „μ— λ°›μ•„λ“¤μ—¬μ§„ κ°’μ΄ μλ” promiseλ¥Ό λ°›μΌλ©΄, μμ‹ μ κ°’μ΄ μ•„λ‹ κ·Έ κ°’μ„ μ μ•ν•΄μ•Ό ν•©λ‹λ‹¤. μ΄κ²ƒμ€ κ°’μ΄ μΌλ‹¨ μ„ νƒλλ©΄ λ³€κ²½λ  μ μ—†μμ„ λ³΄μ¥ν•©λ‹λ‹¤.</p>
<p><strong>Multi-Paxos</strong>: μ•μ •μ μΈ λ¦¬λ”λ¥Ό μ„ μ¶ν•μ—¬ ν›„μ† μ μ•μ— λ€ν•΄ Phase 1μ„ κ±΄λ„λ›°λ” single-decree Paxosλ¥Ό ν™•μ¥ν•©λ‹λ‹¤. μ΄κ²ƒμ€ μΌλ°μ μΈ κ²½μ°μ— ν”„λ΅ν† μ½μ„ λ‹¨μΌ λ‹¨κ³„(Phase 2λ§)λ΅ μ¤„μ—¬ λ³µμ λ λ΅κ·Έμ— μ‹¤μ©μ μΌλ΅ λ§λ“­λ‹λ‹¤.</p>
<h3 id="73-raft">7.3 Raft<a class="header-link" href="#73-raft" title="Permanent link">&para;</a></h3>
<p>Raftλ” Diego Ongaroμ™€ John Ousterhoutκ°€ 2014λ…„μ— Paxosμ μ΄ν•΄ κ°€λ¥ν• λ€μ•μΌλ΅ μ„¤κ³„ν–μµλ‹λ‹¤. λ™μΌν• λ³΄μ¥μ„ μ κ³µν•μ§€λ§ λ” λ…ν™•ν• κµ¬μ΅°λ¥Ό κ°€μ§‘λ‹λ‹¤.</p>
<p><strong>μ£Όμ” μ•„μ΄λ””μ–΄</strong>: Raftλ” ν•©μλ¥Ό μ„Έ κ°€μ§€ ν•μ„ λ¬Έμ λ΅ λ¶„ν•΄ν•©λ‹λ‹¤:
1. <strong>λ¦¬λ” μ„ μ¶</strong>: ν•λ‚μ λ…Έλ“λ¥Ό λ¦¬λ”λ΅ μ„ νƒ.
2. <strong>λ΅κ·Έ λ³µμ </strong>: λ¦¬λ”κ°€ ν•­λ©μ„ λ°›μ•„λ“¤μ΄κ³  ν”λ΅μ›μ—κ² λ³µμ .
3. <strong>μ•μ „μ„±</strong>: μ»¤λ°‹λ ν•­λ©μ΄ μ†μ‹¤λμ§€ μ•λ„λ΅ λ³΄μ¥.</p>
<p><strong>Raft μƒνƒ κΈ°κ³„</strong>:</p>
<div class="highlight"><pre><span></span><code>                        β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
               timeout, β”‚          β”‚ receives vote
               start    β”‚ Follower β”‚ from candidate
               election β”‚          β”‚ with higher term
                   β”β”€β”€β”€β”€β”‚          β”‚β—€β”€β”€β”€β”€β”
                   β”‚    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”     β”‚
                   β”‚         β–²           β”‚
                   β”‚         β”‚           β”‚
                   β–Ό         β”‚           β”‚
              β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚      β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
              β”‚Candidate β”‚   β”‚      β”‚  Leader   β”‚
              β”‚          β”‚β”€β”€β”€β”      β”‚          β”‚
              β”‚          β”‚β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶β”‚          β”‚
              β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  wins    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                             election
</code></pre></div>

<p><strong>λ¦¬λ” μ„ μ¶</strong>:</p>
<div class="highlight"><pre><span></span><code>Time β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶

Term 1                    Term 2                    Term 3
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”β”€β”€β”€β”€β”€β”€β”€β”€
β”‚ Leader: Node A      β”‚  β”‚ Leader: Node B      β”‚  β”‚ ...
β”‚ Normal operation    β”‚  β”‚ Normal operation    β”‚  β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β””β”€β”€β”€β”€β”€β”€β”€β”€
                      β†‘
                Node A crashes,
                Node B wins election

μ„ μ¶ ν”„λ΅μ„Έμ¤:
1. Follower νƒ€μ„μ•„μ›ƒ (λ¦¬λ”λ΅λ¶€ν„° ν•νΈλΉ„νΈ μ—†μ)
2. Candidateκ°€ λκ³ , term μ¦κ°€, μμ‹ μ—κ² ν¬ν‘
3. λ‹¤λ¥Έ λ¨λ“  λ…Έλ“μ— RequestVote RPC μ „μ†΅
4. λ‹¤μκ°€ YESλ΅ ν¬ν‘ β†’ λ¦¬λ”κ°€ λ¨
5. λ‹¤λ¥Έ λ¦¬λ” λ°κ²¬ β†’ followerλ΅ λμ•„κ°
6. νƒ€μ„μ•„μ›ƒ β†’ term μ¦κ°€, μ„ μ¶ μ¬μ‹μ‘
</code></pre></div>

<p><strong>λ΅κ·Έ λ³µμ </strong>:</p>
<div class="highlight"><pre><span></span><code>Leader                          Followers
  β”‚                         F1         F2         F3
  β”‚                          β”‚          β”‚          β”‚
  β”‚  Client: SET x = 5       β”‚          β”‚          β”‚
  β”‚  Append to local log     β”‚          β”‚          β”‚
  β”‚                          β”‚          β”‚          β”‚
  β”‚β”€β”€AppendEntries(x=5)β”€β”€β”€β”€β”€β–¶β”‚          β”‚          β”‚
  β”‚β”€β”€AppendEntries(x=5)β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶ β”‚          β”‚
  β”‚β”€β”€AppendEntries(x=5)β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ β–¶β”‚
  β”‚                          β”‚          β”‚          β”‚
  β”‚β—€β”€β”€ACKβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”‚          β”‚          β”‚
  β”‚β—€β”€β”€ACKβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ β”‚          β”‚
  β”‚                          β”‚          β”‚          β”‚
  β”‚  λ‹¤μ (3 μ¤‘ 2) ACKλ¨     β”‚          β”‚          β”‚
  β”‚  β†’ ν•­λ© μ»¤λ°‹             β”‚          β”‚          β”‚
  β”‚  β†’ ν΄λΌμ΄μ–ΈνΈμ— μ‘λ‹µ     β”‚          β”‚          β”‚
  β”‚                          β”‚          β”‚          β”‚
  β”‚β”€β”€AppendEntries(commit)β”€β”€β–¶β”‚          β”‚          β”‚
  β”‚β”€β”€AppendEntries(commit)β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶ β”‚          β”‚
  β”‚β”€β”€AppendEntries(commit)β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ β–¶β”‚
</code></pre></div>

<p><strong>μ•μ „μ„± μ†μ„±</strong>: μ»¤λ°‹λ ν•­λ©μ΄ λ¨λ‘ μλ” λ…Έλ“λ§ λ¦¬λ”κ°€ λ  μ μμµλ‹λ‹¤. Raftλ” μ„ μ¶ λ©”μ»¤λ‹μ¦μ„ ν†µν•΄ μ΄λ¥Ό λ³΄μ¥ν•©λ‹λ‹¤: ν›„λ³΄λ” ν¬ν‘λ¥Ό λ°›κΈ° μ„ν•΄ ν¬ν‘μμ λ΅κ·Έλ§νΌ μµμ‹ μΈ λ΅κ·Έλ¥Ό κ°€μ Έμ•Ό ν•©λ‹λ‹¤.</p>
<h3 id="74-paxos-vs-raft">7.4 Paxos vs Raft<a class="header-link" href="#74-paxos-vs-raft" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>μΈ΅λ©΄</th>
<th>Paxos</th>
<th>Raft</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>μ΄ν•΄ κ°€λ¥μ„±</strong></td>
<td>λ§¤μ° μ–΄λ µκΈ°λ΅ μ•…λ… λ†’μ</td>
<td>λ…ν™•μ„±μ„ μ„ν•΄ μ„¤κ³„λ¨</td>
</tr>
<tr>
<td><strong>λ¦¬λ”</strong></td>
<td>μ„ νƒμ  (Multi-Paxosλ” λ¦¬λ” μμ)</td>
<td>ν•„μ</td>
</tr>
<tr>
<td><strong>λ΅κ·Έ κµ¬μ΅°</strong></td>
<td>κ°„κ²©μ΄ μμ„ μ μμ</td>
<td>κ°„κ²© μ—†μ (μμ°¨μ )</td>
</tr>
<tr>
<td><strong>μ•μ „μ„± μ¦λ…</strong></td>
<td>λ³µμ΅ν•¨</td>
<td>κ°„λ‹¨ν•¨</td>
</tr>
<tr>
<td><strong>μ¬κµ¬μ„±</strong></td>
<td>λ³„λ„ ν”„λ΅ν† μ½ ν•„μ”</td>
<td>Joint consensus λ‚΄μ¥</td>
</tr>
<tr>
<td><strong>μ‹¤μ  μ‚¬μ©</strong></td>
<td>Google Chubby, Spanner</td>
<td>etcd, CockroachDB, Consul, TiKV</td>
</tr>
<tr>
<td><strong>μ΄λ΅ μ  κΈ°μ΄</strong></td>
<td>λ” κ°•λ ¥ν•¨ (λ” μΌλ°μ )</td>
<td>μ‹¤μ λ΅ λ™λ“±</td>
</tr>
</tbody>
</table>
<h3 id="75">7.5 λ°μ΄ν„°λ² μ΄μ¤μ ν•©μ<a class="header-link" href="#75" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>λ°μ΄ν„°λ² μ΄μ¤</th>
<th>ν•©μ μ•κ³ λ¦¬μ¦</th>
<th>λ©μ </th>
</tr>
</thead>
<tbody>
<tr>
<td>Google Spanner</td>
<td>Multi-Paxos</td>
<td>κ° Paxos κ·Έλ£Ή λ‚΄ λ΅κ·Έ λ³µμ </td>
</tr>
<tr>
<td>CockroachDB</td>
<td>Raft</td>
<td>λ…Έλ“ κ°„ Range λ³µμ </td>
</tr>
<tr>
<td>TiDB (TiKV)</td>
<td>Raft</td>
<td>Region λ³µμ </td>
</tr>
<tr>
<td>etcd</td>
<td>Raft</td>
<td>Kubernetesλ¥Ό μ„ν• ν‚¤-κ°’ μ €μ¥μ†</td>
</tr>
<tr>
<td>ZooKeeper</td>
<td>Zab (Paxos λ³€ν•)</td>
<td>μ΅°μ • μ„λΉ„μ¤</td>
</tr>
<tr>
<td>Cassandra</td>
<td>Paxos (κ²½λ‰ νΈλμ­μ…)</td>
<td>Compare-and-set μ‘μ—…</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="8">8. λ¶„μ‚° λ™μ‹μ„± μ μ–΄<a class="header-link" href="#8" title="Permanent link">&para;</a></h2>
<h3 id="81">8.1 κ³Όμ <a class="header-link" href="#81" title="Permanent link">&para;</a></h3>
<p>λ¶„μ‚° ν™κ²½μ—μ„μ λ™μ‹μ„± μ μ–΄λ” λ‹¨μΌ λ…Έλ“ μ‹μ¤ν…μ— λΉ„ν•΄ μ¶”κ°€ κ³Όμ μ— μ§λ©΄ν•©λ‹λ‹¤:</p>
<ul>
<li><strong>μ „μ—­ μ‹κ³„ μ—†μ</strong>: λ…Έλ“κ°€ μ •ν™•ν• μ‹κ°„μ— λ™μν•  μ μ—†μ–΄ νƒ€μ„μ¤νƒ¬ν”„ μμ„ μ§€μ •μ΄ μ–΄λ ¤μ›€.</li>
<li><strong>λ„¤νΈμ›ν¬ μ§€μ—°</strong>: μ κΈ μ”μ²­ λ° ν•΄μ κ°€ λ„¤νΈμ›ν¬ μ™•λ³µμ„ λ°μƒμ‹ν‚΄.</li>
<li><strong>λ¶„μ‚° κµμ°© μƒνƒ</strong>: κµμ°© μƒνƒ μ‚¬μ΄ν΄μ΄ μ—¬λ¬ λ…Έλ“μ— κ±Έμ³ μμ„ μ μμ.</li>
<li><strong>λ¶€λ¶„ μ¥μ• </strong>: μ κΈμ„ λ³΄μ ν• λ…Έλ“κ°€ ν¬λμ‹ν•μ—¬ μ κΈμ΄ λ¬΄ν•μ • λ³΄μ λ  μ μμ.</li>
</ul>
<h3 id="82-two-phase-locking-d2pl">8.2 λ¶„μ‚° Two-Phase Locking (D2PL)<a class="header-link" href="#82-two-phase-locking-d2pl" title="Permanent link">&para;</a></h3>
<p>2PLμ„ λ¶„μ‚° ν™κ²½μΌλ΅ ν™•μ¥: κ° λ…Έλ“λ” λ΅μ»¬ μ κΈ κ΄€λ¦¬μλ¥Ό κ°€μ§€λ©°, νΈλμ­μ…μ€ μ•΅μ„Έμ¤ν•λ” κ° λ…Έλ“μ—μ„ μ κΈμ„ νλ“ν•©λ‹λ‹¤.</p>
<div class="highlight"><pre><span></span><code>νΈλμ­μ… Tκ°€ Node 1κ³Ό Node 2μ— μ•΅μ„Έμ¤:

Node 1 Lock Manager               Node 2 Lock Manager
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”               β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ Lock table:      β”‚               β”‚ Lock table:      β”‚
β”‚ row_A β†’ T (X)   β”‚               β”‚ row_B β†’ T (X)   β”‚
β”‚ row_C β†’ T (S)   β”‚               β”‚ row_D β†’ T (S)   β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”               β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”

μ¦κ°€ λ‹¨κ³„: Tκ°€ λ‘ λ…Έλ“μ—μ„ μ κΈ νλ“
μ»¤λ°‹: 2PCκ°€ μ›μμ  μ»¤λ°‹ λ³΄μ¥
κ°μ† λ‹¨κ³„: 2PC κ²°μ • ν›„, λ¨λ“  λ…Έλ“κ°€ Tμ μ κΈ ν•΄μ 
</code></pre></div>

<h3 id="83">8.3 λ¶„μ‚° κµμ°© μƒνƒ κ°μ§€<a class="header-link" href="#83" title="Permanent link">&para;</a></h3>
<p><strong>λ€κΈ° κ·Έλν”„(Wait-for graph)</strong>: κ° λ…Έλ“λ” λ΅μ»¬ λ€κΈ° κ·Έλν”„λ¥Ό μ μ§€ν•©λ‹λ‹¤. λ¨λ“  λ΅μ»¬ κ·Έλν”„μ ν•©μ§‘ν•©μ— μ‚¬μ΄ν΄μ΄ μμΌλ©΄ μ „μ—­ κµμ°© μƒνƒκ°€ λ°μƒν•©λ‹λ‹¤.</p>
<div class="highlight"><pre><span></span><code>Node 1 λ΅μ»¬ WFG:       Node 2 λ΅μ»¬ WFG:
  T1 β†’ T2                 T2 β†’ T3

Node 3 λ΅μ»¬ WFG:
  T3 β†’ T1

μ „μ—­ WFG: T1 β†’ T2 β†’ T3 β†’ T1   β† μ‚¬μ΄ν΄ = κµμ°© μƒνƒ
</code></pre></div>

<p><strong>κ°μ§€ μ ‘κ·Όλ²•</strong>:</p>
<table>
<thead>
<tr>
<th>μ ‘κ·Όλ²•</th>
<th>μ„¤λ…</th>
<th>νΈλ μ΄λ“μ¤ν”„</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>μ¤‘μ•™μ§‘μ¤‘μ‹</strong></td>
<td>ν•λ‚μ λ…Έλ“κ°€ λ¨λ“  λ΅μ»¬ WFGλ¥Ό μμ§‘ν•κ³  μ „μ—­ μ‚¬μ΄ν΄ ν™•μΈ</td>
<td>κ°„λ‹¨ν•μ§€λ§ λ‹¨μΌ μ¥μ•  μ§€μ </td>
</tr>
<tr>
<td><strong>λ¶„μ‚°</strong></td>
<td>λ…Έλ“κ°€ μ„λ΅ WFG μ—£μ§€λ¥Ό λ³΄λƒ„; κ° λ…Έλ“κ°€ λ³Ό μ μλ” μ‚¬μ΄ν΄ κ°μ§€</td>
<td>λ‹¨μΌ μ¥μ•  μ§€μ  μ—†μ§€λ§ μ λ Ή κµμ°© μƒνƒ κ°μ§€ κ°€λ¥</td>
</tr>
<tr>
<td><strong>νƒ€μ„μ•„μ›ƒ κΈ°λ°</strong></td>
<td>νΈλμ­μ…μ΄ μ„κ³„κ°’λ³΄λ‹¤ μ¤λ κΈ°λ‹¤λ¦¬λ©΄ κµμ°© μƒνƒ κ°€μ •ν•κ³  μ¤‘λ‹¨</td>
<td>κ°„λ‹¨ν•μ§€λ§ κµμ°© μƒνƒκ°€ μ•„λ‹ νΈλμ­μ…μ„ μ¤‘λ‹¨ν•  μ μμ</td>
</tr>
</tbody>
</table>
<p><strong>μ λ Ή κµμ°© μƒνƒ</strong>: μ¤λλ μ •λ³΄λ΅ μΈν•΄ κ°μ§€λ κ±°μ§“ κµμ°© μƒνƒ.</p>
<div class="highlight"><pre><span></span><code>Time 1: T1μ΄ Node 1μ—μ„ T2λ¥Ό λ€κΈ° (WFG edge: T1 β†’ T2)
Time 2: T2κ°€ Node 1μ—μ„ μ™„λ£, ν•μ§€λ§ WFG edgeκ°€ μ•„μ§ μ κ±°λμ§€ μ•μ
Time 3: T2κ°€ Node 2μ—μ„ T1μ„ λ€κΈ°ν•κΈ° μ‹μ‘ (WFG edge: T2 β†’ T1)

κµμ°© μƒνƒ κ°μ§€κΈ°κ°€ λ‘ μ—£μ§€λ¥Ό λ™μ‹μ— λ³΄λ©΄:
  T1 β†’ T2 β†’ T1 β†’ μ λ Ή κµμ°© μƒνƒ (T2κ°€ μ΄λ―Έ μ κΈ ν•΄μ ν•¨)
</code></pre></div>

<h3 id="84-timestamp-ordering">8.4 λ¶„μ‚° Timestamp Ordering<a class="header-link" href="#84-timestamp-ordering" title="Permanent link">&para;</a></h3>
<p>νΈλμ­μ…μ— μ „μ—­μ μΌλ΅ κ³ μ ν• νƒ€μ„μ¤νƒ¬ν”„λ¥Ό ν• λ‹Ήν•©λ‹λ‹¤. κ³Όμ λ” μ „μ—­ μ‹κ³„ μ—†μ΄ νƒ€μ„μ¤νƒ¬ν”„λ¥Ό μƒμ„±ν•λ” κ²ƒμ…λ‹λ‹¤.</p>
<p><strong>Lamport νƒ€μ„μ¤νƒ¬ν”„</strong>: λ¶€λ¶„ μμ„λ¥Ό λ³΄μ¥ν•λ” λ…Όλ¦¬μ  μ‹κ³„.</p>
<div class="highlight"><pre><span></span><code>κ° λ…Έλ“κ°€ μΉ΄μ΄ν„° Cλ¥Ό μ μ§€:
<span class="k">-</span> κ° μ΄λ²¤νΈ μ „μ—: C = C + 1
<span class="k">-</span> λ©”μ‹μ§€ μ „μ†΅ μ‹: λ©”μ‹μ§€μ— C μ²¨λ¶€
<span class="k">-</span> νƒ€μ„μ¤νƒ¬ν”„ Tλ¥Ό κ°€μ§„ λ©”μ‹μ§€ μμ‹  μ‹: C = max(C, T) + 1

νƒ€μ„μ¤νƒ¬ν”„ = (C, node_id) μ „μ²΄ μμ„λ¥Ό μ„ν•΄
</code></pre></div>

<p><strong>TrueTime (Google Spanner)</strong>: GPSμ™€ μ›μμ‹κ³„λ¥Ό μ‚¬μ©ν•μ—¬ μ‹¤μ  μ‹κ°„μ— λ€ν• μ ν•λ λ¶ν™•μ‹¤μ„± κµ¬κ°„ [earliest, latest]μ„ μ κ³µν•©λ‹λ‹¤. Spannerλ” μ»¤λ°‹ μ „μ— λ¶ν™•μ‹¤μ„±μ„ κΈ°λ‹¤λ ¤ μ™Έλ¶€ μΌκ΄€μ„±(μ‹¤μ‹κ°„ μμ„)μ„ λ‹¬μ„±ν•©λ‹λ‹¤.</p>
<div class="highlight"><pre><span></span><code><span class="nv">TrueTime</span><span class="w"> </span><span class="nv">API</span>:
<span class="w">  </span><span class="nv">TT</span>.<span class="nv">now</span><span class="ss">()</span><span class="w"> </span>β†’<span class="w"> </span>[<span class="nv">earliest</span>,<span class="w"> </span><span class="nv">latest</span>]
<span class="w">  </span><span class="nv">TT</span>.<span class="nv">after</span><span class="ss">(</span><span class="nv">t</span><span class="ss">)</span><span class="w"> </span>β†’<span class="w"> </span><span class="nv">t</span>κ°€<span class="w"> </span>ν™•μ‹¤ν<span class="w"> </span>κ³Όκ±°μΈ<span class="w"> </span>κ²½μ°<span class="w"> </span><span class="nv">true</span>
<span class="w">  </span><span class="nv">TT</span>.<span class="nv">before</span><span class="ss">(</span><span class="nv">t</span><span class="ss">)</span><span class="w"> </span>β†’<span class="w"> </span><span class="nv">t</span>κ°€<span class="w"> </span>ν™•μ‹¤ν<span class="w"> </span>λ―ΈλμΈ<span class="w"> </span>κ²½μ°<span class="w"> </span><span class="nv">true</span>

<span class="nv">Commit</span><span class="w"> </span><span class="k">wait</span>:
<span class="w">  </span><span class="mi">1</span>.<span class="w"> </span>νΈλμ­μ…<span class="w"> </span><span class="nv">T</span>κ°€<span class="w"> </span>μ»¤λ°‹<span class="w"> </span>νƒ€μ„μ¤νƒ¬ν”„<span class="w"> </span><span class="nv">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">TT</span>.<span class="nv">now</span><span class="ss">()</span>.<span class="nv">latest</span><span class="w"> </span>νλ“
<span class="w">  </span><span class="mi">2</span>.<span class="w"> </span><span class="nv">TT</span>.<span class="nv">after</span><span class="ss">(</span><span class="nv">s</span><span class="ss">)</span>κ°€<span class="w"> </span><span class="nv">true</span>κ°€<span class="w"> </span>λ <span class="w"> </span>λ•κΉμ§€<span class="w"> </span>λ€κΈ°
<span class="w">  </span><span class="mi">3</span>.<span class="w"> </span>νƒ€μ„μ¤νƒ¬ν”„<span class="w"> </span><span class="nv">s</span>λ΅<span class="w"> </span>μ»¤λ°‹

<span class="w">  </span>μ΄κ²ƒμ€<span class="w"> </span><span class="nv">T1</span>μ΄<span class="w"> </span><span class="nv">T2</span>κ°€<span class="w"> </span>μ‹μ‘ν•κΈ°<span class="w"> </span>μ „μ—<span class="w"> </span>μ»¤λ°‹λλ©΄<span class="ss">(</span>μ‹¤μ‹κ°„<span class="ss">)</span>,
<span class="w">  </span><span class="nv">s1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nv">s2</span><span class="w"> </span><span class="ss">(</span>νƒ€μ„μ¤νƒ¬ν”„<span class="w"> </span>μμ„κ°€<span class="w"> </span>μ‹¤μ‹κ°„<span class="w"> </span>μμ„μ™€<span class="w"> </span>μΌμΉ<span class="ss">)</span>λ¥Ό<span class="w"> </span>λ³΄μ¥.
</code></pre></div>

<h3 id="85-mvcc">8.5 λ¶„μ‚° MVCC<a class="header-link" href="#85-mvcc" title="Permanent link">&para;</a></h3>
<p>λ§μ€ λ¶„μ‚° λ°μ΄ν„°λ² μ΄μ¤κ°€ Multi-Version Concurrency Controlμ„ μ‚¬μ©ν•©λ‹λ‹¤:</p>
<div class="highlight"><pre><span></span><code>ν‚¤ &quot;account_balance&quot;μ— λ€ν• λ¶„μ‚° MVCC:

Node 1 (primary):
  Version 1: value=1000, ts=100, committed
  Version 2: value=900,  ts=150, committed
  Version 3: value=850,  ts=200, committed

Node 2 (replica):
  Version 1: value=1000, ts=100, committed
  Version 2: value=900,  ts=150, committed
  (Version 3μ€ μ•„μ§ λ³µμ λμ§€ μ•μ)

μ¤λƒ…μƒ· ts=175λ΅ Node 2μ—μ„ μ½κΈ°:
  β†’ Version 2 λ°ν™ (value=900) because ts=150 β‰¤ 175

μ¤λƒ…μƒ· ts=175λ΅ Node 1μ—μ„ μ½κΈ°:
  β†’ Version 2 λ°ν™ (value=900) because ts=200 &gt; 175

λ‘ μ½κΈ° λ¨λ‘ μΌκ΄€λ¨! (μ¤λƒ…μƒ· κ²©λ¦¬)
</code></pre></div>

<hr />
<h2 id="9-cap">9. λ¶„μ‚° μ„¤κ³„λ¥Ό μ„ν• CAP μ •λ¦¬μ ν•¨μ<a class="header-link" href="#9-cap" title="Permanent link">&para;</a></h2>
<h3 id="91-cap">9.1 μ„¤κ³„ λ§¥λ½μ—μ„ CAP μ¬κ²€ν† <a class="header-link" href="#91-cap" title="Permanent link">&para;</a></h3>
<p><a href="./13_NoSQL_Data_Models.md">λ μ¨ 13</a>μ—μ„ CAP μ •λ¦¬λ¥Ό μ†κ°ν–μµλ‹λ‹¤. μ΄μ  λ¶„μ‚° λ°μ΄ν„°λ² μ΄μ¤μ νΉμ • μ„¤κ³„ κ²°μ •μ— μ μ©ν•©λ‹λ‹¤.</p>
<h3 id="92-cp">9.2 CP μ„¤κ³„ ν¨ν„΄<a class="header-link" href="#92-cp" title="Permanent link">&para;</a></h3>
<p><strong>ν¨ν„΄: λ¦¬λ”λ¥Ό ν†µν• μ„ ν•ν™” κ°€λ¥ μ½κΈ°</strong></p>
<div class="highlight"><pre><span></span><code>λ¨λ“  μ½κΈ°μ™€ μ“°κΈ°κ°€ λ¦¬λ”λ¥Ό ν†µν•¨:

Client β”€β”€β–¶ Leader β”€β”€β–¶ Followers (λ³µμ )
                  β—€β”€β”€ (μ½κΈ°λ” λ¦¬λ”μ—μ„λ§ μ κ³µ)

νΈλ μ΄λ“μ¤ν”„: λ¦¬λ”μ— μ—°κ²°ν•  μ μ—†μΌλ©΄(νν‹°μ…), μ½κΈ° μ‹¤ν¨ (κ°€μ©μ„± κ°μ†)
μ‚¬μ©μ²: etcd, ZooKeeper, HBase
</code></pre></div>

<p><strong>ν¨ν„΄: λ‹¤μ μΏΌλΌ</strong></p>
<div class="highlight"><pre><span></span><code>λ‹¤μμ—μ„ μ½κΈ°, λ‹¤μμ— μ“°κΈ°:

ν΄λΌμ΄μ–ΈνΈκ°€ 3κ° λ³µμ λ³Έ μ¤‘ 2κ°μ— μ“°κΈ° (W=2)
ν΄λΌμ΄μ–ΈνΈκ°€ 3κ° λ³µμ λ³Έ μ¤‘ 2κ°μ—μ„ μ½κΈ° (R=2)
W + R = 4 &gt; 3 = N β†’ λ³΄μ¥λ κ²ΉμΉ¨

νΈλ μ΄λ“μ¤ν”„: νν‹°μ… μ¤‘, λ‹¤μμ— μ—°κ²°ν•  μ μ—†μΌλ©΄ μ‘μ—… μ‹¤ν¨
μ‚¬μ©μ²: MongoDB (majority read/write concern)
</code></pre></div>

<h3 id="93-ap">9.3 AP μ„¤κ³„ ν¨ν„΄<a class="header-link" href="#93-ap" title="Permanent link">&para;</a></h3>
<p><strong>ν¨ν„΄: λ¨λ“  λ³µμ λ³Έμ—μ„ μ½κΈ°</strong></p>
<div class="highlight"><pre><span></span><code>ν΄λΌμ΄μ–ΈνΈκ°€ μ‚¬μ© κ°€λ¥ν• λ¨λ“  λ³µμ λ³Έμ—μ„ μ½κΈ°:

Client β”€β”€β–¶ Any Replica (μ¤λλ λ°μ΄ν„°λ¥Ό λ°ν™ν•  μ μμ)

νΈλ μ΄λ“μ¤ν”„: ν•­μƒ κ°€μ©ν•μ§€λ§, μ“°κΈ° ν›„ μ¤λλ λ°μ΄ν„°λ¥Ό μ½μ„ μ μμ
μ‚¬μ©μ²: Cassandra (μΌκ΄€μ„± μμ¤€ ONE), DynamoDB (μµμΆ… μΌκ΄€λ μ½κΈ°)
</code></pre></div>

<p><strong>ν¨ν„΄: Hinted handoff</strong></p>
<div class="highlight"><pre><span></span><code>νν‹°μ… μ¤‘, μ‚¬μ© κ°€λ¥ν• λ…Έλ“μ— μ“°κΈ°:

μ •μƒ:    Client β”€β”€β–¶ Replica A, Replica B, Replica C
νν‹°μ…: Client β”€β”€β–¶ Replica A, Replica D* (hint), Replica E* (hint)
λ³µκµ¬:  Replica D β”€β”€β–¶ Replica B (ννΈλ μ“°κΈ° μ „λ‹¬)
           Replica E β”€β”€β–¶ Replica C (ννΈλ μ“°κΈ° μ „λ‹¬)

<span class="k">*</span> Dμ™€ Eλ” μ§€μ •λ λ³µμ λ³Έμ΄ μ•„λ‹μ§€λ§ μ“°κΈ°λ¥Ό &quot;ννΈ&quot;λ΅ μλ½
νΈλ μ΄λ“μ¤ν”„: μ“°κΈ° μ„±κ³µ (κ°€μ©) ν•μ§€λ§ μΌκ΄€μ„±μ€ μ§€μ—°λ¨
μ‚¬μ©μ²: Dynamo, Cassandra, Riak
</code></pre></div>

<h3 id="94">9.4 μΌκ΄€μ„± μμ¤€ μ΅°μ •<a class="header-link" href="#94" title="Permanent link">&para;</a></h3>
<p>λ§μ€ λ¶„μ‚° λ°μ΄ν„°λ² μ΄μ¤κ°€ μ‘μ—…λ‹Ή μΌκ΄€μ„± μ΅°μ •μ„ ν—μ©ν•©λ‹λ‹¤:</p>
<div class="highlight"><pre><span></span><code>Cassandra μΌκ΄€μ„± μμ¤€:

ONE:    1κ° λ³µμ λ³Έμ— μ“°κΈ°/μ½κΈ°      (κ°€μ¥ λΉ λ¦„, κ°€μ¥ λ μΌκ΄€λ¨)
QUORUM: λ‹¤μμ— μ“°κΈ°/μ½κΈ°           (κ· ν•)
ALL:    λ¨λ“  λ³µμ λ³Έμ— μ“°κΈ°/μ½κΈ°     (κ°€μ¥ λλ¦Ό, κ°€μ¥ μΌκ΄€λ¨)
LOCAL_QUORUM: λ΅μ»¬ DCμ—μ„ λ‹¤μ     (λ‹¤μ¤‘ λ°μ΄ν„°μ„Όν„°)

DynamoDB μΌκ΄€μ„±:
  Eventually Consistent Read: 0.5x λΉ„μ©, μ¤λλ λ°μ΄ν„° λ°ν™ κ°€λ¥
  Strongly Consistent Read:   1x λΉ„μ©, ν•­μƒ μµμ‹  λ°ν™

MongoDB read concern:
  &quot;local&quot;:    λ΅μ»¬ λ°μ΄ν„° λ°ν™ (λΉ λ¦„, μ¤λλ  μ μμ)
  &quot;majority&quot;: λ‹¤μκ°€ μΉμΈν• λ°μ΄ν„° λ°ν™ (μΌκ΄€λ¨)
  &quot;linearizable&quot;: κ°€μ¥ κ°•λ ¥, λ‹¨μΌ λ¬Έμ„ μ½κΈ°λ§
</code></pre></div>

<hr />
<h2 id="10">10. νν‹°μ…”λ‹ μ „λµ<a class="header-link" href="#10" title="Permanent link">&para;</a></h2>
<h3 id="101">10.1 λ²”μ„ νν‹°μ…”λ‹<a class="header-link" href="#101" title="Permanent link">&para;</a></h3>
<p>ν‚¤ κ³µκ°„μ μ—°μ† λ²”μ„λ¥Ό κ° νν‹°μ…μ— ν• λ‹Ήν•©λ‹λ‹¤.</p>
<div class="highlight"><pre><span></span><code>ν‚¤ κ³µκ°„: [0, 1000]

Partition 1 (Node A): keys [0, 333]
Partition 2 (Node B): keys [334, 666]
Partition 3 (Node C): keys [667, 1000]

μ: μ‚¬μ©μ ID
  Node A: users 1-333
  Node B: users 334-666
  Node C: users 667-1000
</code></pre></div>

<p><strong>μ¥μ </strong>:
- λ²”μ„ μΏΌλ¦¬κ°€ ν¨μ¨μ  (λ‹¨μΌ νν‹°μ… λλ” μ—°μ† νν‹°μ… μ¤μΊ”)
- μ΄ν•΄ν•κ³  κµ¬ν„ν•κΈ° μ‰¬μ›€</p>
<p><strong>λ‹¨μ </strong>:
- <strong>ν•«μ¤ν</strong>: ν‚¤ λ¶„ν¬κ°€ νΈν–¥λλ©΄ (μ: μµκ·Ό νƒ€μ„μ¤νƒ¬ν”„κ°€ ν•λ‚μ νν‹°μ…μ— μ§‘μ¤‘), ν•λ‚μ λ…Έλ“κ°€ λ¶κ· ν•ν• λ¶€ν•λ¥Ό λ°›μ
- <strong>μ¬κ· ν•ν™”</strong>: ν•« νν‹°μ…μ„ λ¶„ν• ν•  λ• λ°μ΄ν„°λ¥Ό μ΄λ™ν•΄μ•Ό ν•¨</p>
<p><strong>μ‚¬μ©μ²</strong>: HBase, Spanner, CockroachDB, TiDB</p>
<h3 id="102">10.2 ν•΄μ‹ νν‹°μ…”λ‹<a class="header-link" href="#102" title="Permanent link">&para;</a></h3>
<p>ν‚¤μ— ν•΄μ‹ ν•¨μλ¥Ό μ μ©ν•κ³  ν•΄μ‹ λ²”μ„λ¥Ό νν‹°μ…μ— ν• λ‹Ήν•©λ‹λ‹¤.</p>
<div class="highlight"><pre><span></span><code>ν•΄μ‹ ν•¨μ: h(key) β†’ [0, 2^32)

Partition 1 (Node A): h(key) β [0, 2^32/3)
Partition 2 (Node B): h(key) β [2^32/3, 2*2^32/3)
Partition 3 (Node C): h(key) β [2*2^32/3, 2^32)

μ: h(&quot;user_42&quot;) = 178294 β†’ Partition 1 (Node A)
         h(&quot;user_43&quot;) = 891023 β†’ Partition 2 (Node B)

μΈμ ‘ν• ν‚¤κ°€ λ‹¤λ¥Έ νν‹°μ…μ— λ¶„μ‚°λ¨.
</code></pre></div>

<p><strong>μ¥μ </strong>:
- νν‹°μ… κ°„ ν‚¤μ κ· λ“±ν• λ¶„ν¬ (λ¬΄μ‘μ„ ν‚¤μ— λ€ν• ν•«μ¤ν μ—†μ)
- λ¨λ“  ν‚¤ λ¶„ν¬μ—μ„ μ μ‘λ™</p>
<p><strong>λ‹¨μ </strong>:
- <strong>λ²”μ„ μΏΌλ¦¬ λ¶κ°€λ¥</strong>: μ›λ³Έ κ³µκ°„μ—μ„ κ°€κΉμ΄ ν‚¤κ°€ νν‹°μ…μ— λ¶„μ‚°λ¨. <code>SELECT * FROM users WHERE id BETWEEN 100 AND 200</code>λ” λ¨λ“  νν‹°μ…μ„ μΏΌλ¦¬ν•΄μ•Ό ν•¨.
- <strong>μ¬κ· ν•ν™”</strong>: λ…Έλ“λ¥Ό μ¶”κ°€ν•λ©΄ μ¬ν•΄μ‹± λ° ~1/Nμ λ¨λ“  λ°μ΄ν„° μ΄λ™ ν•„μ”.</p>
<p><strong>μ‚¬μ©μ²</strong>: DynamoDB, Cassandra (κΈ°λ³Έ νν‹°μ…”λ„)</p>
<h3 id="103">10.3 μΌκ΄€λ ν•΄μ‹±<a class="header-link" href="#103" title="Permanent link">&para;</a></h3>
<p>μΌκ΄€λ ν•΄μ‹±μ€ ν•΄μ‹ νν‹°μ…”λ‹μ μ¬κ· ν•ν™” λ¬Έμ λ¥Ό ν•΄κ²°ν•©λ‹λ‹¤. Karger λ“±μ΄ 1997λ…„μ— λ„μ…ν–μµλ‹λ‹¤.</p>
<p><strong>κ°λ…</strong>: ν‚¤μ™€ λ…Έλ“ λ¨λ‘ μ›ν• ν•΄μ‹ λ§μ— λ§¤ν•‘λ©λ‹λ‹¤.</p>
<div class="highlight"><pre><span></span><code>           0 (= 2^32)
            β”‚
            β”‚
   N3 β”€β”€β”€β”€ β”‚ β”€β”€β”€β”€ N1
  (hash=    β”‚     (hash=
   300)     β”‚      50)
            β”‚
            β”‚
            β”‚
            β”‚
   N2 β”€β”€β”€β”€ β”‚
  (hash=    β”‚
   180)     β”‚

ν‚¤λ” μ‹κ³„ λ°©ν–¥μΌλ΅ μ²« λ²μ§Έ λ…Έλ“μ— ν• λ‹Ή:
  h(&quot;k1&quot;) = 30  β†’ N1 (30μ—μ„ μ‹κ³„ λ°©ν–¥μΌλ΅ λ‹¤μμ€ 50μ N1)
  h(&quot;k2&quot;) = 70  β†’ N2 (70μ—μ„ μ‹κ³„ λ°©ν–¥μΌλ΅ λ‹¤μμ€ 180μ N2)
  h(&quot;k3&quot;) = 200 β†’ N3 (200μ—μ„ μ‹κ³„ λ°©ν–¥μΌλ΅ λ‹¤μμ€ 300μ N3)
  h(&quot;k4&quot;) = 310 β†’ N1 (50μ N1λ΅ λ©μ–΄λΌμ΄λ“)
</code></pre></div>

<p><strong>λ…Έλ“ μ¶”κ°€</strong>: μƒ λ…Έλ“μ™€ κ·Έ μ„ ν–‰μ μ‚¬μ΄μ ν‚¤λ§ μ΄λ™ν•λ©΄ λ©λ‹λ‹¤.</p>
<div class="highlight"><pre><span></span><code><span class="n">Before</span><span class="o">:</span><span class="w"> </span><span class="n">N1</span><span class="o">(</span><span class="mi">50</span><span class="o">),</span><span class="w"> </span><span class="n">N2</span><span class="o">(</span><span class="mi">180</span><span class="o">),</span><span class="w"> </span><span class="n">N3</span><span class="o">(</span><span class="mi">300</span><span class="o">)</span>
<span class="err">μ„μΉ</span><span class="w"> </span><span class="mi">120</span><span class="err">μ—</span><span class="w"> </span><span class="n">N4</span><span class="w"> </span><span class="err">μ¶”κ°€</span><span class="o">:</span>

<span class="w">   </span><span class="n">Before</span><span class="o">:</span>
<span class="w">   </span><span class="n">h</span><span class="o">(</span><span class="s2">&quot;k5&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="err">β†’</span><span class="w"> </span><span class="n">N2</span><span class="w"> </span><span class="o">(</span><span class="mi">100</span><span class="w"> </span><span class="err">λ‹¤μμ€</span><span class="w"> </span><span class="mi">180</span><span class="err">μ</span><span class="w"> </span><span class="n">N2μ€μ</span><span class="o">)</span>

<span class="w">   </span><span class="n">After</span><span class="o">:</span>
<span class="w">   </span><span class="n">h</span><span class="o">(</span><span class="s2">&quot;k5&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="err">β†’</span><span class="w"> </span><span class="n">N4</span><span class="w"> </span><span class="o">(</span><span class="mi">100</span><span class="w"> </span><span class="err">λ‹¤μμ€</span><span class="w"> </span><span class="err">μ΄μ </span><span class="w"> </span><span class="mi">120</span><span class="err">μ</span><span class="w"> </span><span class="n">N4</span><span class="o">)</span>

<span class="w">   </span><span class="err">λ²”μ„</span><span class="w"> </span><span class="o">(</span><span class="mi">50</span><span class="o">,</span><span class="w"> </span><span class="mi">120</span><span class="o">]</span><span class="err">μ</span><span class="w"> </span><span class="err">ν‚¤λ§</span><span class="w"> </span><span class="n">N2μ—μ„</span><span class="w"> </span><span class="n">N4λ΅</span><span class="w"> </span><span class="err">μ΄λ™</span><span class="o">.</span>
<span class="w">   </span><span class="err">λ‹¤λ¥Έ</span><span class="w"> </span><span class="err">λ¨λ“ </span><span class="w"> </span><span class="err">ν‚¤λ”</span><span class="w"> </span><span class="err">ν„μ¬</span><span class="w"> </span><span class="err">λ…Έλ“μ—</span><span class="w"> </span><span class="err">μ μ§€</span><span class="o">!</span>
</code></pre></div>

<p><strong>κ°€μƒ λ…Έλ“</strong>: κ· λ“±ν• λ¶„ν¬λ¥Ό λ³΄μ¥ν•κΈ° μ„ν•΄ κ° λ¬Όλ¦¬μ  λ…Έλ“μ— μ—¬λ¬ "κ°€μƒ" μ„μΉλ¥Ό ν• λ‹Ήν•©λ‹λ‹¤.</p>
<div class="highlight"><pre><span></span><code>Physical Node A β†’ μ„μΉ 50, 120, 240μ κ°€μƒ λ…Έλ“
Physical Node B β†’ μ„μΉ 80, 190, 310μ κ°€μƒ λ…Έλ“
Physical Node C β†’ μ„μΉ 30, 160, 280μ κ°€μƒ λ…Έλ“

λ¬Όλ¦¬μ  λ…Έλ“λ‹Ή λ” λ§μ€ κ°€μƒ λ…Έλ“:
- ν‚¤μ λ” κ· λ“±ν• λ¶„ν¬
- λ…Έλ“ κ²°ν•©/μ΄νƒ μ‹ λ” λ¶€λ“λ¬μ΄ μ¬κ· ν•ν™”
- λ” λ‚μ€ μ¥μ•  ν—μ©μ„± (μ‹¤ν¨ν• λ…Έλ“μ λ¶€ν•κ°€ λ§μ€ λ…Έλ“μ— λ¶„μ‚°)
</code></pre></div>

<p><strong>μ‚¬μ©μ²</strong>: Dynamo, Cassandra, Riak, Memcached, CDN λ΅λ“ λ°Έλ°μ‹±</p>
<h3 id="104">10.4 νν‹°μ…”λ‹ λΉ„κµ<a class="header-link" href="#104" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>κΈ°λ¥</th>
<th>Range</th>
<th>Hash</th>
<th>Consistent Hashing</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>λ²”μ„ μΏΌλ¦¬</strong></td>
<td>ν¨μ¨μ </td>
<td>λ¶κ°€λ¥</td>
<td>λ¶κ°€λ¥</td>
</tr>
<tr>
<td><strong>λ¶€ν• λ¶„μ‚°</strong></td>
<td>νΈν–¥λ  μ μμ</td>
<td>κ· λ“±</td>
<td>κ· λ“± (vnodes μ‚¬μ©)</td>
</tr>
<tr>
<td><strong>μ¬κ· ν•ν™” λΉ„μ©</strong></td>
<td>λ²”μ„ λ¶„ν• /λ³‘ν•©</td>
<td>~1/N μ¬ν•΄μ‹±</td>
<td>~1/N μ΄λ™</td>
</tr>
<tr>
<td><strong>ν•«μ¤ν</strong></td>
<td>κ°€λ¥</td>
<td>κ°€λ¥μ„± λ‚®μ</td>
<td>κ°€λ¥μ„± λ‚®μ</td>
</tr>
<tr>
<td><strong>κµ¬ν„</strong></td>
<td>κ°„λ‹¨</td>
<td>κ°„λ‹¨</td>
<td>μ¤‘κ°„</td>
</tr>
<tr>
<td><strong>μμ„</strong></td>
<td>μ μ§€λ¨</td>
<td>μ†μ‹¤λ¨</td>
<td>μ†μ‹¤λ¨</td>
</tr>
</tbody>
</table>
<h3 id="105">10.5 λ³µν•© νν‹°μ…”λ‹<a class="header-link" href="#105" title="Permanent link">&para;</a></h3>
<p>μΌλ¶€ λ°μ΄ν„°λ² μ΄μ¤λ” μ΅°ν•©μ„ μ‚¬μ©ν•©λ‹λ‹¤: λ¶„μ‚°μ„ μ„ν•΄ νν‹°μ… ν‚¤λ¥Ό ν•΄μ‹±ν• λ‹¤μ μ •λ ¬ ν‚¤λ¥Ό μ‚¬μ©ν•μ—¬ κ° νν‹°μ… λ‚΄μ—μ„ λ²”μ„ μμ„λ¥Ό μ§€μ •ν•©λ‹λ‹¤.</p>
<div class="highlight"><pre><span></span><code><span class="n">Cassandra</span><span class="o">:</span><span class="w"> </span><span class="n">PRIMARY</span><span class="w"> </span><span class="n">KEY</span><span class="w"> </span><span class="o">((</span><span class="n">partition_key</span><span class="o">),</span><span class="w"> </span><span class="n">clustering_key</span><span class="o">)</span>
<span class="n">DynamoDB</span><span class="o">:</span><span class="w">  </span><span class="n">Partition</span><span class="w"> </span><span class="n">Key</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Sort</span><span class="w"> </span><span class="n">Key</span>

<span class="err">μ</span><span class="o">:</span><span class="w"> </span><span class="n">Messages</span><span class="w"> </span><span class="err">ν…μ΄λΈ”</span>
<span class="w">  </span><span class="n">Partition</span><span class="w"> </span><span class="n">Key</span><span class="o">:</span><span class="w"> </span><span class="n">conversation_id</span><span class="w"> </span><span class="o">(</span><span class="err">ν•΄μ‹λ¨</span><span class="w"> </span><span class="err">β†’</span><span class="w"> </span><span class="err">κ· λ“±</span><span class="w"> </span><span class="err">λ¶„ν¬</span><span class="o">)</span>
<span class="w">  </span><span class="n">Sort</span><span class="w"> </span><span class="n">Key</span><span class="o">:</span><span class="w"> </span><span class="n">timestamp</span><span class="w"> </span><span class="o">(</span><span class="err">νν‹°μ…</span><span class="w"> </span><span class="err">λ‚΄</span><span class="w"> </span><span class="err">λ²”μ„</span><span class="w"> </span><span class="err">μμ„</span><span class="o">)</span>

<span class="err">λ¬Όλ¦¬μ </span><span class="w"> </span><span class="err">λ μ΄μ•„μ›ƒ</span><span class="o">:</span>
<span class="w">  </span><span class="n">Node</span><span class="w"> </span><span class="n">A</span><span class="o">:</span><span class="w"> </span><span class="n">conversation_123</span><span class="w"> </span><span class="err">β†’</span><span class="w"> </span><span class="o">[</span><span class="n">msg</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">t1</span><span class="o">,</span><span class="w"> </span><span class="n">msg</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">t2</span><span class="o">,</span><span class="w"> </span><span class="n">msg</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">t3</span><span class="o">,</span><span class="w"> </span><span class="o">...]</span><span class="w">  </span><span class="o">(</span><span class="err">μ •λ ¬λ¨</span><span class="o">)</span>
<span class="w">  </span><span class="n">Node</span><span class="w"> </span><span class="n">B</span><span class="o">:</span><span class="w"> </span><span class="n">conversation_456</span><span class="w"> </span><span class="err">β†’</span><span class="w"> </span><span class="o">[</span><span class="n">msg</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">t1</span><span class="o">,</span><span class="w"> </span><span class="n">msg</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">t2</span><span class="o">,</span><span class="w"> </span><span class="o">...]</span><span class="w">  </span><span class="o">(</span><span class="err">μ •λ ¬λ¨</span><span class="o">)</span>

<span class="err">μΏΌλ¦¬</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;conversation_123μ μ§€λ‚ 1μ‹κ°„ λ©”μ‹μ§€ κ°€μ Έμ¤κΈ°&quot;</span>
<span class="w">  </span><span class="err">β†’</span><span class="w"> </span><span class="n">conversation_123</span><span class="w"> </span><span class="err">ν•΄μ‹</span><span class="w"> </span><span class="err">β†’</span><span class="w"> </span><span class="n">Node</span><span class="w"> </span><span class="n">A</span>
<span class="w">  </span><span class="err">β†’</span><span class="w"> </span><span class="err">νν‹°μ…</span><span class="w"> </span><span class="err">λ‚΄</span><span class="w"> </span><span class="n">timestampμ—</span><span class="w"> </span><span class="err">λ€ν•</span><span class="w"> </span><span class="err">λ²”μ„</span><span class="w"> </span><span class="err">μ¤μΊ”</span><span class="w"> </span><span class="o">(</span><span class="err">ν¨μ¨μ </span><span class="o">!)</span>
</code></pre></div>

<hr />
<h2 id="11">11. μ—°μµλ¬Έμ <a class="header-link" href="#11" title="Permanent link">&para;</a></h2>
<h3 id="1_1">μ—°μµλ¬Έμ  1: μ•„ν‚¤ν…μ² μ„ νƒ<a class="header-link" href="#1_1" title="Permanent link">&para;</a></h3>
<p>λ‹¤μ κ° μ‹λ‚λ¦¬μ¤μ— λ€ν•΄ λ¶„μ‚° λ°μ΄ν„°λ² μ΄μ¤ μ•„ν‚¤ν…μ²(shared-nothing, shared-disk, shared-memory)λ¥Ό κ¶μ¥ν•κ³  μ„ νƒμ„ μ •λ‹Ήν™”ν•μ„Έμ”.</p>
<ol>
<li>4κ° λ€λ¥™μ— λ°μ΄ν„°μ„Όν„°κ°€ μκ³  5μ–µ λ…μ μ‚¬μ©μλ¥Ό μ„λΉ„μ¤ν•λ” κΈ€λ΅λ² μ „μμƒκ±°λ νμ‚¬.</li>
<li>20λ…μ λ™μ‹ λ¶„μ„κ°€μ™€ ν•¨κ» 10 TBμ λ°μ΄ν„°μ— λ€ν• λ¶„μ„μ„ μ‹¤ν–‰ν•λ” μ¤‘κ°„ κ·λ¨ νμ‚¬.</li>
<li>λ‹¨μΌ λ°μ΄ν„°λ² μ΄μ¤ μ„λ²„κ°€ ν•κ³„μ— λ„λ‹¬ν•μ—¬ μ €μ¥μ†μ™€ λ…λ¦½μ μΌλ΅ μ»΄ν“¨ν…μ„ ν™•μ¥ν•΄μ•Ό ν•λ” μ¤νƒ€νΈμ—….</li>
</ol>
<h3 id="2_1">μ—°μµλ¬Έμ  2: λ‹¨νΈν™” μ„¤κ³„<a class="header-link" href="#2_1" title="Permanent link">&para;</a></h3>
<p>λ‹¤μ μ¤ν‚¤λ§κ°€ μ£Όμ–΄μ΅μ„ λ•:</p>
<div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">id</span><span class="w"> </span><span class="nb">INT</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
<span class="w">  </span><span class="n">dept_id</span><span class="w"> </span><span class="nb">INT</span><span class="p">,</span>
<span class="w">  </span><span class="n">salary</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">,</span>
<span class="w">  </span><span class="n">ssn</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">11</span><span class="p">),</span>
<span class="w">  </span><span class="n">hire_date</span><span class="w"> </span><span class="nb">DATE</span>
<span class="p">);</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">id</span><span class="w"> </span><span class="nb">INT</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
<span class="w">  </span><span class="k">location</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
<span class="p">);</span>
</code></pre></div>

<p>3κ° λ…Έλ“(New York, London, Tokyoμ— ν•λ‚μ”©)κ°€ μλ” λ¶„μ‚° λ°μ΄ν„°λ² μ΄μ¤λ¥Ό μ„ν• λ‹¨νΈν™” μ „λµμ„ μ„¤κ³„ν•μ„Έμ”. νμ‚¬λ” μ„Έ λ„μ‹ λ¨λ‘μ— λ¶€μ„κ°€ μμµλ‹λ‹¤. κ³ λ ¤μ‚¬ν•­:
1. <code>employees</code>λ¥Ό μ–΄λ–»κ² μν‰ λ‹¨νΈν™”ν•κ² μµλ‹κΉ?
2. λ―Όκ°ν• λ°μ΄ν„°λ¥Ό λ³΄νΈν•κΈ° μ„ν•΄ <code>employees</code>λ¥Ό μ–΄λ–»κ² μμ§ λ‹¨νΈν™”ν•κ² μµλ‹κΉ?
3. <code>departments</code>λ¥Ό λ³µμ ν•΄μ•Ό ν•©λ‹κΉ μ•„λ‹λ©΄ λ‹¨νΈν™”ν•΄μ•Ό ν•©λ‹κΉ? μ™?
4. λ‹¨νΈμ— λ€ν• μ™„μ „μ„± λ° μ¬κµ¬μ„± μ΅°κ±΄μ„ ν™•μΈν•μ„Έμ”.</p>
<h3 id="3_1">μ—°μµλ¬Έμ  3: μΏΌλΌ κ³„μ‚°<a class="header-link" href="#3_1" title="Permanent link">&para;</a></h3>
<p>N = 5 λ³µμ λ³Έμ„ κ°€μ§„ ν΄λ¬μ¤ν„°κ°€ μ£Όμ–΄μ΅μ„ λ•:</p>
<ol>
<li>μ–΄λ–¤ Wμ™€ R κ°’μ΄ κ°•ν• μΌκ΄€μ„±μ„ λ³΄μ¥ν•©λ‹κΉ?</li>
<li>W = 3μ΄κ³  R = 3μ΄λ©΄, μ‹μ¤ν…μ€ μ½κΈ°λ¥Ό μ„ν•΄ λ‡ κ°μ λ…Έλ“ μ¥μ• λ¥Ό ν—μ©ν•  μ μμµλ‹κΉ? μ“°κΈ°λ¥Ό μ„ν•΄?</li>
<li>μ“°κΈ°λ¥Ό λΉ λ¥΄κ² ν•λ ¤λ©΄(W = 1), κ°•ν• μΌκ΄€μ„±μ„ μ„ν•΄ Rμ€ λ¬΄μ—‡μ΄μ–΄μ•Ό ν•©λ‹κΉ? μ½κΈ° μ§€μ—°μ— λ€ν• ν•¨μλ”?</li>
<li>μ‹μ¤ν…μ΄ N = 7, W = 4, R = 4λ¥Ό κ°€μ§‘λ‹λ‹¤. μ΄κ²ƒμ€ κ°•ν•κ² μΌκ΄€λ©λ‹κΉ? λ‡ κ°μ μ¥μ• λ¥Ό ν—μ©ν•  μ μμµλ‹κΉ?</li>
</ol>
<h3 id="4-2pc">μ—°μµλ¬Έμ  4: 2PC μ¶”μ <a class="header-link" href="#4-2pc" title="Permanent link">&para;</a></h3>
<p>λ‹¤μ μ‹λ‚λ¦¬μ¤μ— λ€ν• 2PC ν”„λ΅ν† μ½μ„ μ¶”μ ν•μ„Έμ”:</p>
<p>νΈλμ­μ… Tκ°€ Account A (Node 1)μ—μ„ Account B (Node 2)λ΅ $500μ„ μ΄μ²΄ν•©λ‹λ‹¤.</p>
<ol>
<li>λ‘ λ…Έλ“κ°€ λ¨λ‘ YESλ΅ ν¬ν‘ν•  λ•μ λ©”μ‹μ§€ μ‹ν€€μ¤λ¥Ό λ³΄μ΄μ„Έμ”.</li>
<li>Node 2κ°€ NOλ΅ ν¬ν‘ν•  λ•μ λ©”μ‹μ§€ μ‹ν€€μ¤λ¥Ό λ³΄μ΄μ„Έμ”.</li>
<li>μ½”λ””λ„¤μ΄ν„°κ°€ λ¨λ“  YES ν¬ν‘λ¥Ό λ°›μ€ ν›„ COMMIT λ©”μ‹μ§€λ¥Ό λ³΄λ‚΄κΈ° μ „μ— ν¬λμ‹ν•λ©΄ μ–΄λ–»κ² λ©λ‹κΉ? μ°Έκ°€μλ“¤μ€ μ–΄λ–¤ μƒνƒμ— μμµλ‹κΉ? μ–Όλ§λ‚ μ¤λ κΈ°λ‹¤λ¦΄ μ μμµλ‹κΉ?</li>
</ol>
<h3 id="5">μ—°μµλ¬Έμ  5: ν•©μ μ‹λ‚λ¦¬μ¤<a class="header-link" href="#5" title="Permanent link">&para;</a></h3>
<p>λ…Έλ“ Aκ°€ term 3μ ν„μ¬ λ¦¬λ”μΈ 5-λ…Έλ“ Raft ν΄λ¬μ¤ν„°(λ…Έλ“ A, B, C, D, E)λ¥Ό κ³ λ ¤ν•μ„Έμ”.</p>
<ol>
<li>λ…Έλ“ Aκ°€ ν¬λμ‹ν•©λ‹λ‹¤. λ¦¬λ” μ„ μ¶ ν”„λ΅μ„Έμ¤λ¥Ό λ‹¨κ³„λ³„λ΅ μ„¤λ…ν•μ„Έμ”. μ–΄λ–¤ λ…Έλ“κ°€ μƒ λ¦¬λ”κ°€ λκ³  μ™?</li>
<li>ν¬λμ‹ μ „μ— λ…Έλ“ Aλ” λ΅κ·Έ ν•­λ© [term 3, SET x=5]λ¥Ό λ…Έλ“ A, B, Cμ— λ³µμ ν–μµλ‹λ‹¤ (Dμ™€ Eμ—λ” μ•„λ‹). μ΄ ν•­λ©μ€ μ»¤λ°‹λμ—μµλ‹κΉ? μ™ λλ” μ™ μ•„λ‹™λ‹κΉ?</li>
<li>λ…Έλ“ Bκ°€ term 4μ μƒ λ¦¬λ”κ°€ λλ©΄, λ΅κ·Έμ— ν•­λ© [term 3, SET x=5]λ¥Ό ν¬ν•¨ν•©λ‹κΉ? μ„¤λ…ν•μ„Έμ”.</li>
</ol>
<h3 id="6">μ—°μµλ¬Έμ  6: λ¶„μ‚° κµμ°© μƒνƒ<a class="header-link" href="#6" title="Permanent link">&para;</a></h3>
<p>λ‘ λ…Έλ“μ— κ±Έμ³ μ„Έ κ°μ νΈλμ­μ…μ΄ μ‹¤ν–‰λ©λ‹λ‹¤:</p>
<div class="highlight"><pre><span></span><code>Node 1:
  T1μ€ row Aμ— λ€ν• μ κΈμ„ λ³΄μ , row Bμ— λ€ν• μ κΈ λ€κΈ° (T2κ°€ λ³΄μ )
  T2λ” row Bμ— λ€ν• μ κΈμ„ λ³΄μ 

Node 2:
  T2λ” row Cμ— λ€ν• μ κΈ λ€κΈ° (T3κ°€ λ³΄μ )
  T3λ” row Cμ— λ€ν• μ κΈμ„ λ³΄μ , Node 1μ row Aμ— λ€ν• μ κΈ λ€κΈ° (T1μ΄ λ³΄μ )
</code></pre></div>

<ol>
<li>μ „μ—­ λ€κΈ° κ·Έλν”„λ¥Ό κ·Έλ¦¬μ„Έμ”.</li>
<li>κµμ°© μƒνƒκ°€ μμµλ‹κΉ? μλ‹¤λ©΄ μ‚¬μ΄ν΄μ„ κΉ¨κΈ° μ„ν•΄ μ–΄λ–¤ νΈλμ­μ…μ„ μ¤‘λ‹¨ν•΄μ•Ό ν•©λ‹κΉ?</li>
<li>μ¤‘μ•™μ§‘μ¤‘μ‹ κµμ°© μƒνƒ κ°μ§€κΈ°λ” μ΄ κµμ°© μƒνƒλ¥Ό μ–΄λ–»κ² λ°κ²¬ν•©λ‹κΉ?</li>
<li>νƒ€μ„μ•„μ›ƒ κΈ°λ° μ ‘κ·Όλ²•μ€ μ΄λ¥Ό μ–΄λ–»κ² μ²λ¦¬ν•©λ‹κΉ? μ„ν—μ€ λ¬΄μ—‡μ…λ‹κΉ?</li>
</ol>
<h3 id="7">μ—°μµλ¬Έμ  7: νν‹°μ…”λ‹ μ „λµ<a class="header-link" href="#7" title="Permanent link">&para;</a></h3>
<p>μ†μ… λ―Έλ””μ–΄ ν”λ«νΌμ„ μ„ν• λ¶„μ‚° λ°μ΄ν„°λ² μ΄μ¤λ¥Ό μ„¤κ³„ν•κ³  μμµλ‹λ‹¤. <code>posts</code> ν…μ΄λΈ”μ€ λ‹¤μ μ¤ν‚¤λ§λ¥Ό κ°€μ§‘λ‹λ‹¤:</p>
<div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">posts</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">post_id</span><span class="w"> </span><span class="nb">BIGINT</span><span class="p">,</span>
<span class="w">  </span><span class="n">user_id</span><span class="w"> </span><span class="nb">BIGINT</span><span class="p">,</span>
<span class="w">  </span><span class="n">content</span><span class="w"> </span><span class="nb">TEXT</span><span class="p">,</span>
<span class="w">  </span><span class="n">created_at</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="p">,</span>
<span class="w">  </span><span class="n">like_count</span><span class="w"> </span><span class="nb">INT</span>
<span class="p">);</span>
</code></pre></div>

<p>μΌλ°μ μΈ μΏΌλ¦¬:
1. νΉμ • μ‚¬μ©μμ λ¨λ“  κ²μ‹λ¬Όμ„ μƒμ„± μ‹κ°„μμΌλ΅ κ°€μ Έμ¤κΈ° (μµμ‹ μ).
2. IDλ΅ νΉμ • κ²μ‹λ¬Ό κ°€μ Έμ¤κΈ°.
3. λ¨λ“  μ‚¬μ©μμ μµκ·Ό κ²μ‹λ¬Ό 100κ° κ°€μ Έμ¤κΈ° (κΈ€λ΅λ² νƒ€μ„λΌμΈ).</p>
<p>κ° νν‹°μ…”λ‹ μ „λµ(user_idλ΅ λ²”μ„, post_idλ΅ ν•΄μ‹, user_idλ΅ μΌκ΄€λ ν•΄μ‹±)μ— λ€ν•΄:
1. κ° μΏΌλ¦¬κ°€ μ–΄λ–»κ² μ‹¤ν–‰λ μ§€ μ„¤λ…ν•μ„Έμ”.
2. μ μ¬μ  ν•«μ¤νμ„ μ‹λ³„ν•μ„Έμ”.
3. μµμƒμ μ „λµμ„ κ¶μ¥ν•κ³  μ„ νƒμ„ μ •λ‹Ήν™”ν•μ„Έμ”.</p>
<h3 id="8_1">μ—°μµλ¬Έμ  8: μΌκ΄€λ ν•΄μ‹±<a class="header-link" href="#8_1" title="Permanent link">&para;</a></h3>
<p>μ„μΉ [0, 360)μ μΌκ΄€λ ν•΄μ‹± λ§μ΄ μ£Όμ–΄μ΅μ„ λ•:</p>
<p>λ…Έλ“: A at 45, B at 120, C at 200, D at 310</p>
<p>ν‚¤μ™€ κ·Έ ν•΄μ‹ κ°’:
- k1 = 30, k2 = 90, k3 = 150, k4 = 210, k5 = 330, k6 = 10</p>
<ol>
<li>κ° ν‚¤μ— λ€ν•΄ μ–΄λ–¤ λ…Έλ“κ°€ μ±…μ„μ΄ μμµλ‹κΉ?</li>
<li>λ…Έλ“ Eκ°€ μ„μΉ 170μ— μ¶”κ°€λ©λ‹λ‹¤. μ–΄λ–¤ ν‚¤κ°€ μ¬ν• λ‹Ήλκ³  μ–΄λ λ…Έλ“λ΅?</li>
<li>λ…Έλ“ Bκ°€ μ‹¤ν¨ν•©λ‹λ‹¤. μ–΄λ–¤ ν‚¤κ°€ μ¬ν• λ‹Ήλκ³  μ–΄λ λ…Έλ“λ΅?</li>
<li>κ° λ¬Όλ¦¬μ  λ…Έλ“κ°€ 3κ°μ κ°€μƒ λ…Έλ“λ¥Ό κ°€μ§€λ©΄(μ: A at 45, 165, 285), ν‚¤ ν• λ‹Ήμ„ λ‹¤μ‹ ν•μ„Έμ”.</li>
</ol>
<h3 id="9">μ—°μµλ¬Έμ  9: λ³µμ  μ¶©λ ν•΄κ²°<a class="header-link" href="#9" title="Permanent link">&para;</a></h3>
<p>λ‘ μ‚¬μ©μκ°€ λ¦¬λ” μ—†λ” λ³µμ  μ‹μ¤ν…(3κ° λ³µμ λ³Έ)μ—μ„ κ³µμ  λ¬Έμ„λ¥Ό λ™μ‹μ— μ—…λ°μ΄νΈν•©λ‹λ‹¤:</p>
<div class="highlight"><pre><span></span><code>μ‚¬μ©μ X (Replica 1μ— μ—°κ²°): SET title = &quot;Draft v2&quot;    at time T=100
μ‚¬μ©μ Y (Replica 2μ— μ—°κ²°): SET title = &quot;Final Draft&quot;  at time T=101
</code></pre></div>

<p>λ„¤νΈμ›ν¬ νν‹°μ…μΌλ΅ μΈν•΄ Replica 3μ— μ—°κ²°ν•  μ μ—†μµλ‹λ‹¤.</p>
<ol>
<li>Last-Writer-Wins (LWW)μ—μ„ μµμΆ… κ°’μ€ λ¬΄μ—‡μ…λ‹κΉ? λ°μ΄ν„°κ°€ μ†μ‹¤λ©λ‹κΉ?</li>
<li>λ²„μ „ λ²΅ν„°μ—μ„ μ¶©λμ΄ μ–΄λ–»κ² κ°μ§€λκ³  ν‘ν„λ©λ‹κΉ?</li>
<li>μ΄ μ‹λ‚λ¦¬μ¤μ— λ€ν• μ• ν”λ¦¬μΌ€μ΄μ… μμ¤€ ν•΄κ²° μ „λµμ„ μ μ•ν•μ„Έμ”.</li>
<li>CRDT (κµ¬μ²΄μ μΌλ΅ Last-Writer-Wins Register)λ” μ΄λ¥Ό μ–΄λ–»κ² μ²λ¦¬ν•©λ‹κΉ?</li>
</ol>
<h3 id="10_1">μ—°μµλ¬Έμ  10: λ¶„μ‚° μΏΌλ¦¬ μµμ ν™”<a class="header-link" href="#10_1" title="Permanent link">&para;</a></h3>
<p>λ‘ λ…Έλ“μ— κ±Έμ³ λ¶„μ‚°λ λ‘ ν…μ΄λΈ”μ„ κ³ λ ¤ν•μ„Έμ”:</p>
<div class="highlight"><pre><span></span><code>Node 1: orders (10λ°±λ§ ν–‰, 500λ°”μ΄νΈ/ν–‰)
  μ»¬λΌ: order_id, customer_id, total, order_date

Node 2: customers (100,000ν–‰, 200λ°”μ΄νΈ/ν–‰)
  μ»¬λΌ: customer_id, name, city, email
</code></pre></div>

<p>μΏΌλ¦¬: <code>SELECT c.name, o.total FROM orders o JOIN customers c ON o.customer_id = c.customer_id WHERE c.city = 'Tokyo';</code></p>
<p>Tokyo κ³ κ°μ€ μ „μ²΄ κ³ κ°μ 5%μ…λ‹λ‹¤ (5,000λ…).
κ° κ³ κ°μ€ ν‰κ·  ~100κ°μ μ£Όλ¬Έμ„ κ°€μ§‘λ‹λ‹¤.
λ„¤νΈμ›ν¬ μ „μ†΅ λΉ„μ©: MBλ‹Ή 1 ms.</p>
<p>λ‹¤μ μ „λµμ λΉ„μ©μ„ λΉ„κµν•μ„Έμ”:
1. <strong>Ship-whole</strong>: μ „μ²΄ <code>customers</code> ν…μ΄λΈ”μ„ Node 1λ΅ μ „μ†΅, κ±°κΈ°μ„ μ΅°μΈ.
2. <strong>Ship-whole (reverse)</strong>: μ „μ²΄ <code>orders</code> ν…μ΄λΈ”μ„ Node 2λ΅ μ „μ†΅, κ±°κΈ°μ„ μ΅°μΈ.
3. <strong>Semi-join</strong>: Tokyo customer_idsλ¥Ό Node 1λ΅ μ „μ†΅, μΌμΉν•λ” μ£Όλ¬Έ κ°€μ Έμ¤κΈ°, Node 2μ—μ„ μ΅°μΈ.
4. <strong>Bloom filter</strong>: Tokyo customer_idsμ λΈ”λ£Έ ν•„ν„°λ¥Ό Node 1λ΅ μ „μ†΅.</p>
<p>κ° μ „λµμ— λ€ν• λ€λµμ μΈ λ°μ΄ν„° μ „μ†΅λ‰μ„ MBλ΅ κ³„μ‚°ν•μ„Έμ”.</p>
<hr />
<h2 id="12">12. μ°Έκ³ λ¬Έν—<a class="header-link" href="#12" title="Permanent link">&para;</a></h2>
<ol>
<li>Ozsu, M. T. &amp; Valduriez, P. (2020). <em>Principles of Distributed Database Systems</em>, 4th Edition. Springer.</li>
<li>Kleppmann, M. (2017). <em>Designing Data-Intensive Applications</em>. O'Reilly Media. Chapters 5-9.</li>
<li>Lamport, L. (1998). "The Part-Time Parliament" (Paxos). ACM TOCS.</li>
<li>Ongaro, D. &amp; Ousterhout, J. (2014). "In Search of an Understandable Consensus Algorithm" (Raft). USENIX ATC.</li>
<li>Fischer, M., Lynch, N., Paterson, M. (1985). "Impossibility of Distributed Consensus with One Faulty Process" (FLP). JACM.</li>
<li>Corbett, J. et al. (2013). "Spanner: Google's Globally-Distributed Database." ACM TODS.</li>
<li>DeCandia, G. et al. (2007). "Dynamo: Amazon's Highly Available Key-Value Store." SOSP.</li>
<li>Karger, D. et al. (1997). "Consistent Hashing and Random Trees." ACM STOC.</li>
<li>Skeen, D. (1981). "Nonblocking Commit Protocols." ACM SIGMOD.</li>
<li>Gray, J. &amp; Lamport, L. (2006). "Consensus on Transaction Commit." ACM TODS.</li>
</ol>
<hr />
<p><strong>μ΄μ „</strong>: <a href="./13_NoSQL_Data_Models.md">13. NoSQL λ°μ΄ν„° λ¨λΈ</a> | <strong>λ‹¤μ</strong>: <a href="./15_NewSQL_and_Modern_Trends.md">15. NewSQLκ³Ό ν„λ€ νΈλ λ“</a></p>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/ko/Database_Theory/13_NoSQL_Data_Models.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">NoSQL λ°μ΄ν„° λ¨λΈ</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">π”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/ko/Database_Theory/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">π“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/ko/Database_Theory/15_NewSQL_and_Modern_Trends.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">NewSQLκ³Ό ν„λ€ νΈλ λ“</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">β†‘</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'ko';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}