{% raw %}
<!DOCTYPE html>
<html lang="ko" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>04. WiFi ë„¤íŠ¸ì›Œí‚¹ - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/ko/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/ko/" class="nav-item ">
                    <span class="nav-icon">ğŸ </span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">ğŸ’»</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/ko/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" >
                        English
                    </option>
                    
                    <option value="ko" selected>
                        í•œêµ­ì–´
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">â˜€ï¸</span>
                    <span class="theme-icon dark">ğŸŒ™</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/ko/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/ko/IoT_Embedded/">IoT Embedded</a>
    <span class="separator">/</span>
    <span class="current">04. WiFi ë„¤íŠ¸ì›Œí‚¹</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>04. WiFi ë„¤íŠ¸ì›Œí‚¹</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/ko/IoT_Embedded/03_Python_GPIO_Control.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">03. Python GPIO ì œì–´</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/ko/IoT_Embedded/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/ko/IoT_Embedded/05_BLE_Connectivity.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">05. BLE ì—°ê²°</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#_1">í•™ìŠµ ëª©í‘œ</a></li>
<li><a href="#1-wifi">1. ë¼ì¦ˆë² ë¦¬íŒŒì´ WiFi ì„¤ì •</a><ul>
<li><a href="#11-wifi">1.1 ëª…ë ¹ì¤„ WiFi ì„¤ì •</a></li>
<li><a href="#12-wpa_supplicant">1.2 wpa_supplicant ì„¤ì •</a></li>
<li><a href="#13-python-wifi">1.3 Pythonìœ¼ë¡œ WiFi ì •ë³´ ì¡°íšŒ</a></li>
</ul>
</li>
<li><a href="#2-python">2. Python ì†Œì¼“ í”„ë¡œê·¸ë˜ë°</a><ul>
<li><a href="#21">2.1 ì†Œì¼“ ê¸°ì´ˆ</a></li>
<li><a href="#22-tcp">2.2 TCP ì„œë²„</a></li>
<li><a href="#23-tcp">2.3 TCP í´ë¼ì´ì–¸íŠ¸</a></li>
<li><a href="#24-udp">2.4 UDP ì†Œì¼“</a></li>
</ul>
</li>
<li><a href="#3-esp32-wifi">3. ESP32 WiFi ê°œìš”</a><ul>
<li><a href="#31-esp32">3.1 ESP32ì™€ ë¼ì¦ˆë² ë¦¬íŒŒì´ ë¹„êµ</a></li>
<li><a href="#32-esp32-micropython-wifi">3.2 ESP32 MicroPython WiFi ì˜ˆì œ</a></li>
<li><a href="#33-esp32">3.3 ë¼ì¦ˆë² ë¦¬íŒŒì´ - ESP32 í†µì‹  ì•„í‚¤í…ì²˜</a></li>
</ul>
</li>
<li><a href="#4">4. ë„¤íŠ¸ì›Œí¬ ìŠ¤ìº” ë° ëª¨ë‹ˆí„°ë§</a><ul>
<li><a href="#41">4.1 ë„¤íŠ¸ì›Œí¬ ì¥ì¹˜ ìŠ¤ìº”</a></li>
<li><a href="#42">4.2 í¬íŠ¸ ìŠ¤ìº”</a></li>
</ul>
</li>
<li><a href="#5-http">5. HTTP í´ë¼ì´ì–¸íŠ¸</a><ul>
<li><a href="#51-requests">5.1 requests ë¼ì´ë¸ŒëŸ¬ë¦¬</a></li>
<li><a href="#52-http">5.2 ë¹„ë™ê¸° HTTP í´ë¼ì´ì–¸íŠ¸</a></li>
<li><a href="#53-http-with">5.3 HTTP í´ë¼ì´ì–¸íŠ¸ with ì¬ì‹œë„</a></li>
</ul>
</li>
<li><a href="#_2">ì—°ìŠµ ë¬¸ì œ</a><ul>
<li><a href="#1-wifi_1">ë¬¸ì œ 1: WiFi ëª¨ë‹ˆí„°ë§</a></li>
<li><a href="#2">ë¬¸ì œ 2: ë¡œì»¬ ì„œë²„</a></li>
<li><a href="#3-http">ë¬¸ì œ 3: HTTP ë¦¬í¬í„°</a></li>
</ul>
</li>
<li><a href="#_3">ë‹¤ìŒ ë‹¨ê³„</a></li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="04-wifi">04. WiFi ë„¤íŠ¸ì›Œí‚¹<a class="header-link" href="#04-wifi" title="Permanent link">&para;</a></h1>
<h2 id="_1">í•™ìŠµ ëª©í‘œ<a class="header-link" href="#_1" title="Permanent link">&para;</a></h2>
<ul>
<li>ë¼ì¦ˆë² ë¦¬íŒŒì´ WiFi ì„¤ì • ë°©ë²• ìŠµë“</li>
<li>Python ì†Œì¼“ í”„ë¡œê·¸ë˜ë° ê¸°ì´ˆ ì´í•´</li>
<li>ESP32 WiFi ê°œìš” íŒŒì•…</li>
<li>ë„¤íŠ¸ì›Œí¬ ìŠ¤ìº” ë° ëª¨ë‹ˆí„°ë§</li>
<li>HTTP í´ë¼ì´ì–¸íŠ¸ë¡œ ë°ì´í„° ì „ì†¡</li>
</ul>
<hr />
<h2 id="1-wifi">1. ë¼ì¦ˆë² ë¦¬íŒŒì´ WiFi ì„¤ì •<a class="header-link" href="#1-wifi" title="Permanent link">&para;</a></h2>
<h3 id="11-wifi">1.1 ëª…ë ¹ì¤„ WiFi ì„¤ì •<a class="header-link" href="#11-wifi" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># í˜„ì¬ WiFi ìƒíƒœ í™•ì¸</span>
iwconfig<span class="w"> </span>wlan0

<span class="c1"># ì‚¬ìš© ê°€ëŠ¥í•œ ë„¤íŠ¸ì›Œí¬ ìŠ¤ìº”</span>
sudo<span class="w"> </span>iwlist<span class="w"> </span>wlan0<span class="w"> </span>scan<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s2">&quot;ESSID|Quality&quot;</span>

<span class="c1"># WiFi ì—°ê²° (nmcli ì‚¬ìš©)</span>
sudo<span class="w"> </span>nmcli<span class="w"> </span>dev<span class="w"> </span>wifi<span class="w"> </span>connect<span class="w"> </span><span class="s2">&quot;SSIDì´ë¦„&quot;</span><span class="w"> </span>password<span class="w"> </span><span class="s2">&quot;ë¹„ë°€ë²ˆí˜¸&quot;</span>

<span class="c1"># ì—°ê²° ìƒíƒœ í™•ì¸</span>
nmcli<span class="w"> </span>connection<span class="w"> </span>show

<span class="c1"># IP ì£¼ì†Œ í™•ì¸</span>
ip<span class="w"> </span>addr<span class="w"> </span>show<span class="w"> </span>wlan0
</code></pre></div>

<h3 id="12-wpa_supplicant">1.2 wpa_supplicant ì„¤ì •<a class="header-link" href="#12-wpa_supplicant" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># /etc/wpa_supplicant/wpa_supplicant.conf í¸ì§‘</span>
sudo<span class="w"> </span>nano<span class="w"> </span>/etc/wpa_supplicant/wpa_supplicant.conf
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1"># /etc/wpa_supplicant/wpa_supplicant.conf</span>
<span class="n">country</span><span class="o">=</span><span class="n">KR</span>
<span class="n">ctrl_interface</span><span class="o">=</span><span class="n">DIR</span><span class="o">=/</span><span class="k">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">wpa_supplicant</span><span class="w"> </span><span class="n">GROUP</span><span class="o">=</span><span class="n">netdev</span>
<span class="n">update_config</span><span class="o">=</span><span class="mi">1</span>

<span class="c1"># ê¸°ë³¸ WPA2 ë„¤íŠ¸ì›Œí¬</span>
<span class="n">network</span><span class="o">=</span><span class="p">{</span>
<span class="w">    </span><span class="n">ssid</span><span class="o">=</span><span class="s2">&quot;MyNetwork&quot;</span>
<span class="w">    </span><span class="n">psk</span><span class="o">=</span><span class="s2">&quot;MyPassword&quot;</span>
<span class="w">    </span><span class="n">key_mgmt</span><span class="o">=</span><span class="n">WPA</span><span class="o">-</span><span class="n">PSK</span>
<span class="p">}</span>

<span class="c1"># ìˆ¨ê²¨ì§„ ë„¤íŠ¸ì›Œí¬</span>
<span class="n">network</span><span class="o">=</span><span class="p">{</span>
<span class="w">    </span><span class="n">ssid</span><span class="o">=</span><span class="s2">&quot;HiddenNetwork&quot;</span>
<span class="w">    </span><span class="n">scan_ssid</span><span class="o">=</span><span class="mi">1</span>
<span class="w">    </span><span class="n">psk</span><span class="o">=</span><span class="s2">&quot;Password&quot;</span>
<span class="p">}</span>

<span class="c1"># ìš°ì„ ìˆœìœ„ ì„¤ì • (ë†’ì€ ê°’ = ìš°ì„ )</span>
<span class="n">network</span><span class="o">=</span><span class="p">{</span>
<span class="w">    </span><span class="n">ssid</span><span class="o">=</span><span class="s2">&quot;PreferredNetwork&quot;</span>
<span class="w">    </span><span class="n">psk</span><span class="o">=</span><span class="s2">&quot;Password&quot;</span>
<span class="w">    </span><span class="n">priority</span><span class="o">=</span><span class="mi">10</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="13-python-wifi">1.3 Pythonìœ¼ë¡œ WiFi ì •ë³´ ì¡°íšŒ<a class="header-link" href="#13-python-wifi" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env python3</span>
<span class="sd">&quot;&quot;&quot;WiFi ì—°ê²° ì •ë³´ ì¡°íšŒ&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">subprocess</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">re</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_wifi_info</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;í˜„ì¬ WiFi ì—°ê²° ì •ë³´ ë°˜í™˜&quot;&quot;&quot;</span>
    <span class="n">info</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># SSID ì¡°íšŒ</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
            <span class="p">[</span><span class="s1">&#39;iwgetid&#39;</span><span class="p">,</span> <span class="s1">&#39;-r&#39;</span><span class="p">],</span>
            <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
        <span class="n">info</span><span class="p">[</span><span class="s1">&#39;ssid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="c1"># IP ì£¼ì†Œ ì¡°íšŒ</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
            <span class="p">[</span><span class="s1">&#39;hostname&#39;</span><span class="p">,</span> <span class="s1">&#39;-I&#39;</span><span class="p">],</span>
            <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
        <span class="n">ips</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
        <span class="n">info</span><span class="p">[</span><span class="s1">&#39;ip_addresses&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ips</span>

        <span class="c1"># ì‹ í˜¸ ê°•ë„ ì¡°íšŒ</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
            <span class="p">[</span><span class="s1">&#39;iwconfig&#39;</span><span class="p">,</span> <span class="s1">&#39;wlan0&#39;</span><span class="p">],</span>
            <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
        <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;Signal level=(-?\d+)&#39;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
            <span class="n">info</span><span class="p">[</span><span class="s1">&#39;signal_dbm&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>

        <span class="c1"># MAC ì£¼ì†Œ</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
            <span class="p">[</span><span class="s1">&#39;cat&#39;</span><span class="p">,</span> <span class="s1">&#39;/sys/class/net/wlan0/address&#39;</span><span class="p">],</span>
            <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
        <span class="n">info</span><span class="p">[</span><span class="s1">&#39;mac_address&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">info</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">info</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_wifi_networks</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ì£¼ë³€ WiFi ë„¤íŠ¸ì›Œí¬ ìŠ¤ìº”&quot;&quot;&quot;</span>
    <span class="n">networks</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
            <span class="p">[</span><span class="s1">&#39;sudo&#39;</span><span class="p">,</span> <span class="s1">&#39;iwlist&#39;</span><span class="p">,</span> <span class="s1">&#39;wlan0&#39;</span><span class="p">,</span> <span class="s1">&#39;scan&#39;</span><span class="p">],</span>
            <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>

        <span class="n">current_network</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="s1">&#39;ESSID:&#39;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                <span class="n">ssid</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;ESSID:&quot;(.+)&quot;&#39;</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ssid</span> <span class="ow">and</span> <span class="n">current_network</span><span class="p">:</span>
                    <span class="n">networks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current_network</span><span class="p">)</span>
                <span class="n">current_network</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ssid&#39;</span><span class="p">:</span> <span class="n">ssid</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">ssid</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">}</span>

            <span class="k">elif</span> <span class="s1">&#39;Quality=&#39;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                <span class="n">quality</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;Quality=(\d+)/(\d+)&#39;</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">quality</span><span class="p">:</span>
                    <span class="n">current_network</span><span class="p">[</span><span class="s1">&#39;quality&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">quality</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">quality</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

                <span class="n">signal</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;Signal level=(-?\d+)&#39;</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">signal</span><span class="p">:</span>
                    <span class="n">current_network</span><span class="p">[</span><span class="s1">&#39;signal_dbm&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">current_network</span><span class="p">:</span>
            <span class="n">networks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current_network</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ìŠ¤ìº” ì‹¤íŒ¨: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">networks</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== WiFi ì—°ê²° ì •ë³´ ===&quot;</span><span class="p">)</span>
    <span class="n">info</span> <span class="o">=</span> <span class="n">get_wifi_info</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== ì£¼ë³€ WiFi ë„¤íŠ¸ì›Œí¬ ===&quot;</span><span class="p">)</span>
    <span class="n">networks</span> <span class="o">=</span> <span class="n">get_wifi_networks</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">net</span> <span class="ow">in</span> <span class="n">networks</span><span class="p">[:</span><span class="mi">10</span><span class="p">]:</span>  <span class="c1"># ìƒìœ„ 10ê°œë§Œ</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">net</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ssid&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Unknown&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">net</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;signal_dbm&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> dBm&quot;</span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="2-python">2. Python ì†Œì¼“ í”„ë¡œê·¸ë˜ë°<a class="header-link" href="#2-python" title="Permanent link">&para;</a></h2>
<h3 id="21">2.1 ì†Œì¼“ ê¸°ì´ˆ<a class="header-link" href="#21" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">                    </span>ì†Œì¼“<span class="w"> </span>í†µì‹ <span class="w"> </span>íë¦„<span class="w">                            </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                              </span>â”‚
â”‚<span class="w">   </span>í´ë¼ì´ì–¸íŠ¸<span class="w">                              </span>ì„œë²„<span class="w">                </span>â”‚
â”‚<span class="w">   </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">                        </span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”<span class="w">            </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w"> </span><span class="nv">socket</span><span class="ss">()</span>â”‚<span class="w">                        </span>â”‚<span class="w"> </span><span class="nv">socket</span><span class="ss">()</span>â”‚<span class="w">            </span>â”‚
â”‚<span class="w">   </span>â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜<span class="w">                        </span>â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜<span class="w">            </span>â”‚
â”‚<span class="w">        </span>â”‚<span class="w">                                  </span>â”‚<span class="w">                 </span>â”‚
â”‚<span class="w">        </span>â”‚<span class="w">                             </span>â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”<span class="w">            </span>â”‚
â”‚<span class="w">        </span>â”‚<span class="w">                             </span>â”‚<span class="w">  </span><span class="nv">bind</span><span class="ss">()</span><span class="w"> </span>â”‚<span class="w">            </span>â”‚
â”‚<span class="w">        </span>â”‚<span class="w">                             </span>â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜<span class="w">            </span>â”‚
â”‚<span class="w">        </span>â”‚<span class="w">                             </span>â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”<span class="w">            </span>â”‚
â”‚<span class="w">        </span>â”‚<span class="w">                             </span>â”‚<span class="w"> </span><span class="nv">listen</span><span class="ss">()</span>â”‚<span class="w">            </span>â”‚
â”‚<span class="w">        </span>â”‚<span class="w">                             </span>â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜<span class="w">            </span>â”‚
â”‚<span class="w">   </span>â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”<span class="w">      </span>ì—°ê²°<span class="w"> </span>ìš”ì²­<span class="w">         </span>â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”<span class="w">            </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="k">connect</span><span class="ss">()</span>â”‚<span class="w"> </span>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚<span class="w"> </span><span class="nv">accept</span><span class="ss">()</span>â”‚<span class="w">            </span>â”‚
â”‚<span class="w">   </span>â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜<span class="w">                        </span>â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜<span class="w">            </span>â”‚
â”‚<span class="w">        </span>â”‚<span class="w">                                  </span>â”‚<span class="w">                 </span>â”‚
â”‚<span class="w">   </span>â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”<span class="w">      </span>ë°ì´í„°<span class="w"> </span>ì†¡ìˆ˜ì‹ <span class="w">     </span>â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”<span class="w">            </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w">  </span><span class="k">send</span><span class="ss">()</span><span class="w"> </span>â”‚<span class="w"> </span>â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚<span class="w">  </span><span class="nv">recv</span><span class="ss">()</span><span class="w"> </span>â”‚<span class="w">            </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w">  </span><span class="nv">recv</span><span class="ss">()</span><span class="w"> </span>â”‚<span class="w">                        </span>â”‚<span class="w">  </span><span class="k">send</span><span class="ss">()</span><span class="w"> </span>â”‚<span class="w">            </span>â”‚
â”‚<span class="w">   </span>â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜<span class="w">                        </span>â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜<span class="w">            </span>â”‚
â”‚<span class="w">        </span>â”‚<span class="w">                                  </span>â”‚<span class="w">                 </span>â”‚
â”‚<span class="w">   </span>â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”<span class="w">                        </span>â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”<span class="w">            </span>â”‚
â”‚<span class="w">   </span>â”‚<span class="w"> </span><span class="nv">close</span><span class="ss">()</span><span class="w"> </span>â”‚<span class="w">                        </span>â”‚<span class="w"> </span><span class="nv">close</span><span class="ss">()</span><span class="w"> </span>â”‚<span class="w">            </span>â”‚
â”‚<span class="w">   </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">                        </span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span class="w">            </span>â”‚
â”‚<span class="w">                                                              </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="22-tcp">2.2 TCP ì„œë²„<a class="header-link" href="#22-tcp" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env python3</span>
<span class="sd">&quot;&quot;&quot;TCP ì„œë²„ - ì„¼ì„œ ë°ì´í„° ìˆ˜ì‹ &quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">socket</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>

<span class="n">HOST</span> <span class="o">=</span> <span class="s1">&#39;0.0.0.0&#39;</span>  <span class="c1"># ëª¨ë“  ì¸í„°í˜ì´ìŠ¤</span>
<span class="n">PORT</span> <span class="o">=</span> <span class="mi">9999</span>

<span class="k">def</span><span class="w"> </span><span class="nf">start_tcp_server</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;TCP ì„œë²„ ì‹œì‘&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span> <span class="k">as</span> <span class="n">server</span><span class="p">:</span>
        <span class="c1"># ì£¼ì†Œ ì¬ì‚¬ìš© í—ˆìš©</span>
        <span class="n">server</span><span class="o">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">SOL_SOCKET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SO_REUSEADDR</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">server</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="n">HOST</span><span class="p">,</span> <span class="n">PORT</span><span class="p">))</span>
        <span class="n">server</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;TCP ì„œë²„ ì‹œì‘: </span><span class="si">{</span><span class="n">HOST</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">PORT</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">client</span><span class="p">,</span> <span class="n">address</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;í´ë¼ì´ì–¸íŠ¸ ì—°ê²°: </span><span class="si">{</span><span class="n">address</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">with</span> <span class="n">client</span><span class="p">:</span>
                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="p">:</span>
                        <span class="k">break</span>

                    <span class="k">try</span><span class="p">:</span>
                        <span class="c1"># JSON ë°ì´í„° íŒŒì‹±</span>
                        <span class="n">message</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
                        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H:%M:%S&quot;</span><span class="p">)</span>
                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}</span><span class="s2">] ìˆ˜ì‹ : </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                        <span class="c1"># ì‘ë‹µ ì „ì†¡</span>
                        <span class="n">response</span> <span class="o">=</span> <span class="p">{</span>
                            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;ok&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;received&quot;</span><span class="p">:</span> <span class="n">message</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sensor_id&quot;</span><span class="p">)</span>
                        <span class="p">}</span>
                        <span class="n">client</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">response</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>

                    <span class="k">except</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ì˜ëª»ëœ JSON: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;í´ë¼ì´ì–¸íŠ¸ ì—°ê²° ì¢…ë£Œ: </span><span class="si">{</span><span class="n">address</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">start_tcp_server</span><span class="p">()</span>
</code></pre></div>

<h3 id="23-tcp">2.3 TCP í´ë¼ì´ì–¸íŠ¸<a class="header-link" href="#23-tcp" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env python3</span>
<span class="sd">&quot;&quot;&quot;TCP í´ë¼ì´ì–¸íŠ¸ - ì„¼ì„œ ë°ì´í„° ì „ì†¡&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">socket</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">random</span>

<span class="n">SERVER_HOST</span> <span class="o">=</span> <span class="s1">&#39;192.168.1.100&#39;</span>  <span class="c1"># ì„œë²„ IP</span>
<span class="n">SERVER_PORT</span> <span class="o">=</span> <span class="mi">9999</span>

<span class="k">def</span><span class="w"> </span><span class="nf">send_sensor_data</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ì„¼ì„œ ë°ì´í„°ë¥¼ ì„œë²„ë¡œ ì „ì†¡&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
        <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="n">SERVER_HOST</span><span class="p">,</span> <span class="n">SERVER_PORT</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ì„œë²„ ì—°ê²°: </span><span class="si">{</span><span class="n">SERVER_HOST</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">SERVER_PORT</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">sensor_id</span> <span class="o">=</span> <span class="s2">&quot;temp_sensor_01&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                <span class="c1"># ì„¼ì„œ ë°ì´í„° ìƒì„±</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;sensor_id&quot;</span><span class="p">:</span> <span class="n">sensor_id</span><span class="p">,</span>
                    <span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span> <span class="mi">1</span><span class="p">),</span>
                    <span class="s2">&quot;humidity&quot;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">70</span><span class="p">),</span> <span class="mi">1</span><span class="p">),</span>
                    <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
                <span class="p">}</span>

                <span class="c1"># ì „ì†¡</span>
                <span class="n">message</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
                <span class="n">client</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ì „ì†¡: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="c1"># ì‘ë‹µ ìˆ˜ì‹ </span>
                <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">response</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ì‘ë‹µ: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ì—°ê²° ì¢…ë£Œ&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">send_sensor_data</span><span class="p">()</span>
</code></pre></div>

<h3 id="24-udp">2.4 UDP ì†Œì¼“<a class="header-link" href="#24-udp" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env python3</span>
<span class="sd">&quot;&quot;&quot;UDP ì†Œì¼“ í†µì‹  (ë¹ ë¥¸ ì„¼ì„œ ë°ì´í„° ì „ì†¡)&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">socket</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

<span class="c1"># === UDP ì„œë²„ ===</span>
<span class="k">def</span><span class="w"> </span><span class="nf">udp_server</span><span class="p">(</span><span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">9998</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;UDP ì„œë²„&quot;&quot;&quot;</span>
    <span class="n">sock</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_DGRAM</span><span class="p">)</span>
    <span class="n">sock</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="s1">&#39;0.0.0.0&#39;</span><span class="p">,</span> <span class="n">port</span><span class="p">))</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;UDP ì„œë²„ ì‹œì‘: í¬íŠ¸ </span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">data</span><span class="p">,</span> <span class="n">addr</span> <span class="o">=</span> <span class="n">sock</span><span class="o">.</span><span class="n">recvfrom</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">addr</span><span class="si">}</span><span class="s2">] </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># === UDP í´ë¼ì´ì–¸íŠ¸ ===</span>
<span class="k">def</span><span class="w"> </span><span class="nf">udp_client</span><span class="p">(</span><span class="n">server_ip</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">9998</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;UDP í´ë¼ì´ì–¸íŠ¸&quot;&quot;&quot;</span>
    <span class="n">sock</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_DGRAM</span><span class="p">)</span>

    <span class="n">sensor_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;sensor_id&quot;</span><span class="p">:</span> <span class="s2">&quot;motion_01&quot;</span><span class="p">,</span>
        <span class="s2">&quot;motion_detected&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="n">message</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">sensor_data</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
    <span class="n">sock</span><span class="o">.</span><span class="n">sendto</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="p">(</span><span class="n">server_ip</span><span class="p">,</span> <span class="n">port</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ì „ì†¡ ì™„ë£Œ: </span><span class="si">{</span><span class="n">sensor_data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">sock</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;server&#39;</span><span class="p">:</span>
        <span class="n">udp_server</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">udp_client</span><span class="p">(</span><span class="s1">&#39;192.168.1.100&#39;</span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="3-esp32-wifi">3. ESP32 WiFi ê°œìš”<a class="header-link" href="#3-esp32-wifi" title="Permanent link">&para;</a></h2>
<h3 id="31-esp32">3.1 ESP32ì™€ ë¼ì¦ˆë² ë¦¬íŒŒì´ ë¹„êµ<a class="header-link" href="#31-esp32" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>íŠ¹ì„±</th>
<th>ESP32</th>
<th>Raspberry Pi</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>í”„ë¡œì„¸ì„œ</strong></td>
<td>Xtensa 240MHz</td>
<td>ARM 1.5GHz</td>
</tr>
<tr>
<td><strong>RAM</strong></td>
<td>520KB</td>
<td>1-8GB</td>
</tr>
<tr>
<td><strong>OS</strong></td>
<td>FreeRTOS/ì—†ìŒ</td>
<td>Linux</td>
</tr>
<tr>
<td><strong>ì–¸ì–´</strong></td>
<td>C/C++, MicroPython</td>
<td>Python, ëª¨ë“  ì–¸ì–´</td>
</tr>
<tr>
<td><strong>WiFi</strong></td>
<td>ë‚´ì¥</td>
<td>ë‚´ì¥ (Pi 3+)</td>
</tr>
<tr>
<td><strong>ì „ë ¥</strong></td>
<td>ë‚®ìŒ (80mA)</td>
<td>ë†’ìŒ (700mA+)</td>
</tr>
<tr>
<td><strong>ìš©ë„</strong></td>
<td>ì„¼ì„œ ë…¸ë“œ</td>
<td>ê²Œì´íŠ¸ì›¨ì´, ì—£ì§€</td>
</tr>
</tbody>
</table>
<h3 id="32-esp32-micropython-wifi">3.2 ESP32 MicroPython WiFi ì˜ˆì œ<a class="header-link" href="#32-esp32-micropython-wifi" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># ESP32ìš© MicroPython ì½”ë“œ</span>
<span class="c1"># (ì°¸ê³ ìš© - ë¼ì¦ˆë² ë¦¬íŒŒì´ì—ì„œëŠ” ì‹¤í–‰ ë¶ˆê°€)</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">network</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

<span class="k">def</span><span class="w"> </span><span class="nf">connect_wifi</span><span class="p">(</span><span class="n">ssid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ESP32 WiFi ì—°ê²°&quot;&quot;&quot;</span>
    <span class="n">wlan</span> <span class="o">=</span> <span class="n">network</span><span class="o">.</span><span class="n">WLAN</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">STA_IF</span><span class="p">)</span>
    <span class="n">wlan</span><span class="o">.</span><span class="n">active</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">wlan</span><span class="o">.</span><span class="n">isconnected</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;WiFi ì—°ê²° ì¤‘: </span><span class="si">{</span><span class="n">ssid</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">wlan</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">ssid</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>

        <span class="c1"># ì—°ê²° ëŒ€ê¸°</span>
        <span class="n">timeout</span> <span class="o">=</span> <span class="mi">10</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="n">wlan</span><span class="o">.</span><span class="n">isconnected</span><span class="p">()</span> <span class="ow">and</span> <span class="n">timeout</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">timeout</span> <span class="o">-=</span> <span class="mi">1</span>

    <span class="k">if</span> <span class="n">wlan</span><span class="o">.</span><span class="n">isconnected</span><span class="p">():</span>
        <span class="n">ip</span> <span class="o">=</span> <span class="n">wlan</span><span class="o">.</span><span class="n">ifconfig</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;ì—°ê²°ë¨! IP: </span><span class="si">{</span><span class="n">ip</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ip</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ì—°ê²° ì‹¤íŒ¨&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

<span class="c1"># ì‚¬ìš©</span>
<span class="c1"># ip = connect_wifi(&quot;MySSID&quot;, &quot;MyPassword&quot;)</span>
</code></pre></div>

<h3 id="33-esp32">3.3 ë¼ì¦ˆë² ë¦¬íŒŒì´ - ESP32 í†µì‹  ì•„í‚¤í…ì²˜<a class="header-link" href="#33-esp32" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ë¼ì¦ˆë² ë¦¬íŒŒì´ - ESP32 í†µì‹                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         WiFi         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚              â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚              â”‚    â”‚
â”‚   â”‚  Raspberry   â”‚                      â”‚    ESP32     â”‚    â”‚
â”‚   â”‚     Pi       â”‚                      â”‚   ì„¼ì„œ ë…¸ë“œ  â”‚    â”‚
â”‚   â”‚              â”‚                      â”‚              â”‚    â”‚
â”‚   â”‚  - MQTT      â”‚       TCP/UDP        â”‚  - ì˜¨ë„ ì„¼ì„œ â”‚    â”‚
â”‚   â”‚    Broker    â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  - ìŠµë„ ì„¼ì„œ â”‚    â”‚
â”‚   â”‚  - ë°ì´í„°    â”‚                      â”‚  - ëª¨ì…˜ ì„¼ì„œ â”‚    â”‚
â”‚   â”‚    ìˆ˜ì§‘      â”‚       HTTP           â”‚              â”‚    â”‚
â”‚   â”‚  - ë¶„ì„      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  ì €ì „ë ¥      â”‚    â”‚
â”‚   â”‚              â”‚                      â”‚  ë™ì‘        â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚        â”‚                                      â”‚             â”‚
â”‚        â”‚                                      â”‚             â”‚
â”‚        â–¼                                      â–¼             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚   í´ë¼ìš°ë“œ   â”‚                      â”‚   ë°°í„°ë¦¬     â”‚    â”‚
â”‚   â”‚   AWS/GCP    â”‚                      â”‚   ë™ì‘ ê°€ëŠ¥  â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<hr />
<h2 id="4">4. ë„¤íŠ¸ì›Œí¬ ìŠ¤ìº” ë° ëª¨ë‹ˆí„°ë§<a class="header-link" href="#4" title="Permanent link">&para;</a></h2>
<h3 id="41">4.1 ë„¤íŠ¸ì›Œí¬ ì¥ì¹˜ ìŠ¤ìº”<a class="header-link" href="#41" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env python3</span>
<span class="sd">&quot;&quot;&quot;ë„¤íŠ¸ì›Œí¬ ì¥ì¹˜ ìŠ¤ìº”&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">subprocess</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">re</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">concurrent.futures</span><span class="w"> </span><span class="kn">import</span> <span class="n">ThreadPoolExecutor</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">socket</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_local_network</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ë¡œì»¬ ë„¤íŠ¸ì›Œí¬ ì£¼ì†Œ ë°˜í™˜&quot;&quot;&quot;</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_DGRAM</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="s1">&#39;8.8.8.8&#39;</span><span class="p">,</span> <span class="mi">80</span><span class="p">))</span>
        <span class="n">ip</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">getsockname</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="c1"># ë„¤íŠ¸ì›Œí¬ ì£¼ì†Œ ì¶”ì¶œ (ì˜ˆ: 192.168.1.0/24)</span>
    <span class="n">parts</span> <span class="o">=</span> <span class="n">ip</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">parts</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">.0/24&quot;</span>

<span class="k">def</span><span class="w"> </span><span class="nf">ping_host</span><span class="p">(</span><span class="n">ip</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ë‹¨ì¼ í˜¸ìŠ¤íŠ¸ í•‘&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
            <span class="p">[</span><span class="s1">&#39;ping&#39;</span><span class="p">,</span> <span class="s1">&#39;-c&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;-W&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="n">ip</span><span class="p">],</span>
            <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="mi">2</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">returncode</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;ip&#39;</span><span class="p">:</span> <span class="n">ip</span><span class="p">,</span> <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;up&#39;</span><span class="p">}</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">return</span> <span class="kc">None</span>

<span class="k">def</span><span class="w"> </span><span class="nf">scan_network</span><span class="p">(</span><span class="n">network</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ë„¤íŠ¸ì›Œí¬ ì „ì²´ ìŠ¤ìº”&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">network</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">network</span> <span class="o">=</span> <span class="n">get_local_network</span><span class="p">()</span>

    <span class="c1"># IP ë²”ìœ„ ìƒì„±</span>
    <span class="n">base</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">ips</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">base</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">255</span><span class="p">)]</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ìŠ¤ìº” ì¤‘: </span><span class="si">{</span><span class="n">network</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">with</span> <span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span> <span class="k">as</span> <span class="n">executor</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">executor</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">ping_host</span><span class="p">,</span> <span class="n">ips</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
                <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  ë°œê²¬: </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;ip&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">results</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_hostname</span><span class="p">(</span><span class="n">ip</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;IP ì£¼ì†Œì—ì„œ í˜¸ìŠ¤íŠ¸ëª… ì¡°íšŒ&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">socket</span><span class="o">.</span><span class="n">gethostbyaddr</span><span class="p">(</span><span class="n">ip</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;Unknown&quot;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">devices</span> <span class="o">=</span> <span class="n">scan_network</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== ë°œê²¬ëœ ì¥ì¹˜: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">devices</span><span class="p">)</span><span class="si">}</span><span class="s2">ê°œ ===&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="n">devices</span><span class="p">:</span>
        <span class="n">hostname</span> <span class="o">=</span> <span class="n">get_hostname</span><span class="p">(</span><span class="n">device</span><span class="p">[</span><span class="s1">&#39;ip&#39;</span><span class="p">])</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">device</span><span class="p">[</span><span class="s1">&#39;ip&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">hostname</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<h3 id="42">4.2 í¬íŠ¸ ìŠ¤ìº”<a class="header-link" href="#42" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env python3</span>
<span class="sd">&quot;&quot;&quot;ê°„ë‹¨í•œ í¬íŠ¸ ìŠ¤ìº”&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">socket</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">concurrent.futures</span><span class="w"> </span><span class="kn">import</span> <span class="n">ThreadPoolExecutor</span>

<span class="n">COMMON_PORTS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="mi">22</span><span class="p">:</span> <span class="s1">&#39;SSH&#39;</span><span class="p">,</span>
    <span class="mi">80</span><span class="p">:</span> <span class="s1">&#39;HTTP&#39;</span><span class="p">,</span>
    <span class="mi">443</span><span class="p">:</span> <span class="s1">&#39;HTTPS&#39;</span><span class="p">,</span>
    <span class="mi">1883</span><span class="p">:</span> <span class="s1">&#39;MQTT&#39;</span><span class="p">,</span>
    <span class="mi">3306</span><span class="p">:</span> <span class="s1">&#39;MySQL&#39;</span><span class="p">,</span>
    <span class="mi">5432</span><span class="p">:</span> <span class="s1">&#39;PostgreSQL&#39;</span><span class="p">,</span>
    <span class="mi">8080</span><span class="p">:</span> <span class="s1">&#39;HTTP-Alt&#39;</span><span class="p">,</span>
    <span class="mi">8883</span><span class="p">:</span> <span class="s1">&#39;MQTT-TLS&#39;</span>
<span class="p">}</span>

<span class="k">def</span><span class="w"> </span><span class="nf">check_port</span><span class="p">(</span><span class="n">target</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">port</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;í¬íŠ¸ ì—´ë¦¼ í™•ì¸&quot;&quot;&quot;</span>
    <span class="n">sock</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
    <span class="n">sock</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">sock</span><span class="o">.</span><span class="n">connect_ex</span><span class="p">((</span><span class="n">target</span><span class="p">,</span> <span class="n">port</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s1">&#39;port&#39;</span><span class="p">:</span> <span class="n">port</span><span class="p">,</span>
                <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;open&#39;</span><span class="p">,</span>
                <span class="s1">&#39;service&#39;</span><span class="p">:</span> <span class="n">COMMON_PORTS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">port</span><span class="p">,</span> <span class="s1">&#39;unknown&#39;</span><span class="p">)</span>
            <span class="p">}</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">sock</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">return</span> <span class="kc">None</span>

<span class="k">def</span><span class="w"> </span><span class="nf">scan_ports</span><span class="p">(</span><span class="n">target</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">ports</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ì—¬ëŸ¬ í¬íŠ¸ ìŠ¤ìº”&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">ports</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ports</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">COMMON_PORTS</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;í¬íŠ¸ ìŠ¤ìº”: </span><span class="si">{</span><span class="n">target</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">with</span> <span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span> <span class="k">as</span> <span class="n">executor</span><span class="p">:</span>
        <span class="n">futures</span> <span class="o">=</span> <span class="p">{</span><span class="n">executor</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">check_port</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">port</span><span class="p">):</span> <span class="n">port</span> <span class="k">for</span> <span class="n">port</span> <span class="ow">in</span> <span class="n">ports</span><span class="p">}</span>
        <span class="k">for</span> <span class="n">future</span> <span class="ow">in</span> <span class="n">futures</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
                <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  í¬íŠ¸ </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;port&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;service&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">): OPEN&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">results</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">target</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;ìŠ¤ìº”í•  IP ì£¼ì†Œ: &quot;</span><span class="p">)</span>
    <span class="n">scan_ports</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="5-http">5. HTTP í´ë¼ì´ì–¸íŠ¸<a class="header-link" href="#5-http" title="Permanent link">&para;</a></h2>
<h3 id="51-requests">5.1 requests ë¼ì´ë¸ŒëŸ¬ë¦¬<a class="header-link" href="#51-requests" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env python3</span>
<span class="sd">&quot;&quot;&quot;HTTP í´ë¼ì´ì–¸íŠ¸ - ì„¼ì„œ ë°ì´í„° ì „ì†¡&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>

<span class="n">API_BASE</span> <span class="o">=</span> <span class="s2">&quot;http://192.168.1.100:5000/api&quot;</span>

<span class="k">def</span><span class="w"> </span><span class="nf">send_sensor_data</span><span class="p">(</span><span class="n">sensor_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ì„¼ì„œ ë°ì´í„° POST ì „ì†¡&quot;&quot;&quot;</span>
    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_BASE</span><span class="si">}</span><span class="s2">/sensors/</span><span class="si">{</span><span class="n">sensor_id</span><span class="si">}</span><span class="s2">/data&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
            <span class="n">url</span><span class="p">,</span>
            <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
            <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">},</span>
            <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ë°ì´í„° ì „ì†¡ ì„±ê³µ: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ì „ì†¡ ì‹¤íŒ¨: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_sensor_config</span><span class="p">(</span><span class="n">sensor_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ì„¼ì„œ ì„¤ì • ì¡°íšŒ&quot;&quot;&quot;</span>
    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_BASE</span><span class="si">}</span><span class="s2">/sensors/</span><span class="si">{</span><span class="n">sensor_id</span><span class="si">}</span><span class="s2">/config&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ì¡°íšŒ ì‹¤íŒ¨: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="kc">None</span>

<span class="k">def</span><span class="w"> </span><span class="nf">periodic_reporting</span><span class="p">(</span><span class="n">sensor_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">interval</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ì£¼ê¸°ì  ë°ì´í„° ë¦¬í¬íŒ…&quot;&quot;&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">random</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ì„¼ì„œ </span><span class="si">{</span><span class="n">sensor_id</span><span class="si">}</span><span class="s2"> ë¦¬í¬íŒ… ì‹œì‘ (ê°„ê²©: </span><span class="si">{</span><span class="n">interval</span><span class="si">}</span><span class="s2">ì´ˆ)&quot;</span><span class="p">)</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span> <span class="mi">1</span><span class="p">),</span>
            <span class="s2">&quot;humidity&quot;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">70</span><span class="p">),</span> <span class="mi">1</span><span class="p">),</span>
            <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>
        <span class="p">}</span>

        <span class="n">send_sensor_data</span><span class="p">(</span><span class="n">sensor_id</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">periodic_reporting</span><span class="p">(</span><span class="s2">&quot;sensor_001&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</code></pre></div>

<h3 id="52-http">5.2 ë¹„ë™ê¸° HTTP í´ë¼ì´ì–¸íŠ¸<a class="header-link" href="#52-http" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env python3</span>
<span class="sd">&quot;&quot;&quot;ë¹„ë™ê¸° HTTP í´ë¼ì´ì–¸íŠ¸ (aiohttp)&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">aiohttp</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

<span class="n">API_BASE</span> <span class="o">=</span> <span class="s2">&quot;http://192.168.1.100:5000/api&quot;</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">send_data_async</span><span class="p">(</span><span class="n">session</span><span class="p">:</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">,</span>
                          <span class="n">sensor_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                          <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ë¹„ë™ê¸° ë°ì´í„° ì „ì†¡&quot;&quot;&quot;</span>
    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_BASE</span><span class="si">}</span><span class="s2">/sensors/</span><span class="si">{</span><span class="n">sensor_id</span><span class="si">}</span><span class="s2">/data&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">)</span> <span class="k">as</span> <span class="n">response</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
    <span class="k">except</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ì˜¤ë¥˜: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="kc">False</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">batch_send</span><span class="p">(</span><span class="n">sensors</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">data_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ì—¬ëŸ¬ ì„¼ì„œ ë°ì´í„° ë™ì‹œ ì „ì†¡&quot;&quot;&quot;</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">tasks</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">send_data_async</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">sensor</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">sensor</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">sensors</span><span class="p">,</span> <span class="n">data_list</span><span class="p">)</span>
        <span class="p">]</span>

        <span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="n">tasks</span><span class="p">)</span>
        <span class="n">success</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ì „ì†¡ ì™„ë£Œ: </span><span class="si">{</span><span class="n">success</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">sensors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;sensor_001&quot;</span><span class="p">,</span> <span class="s2">&quot;sensor_002&quot;</span><span class="p">,</span> <span class="s2">&quot;sensor_003&quot;</span><span class="p">]</span>
    <span class="n">data_list</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="mf">25.5</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()},</span>
        <span class="p">{</span><span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="mf">26.0</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()},</span>
        <span class="p">{</span><span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="mf">24.8</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()}</span>
    <span class="p">]</span>

    <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">batch_send</span><span class="p">(</span><span class="n">sensors</span><span class="p">,</span> <span class="n">data_list</span><span class="p">))</span>
</code></pre></div>

<h3 id="53-http-with">5.3 HTTP í´ë¼ì´ì–¸íŠ¸ with ì¬ì‹œë„<a class="header-link" href="#53-http-with" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env python3</span>
<span class="sd">&quot;&quot;&quot;ì¬ì‹œë„ ë¡œì§ì´ ìˆëŠ” HTTP í´ë¼ì´ì–¸íŠ¸&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">requests.adapters</span><span class="w"> </span><span class="kn">import</span> <span class="n">HTTPAdapter</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">urllib3.util.retry</span><span class="w"> </span><span class="kn">import</span> <span class="n">Retry</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

<span class="k">def</span><span class="w"> </span><span class="nf">create_session_with_retry</span><span class="p">(</span>
    <span class="n">retries</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
    <span class="n">backoff_factor</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="n">status_forcelist</span><span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="mi">502</span><span class="p">,</span> <span class="mi">503</span><span class="p">,</span> <span class="mi">504</span><span class="p">)</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ì¬ì‹œë„ ì„¤ì •ì´ ëœ ì„¸ì…˜ ìƒì„±&quot;&quot;&quot;</span>
    <span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>

    <span class="n">retry</span> <span class="o">=</span> <span class="n">Retry</span><span class="p">(</span>
        <span class="n">total</span><span class="o">=</span><span class="n">retries</span><span class="p">,</span>
        <span class="n">read</span><span class="o">=</span><span class="n">retries</span><span class="p">,</span>
        <span class="n">connect</span><span class="o">=</span><span class="n">retries</span><span class="p">,</span>
        <span class="n">backoff_factor</span><span class="o">=</span><span class="n">backoff_factor</span><span class="p">,</span>
        <span class="n">status_forcelist</span><span class="o">=</span><span class="n">status_forcelist</span>
    <span class="p">)</span>

    <span class="n">adapter</span> <span class="o">=</span> <span class="n">HTTPAdapter</span><span class="p">(</span><span class="n">max_retries</span><span class="o">=</span><span class="n">retry</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s1">&#39;http://&#39;</span><span class="p">,</span> <span class="n">adapter</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s1">&#39;https://&#39;</span><span class="p">,</span> <span class="n">adapter</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">session</span>

<span class="k">class</span><span class="w"> </span><span class="nc">IoTHttpClient</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;IoTìš© HTTP í´ë¼ì´ì–¸íŠ¸&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_url</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base_url</span> <span class="o">=</span> <span class="n">base_url</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">create_session_with_retry</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
            <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
            <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="s1">&#39;IoT-Sensor/1.0&#39;</span>
        <span class="p">})</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">send_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;ë°ì´í„° ì „ì†¡&quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">base_url</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
            <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()}</span>

        <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;ì„¤ì • ì¡°íšŒ&quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">base_url</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
            <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()}</span>

        <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;ì„¸ì…˜ ì¢…ë£Œ&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="c1"># ì‚¬ìš© ì˜ˆ</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">IoTHttpClient</span><span class="p">(</span><span class="s2">&quot;http://192.168.1.100:5000/api&quot;</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="s2">&quot;sensors/001/data&quot;</span><span class="p">,</span> <span class="p">{</span>
        <span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="mf">25.5</span><span class="p">,</span>
        <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="p">})</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="n">client</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>

<hr />
<h2 id="_2">ì—°ìŠµ ë¬¸ì œ<a class="header-link" href="#_2" title="Permanent link">&para;</a></h2>
<h3 id="1-wifi_1">ë¬¸ì œ 1: WiFi ëª¨ë‹ˆí„°ë§<a class="header-link" href="#1-wifi_1" title="Permanent link">&para;</a></h3>
<ol>
<li>í˜„ì¬ WiFi ì—°ê²° ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ì„¸ìš”.</li>
<li>ì‹ í˜¸ ê°•ë„ê°€ -70dBm ì´í•˜ë¡œ ë–¨ì–´ì§€ë©´ ê²½ê³ ë¥¼ ì¶œë ¥í•˜ì„¸ìš”.</li>
</ol>
<h3 id="2">ë¬¸ì œ 2: ë¡œì»¬ ì„œë²„<a class="header-link" href="#2" title="Permanent link">&para;</a></h3>
<ol>
<li>TCP ì„œë²„ë¥¼ ì‘ì„±í•˜ì—¬ ì„¼ì„œ ë°ì´í„°ë¥¼ ìˆ˜ì‹ í•˜ì„¸ìš”.</li>
<li>ìˆ˜ì‹ ëœ ë°ì´í„°ë¥¼ íŒŒì¼ì— ì €ì¥í•˜ì„¸ìš”.</li>
</ol>
<h3 id="3-http">ë¬¸ì œ 3: HTTP ë¦¬í¬í„°<a class="header-link" href="#3-http" title="Permanent link">&para;</a></h3>
<ol>
<li>ì˜¨ë„ ì„¼ì„œ ë°ì´í„°ë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ HTTP POSTí•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‘ì„±í•˜ì„¸ìš”.</li>
<li>ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì‹œ ì¬ì‹œë„ ë¡œì§ì„ êµ¬í˜„í•˜ì„¸ìš”.</li>
</ol>
<hr />
<h2 id="_3">ë‹¤ìŒ ë‹¨ê³„<a class="header-link" href="#_3" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="05_BLE_Connectivity.md">05_BLE_Connectivity.md</a>: BLE í†µì‹ ìœ¼ë¡œ ì €ì „ë ¥ ì„¼ì„œ ì—°ê²°</li>
<li><a href="06_MQTT_Protocol.md">06_MQTT_Protocol.md</a>: MQTTë¡œ íš¨ìœ¨ì ì¸ IoT ë©”ì‹œì§•</li>
</ul>
<hr />
<p><em>ìµœì¢… ì—…ë°ì´íŠ¸: 2026-02-01</em></p>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/ko/IoT_Embedded/03_Python_GPIO_Control.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">03. Python GPIO ì œì–´</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/ko/IoT_Embedded/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/ko/IoT_Embedded/05_BLE_Connectivity.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">05. BLE ì—°ê²°</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">â†‘</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'ko';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}