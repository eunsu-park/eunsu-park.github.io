{% raw %}
<!DOCTYPE html>
<html lang="ko" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí‚¹ - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/ko/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/ko/" class="nav-item ">
                    <span class="nav-icon">ğŸ </span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">ğŸ’»</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/ko/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" >
                        English
                    </option>
                    
                    <option value="ko" selected>
                        í•œêµ­ì–´
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">â˜€ï¸</span>
                    <span class="theme-icon dark">ğŸŒ™</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/ko/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/ko/Networking/">Networking</a>
    <span class="separator">/</span>
    <span class="current">ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí‚¹</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí‚¹</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/ko/Networking/18_IPv6.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">IPv6</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/ko/Networking/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#_2">í•™ìŠµ ëª©í‘œ</a></li>
<li><a href="#_3">ëª©ì°¨</a></li>
<li><a href="#1">1. ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí‚¹ ê¸°ì´ˆ</a><ul>
<li><a href="#network-namespaces">ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤(Network Namespaces)</a></li>
<li><a href="#virtual-ethernet-veth">ê°€ìƒ ì´ë”ë„·(Virtual Ethernet, veth) ìŒ</a></li>
<li><a href="#linux-linux-bridge">Linux ë¸Œë¦¬ì§€(Linux Bridge)</a></li>
<li><a href="#_4">ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí‚¹ ì•„í‚¤í…ì²˜</a></li>
</ul>
</li>
<li><a href="#2-docker">2. Docker ë„¤íŠ¸ì›Œí‚¹ ëª¨ë¸</a><ul>
<li><a href="#container-network-model-cnm">ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí¬ ëª¨ë¸(Container Network Model, CNM)</a></li>
<li><a href="#libnetwork">libnetwork</a></li>
<li><a href="#docker">Docker ë„¤íŠ¸ì›Œí¬ ëª…ë ¹ì–´</a></li>
<li><a href="#docker_1">ê¸°ë³¸ Docker ë„¤íŠ¸ì›Œí¬</a></li>
</ul>
</li>
<li><a href="#3-docker">3. Docker ë„¤íŠ¸ì›Œí¬ ë“œë¼ì´ë²„</a><ul>
<li><a href="#bridge-network">ë¸Œë¦¬ì§€ ë„¤íŠ¸ì›Œí¬(Bridge Network)</a></li>
<li><a href="#host-network">í˜¸ìŠ¤íŠ¸ ë„¤íŠ¸ì›Œí¬(Host Network)</a></li>
<li><a href="#overlay-network">ì˜¤ë²„ë ˆì´ ë„¤íŠ¸ì›Œí¬(Overlay Network)</a></li>
<li><a href="#macvlan-macvlan-network">Macvlan ë„¤íŠ¸ì›Œí¬(Macvlan Network)</a></li>
<li><a href="#_5">ë„¤íŠ¸ì›Œí¬ ë“œë¼ì´ë²„ ë¹„êµ</a></li>
</ul>
</li>
<li><a href="#4-kubernetes">4. Kubernetes ë„¤íŠ¸ì›Œí‚¹ ëª¨ë¸</a><ul>
<li><a href="#kubernetes">Kubernetes ë„¤íŠ¸ì›Œí¬ ìš”êµ¬ì‚¬í•­</a></li>
<li><a href="#pod">Pod ë„¤íŠ¸ì›Œí‚¹</a></li>
<li><a href="#container-network-interface-cni">ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤(Container Network Interface, CNI)</a></li>
</ul>
</li>
<li><a href="#5-cni">5. CNI í”ŒëŸ¬ê·¸ì¸ ë¹„êµ</a><ul>
<li><a href="#calico">Calico</a></li>
<li><a href="#cilium">Cilium</a></li>
<li><a href="#flannel">Flannel</a></li>
<li><a href="#weave">Weave</a></li>
<li><a href="#cni">CNI í”ŒëŸ¬ê·¸ì¸ ë¹„êµ</a></li>
</ul>
</li>
<li><a href="#6">6. ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ì™€ ë¡œë“œ ë°¸ëŸ°ì‹±</a><ul>
<li><a href="#kubernetes-kubernetes-services">Kubernetes ì„œë¹„ìŠ¤(Kubernetes Services)</a></li>
<li><a href="#kube-proxy">kube-proxy</a></li>
<li><a href="#iptables">iptables ëª¨ë“œ</a></li>
<li><a href="#ipvs">IPVS ëª¨ë“œ</a></li>
<li><a href="#coredns">CoreDNS</a></li>
</ul>
</li>
<li><a href="#7">7. ë„¤íŠ¸ì›Œí¬ ì •ì±…</a><ul>
<li><a href="#kubernetes-networkpolicy">Kubernetes NetworkPolicy</a></li>
<li><a href="#ingress-and-egress-rules">ì¸ê·¸ë ˆìŠ¤ì™€ ì´ê·¸ë ˆìŠ¤ ê·œì¹™(Ingress and Egress Rules)</a></li>
<li><a href="#namespace-isolation">ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ê²©ë¦¬(Namespace Isolation)</a></li>
<li><a href="#calico-networkpolicy">Calico NetworkPolicy</a></li>
</ul>
</li>
<li><a href="#8">8. ì„œë¹„ìŠ¤ ë©”ì‹œ</a><ul>
<li><a href="#_6">ì„œë¹„ìŠ¤ ë©”ì‹œ ì•„í‚¤í…ì²˜</a></li>
<li><a href="#istio-istio-sidecar-pattern">Istio ì‚¬ì´ë“œì¹´ íŒ¨í„´(Istio Sidecar Pattern)</a></li>
<li><a href="#tlsmutual-tls-mtls">ìƒí˜¸ TLS(Mutual TLS, mTLS)</a></li>
<li><a href="#traffic-management">íŠ¸ë˜í”½ ê´€ë¦¬(Traffic Management)</a></li>
<li><a href="#_7">ì„œë¹„ìŠ¤ ë©”ì‹œ ë¹„êµ</a></li>
</ul>
</li>
<li><a href="#9">9. ì¸ê·¸ë ˆìŠ¤ì™€ ë¡œë“œ ë°¸ëŸ°ì‹±</a><ul>
<li><a href="#ingress-controller">ì¸ê·¸ë ˆìŠ¤ ì»¨íŠ¸ë¡¤ëŸ¬(Ingress Controller)</a></li>
<li><a href="#gateway-api">Gateway API</a></li>
<li><a href="#external-load-balancer">ì™¸ë¶€ ë¡œë“œ ë°¸ëŸ°ì„œ(External Load Balancer)</a></li>
</ul>
</li>
<li><a href="#10">10. ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ í•´ê²°</a><ul>
<li><a href="#docker_2">Docker ë„¤íŠ¸ì›Œí‚¹ ë¬¸ì œ í•´ê²°</a></li>
<li><a href="#kubernetes_1">Kubernetes ë„¤íŠ¸ì›Œí‚¹ ë¬¸ì œ í•´ê²°</a></li>
<li><a href="#_8">ë„¤íŠ¸ì›Œí¬ ì§„ë‹¨ ë„êµ¬</a></li>
</ul>
</li>
<li><a href="#11">11. ì—°ìŠµ ë¬¸ì œ</a><ul>
<li><a href="#1-docker">ë¬¸ì œ 1: Docker ì‚¬ìš©ì ì •ì˜ ë„¤íŠ¸ì›Œí¬</a></li>
<li><a href="#2-kubernetes">ë¬¸ì œ 2: Kubernetes ì„œë¹„ìŠ¤</a></li>
<li><a href="#3-networkpolicy">ë¬¸ì œ 3: NetworkPolicy</a></li>
<li><a href="#4">ë¬¸ì œ 4: ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ ë””ë²„ê¹…</a></li>
<li><a href="#5">ë¬¸ì œ 5: ì„œë¹„ìŠ¤ ë©”ì‹œ íŠ¸ë˜í”½ ë¶„í• </a></li>
</ul>
</li>
<li><a href="#_9">ìš”ì•½</a></li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="_1">ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí‚¹<a class="header-link" href="#_1" title="Permanent link">&para;</a></h1>
<h2 id="_2">í•™ìŠµ ëª©í‘œ<a class="header-link" href="#_2" title="Permanent link">&para;</a></h2>
<ul>
<li>Linux ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì™€ ê°€ìƒ ë„¤íŠ¸ì›Œí‚¹ ì´í•´í•˜ê¸°</li>
<li>Docker ë„¤íŠ¸ì›Œí‚¹ ì•„í‚¤í…ì²˜ì™€ ë„¤íŠ¸ì›Œí¬ ë“œë¼ì´ë²„ ë§ˆìŠ¤í„°í•˜ê¸°</li>
<li>Kubernetes ë„¤íŠ¸ì›Œí‚¹ ëª¨ë¸ê³¼ CNI í”ŒëŸ¬ê·¸ì¸ í•™ìŠµí•˜ê¸°</li>
<li>ì»¨í…Œì´ë„ˆì˜ ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ì™€ ë¡œë“œ ë°¸ëŸ°ì‹± ì´í•´í•˜ê¸°</li>
<li>ë³´ì•ˆì„ ìœ„í•œ ë„¤íŠ¸ì›Œí¬ ì •ì±… êµ¬í˜„í•˜ê¸°</li>
<li>ì„œë¹„ìŠ¤ ë©”ì‹œ ê°œë…ê³¼ êµ¬í˜„ í•™ìŠµí•˜ê¸°</li>
<li>ì¸ê·¸ë ˆìŠ¤ì™€ ì™¸ë¶€ ë¡œë“œ ë°¸ëŸ°ì‹± êµ¬ì„±í•˜ê¸°</li>
<li>ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí‚¹ ë¬¸ì œ í•´ê²°í•˜ê¸°</li>
</ul>
<h2 id="_3">ëª©ì°¨<a class="header-link" href="#_3" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#1-ì»¨í…Œì´ë„ˆ-ë„¤íŠ¸ì›Œí‚¹-ê¸°ì´ˆ">ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí‚¹ ê¸°ì´ˆ</a></li>
<li><a href="#2-docker-ë„¤íŠ¸ì›Œí‚¹-ëª¨ë¸">Docker ë„¤íŠ¸ì›Œí‚¹ ëª¨ë¸</a></li>
<li><a href="#3-docker-ë„¤íŠ¸ì›Œí¬-ë“œë¼ì´ë²„">Docker ë„¤íŠ¸ì›Œí¬ ë“œë¼ì´ë²„</a></li>
<li><a href="#4-kubernetes-ë„¤íŠ¸ì›Œí‚¹-ëª¨ë¸">Kubernetes ë„¤íŠ¸ì›Œí‚¹ ëª¨ë¸</a></li>
<li><a href="#5-cni-í”ŒëŸ¬ê·¸ì¸-ë¹„êµ">CNI í”ŒëŸ¬ê·¸ì¸ ë¹„êµ</a></li>
<li><a href="#6-ì„œë¹„ìŠ¤-ë””ìŠ¤ì»¤ë²„ë¦¬ì™€-ë¡œë“œ-ë°¸ëŸ°ì‹±">ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ì™€ ë¡œë“œ ë°¸ëŸ°ì‹±</a></li>
<li><a href="#7-ë„¤íŠ¸ì›Œí¬-ì •ì±…">ë„¤íŠ¸ì›Œí¬ ì •ì±…</a></li>
<li><a href="#8-ì„œë¹„ìŠ¤-ë©”ì‹œ">ì„œë¹„ìŠ¤ ë©”ì‹œ</a></li>
<li><a href="#9-ì¸ê·¸ë ˆìŠ¤ì™€-ë¡œë“œ-ë°¸ëŸ°ì‹±">ì¸ê·¸ë ˆìŠ¤ì™€ ë¡œë“œ ë°¸ëŸ°ì‹±</a></li>
<li><a href="#10-ì»¨í…Œì´ë„ˆ-ë„¤íŠ¸ì›Œí¬-ë¬¸ì œ-í•´ê²°">ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ í•´ê²°</a></li>
<li><a href="#11-ì—°ìŠµ-ë¬¸ì œ">ì—°ìŠµ ë¬¸ì œ</a></li>
</ol>
<hr />
<h2 id="1">1. ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí‚¹ ê¸°ì´ˆ<a class="header-link" href="#1" title="Permanent link">&para;</a></h2>
<h3 id="network-namespaces">ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤(Network Namespaces)<a class="header-link" href="#network-namespaces" title="Permanent link">&para;</a></h3>
<p>ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ëŠ” Linuxì—ì„œ ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤:</p>
<div class="highlight"><pre><span></span><code>Default Namespace                  Container Namespace
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  eth0: 10.0.1.10   â”‚            â”‚  eth0: 172.17.0.2  â”‚
â”‚                    â”‚            â”‚  (inside container)â”‚
â”‚  Routing Table     â”‚            â”‚  Routing Table     â”‚
â”‚  Firewall Rules    â”‚            â”‚  Firewall Rules    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<p><strong>ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„±:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Create namespace</span>
sudo<span class="w"> </span>ip<span class="w"> </span>netns<span class="w"> </span>add<span class="w"> </span>my_namespace

<span class="c1"># List namespaces</span>
sudo<span class="w"> </span>ip<span class="w"> </span>netns<span class="w"> </span>list

<span class="c1"># Execute command in namespace</span>
sudo<span class="w"> </span>ip<span class="w"> </span>netns<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>my_namespace<span class="w"> </span>ip<span class="w"> </span>addr<span class="w"> </span>show

<span class="c1"># Enter namespace shell</span>
sudo<span class="w"> </span>ip<span class="w"> </span>netns<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>my_namespace<span class="w"> </span>bash
</code></pre></div>

<h3 id="virtual-ethernet-veth">ê°€ìƒ ì´ë”ë„·(Virtual Ethernet, veth) ìŒ<a class="header-link" href="#virtual-ethernet-veth" title="Permanent link">&para;</a></h3>
<p>veth ìŒì€ ê°€ìƒ ì¼€ì´ë¸” ì—°ê²°ì…ë‹ˆë‹¤:</p>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Namespace A   â”‚               â”‚   Namespace B   â”‚
â”‚                 â”‚               â”‚                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    veth0 â†â”€â”€â”€â”¼â”€â”€â”€â†’ veth1       â”‚
â”‚   â”‚  veth0   â”‚â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚10.0.0.1  â”‚  â”‚               â”‚   â”‚10.0.0.2â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚               â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<p><strong>veth ìŒ ìƒì„±:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Create veth pair</span>
sudo<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span>add<span class="w"> </span>veth0<span class="w"> </span><span class="nb">type</span><span class="w"> </span>veth<span class="w"> </span>peer<span class="w"> </span>name<span class="w"> </span>veth1

<span class="c1"># Move veth1 to namespace</span>
sudo<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>veth1<span class="w"> </span>netns<span class="w"> </span>my_namespace

<span class="c1"># Configure veth0 (host side)</span>
sudo<span class="w"> </span>ip<span class="w"> </span>addr<span class="w"> </span>add<span class="w"> </span><span class="m">10</span>.0.0.1/24<span class="w"> </span>dev<span class="w"> </span>veth0
sudo<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>veth0<span class="w"> </span>up

<span class="c1"># Configure veth1 (namespace side)</span>
sudo<span class="w"> </span>ip<span class="w"> </span>netns<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>my_namespace<span class="w"> </span>ip<span class="w"> </span>addr<span class="w"> </span>add<span class="w"> </span><span class="m">10</span>.0.0.2/24<span class="w"> </span>dev<span class="w"> </span>veth1
sudo<span class="w"> </span>ip<span class="w"> </span>netns<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>my_namespace<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>veth1<span class="w"> </span>up
sudo<span class="w"> </span>ip<span class="w"> </span>netns<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>my_namespace<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>lo<span class="w"> </span>up

<span class="c1"># Test connectivity</span>
ping<span class="w"> </span><span class="m">10</span>.0.0.2
</code></pre></div>

<h3 id="linux-linux-bridge">Linux ë¸Œë¦¬ì§€(Linux Bridge)<a class="header-link" href="#linux-linux-bridge" title="Permanent link">&para;</a></h3>
<p>ë¸Œë¦¬ì§€ëŠ” ì—¬ëŸ¬ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì—°ê²°í•©ë‹ˆë‹¤:</p>
<div class="highlight"><pre><span></span><code>                   Linux Bridge (br0)
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚              â”‚              â”‚              â”‚
      veth0          veth2          veth4          eth0 (host)
         â”‚              â”‚              â”‚              â”‚
         â”‚              â”‚              â”‚              â”‚
    Container 1    Container 2    Container 3     Physical Net
  172.17.0.2/16  172.17.0.3/16  172.17.0.4/16
</code></pre></div>

<p><strong>ë¸Œë¦¬ì§€ ìƒì„±:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Create bridge</span>
sudo<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span>add<span class="w"> </span>br0<span class="w"> </span><span class="nb">type</span><span class="w"> </span>bridge
sudo<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>br0<span class="w"> </span>up
sudo<span class="w"> </span>ip<span class="w"> </span>addr<span class="w"> </span>add<span class="w"> </span><span class="m">172</span>.17.0.1/16<span class="w"> </span>dev<span class="w"> </span>br0

<span class="c1"># Create container namespace and veth pair</span>
sudo<span class="w"> </span>ip<span class="w"> </span>netns<span class="w"> </span>add<span class="w"> </span>container1
sudo<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span>add<span class="w"> </span>veth0<span class="w"> </span><span class="nb">type</span><span class="w"> </span>veth<span class="w"> </span>peer<span class="w"> </span>name<span class="w"> </span>veth1

<span class="c1"># Connect veth1 to container</span>
sudo<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>veth1<span class="w"> </span>netns<span class="w"> </span>container1

<span class="c1"># Connect veth0 to bridge</span>
sudo<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>veth0<span class="w"> </span>master<span class="w"> </span>br0
sudo<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>veth0<span class="w"> </span>up

<span class="c1"># Configure container interface</span>
sudo<span class="w"> </span>ip<span class="w"> </span>netns<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>container1<span class="w"> </span>ip<span class="w"> </span>addr<span class="w"> </span>add<span class="w"> </span><span class="m">172</span>.17.0.2/16<span class="w"> </span>dev<span class="w"> </span>veth1
sudo<span class="w"> </span>ip<span class="w"> </span>netns<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>container1<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>veth1<span class="w"> </span>up
sudo<span class="w"> </span>ip<span class="w"> </span>netns<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>container1<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>lo<span class="w"> </span>up
sudo<span class="w"> </span>ip<span class="w"> </span>netns<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>container1<span class="w"> </span>ip<span class="w"> </span>route<span class="w"> </span>add<span class="w"> </span>default<span class="w"> </span>via<span class="w"> </span><span class="m">172</span>.17.0.1

<span class="c1"># Enable NAT for internet access</span>
sudo<span class="w"> </span>iptables<span class="w"> </span>-t<span class="w"> </span>nat<span class="w"> </span>-A<span class="w"> </span>POSTROUTING<span class="w"> </span>-s<span class="w"> </span><span class="m">172</span>.17.0.0/16<span class="w"> </span>!<span class="w"> </span>-o<span class="w"> </span>br0<span class="w"> </span>-j<span class="w"> </span>MASQUERADE
</code></pre></div>

<h3 id="_4">ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí‚¹ ì•„í‚¤í…ì²˜<a class="header-link" href="#_4" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Host OS                              â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Docker Bridge (docker0)                  â”‚ â”‚
â”‚  â”‚                  172.17.0.1/16                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚
â”‚        â”‚              â”‚              â”‚              â”‚      â”‚
â”‚   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”‚
â”‚   â”‚  veth0  â”‚    â”‚  veth2  â”‚   â”‚  veth4  â”‚   â”‚  veth6  â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚
â”‚        â”‚              â”‚              â”‚              â”‚      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
â”‚  â”‚ Container1 â”‚ â”‚ Container2 â”‚ â”‚ Container3 â”‚ â”‚Container4â”‚
â”‚  â”‚ 172.17.0.2 â”‚ â”‚ 172.17.0.3 â”‚ â”‚ 172.17.0.4 â”‚ â”‚172.17.0.5â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<hr />
<h2 id="2-docker">2. Docker ë„¤íŠ¸ì›Œí‚¹ ëª¨ë¸<a class="header-link" href="#2-docker" title="Permanent link">&para;</a></h2>
<h3 id="container-network-model-cnm">ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí¬ ëª¨ë¸(Container Network Model, CNM)<a class="header-link" href="#container-network-model-cnm" title="Permanent link">&para;</a></h3>
<p>DockerëŠ” ì„¸ ê°€ì§€ êµ¬ì„±ìš”ì†Œë¥¼ ê°€ì§„ CNMì„ ì‚¬ìš©í•©ë‹ˆë‹¤:</p>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Docker Engine                        â”‚
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Sandbox  â”‚   â”‚ Endpoint â”‚   â”‚ Network  â”‚          â”‚
â”‚  â”‚          â”‚   â”‚          â”‚   â”‚          â”‚          â”‚
â”‚  â”‚ (netns)  â”‚â”€â”€â–¶â”‚  (veth)  â”‚â”€â”€â–¶â”‚ (bridge) â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

- Sandbox: Container&#39;s network stack (namespace)
- Endpoint: Virtual network interface (veth)
- Network: Virtual switch (bridge, overlay, etc.)
</code></pre></div>

<h3 id="libnetwork">libnetwork<a class="header-link" href="#libnetwork" title="Permanent link">&para;</a></h3>
<p>Dockerì˜ ë„¤íŠ¸ì›Œí‚¹ ë¼ì´ë¸ŒëŸ¬ë¦¬:</p>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Docker Engine                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              libnetwork                             â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Bridge  â”‚  â”‚  Overlay â”‚  â”‚  Macvlan â”‚  ...    â”‚
â”‚  â”‚  Driver  â”‚  â”‚  Driver  â”‚  â”‚  Driver  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="docker">Docker ë„¤íŠ¸ì›Œí¬ ëª…ë ¹ì–´<a class="header-link" href="#docker" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># List networks</span>
docker<span class="w"> </span>network<span class="w"> </span>ls

<span class="c1"># Inspect network</span>
docker<span class="w"> </span>network<span class="w"> </span>inspect<span class="w"> </span>bridge

<span class="c1"># Create network</span>
docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span>my_network

<span class="c1"># Connect container to network</span>
docker<span class="w"> </span>network<span class="w"> </span>connect<span class="w"> </span>my_network<span class="w"> </span>my_container

<span class="c1"># Disconnect container</span>
docker<span class="w"> </span>network<span class="w"> </span>disconnect<span class="w"> </span>my_network<span class="w"> </span>my_container

<span class="c1"># Remove network</span>
docker<span class="w"> </span>network<span class="w"> </span>rm<span class="w"> </span>my_network

<span class="c1"># Run container on specific network</span>
docker<span class="w"> </span>run<span class="w"> </span>--network<span class="w"> </span>my_network<span class="w"> </span>nginx
</code></pre></div>

<h3 id="docker_1">ê¸°ë³¸ Docker ë„¤íŠ¸ì›Œí¬<a class="header-link" href="#docker_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># List default networks</span>
docker<span class="w"> </span>network<span class="w"> </span>ls

NETWORK<span class="w"> </span>ID<span class="w">     </span>NAME<span class="w">      </span>DRIVER<span class="w">    </span>SCOPE
abcdef123456<span class="w">   </span>bridge<span class="w">    </span>bridge<span class="w">    </span><span class="nb">local</span>
1234567890ab<span class="w">   </span>host<span class="w">      </span>host<span class="w">      </span><span class="nb">local</span>
fedcba098765<span class="w">   </span>none<span class="w">      </span>null<span class="w">      </span><span class="nb">local</span>
</code></pre></div>

<hr />
<h2 id="3-docker">3. Docker ë„¤íŠ¸ì›Œí¬ ë“œë¼ì´ë²„<a class="header-link" href="#3-docker" title="Permanent link">&para;</a></h2>
<h3 id="bridge-network">ë¸Œë¦¬ì§€ ë„¤íŠ¸ì›Œí¬(Bridge Network)<a class="header-link" href="#bridge-network" title="Permanent link">&para;</a></h3>
<p>ê¸°ë³¸ ë„¤íŠ¸ì›Œí¬ ë“œë¼ì´ë²„:</p>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Host                              â”‚
â”‚                                                      â”‚
â”‚  eth0 (10.0.1.10)                                    â”‚
â”‚       â”‚                                              â”‚
â”‚       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚       â””â”€â”€â”‚   docker0 (172.17.0.1/16)          â”‚     â”‚
â”‚          â”‚   (Linux Bridge)                   â”‚     â”‚
â”‚          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”˜     â”‚
â”‚               â”‚              â”‚             â”‚        â”‚
â”‚          â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”   â”‚
â”‚          â”‚ nginx   â”‚    â”‚  redis  â”‚  â”‚  mysql  â”‚   â”‚
â”‚          â”‚.17.0.2  â”‚    â”‚ .17.0.3 â”‚  â”‚ .17.0.4 â”‚   â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<p><strong>ì‚¬ìš©ì ì •ì˜ ë¸Œë¦¬ì§€ ìƒì„±:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Create custom bridge network</span>
docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--driver<span class="w"> </span>bridge<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--subnet<span class="w"> </span><span class="m">192</span>.168.1.0/24<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--gateway<span class="w"> </span><span class="m">192</span>.168.1.1<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>my_bridge

<span class="c1"># Run containers</span>
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>web<span class="w"> </span>--network<span class="w"> </span>my_bridge<span class="w"> </span>nginx
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>db<span class="w"> </span>--network<span class="w"> </span>my_bridge<span class="w"> </span>mysql

<span class="c1"># Containers can communicate by name</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>web<span class="w"> </span>ping<span class="w"> </span>db
</code></pre></div>

<p><strong>í¬íŠ¸ í¼ë¸”ë¦¬ì‹±(Port publishing):</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Publish port 80 to host port 8080</span>
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>-p<span class="w"> </span><span class="m">8080</span>:80<span class="w"> </span>--name<span class="w"> </span>web<span class="w"> </span>nginx

<span class="c1"># iptables NAT rule created:</span>
<span class="c1"># DNAT: Host:8080 â†’ Container:80</span>
</code></pre></div>

<h3 id="host-network">í˜¸ìŠ¤íŠ¸ ë„¤íŠ¸ì›Œí¬(Host Network)<a class="header-link" href="#host-network" title="Permanent link">&para;</a></h3>
<p>ì»¨í…Œì´ë„ˆê°€ í˜¸ìŠ¤íŠ¸ì˜ ë„¤íŠ¸ì›Œí¬ ìŠ¤íƒì„ ê³µìœ :</p>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Host                              â”‚
â”‚                                                      â”‚
â”‚  eth0 (10.0.1.10)                                    â”‚
â”‚       â”‚                                              â”‚
â”‚       â”‚  (Same network namespace)                    â”‚
â”‚       â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  Container (--network host)           â”‚          â”‚
â”‚  â”‚  Listens on 10.0.1.10:80              â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<p><strong>ì‚¬ìš©ë²•:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Run with host network</span>
docker<span class="w"> </span>run<span class="w"> </span>--network<span class="w"> </span>host<span class="w"> </span>nginx

<span class="c1"># No port publishing needed</span>
<span class="c1"># Container binds directly to host&#39;s ports</span>
</code></pre></div>

<p><strong>ì¥ì :</strong>
- ìµœê³  ì„±ëŠ¥ (NAT ì—†ìŒ)
- ê°„ë‹¨í•œ êµ¬ì„±</p>
<p><strong>ë‹¨ì :</strong>
- ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬ ì—†ìŒ
- í¬íŠ¸ ì¶©ëŒ ê°€ëŠ¥</p>
<h3 id="overlay-network">ì˜¤ë²„ë ˆì´ ë„¤íŠ¸ì›Œí¬(Overlay Network)<a class="header-link" href="#overlay-network" title="Permanent link">&para;</a></h3>
<p>ë©€í‹° í˜¸ìŠ¤íŠ¸ ë„¤íŠ¸ì›Œí‚¹:</p>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Host 1 (10.0.1.10)   â”‚      â”‚       Host 2 (10.0.1.11)   â”‚
â”‚                            â”‚      â”‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Container A          â”‚  â”‚      â”‚  â”‚ Container B          â”‚  â”‚
â”‚  â”‚ 10.0.9.2 (overlay)   â”‚  â”‚      â”‚  â”‚ 10.0.9.3 (overlay)   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚ VXLAN        â”‚      â”‚             â”‚ VXLAN        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ br0 (overlay bridge) â”‚  â”‚      â”‚  â”‚ br0 (overlay bridge) â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚              â”‚      â”‚             â”‚              â”‚
â”‚          eth0 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ eth0            â”‚
â”‚        10.0.1.10           â”‚      â”‚        10.0.1.11           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         Encapsulated traffic (VXLAN over UDP 4789)
</code></pre></div>

<p><strong>ì˜¤ë²„ë ˆì´ ë„¤íŠ¸ì›Œí¬ ìƒì„± (Docker Swarm):</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Initialize swarm</span>
docker<span class="w"> </span>swarm<span class="w"> </span>init

<span class="c1"># Create overlay network</span>
docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--driver<span class="w"> </span>overlay<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--subnet<span class="w"> </span><span class="m">10</span>.0.9.0/24<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>my_overlay

<span class="c1"># Deploy service on overlay</span>
docker<span class="w"> </span>service<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>web<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--network<span class="w"> </span>my_overlay<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--replicas<span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>nginx
</code></pre></div>

<h3 id="macvlan-macvlan-network">Macvlan ë„¤íŠ¸ì›Œí¬(Macvlan Network)<a class="header-link" href="#macvlan-macvlan-network" title="Permanent link">&para;</a></h3>
<p>ì»¨í…Œì´ë„ˆì— MAC ì£¼ì†Œ í• ë‹¹:</p>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Host                              â”‚
â”‚                                                      â”‚
â”‚  eth0 (10.0.1.10) â”€â”€â”€ Physical Network              â”‚
â”‚       â”‚                                              â”‚
â”‚       â”‚  (Macvlan in bridge mode)                    â”‚
â”‚       â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚    â”‚              â”‚             â”‚              â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”         â”‚ â”‚
â”‚  â”‚ â”‚nginx  â”‚    â”‚  redis  â”‚  â”‚  mysql  â”‚         â”‚ â”‚
â”‚  â”‚ â”‚.0.1.20â”‚    â”‚ .0.1.21 â”‚  â”‚ .0.1.22 â”‚         â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ â”‚
â”‚  â”‚ (Appears on physical network with own MAC)    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<p><strong>macvlan ë„¤íŠ¸ì›Œí¬ ìƒì„±:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Create macvlan network</span>
docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span>-d<span class="w"> </span>macvlan<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--subnet<span class="o">=</span><span class="m">10</span>.0.1.0/24<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--gateway<span class="o">=</span><span class="m">10</span>.0.1.1<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-o<span class="w"> </span><span class="nv">parent</span><span class="o">=</span>eth0<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>my_macvlan

<span class="c1"># Run container</span>
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--network<span class="w"> </span>my_macvlan<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--ip<span class="w"> </span><span class="m">10</span>.0.1.20<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>nginx
</code></pre></div>

<p><strong>ì‚¬ìš© ì‚¬ë¡€:</strong>
- L2 ì—°ê²°ì„±ì´ í•„ìš”í•œ ë ˆê±°ì‹œ ì• í”Œë¦¬ì¼€ì´ì…˜
- ë¬¼ë¦¬ ë„¤íŠ¸ì›Œí¬ë¥¼ ëª¨ë‹ˆí„°ë§í•˜ëŠ” ì»¨í…Œì´ë„ˆ
- NAT ì—†ì´ ì§ì ‘ ë„¤íŠ¸ì›Œí¬ ì ‘ê·¼</p>
<h3 id="_5">ë„¤íŠ¸ì›Œí¬ ë“œë¼ì´ë²„ ë¹„êµ<a class="header-link" href="#_5" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>ë“œë¼ì´ë²„</th>
<th>ê²©ë¦¬</th>
<th>ë©€í‹° í˜¸ìŠ¤íŠ¸</th>
<th>ì„±ëŠ¥</th>
<th>ì‚¬ìš© ì‚¬ë¡€</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Bridge</strong></td>
<td>ì˜ˆ</td>
<td>ì•„ë‹ˆì˜¤</td>
<td>ì¢‹ìŒ</td>
<td>ë‹¨ì¼ í˜¸ìŠ¤íŠ¸, ê°œë°œ</td>
</tr>
<tr>
<td><strong>Host</strong></td>
<td>ì•„ë‹ˆì˜¤</td>
<td>ì•„ë‹ˆì˜¤</td>
<td>ë›°ì–´ë‚¨</td>
<td>ì„±ëŠ¥ ì¤‘ìš”</td>
</tr>
<tr>
<td><strong>Overlay</strong></td>
<td>ì˜ˆ</td>
<td>ì˜ˆ</td>
<td>ì¢‹ìŒ</td>
<td>ë©€í‹° í˜¸ìŠ¤íŠ¸, Swarm/K8s</td>
</tr>
<tr>
<td><strong>Macvlan</strong></td>
<td>ì˜ˆ</td>
<td>ì•„ë‹ˆì˜¤</td>
<td>ë›°ì–´ë‚¨</td>
<td>L2 ì—°ê²°ì„± í•„ìš”</td>
</tr>
<tr>
<td><strong>None</strong></td>
<td>ì™„ì „</td>
<td>N/A</td>
<td>N/A</td>
<td>ë„¤íŠ¸ì›Œí‚¹ ë¶ˆí•„ìš”</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="4-kubernetes">4. Kubernetes ë„¤íŠ¸ì›Œí‚¹ ëª¨ë¸<a class="header-link" href="#4-kubernetes" title="Permanent link">&para;</a></h2>
<h3 id="kubernetes">Kubernetes ë„¤íŠ¸ì›Œí¬ ìš”êµ¬ì‚¬í•­<a class="header-link" href="#kubernetes" title="Permanent link">&para;</a></h3>
<p>KubernetesëŠ” ë‹¤ìŒ ìš”êµ¬ì‚¬í•­ì„ ë¶€ê³¼í•©ë‹ˆë‹¤:</p>
<ol>
<li><strong>ëª¨ë“  PodëŠ” NAT ì—†ì´ ì„œë¡œ í†µì‹ </strong> ê°€ëŠ¥</li>
<li><strong>ëª¨ë“  ë…¸ë“œëŠ” NAT ì—†ì´ ëª¨ë“  Podì™€ í†µì‹ </strong> ê°€ëŠ¥</li>
<li><strong>PodëŠ” ë‹¤ë¥¸ Podê°€ ë³´ëŠ” ê²ƒê³¼ ë™ì¼í•œ ìì‹ ì˜ IP</strong> í™•ì¸ (NAT ì—†ìŒ)</li>
</ol>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Cluster Network                       â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚    Node 1        â”‚              â”‚    Node 2        â”‚   â”‚
â”‚  â”‚  IP: 10.0.1.10   â”‚              â”‚  IP: 10.0.1.11   â”‚   â”‚
â”‚  â”‚                  â”‚              â”‚                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚  Pod A     â”‚  â”‚              â”‚  â”‚  Pod C     â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ 10.244.1.2 â”‚â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”‚ 10.244.2.2 â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                  â”‚              â”‚                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚  Pod B     â”‚  â”‚              â”‚  â”‚  Pod D     â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ 10.244.1.3 â”‚  â”‚              â”‚  â”‚ 10.244.2.3 â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                            â”‚
â”‚  Pod A can directly communicate with Pod C (10.244.2.2)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="pod">Pod ë„¤íŠ¸ì›Œí‚¹<a class="header-link" href="#pod" title="Permanent link">&para;</a></h3>
<p>ê° PodëŠ” ìì²´ IPë¥¼ ë°›ìŠµë‹ˆë‹¤:</p>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Pod (10.244.1.5)                 â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ Container A  â”‚  â”‚ Container B  â”‚            â”‚
â”‚  â”‚ localhost:80 â”‚  â”‚localhost:3306â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚         â”‚                 â”‚                    â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                  â”‚                             â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚          â”‚  Network NS    â”‚                    â”‚
â”‚          â”‚  eth0          â”‚                    â”‚
â”‚          â”‚  10.244.1.5    â”‚                    â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="container-network-interface-cni">ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤(Container Network Interface, CNI)<a class="header-link" href="#container-network-interface-cni" title="Permanent link">&para;</a></h3>
<p>CNIëŠ” ë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸ì„ ìœ„í•œ í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ì…ë‹ˆë‹¤:</p>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Kubernetes (kubelet)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ CNI Specification
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                CNI Plugin                        â”‚
â”‚  (Calico, Cilium, Flannel, Weave, etc.)         â”‚
â”‚                                                  â”‚
â”‚  Responsibilities:                               â”‚
â”‚  - Allocate IP to pod                            â”‚
â”‚  - Setup network interface                       â”‚
â”‚  - Configure routing                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<p><strong>CNI êµ¬ì„± ì˜ˆì œ:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;cniVersion&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0.4.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;k8s-pod-network&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;calico&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;log_level&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;info&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;datastore_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;kubernetes&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;ipam&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;calico-ipam&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;policy&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;k8s&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;kubernetes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;kubeconfig&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/etc/cni/net.d/calico-kubeconfig&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h2 id="5-cni">5. CNI í”ŒëŸ¬ê·¸ì¸ ë¹„êµ<a class="header-link" href="#5-cni" title="Permanent link">&para;</a></h2>
<h3 id="calico">Calico<a class="header-link" href="#calico" title="Permanent link">&para;</a></h3>
<p><strong>ì•„í‚¤í…ì²˜:</strong></p>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Calico Components                     â”‚
â”‚                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   Felix      â”‚   â”‚    BIRD      â”‚             â”‚
â”‚  â”‚ (Agent)      â”‚   â”‚ (BGP daemon) â”‚             â”‚
â”‚  â”‚ - Routes     â”‚   â”‚ - Route      â”‚             â”‚
â”‚  â”‚ - ACLs       â”‚   â”‚   exchange   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚       etcd / Kubernetes API      â”‚             â”‚
â”‚  â”‚       (Datastore)                â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<p><strong>ê¸°ëŠ¥:</strong>
- ìˆœìˆ˜ L3 ë„¤íŠ¸ì›Œí‚¹ (ì˜¤ë²„ë ˆì´ ì—†ìŒ)
- BGP ê²½ë¡œ ë°°í¬
- í™•ì¥ ê°€ëŠ¥ (1000+ ë…¸ë“œ í…ŒìŠ¤íŠ¸)
- í’ë¶€í•œ ë„¤íŠ¸ì›Œí¬ ì •ì±…</p>
<p><strong>ë„¤íŠ¸ì›Œí¬ ëª¨ë“œ:</strong>
- IP-in-IP (ìº¡ìŠí™”)
- VXLAN
- Direct/Native (ìº¡ìŠí™” ì—†ìŒ)</p>
<h3 id="cilium">Cilium<a class="header-link" href="#cilium" title="Permanent link">&para;</a></h3>
<p><strong>ì•„í‚¤í…ì²˜:</strong></p>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Cilium Components                     â”‚
â”‚                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚     eBPF Programs (kernel)       â”‚             â”‚
â”‚  â”‚  - Packet filtering              â”‚             â”‚
â”‚  â”‚  - Load balancing                â”‚             â”‚
â”‚  â”‚  - Network policy                â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚               â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚      Cilium Agent                â”‚             â”‚
â”‚  â”‚  - Identity management           â”‚             â”‚
â”‚  â”‚  - Policy enforcement            â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<p><strong>ê¸°ëŠ¥:</strong>
- eBPF ê¸°ë°˜ (Linux ì»¤ë„ ê¸°ìˆ )
- L7 í”„ë¡œí† ì½œ ê°€ì‹œì„± (HTTP, gRPC, Kafka)
- ID ê¸°ë°˜ ë³´ì•ˆ
- Hubble ê´€ì°°ì„±</p>
<p><strong>ì‚¬ìš© ì‚¬ë¡€:</strong>
- ê³ ê¸‰ ë³´ì•ˆ ì •ì±…
- ì‚¬ì´ë“œì¹´ ì—†ëŠ” ì„œë¹„ìŠ¤ ë©”ì‹œ
- API ì¸ì‹ í•„í„°ë§</p>
<h3 id="flannel">Flannel<a class="header-link" href="#flannel" title="Permanent link">&para;</a></h3>
<p><strong>ì•„í‚¤í…ì²˜:</strong></p>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Flannel Components                    â”‚
â”‚                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚     flanneld (agent)             â”‚             â”‚
â”‚  â”‚  - Allocate subnet               â”‚             â”‚
â”‚  â”‚  - Configure VXLAN/host-gw       â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚               â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚      etcd / Kubernetes API       â”‚             â”‚
â”‚  â”‚      (Subnet allocation)         â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<p><strong>ê¸°ëŠ¥:</strong>
- ê°„ë‹¨í•œ ì˜¤ë²„ë ˆì´ ë„¤íŠ¸ì›Œí¬
- ì—¬ëŸ¬ ë°±ì—”ë“œ (VXLAN, host-gw, UDP)
- ë°°í¬ ìš©ì´
- ë„¤íŠ¸ì›Œí¬ ì •ì±… ì§€ì› ì—†ìŒ</p>
<p><strong>ë°±ì—”ë“œ ë¹„êµ:</strong>
- VXLAN: L3ë¥¼ ë„˜ì–´ ì‘ë™, ì•½ê°„ì˜ ì˜¤ë²„í—¤ë“œ
- host-gw: L2 í•„ìš”, ë” ë‚˜ì€ ì„±ëŠ¥
- UDP: ë ˆê±°ì‹œ, ì„±ëŠ¥ ì €í•˜</p>
<h3 id="weave">Weave<a class="header-link" href="#weave" title="Permanent link">&para;</a></h3>
<p><strong>ì•„í‚¤í…ì²˜:</strong></p>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Weave Components                      â”‚
â”‚                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚     Weave Router (per node)      â”‚             â”‚
â”‚  â”‚  - Overlay network               â”‚             â”‚
â”‚  â”‚  - Mesh topology                 â”‚             â”‚
â”‚  â”‚  - Encryption (optional)         â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                    â”‚
â”‚  Automatic mesh formation between nodes            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<p><strong>ê¸°ëŠ¥:</strong>
- ë©”ì‹œ ë„¤íŠ¸ì›Œí¬ í† í´ë¡œì§€
- ë‚´ì¥ ì•”í˜¸í™”
- ë©€í‹°ìºìŠ¤íŠ¸ ì§€ì›
- ë„¤íŠ¸ì›Œí¬ ì •ì±… ì§€ì›</p>
<h3 id="cni">CNI í”ŒëŸ¬ê·¸ì¸ ë¹„êµ<a class="header-link" href="#cni" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>í”ŒëŸ¬ê·¸ì¸</th>
<th>ê¸°ìˆ </th>
<th>ì„±ëŠ¥</th>
<th>ê¸°ëŠ¥</th>
<th>ë³µì¡ë„</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Calico</strong></td>
<td>BGP/eBPF</td>
<td>ë›°ì–´ë‚¨</td>
<td>í’ë¶€í•œ ì •ì±…, í™•ì¥ ê°€ëŠ¥</td>
<td>ì¤‘ê°„</td>
</tr>
<tr>
<td><strong>Cilium</strong></td>
<td>eBPF</td>
<td>ë›°ì–´ë‚¨</td>
<td>L7 ì •ì±…, ê´€ì°°ì„±</td>
<td>ë†’ìŒ</td>
</tr>
<tr>
<td><strong>Flannel</strong></td>
<td>VXLAN/host-gw</td>
<td>ì¢‹ìŒ</td>
<td>ê°„ë‹¨, ì‹ ë¢°ì„±</td>
<td>ë‚®ìŒ</td>
</tr>
<tr>
<td><strong>Weave</strong></td>
<td>Mesh/VXLAN</td>
<td>ì¢‹ìŒ</td>
<td>ì•”í˜¸í™”, ë©€í‹°ìºìŠ¤íŠ¸</td>
<td>ì¤‘ê°„</td>
</tr>
</tbody>
</table>
<p><strong>ì„ íƒ ê¸°ì¤€:</strong>
- <strong>ê°„ë‹¨í•œ ì˜¤ë²„ë ˆì´</strong>: Flannel
- <strong>ë„¤íŠ¸ì›Œí¬ ì •ì±… + í™•ì¥ì„±</strong>: Calico
- <strong>L7 ê°€ì‹œì„±</strong>: Cilium
- <strong>ì•”í˜¸í™”</strong>: Weave
- <strong>ì˜¨í”„ë ˆë¯¸ìŠ¤, L2</strong>: Calico (BGP)</p>
<hr />
<h2 id="6">6. ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ì™€ ë¡œë“œ ë°¸ëŸ°ì‹±<a class="header-link" href="#6" title="Permanent link">&para;</a></h2>
<h3 id="kubernetes-kubernetes-services">Kubernetes ì„œë¹„ìŠ¤(Kubernetes Services)<a class="header-link" href="#kubernetes-kubernetes-services" title="Permanent link">&para;</a></h3>
<p>ì„œë¹„ìŠ¤ëŠ” Podì— ì•ˆì •ì ì¸ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤:</p>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Service (ClusterIP)                   â”‚
â”‚              my-service: 10.96.0.10:80             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ (Load balances to endpoints)
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚            â”‚            â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚  Pod A  â”‚  â”‚  Pod B  â”‚  â”‚  Pod C  â”‚
    â”‚10.244.1.2â”‚ â”‚10.244.1.3â”‚ â”‚10.244.2.2â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<p><strong>ì„œë¹„ìŠ¤ ìœ í˜•:</strong></p>
<ol>
<li><strong>ClusterIP (ê¸°ë³¸)</strong>: ë‚´ë¶€ í´ëŸ¬ìŠ¤í„° IP</li>
<li><strong>NodePort</strong>: ê° ë…¸ë“œ IPì˜ ì •ì  í¬íŠ¸ì— ë…¸ì¶œ</li>
<li><strong>LoadBalancer</strong>: ì™¸ë¶€ ë¡œë“œ ë°¸ëŸ°ì„œ (í´ë¼ìš°ë“œ ì œê³µì)</li>
<li><strong>ExternalName</strong>: ì™¸ë¶€ ì„œë¹„ìŠ¤ì— ëŒ€í•œ CNAME</li>
</ol>
<p><strong>ì„œë¹„ìŠ¤ ì •ì˜:</strong></p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Service</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-service</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterIP</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
<span class="w">  </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span><span class="w">        </span><span class="c1"># Service port</span>
<span class="w">      </span><span class="nt">targetPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span><span class="w">  </span><span class="c1"># Container port</span>
</code></pre></div>

<h3 id="kube-proxy">kube-proxy<a class="header-link" href="#kube-proxy" title="Permanent link">&para;</a></h3>
<p>kube-proxyëŠ” ì„œë¹„ìŠ¤ ë¡œë“œ ë°¸ëŸ°ì‹±ì„ êµ¬í˜„í•©ë‹ˆë‹¤:</p>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Node                              â”‚
â”‚                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚        kube-proxy                â”‚              â”‚
â”‚  â”‚  Watches Service/Endpoint API   â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚               â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚   Packet forwarding rules       â”‚              â”‚
â”‚  â”‚   (iptables / IPVS / eBPF)      â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="iptables">iptables ëª¨ë“œ<a class="header-link" href="#iptables" title="Permanent link">&para;</a></h3>
<p>iptables NATë¥¼ ì‚¬ìš©í•˜ëŠ” ê¸°ë³¸ ëª¨ë“œ:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Example iptables rules for service 10.96.0.10:80</span>
<span class="c1"># (Load balance to 3 backends)</span>

<span class="c1"># KUBE-SERVICES chain</span>
-A<span class="w"> </span>KUBE-SERVICES<span class="w"> </span>-d<span class="w"> </span><span class="m">10</span>.96.0.10/32<span class="w"> </span>-p<span class="w"> </span>tcp<span class="w"> </span>-m<span class="w"> </span>tcp<span class="w"> </span>--dport<span class="w"> </span><span class="m">80</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-j<span class="w"> </span>KUBE-SVC-XYZ

<span class="c1"># Service chain (probabilistic load balancing)</span>
-A<span class="w"> </span>KUBE-SVC-XYZ<span class="w"> </span>-m<span class="w"> </span>statistic<span class="w"> </span>--mode<span class="w"> </span>random<span class="w"> </span>--probability<span class="w"> </span><span class="m">0</span>.33333<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-j<span class="w"> </span>KUBE-SEP-AAA
-A<span class="w"> </span>KUBE-SVC-XYZ<span class="w"> </span>-m<span class="w"> </span>statistic<span class="w"> </span>--mode<span class="w"> </span>random<span class="w"> </span>--probability<span class="w"> </span><span class="m">0</span>.50000<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-j<span class="w"> </span>KUBE-SEP-BBB
-A<span class="w"> </span>KUBE-SVC-XYZ<span class="w"> </span>-j<span class="w"> </span>KUBE-SEP-CCC

<span class="c1"># Endpoint chains (DNAT to pod IPs)</span>
-A<span class="w"> </span>KUBE-SEP-AAA<span class="w"> </span>-p<span class="w"> </span>tcp<span class="w"> </span>-m<span class="w"> </span>tcp<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-j<span class="w"> </span>DNAT<span class="w"> </span>--to-destination<span class="w"> </span><span class="m">10</span>.244.1.2:80
-A<span class="w"> </span>KUBE-SEP-BBB<span class="w"> </span>-p<span class="w"> </span>tcp<span class="w"> </span>-m<span class="w"> </span>tcp<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-j<span class="w"> </span>DNAT<span class="w"> </span>--to-destination<span class="w"> </span><span class="m">10</span>.244.1.3:80
-A<span class="w"> </span>KUBE-SEP-CCC<span class="w"> </span>-p<span class="w"> </span>tcp<span class="w"> </span>-m<span class="w"> </span>tcp<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-j<span class="w"> </span>DNAT<span class="w"> </span>--to-destination<span class="w"> </span><span class="m">10</span>.244.2.2:80
</code></pre></div>

<p><strong>ì¥ì :</strong>
- ì„±ìˆ™í•˜ê³  í…ŒìŠ¤íŠ¸ë¨
- ì»¤ë„ ìˆ˜ì¤€ ì„±ëŠ¥</p>
<p><strong>ë‹¨ì :</strong>
- O(n) ê·œì¹™ ì²˜ë¦¬
- 1000+ ì„œë¹„ìŠ¤ì—ì„œ ì„±ëŠ¥ ì €í•˜</p>
<h3 id="ipvs">IPVS ëª¨ë“œ<a class="header-link" href="#ipvs" title="Permanent link">&para;</a></h3>
<p>ë” ë‚˜ì€ ì„±ëŠ¥ì„ ìœ„í•œ IP Virtual Server:</p>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              IPVS Virtual Server                   â”‚
â”‚        10.96.0.10:80 (rr scheduling)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚            â”‚            â”‚
    10.244.1.2    10.244.1.3   10.244.2.2
    (weight 1)    (weight 1)   (weight 1)
</code></pre></div>

<p><strong>ì¥ì :</strong>
- O(1) ë£©ì—… ë³µì¡ë„
- ëŒ€ê·œëª¨ì—ì„œ ë” ë‚˜ì€ ì„±ëŠ¥
- ì—¬ëŸ¬ ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜ (rr, lc, dh, sh ë“±)</p>
<p><strong>IPVS ëª¨ë“œ í™œì„±í™”:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># kube-proxy config</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kubeproxy.config.k8s.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">KubeProxyConfiguration</span>
<span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ipvs&quot;</span>
<span class="nt">ipvs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">scheduler</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;rr&quot;</span><span class="w">  </span><span class="c1"># round-robin</span>
</code></pre></div>

<h3 id="coredns">CoreDNS<a class="header-link" href="#coredns" title="Permanent link">&para;</a></h3>
<p>DNS ê¸°ë°˜ ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬:</p>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CoreDNS                               â”‚
â”‚  Watches Services, creates DNS records             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DNS Records:
- my-service.default.svc.cluster.local â†’ 10.96.0.10
- my-service.default.svc               â†’ 10.96.0.10
- my-service.default                   â†’ 10.96.0.10
- my-service                           â†’ 10.96.0.10
  (from default namespace)

# From pod:
nslookup my-service
# Returns: 10.96.0.10
</code></pre></div>

<p><strong>CoreDNS êµ¬ì„±:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Corefile</span>
<span class="o">.</span><span class="p">:</span><span class="mi">53</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">errors</span>
<span class="w">    </span><span class="n">health</span>
<span class="w">    </span><span class="n">kubernetes</span><span class="w"> </span><span class="n">cluster</span><span class="o">.</span><span class="n">local</span><span class="w"> </span><span class="ow">in</span><span class="o">-</span><span class="n">addr</span><span class="o">.</span><span class="n">arpa</span><span class="w"> </span><span class="n">ip6</span><span class="o">.</span><span class="n">arpa</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">pods</span><span class="w"> </span><span class="n">insecure</span>
<span class="w">      </span><span class="n">fallthrough</span><span class="w"> </span><span class="ow">in</span><span class="o">-</span><span class="n">addr</span><span class="o">.</span><span class="n">arpa</span><span class="w"> </span><span class="n">ip6</span><span class="o">.</span><span class="n">arpa</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">prometheus</span><span class="w"> </span><span class="p">:</span><span class="mi">9153</span>
<span class="w">    </span><span class="n">forward</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">resolv</span><span class="o">.</span><span class="n">conf</span>
<span class="w">    </span><span class="n">cache</span><span class="w"> </span><span class="mi">30</span>
<span class="w">    </span><span class="n">loop</span>
<span class="w">    </span><span class="n">reload</span>
<span class="w">    </span><span class="n">loadbalance</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h2 id="7">7. ë„¤íŠ¸ì›Œí¬ ì •ì±…<a class="header-link" href="#7" title="Permanent link">&para;</a></h2>
<h3 id="kubernetes-networkpolicy">Kubernetes NetworkPolicy<a class="header-link" href="#kubernetes-networkpolicy" title="Permanent link">&para;</a></h3>
<p>Pod ê°„ íŠ¸ë˜í”½ ì œì–´:</p>
<div class="highlight"><pre><span></span><code><span class="n">Default</span><span class="o">:</span><span class="w"> </span><span class="n">All</span><span class="w"> </span><span class="n">traffic</span><span class="w"> </span><span class="n">allowed</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">     </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">     </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Pod</span><span class="w"> </span><span class="n">A</span><span class="w">  </span><span class="err">â”‚â”€â”€â”€â”€â–¶â”‚</span><span class="w">  </span><span class="n">Pod</span><span class="w"> </span><span class="n">B</span><span class="w">  </span><span class="err">â”‚â”€â”€â”€â”€â–¶â”‚</span><span class="w">  </span><span class="n">Pod</span><span class="w"> </span><span class="n">C</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">     </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">     </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="n">With</span><span class="w"> </span><span class="n">NetworkPolicy</span><span class="o">:</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">     </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">     </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Pod</span><span class="w"> </span><span class="n">A</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">âœ“</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Pod</span><span class="w"> </span><span class="n">B</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">âœ—</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Pod</span><span class="w"> </span><span class="n">C</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”€â”€â”€â”€â–¶â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="err">â–¶â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<p><strong>ê¸°ë³¸ NetworkPolicy:</strong></p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NetworkPolicy</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">allow-from-frontend</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">podSelector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend</span>
<span class="w">  </span><span class="nt">policyTypes</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<span class="w">  </span><span class="nt">ingress</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">from</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">podSelector</span><span class="p">:</span>
<span class="w">            </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">              </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">frontend</span>
<span class="w">      </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">          </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
</code></pre></div>

<p><strong>íš¨ê³¼:</strong>
- <code>app=frontend</code> ë ˆì´ë¸”ì„ ê°€ì§„ Podë§Œ í¬íŠ¸ 8080ì—ì„œ ë°±ì—”ë“œ ì ‘ê·¼ ê°€ëŠ¥
- ë°±ì—”ë“œë¡œì˜ ë‹¤ë¥¸ ëª¨ë“  íŠ¸ë˜í”½ ê±°ë¶€</p>
<h3 id="ingress-and-egress-rules">ì¸ê·¸ë ˆìŠ¤ì™€ ì´ê·¸ë ˆìŠ¤ ê·œì¹™(Ingress and Egress Rules)<a class="header-link" href="#ingress-and-egress-rules" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NetworkPolicy</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">db-network-policy</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">podSelector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">database</span>
<span class="w">  </span><span class="nt">policyTypes</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Egress</span>
<span class="w">  </span><span class="nt">ingress</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Allow from backend pods on port 3306</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">from</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">podSelector</span><span class="p">:</span>
<span class="w">            </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">              </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend</span>
<span class="w">      </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">          </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3306</span>
<span class="w">  </span><span class="nt">egress</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Allow DNS</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">to</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">namespaceSelector</span><span class="p">:</span>
<span class="w">            </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kube-system</span>
<span class="w">      </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">UDP</span>
<span class="w">          </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">53</span>
<span class="w">    </span><span class="c1"># Allow external backup server</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">to</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ipBlock</span><span class="p">:</span>
<span class="w">            </span><span class="nt">cidr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.0.5.0/24</span>
<span class="w">      </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">          </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">22</span>
</code></pre></div>

<h3 id="namespace-isolation">ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ê²©ë¦¬(Namespace Isolation)<a class="header-link" href="#namespace-isolation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Deny all traffic to pods in namespace</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NetworkPolicy</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default-deny-all</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">production</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">podSelector</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">policyTypes</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Egress</span>
<span class="c1"># No ingress/egress rules = deny all</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1"># Allow only from same namespace</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NetworkPolicy</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">allow-same-namespace</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">production</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">podSelector</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">policyTypes</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<span class="w">  </span><span class="nt">ingress</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">from</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">podSelector</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span><span class="w">  </span><span class="c1"># Same namespace</span>
</code></pre></div>

<h3 id="calico-networkpolicy">Calico NetworkPolicy<a class="header-link" href="#calico-networkpolicy" title="Permanent link">&para;</a></h3>
<p>Kubernetes NetworkPolicyë³´ë‹¤ ë” ê³ ê¸‰:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">projectcalico.org/v3</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GlobalNetworkPolicy</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deny-egress-to-metadata-server</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all()</span>
<span class="w">  </span><span class="nt">types</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Egress</span>
<span class="w">  </span><span class="nt">egress</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Deny access to cloud metadata service</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deny</span>
<span class="w">      </span><span class="nt">destination</span><span class="p">:</span>
<span class="w">        </span><span class="nt">nets</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">169.254.169.254/32</span>
<span class="w">    </span><span class="c1"># Allow all other egress</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Allow</span>
</code></pre></div>

<p><strong>Calico ê¸°ëŠ¥:</strong>
- ê¸€ë¡œë²Œ ì •ì±…
- ì •ì±… ìˆœì„œ
- Layer 7 ê·œì¹™ (Istio ì‚¬ìš©)
- ë¡œê¹…/ëª¨ë‹ˆí„°ë§</p>
<hr />
<h2 id="8">8. ì„œë¹„ìŠ¤ ë©”ì‹œ<a class="header-link" href="#8" title="Permanent link">&para;</a></h2>
<h3 id="_6">ì„œë¹„ìŠ¤ ë©”ì‹œ ì•„í‚¤í…ì²˜<a class="header-link" href="#_6" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Control Plane                         â”‚
â”‚  (Istio Pilot, Citadel, Galley, Telemetry)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ Configuration
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚         â”‚         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Envoy   â”‚ â”‚ Envoy  â”‚ â”‚ Envoy    â”‚
    â”‚ Proxy   â”‚ â”‚ Proxy  â”‚ â”‚ Proxy    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ App A   â”‚ â”‚ App B  â”‚ â”‚ App C    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="istio-istio-sidecar-pattern">Istio ì‚¬ì´ë“œì¹´ íŒ¨í„´(Istio Sidecar Pattern)<a class="header-link" href="#istio-istio-sidecar-pattern" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Pod                               â”‚
â”‚                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Application     â”‚   â”‚  Envoy Proxy     â”‚     â”‚
â”‚  â”‚  Container       â”‚â—€â”€â–¶â”‚  (Sidecar)       â”‚     â”‚
â”‚  â”‚  localhost:8080  â”‚   â”‚  - mTLS          â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  - Metrics       â”‚     â”‚
â”‚                         â”‚  - Tracing       â”‚     â”‚
â”‚                         â”‚  - Retries       â”‚     â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                              Encrypted traffic
</code></pre></div>

<h3 id="tlsmutual-tls-mtls">ìƒí˜¸ TLS(Mutual TLS, mTLS)<a class="header-link" href="#tlsmutual-tls-mtls" title="Permanent link">&para;</a></h3>
<p>ì„œë¹„ìŠ¤ ê°„ ì•”í˜¸í™”:</p>
<div class="highlight"><pre><span></span><code>Service A                          Service B
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  App        â”‚                   â”‚  App        â”‚
â”‚  â”‚          â”‚                   â”‚  â”‚          â”‚
â”‚  â–¼          â”‚                   â”‚  â–¼          â”‚
â”‚ Envoy       â”‚    mTLS tunnel    â”‚ Envoy       â”‚
â”‚  â”‚          â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  â”‚          â”‚
â”‚  â”‚          â”‚  (cert exchange)  â”‚  â”‚          â”‚
â””â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚                                 â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     Encrypted, authenticated traffic
</code></pre></div>

<p><strong>Istio PeerAuthentication:</strong></p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">security.istio.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PeerAuthentication</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">mtls</span><span class="p">:</span>
<span class="w">    </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">STRICT</span><span class="w">  </span><span class="c1"># STRICT, PERMISSIVE, or DISABLE</span>
</code></pre></div>

<h3 id="traffic-management">íŠ¸ë˜í”½ ê´€ë¦¬(Traffic Management)<a class="header-link" href="#traffic-management" title="Permanent link">&para;</a></h3>
<p><strong>Virtual Service (ë¼ìš°íŒ… ê·œì¹™):</strong></p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.istio.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VirtualService</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">reviews</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">reviews</span>
<span class="w">  </span><span class="nt">http</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># 90% to v1, 10% to v2 (canary deployment)</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">match</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">headers</span><span class="p">:</span>
<span class="w">            </span><span class="nt">end-user</span><span class="p">:</span>
<span class="w">              </span><span class="nt">exact</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">jason</span>
<span class="w">      </span><span class="nt">route</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">destination</span><span class="p">:</span>
<span class="w">            </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">reviews</span>
<span class="w">            </span><span class="nt">subset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v2</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">route</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">destination</span><span class="p">:</span>
<span class="w">            </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">reviews</span>
<span class="w">            </span><span class="nt">subset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="w">          </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">90</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">destination</span><span class="p">:</span>
<span class="w">            </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">reviews</span>
<span class="w">            </span><span class="nt">subset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v2</span>
<span class="w">          </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
</code></pre></div>

<p><strong>Destination Rule (ë¡œë“œ ë°¸ëŸ°ì‹±, ì„œí‚· ë¸Œë ˆì´í‚¹):</strong></p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.istio.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DestinationRule</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">reviews</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">reviews</span>
<span class="w">  </span><span class="nt">trafficPolicy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">loadBalancer</span><span class="p">:</span>
<span class="w">      </span><span class="nt">simple</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LEAST_REQUEST</span>
<span class="w">    </span><span class="nt">connectionPool</span><span class="p">:</span>
<span class="w">      </span><span class="nt">tcp</span><span class="p">:</span>
<span class="w">        </span><span class="nt">maxConnections</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<span class="w">      </span><span class="nt">http</span><span class="p">:</span>
<span class="w">        </span><span class="nt">http1MaxPendingRequests</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50</span>
<span class="w">        </span><span class="nt">maxRequestsPerConnection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">    </span><span class="nt">outlierDetection</span><span class="p">:</span>
<span class="w">      </span><span class="nt">consecutiveErrors</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">      </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30s</span>
<span class="w">      </span><span class="nt">baseEjectionTime</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30s</span>
<span class="w">  </span><span class="nt">subsets</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v2</span>
<span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v2</span>
</code></pre></div>

<h3 id="_7">ì„œë¹„ìŠ¤ ë©”ì‹œ ë¹„êµ<a class="header-link" href="#_7" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>ê¸°ëŠ¥</th>
<th>Istio</th>
<th>Linkerd</th>
<th>Envoy</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ì–¸ì–´</strong></td>
<td>Go/C++</td>
<td>Rust</td>
<td>C++</td>
</tr>
<tr>
<td><strong>ë³µì¡ë„</strong></td>
<td>ë†’ìŒ</td>
<td>ë‚®ìŒ</td>
<td>ì¤‘ê°„</td>
</tr>
<tr>
<td><strong>ë¦¬ì†ŒìŠ¤ ì‚¬ìš©</strong></td>
<td>ë¬´ê±°ì›€</td>
<td>ê°€ë²¼ì›€</td>
<td>ì¤‘ê°„</td>
</tr>
<tr>
<td><strong>ê¸°ëŠ¥</strong></td>
<td>ê´‘ë²”ìœ„</td>
<td>ë³´í†µ</td>
<td>í”„ë¡ì‹œë§Œ</td>
</tr>
<tr>
<td><strong>mTLS</strong></td>
<td>ì˜ˆ</td>
<td>ì˜ˆ</td>
<td>ì˜ˆ</td>
</tr>
<tr>
<td><strong>ê´€ì°°ì„±</strong></td>
<td>ê´‘ë²”ìœ„</td>
<td>ì¢‹ìŒ</td>
<td>ê¸°ë³¸</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="9">9. ì¸ê·¸ë ˆìŠ¤ì™€ ë¡œë“œ ë°¸ëŸ°ì‹±<a class="header-link" href="#9" title="Permanent link">&para;</a></h2>
<h3 id="ingress-controller">ì¸ê·¸ë ˆìŠ¤ ì»¨íŠ¸ë¡¤ëŸ¬(Ingress Controller)<a class="header-link" href="#ingress-controller" title="Permanent link">&para;</a></h3>
<p>ì„œë¹„ìŠ¤ë¡œì˜ HTTP/HTTPS ë¼ìš°íŒ…:</p>
<div class="highlight"><pre><span></span><code>                    Internet
                       â”‚
                 â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                 â”‚  LoadBalancer â”‚
                 â”‚  (Cloud LB)   â”‚
                 â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                       â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   Ingress Controller      â”‚
         â”‚   (nginx/traefik/haproxy) â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚             â”‚             â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
    â”‚Service Aâ”‚   â”‚Service Bâ”‚  â”‚Service Câ”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<p><strong>ì¸ê·¸ë ˆìŠ¤ ë¦¬ì†ŒìŠ¤:</strong></p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-ingress</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">nginx.ingress.kubernetes.io/rewrite-target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span>
<span class="w">      </span><span class="nt">http</span><span class="p">:</span>
<span class="w">        </span><span class="nt">paths</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/app1</span>
<span class="w">            </span><span class="nt">pathType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
<span class="w">            </span><span class="nt">backend</span><span class="p">:</span>
<span class="w">              </span><span class="nt">service</span><span class="p">:</span>
<span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app1-service</span>
<span class="w">                </span><span class="nt">port</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/app2</span>
<span class="w">            </span><span class="nt">pathType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
<span class="w">            </span><span class="nt">backend</span><span class="p">:</span>
<span class="w">              </span><span class="nt">service</span><span class="p">:</span>
<span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app2-service</span>
<span class="w">                </span><span class="nt">port</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="w">  </span><span class="nt">tls</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span>
<span class="w">      </span><span class="nt">secretName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls-secret</span>
</code></pre></div>

<h3 id="gateway-api">Gateway API<a class="header-link" href="#gateway-api" title="Permanent link">&para;</a></h3>
<p>ì°¨ì„¸ëŒ€ ì¸ê·¸ë ˆìŠ¤:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Gateway</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-gateway</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">gatewayClassName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
<span class="w">  </span><span class="nt">listeners</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http</span>
<span class="w">      </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTP</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https</span>
<span class="w">      </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTPS</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">443</span>
<span class="w">      </span><span class="nt">tls</span><span class="p">:</span>
<span class="w">        </span><span class="nt">certificateRefs</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls-cert</span>
<span class="nn">---</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTPRoute</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-route</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">parentRefs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-gateway</span>
<span class="w">  </span><span class="nt">hostnames</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">matches</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PathPrefix</span>
<span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/app1</span>
<span class="w">      </span><span class="nt">backendRefs</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app1-service</span>
<span class="w">          </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
</code></pre></div>

<h3 id="external-load-balancer">ì™¸ë¶€ ë¡œë“œ ë°¸ëŸ°ì„œ(External Load Balancer)<a class="header-link" href="#external-load-balancer" title="Permanent link">&para;</a></h3>
<p>í´ë¼ìš°ë“œ ì œê³µì í†µí•©:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Service</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-service</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LoadBalancer</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
<span class="w">  </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="w">      </span><span class="nt">targetPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="w">  </span><span class="c1"># Cloud-specific annotations</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">service.beta.kubernetes.io/aws-load-balancer-type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;nlb&quot;</span>
</code></pre></div>

<p><strong>ê²°ê³¼:</strong>
- í´ë¼ìš°ë“œ ì œê³µìê°€ ë¡œë“œ ë°¸ëŸ°ì„œ í”„ë¡œë¹„ì €ë‹
- ì„œë¹„ìŠ¤ì— ì™¸ë¶€ IP í• ë‹¹
- NodePortë¡œ íŠ¸ë˜í”½ ë¼ìš°íŒ…</p>
<hr />
<h2 id="10">10. ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ í•´ê²°<a class="header-link" href="#10" title="Permanent link">&para;</a></h2>
<h3 id="docker_2">Docker ë„¤íŠ¸ì›Œí‚¹ ë¬¸ì œ í•´ê²°<a class="header-link" href="#docker_2" title="Permanent link">&para;</a></h3>
<p><strong>ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí¬ í™•ì¸:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Inspect container network</span>
docker<span class="w"> </span>inspect<span class="w"> </span>&lt;container&gt;<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span><span class="s1">&#39;.[0].NetworkSettings&#39;</span>

<span class="c1"># Check IP address</span>
docker<span class="w"> </span>inspect<span class="w"> </span>-f<span class="w"> </span><span class="s1">&#39;{{.NetworkSettings.IPAddress}}&#39;</span><span class="w"> </span>&lt;container&gt;

<span class="c1"># List connected networks</span>
docker<span class="w"> </span>inspect<span class="w"> </span>-f<span class="w"> </span><span class="s1">&#39;{{range $net, $conf := .NetworkSettings.Networks}}{{$net}} {{end}}&#39;</span><span class="w"> </span>&lt;container&gt;

<span class="c1"># Enter container network namespace</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>&lt;container&gt;<span class="w"> </span>bash
ip<span class="w"> </span>addr<span class="w"> </span>show
ip<span class="w"> </span>route<span class="w"> </span>show
</code></pre></div>

<p><strong>ì—°ê²°ì„± í…ŒìŠ¤íŠ¸:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Ping from one container to another</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>container1<span class="w"> </span>ping<span class="w"> </span>container2

<span class="c1"># Check DNS resolution</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>container1<span class="w"> </span>nslookup<span class="w"> </span>container2

<span class="c1"># Check port connectivity</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>container1<span class="w"> </span>nc<span class="w"> </span>-zv<span class="w"> </span>container2<span class="w"> </span><span class="m">80</span>
</code></pre></div>

<p><strong>ì¼ë°˜ì ì¸ ë¬¸ì œ:</strong></p>
<ol>
<li><strong>ì»¨í…Œì´ë„ˆ ê°„ í†µì‹  ë¶ˆê°€:</strong></li>
<li>ë™ì¼ ë„¤íŠ¸ì›Œí¬ì— ìˆëŠ”ì§€ í™•ì¸</li>
<li>ë°©í™”ë²½ ê·œì¹™ í™•ì¸</li>
<li>
<p>DNS í•´ì„ í™•ì¸</p>
</li>
<li>
<p><strong>ì»¨í…Œì´ë„ˆê°€ ì¸í„°ë„·ì— ì ‘ê·¼ ë¶ˆê°€:</strong></p>
</li>
<li>NAT/masquerade ê·œì¹™ í™•ì¸</li>
<li>ê¸°ë³¸ ê²½ë¡œ í™•ì¸</li>
<li>
<p>DNS êµ¬ì„± í™•ì¸</p>
</li>
<li>
<p><strong>í¬íŠ¸ í¼ë¸”ë¦¬ì‹± ì‘ë™ ì•ˆ í•¨:</strong></p>
</li>
<li>iptables DNAT ê·œì¹™ í™•ì¸</li>
<li>í˜¸ìŠ¤íŠ¸ ë°©í™”ë²½ í™•ì¸</li>
<li>í¬íŠ¸ê°€ ì´ë¯¸ ì‚¬ìš© ì¤‘ì´ ì•„ë‹Œì§€ í™•ì¸</li>
</ol>
<h3 id="kubernetes_1">Kubernetes ë„¤íŠ¸ì›Œí‚¹ ë¬¸ì œ í•´ê²°<a class="header-link" href="#kubernetes_1" title="Permanent link">&para;</a></h3>
<p><strong>Pod ì—°ê²°ì„±:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Check pod IP and network</span>
kubectl<span class="w"> </span>get<span class="w"> </span>pod<span class="w"> </span>&lt;pod&gt;<span class="w"> </span>-o<span class="w"> </span>wide

<span class="c1"># Describe pod (check events)</span>
kubectl<span class="w"> </span>describe<span class="w"> </span>pod<span class="w"> </span>&lt;pod&gt;

<span class="c1"># Check pod network interfaces</span>
kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>&lt;pod&gt;<span class="w"> </span>--<span class="w"> </span>ip<span class="w"> </span>addr<span class="w"> </span>show

<span class="c1"># Test pod-to-pod connectivity</span>
kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>&lt;pod1&gt;<span class="w"> </span>--<span class="w"> </span>ping<span class="w"> </span>&lt;pod2-ip&gt;

<span class="c1"># Test service connectivity</span>
kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>&lt;pod&gt;<span class="w"> </span>--<span class="w"> </span>curl<span class="w"> </span>http://my-service
</code></pre></div>

<p><strong>ì„œë¹„ìŠ¤ ë¬¸ì œ í•´ê²°:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Check service endpoints</span>
kubectl<span class="w"> </span>get<span class="w"> </span>endpoints<span class="w"> </span>my-service

<span class="c1"># Verify service DNS</span>
kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>&lt;pod&gt;<span class="w"> </span>--<span class="w"> </span>nslookup<span class="w"> </span>my-service

<span class="c1"># Check kube-proxy logs</span>
kubectl<span class="w"> </span>logs<span class="w"> </span>-n<span class="w"> </span>kube-system<span class="w"> </span>-l<span class="w"> </span>k8s-app<span class="o">=</span>kube-proxy

<span class="c1"># Check iptables rules (iptables mode)</span>
kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-n<span class="w"> </span>kube-system<span class="w"> </span>&lt;kube-proxy-pod&gt;<span class="w"> </span>--<span class="w"> </span>iptables-save<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>&lt;service-name&gt;
</code></pre></div>

<p><strong>CNI ë¬¸ì œ í•´ê²°:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Check CNI plugin pods</span>
kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>kube-system<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>calico
kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>kube-system<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>cilium

<span class="c1"># Check CNI logs</span>
kubectl<span class="w"> </span>logs<span class="w"> </span>-n<span class="w"> </span>kube-system<span class="w"> </span>&lt;cni-pod&gt;

<span class="c1"># Verify CNI configuration</span>
cat<span class="w"> </span>/etc/cni/net.d/*.conf
</code></pre></div>

<p><strong>NetworkPolicy ë””ë²„ê¹…:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Check if policy applied</span>
kubectl<span class="w"> </span>get<span class="w"> </span>networkpolicy

<span class="c1"># Describe policy</span>
kubectl<span class="w"> </span>describe<span class="w"> </span>networkpolicy<span class="w"> </span>&lt;policy&gt;

<span class="c1"># Test connectivity before/after policy</span>
kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>&lt;pod&gt;<span class="w"> </span>--<span class="w"> </span>curl<span class="w"> </span>&lt;target&gt;

<span class="c1"># Check CNI plugin logs (policy enforcement)</span>
kubectl<span class="w"> </span>logs<span class="w"> </span>-n<span class="w"> </span>kube-system<span class="w"> </span>&lt;calico-node-pod&gt;
</code></pre></div>

<h3 id="_8">ë„¤íŠ¸ì›Œí¬ ì§„ë‹¨ ë„êµ¬<a class="header-link" href="#_8" title="Permanent link">&para;</a></h3>
<p><strong>ì»¨í…Œì´ë„ˆ ë””ë²„ê¹… ì´ë¯¸ì§€:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Run debug container with network tools</span>
kubectl<span class="w"> </span>run<span class="w"> </span>debug<span class="w"> </span>--rm<span class="w"> </span>-it<span class="w"> </span>--image<span class="o">=</span>nicolaka/netshoot<span class="w"> </span>--<span class="w"> </span>bash

<span class="c1"># Tools included:</span>
<span class="c1"># - tcpdump, wireshark</span>
<span class="c1"># - curl, wget, httpie</span>
<span class="c1"># - nslookup, dig, host</span>
<span class="c1"># - netcat, socat</span>
<span class="c1"># - iperf3, mtr, traceroute</span>
</code></pre></div>

<p><strong>ì„ì‹œ ë””ë²„ê·¸ ì»¨í…Œì´ë„ˆ (K8s 1.23+):</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Attach debug container to existing pod</span>
kubectl<span class="w"> </span>debug<span class="w"> </span>-it<span class="w"> </span>&lt;pod&gt;<span class="w"> </span>--image<span class="o">=</span>nicolaka/netshoot<span class="w"> </span>--target<span class="o">=</span>&lt;container&gt;
</code></pre></div>

<p><strong>íŒ¨í‚· ìº¡ì²˜:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Capture traffic on pod interface</span>
kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>&lt;pod&gt;<span class="w"> </span>--<span class="w"> </span>tcpdump<span class="w"> </span>-i<span class="w"> </span>eth0<span class="w"> </span>-w<span class="w"> </span>/tmp/capture.pcap

<span class="c1"># Copy to local machine</span>
kubectl<span class="w"> </span>cp<span class="w"> </span>&lt;pod&gt;:/tmp/capture.pcap<span class="w"> </span>./capture.pcap

<span class="c1"># Analyze with Wireshark</span>
wireshark<span class="w"> </span>capture.pcap
</code></pre></div>

<hr />
<h2 id="11">11. ì—°ìŠµ ë¬¸ì œ<a class="header-link" href="#11" title="Permanent link">&para;</a></h2>
<h3 id="1-docker">ë¬¸ì œ 1: Docker ì‚¬ìš©ì ì •ì˜ ë„¤íŠ¸ì›Œí¬<a class="header-link" href="#1-docker" title="Permanent link">&para;</a></h3>
<p>ë‹¤ìŒ ìš”êµ¬ì‚¬í•­ìœ¼ë¡œ ì‚¬ìš©ì ì •ì˜ Docker ë„¤íŠ¸ì›Œí¬ë¥¼ ìƒì„±í•˜ì„¸ìš”:
- ì„œë¸Œë„·: 172.20.0.0/16
- ê²Œì´íŠ¸ì›¨ì´: 172.20.0.1
- 3ê°œ ì»¨í…Œì´ë„ˆ ì‹¤í–‰: web, api, db
- webì€ apiì™€, apiëŠ” dbì™€ ì—°ê²°
- ì—°ê²°ì„± í…ŒìŠ¤íŠ¸</p>
<p><strong>ì •ë‹µ:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Create network</span>
docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--driver<span class="w"> </span>bridge<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--subnet<span class="w"> </span><span class="m">172</span>.20.0.0/16<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--gateway<span class="w"> </span><span class="m">172</span>.20.0.1<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>mynetwork

<span class="c1"># Run containers</span>
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>db<span class="w"> </span>--network<span class="w"> </span>mynetwork<span class="w"> </span>postgres
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>api<span class="w"> </span>--network<span class="w"> </span>mynetwork<span class="w"> </span>my-api
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>web<span class="w"> </span>--network<span class="w"> </span>mynetwork<span class="w"> </span>nginx

<span class="c1"># Test connectivity</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>web<span class="w"> </span>ping<span class="w"> </span>api
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>api<span class="w"> </span>ping<span class="w"> </span>db
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>web<span class="w"> </span>curl<span class="w"> </span>http://api:8080/health
</code></pre></div>

<h3 id="2-kubernetes">ë¬¸ì œ 2: Kubernetes ì„œë¹„ìŠ¤<a class="header-link" href="#2-kubernetes" title="Permanent link">&para;</a></h3>
<p>ë‹¤ìŒì„ ë°°í¬í•˜ì„¸ìš”:
- 3ê°œì˜ nginx Pod
- ClusterIP ì„œë¹„ìŠ¤
- ë¡œë“œ ë°¸ëŸ°ì‹± í™•ì¸</p>
<p><strong>ì •ë‹µ:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># deployment.yaml</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">web</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">web</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">web</span>
<span class="w">    </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">      </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
<span class="w">          </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
<span class="w">          </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="nn">---</span>
<span class="c1"># service.yaml</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Service</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">web-service</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">web</span>
<span class="w">  </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="w">      </span><span class="nt">targetPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1"># Apply</span>
kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>deployment.yaml

<span class="c1"># Check endpoints</span>
kubectl<span class="w"> </span>get<span class="w"> </span>endpoints<span class="w"> </span>web-service

<span class="c1"># Test load balancing</span>
kubectl<span class="w"> </span>run<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--rm<span class="w"> </span>-it<span class="w"> </span>--image<span class="o">=</span>busybox<span class="w"> </span>--<span class="w"> </span>sh
<span class="c1"># In pod:</span>
<span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>seq<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">10</span><span class="k">)</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span>wget<span class="w"> </span>-qO-<span class="w"> </span>http://web-service<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s1">&#39;Server:&#39;</span>
<span class="k">done</span>
<span class="c1"># Should see different pod IPs</span>
</code></pre></div>

<h3 id="3-networkpolicy">ë¬¸ì œ 3: NetworkPolicy<a class="header-link" href="#3-networkpolicy" title="Permanent link">&para;</a></h3>
<p>ë³´ì•ˆ ì •ì±… êµ¬í˜„:
- í”„ë¡ íŠ¸ì—”ë“œê°€ í¬íŠ¸ 8080ì—ì„œ ë°±ì—”ë“œ ì ‘ê·¼ í—ˆìš©
- ë°±ì—”ë“œê°€ í¬íŠ¸ 5432ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼ í—ˆìš©
- ë‹¤ë¥¸ ëª¨ë“  íŠ¸ë˜í”½ ê±°ë¶€</p>
<p><strong>ì •ë‹µ:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># backend-policy.yaml</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NetworkPolicy</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend-policy</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">podSelector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">tier</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend</span>
<span class="w">  </span><span class="nt">policyTypes</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Egress</span>
<span class="w">  </span><span class="nt">ingress</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">from</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">podSelector</span><span class="p">:</span>
<span class="w">            </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">              </span><span class="nt">tier</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">frontend</span>
<span class="w">      </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">          </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<span class="w">  </span><span class="nt">egress</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Allow DNS</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">to</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">namespaceSelector</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">      </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">UDP</span>
<span class="w">          </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">53</span>
<span class="w">    </span><span class="c1"># Allow database</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">to</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">podSelector</span><span class="p">:</span>
<span class="w">            </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">              </span><span class="nt">tier</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">database</span>
<span class="w">      </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">          </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5432</span>
<span class="nn">---</span>
<span class="c1"># database-policy.yaml</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NetworkPolicy</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">database-policy</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">podSelector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">tier</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">database</span>
<span class="w">  </span><span class="nt">policyTypes</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<span class="w">  </span><span class="nt">ingress</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">from</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">podSelector</span><span class="p">:</span>
<span class="w">            </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">              </span><span class="nt">tier</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend</span>
<span class="w">      </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">          </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5432</span>
</code></pre></div>

<h3 id="4">ë¬¸ì œ 4: ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ ë””ë²„ê¹…<a class="header-link" href="#4" title="Permanent link">&para;</a></h3>
<p>ì‹œë‚˜ë¦¬ì˜¤: Podê°€ ì™¸ë¶€ ì„œë¹„ìŠ¤(example.com)ì— ì ‘ê·¼ ë¶ˆê°€</p>
<p><strong>ë¬¸ì œ í•´ê²° ë‹¨ê³„:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># 1. Check pod IP and interface</span>
kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>&lt;pod&gt;<span class="w"> </span>--<span class="w"> </span>ip<span class="w"> </span>addr<span class="w"> </span>show
kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>&lt;pod&gt;<span class="w"> </span>--<span class="w"> </span>ip<span class="w"> </span>route<span class="w"> </span>show

<span class="c1"># 2. Check DNS resolution</span>
kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>&lt;pod&gt;<span class="w"> </span>--<span class="w"> </span>nslookup<span class="w"> </span>example.com
<span class="c1"># If fails, check DNS pods</span>
kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>kube-system<span class="w"> </span>-l<span class="w"> </span>k8s-app<span class="o">=</span>kube-dns

<span class="c1"># 3. Test external connectivity</span>
kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>&lt;pod&gt;<span class="w"> </span>--<span class="w"> </span>ping<span class="w"> </span><span class="m">8</span>.8.8.8
<span class="c1"># If fails, check network policy</span>
kubectl<span class="w"> </span>get<span class="w"> </span>networkpolicy

<span class="c1"># 4. Check egress policy</span>
kubectl<span class="w"> </span>describe<span class="w"> </span>networkpolicy<span class="w"> </span>&lt;policy&gt;
<span class="c1"># Ensure egress to 0.0.0.0/0 is allowed</span>

<span class="c1"># 5. Check NAT/masquerade</span>
<span class="c1"># On node:</span>
sudo<span class="w"> </span>iptables<span class="w"> </span>-t<span class="w"> </span>nat<span class="w"> </span>-L<span class="w"> </span>POSTROUTING<span class="w"> </span>-n<span class="w"> </span>-v
<span class="c1"># Should see MASQUERADE rule for pod CIDR</span>

<span class="c1"># 6. Verify CNI configuration</span>
cat<span class="w"> </span>/etc/cni/net.d/*.conf
<span class="c1"># Check if CNI supports egress</span>

<span class="c1"># 7. Check node routing</span>
ip<span class="w"> </span>route<span class="w"> </span>show
<span class="c1"># Should have route for pod CIDR</span>
</code></pre></div>

<h3 id="5">ë¬¸ì œ 5: ì„œë¹„ìŠ¤ ë©”ì‹œ íŠ¸ë˜í”½ ë¶„í• <a class="header-link" href="#5" title="Permanent link">&para;</a></h3>
<p>ì¹´ë‚˜ë¦¬ ë°°í¬ êµ¬í˜„:
- v1ë¡œ 90% íŠ¸ë˜í”½
- v2ë¡œ 10% íŠ¸ë˜í”½
- Istio ì‚¬ìš©</p>
<p><strong>ì •ë‹µ:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># virtual-service.yaml</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.istio.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VirtualService</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-app</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-app</span>
<span class="w">  </span><span class="nt">http</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">route</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">destination</span><span class="p">:</span>
<span class="w">            </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-app</span>
<span class="w">            </span><span class="nt">subset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="w">          </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">90</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">destination</span><span class="p">:</span>
<span class="w">            </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-app</span>
<span class="w">            </span><span class="nt">subset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v2</span>
<span class="w">          </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="nn">---</span>
<span class="c1"># destination-rule.yaml</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.istio.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DestinationRule</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-app</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-app</span>
<span class="w">  </span><span class="nt">subsets</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v2</span>
<span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v2</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1"># Apply configuration</span>
kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>virtual-service.yaml

<span class="c1"># Generate traffic and observe distribution</span>
<span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>seq<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">100</span><span class="k">)</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span>curl<span class="w"> </span>http://my-app/version
<span class="k">done</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq<span class="w"> </span>-c
<span class="c1"># Should see approximately 90 v1, 10 v2 responses</span>
</code></pre></div>

<hr />
<h2 id="_9">ìš”ì•½<a class="header-link" href="#_9" title="Permanent link">&para;</a></h2>
<p>ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí‚¹ì€ ë³µì¡í•˜ì§€ë§Œ ì¼ê´€ëœ ì›ì¹™ì„ ë”°ë¦…ë‹ˆë‹¤:</p>
<p><strong>í•µì‹¬ ê°œë…:</strong>
1. <strong>ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤</strong>ëŠ” ê²©ë¦¬ ì œê³µ
2. <strong>veth ìŒê³¼ ë¸Œë¦¬ì§€</strong>ëŠ” ì»¨í…Œì´ë„ˆ ì—°ê²°
3. <strong>Docker CNM</strong>ì€ í‘œì¤€í™”ëœ ë„¤íŠ¸ì›Œí‚¹ ì •ì˜
4. <strong>Kubernetes ë„¤íŠ¸ì›Œí‚¹ ëª¨ë¸</strong>ì€ í”Œë« ë„¤íŠ¸ì›Œí¬ í•„ìš”
5. <strong>CNI í”ŒëŸ¬ê·¸ì¸</strong>ì€ ë‹¤ì–‘í•œ ì ‘ê·¼ ë°©ì‹ êµ¬í˜„ (ì˜¤ë²„ë ˆì´, BGP, eBPF)
6. <strong>ì„œë¹„ìŠ¤</strong>ëŠ” ì•ˆì •ì ì¸ ì—”ë“œí¬ì¸íŠ¸ì™€ ë¡œë“œ ë°¸ëŸ°ì‹± ì œê³µ
7. <strong>NetworkPolicy</strong>ëŠ” íŠ¸ë˜í”½ íë¦„ ì œì–´
8. <strong>ì„œë¹„ìŠ¤ ë©”ì‹œ</strong>ëŠ” L7 ê¸°ëŠ¥ ì¶”ê°€ (mTLS, ê´€ì°°ì„±)
9. <strong>ì¸ê·¸ë ˆìŠ¤</strong>ëŠ” HTTP/HTTPS ë¼ìš°íŒ… ì œê³µ</p>
<p><strong>ëª¨ë²” ì‚¬ë¡€:</strong>
- ìš”êµ¬ì‚¬í•­ì— ë”°ë¼ CNI ì„ íƒ (ì •ì±…, ì„±ëŠ¥, í™•ì¥ì„±)
- ë³´ì•ˆì„ ìœ„í•´ NetworkPolicy ì‚¬ìš©
- ë„¤íŠ¸ì›Œí¬ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
- ë³µì¡í•œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¥¼ ìœ„í•œ ì„œë¹„ìŠ¤ ë©”ì‹œ êµ¬í˜„
- IP ì£¼ì†Œ í• ë‹¹ ì‹ ì¤‘í•˜ê²Œ ê³„íš</p>
<p>ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí‚¹ì€ eBPF(Cilium) ë° Gateway APIì™€ ê°™ì€ ê¸°ìˆ ê³¼ í•¨ê»˜ ê³„ì† ë°œì „í•˜ì—¬ ë” ê°•ë ¥í•˜ê³  ê´€ë¦¬í•˜ê¸° ì‰¬ì›Œì§€ê³  ìˆìŠµë‹ˆë‹¤.</p>
<hr />
<p><strong>ë‚œì´ë„:</strong> â­â­â­â­</p>
<p><strong>ì¶”ê°€ ì½ì„ê±°ë¦¬:</strong>
- Kubernetes Network Model: https://kubernetes.io/docs/concepts/cluster-administration/networking/
- CNI Specification: https://github.com/containernetworking/cni
- Istio Documentation: https://istio.io/latest/docs/
- Calico Documentation: https://docs.projectcalico.org/</p>
<hr />
<p><a href="./18_IPv6.md">ì´ì „: 18_IPv6</a> | <a href="./00_Overview.md">ë‹¤ìŒ: 00_Overview</a></p>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/ko/Networking/18_IPv6.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">IPv6</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/ko/Networking/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">â†‘</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'ko';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}