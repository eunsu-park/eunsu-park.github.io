{% raw %}
<!DOCTYPE html>
<html lang="ko" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>고급 스케줄링 - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/ko/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/ko/" class="nav-item ">
                    <span class="nav-icon">🏠</span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">💻</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/ko/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" >
                        English
                    </option>
                    
                    <option value="ko" selected>
                        한국어
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">☀️</span>
                    <span class="theme-icon dark">🌙</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/ko/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/ko/OS_Theory/">OS Theory</a>
    <span class="separator">/</span>
    <span class="current">고급 스케줄링</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>고급 스케줄링</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/ko/OS_Theory/05_Scheduling_Algorithms.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">스케줄링 알고리즘</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">🔗</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/ko/OS_Theory/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">📋</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/ko/OS_Theory/07_Synchronization_Basics.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">동기화 기초</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#_2">개요</a></li>
<li><a href="#_3">목차</a></li>
<li><a href="#1-mlfq-multi-level-feedback-queue">1. MLFQ (Multi-Level Feedback Queue)</a><ul>
<li><a href="#_4">개념</a></li>
<li><a href="#mlfq">MLFQ 규칙</a></li>
<li><a href="#mlfq_1">MLFQ 동작 예제</a></li>
<li><a href="#mlfq_2">MLFQ 문제점과 해결</a></li>
<li><a href="#mlfq_3">MLFQ 파라미터</a></li>
</ul>
</li>
<li><a href="#2">2. 멀티프로세서 스케줄링</a><ul>
<li><a href="#_5">멀티프로세서 시스템 유형</a></li>
<li><a href="#_6">스케줄링 접근 방법</a></li>
<li><a href="#load-balancing">부하 분산 (Load Balancing)</a></li>
</ul>
</li>
<li><a href="#3">3. 프로세서 친화성</a><ul>
<li><a href="#_7">프로세서 친화성이란?</a></li>
<li><a href="#_8">친화성 유형</a></li>
</ul>
</li>
<li><a href="#4">4. 실시간 스케줄링</a><ul>
<li><a href="#_9">실시간 시스템 개요</a></li>
<li><a href="#_10">실시간 태스크 특성</a></li>
<li><a href="#rate-monotonic-scheduling-rms">Rate Monotonic Scheduling (RMS)</a></li>
<li><a href="#earliest-deadline-first-edf">Earliest Deadline First (EDF)</a></li>
</ul>
</li>
<li><a href="#5-linux-cfs">5. Linux CFS</a><ul>
<li><a href="#cfs">CFS 개요</a></li>
<li><a href="#cfs_1">CFS 동작 방식</a></li>
<li><a href="#cfs_2">CFS 타임슬라이스 계산</a></li>
</ul>
</li>
<li><a href="#6">6. 연습 문제</a><ul>
<li><a href="#1-mlfq">문제 1: MLFQ</a></li>
<li><a href="#2-rms">문제 2: RMS 스케줄 가능성</a></li>
<li><a href="#3_1">문제 3: 프로세서 친화성</a></li>
<li><a href="#4-edf-vs-rms">문제 4: EDF vs RMS</a></li>
<li><a href="#5-linux-cfs_1">문제 5: Linux CFS</a></li>
</ul>
</li>
<li><a href="#_11">다음 단계</a></li>
<li><a href="#_12">참고 자료</a></li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="_1">고급 스케줄링<a class="header-link" href="#_1" title="Permanent link">&para;</a></h1>
<h2 id="_2">개요<a class="header-link" href="#_2" title="Permanent link">&para;</a></h2>
<p>이 레슨에서는 실제 운영체제에서 사용되는 고급 스케줄링 기법을 학습합니다. MLFQ(Multi-Level Feedback Queue), 멀티프로세서 스케줄링, 그리고 실시간 스케줄링에 대해 알아봅니다.</p>
<hr />
<h2 id="_3">목차<a class="header-link" href="#_3" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#1-mlfq-multi-level-feedback-queue">MLFQ (Multi-Level Feedback Queue)</a></li>
<li><a href="#2-멀티프로세서-스케줄링">멀티프로세서 스케줄링</a></li>
<li><a href="#3-프로세서-친화성">프로세서 친화성</a></li>
<li><a href="#4-실시간-스케줄링">실시간 스케줄링</a></li>
<li><a href="#5-linux-cfs">Linux CFS</a></li>
<li><a href="#6-연습-문제">연습 문제</a></li>
</ol>
<hr />
<h2 id="1-mlfq-multi-level-feedback-queue">1. MLFQ (Multi-Level Feedback Queue)<a class="header-link" href="#1-mlfq-multi-level-feedback-queue" title="Permanent link">&para;</a></h2>
<h3 id="_4">개념<a class="header-link" href="#_4" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>MLFQ = 여러 개의 준비 큐를 사용하는 스케줄링
     = 프로세스의 행동에 따라 큐 간 이동
     = SJF의 장점 + 적응형 스케줄링

┌─────────────────────────────────────────────────────────┐
│                      MLFQ 구조                          │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  높은 우선순위 (짧은 Time Quantum)                       │
│  ┌─────────────────────────────────────────────────┐    │
│  │ Queue 0 (TQ=8ms): P1 → P5 → ...                │ ←── 새 프로세스
│  └─────────────────────────────────────────────────┘    │
│                          │                              │
│                          ▼ TQ 소진 시 강등              │
│  ┌─────────────────────────────────────────────────┐    │
│  │ Queue 1 (TQ=16ms): P2 → P7 → ...               │    │
│  └─────────────────────────────────────────────────┘    │
│                          │                              │
│                          ▼ TQ 소진 시 강등              │
│  ┌─────────────────────────────────────────────────┐    │
│  │ Queue 2 (TQ=32ms): P3 → P8 → ...               │    │
│  └─────────────────────────────────────────────────┘    │
│                          │                              │
│                          ▼                              │
│  ┌─────────────────────────────────────────────────┐    │
│  │ Queue N (FCFS): P4 → P6 → ...                  │    │
│  └─────────────────────────────────────────────────┘    │
│  낮은 우선순위 (긴 Time Quantum 또는 FCFS)              │
│                                                         │
└─────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="mlfq">MLFQ 규칙<a class="header-link" href="#mlfq" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────┐
│                    MLFQ 기본 규칙                        │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  규칙 1: 우선순위가 높은 프로세스 먼저 실행              │
│         Priority(A) &gt; Priority(B) → A 실행              │
│                                                         │
│  규칙 2: 우선순위가 같으면 RR 방식                       │
│         Priority(A) = Priority(B) → RR                  │
│                                                         │
│  규칙 3: 새 프로세스는 최상위 큐에 배치                  │
│         새 프로세스 → Queue 0                           │
│                                                         │
│  규칙 4: 타임 퀀텀을 모두 사용하면 강등                  │
│         TQ 소진 → Priority 감소                         │
│                                                         │
│  규칙 5: TQ 전에 CPU를 양보하면 같은 큐 유지             │
│         I/O 요청 등 → 같은 Priority 유지                │
│                                                         │
└─────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="mlfq_1">MLFQ 동작 예제<a class="header-link" href="#mlfq_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nl">시나리오</span><span class="p">:</span><span class="w"> </span><span class="n">긴</span><span class="w"> </span><span class="n">작업</span><span class="w"> </span><span class="p">(</span><span class="n">CPU</span><span class="o">-</span><span class="n">bound</span><span class="p">)</span><span class="n">와</span><span class="w"> </span><span class="n">짧은</span><span class="w"> </span><span class="n">작업</span><span class="w"> </span><span class="p">(</span><span class="n">I</span><span class="o">/</span><span class="n">O</span><span class="o">-</span><span class="n">bound</span><span class="p">)</span><span class="w"> </span><span class="n">혼합</span>

<span class="err">┌─────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w">  </span><span class="n">시간</span><span class="w"> </span><span class="mi">0</span><span class="err">:</span><span class="w"> </span><span class="n">긴</span><span class="w"> </span><span class="n">작업</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">도착</span><span class="w">                                  </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                         </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nl">Q0</span><span class="p">:</span><span class="w"> </span><span class="o">[</span><span class="n">A</span><span class="o">]</span><span class="w"> </span><span class="err">───▶</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">실행</span><span class="w"> </span><span class="p">(</span><span class="mi">8</span><span class="n">ms</span><span class="p">)</span><span class="w">                             </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nl">Q1</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span><span class="w">                                                 </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nl">Q2</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span><span class="w">                                                 </span><span class="err">│</span>
<span class="err">├─────────────────────────────────────────────────────────┤</span>
<span class="err">│</span><span class="w">  </span><span class="n">시간</span><span class="w"> </span><span class="mi">8</span><span class="err">:</span><span class="w"> </span><span class="n">A가</span><span class="w"> </span><span class="n">TQ</span><span class="w"> </span><span class="n">소진</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="n">강등</span><span class="w">                             </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                         </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nl">Q0</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span><span class="w">                                                 </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nl">Q1</span><span class="p">:</span><span class="w"> </span><span class="o">[</span><span class="n">A</span><span class="o">]</span><span class="w"> </span><span class="err">───▶</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">실행</span><span class="w"> </span><span class="p">(</span><span class="mi">16</span><span class="n">ms</span><span class="p">)</span><span class="w">                            </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nl">Q2</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span><span class="w">                                                 </span><span class="err">│</span>
<span class="err">├─────────────────────────────────────────────────────────┤</span>
<span class="err">│</span><span class="w">  </span><span class="n">시간</span><span class="w"> </span><span class="mi">10</span><span class="err">:</span><span class="w"> </span><span class="n">짧은</span><span class="w"> </span><span class="n">작업</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">도착</span><span class="w"> </span><span class="p">(</span><span class="mi">5</span><span class="n">ms</span><span class="w"> </span><span class="n">작업</span><span class="p">)</span><span class="w">                   </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                         </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nl">Q0</span><span class="p">:</span><span class="w"> </span><span class="o">[</span><span class="n">B</span><span class="o">]</span><span class="w"> </span><span class="err">───▶</span><span class="w"> </span><span class="n">B가</span><span class="w"> </span><span class="n">높은</span><span class="w"> </span><span class="n">우선순위</span><span class="p">,</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">선점</span><span class="w">                 </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nl">Q1</span><span class="p">:</span><span class="w"> </span><span class="o">[</span><span class="n">A</span><span class="o">]</span><span class="w">     </span><span class="n">B</span><span class="w"> </span><span class="n">실행</span><span class="w"> </span><span class="n">시작</span><span class="w">                                </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nl">Q2</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span><span class="w">                                                 </span><span class="err">│</span>
<span class="err">├─────────────────────────────────────────────────────────┤</span>
<span class="err">│</span><span class="w">  </span><span class="n">시간</span><span class="w"> </span><span class="mi">15</span><span class="err">:</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">완료</span><span class="w"> </span><span class="p">(</span><span class="n">TQ</span><span class="w"> </span><span class="n">전에</span><span class="w"> </span><span class="n">끝남</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="n">I</span><span class="o">/</span><span class="n">O</span><span class="w"> </span><span class="n">많은</span><span class="w"> </span><span class="n">작업으로</span><span class="w"> </span><span class="n">간주</span><span class="p">)</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                         </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nl">Q0</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span><span class="w">                                                 </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nl">Q1</span><span class="p">:</span><span class="w"> </span><span class="o">[</span><span class="n">A</span><span class="o">]</span><span class="w"> </span><span class="err">───▶</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">재개</span><span class="w">                                   </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nl">Q2</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span><span class="w">                                                 </span><span class="err">│</span>
<span class="err">└─────────────────────────────────────────────────────────┘</span>

<span class="nl">결과</span><span class="p">:</span><span class="w"> </span><span class="n">짧은</span><span class="w"> </span><span class="n">작업이</span><span class="w"> </span><span class="n">먼저</span><span class="w"> </span><span class="n">완료됨</span><span class="w"> </span><span class="p">(</span><span class="n">SJF와</span><span class="w"> </span><span class="n">유사한</span><span class="w"> </span><span class="n">효과</span><span class="p">)</span>
<span class="w">      </span><span class="n">실행</span><span class="w"> </span><span class="n">시간을</span><span class="w"> </span><span class="n">모르면서도</span><span class="w"> </span><span class="n">짧은</span><span class="w"> </span><span class="n">작업</span><span class="w"> </span><span class="n">우선</span><span class="w"> </span><span class="n">처리</span><span class="w"> </span><span class="n">가능</span>
</code></pre></div>

<h3 id="mlfq_2">MLFQ 문제점과 해결<a class="header-link" href="#mlfq_2" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────┐
│                  MLFQ 문제점과 해결                      │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  문제 1: 기아 (Starvation)                              │
│  ┌───────────────────────────────────────────────────┐  │
│  │ 높은 우선순위 작업이 계속 도착하면                  │  │
│  │ 낮은 큐의 작업은 영원히 실행 안 됨                  │  │
│  └───────────────────────────────────────────────────┘  │
│  해결: Priority Boost                                   │
│  ┌───────────────────────────────────────────────────┐  │
│  │ 주기적으로 모든 프로세스를 최상위 큐로 이동         │  │
│  │ 예: 매 S 시간마다 모든 작업을 Q0으로               │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
│  문제 2: 게이밍 (Gaming the Scheduler)                  │
│  ┌───────────────────────────────────────────────────┐  │
│  │ 악의적인 프로세스가 TQ 만료 직전에 I/O 요청         │  │
│  │ → 강등 방지, CPU 독점                              │  │
│  └───────────────────────────────────────────────────┘  │
│  해결: 누적 시간 추적                                   │
│  ┌───────────────────────────────────────────────────┐  │
│  │ 각 레벨에서 사용한 총 시간을 누적 추적              │  │
│  │ 할당량 소진 시 강등 (여러 번에 나눠 쓰더라도)       │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
└─────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="mlfq_3">MLFQ 파라미터<a class="header-link" href="#mlfq_3" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────┐
│                   MLFQ 주요 파라미터                     │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  1. 큐 개수 (Number of queues)                         │
│     • 일반적으로 3~5개                                  │
│     • 너무 많으면 오버헤드, 너무 적으면 차별화 부족      │
│                                                         │
│  2. 각 큐의 Time Quantum                               │
│     • 보통 2배씩 증가 (8, 16, 32, 64ms...)             │
│     • 높은 큐: 짧은 TQ (빠른 응답)                      │
│     • 낮은 큐: 긴 TQ (컨텍스트 스위치 감소)             │
│                                                         │
│  3. Priority Boost 주기 (S)                            │
│     • 너무 짧으면: CPU-bound 작업 유리                 │
│     • 너무 길면: 기아 발생                             │
│     • 일반적으로 1초 ~ 100ms                           │
│                                                         │
│  Solaris Time-sharing 클래스 예:                       │
│  ┌─────────┬──────┬──────────┬─────────────┐           │
│  │ Priority │  TQ  │  강등시  │   승격시    │           │
│  ├─────────┼──────┼──────────┼─────────────┤           │
│  │   59    │ 20ms │   54     │    -        │           │
│  │   40    │ 40ms │   35     │    45       │           │
│  │   20    │ 80ms │   15     │    25       │           │
│  │   0     │ 200ms│   0      │    5        │           │
│  └─────────┴──────┴──────────┴─────────────┘           │
│                                                         │
└─────────────────────────────────────────────────────────┘
</code></pre></div>

<hr />
<h2 id="2">2. 멀티프로세서 스케줄링<a class="header-link" href="#2" title="Permanent link">&para;</a></h2>
<h3 id="_5">멀티프로세서 시스템 유형<a class="header-link" href="#_5" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────┐
│               멀티프로세서 시스템 유형                    │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  1. SMP (Symmetric Multi-Processing)                   │
│  ┌───────────────────────────────────────────────────┐  │
│  │  ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐                 │  │
│  │  │CPU 0│ │CPU 1│ │CPU 2│ │CPU 3│                 │  │
│  │  └──┬──┘ └──┬──┘ └──┬──┘ └──┬──┘                 │  │
│  │     └───────┴───────┴───────┘                     │  │
│  │                 │                                 │  │
│  │          ┌──────┴──────┐                         │  │
│  │          │ 공유 메모리  │                         │  │
│  │          └─────────────┘                         │  │
│  │  모든 프로세서가 동등, 메모리 공유                 │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
│  2. NUMA (Non-Uniform Memory Access)                   │
│  ┌───────────────────────────────────────────────────┐  │
│  │  ┌─────────────┐     ┌─────────────┐             │  │
│  │  │ CPU 0, 1    │     │ CPU 2, 3    │             │  │
│  │  │ 로컬 메모리  │◀───▶│ 로컬 메모리  │             │  │
│  │  └─────────────┘     └─────────────┘             │  │
│  │                                                   │  │
│  │  로컬 메모리 접근: 빠름                            │  │
│  │  원격 메모리 접근: 느림                            │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
└─────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="_6">스케줄링 접근 방법<a class="header-link" href="#_6" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────┐
│             멀티프로세서 스케줄링 접근 방법               │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  1. 비대칭 멀티프로세싱 (Asymmetric)                    │
│  ┌───────────────────────────────────────────────────┐  │
│  │  ┌─────────────────┐                             │  │
│  │  │ 마스터 프로세서  │ ← 모든 스케줄링 결정         │  │
│  │  │   (CPU 0)       │                             │  │
│  │  └────────┬────────┘                             │  │
│  │           │ 작업 할당                             │  │
│  │     ┌─────┼─────┬─────┐                          │  │
│  │     ▼     ▼     ▼     ▼                          │  │
│  │  ┌─────┐┌─────┐┌─────┐┌─────┐                   │  │
│  │  │CPU 1││CPU 2││CPU 3││CPU 4│ ← 슬레이브        │  │
│  │  └─────┘└─────┘└─────┘└─────┘                   │  │
│  │                                                   │  │
│  │  장점: 단순, 데이터 공유 문제 없음                 │  │
│  │  단점: 마스터 병목                                │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
│  2. 대칭 멀티프로세싱 (SMP)                            │
│  ┌───────────────────────────────────────────────────┐  │
│  │  ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐                 │  │
│  │  │CPU 0│ │CPU 1│ │CPU 2│ │CPU 3│                 │  │
│  │  │스케줄││스케줄││스케줄││스케줄│                 │  │
│  │  └──┬──┘ └──┬──┘ └──┬──┘ └──┬──┘                 │  │
│  │     └───────┴───┬───┴───────┘                     │  │
│  │                 ▼                                 │  │
│  │         ┌──────────────┐                         │  │
│  │         │  공유 Ready   │ (동기화 필요)           │  │
│  │         │    Queue      │                         │  │
│  │         └──────────────┘                         │  │
│  │  또는:  각 CPU가 자체 Ready Queue 유지            │  │
│  │                                                   │  │
│  │  장점: 확장성, 병목 없음                          │  │
│  │  단점: 동기화 복잡, 부하 불균형 가능               │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
└─────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="load-balancing">부하 분산 (Load Balancing)<a class="header-link" href="#load-balancing" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────┐
│                    부하 분산 기법                        │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  문제: 각 CPU가 별도 큐를 가질 때 부하 불균형 발생       │
│                                                         │
│  CPU 0: ████████   CPU 1: ██   CPU 2: ████████████     │
│         (과부하)        (유휴)         (과부하)          │
│                                                         │
│  해결책 1: Push Migration (밀어내기)                    │
│  ┌───────────────────────────────────────────────────┐  │
│  │  주기적으로 각 큐의 부하 검사                       │  │
│  │  과부하 큐 → 유휴 큐로 프로세스 이동                │  │
│  │                                                   │  │
│  │  CPU 0: ████████ ──push──▶ CPU 1: ██              │  │
│  │  결과:  █████               █████                 │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
│  해결책 2: Pull Migration (끌어오기)                    │
│  ┌───────────────────────────────────────────────────┐  │
│  │  유휴 CPU가 다른 CPU에서 작업을 가져옴             │  │
│  │                                                   │  │
│  │  CPU 0: ████████ ◀──pull── CPU 1: (유휴)         │  │
│  │  결과:  █████               ███                   │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
│  Linux: 둘 다 사용                                     │
│  • 주기적 Push (rebalance 작업)                        │
│  • 유휴 시 Pull (idle_balance)                         │
│                                                         │
└─────────────────────────────────────────────────────────┘
</code></pre></div>

<hr />
<h2 id="3">3. 프로세서 친화성<a class="header-link" href="#3" title="Permanent link">&para;</a></h2>
<h3 id="_7">프로세서 친화성이란?<a class="header-link" href="#_7" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────┐
│              프로세서 친화성 (Processor Affinity)        │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  정의: 프로세스가 특정 CPU에서 계속 실행되도록 하는 것   │
│                                                         │
│  이유: 캐시 효율                                        │
│  ┌───────────────────────────────────────────────────┐  │
│  │  프로세스 P가 CPU 0에서 실행                       │  │
│  │  → CPU 0의 캐시에 P의 데이터 적재                  │  │
│  │                                                   │  │
│  │  P가 다른 CPU로 이동하면:                         │  │
│  │  • CPU 0 캐시: P 데이터 무효화                    │  │
│  │  • CPU 1 캐시: P 데이터 다시 적재 필요            │  │
│  │  → 캐시 미스 증가, 성능 저하                      │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
│  캐시 상태 시각화:                                      │
│                                                         │
│  CPU 0         CPU 1         CPU 0         CPU 1       │
│  ┌─────┐      ┌─────┐       ┌─────┐       ┌─────┐      │
│  │캐시 │      │캐시 │       │캐시 │       │캐시 │      │
│  │[P의 │      │[   ]│  이동  │[   ]│       │[P의 │      │
│  │데이터│      │     │ ───▶  │     │       │데이터│      │
│  └─────┘      └─────┘       └─────┘       └─────┘      │
│    ↑ 따뜻함    차가움          차가움        ↑ 다시 적재 │
│                                                         │
└─────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="_8">친화성 유형<a class="header-link" href="#_8" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">┌─────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w">                   </span><span class="nt">친화성</span><span class="w"> </span><span class="nt">유형</span><span class="w">                            </span><span class="err">│</span>
<span class="err">├─────────────────────────────────────────────────────────┤</span>
<span class="err">│</span><span class="w">                                                         </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nt">1</span><span class="o">.</span><span class="w"> </span><span class="nt">소프트</span><span class="w"> </span><span class="nt">친화성</span><span class="w"> </span><span class="o">(</span><span class="nt">Soft</span><span class="w"> </span><span class="nt">Affinity</span><span class="o">)</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">┌───────────────────────────────────────────────────┐</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="nt">기본</span><span class="w"> </span><span class="nt">동작</span><span class="o">:</span><span class="w"> </span><span class="nt">같은</span><span class="w"> </span><span class="nt">CPU에서</span><span class="w"> </span><span class="nt">실행하려고</span><span class="w"> </span><span class="nt">노력</span><span class="w">         </span><span class="err">│</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="nt">부하</span><span class="w"> </span><span class="nt">분산이</span><span class="w"> </span><span class="nt">필요하면</span><span class="w"> </span><span class="nt">이동</span><span class="w"> </span><span class="nt">가능</span><span class="w">                  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="nt">Linux</span><span class="w"> </span><span class="nt">기본</span><span class="w"> </span><span class="nt">동작</span><span class="w">                                </span><span class="err">│</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">└───────────────────────────────────────────────────┘</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                         </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nt">2</span><span class="o">.</span><span class="w"> </span><span class="nt">하드</span><span class="w"> </span><span class="nt">친화성</span><span class="w"> </span><span class="o">(</span><span class="nt">Hard</span><span class="w"> </span><span class="nt">Affinity</span><span class="o">)</span><span class="w">                         </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">┌───────────────────────────────────────────────────┐</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="nt">프로세스를</span><span class="w"> </span><span class="nt">특정</span><span class="w"> </span><span class="nt">CPU</span><span class="w"> </span><span class="nt">집합에</span><span class="w"> </span><span class="nt">고정</span><span class="w">                 </span><span class="err">│</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="nt">부하</span><span class="w"> </span><span class="nt">분산에도</span><span class="w"> </span><span class="nt">이동</span><span class="w"> </span><span class="nt">안</span><span class="w"> </span><span class="nt">함</span><span class="w">                        </span><span class="err">│</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="nt">시스템</span><span class="w"> </span><span class="nt">호출로</span><span class="w"> </span><span class="nt">설정</span><span class="w">                              </span><span class="err">│</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">└───────────────────────────────────────────────────┘</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                         </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nt">Linux에서</span><span class="w"> </span><span class="nt">설정</span><span class="o">:</span><span class="w">                                        </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">```</span><span class="nt">c</span><span class="w">                                                  </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="p">#</span><span class="nn">define</span><span class="w"> </span><span class="nt">_GNU_SOURCE</span><span class="w">                                   </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="p">#</span><span class="nn">include</span><span class="w"> </span><span class="o">&lt;</span><span class="nt">sched</span><span class="p">.</span><span class="nc">h</span><span class="o">&gt;</span><span class="w">                                    </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                         </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nt">cpu_set_t</span><span class="w"> </span><span class="nt">mask</span><span class="o">;</span><span class="w">                                       </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nt">CPU_ZERO</span><span class="o">(&amp;</span><span class="nt">mask</span><span class="o">);</span><span class="w">                                      </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nt">CPU_SET</span><span class="o">(</span><span class="nt">0</span><span class="o">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nt">mask</span><span class="o">);</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="nt">CPU</span><span class="w"> </span><span class="nt">0에만</span><span class="w"> </span><span class="nt">실행</span><span class="w">                 </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nt">CPU_SET</span><span class="o">(</span><span class="nt">2</span><span class="o">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nt">mask</span><span class="o">);</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="nt">CPU</span><span class="w"> </span><span class="nt">2에도</span><span class="w"> </span><span class="nt">실행</span><span class="w"> </span><span class="nt">가능</span><span class="w">            </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                         </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="nt">현재</span><span class="w"> </span><span class="nt">프로세스의</span><span class="w"> </span><span class="nt">친화성</span><span class="w"> </span><span class="nt">설정</span><span class="w">                         </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nt">sched_setaffinity</span><span class="o">(</span><span class="nt">0</span><span class="o">,</span><span class="w"> </span><span class="nt">sizeof</span><span class="o">(</span><span class="nt">mask</span><span class="o">),</span><span class="w"> </span><span class="o">&amp;</span><span class="nt">mask</span><span class="o">);</span><span class="w">            </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">```</span><span class="w">                                                   </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                         </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nt">명령어</span><span class="o">:</span><span class="w">                                                </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">```</span><span class="nt">bash</span><span class="w">                                               </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="nt">CPU</span><span class="w"> </span><span class="nt">0</span><span class="o">,</span><span class="nt">1에서만</span><span class="w"> </span><span class="nt">실행</span><span class="w">                                  </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nt">taskset</span><span class="w"> </span><span class="nt">-c</span><span class="w"> </span><span class="nt">0</span><span class="o">,</span><span class="nt">1</span><span class="w"> </span><span class="o">./</span><span class="nt">program</span><span class="w">                              </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                         </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="nt">실행</span><span class="w"> </span><span class="nt">중인</span><span class="w"> </span><span class="nt">프로세스</span><span class="w"> </span><span class="nt">친화성</span><span class="w"> </span><span class="nt">변경</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="nt">taskset</span><span class="w"> </span><span class="nt">-c</span><span class="w"> </span><span class="nt">2</span><span class="o">,</span><span class="nt">3</span><span class="w"> </span><span class="nt">-p</span><span class="w"> </span><span class="nt">PID</span><span class="w">                                 </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">```</span><span class="w">                                                   </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                         </span><span class="err">│</span>
<span class="err">└─────────────────────────────────────────────────────────┘</span>
</code></pre></div>

<hr />
<h2 id="4">4. 실시간 스케줄링<a class="header-link" href="#4" title="Permanent link">&para;</a></h2>
<h3 id="_9">실시간 시스템 개요<a class="header-link" href="#_9" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────┐
│                   실시간 시스템 개요                     │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  실시간 시스템 = 시간 제약 (Deadline)이 있는 시스템      │
│                                                         │
│  분류:                                                  │
│  ┌───────────────────────────────────────────────────┐  │
│  │ 경성 실시간 (Hard Real-Time)                      │  │
│  │ • 마감시간 위반 = 시스템 실패                      │  │
│  │ • 예: 항공 제어, 의료 기기, ABS 브레이크           │  │
│  │ • 마감시간 보장 필수                               │  │
│  └───────────────────────────────────────────────────┘  │
│  ┌───────────────────────────────────────────────────┐  │
│  │ 연성 실시간 (Soft Real-Time)                      │  │
│  │ • 마감시간 위반 = 성능 저하                        │  │
│  │ • 예: 비디오 스트리밍, 게임, VoIP                  │  │
│  │ • 대부분의 마감시간 충족 목표                      │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
└─────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="_10">실시간 태스크 특성<a class="header-link" href="#_10" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────┐
│                  실시간 태스크 특성                      │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  주기적 태스크 (Periodic Task):                         │
│                                                         │
│  시간 ────────────────────────────────────────────▶     │
│  │←── 주기(Period) P ──→│←── 주기(Period) P ──→│       │
│  ┌───┐                  ┌───┐                  ┌───┐   │
│  │ C │                  │ C │                  │ C │   │
│  └───┘                  └───┘                  └───┘   │
│  ↑   ↑                  ↑   ↑                          │
│  도착 마감시간(D)        도착 마감시간(D)                 │
│                                                         │
│  파라미터:                                              │
│  • P (Period): 태스크가 반복되는 주기                   │
│  • C (Computation time): 실행 시간                     │
│  • D (Deadline): 완료해야 하는 시간                    │
│  • 이용률 U = C/P                                      │
│                                                         │
│  예시: 비디오 프레임                                    │
│  • P = 33ms (30fps)                                    │
│  • C = 10ms (프레임 처리 시간)                         │
│  • D = 33ms                                            │
│  • U = 10/33 ≈ 0.3 (30%)                              │
│                                                         │
└─────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="rate-monotonic-scheduling-rms">Rate Monotonic Scheduling (RMS)<a class="header-link" href="#rate-monotonic-scheduling-rms" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────┐
│           Rate Monotonic Scheduling (RMS)               │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  원리: 주기가 짧은 태스크 = 높은 우선순위               │
│       (Rate = 1/Period, 더 높은 Rate = 높은 우선순위)  │
│                                                         │
│  특징:                                                  │
│  • 정적 우선순위 (고정)                                 │
│  • 선점형                                               │
│  • 최적 (정적 우선순위 중)                              │
│                                                         │
│  예제:                                                  │
│  ┌─────────┬───────┬────────┬──────────┐               │
│  │ 태스크   │ 주기 P │ 실행 C │ 우선순위  │               │
│  ├─────────┼───────┼────────┼──────────┤               │
│  │   T1    │  50   │   20   │   높음   │               │
│  │   T2    │  100  │   35   │   낮음   │               │
│  └─────────┴───────┴────────┴──────────┘               │
│                                                         │
│  간트 차트:                                             │
│  ┌──────────┬──────────────┬──────────┬─────────────┐  │
│  │    T1    │      T2      │    T1    │    T2(계속)  │  │
│  └──────────┴──────────────┴──────────┴─────────────┘  │
│  0         20            55        75             100  │
│       T2 시작       T1 재도착(선점)    T2 재개          │
│                                                         │
│  스케줄 가능 조건:                                      │
│  총 이용률 ≤ n(2^(1/n) - 1)                            │
│  • n=1: 100%                                           │
│  • n=2: 약 82.8%                                       │
│  • n→∞: 약 69.3%                                       │
│                                                         │
│  위 예제: U = 20/50 + 35/100 = 0.4 + 0.35 = 0.75      │
│          0.75 &lt; 0.828 → 스케줄 가능                    │
│                                                         │
└─────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="earliest-deadline-first-edf">Earliest Deadline First (EDF)<a class="header-link" href="#earliest-deadline-first-edf" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────┐
│            Earliest Deadline First (EDF)                │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  원리: 마감시간이 가장 가까운 태스크 = 최고 우선순위     │
│                                                         │
│  특징:                                                  │
│  • 동적 우선순위 (마감시간에 따라 변경)                  │
│  • 선점형                                               │
│  • 이론적으로 최적 (이용률 100%까지 가능)               │
│                                                         │
│  예제 (RMS와 동일 데이터):                              │
│  ┌─────────┬───────┬────────┬────────────────┐         │
│  │ 태스크   │ 주기 P │ 실행 C │ 마감시간 D      │         │
│  ├─────────┼───────┼────────┼────────────────┤         │
│  │   T1    │  50   │   20   │ 50, 100, 150...│         │
│  │   T2    │  100  │   35   │ 100, 200...    │         │
│  └─────────┴───────┴────────┴────────────────┘         │
│                                                         │
│  시간 0:                                                │
│  • T1 마감: 50, T2 마감: 100                           │
│  • T1 우선 실행                                        │
│                                                         │
│  시간 50 (T1 두번째 인스턴스):                          │
│  • T1 마감: 100, T2 마감: 100 (같음)                   │
│  • 동률 → 임의 선택 또는 다른 기준                      │
│                                                         │
│  RMS vs EDF:                                           │
│  ┌──────────────┬────────────────┬─────────────────┐   │
│  │     특성      │      RMS      │      EDF       │   │
│  ├──────────────┼────────────────┼─────────────────┤   │
│  │ 우선순위     │ 정적          │ 동적           │   │
│  │ 최대 이용률  │ ~69% (n→∞)    │ 100%           │   │
│  │ 구현 복잡도  │ 낮음          │ 높음           │   │
│  │ 오버헤드     │ 낮음          │ 높음           │   │
│  │ 과부하 시    │ 예측 가능     │ 도미노 효과    │   │
│  └──────────────┴────────────────┴─────────────────┘   │
│                                                         │
└─────────────────────────────────────────────────────────┘
</code></pre></div>

<hr />
<h2 id="5-linux-cfs">5. Linux CFS<a class="header-link" href="#5-linux-cfs" title="Permanent link">&para;</a></h2>
<h3 id="cfs">CFS 개요<a class="header-link" href="#cfs" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────┐
│         CFS (Completely Fair Scheduler)                 │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  Linux 2.6.23부터 기본 스케줄러 (2007년~)               │
│                                                         │
│  핵심 아이디어:                                         │
│  • 모든 프로세스에게 공정하게 CPU 시간 분배              │
│  • 가상 런타임 (virtual runtime)으로 공정성 추적        │
│  • Red-Black 트리로 효율적 관리                        │
│                                                         │
│  가상 런타임 (vruntime):                                │
│  • 프로세스가 CPU를 사용한 가중 시간                    │
│  • 우선순위가 높으면 천천히 증가                        │
│  • 우선순위가 낮으면 빠르게 증가                        │
│                                                         │
│  스케줄링 결정:                                         │
│  • 항상 vruntime이 가장 작은 프로세스 선택              │
│  • = 가장 덜 실행된 프로세스                            │
│                                                         │
└─────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="cfs_1">CFS 동작 방식<a class="header-link" href="#cfs_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────┐
│                    CFS 동작 방식                         │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  Red-Black 트리 (vruntime 기준 정렬):                   │
│                                                         │
│                    ┌───────┐                            │
│                    │ P2:50 │                            │
│                    └───┬───┘                            │
│              ┌─────────┴─────────┐                      │
│          ┌───────┐           ┌───────┐                  │
│          │ P1:30 │           │ P3:80 │                  │
│          └───┬───┘           └───┬───┘                  │
│        ┌─────┴─────┐       ┌─────┴─────┐                │
│    ┌───────┐   ┌───────┐ ┌───────┐  ┌───────┐          │
│    │ P4:10 │   │ P5:40 │ │ P6:70 │  │ P7:100│          │
│    └───────┘   └───────┘ └───────┘  └───────┘          │
│    ↑                                                    │
│    가장 왼쪽 = 가장 작은 vruntime = 다음 실행            │
│                                                         │
│  시간이 지나면:                                         │
│  1. P4 실행, vruntime 증가 (10 → 25)                   │
│  2. P4가 더 이상 최소가 아니면 다른 프로세스로 전환      │
│  3. 트리 재구성, 새로운 최소 선택                       │
│                                                         │
└─────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="cfs_2">CFS 타임슬라이스 계산<a class="header-link" href="#cfs_2" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────┐
│                CFS 타임슬라이스 계산                     │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  CFS는 고정 타임슬라이스 대신 목표 지연 시간 사용        │
│                                                         │
│  목표 지연 (Target Latency): 기본 6ms (조정 가능)       │
│                                                         │
│  계산:                                                  │
│  각 프로세스의 타임슬라이스 = 목표 지연 × (가중치/총가중치)│
│                                                         │
│  예시 (n=3, 같은 우선순위):                             │
│  ┌───────────────────────────────────────────────────┐  │
│  │ 목표 지연 = 6ms                                   │  │
│  │ 각 프로세스 가중치 = 1024 (nice 0)                │  │
│  │ 총 가중치 = 1024 × 3 = 3072                       │  │
│  │                                                   │  │
│  │ 각 타임슬라이스 = 6ms × (1024/3072) = 2ms         │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
│  예시 (다른 우선순위):                                  │
│  ┌───────────────────────────────────────────────────┐  │
│  │ P1: nice -5 (가중치 3121)                        │  │
│  │ P2: nice 0 (가중치 1024)                         │  │
│  │ P3: nice 5 (가중치 335)                          │  │
│  │ 총 가중치 = 4480                                  │  │
│  │                                                   │  │
│  │ P1 타임슬라이스 = 6ms × (3121/4480) ≈ 4.2ms      │  │
│  │ P2 타임슬라이스 = 6ms × (1024/4480) ≈ 1.4ms      │  │
│  │ P3 타임슬라이스 = 6ms × (335/4480) ≈ 0.4ms       │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
│  Nice 값과 가중치:                                      │
│  • nice -20 (최고): 가중치 88761                       │
│  • nice 0 (기본): 가중치 1024                          │
│  • nice 19 (최저): 가중치 15                           │
│  • 약 10% 차이 당 nice 1 차이                          │
│                                                         │
└─────────────────────────────────────────────────────────┘
</code></pre></div>

<hr />
<h2 id="6">6. 연습 문제<a class="header-link" href="#6" title="Permanent link">&para;</a></h2>
<h3 id="1-mlfq">문제 1: MLFQ<a class="header-link" href="#1-mlfq" title="Permanent link">&para;</a></h3>
<p>3개의 큐를 가진 MLFQ 시스템에서:
- Q0: TQ=4ms
- Q1: TQ=8ms
- Q2: FCFS</p>
<p>프로세스 A(CPU-bound, 30ms 작업)와 프로세스 B(I/O-bound, 3ms CPU + I/O 반복)가 동시에 도착했을 때, 처음 20ms 동안의 실행을 설명하세요.</p>
<details>
<summary>정답 보기</summary>

**초기 상태:**
- Q0: [A, B]
- Q1: []
- Q2: []

**시간 0-3ms:** B 실행 (3ms), I/O 요청 → B는 Q0에 남음
**시간 3-7ms:** A 실행 (4ms), TQ 소진 → A는 Q1로 강등
**시간 7-10ms:** B가 I/O 완료 후 도착, B 실행 (3ms)
**시간 10-18ms:** A 실행 (8ms), TQ 소진 → A는 Q2로 강등
**시간 18-20ms:** B가 돌아왔다면 B 실행...

**결과:**
- B는 짧은 작업으로 높은 큐에서 빠르게 서비스됨
- A는 점점 낮은 큐로 이동하여 긴 타임슬라이스 사용

</details>

<h3 id="2-rms">문제 2: RMS 스케줄 가능성<a class="header-link" href="#2-rms" title="Permanent link">&para;</a></h3>
<p>다음 태스크 집합이 RMS로 스케줄 가능한지 확인하세요.</p>
<table>
<thead>
<tr>
<th>태스크</th>
<th>주기 (P)</th>
<th>실행 시간 (C)</th>
</tr>
</thead>
<tbody>
<tr>
<td>T1</td>
<td>100</td>
<td>20</td>
</tr>
<tr>
<td>T2</td>
<td>150</td>
<td>30</td>
</tr>
<tr>
<td>T3</td>
<td>350</td>
<td>80</td>
</tr>
</tbody>
</table>
<details>
<summary>정답 보기</summary>

**총 이용률 계산:**
- U1 = 20/100 = 0.20
- U2 = 30/150 = 0.20
- U3 = 80/350 = 0.23

**총 U = 0.20 + 0.20 + 0.23 = 0.63**

**RMS 스케줄 가능 조건 (n=3):**
- 한계 = 3 × (2^(1/3) - 1) = 3 × 0.26 = 0.78

**결론:**
- 0.63 < 0.78
- **스케줄 가능**

</details>

<h3 id="3_1">문제 3: 프로세서 친화성<a class="header-link" href="#3_1" title="Permanent link">&para;</a></h3>
<p>소프트 친화성과 하드 친화성의 차이를 설명하고, 각각이 적합한 상황을 예시와 함께 설명하세요.</p>
<details>
<summary>정답 보기</summary>

**소프트 친화성:**
- 정의: OS가 프로세스를 같은 CPU에서 실행하려고 노력하지만, 부하 분산이 필요하면 이동 가능
- 적합한 상황:
  - 일반적인 응용 프로그램
  - 캐시 효율과 부하 분산 균형이 필요한 경우
  - 예: 웹 서버, 데이터베이스

**하드 친화성:**
- 정의: 프로세스가 특정 CPU 집합에서만 실행되도록 강제
- 적합한 상황:
  - 실시간 시스템 (예측 가능한 성능 필요)
  - NUMA 시스템에서 로컬 메모리 접근 최적화
  - 특정 CPU 코어 전용 할당
  - 예: 게임 서버의 물리 엔진 스레드, 고빈도 트레이딩 시스템

</details>

<h3 id="4-edf-vs-rms">문제 4: EDF vs RMS<a class="header-link" href="#4-edf-vs-rms" title="Permanent link">&para;</a></h3>
<p>다음 태스크 집합에 대해 RMS와 EDF를 비교하세요.</p>
<table>
<thead>
<tr>
<th>태스크</th>
<th>주기</th>
<th>실행 시간</th>
</tr>
</thead>
<tbody>
<tr>
<td>T1</td>
<td>4</td>
<td>1</td>
</tr>
<tr>
<td>T2</td>
<td>5</td>
<td>2</td>
</tr>
<tr>
<td>T3</td>
<td>10</td>
<td>3</td>
</tr>
</tbody>
</table>
<details>
<summary>정답 보기</summary>

**이용률:**
- U = 1/4 + 2/5 + 3/10 = 0.25 + 0.4 + 0.3 = 0.95

**RMS 분석:**
- 한계 = 3 × (2^(1/3) - 1) ≈ 0.78
- 0.95 > 0.78 → RMS로 보장되지 않음
- (실제로는 스케줄 가능할 수도 있지만 보장 안 됨)

**EDF 분석:**
- 한계 = 1.0 (100%)
- 0.95 < 1.0 → EDF로 스케줄 가능!

**결론:**
- 이 태스크 집합은 RMS로는 스케줄 가능성이 보장되지 않지만
- EDF로는 스케줄 가능

</details>

<h3 id="5-linux-cfs_1">문제 5: Linux CFS<a class="header-link" href="#5-linux-cfs_1" title="Permanent link">&para;</a></h3>
<p>nice 값이 0인 프로세스 A와 nice 값이 5인 프로세스 B가 있을 때, A가 B보다 얼마나 더 많은 CPU 시간을 받는지 계산하세요.</p>
<details>
<summary>정답 보기</summary>

**가중치 (근사값):**
- nice 0: 가중치 1024
- nice 5: 가중치 약 335 (nice 1 차이당 약 1.25배)

**CPU 시간 비율:**
- A의 비율 = 1024 / (1024 + 335) = 1024 / 1359 ≈ 0.753 (75.3%)
- B의 비율 = 335 / 1359 ≈ 0.247 (24.7%)

**A는 B보다 약 3배 더 많은 CPU 시간을 받음**

(정확한 비율: 1024/335 ≈ 3.06배)

</details>

<hr />
<h2 id="_11">다음 단계<a class="header-link" href="#_11" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="./07_Synchronization_Basics.md">07_Synchronization_Basics.md</a> - 경쟁 상태와 임계 구역</li>
</ul>
<hr />
<h2 id="_12">참고 자료<a class="header-link" href="#_12" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://pages.cs.wisc.edu/~remzi/OSTEP/cpu-sched-mlfq.pdf">OSTEP - MLFQ</a></li>
<li><a href="https://www.kernel.org/doc/html/latest/scheduler/sched-design-CFS.html">Linux CFS Documentation</a></li>
<li><a href="https://www.pearson.com/us/higher-education/program/Liu-Real-Time-Systems/PGM293020.html">Real-Time Systems (Jane Liu)</a></li>
</ul>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/ko/OS_Theory/05_Scheduling_Algorithms.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">스케줄링 알고리즘</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">🔗</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/ko/OS_Theory/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">📋</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/ko/OS_Theory/07_Synchronization_Basics.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">동기화 기초</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">↑</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'ko';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}