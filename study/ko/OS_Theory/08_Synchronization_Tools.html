{% raw %}
<!DOCTYPE html>
<html lang="ko" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë™ê¸°í™” ë„êµ¬ - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/ko/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/ko/" class="nav-item ">
                    <span class="nav-icon">ğŸ </span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">ğŸ’»</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/ko/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" >
                        English
                    </option>
                    
                    <option value="ko" selected>
                        í•œêµ­ì–´
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">â˜€ï¸</span>
                    <span class="theme-icon dark">ğŸŒ™</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/ko/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/ko/OS_Theory/">OS Theory</a>
    <span class="separator">/</span>
    <span class="current">ë™ê¸°í™” ë„êµ¬</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>ë™ê¸°í™” ë„êµ¬</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/ko/OS_Theory/07_Synchronization_Basics.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">ë™ê¸°í™” ê¸°ì´ˆ</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/ko/OS_Theory/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/ko/OS_Theory/09_Deadlock.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">ë°ë“œë½</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#_2">ê°œìš”</a></li>
<li><a href="#_3">ëª©ì°¨</a></li>
<li><a href="#1-mutex">1. ë®¤í…ìŠ¤ (Mutex)</a><ul>
<li><a href="#_4">ê°œë…</a></li>
<li><a href="#pthread_mutex">pthread_mutex ì‚¬ìš©</a></li>
<li><a href="#_5">ë®¤í…ìŠ¤ ì´ˆê¸°í™” ë°©ë²•</a></li>
<li><a href="#_6">ë®¤í…ìŠ¤ ìœ í˜•</a></li>
</ul>
</li>
<li><a href="#2-semaphore">2. ì„¸ë§ˆí¬ì–´ (Semaphore)</a><ul>
<li><a href="#_7">ê°œë…</a></li>
<li><a href="#pv-waitsignal">P/V ì—°ì‚° (wait/signal)</a></li>
<li><a href="#posix">POSIX ì„¸ë§ˆí¬ì–´ ì‚¬ìš©</a></li>
<li><a href="#_8">ì¹´ìš´íŒ… ì„¸ë§ˆí¬ì–´ ì˜ˆì œ</a></li>
<li><a href="#vs">ë®¤í…ìŠ¤ vs ì„¸ë§ˆí¬ì–´</a></li>
</ul>
</li>
<li><a href="#3-monitor">3. ëª¨ë‹ˆí„° (Monitor)</a><ul>
<li><a href="#_9">ê°œë…</a></li>
<li><a href="#java">Javaì—ì„œì˜ ëª¨ë‹ˆí„°</a></li>
</ul>
</li>
<li><a href="#4-condition-variable">4. ì¡°ê±´ ë³€ìˆ˜ (Condition Variable)</a><ul>
<li><a href="#_10">ê°œë…</a></li>
<li><a href="#pthread">pthread ì¡°ê±´ ë³€ìˆ˜ ì‚¬ìš©</a></li>
<li><a href="#spurious-wakeup">Spurious Wakeup</a></li>
</ul>
</li>
<li><a href="#5">5. ê³ ì „ ë™ê¸°í™” ë¬¸ì œ</a><ul>
<li><a href="#-bounded-buffer">ìƒì‚°ì-ì†Œë¹„ì ë¬¸ì œ (Bounded Buffer)</a></li>
<li><a href="#-readers-writers">ë…ì-ì €ì ë¬¸ì œ (Readers-Writers)</a></li>
<li><a href="#dining-philosophers">ì‹ì‚¬í•˜ëŠ” ì² í•™ì ë¬¸ì œ (Dining Philosophers)</a></li>
</ul>
</li>
<li><a href="#6">6. ì—°ìŠµ ë¬¸ì œ</a><ul>
<li><a href="#1">ë¬¸ì œ 1: ì„¸ë§ˆí¬ì–´ ê°’</a></li>
<li><a href="#2-">ë¬¸ì œ 2: ìƒì‚°ì-ì†Œë¹„ì</a></li>
<li><a href="#3">ë¬¸ì œ 3: ëª¨ë‹ˆí„° êµ¬í˜„</a></li>
<li><a href="#4">ë¬¸ì œ 4: ì‹ì‚¬í•˜ëŠ” ì² í•™ì ë°ë“œë½</a></li>
<li><a href="#5_1">ë¬¸ì œ 5: ì¡°ê±´ ë³€ìˆ˜ ì‚¬ìš©</a></li>
</ul>
</li>
<li><a href="#_11">ë‹¤ìŒ ë‹¨ê³„</a></li>
<li><a href="#_12">ì°¸ê³  ìë£Œ</a></li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="_1">ë™ê¸°í™” ë„êµ¬<a class="header-link" href="#_1" title="Permanent link">&para;</a></h1>
<h2 id="_2">ê°œìš”<a class="header-link" href="#_2" title="Permanent link">&para;</a></h2>
<p>ìš´ì˜ì²´ì œì™€ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ëŠ” ë™ê¸°í™”ë¥¼ ìœ„í•œ ë‹¤ì–‘í•œ ë„êµ¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì´ ë ˆìŠ¨ì—ì„œëŠ” ë®¤í…ìŠ¤, ì„¸ë§ˆí¬ì–´, ëª¨ë‹ˆí„°, ì¡°ê±´ ë³€ìˆ˜ë¥¼ í•™ìŠµí•˜ê³ , ê³ ì „ì ì¸ ë™ê¸°í™” ë¬¸ì œë“¤ì„ í•´ê²°í•©ë‹ˆë‹¤.</p>
<hr />
<h2 id="_3">ëª©ì°¨<a class="header-link" href="#_3" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#1-ë®¤í…ìŠ¤-mutex">ë®¤í…ìŠ¤ (Mutex)</a></li>
<li><a href="#2-ì„¸ë§ˆí¬ì–´-semaphore">ì„¸ë§ˆí¬ì–´ (Semaphore)</a></li>
<li><a href="#3-ëª¨ë‹ˆí„°-monitor">ëª¨ë‹ˆí„° (Monitor)</a></li>
<li><a href="#4-ì¡°ê±´-ë³€ìˆ˜-condition-variable">ì¡°ê±´ ë³€ìˆ˜ (Condition Variable)</a></li>
<li><a href="#5-ê³ ì „-ë™ê¸°í™”-ë¬¸ì œ">ê³ ì „ ë™ê¸°í™” ë¬¸ì œ</a></li>
<li><a href="#6-ì—°ìŠµ-ë¬¸ì œ">ì—°ìŠµ ë¬¸ì œ</a></li>
</ol>
<hr />
<h2 id="1-mutex">1. ë®¤í…ìŠ¤ (Mutex)<a class="header-link" href="#1-mutex" title="Permanent link">&para;</a></h2>
<h3 id="_4">ê°œë…<a class="header-link" href="#_4" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ë®¤í…ìŠ¤ (Mutex)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Mutex = Mutual Exclusionì˜ ì•½ì                        â”‚
â”‚        = ì´ì§„ ë½ (Binary Lock)                          â”‚
â”‚        = í•œ ë²ˆì— í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œë§Œ ì„ê³„ êµ¬ì—­ ì§„ì… í—ˆìš©      â”‚
â”‚                                                         â”‚
â”‚  ìƒíƒœ:                                                  â”‚
â”‚  â€¢ ì ê¹€ (Locked): í•œ ìŠ¤ë ˆë“œê°€ ë½ì„ ì†Œìœ                   â”‚
â”‚  â€¢ ì—´ë¦¼ (Unlocked): ì‚¬ìš© ê°€ëŠ¥                           â”‚
â”‚                                                         â”‚
â”‚  ê¸°ë³¸ ì—°ì‚°:                                             â”‚
â”‚  â€¢ lock(): ë½ íšë“ (ë‹¤ë¥¸ ìŠ¤ë ˆë“œ ëŒ€ê¸°)                    â”‚
â”‚  â€¢ unlock(): ë½ í•´ì œ                                   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚          ë®¤í…ìŠ¤ ë™ì‘ ì‹œê°í™”                       â”‚    â”‚
â”‚  â”‚                                                 â”‚    â”‚
â”‚  â”‚  ìŠ¤ë ˆë“œ1: â”€lock()â”€â”¬â”€â”€â”€ì„ê³„êµ¬ì—­â”€â”€â”€â”¬â”€unlock()â”€     â”‚    â”‚
â”‚  â”‚  ìŠ¤ë ˆë“œ2: â”€lock()â”€â”‚â”€ëŒ€ê¸°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€ì„ê³„êµ¬ì—­â”€     â”‚    â”‚
â”‚  â”‚                  â”‚              â–²               â”‚    â”‚
â”‚  â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="pthread_mutex">pthread_mutex ì‚¬ìš©<a class="header-link" href="#pthread_mutex" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pthread.h&gt;</span>

<span class="n">pthread_mutex_t</span><span class="w"> </span><span class="n">mutex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PTHREAD_MUTEX_INITIALIZER</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">counter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="nf">increment</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1000000</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">pthread_mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span><span class="w">    </span><span class="c1">// ë½ íšë“</span>
<span class="w">        </span><span class="n">counter</span><span class="o">++</span><span class="p">;</span><span class="w">                      </span><span class="c1">// ì„ê³„ êµ¬ì—­</span>
<span class="w">        </span><span class="n">pthread_mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span><span class="w">  </span><span class="c1">// ë½ í•´ì œ</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">pthread_t</span><span class="w"> </span><span class="n">t1</span><span class="p">,</span><span class="w"> </span><span class="n">t2</span><span class="p">;</span>

<span class="w">    </span><span class="n">pthread_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">t1</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">increment</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<span class="w">    </span><span class="n">pthread_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">t2</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">increment</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">    </span><span class="n">pthread_join</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<span class="w">    </span><span class="n">pthread_join</span><span class="p">(</span><span class="n">t2</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Counter: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">counter</span><span class="p">);</span><span class="w">  </span><span class="c1">// 2000000 (ì •í™•!)</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="_5">ë®¤í…ìŠ¤ ì´ˆê¸°í™” ë°©ë²•<a class="header-link" href="#_5" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// ë°©ë²• 1: ì •ì  ì´ˆê¸°í™”</span>
<span class="n">pthread_mutex_t</span><span class="w"> </span><span class="n">mutex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PTHREAD_MUTEX_INITIALIZER</span><span class="p">;</span>

<span class="c1">// ë°©ë²• 2: ë™ì  ì´ˆê¸°í™”</span>
<span class="n">pthread_mutex_t</span><span class="w"> </span><span class="n">mutex</span><span class="p">;</span>
<span class="n">pthread_mutex_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span><span class="w">  </span><span class="c1">// ì†ì„± NULL = ê¸°ë³¸</span>

<span class="c1">// ì‚¬ìš© í›„ ì •ë¦¬ (ë™ì  ì´ˆê¸°í™” ì‹œ)</span>
<span class="n">pthread_mutex_destroy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>

<span class="c1">// ì†ì„± ì„¤ì • ì˜ˆì‹œ</span>
<span class="n">pthread_mutexattr_t</span><span class="w"> </span><span class="n">attr</span><span class="p">;</span>
<span class="n">pthread_mutexattr_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">attr</span><span class="p">);</span>
<span class="n">pthread_mutexattr_settype</span><span class="p">(</span><span class="o">&amp;</span><span class="n">attr</span><span class="p">,</span><span class="w"> </span><span class="n">PTHREAD_MUTEX_RECURSIVE</span><span class="p">);</span><span class="w">  </span><span class="c1">// ì¬ê·€ ë®¤í…ìŠ¤</span>
<span class="n">pthread_mutex_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">attr</span><span class="p">);</span>
<span class="n">pthread_mutexattr_destroy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">attr</span><span class="p">);</span>
</code></pre></div>

<h3 id="_6">ë®¤í…ìŠ¤ ìœ í˜•<a class="header-link" href="#_6" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ë®¤í…ìŠ¤ ìœ í˜•                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  1. PTHREAD_MUTEX_NORMAL (ê¸°ë³¸)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â€¢ ì¬ê·€ lock ì‹œ ë°ë“œë½                             â”‚  â”‚
â”‚  â”‚  â€¢ ì†Œìœ í•˜ì§€ ì•Šì€ ìŠ¤ë ˆë“œê°€ unlock ì‹œ ì •ì˜ë˜ì§€ ì•ŠìŒ   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚  2. PTHREAD_MUTEX_RECURSIVE                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â€¢ ê°™ì€ ìŠ¤ë ˆë“œê°€ ì—¬ëŸ¬ ë²ˆ lock ê°€ëŠ¥                  â”‚  â”‚
â”‚  â”‚  â€¢ lock íšŸìˆ˜ë§Œí¼ unlock í•„ìš”                       â”‚  â”‚
â”‚  â”‚  â€¢ ì¬ê·€ í•¨ìˆ˜ì—ì„œ ìœ ìš©                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚  3. PTHREAD_MUTEX_ERRORCHECK                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â€¢ ì¬ê·€ lock ì‹œ ì—ëŸ¬ ë°˜í™˜                          â”‚  â”‚
â”‚  â”‚  â€¢ ì†Œìœ í•˜ì§€ ì•Šì€ unlock ì‹œ ì—ëŸ¬ ë°˜í™˜               â”‚  â”‚
â”‚  â”‚  â€¢ ë””ë²„ê¹…ìš©                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<hr />
<h2 id="2-semaphore">2. ì„¸ë§ˆí¬ì–´ (Semaphore)<a class="header-link" href="#2-semaphore" title="Permanent link">&para;</a></h2>
<h3 id="_7">ê°œë…<a class="header-link" href="#_7" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                   </span><span class="err">ì„¸ë§ˆí¬ì–´</span><span class="w"> </span><span class="p">(</span><span class="n">Semaphore</span><span class="p">)</span><span class="w">                   </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">Dijkstraê°€</span><span class="w"> </span><span class="mi">1965</span><span class="err">ë…„</span><span class="w"> </span><span class="err">ì œì•ˆ</span><span class="w">                                 </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="err">ì •ìˆ˜</span><span class="w"> </span><span class="err">ê°’ì„</span><span class="w"> </span><span class="err">ê°€ì§€ëŠ”</span><span class="w"> </span><span class="err">ë™ê¸°í™”</span><span class="w"> </span><span class="err">ê°ì²´</span><span class="w">                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="err">ì—¬ëŸ¬</span><span class="w"> </span><span class="err">ê°œì˜</span><span class="w"> </span><span class="err">ìì›ì„</span><span class="w"> </span><span class="err">ê´€ë¦¬í• </span><span class="w"> </span><span class="err">ìˆ˜</span><span class="w"> </span><span class="err">ìˆìŒ</span><span class="w">                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">ê¸°ë³¸</span><span class="w"> </span><span class="err">ì—°ì‚°</span><span class="p">:</span><span class="w">                                             </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">wait</span><span class="p">()</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">P</span><span class="p">()</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">down</span><span class="p">()</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">acquire</span><span class="p">()</span><span class="w">                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="err">ê°’ì´</span><span class="w"> </span><span class="mi">0</span><span class="err">ë³´ë‹¤</span><span class="w"> </span><span class="err">í¬ë©´</span><span class="w"> </span><span class="err">ê°ì†Œì‹œí‚¤ê³ </span><span class="w"> </span><span class="err">ì§„í–‰</span><span class="w">                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="err">ê°’ì´</span><span class="w"> </span><span class="mi">0</span><span class="err">ì´ë©´</span><span class="w"> </span><span class="err">ëŒ€ê¸°</span><span class="w">                                    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="k">signal</span><span class="p">()</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">V</span><span class="p">()</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">up</span><span class="p">()</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">release</span><span class="p">()</span><span class="w">                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="err">ê°’ì„</span><span class="w"> </span><span class="err">ì¦ê°€ì‹œí‚´</span><span class="w">                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="err">ëŒ€ê¸°</span><span class="w"> </span><span class="err">ì¤‘ì¸</span><span class="w"> </span><span class="err">í”„ë¡œì„¸ìŠ¤ê°€</span><span class="w"> </span><span class="err">ìˆìœ¼ë©´</span><span class="w"> </span><span class="err">ê¹¨ì›€</span><span class="w">                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">ì¢…ë¥˜</span><span class="p">:</span><span class="w">                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="err">ì´ì§„</span><span class="w"> </span><span class="err">ì„¸ë§ˆí¬ì–´</span><span class="w"> </span><span class="p">(</span><span class="n">Binary</span><span class="p">):</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="err">ë˜ëŠ”</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="err">ë®¤í…ìŠ¤ì™€</span><span class="w"> </span><span class="err">ìœ ì‚¬</span><span class="p">)</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="err">ì¹´ìš´íŒ…</span><span class="w"> </span><span class="err">ì„¸ë§ˆí¬ì–´</span><span class="w"> </span><span class="p">(</span><span class="n">Counting</span><span class="p">):</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="err">ì´ìƒì˜</span><span class="w"> </span><span class="err">ì •ìˆ˜</span><span class="w">            </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="pv-waitsignal">P/V ì—°ì‚° (wait/signal)<a class="header-link" href="#pv-waitsignal" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                    </span><span class="n">P</span><span class="o">/</span><span class="n">V</span><span class="w"> </span><span class="err">ì—°ì‚°</span><span class="w"> </span><span class="err">ì •ì˜</span><span class="w">                         </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">P</span><span class="p">(</span><span class="n">S</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">wait</span><span class="p">(</span><span class="n">S</span><span class="p">):</span><span class="w">                                       </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">wait</span><span class="p">(</span><span class="n">S</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">                                        </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">      </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">S</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">                             </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">          </span><span class="o">//</span><span class="w"> </span><span class="err">ëŒ€ê¸°</span><span class="w"> </span><span class="p">(</span><span class="err">ë°”ìœ</span><span class="w"> </span><span class="err">ëŒ€ê¸°</span><span class="w"> </span><span class="err">ë˜ëŠ”</span><span class="w"> </span><span class="err">ë¸”ë¡œí‚¹</span><span class="p">)</span><span class="w">           </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">      </span><span class="p">}</span><span class="w">                                            </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">      </span><span class="n">S</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="p">}</span><span class="w">                                                </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">P</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Proberen</span><span class="w"> </span><span class="p">(</span><span class="n">Dutch</span><span class="p">:</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">test</span><span class="p">)</span><span class="w">                </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">V</span><span class="p">(</span><span class="n">S</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="k">signal</span><span class="p">(</span><span class="n">S</span><span class="p">):</span><span class="w">                                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="k">signal</span><span class="p">(</span><span class="n">S</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">                                      </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">      </span><span class="n">S</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">      </span><span class="o">//</span><span class="w"> </span><span class="err">ëŒ€ê¸°</span><span class="w"> </span><span class="err">ì¤‘ì¸</span><span class="w"> </span><span class="err">í”„ë¡œì„¸ìŠ¤ê°€</span><span class="w"> </span><span class="err">ìˆìœ¼ë©´</span><span class="w"> </span><span class="err">ê¹¨ì›€</span><span class="w">           </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="p">}</span><span class="w">                                                </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Verhogen</span><span class="w"> </span><span class="p">(</span><span class="n">Dutch</span><span class="p">:</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">increment</span><span class="p">)</span><span class="w">           </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">ì¤‘ìš”</span><span class="p">:</span><span class="w"> </span><span class="n">Pì™€</span><span class="w"> </span><span class="n">VëŠ”</span><span class="w"> </span><span class="err">ì›ìì ìœ¼ë¡œ</span><span class="w"> </span><span class="err">ìˆ˜í–‰ë˜ì–´ì•¼</span><span class="w"> </span><span class="err">í•¨</span><span class="w">                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="posix">POSIX ì„¸ë§ˆí¬ì–´ ì‚¬ìš©<a class="header-link" href="#posix" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pthread.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;semaphore.h&gt;</span>

<span class="n">sem_t</span><span class="w"> </span><span class="n">semaphore</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">counter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="nf">increment</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1000000</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">sem_wait</span><span class="p">(</span><span class="o">&amp;</span><span class="n">semaphore</span><span class="p">);</span><span class="w">    </span><span class="c1">// P ì—°ì‚°: ëŒ€ê¸° ë° ê°ì†Œ</span>
<span class="w">        </span><span class="n">counter</span><span class="o">++</span><span class="p">;</span>
<span class="w">        </span><span class="n">sem_post</span><span class="p">(</span><span class="o">&amp;</span><span class="n">semaphore</span><span class="p">);</span><span class="w">    </span><span class="c1">// V ì—°ì‚°: ì¦ê°€ ë° ì‹œê·¸ë„</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">pthread_t</span><span class="w"> </span><span class="n">t1</span><span class="p">,</span><span class="w"> </span><span class="n">t2</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// ì„¸ë§ˆí¬ì–´ ì´ˆê¸°í™” (ê°’=1: ì´ì§„ ì„¸ë§ˆí¬ì–´)</span>
<span class="w">    </span><span class="n">sem_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">semaphore</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w">  </span><span class="c1">// 0=ìŠ¤ë ˆë“œ ê°„ ê³µìœ </span>

<span class="w">    </span><span class="n">pthread_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">t1</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">increment</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<span class="w">    </span><span class="n">pthread_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">t2</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">increment</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">    </span><span class="n">pthread_join</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<span class="w">    </span><span class="n">pthread_join</span><span class="p">(</span><span class="n">t2</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">    </span><span class="n">sem_destroy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">semaphore</span><span class="p">);</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Counter: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">counter</span><span class="p">);</span><span class="w">  </span><span class="c1">// 2000000</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="_8">ì¹´ìš´íŒ… ì„¸ë§ˆí¬ì–´ ì˜ˆì œ<a class="header-link" href="#_8" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pthread.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;semaphore.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span>

<span class="cp">#define MAX_CONNECTIONS 3</span>

<span class="n">sem_t</span><span class="w"> </span><span class="n">connection_sem</span><span class="p">;</span>

<span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="nf">client</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="p">)</span><span class="n">arg</span><span class="p">;</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;í´ë¼ì´ì–¸íŠ¸ %d: ì—°ê²° ëŒ€ê¸° ì¤‘</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="p">);</span>

<span class="w">    </span><span class="n">sem_wait</span><span class="p">(</span><span class="o">&amp;</span><span class="n">connection_sem</span><span class="p">);</span><span class="w">  </span><span class="c1">// ì—°ê²° ìŠ¬ë¡¯ íšë“</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;í´ë¼ì´ì–¸íŠ¸ %d: ì—°ê²°ë¨ (ì‘ì—… ì¤‘...)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="w">  </span><span class="c1">// ì‘ì—… ì‹œë®¬ë ˆì´ì…˜</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;í´ë¼ì´ì–¸íŠ¸ %d: ì—°ê²° í•´ì œ</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sem_post</span><span class="p">(</span><span class="o">&amp;</span><span class="n">connection_sem</span><span class="p">);</span><span class="w">  </span><span class="c1">// ì—°ê²° ìŠ¬ë¡¯ ë°˜í™˜</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">pthread_t</span><span class="w"> </span><span class="n">threads</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ids</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>

<span class="w">    </span><span class="c1">// ìµœëŒ€ 3ê°œì˜ ë™ì‹œ ì—°ê²° í—ˆìš©</span>
<span class="w">    </span><span class="n">sem_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">connection_sem</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">MAX_CONNECTIONS</span><span class="p">);</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">ids</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="w">        </span><span class="n">pthread_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">threads</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">ids</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">pthread_join</span><span class="p">(</span><span class="n">threads</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">sem_destroy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">connection_sem</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm">ì¶œë ¥ ì˜ˆì‹œ:</span>
<span class="cm">í´ë¼ì´ì–¸íŠ¸ 0: ì—°ê²° ëŒ€ê¸° ì¤‘</span>
<span class="cm">í´ë¼ì´ì–¸íŠ¸ 0: ì—°ê²°ë¨ (ì‘ì—… ì¤‘...)</span>
<span class="cm">í´ë¼ì´ì–¸íŠ¸ 1: ì—°ê²° ëŒ€ê¸° ì¤‘</span>
<span class="cm">í´ë¼ì´ì–¸íŠ¸ 1: ì—°ê²°ë¨ (ì‘ì—… ì¤‘...)</span>
<span class="cm">í´ë¼ì´ì–¸íŠ¸ 2: ì—°ê²° ëŒ€ê¸° ì¤‘</span>
<span class="cm">í´ë¼ì´ì–¸íŠ¸ 2: ì—°ê²°ë¨ (ì‘ì—… ì¤‘...)</span>
<span class="cm">í´ë¼ì´ì–¸íŠ¸ 3: ì—°ê²° ëŒ€ê¸° ì¤‘       &lt;- 3ê°œ ì´ìƒì€ ëŒ€ê¸°</span>
<span class="cm">...</span>
<span class="cm">*/</span>
</code></pre></div>

<h3 id="vs">ë®¤í…ìŠ¤ vs ì„¸ë§ˆí¬ì–´<a class="header-link" href="#vs" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">      </span><span class="err">íŠ¹ì„±</span><span class="w">         </span><span class="err">â”‚</span><span class="w">       </span><span class="err">ë®¤í…ìŠ¤</span><span class="w">        </span><span class="err">â”‚</span><span class="w">      </span><span class="err">ì„¸ë§ˆí¬ì–´</span><span class="w">       </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="err">ê°’</span><span class="w"> </span><span class="err">ë²”ìœ„</span><span class="w">          </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="err">ë˜ëŠ”</span><span class="w"> </span><span class="mi">1</span><span class="w">            </span><span class="err">â”‚</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="err">ì´ìƒ</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="err">ì†Œìœ ê¶Œ</span><span class="w">           </span><span class="err">â”‚</span><span class="w"> </span><span class="err">ìˆìŒ</span><span class="w"> </span><span class="p">(</span><span class="err">ë½</span><span class="w"> </span><span class="err">ì†Œìœ ìë§Œ</span><span class="w">   </span><span class="err">â”‚</span><span class="w"> </span><span class="err">ì—†ìŒ</span><span class="w"> </span><span class="p">(</span><span class="err">ëˆ„êµ¬ë‚˜</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                  </span><span class="err">â”‚</span><span class="w"> </span><span class="n">unlock</span><span class="w"> </span><span class="err">ê°€ëŠ¥</span><span class="p">)</span><span class="w">        </span><span class="err">â”‚</span><span class="w"> </span><span class="k">signal</span><span class="w"> </span><span class="err">ê°€ëŠ¥</span><span class="p">)</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="err">ìš©ë„</span><span class="w">             </span><span class="err">â”‚</span><span class="w"> </span><span class="err">ìƒí˜¸</span><span class="w"> </span><span class="err">ë°°ì œ</span><span class="w">           </span><span class="err">â”‚</span><span class="w"> </span><span class="err">ìì›</span><span class="w"> </span><span class="err">ì¹´ìš´íŒ…</span><span class="p">,</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                  </span><span class="err">â”‚</span><span class="w">                     </span><span class="err">â”‚</span><span class="w"> </span><span class="err">ì‹ í˜¸</span><span class="w"> </span><span class="err">ì „ë‹¬</span><span class="w">           </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="err">ì¬ê·€ì </span><span class="w"> </span><span class="err">íšë“</span><span class="w">      </span><span class="err">â”‚</span><span class="w"> </span><span class="err">ê°€ëŠ¥</span><span class="w"> </span><span class="p">(</span><span class="n">RECURSIVE</span><span class="p">)</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">ë¶ˆê°€ëŠ¥</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="err">ìš°ì„ ìˆœìœ„</span><span class="w"> </span><span class="err">ìƒì†</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">ì§€ì›</span><span class="w"> </span><span class="err">ê°€ëŠ¥</span><span class="w">           </span><span class="err">â”‚</span><span class="w"> </span><span class="err">ì¼ë°˜ì ìœ¼ë¡œ</span><span class="w"> </span><span class="err">ë¯¸ì§€ì›</span><span class="w">   </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w"> </span><span class="err">ì‚¬ìš©</span><span class="w"> </span><span class="err">ì˜ˆ</span><span class="w">          </span><span class="err">â”‚</span><span class="w"> </span><span class="err">ê³µìœ </span><span class="w"> </span><span class="err">ë°ì´í„°</span><span class="w"> </span><span class="err">ë³´í˜¸</span><span class="w">    </span><span class="err">â”‚</span><span class="w"> </span><span class="err">ìƒì‚°ì</span><span class="o">-</span><span class="err">ì†Œë¹„ì</span><span class="p">,</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                  </span><span class="err">â”‚</span><span class="w">                     </span><span class="err">â”‚</span><span class="w"> </span><span class="err">ì—°ê²°</span><span class="w"> </span><span class="err">í’€</span><span class="w"> </span><span class="err">ê´€ë¦¬</span><span class="w">        </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="3-monitor">3. ëª¨ë‹ˆí„° (Monitor)<a class="header-link" href="#3-monitor" title="Permanent link">&para;</a></h2>
<h3 id="_9">ê°œë…<a class="header-link" href="#_9" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">                    </span><span class="n">ëª¨ë‹ˆí„°</span><span class="w"> </span><span class="p">(</span><span class="n">Monitor</span><span class="p">)</span><span class="w">                      </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="n">ëª¨ë‹ˆí„°</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ë™ê¸°í™”ë¥¼</span><span class="w"> </span><span class="n">ìº¡ìŠí™”í•œ</span><span class="w"> </span><span class="n">ê³ ê¸‰</span><span class="w"> </span><span class="n">ì¶”ìƒí™”</span><span class="w">                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="n">ê³µìœ </span><span class="w"> </span><span class="n">ë°ì´í„°</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ì—°ì‚°</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ë™ê¸°í™”ë¥¼</span><span class="w"> </span><span class="n">í•˜ë‚˜ë¡œ</span><span class="w"> </span><span class="n">ë¬¶ìŒ</span><span class="w">      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="n">í•œ</span><span class="w"> </span><span class="n">ë²ˆì—</span><span class="w"> </span><span class="n">í•˜ë‚˜ì˜</span><span class="w"> </span><span class="n">í”„ë¡œì„¸ìŠ¤ë§Œ</span><span class="w"> </span><span class="n">ëª¨ë‹ˆí„°</span><span class="w"> </span><span class="n">ë‚´ë¶€</span><span class="w"> </span><span class="n">ì§„ì…</span><span class="w">     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                   </span><span class="n">ëª¨ë‹ˆí„°</span><span class="w">                        </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">         </span><span class="n">ê³µìœ </span><span class="w"> </span><span class="n">ë°ì´í„°</span><span class="w"> </span><span class="p">(</span><span class="n">Private</span><span class="p">)</span><span class="w">           </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">         </span><span class="nc">int</span><span class="w"> </span><span class="n">counter</span><span class="p">;</span><span class="w">                    </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">         </span><span class="nc">int</span><span class="w"> </span><span class="n">buffer</span><span class="o">[</span><span class="n">N</span><span class="o">]</span><span class="p">;</span><span class="w">                  </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">         </span><span class="n">ì¡°ê±´</span><span class="w"> </span><span class="n">ë³€ìˆ˜</span><span class="w">                        </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">         </span><span class="k">condition</span><span class="w"> </span><span class="n">notEmpty</span><span class="p">;</span><span class="w">             </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">         </span><span class="k">condition</span><span class="w"> </span><span class="n">notFull</span><span class="p">;</span><span class="w">              </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">         </span><span class="n">í”„ë¡œì‹œì €</span><span class="w"> </span><span class="p">(</span><span class="k">Public</span><span class="p">)</span><span class="w">               </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">         </span><span class="n">void</span><span class="w"> </span><span class="k">insert</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">item</span><span class="p">);</span><span class="w">          </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">         </span><span class="nc">int</span><span class="w"> </span><span class="n">remove</span><span class="p">();</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â†</span><span class="w"> </span><span class="n">ì§„ì…</span><span class="w"> </span><span class="n">í</span><span class="w"> </span><span class="p">(</span><span class="n">Entry</span><span class="w"> </span><span class="n">Queue</span><span class="p">)</span><span class="w">              </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="nl">íŠ¹ì§•</span><span class="p">:</span><span class="w">                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">ì»´íŒŒì¼ëŸ¬ê°€</span><span class="w"> </span><span class="n">ìƒí˜¸</span><span class="w"> </span><span class="n">ë°°ì œë¥¼</span><span class="w"> </span><span class="n">ìë™</span><span class="w"> </span><span class="n">ë³´ì¥</span><span class="w">                     </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">Java</span><span class="w"> </span><span class="n">synchronized</span><span class="p">,</span><span class="w"> </span><span class="n">Python</span><span class="w"> </span><span class="n">Lock</span><span class="w"> </span><span class="n">ë“±</span><span class="w">                   </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="java">Javaì—ì„œì˜ ëª¨ë‹ˆí„°<a class="header-link" href="#java" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// Java synchronizedë¥¼ ì´ìš©í•œ ëª¨ë‹ˆí„°</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Counter</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// synchronized ë©”ì„œë“œ = ëª¨ë‹ˆí„°ì˜ í”„ë¡œì‹œì €</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">synchronized</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">increment</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">count</span><span class="o">++</span><span class="p">;</span><span class="w">  </span><span class="c1">// ìë™ìœ¼ë¡œ ìƒí˜¸ ë°°ì œ ë³´ì¥</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">synchronized</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">decrement</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">count</span><span class="o">--</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">synchronized</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">getCount</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">count</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// ì‚¬ìš© ì˜ˆ</span>
<span class="n">Counter</span><span class="w"> </span><span class="n">counter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Counter</span><span class="p">();</span>

<span class="n">Thread</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Thread</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1000000</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">counter</span><span class="p">.</span><span class="na">increment</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">});</span>

<span class="n">Thread</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Thread</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1000000</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">counter</span><span class="p">.</span><span class="na">increment</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">});</span>

<span class="n">t1</span><span class="p">.</span><span class="na">start</span><span class="p">();</span><span class="w"> </span><span class="n">t2</span><span class="p">.</span><span class="na">start</span><span class="p">();</span>
<span class="n">t1</span><span class="p">.</span><span class="na">join</span><span class="p">();</span><span class="w"> </span><span class="n">t2</span><span class="p">.</span><span class="na">join</span><span class="p">();</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">counter</span><span class="p">.</span><span class="na">getCount</span><span class="p">());</span><span class="w">  </span><span class="c1">// 2000000</span>
</code></pre></div>

<hr />
<h2 id="4-condition-variable">4. ì¡°ê±´ ë³€ìˆ˜ (Condition Variable)<a class="header-link" href="#4-condition-variable" title="Permanent link">&para;</a></h2>
<h3 id="_10">ê°œë…<a class="header-link" href="#_10" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">               </span><span class="err">ì¡°ê±´</span><span class="w"> </span><span class="err">ë³€ìˆ˜</span><span class="w"> </span><span class="p">(</span><span class="n">Condition</span><span class="w"> </span><span class="n">Variable</span><span class="p">)</span><span class="w">             </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">ì¡°ê±´</span><span class="w"> </span><span class="err">ë³€ìˆ˜</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">íŠ¹ì •</span><span class="w"> </span><span class="err">ì¡°ê±´ì´</span><span class="w"> </span><span class="err">ì°¸ì´</span><span class="w"> </span><span class="err">ë </span><span class="w"> </span><span class="err">ë•Œê¹Œì§€</span><span class="w"> </span><span class="err">ëŒ€ê¸°í•˜ê²Œ</span><span class="w"> </span><span class="err">í•˜ëŠ”</span><span class="w"> </span><span class="err">ë„êµ¬â”‚</span>
<span class="err">â”‚</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="err">ë®¤í…ìŠ¤ì™€</span><span class="w"> </span><span class="err">í•¨ê»˜</span><span class="w"> </span><span class="err">ì‚¬ìš©</span><span class="w">                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">ì—°ì‚°</span><span class="p">:</span><span class="w">                                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">wait</span><span class="p">(</span><span class="n">cond</span><span class="p">,</span><span class="w"> </span><span class="n">mutex</span><span class="p">):</span><span class="w">                                  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="mf">1.</span><span class="w"> </span><span class="err">ë®¤í…ìŠ¤</span><span class="w"> </span><span class="err">í•´ì œ</span><span class="w">                                      </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="mf">2.</span><span class="w"> </span><span class="err">ì¡°ê±´</span><span class="w"> </span><span class="err">ë³€ìˆ˜ì—ì„œ</span><span class="w"> </span><span class="err">ëŒ€ê¸°</span><span class="w">                               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="mf">3.</span><span class="w"> </span><span class="err">ê¹¨ì–´ë‚˜ë©´</span><span class="w"> </span><span class="err">ë®¤í…ìŠ¤</span><span class="w"> </span><span class="err">ì¬íšë“</span><span class="w">                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="k">signal</span><span class="p">(</span><span class="n">cond</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">pthread_cond_signal</span><span class="p">():</span><span class="w">               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="err">ëŒ€ê¸°</span><span class="w"> </span><span class="err">ì¤‘ì¸</span><span class="w"> </span><span class="err">ìŠ¤ë ˆë“œ</span><span class="w"> </span><span class="err">í•˜ë‚˜</span><span class="w"> </span><span class="err">ê¹¨ì›€</span><span class="w">                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â€¢</span><span class="w"> </span><span class="n">broadcast</span><span class="p">(</span><span class="n">cond</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">pthread_cond_broadcast</span><span class="p">():</span><span class="w">         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="err">ëŒ€ê¸°</span><span class="w"> </span><span class="err">ì¤‘ì¸</span><span class="w"> </span><span class="err">ëª¨ë“ </span><span class="w"> </span><span class="err">ìŠ¤ë ˆë“œ</span><span class="w"> </span><span class="err">ê¹¨ì›€</span><span class="w">                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                   </span><span class="err">ë™ì‘</span><span class="w"> </span><span class="err">íë¦„</span><span class="w">                      </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">                                                 </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">Thread</span><span class="w"> </span><span class="n">A</span><span class="w">           </span><span class="n">Thread</span><span class="w"> </span><span class="n">B</span><span class="w">                   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="w">           </span><span class="err">â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="w">                 </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">lock</span><span class="p">(</span><span class="n">mutex</span><span class="p">)</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="err">ì¡°ê±´</span><span class="p">)</span><span class="w">                                 </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">      </span><span class="n">wait</span><span class="p">(</span><span class="n">cond</span><span class="p">)</span><span class="w"> </span><span class="err">â”€â”€â”€â”</span><span class="w">                          </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span><span class="w"> </span><span class="err">ë®¤í…ìŠ¤í•´ì œ</span><span class="w"> </span><span class="err">â”‚</span><span class="w">                          </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span><span class="w"> </span><span class="err">ëŒ€ê¸°</span><span class="w">    </span><span class="err">â”‚</span><span class="w">  </span><span class="n">lock</span><span class="p">(</span><span class="n">mutex</span><span class="p">)</span><span class="w">             </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span><span class="w">  </span><span class="err">ì¡°ê±´</span><span class="w"> </span><span class="err">ë³€ê²½</span><span class="w">                 </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚</span><span class="w">        </span><span class="err">â”‚</span><span class="w">  </span><span class="k">signal</span><span class="p">(</span><span class="n">cond</span><span class="p">)</span><span class="w">             </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">          </span><span class="err">â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”‚</span><span class="w">  </span><span class="n">unlock</span><span class="p">(</span><span class="n">mutex</span><span class="p">)</span><span class="w">            </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">ë®¤í…ìŠ¤ì¬íšë“</span><span class="w">                                   </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="err">ì„ê³„</span><span class="w"> </span><span class="err">êµ¬ì—­</span><span class="w"> </span><span class="err">ê³„ì†</span><span class="w">                                 </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="n">unlock</span><span class="p">(</span><span class="n">mutex</span><span class="p">)</span><span class="w">                                 </span><span class="err">â”‚</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">    </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<h3 id="pthread">pthread ì¡°ê±´ ë³€ìˆ˜ ì‚¬ìš©<a class="header-link" href="#pthread" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pthread.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdbool.h&gt;</span>

<span class="n">pthread_mutex_t</span><span class="w"> </span><span class="n">mutex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PTHREAD_MUTEX_INITIALIZER</span><span class="p">;</span>
<span class="n">pthread_cond_t</span><span class="w"> </span><span class="n">cond</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PTHREAD_COND_INITIALIZER</span><span class="p">;</span>
<span class="kt">bool</span><span class="w"> </span><span class="n">ready</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="nf">producer</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">pthread_mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>

<span class="w">    </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span>
<span class="w">    </span><span class="n">ready</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;ìƒì‚°ì: ë°ì´í„° ì¤€ë¹„ ì™„ë£Œ</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="n">pthread_cond_signal</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cond</span><span class="p">);</span><span class="w">  </span><span class="c1">// ì†Œë¹„ì ê¹¨ì›€</span>
<span class="w">    </span><span class="n">pthread_mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="nf">consumer</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">pthread_mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>

<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">ready</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// while ë£¨í”„ ì‚¬ìš©! (spurious wakeup ë°©ì§€)</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;ì†Œë¹„ì: ë°ì´í„° ëŒ€ê¸° ì¤‘...</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">pthread_cond_wait</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cond</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;ì†Œë¹„ì: ë°ì´í„° ìˆ˜ì‹  = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="p">);</span>
<span class="w">    </span><span class="n">pthread_mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">pthread_t</span><span class="w"> </span><span class="n">prod</span><span class="p">,</span><span class="w"> </span><span class="n">cons</span><span class="p">;</span>

<span class="w">    </span><span class="n">pthread_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cons</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">consumer</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<span class="w">    </span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w">  </span><span class="c1">// ì†Œë¹„ìê°€ ë¨¼ì € ëŒ€ê¸°í•˜ë„ë¡</span>
<span class="w">    </span><span class="n">pthread_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">prod</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">producer</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">    </span><span class="n">pthread_join</span><span class="p">(</span><span class="n">prod</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<span class="w">    </span><span class="n">pthread_join</span><span class="p">(</span><span class="n">cons</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="spurious-wakeup">Spurious Wakeup<a class="header-link" href="#spurious-wakeup" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span><span class="w">               </span><span class="n">Spurious</span><span class="w"> </span><span class="n">Wakeup</span><span class="w"> </span><span class="p">(</span><span class="err">ê°€ì§œ</span><span class="w"> </span><span class="err">ê¹¨ìš°ê¸°</span><span class="p">)</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">ë¬¸ì œ</span><span class="p">:</span><span class="w"> </span><span class="k">signal</span><span class="w"> </span><span class="err">ì—†ì´</span><span class="w"> </span><span class="n">waitì—ì„œ</span><span class="w"> </span><span class="err">ê¹¨ì–´ë‚ </span><span class="w"> </span><span class="err">ìˆ˜</span><span class="w"> </span><span class="err">ìˆìŒ</span><span class="w">               </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">ì˜ëª»ëœ</span><span class="w"> </span><span class="err">ì½”ë“œ</span><span class="p">:</span><span class="w">                                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">ready</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">                                    </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">      </span><span class="n">pthread_cond_wait</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cond</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="err">ìœ„í—˜</span><span class="o">!</span><span class="w"> </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="p">}</span><span class="w">                                                </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="err">ì¡°ê±´ì´</span><span class="w"> </span><span class="err">ì°¸ì´</span><span class="w"> </span><span class="err">ì•„ë‹Œë°</span><span class="w"> </span><span class="err">ì‹¤í–‰ë </span><span class="w"> </span><span class="err">ìˆ˜</span><span class="w"> </span><span class="err">ìˆìŒ</span><span class="w">              </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">ì˜¬ë°”ë¥¸</span><span class="w"> </span><span class="err">ì½”ë“œ</span><span class="p">:</span><span class="w">                                           </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">ready</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">                                 </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">      </span><span class="n">pthread_cond_wait</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cond</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span><span class="w">            </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="p">}</span><span class="w">                                                </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="err">ê¹¨ì–´ë‚˜ë©´</span><span class="w"> </span><span class="err">ì¡°ê±´ì„</span><span class="w"> </span><span class="err">ë‹¤ì‹œ</span><span class="w"> </span><span class="err">í™•ì¸</span><span class="w">                      </span><span class="err">â”‚</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><span class="w">  </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">  </span><span class="err">ê·œì¹™</span><span class="p">:</span><span class="w"> </span><span class="err">í•­ìƒ</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="err">ë£¨í”„</span><span class="w"> </span><span class="err">ì•ˆì—ì„œ</span><span class="w"> </span><span class="n">wait</span><span class="p">()</span><span class="w"> </span><span class="err">í˜¸ì¶œ</span><span class="o">!</span><span class="w">              </span><span class="err">â”‚</span>
<span class="err">â”‚</span><span class="w">                                                         </span><span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre></div>

<hr />
<h2 id="5">5. ê³ ì „ ë™ê¸°í™” ë¬¸ì œ<a class="header-link" href="#5" title="Permanent link">&para;</a></h2>
<h3 id="-bounded-buffer">ìƒì‚°ì-ì†Œë¹„ì ë¬¸ì œ (Bounded Buffer)<a class="header-link" href="#-bounded-buffer" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ìƒì‚°ì-ì†Œë¹„ì ë¬¸ì œ                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  ì„¤ì •:                                                  â”‚
â”‚  â€¢ ê³ ì • í¬ê¸° ë²„í¼ (Nê°œ)                                 â”‚
â”‚  â€¢ ìƒì‚°ì: ë²„í¼ì— ì•„ì´í…œ ì¶”ê°€                           â”‚
â”‚  â€¢ ì†Œë¹„ì: ë²„í¼ì—ì„œ ì•„ì´í…œ ì œê±°                         â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â”‚  ìƒì‚°ì â”€â”€â–¶ [  ë²„í¼  ] â”€â”€â–¶ ì†Œë¹„ì                â”‚  â”‚
â”‚  â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚  â”‚
â”‚  â”‚           â”‚ ? â”‚ ? â”‚ ? â”‚                          â”‚  â”‚
â”‚  â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚  â”‚
â”‚  â”‚           N = 3                                  â”‚  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚  ë™ê¸°í™” ìš”êµ¬ì‚¬í•­:                                       â”‚
â”‚  1. ë²„í¼ê°€ ê°€ë“ ì°¨ë©´ ìƒì‚°ì ëŒ€ê¸°                        â”‚
â”‚  2. ë²„í¼ê°€ ë¹„ì–´ìˆìœ¼ë©´ ì†Œë¹„ì ëŒ€ê¸°                       â”‚
â”‚  3. ë²„í¼ ì ‘ê·¼ ì‹œ ìƒí˜¸ ë°°ì œ                             â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pthread.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;semaphore.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span>

<span class="cp">#define BUFFER_SIZE 5</span>

<span class="kt">int</span><span class="w"> </span><span class="n">buffer</span><span class="p">[</span><span class="n">BUFFER_SIZE</span><span class="p">];</span>
<span class="kt">int</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="n">sem_t</span><span class="w"> </span><span class="n">empty</span><span class="p">;</span><span class="w">  </span><span class="c1">// ë¹ˆ ìŠ¬ë¡¯ ìˆ˜ (ì´ˆê¸°ê°’: BUFFER_SIZE)</span>
<span class="n">sem_t</span><span class="w"> </span><span class="n">full</span><span class="p">;</span><span class="w">   </span><span class="c1">// ì°¬ ìŠ¬ë¡¯ ìˆ˜ (ì´ˆê¸°ê°’: 0)</span>
<span class="n">pthread_mutex_t</span><span class="w"> </span><span class="n">mutex</span><span class="p">;</span>

<span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="nf">producer</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>

<span class="w">        </span><span class="n">sem_wait</span><span class="p">(</span><span class="o">&amp;</span><span class="n">empty</span><span class="p">);</span><span class="w">           </span><span class="c1">// ë¹ˆ ìŠ¬ë¡¯ ëŒ€ê¸°</span>
<span class="w">        </span><span class="n">pthread_mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>

<span class="w">        </span><span class="n">buffer</span><span class="p">[</span><span class="n">in</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">item</span><span class="p">;</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;ìƒì‚°: %d (ìœ„ì¹˜ %d)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">item</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="p">);</span>
<span class="w">        </span><span class="n">in</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">in</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">BUFFER_SIZE</span><span class="p">;</span>

<span class="w">        </span><span class="n">pthread_mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
<span class="w">        </span><span class="n">sem_post</span><span class="p">(</span><span class="o">&amp;</span><span class="n">full</span><span class="p">);</span><span class="w">            </span><span class="c1">// ì°¬ ìŠ¬ë¡¯ ì¦ê°€</span>

<span class="w">        </span><span class="n">usleep</span><span class="p">(</span><span class="mi">100000</span><span class="p">);</span><span class="w">  </span><span class="c1">// 0.1ì´ˆ</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="nf">consumer</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">sem_wait</span><span class="p">(</span><span class="o">&amp;</span><span class="n">full</span><span class="p">);</span><span class="w">            </span><span class="c1">// ì°¬ ìŠ¬ë¡¯ ëŒ€ê¸°</span>
<span class="w">        </span><span class="n">pthread_mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>

<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">buffer</span><span class="p">[</span><span class="n">out</span><span class="p">];</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;ì†Œë¹„: %d (ìœ„ì¹˜ %d)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">item</span><span class="p">,</span><span class="w"> </span><span class="n">out</span><span class="p">);</span>
<span class="w">        </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">out</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">BUFFER_SIZE</span><span class="p">;</span>

<span class="w">        </span><span class="n">pthread_mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
<span class="w">        </span><span class="n">sem_post</span><span class="p">(</span><span class="o">&amp;</span><span class="n">empty</span><span class="p">);</span><span class="w">           </span><span class="c1">// ë¹ˆ ìŠ¬ë¡¯ ì¦ê°€</span>

<span class="w">        </span><span class="n">usleep</span><span class="p">(</span><span class="mi">150000</span><span class="p">);</span><span class="w">  </span><span class="c1">// 0.15ì´ˆ</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">pthread_t</span><span class="w"> </span><span class="n">prod</span><span class="p">,</span><span class="w"> </span><span class="n">cons</span><span class="p">;</span>

<span class="w">    </span><span class="n">sem_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">empty</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">BUFFER_SIZE</span><span class="p">);</span>
<span class="w">    </span><span class="n">sem_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">full</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="n">pthread_mutex_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">    </span><span class="n">pthread_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">prod</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">producer</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<span class="w">    </span><span class="n">pthread_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cons</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">consumer</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">    </span><span class="n">pthread_join</span><span class="p">(</span><span class="n">prod</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<span class="w">    </span><span class="n">pthread_join</span><span class="p">(</span><span class="n">cons</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="-readers-writers">ë…ì-ì €ì ë¬¸ì œ (Readers-Writers)<a class="header-link" href="#-readers-writers" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 ë…ì-ì €ì ë¬¸ì œ                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  ì„¤ì •:                                                  â”‚
â”‚  â€¢ ê³µìœ  ë°ì´í„°ë² ì´ìŠ¤                                    â”‚
â”‚  â€¢ ë…ì (Reader): ë°ì´í„° ì½ê¸°ë§Œ í•¨                      â”‚
â”‚  â€¢ ì €ì (Writer): ë°ì´í„° ìˆ˜ì •                           â”‚
â”‚                                                         â”‚
â”‚  ê·œì¹™:                                                  â”‚
â”‚  â€¢ ì—¬ëŸ¬ ë…ìê°€ ë™ì‹œì— ì½ê¸° ê°€ëŠ¥                         â”‚
â”‚  â€¢ ì €ìê°€ ì“°ëŠ” ë™ì•ˆ ë‹¤ë¥¸ ì ‘ê·¼ ë¶ˆê°€                      â”‚
â”‚  â€¢ ì €ìëŠ” ë°°íƒ€ì  ì ‘ê·¼ í•„ìš”                              â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â”‚  ë…ì1 â”€â”€ì½ê¸°â”€â”€â”                                  â”‚  â”‚
â”‚  â”‚  ë…ì2 â”€â”€ì½ê¸°â”€â”€â”¼â”€â”€â–¶ [ ë°ì´í„°ë² ì´ìŠ¤ ]              â”‚  â”‚
â”‚  â”‚  ë…ì3 â”€â”€ì½ê¸°â”€â”€â”˜          â†‘                       â”‚  â”‚
â”‚  â”‚                          â”‚                       â”‚  â”‚
â”‚  â”‚  ì €ì  â”€â”€â”€â”€â”€â”€â”€â”€ì“°ê¸°â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚  â”‚
â”‚  â”‚       (ë°°íƒ€ì  ì ‘ê·¼)                               â”‚  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pthread.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span>

<span class="n">pthread_mutex_t</span><span class="w"> </span><span class="n">mutex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PTHREAD_MUTEX_INITIALIZER</span><span class="p">;</span>
<span class="n">pthread_mutex_t</span><span class="w"> </span><span class="n">write_lock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PTHREAD_MUTEX_INITIALIZER</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">read_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">shared_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="nf">reader</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="p">)</span><span class="n">arg</span><span class="p">;</span>

<span class="w">    </span><span class="n">pthread_mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
<span class="w">    </span><span class="n">read_count</span><span class="o">++</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_count</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">pthread_mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">write_lock</span><span class="p">);</span><span class="w">  </span><span class="c1">// ì²« ë…ìê°€ ì €ì ì°¨ë‹¨</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">pthread_mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// ì½ê¸° ìˆ˜í–‰ (ì„ê³„ êµ¬ì—­ ì•„ë‹˜, ì—¬ëŸ¬ ë…ì ë™ì‹œ ê°€ëŠ¥)</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;ë…ì %d: ë°ì´í„° = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">shared_data</span><span class="p">);</span>
<span class="w">    </span><span class="n">usleep</span><span class="p">(</span><span class="mi">100000</span><span class="p">);</span>

<span class="w">    </span><span class="n">pthread_mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
<span class="w">    </span><span class="n">read_count</span><span class="o">--</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_count</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">pthread_mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">write_lock</span><span class="p">);</span><span class="w">  </span><span class="c1">// ë§ˆì§€ë§‰ ë…ìê°€ ì €ì í—ˆìš©</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">pthread_mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="nf">writer</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="p">)</span><span class="n">arg</span><span class="p">;</span>

<span class="w">    </span><span class="n">pthread_mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">write_lock</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// ì“°ê¸° ìˆ˜í–‰ (ë°°íƒ€ì  ì ‘ê·¼)</span>
<span class="w">    </span><span class="n">shared_data</span><span class="o">++</span><span class="p">;</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;ì €ì %d: ë°ì´í„°ë¥¼ %dë¡œ ë³€ê²½</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">shared_data</span><span class="p">);</span>
<span class="w">    </span><span class="n">usleep</span><span class="p">(</span><span class="mi">200000</span><span class="p">);</span>

<span class="w">    </span><span class="n">pthread_mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">write_lock</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">pthread_t</span><span class="w"> </span><span class="n">readers</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span><span class="w"> </span><span class="n">writers</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ids</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">};</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">wids</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">};</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">        </span><span class="n">pthread_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">readers</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">reader</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">ids</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">        </span><span class="n">pthread_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">writers</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">wids</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">        </span><span class="n">pthread_join</span><span class="p">(</span><span class="n">readers</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">        </span><span class="n">pthread_join</span><span class="p">(</span><span class="n">writers</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="dining-philosophers">ì‹ì‚¬í•˜ëŠ” ì² í•™ì ë¬¸ì œ (Dining Philosophers)<a class="header-link" href="#dining-philosophers" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ì‹ì‚¬í•˜ëŠ” ì² í•™ì ë¬¸ì œ                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  ì„¤ì •:                                                  â”‚
â”‚  â€¢ 5ëª…ì˜ ì² í•™ì, 5ê°œì˜ ì “ê°€ë½                           â”‚
â”‚  â€¢ ê° ì² í•™ìëŠ” ìƒê°í•˜ê±°ë‚˜ ë¨¹ìŒ                          â”‚
â”‚  â€¢ ë¨¹ìœ¼ë ¤ë©´ ì–‘ìª½ ì “ê°€ë½ì´ í•„ìš”                          â”‚
â”‚                                                         â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚           â”‚          P0              â”‚                 â”‚
â”‚           â”‚      â—‡       â—‡          â”‚                 â”‚
â”‚           â”‚     C4       C0          â”‚                 â”‚
â”‚           â”‚                          â”‚                 â”‚
â”‚        P4 â—‡                      â—‡ P1â”‚                 â”‚
â”‚           â”‚   C3             C1     â”‚                 â”‚
â”‚           â”‚                          â”‚                 â”‚
â”‚        P3 â—‡â”€â”€â”€â”€â”€â”€C2â”€â”€â”€â”€â”€â”€â—‡ P2       â”‚                 â”‚
â”‚           â”‚                          â”‚                 â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                         â”‚
â”‚  ë¬¸ì œ: ë°ë“œë½ ë°œìƒ ê°€ëŠ¥!                                â”‚
â”‚  ëª¨ë“  ì² í•™ìê°€ ì™¼ìª½ ì “ê°€ë½ì„ ì§‘ìœ¼ë©´ â†’ ì•„ë¬´ë„ ëª» ë¨¹ìŒ     â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pthread.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span>

<span class="cp">#define N 5</span>
<span class="cp">#define LEFT(i) (i)</span>
<span class="cp">#define RIGHT(i) ((i + 1) % N)</span>

<span class="n">pthread_mutex_t</span><span class="w"> </span><span class="n">chopsticks</span><span class="p">[</span><span class="n">N</span><span class="p">];</span>

<span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="nf">philosopher</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="p">)</span><span class="n">arg</span><span class="p">;</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ìƒê°í•˜ê¸°</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;ì² í•™ì %d: ìƒê° ì¤‘...</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="p">);</span>
<span class="w">        </span><span class="n">usleep</span><span class="p">(</span><span class="mi">100000</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// ë°ë“œë½ ë°©ì§€: ì§ìˆ˜ ì² í•™ìëŠ” ì™¼ìª½ ë¨¼ì €, í™€ìˆ˜ëŠ” ì˜¤ë¥¸ìª½ ë¨¼ì €</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">pthread_mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">chopsticks</span><span class="p">[</span><span class="n">LEFT</span><span class="p">(</span><span class="n">id</span><span class="p">)]);</span>
<span class="w">            </span><span class="n">pthread_mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">chopsticks</span><span class="p">[</span><span class="n">RIGHT</span><span class="p">(</span><span class="n">id</span><span class="p">)]);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">pthread_mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">chopsticks</span><span class="p">[</span><span class="n">RIGHT</span><span class="p">(</span><span class="n">id</span><span class="p">)]);</span>
<span class="w">            </span><span class="n">pthread_mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">chopsticks</span><span class="p">[</span><span class="n">LEFT</span><span class="p">(</span><span class="n">id</span><span class="p">)]);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// ë¨¹ê¸°</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;ì² í•™ì %d: ë¨¹ëŠ” ì¤‘...</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="p">);</span>
<span class="w">        </span><span class="n">usleep</span><span class="p">(</span><span class="mi">200000</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// ì “ê°€ë½ ë‚´ë ¤ë†“ê¸°</span>
<span class="w">        </span><span class="n">pthread_mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">chopsticks</span><span class="p">[</span><span class="n">LEFT</span><span class="p">(</span><span class="n">id</span><span class="p">)]);</span>
<span class="w">        </span><span class="n">pthread_mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">chopsticks</span><span class="p">[</span><span class="n">RIGHT</span><span class="p">(</span><span class="n">id</span><span class="p">)]);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">pthread_t</span><span class="w"> </span><span class="n">philosophers</span><span class="p">[</span><span class="n">N</span><span class="p">];</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ids</span><span class="p">[</span><span class="n">N</span><span class="p">];</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">        </span><span class="n">pthread_mutex_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">chopsticks</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">ids</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="w">        </span><span class="n">pthread_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">philosophers</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">philosopher</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">ids</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">        </span><span class="n">pthread_join</span><span class="p">(</span><span class="n">philosophers</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h2 id="6">6. ì—°ìŠµ ë¬¸ì œ<a class="header-link" href="#6" title="Permanent link">&para;</a></h2>
<h3 id="1">ë¬¸ì œ 1: ì„¸ë§ˆí¬ì–´ ê°’<a class="header-link" href="#1" title="Permanent link">&para;</a></h3>
<p>ì´ˆê¸°ê°’ì´ 5ì¸ ì„¸ë§ˆí¬ì–´ì— ëŒ€í•´ P, P, V, P, P, P ì—°ì‚°ì„ ìˆœì„œëŒ€ë¡œ ìˆ˜í–‰í•˜ë©´ ìµœì¢… ì„¸ë§ˆí¬ì–´ ê°’ì€?</p>
<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

**ì—°ì‚° ìˆœì„œì™€ ê°’ ë³€í™”:**
- ì´ˆê¸°ê°’: 5
- P: 5 - 1 = 4
- P: 4 - 1 = 3
- V: 3 + 1 = 4
- P: 4 - 1 = 3
- P: 3 - 1 = 2
- P: 2 - 1 = 1

**ìµœì¢… ê°’: 1**

</details>

<h3 id="2-">ë¬¸ì œ 2: ìƒì‚°ì-ì†Œë¹„ì<a class="header-link" href="#2-" title="Permanent link">&para;</a></h3>
<p>ìƒì‚°ì-ì†Œë¹„ì ë¬¸ì œì—ì„œ emptyì™€ full ì„¸ë§ˆí¬ì–´ì˜ ì—­í• ì„ ì„¤ëª…í•˜ê³ , ìˆœì„œê°€ ì¤‘ìš”í•œ ì´ìœ ë¥¼ ì„¤ëª…í•˜ì„¸ìš”.</p>
<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

**empty ì„¸ë§ˆí¬ì–´:**
- ë¹ˆ ë²„í¼ ìŠ¬ë¡¯ ìˆ˜ ê´€ë¦¬
- ì´ˆê¸°ê°’: ë²„í¼ í¬ê¸° (N)
- ìƒì‚°ìê°€ P ì—°ì‚° (ìŠ¬ë¡¯ í• ë‹¹)
- ì†Œë¹„ìê°€ V ì—°ì‚° (ìŠ¬ë¡¯ ë°˜í™˜)

**full ì„¸ë§ˆí¬ì–´:**
- ì±„ì›Œì§„ ë²„í¼ ìŠ¬ë¡¯ ìˆ˜ ê´€ë¦¬
- ì´ˆê¸°ê°’: 0
- ìƒì‚°ìê°€ V ì—°ì‚° (ì•„ì´í…œ ì¶”ê°€ ì•Œë¦¼)
- ì†Œë¹„ìê°€ P ì—°ì‚° (ì•„ì´í…œ ëŒ€ê¸°)

**ìˆœì„œê°€ ì¤‘ìš”í•œ ì´ìœ :**
- ì„¸ë§ˆí¬ì–´ P ì—°ì‚°ê³¼ ë®¤í…ìŠ¤ íšë“ ìˆœì„œ
- ì˜ëª»ëœ ìˆœì„œ: mutex lock â†’ sem_wait â†’ ë°ë“œë½ ê°€ëŠ¥
- ì˜¬ë°”ë¥¸ ìˆœì„œ: sem_wait â†’ mutex lock â†’ ë°ë“œë½ ë°©ì§€

</details>

<h3 id="3">ë¬¸ì œ 3: ëª¨ë‹ˆí„° êµ¬í˜„<a class="header-link" href="#3" title="Permanent link">&para;</a></h3>
<p>ë‹¤ìŒ ì„¸ë§ˆí¬ì–´ ì½”ë“œë¥¼ ëª¨ë‹ˆí„°(ì¡°ê±´ ë³€ìˆ˜) ë°©ì‹ìœ¼ë¡œ ë³€í™˜í•˜ì„¸ìš”.</p>
<div class="highlight"><pre><span></span><code><span class="n">sem_t</span><span class="w"> </span><span class="n">sem</span><span class="p">;</span>
<span class="n">sem_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sem</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>

<span class="c1">// ìƒì‚°ì</span>
<span class="n">sem_post</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sem</span><span class="p">);</span>

<span class="c1">// ì†Œë¹„ì</span>
<span class="n">sem_wait</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sem</span><span class="p">);</span>
</code></pre></div>

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>


<div class="highlight"><pre><span></span><code><span class="n">pthread_mutex_t</span><span class="w"> </span><span class="n">mutex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PTHREAD_MUTEX_INITIALIZER</span><span class="p">;</span>
<span class="n">pthread_cond_t</span><span class="w"> </span><span class="n">cond</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PTHREAD_COND_INITIALIZER</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="c1">// ìƒì‚°ì</span>
<span class="n">pthread_mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
<span class="n">count</span><span class="o">++</span><span class="p">;</span>
<span class="n">pthread_cond_signal</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cond</span><span class="p">);</span>
<span class="n">pthread_mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>

<span class="c1">// ì†Œë¹„ì</span>
<span class="n">pthread_mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
<span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">count</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">pthread_cond_wait</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cond</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">count</span><span class="o">--</span><span class="p">;</span>
<span class="n">pthread_mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
</code></pre></div>



</details>

<h3 id="4">ë¬¸ì œ 4: ì‹ì‚¬í•˜ëŠ” ì² í•™ì ë°ë“œë½<a class="header-link" href="#4" title="Permanent link">&para;</a></h3>
<p>ì‹ì‚¬í•˜ëŠ” ì² í•™ì ë¬¸ì œì—ì„œ ë°ë“œë½ì´ ë°œìƒí•˜ëŠ” ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì„¤ëª…í•˜ê³ , ì„¸ ê°€ì§€ í•´ê²° ë°©ë²•ì„ ì œì‹œí•˜ì„¸ìš”.</p>
<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

**ë°ë“œë½ ì‹œë‚˜ë¦¬ì˜¤:**
ëª¨ë“  ì² í•™ìê°€ ë™ì‹œì— ì™¼ìª½ ì “ê°€ë½ì„ ì§‘ìœ¼ë©´:
- P0: C0 ë³´ìœ , C4 ëŒ€ê¸°
- P1: C1 ë³´ìœ , C0 ëŒ€ê¸°
- P2: C2 ë³´ìœ , C1 ëŒ€ê¸°
- P3: C3 ë³´ìœ , C2 ëŒ€ê¸°
- P4: C4 ë³´ìœ , C3 ëŒ€ê¸°
â†’ ìˆœí™˜ ëŒ€ê¸° â†’ ë°ë“œë½!

**í•´ê²° ë°©ë²•:**

1. **ë¹„ëŒ€ì¹­ ë½ íšë“:**
   - ì§ìˆ˜ ì² í•™ì: ì™¼ìª½ ë¨¼ì €
   - í™€ìˆ˜ ì² í•™ì: ì˜¤ë¥¸ìª½ ë¨¼ì €
   - ìˆœí™˜ ëŒ€ê¸° ê¹¨ì§

2. **ë™ì‹œ ì “ê°€ë½ íšë“:**
   - ì–‘ìª½ ì “ê°€ë½ì„ ë™ì‹œì— íšë“í•  ìˆ˜ ìˆì„ ë•Œë§Œ ì§‘ìŒ
   - ì¤‘ì•™ ë®¤í…ìŠ¤ë¡œ ë³´í˜¸

3. **ìµœëŒ€ N-1ëª… ì œí•œ:**
   - ì„¸ë§ˆí¬ì–´ë¡œ ìµœëŒ€ 4ëª…ë§Œ ì‹íƒì— ì•‰ë„ë¡ ì œí•œ
   - ìµœì†Œ í•œ ëª…ì€ ì–‘ìª½ ì “ê°€ë½ ì‚¬ìš© ê°€ëŠ¥

</details>

<h3 id="5_1">ë¬¸ì œ 5: ì¡°ê±´ ë³€ìˆ˜ ì‚¬ìš©<a class="header-link" href="#5_1" title="Permanent link">&para;</a></h3>
<p>ì™œ ì¡°ê±´ ë³€ìˆ˜ì˜ wait() í˜¸ì¶œì„ while ë£¨í”„ ì•ˆì—ì„œ í•´ì•¼ í•˜ëŠ”ì§€ ì„¤ëª…í•˜ì„¸ìš”.</p>
<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

**ì´ìœ  1: Spurious Wakeup (ê°€ì§œ ê¹¨ìš°ê¸°)**
- ì‹œìŠ¤í…œì— ì˜í•´ signal ì—†ì´ ê¹¨ì–´ë‚  ìˆ˜ ìˆìŒ
- ì¡°ê±´ì„ ë‹¤ì‹œ í™•ì¸í•˜ì§€ ì•Šìœ¼ë©´ ì˜ëª»ëœ ìƒíƒœì—ì„œ ì§„í–‰

**ì´ìœ  2: ë‹¤ì¤‘ ëŒ€ê¸°ì**
- ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ê°™ì€ ì¡°ê±´ ë³€ìˆ˜ì—ì„œ ëŒ€ê¸° ì¤‘
- broadcast í›„ ëª¨ë‘ ê¹¨ì–´ë‚˜ì§€ë§Œ, í•œ ìŠ¤ë ˆë“œë§Œ ì¡°ê±´ ë§Œì¡± ê°€ëŠ¥
- ë‚˜ë¨¸ì§€ëŠ” ë‹¤ì‹œ ëŒ€ê¸°í•´ì•¼ í•¨

**ì´ìœ  3: ì¡°ê±´ ë³€ê²½**
- ê¹¨ì–´ë‚œ í›„ ì¡°ê±´ì´ ë‹¤ì‹œ ê±°ì§“ì´ ë  ìˆ˜ ìˆìŒ
- ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ ë¨¼ì € ìì› ì‚¬ìš© ê°€ëŠ¥

**ì˜¬ë°”ë¥¸ íŒ¨í„´:**

<div class="highlight"><pre><span></span><code><span class="n">pthread_mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
<span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">condition</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">pthread_cond_wait</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cond</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// ì¡°ê±´ì´ ì°¸ì„ì´ ë³´ì¥ë¨</span>
<span class="n">pthread_mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
</code></pre></div>



</details>

<hr />
<h2 id="_11">ë‹¤ìŒ ë‹¨ê³„<a class="header-link" href="#_11" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="./09_Deadlock.md">09_Deadlock.md</a> - ë°ë“œë½ ì¡°ê±´, ì˜ˆë°©, íšŒí”¼, íƒì§€</li>
</ul>
<hr />
<h2 id="_12">ì°¸ê³  ìë£Œ<a class="header-link" href="#_12" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://pages.cs.wisc.edu/~remzi/OSTEP/threads-cv.pdf">OSTEP - Condition Variables</a></li>
<li><a href="https://computing.llnl.gov/tutorials/pthreads/">POSIX Threads Programming</a></li>
<li><a href="https://jcip.net/">Java Concurrency in Practice</a></li>
</ul>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/ko/OS_Theory/07_Synchronization_Basics.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">ë™ê¸°í™” ê¸°ì´ˆ</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/ko/OS_Theory/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/ko/OS_Theory/09_Deadlock.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">ë°ë“œë½</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">â†‘</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'ko';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}