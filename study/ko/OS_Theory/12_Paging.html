{% raw %}
<!DOCTYPE html>
<html lang="ko" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>페이징 ⭐⭐⭐ - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/ko/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/ko/" class="nav-item ">
                    <span class="nav-icon">🏠</span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">💻</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/ko/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" >
                        English
                    </option>
                    
                    <option value="ko" selected>
                        한국어
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">☀️</span>
                    <span class="theme-icon dark">🌙</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/ko/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/ko/OS_Theory/">OS Theory</a>
    <span class="separator">/</span>
    <span class="current">페이징 ⭐⭐⭐</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>페이징 ⭐⭐⭐</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/ko/OS_Theory/11_Contiguous_Memory_Allocation.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">연속 메모리 할당 ⭐⭐</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">🔗</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/ko/OS_Theory/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">📋</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/ko/OS_Theory/13_Segmentation.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">세그멘테이션 ⭐⭐⭐</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#_2">개요</a></li>
<li><a href="#_3">목차</a></li>
<li><a href="#1">1. 페이징의 기본 개념</a><ul>
<li><a href="#11">1.1 페이지와 프레임</a></li>
<li><a href="#12">1.2 주요 용어</a></li>
</ul>
</li>
<li><a href="#2">2. 주소 변환</a><ul>
<li><a href="#21">2.1 논리 주소 구조</a></li>
<li><a href="#22">2.2 주소 변환 과정</a></li>
<li><a href="#23-c">2.3 C언어 구현</a></li>
<li><a href="#24">2.4 계산 예제</a></li>
</ul>
</li>
<li><a href="#3">3. 페이지 테이블</a><ul>
<li><a href="#31-pte">3.1 페이지 테이블 엔트리 (PTE)</a></li>
<li><a href="#32">3.2 페이지 테이블 저장 위치</a></li>
<li><a href="#33">3.3 메모리 접근 문제</a></li>
</ul>
</li>
<li><a href="#4-tlb-translation-lookaside-buffer">4. TLB (Translation Lookaside Buffer)</a><ul>
<li><a href="#41-tlb">4.1 TLB 개념</a></li>
<li><a href="#42-tlb">4.2 TLB를 사용한 주소 변환</a></li>
<li><a href="#43-eat">4.3 유효 접근 시간 (EAT)</a></li>
</ul>
</li>
<li><a href="#5">5. 다단계 페이지 테이블</a><ul>
<li><a href="#51">5.1 문제점</a></li>
<li><a href="#52-2">5.2 2단계 페이지 테이블</a></li>
<li><a href="#53-64-4">5.3 64비트 시스템의 4단계 페이지 테이블</a></li>
<li><a href="#54">5.4 다단계 테이블의 장점</a></li>
</ul>
</li>
<li><a href="#6">6. 해시 페이지 테이블</a><ul>
<li><a href="#61">6.1 구조</a></li>
<li><a href="#62">6.2 구현</a></li>
</ul>
</li>
<li><a href="#7">7. 역 페이지 테이블</a><ul>
<li><a href="#71">7.1 개념</a></li>
<li><a href="#72">7.2 장단점</a></li>
</ul>
</li>
<li><a href="#_4">연습 문제</a><ul>
<li><a href="#1_1">문제 1: 주소 변환</a></li>
<li><a href="#2-tlb-eat">문제 2: TLB EAT 계산</a></li>
<li><a href="#3_1">문제 3: 페이지 테이블 크기</a></li>
<li><a href="#4">문제 4: 다단계 테이블 메모리</a></li>
<li><a href="#5_1">문제 5: 역 페이지 테이블 설계</a></li>
</ul>
</li>
<li><a href="#_5">다음 단계</a></li>
<li><a href="#_6">참고 자료</a></li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="_1">페이징 ⭐⭐⭐<a class="header-link" href="#_1" title="Permanent link">&para;</a></h1>
<h2 id="_2">개요<a class="header-link" href="#_2" title="Permanent link">&para;</a></h2>
<p>페이징(Paging)은 물리 메모리를 고정 크기 블록(프레임)으로 나누고, 프로세스의 논리 주소 공간도 같은 크기의 블록(페이지)으로 나누어 비연속적으로 할당하는 메모리 관리 기법입니다. 외부 단편화를 완전히 제거할 수 있습니다.</p>
<hr />
<h2 id="_3">목차<a class="header-link" href="#_3" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#1-페이징의-기본-개념">페이징의 기본 개념</a></li>
<li><a href="#2-주소-변환">주소 변환</a></li>
<li><a href="#3-페이지-테이블">페이지 테이블</a></li>
<li><a href="#4-tlb-translation-lookaside-buffer">TLB (Translation Lookaside Buffer)</a></li>
<li><a href="#5-다단계-페이지-테이블">다단계 페이지 테이블</a></li>
<li><a href="#6-해시-페이지-테이블">해시 페이지 테이블</a></li>
<li><a href="#7-역-페이지-테이블">역 페이지 테이블</a></li>
<li><a href="#연습-문제">연습 문제</a></li>
</ol>
<hr />
<h2 id="1">1. 페이징의 기본 개념<a class="header-link" href="#1" title="Permanent link">&para;</a></h2>
<h3 id="11">1.1 페이지와 프레임<a class="header-link" href="#11" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────┐
│                      페이징의 기본 구조                                   │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   논리 주소 공간 (프로세스)              물리 주소 공간 (RAM)             │
│                                                                          │
│   ┌────────────────┐                     ┌────────────────┐             │
│   │   페이지 0     │ ──────────────────▶ │   프레임 1     │             │
│   ├────────────────┤                     ├────────────────┤             │
│   │   페이지 1     │ ─────┐              │   프레임 2     │             │
│   ├────────────────┤      │              ├────────────────┤             │
│   │   페이지 2     │ ───┐ │              │   프레임 3     │ ◀────────┐  │
│   ├────────────────┤    │ │              ├────────────────┤          │  │
│   │   페이지 3     │ ─┐ │ └────────────▶ │   프레임 4     │          │  │
│   └────────────────┘  │ │                ├────────────────┤          │  │
│                       │ │                │   프레임 5     │ ◀─────┐  │  │
│                       │ │                ├────────────────┤       │  │  │
│                       │ └───────────────▶│   프레임 6     │       │  │  │
│                       │                  ├────────────────┤       │  │  │
│                       └─────────────────▶│   프레임 7     │       │  │  │
│                                          └────────────────┘       │  │  │
│                                                                   │  │  │
│   페이지 크기 = 프레임 크기 (예: 4KB)                             │  │  │
│   페이지는 어떤 프레임에든 배치 가능!                             │  │  │
│   외부 단편화 없음!                                               │  │  │
│                                                                   │  │  │
│   다른 프로세스의 페이지들 ─────────────────────────────────────────┘  │  │
│   (같은 물리 메모리 공유)                                              │  │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="12">1.2 주요 용어<a class="header-link" href="#12" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>용어</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>페이지 (Page)</strong></td>
<td>논리 주소 공간의 고정 크기 블록</td>
</tr>
<tr>
<td><strong>프레임 (Frame)</strong></td>
<td>물리 메모리의 고정 크기 블록</td>
</tr>
<tr>
<td><strong>페이지 테이블</strong></td>
<td>페이지 → 프레임 매핑 정보</td>
</tr>
<tr>
<td><strong>페이지 번호 (p)</strong></td>
<td>논리 주소에서 페이지 식별</td>
</tr>
<tr>
<td><strong>오프셋 (d)</strong></td>
<td>페이지/프레임 내 위치</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="2">2. 주소 변환<a class="header-link" href="#2" title="Permanent link">&para;</a></h2>
<h3 id="21">2.1 논리 주소 구조<a class="header-link" href="#21" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────┐
│                      논리 주소 구조 (32비트 예시)                        │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│                         32비트 논리 주소                                 │
│   ┌─────────────────────────────┬─────────────────┐                     │
│   │      페이지 번호 (p)         │   오프셋 (d)    │                     │
│   │         20비트              │     12비트      │                     │
│   └─────────────────────────────┴─────────────────┘                     │
│                                                                          │
│   페이지 크기 = 2^12 = 4KB                                              │
│   최대 페이지 수 = 2^20 = 약 100만 개                                   │
│   최대 주소 공간 = 2^32 = 4GB                                           │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="22">2.2 주소 변환 과정<a class="header-link" href="#22" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────┐
│                        주소 변환 과정                                    │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   논리 주소: 0x00005A34                                                  │
│                                                                          │
│   1. 주소 분리 (페이지 크기: 4KB = 0x1000)                              │
│      ┌───────────────────────────────────────┐                          │
│      │  0x00005A34                           │                          │
│      │  = 0x00005 (페이지 번호) + 0xA34 (오프셋)│                        │
│      └───────────────────────────────────────┘                          │
│                                                                          │
│   2. 페이지 테이블 조회                                                  │
│      ┌────────────┬────────────┐                                        │
│      │ 페이지 번호 │ 프레임 번호 │                                        │
│      ├────────────┼────────────┤                                        │
│      │     0      │     2      │                                        │
│      │     1      │     7      │                                        │
│      │     2      │     1      │                                        │
│      │     3      │     5      │                                        │
│      │     4      │     8      │                                        │
│      │     5      │     3      │ ◀── 페이지 5 → 프레임 3                │
│      └────────────┴────────────┘                                        │
│                                                                          │
│   3. 물리 주소 계산                                                      │
│      물리 주소 = (프레임 번호 × 페이지 크기) + 오프셋                    │
│               = (3 × 0x1000) + 0xA34                                    │
│               = 0x3000 + 0xA34                                          │
│               = 0x3A34                                                   │
│                                                                          │
│   결과: 논리 주소 0x5A34 → 물리 주소 0x3A34                             │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="23-c">2.3 C언어 구현<a class="header-link" href="#23-c" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdint.h&gt;</span>

<span class="cp">#define PAGE_SIZE       4096        </span><span class="c1">// 4KB</span>
<span class="cp">#define PAGE_BITS       12          </span><span class="c1">// log2(4096)</span>
<span class="cp">#define NUM_PAGES       1024        </span><span class="c1">// 페이지 테이블 엔트리 수</span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">frame_number</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w">  </span><span class="n">valid</span><span class="p">;</span><span class="w">                 </span><span class="c1">// 유효 비트</span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w">  </span><span class="n">read_only</span><span class="p">;</span><span class="w">             </span><span class="c1">// 읽기 전용</span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w">  </span><span class="n">modified</span><span class="p">;</span><span class="w">              </span><span class="c1">// 수정됨 (dirty bit)</span>
<span class="p">}</span><span class="w"> </span><span class="n">PageTableEntry</span><span class="p">;</span>

<span class="n">PageTableEntry</span><span class="w"> </span><span class="n">page_table</span><span class="p">[</span><span class="n">NUM_PAGES</span><span class="p">];</span>

<span class="c1">// 논리 주소 → 물리 주소 변환</span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="nf">translate_address</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">logical_address</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 1. 페이지 번호와 오프셋 분리</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">page_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">logical_address</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">PAGE_BITS</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">logical_address</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">PAGE_SIZE</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;논리 주소: 0x%08X</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">logical_address</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;페이지 번호: %u, 오프셋: 0x%X</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">page_number</span><span class="p">,</span><span class="w"> </span><span class="n">offset</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// 2. 페이지 테이블 범위 검사</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">page_number</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">NUM_PAGES</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;ERROR: 페이지 번호 초과!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 3. 유효 비트 검사</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">page_table</span><span class="p">[</span><span class="n">page_number</span><span class="p">].</span><span class="n">valid</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;PAGE FAULT: 페이지 %u가 메모리에 없음</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">page_number</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span><span class="w">  </span><span class="c1">// 페이지 폴트 처리 필요</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 4. 물리 주소 계산</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">frame_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">page_table</span><span class="p">[</span><span class="n">page_number</span><span class="p">].</span><span class="n">frame_number</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">physical_address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">frame_number</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">PAGE_BITS</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">offset</span><span class="p">;</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;프레임 번호: %u</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">frame_number</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;물리 주소: 0x%08X</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">physical_address</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">physical_address</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 페이지 테이블 초기화</span>
<span class="w">    </span><span class="n">page_table</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">PageTableEntry</span><span class="p">){.</span><span class="n">frame_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">valid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">};</span>
<span class="w">    </span><span class="n">page_table</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">PageTableEntry</span><span class="p">){.</span><span class="n">frame_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">valid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">};</span>
<span class="w">    </span><span class="n">page_table</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">PageTableEntry</span><span class="p">){.</span><span class="n">frame_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">valid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">};</span>
<span class="w">    </span><span class="n">page_table</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">PageTableEntry</span><span class="p">){.</span><span class="n">frame_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">valid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">};</span>

<span class="w">    </span><span class="c1">// 주소 변환 테스트</span>
<span class="w">    </span><span class="n">translate_address</span><span class="p">(</span><span class="mh">0x00000A34</span><span class="p">);</span><span class="w">  </span><span class="c1">// 페이지 0</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">translate_address</span><span class="p">(</span><span class="mh">0x00005A34</span><span class="p">);</span><span class="w">  </span><span class="c1">// 페이지 5</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="24">2.4 계산 예제<a class="header-link" href="#24" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────┐
│                      주소 변환 계산 예제                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  문제: 페이지 크기 = 1KB, 논리 주소 = 4500                              │
│                                                                          │
│  풀이:                                                                   │
│  1. 페이지 크기 = 1024 = 2^10 바이트                                    │
│     → 오프셋 = 10비트                                                   │
│                                                                          │
│  2. 논리 주소 분리:                                                      │
│     페이지 번호 = 4500 / 1024 = 4 (정수 나눗셈)                         │
│     오프셋     = 4500 % 1024 = 404                                      │
│                                                                          │
│     검증: 4 × 1024 + 404 = 4096 + 404 = 4500 ✓                          │
│                                                                          │
│  3. 페이지 테이블 조회: 페이지 4 → 프레임 7                             │
│                                                                          │
│  4. 물리 주소 = 프레임 7 × 1024 + 404                                   │
│              = 7168 + 404                                                │
│              = 7572                                                      │
│                                                                          │
│  이진수로 확인:                                                          │
│  - 논리 주소 4500 = 0001 0001 1001 0100                                 │
│                     ├─────────┤├─────────┤                              │
│                     페이지 4    오프셋 404                               │
│                                                                          │
│  - 물리 주소 7572 = 0001 1101 1001 0100                                 │
│                     ├─────────┤├─────────┤                              │
│                     프레임 7    오프셋 404 (동일!)                       │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<hr />
<h2 id="3">3. 페이지 테이블<a class="header-link" href="#3" title="Permanent link">&para;</a></h2>
<h3 id="31-pte">3.1 페이지 테이블 엔트리 (PTE)<a class="header-link" href="#31-pte" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────┐
│                   페이지 테이블 엔트리 구조 (32비트)                     │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   31                               12 11         4 3 2 1 0              │
│   ┌──────────────────────────────────┬──────────┬─┬─┬─┬─┐              │
│   │        프레임 번호 (20비트)       │  예약     │D│A│U│V│              │
│   └──────────────────────────────────┴──────────┴─┴─┴─┴─┘              │
│                                                                          │
│   V (Valid): 유효 비트                                                  │
│       0 = 페이지가 메모리에 없음 (페이지 폴트 발생)                     │
│       1 = 페이지가 메모리에 있음                                        │
│                                                                          │
│   U (User): 사용자 접근 허용                                            │
│       0 = 커널 모드만 접근 가능                                         │
│       1 = 사용자 모드에서도 접근 가능                                   │
│                                                                          │
│   A (Accessed): 접근됨 비트                                             │
│       접근 시 하드웨어가 1로 설정                                       │
│       페이지 교체 알고리즘에서 사용                                     │
│                                                                          │
│   D (Dirty): 수정됨 비트                                                │
│       쓰기 시 하드웨어가 1로 설정                                       │
│       페이지 아웃 시 디스크에 써야 하는지 결정                          │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="32">3.2 페이지 테이블 저장 위치<a class="header-link" href="#32" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────┐
│                   페이지 테이블과 PTBR                                   │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   CPU                                                                    │
│   ┌────────────────────────────────────────┐                            │
│   │                                        │                            │
│   │   PTBR (Page Table Base Register)      │                            │
│   │   ┌────────────────────────────────┐   │                            │
│   │   │         0x00100000             │───┼───────┐                    │
│   │   └────────────────────────────────┘   │       │                    │
│   │                                        │       │                    │
│   │   PTLR (Page Table Length Register)    │       │                    │
│   │   ┌────────────────────────────────┐   │       │                    │
│   │   │            1024                │   │       │                    │
│   │   └────────────────────────────────┘   │       │                    │
│   │                                        │       │                    │
│   └────────────────────────────────────────┘       │                    │
│                                                     │                    │
│                                                     ▼                    │
│   물리 메모리                                                            │
│   ┌────────────────────────────────────────────────────┐                │
│   │                                                    │                │
│   │   주소 0x00100000                                  │                │
│   │   ┌───────────────────────────────────────────┐   │                │
│   │   │    페이지 테이블 (프로세스 A)              │   │                │
│   │   │   ┌──────────────┬────────────────────┐   │   │                │
│   │   │   │ 페이지 0     │ 프레임 5 | V=1    │   │   │                │
│   │   │   │ 페이지 1     │ 프레임 2 | V=1    │   │   │                │
│   │   │   │ 페이지 2     │ 프레임 8 | V=1    │   │   │                │
│   │   │   │ ...          │ ...                │   │   │                │
│   │   │   └──────────────┴────────────────────┘   │   │                │
│   │   └───────────────────────────────────────────┘   │                │
│   │                                                    │                │
│   └────────────────────────────────────────────────────┘                │
│                                                                          │
│   컨텍스트 스위칭 시: PTBR 값을 새 프로세스의 페이지 테이블 주소로 변경  │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="33">3.3 메모리 접근 문제<a class="header-link" href="#33" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────┐
│                   2번의 메모리 접근 문제                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   페이징 사용 시 메모리 접근:                                            │
│                                                                          │
│   CPU ──▶ 논리 주소 발생                                                │
│           │                                                              │
│           ▼                                                              │
│   [1] 페이지 테이블 접근 (메모리 접근 #1)                               │
│           │                                                              │
│           ▼                                                              │
│   프레임 번호 획득                                                       │
│           │                                                              │
│           ▼                                                              │
│   [2] 실제 데이터 접근 (메모리 접근 #2)                                 │
│           │                                                              │
│           ▼                                                              │
│   데이터 획득                                                            │
│                                                                          │
│   문제: 메모리 접근이 2배로 느려짐!                                     │
│   해결: TLB (Translation Lookaside Buffer) 사용                         │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<hr />
<h2 id="4-tlb-translation-lookaside-buffer">4. TLB (Translation Lookaside Buffer)<a class="header-link" href="#4-tlb-translation-lookaside-buffer" title="Permanent link">&para;</a></h2>
<h3 id="41-tlb">4.1 TLB 개념<a class="header-link" href="#41-tlb" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────┐
│                           TLB 구조                                       │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   CPU 내부 또는 MMU 내부의 고속 캐시                                     │
│                                                                          │
│   ┌────────────────────────────────────────────────────────────┐        │
│   │                          TLB                                │        │
│   ├────────────────────────────────────────────────────────────┤        │
│   │   페이지 번호    │    프레임 번호    │    ASID    │  Valid  │        │
│   ├──────────────────┼───────────────────┼────────────┼─────────┤        │
│   │       5          │         3         │     1      │    1    │        │
│   │       2          │         7         │     1      │    1    │        │
│   │      12          │         9         │     2      │    1    │        │
│   │       0          │         1         │     1      │    1    │        │
│   │      ...         │        ...        │    ...     │   ...   │        │
│   └────────────────────────────────────────────────────────────┘        │
│                                                                          │
│   ASID (Address Space ID): 프로세스 식별자                              │
│   → 컨텍스트 스위칭 시 TLB 전체를 비우지 않아도 됨                      │
│                                                                          │
│   엔트리 수: 보통 64 ~ 1024개 (매우 작음, 그러나 매우 빠름)             │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="42-tlb">4.2 TLB를 사용한 주소 변환<a class="header-link" href="#42-tlb" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────┐
│                     TLB를 사용한 주소 변환                               │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   논리 주소                                                              │
│       │                                                                  │
│       ▼                                                                  │
│   ┌─────────────────────────────────┐                                   │
│   │      페이지 번호 추출           │                                   │
│   └─────────────────────────────────┘                                   │
│       │                                                                  │
│       ▼                                                                  │
│   ┌─────────────────────────────────┐                                   │
│   │       TLB에서 검색              │                                   │
│   └─────────────────────────────────┘                                   │
│       │                                                                  │
│       ├───────────────────────────────────┐                             │
│       │                                   │                             │
│   TLB Hit                             TLB Miss                          │
│       │                                   │                             │
│       ▼                                   ▼                             │
│   프레임 번호                     페이지 테이블 접근                    │
│   즉시 획득                       (메모리 접근)                         │
│       │                                   │                             │
│       │                                   ▼                             │
│       │                           TLB 업데이트                          │
│       │                                   │                             │
│       └───────────────────────────────────┘                             │
│                       │                                                  │
│                       ▼                                                  │
│               물리 주소 계산                                             │
│                       │                                                  │
│                       ▼                                                  │
│                  메모리 접근                                             │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="43-eat">4.3 유효 접근 시간 (EAT)<a class="header-link" href="#43-eat" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────┐
│                     유효 접근 시간 계산                                  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   파라미터:                                                              │
│   - TLB 검색 시간: ε (예: 10ns)                                         │
│   - 메모리 접근 시간: m (예: 100ns)                                     │
│   - TLB 적중률: α (예: 0.98 = 98%)                                      │
│                                                                          │
│   EAT 공식:                                                              │
│   EAT = α × (ε + m) + (1-α) × (ε + 2m)                                  │
│         ↑ TLB Hit 시    ↑ TLB Miss 시                                   │
│                                                                          │
│   예제 계산:                                                             │
│   ε = 10ns, m = 100ns, α = 0.98                                         │
│                                                                          │
│   EAT = 0.98 × (10 + 100) + 0.02 × (10 + 200)                           │
│       = 0.98 × 110 + 0.02 × 210                                         │
│       = 107.8 + 4.2                                                     │
│       = 112ns                                                            │
│                                                                          │
│   비교:                                                                  │
│   - TLB 없을 때: 200ns (2번 메모리 접근)                                │
│   - TLB 있을 때: 112ns                                                   │
│   - 성능 향상: 약 44%                                                    │
│                                                                          │
│   TLB 적중률이 높을수록 성능 향상이 큼                                  │
│   α = 0.99일 때: EAT = 0.99×110 + 0.01×210 = 112ns                      │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<hr />
<h2 id="5">5. 다단계 페이지 테이블<a class="header-link" href="#5" title="Permanent link">&para;</a></h2>
<h3 id="51">5.1 문제점<a class="header-link" href="#51" title="Permanent link">&para;</a></h3>
<p>32비트 주소 공간, 4KB 페이지 크기의 경우:
- 페이지 수 = 2^32 / 2^12 = 2^20 = 약 100만 개
- PTE 크기 = 4바이트
- 페이지 테이블 크기 = 100만 × 4 = 4MB (프로세스당!)</p>
<h3 id="52-2">5.2 2단계 페이지 테이블<a class="header-link" href="#52-2" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────┐
│                      2단계 페이지 테이블                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   32비트 논리 주소:                                                      │
│   ┌──────────────┬──────────────┬──────────────┐                        │
│   │   p1 (10비트) │   p2 (10비트) │   d (12비트)  │                        │
│   │  외부 페이지  │  내부 페이지  │   오프셋     │                        │
│   └──────────────┴──────────────┴──────────────┘                        │
│          │              │              │                                 │
│          │              │              │                                 │
│          ▼              │              │                                 │
│   ┌────────────┐        │              │                                 │
│   │ 외부 페이지 │        │              │                                 │
│   │   테이블    │        │              │                                 │
│   │ (1단계)    │        │              │                                 │
│   ├────────────┤        │              │                                 │
│   │   ...      │        │              │                                 │
│   │  p1 엔트리 │────────┼──────┐       │                                 │
│   │   ...      │        │      │       │                                 │
│   └────────────┘        │      │       │                                 │
│                         │      ▼       │                                 │
│                         │  ┌────────────┐                                │
│                         │  │ 내부 페이지 │                                │
│                         │  │   테이블   │                                │
│                         │  │ (2단계)   │                                │
│                         │  ├────────────┤                                │
│                         │  │   ...      │                                │
│                         └▶ │  p2 엔트리 │───▶ 프레임 번호                │
│                            │   ...      │         │                      │
│                            └────────────┘         │                      │
│                                                   │                      │
│                                                   ▼                      │
│                                    물리 주소 = 프레임 × 4KB + d         │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="53-64-4">5.3 64비트 시스템의 4단계 페이지 테이블<a class="header-link" href="#53-64-4" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────┐
│                 64비트 4단계 페이지 테이블 (x86-64)                      │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   64비트 가상 주소 (실제 사용: 48비트)                                  │
│   ┌──────────────────────────────────────────────────────────────┐     │
│   │ 미사용 │  PML4  │  PDPT  │   PD   │   PT   │    Offset    │     │
│   │ (16)   │  (9)   │  (9)   │  (9)   │  (9)   │     (12)     │     │
│   └──────────────────────────────────────────────────────────────┘     │
│               │        │        │        │            │                 │
│               ▼        ▼        ▼        ▼            │                 │
│           ┌───────┐ ┌───────┐ ┌───────┐ ┌───────┐    │                 │
│   CR3 ──▶ │ PML4  │─▶│ PDPT │─▶│  PD   │─▶│  PT   │───┼───▶ 물리 주소  │
│           │ Table │  │ Table│  │ Table │  │ Table │   │                 │
│           └───────┘  └───────┘  └───────┘  └───────┘   │                 │
│                                                         │                 │
│   각 레벨: 512 엔트리 (2^9), 8바이트/엔트리            │                 │
│   테이블 크기: 512 × 8 = 4KB (= 1 페이지)              │                 │
│                                                         │                 │
│   PML4: Page Map Level 4                                │                 │
│   PDPT: Page Directory Pointer Table                    │                 │
│   PD: Page Directory                                    │                 │
│   PT: Page Table                                        │                 │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="54">5.4 다단계 테이블의 장점<a class="header-link" href="#54" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// 다단계 페이지 테이블의 메모리 절약 예시</span>

<span class="c1">// 프로세스가 사용하는 메모리:</span>
<span class="c1">// - 코드: 0x00000000 ~ 0x00100000 (1MB, 256페이지)</span>
<span class="c1">// - 스택: 0xBFF00000 ~ 0xC0000000 (1MB, 256페이지)</span>

<span class="c1">// 단일 페이지 테이블: 4MB 필요 (100만 엔트리 모두)</span>

<span class="c1">// 2단계 페이지 테이블:</span>
<span class="c1">// - 1단계 테이블: 4KB (1024 엔트리)</span>
<span class="c1">// - 2단계 테이블: 필요한 것만!</span>
<span class="c1">//   - 코드 영역: 1개 × 4KB</span>
<span class="c1">//   - 스택 영역: 1개 × 4KB</span>
<span class="c1">// 총: 4KB + 4KB + 4KB = 12KB (4MB → 12KB로 절약!)</span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">present</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">writable</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">reserved</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">9</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">frame</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">20</span><span class="p">;</span><span class="w">       </span><span class="c1">// 다음 레벨 테이블 또는 프레임</span>
<span class="p">}</span><span class="w"> </span><span class="n">PageTableEntry</span><span class="p">;</span>

<span class="c1">// 2단계 주소 변환</span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="nf">translate_two_level</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">virtual_addr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">p1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">virtual_addr</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">22</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0x3FF</span><span class="p">;</span><span class="w">   </span><span class="c1">// 상위 10비트</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">p2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">virtual_addr</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">12</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0x3FF</span><span class="p">;</span><span class="w">   </span><span class="c1">// 중간 10비트</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">virtual_addr</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0xFFF</span><span class="p">;</span><span class="w">        </span><span class="c1">// 하위 12비트</span>

<span class="w">    </span><span class="c1">// 1단계 테이블 접근</span>
<span class="w">    </span><span class="n">PageTableEntry</span><span class="o">*</span><span class="w"> </span><span class="n">level1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">PageTableEntry</span><span class="o">*</span><span class="p">)</span><span class="n">PTBR</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">level1</span><span class="p">[</span><span class="n">p1</span><span class="p">].</span><span class="n">present</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 2단계 테이블이 없음</span>
<span class="w">        </span><span class="n">page_fault_handler</span><span class="p">();</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 2단계 테이블 접근</span>
<span class="w">    </span><span class="n">PageTableEntry</span><span class="o">*</span><span class="w"> </span><span class="n">level2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">PageTableEntry</span><span class="o">*</span><span class="p">)(</span><span class="n">level1</span><span class="p">[</span><span class="n">p1</span><span class="p">].</span><span class="n">frame</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">12</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">level2</span><span class="p">[</span><span class="n">p2</span><span class="p">].</span><span class="n">present</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 페이지가 메모리에 없음</span>
<span class="w">        </span><span class="n">page_fault_handler</span><span class="p">();</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 물리 주소 계산</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">frame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">level2</span><span class="p">[</span><span class="n">p2</span><span class="p">].</span><span class="n">frame</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">frame</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">12</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">offset</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h2 id="6">6. 해시 페이지 테이블<a class="header-link" href="#6" title="Permanent link">&para;</a></h2>
<h3 id="61">6.1 구조<a class="header-link" href="#61" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────┐
│                       해시 페이지 테이블                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   가상 페이지 번호                                                       │
│         │                                                                │
│         ▼                                                                │
│   ┌─────────────┐                                                       │
│   │  해시 함수   │                                                       │
│   └─────────────┘                                                       │
│         │                                                                │
│         ▼                                                                │
│   해시 테이블                                                            │
│   ┌───────────────────────────────────────────────────────────────┐     │
│   │ 인덱스 │                    체인                              │     │
│   ├────────┼───────────────────────────────────────────────────────┤     │
│   │   0    │ [p=102, f=5] → [p=2050, f=12] → NULL                 │     │
│   │   1    │ NULL                                                  │     │
│   │   2    │ [p=55, f=8] → NULL                                   │     │
│   │   3    │ [p=1003, f=3] → [p=7, f=22] → [p=4099, f=1] → NULL  │     │
│   │  ...   │ ...                                                   │     │
│   └────────┴───────────────────────────────────────────────────────┘     │
│                                                                          │
│   p = 가상 페이지 번호                                                  │
│   f = 물리 프레임 번호                                                  │
│                                                                          │
│   장점: 희소한 주소 공간에서 효율적 (64비트 시스템)                     │
│   단점: 해시 충돌 시 체인 검색 필요                                     │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="62">6.2 구현<a class="header-link" href="#62" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="cp">#define HASH_TABLE_SIZE 1024</span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">HashEntry</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">virtual_page</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">physical_frame</span><span class="p">;</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">HashEntry</span><span class="o">*</span><span class="w"> </span><span class="n">next</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">HashEntry</span><span class="p">;</span>

<span class="n">HashEntry</span><span class="o">*</span><span class="w"> </span><span class="n">hash_table</span><span class="p">[</span><span class="n">HASH_TABLE_SIZE</span><span class="p">];</span>

<span class="c1">// 해시 함수</span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">virtual_page</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">virtual_page</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">HASH_TABLE_SIZE</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 프레임 번호 검색</span>
<span class="kt">int64_t</span><span class="w"> </span><span class="nf">lookup</span><span class="p">(</span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">virtual_page</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hash</span><span class="p">(</span><span class="n">virtual_page</span><span class="p">);</span>
<span class="w">    </span><span class="n">HashEntry</span><span class="o">*</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hash_table</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>

<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">entry</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">entry</span><span class="o">-&gt;</span><span class="n">virtual_page</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">virtual_page</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">entry</span><span class="o">-&gt;</span><span class="n">physical_frame</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">entry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">entry</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span><span class="w">  </span><span class="c1">// 페이지 폴트</span>
<span class="p">}</span>

<span class="c1">// 매핑 추가</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">insert</span><span class="p">(</span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">virtual_page</span><span class="p">,</span><span class="w"> </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">physical_frame</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hash</span><span class="p">(</span><span class="n">virtual_page</span><span class="p">);</span>

<span class="w">    </span><span class="n">HashEntry</span><span class="o">*</span><span class="w"> </span><span class="n">new_entry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">HashEntry</span><span class="p">));</span>
<span class="w">    </span><span class="n">new_entry</span><span class="o">-&gt;</span><span class="n">virtual_page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">virtual_page</span><span class="p">;</span>
<span class="w">    </span><span class="n">new_entry</span><span class="o">-&gt;</span><span class="n">physical_frame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">physical_frame</span><span class="p">;</span>
<span class="w">    </span><span class="n">new_entry</span><span class="o">-&gt;</span><span class="n">next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hash_table</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>

<span class="w">    </span><span class="n">hash_table</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new_entry</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h2 id="7">7. 역 페이지 테이블<a class="header-link" href="#7" title="Permanent link">&para;</a></h2>
<h3 id="71">7.1 개념<a class="header-link" href="#71" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────┐
│                       역 페이지 테이블                                   │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   일반 페이지 테이블:                                                    │
│   - 각 프로세스마다 별도의 테이블                                       │
│   - 가상 주소 → 물리 주소 매핑                                          │
│   - 테이블 크기 = 가상 주소 공간에 비례                                 │
│                                                                          │
│   역 페이지 테이블:                                                      │
│   - 시스템 전체에 하나의 테이블                                         │
│   - 물리 프레임별로 엔트리                                              │
│   - 테이블 크기 = 물리 메모리 크기에 비례                               │
│                                                                          │
│   ┌──────────────────────────────────────────────────────────────┐     │
│   │ 프레임 번호 │    PID    │  가상 페이지 번호  │   보호 비트   │     │
│   ├─────────────┼───────────┼───────────────────┼───────────────┤     │
│   │      0      │     1     │       0x1234      │     R/W       │     │
│   │      1      │     2     │       0x0001      │     R/W       │     │
│   │      2      │     1     │       0x1235      │     R/O       │     │
│   │      3      │     3     │       0x5678      │     R/W       │     │
│   │     ...     │    ...    │        ...        │      ...      │     │
│   │      N      │     2     │       0x0002      │     R/W       │     │
│   └─────────────┴───────────┴───────────────────┴───────────────┘     │
│                                                                          │
│   검색: (PID, 가상 페이지 번호)로 프레임 번호 찾기                      │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="72">7.2 장단점<a class="header-link" href="#72" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────┐
│                     역 페이지 테이블 장단점                              │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   장점:                                                                  │
│   ┌─────────────────────────────────────────────────────────────────┐   │
│   │ 1. 메모리 절약                                                   │   │
│   │    - 물리 메모리 4GB, 프레임 4KB                                │   │
│   │    - 엔트리 수 = 4GB / 4KB = 1M개                               │   │
│   │    - 엔트리당 16바이트 → 총 16MB (프로세스 수와 무관!)         │   │
│   │                                                                  │   │
│   │ 2. 64비트 시스템에서 효율적                                     │   │
│   │    - 가상 주소 공간이 매우 크지만                               │   │
│   │    - 물리 메모리는 상대적으로 작음                              │   │
│   └─────────────────────────────────────────────────────────────────┘   │
│                                                                          │
│   단점:                                                                  │
│   ┌─────────────────────────────────────────────────────────────────┐   │
│   │ 1. 검색 시간                                                     │   │
│   │    - 순차 검색: O(n) - 너무 느림                                │   │
│   │    - 해시 테이블 사용 필요                                      │   │
│   │                                                                  │   │
│   │ 2. 메모리 공유 어려움                                           │   │
│   │    - 하나의 프레임에 하나의 (PID, 페이지) 쌍만 저장             │   │
│   │    - 공유 메모리 구현 복잡                                      │   │
│   └─────────────────────────────────────────────────────────────────┘   │
│                                                                          │
│   사용 예: IBM PowerPC, UltraSPARC, IA-64                               │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<hr />
<h2 id="_4">연습 문제<a class="header-link" href="#_4" title="Permanent link">&para;</a></h2>
<h3 id="1_1">문제 1: 주소 변환<a class="header-link" href="#1_1" title="Permanent link">&para;</a></h3>
<p>페이지 크기가 4KB인 시스템에서 다음 조건일 때 물리 주소를 계산하시오.</p>
<ul>
<li>논리 주소: 25000</li>
<li>페이지 테이블: 페이지 6 → 프레임 4</li>
</ul>
<details>
<summary>정답 보기</summary>


<div class="highlight"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="n">페이지</span><span class="w"> </span><span class="n">크기</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4</span><span class="n">KB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4096</span><span class="n">바이트</span>

<span class="mf">2.</span><span class="w"> </span><span class="n">페이지</span><span class="w"> </span><span class="n">번호</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">25000</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">4096</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="p">(</span><span class="n">정수</span><span class="w"> </span><span class="n">나눗셈</span><span class="p">)</span>
<span class="w">   </span><span class="n">오프셋</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">25000</span><span class="w"> </span><span class="err">%</span><span class="w"> </span><span class="mf">4096</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">424</span>

<span class="w">   </span><span class="n">검증</span><span class="p">:</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="mf">4096</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">424</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">24576</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">424</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">25000</span><span class="w"> </span><span class="err">✓</span>

<span class="mf">3.</span><span class="w"> </span><span class="n">페이지</span><span class="w"> </span><span class="n">테이블</span><span class="w"> </span><span class="n">조회</span><span class="p">:</span><span class="w"> </span><span class="n">페이지</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="n">프레임</span><span class="w"> </span><span class="mf">4</span>

<span class="mf">4.</span><span class="w"> </span><span class="n">물리</span><span class="w"> </span><span class="n">주소</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">프레임</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="mf">4096</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">424</span>
<span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="mf">16384</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">424</span>
<span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="mf">16808</span>
</code></pre></div>



</details>

<h3 id="2-tlb-eat">문제 2: TLB EAT 계산<a class="header-link" href="#2-tlb-eat" title="Permanent link">&para;</a></h3>
<p>다음 조건에서 유효 접근 시간(EAT)을 계산하시오.</p>
<ul>
<li>TLB 접근 시간: 20ns</li>
<li>메모리 접근 시간: 100ns</li>
<li>TLB 적중률: 95%</li>
</ul>
<details>
<summary>정답 보기</summary>


<div class="highlight"><pre><span></span><code>EAT = α × (ε + m) + (1-α) × (ε + 2m)
    = 0.95 × (20 + 100) + 0.05 × (20 + 200)
    = 0.95 × 120 + 0.05 × 220
    = 114 + 11
    = 125ns

비교: TLB 없을 때 200ns, TLB 있을 때 125ns (37.5% 향상)
</code></pre></div>



</details>

<h3 id="3_1">문제 3: 페이지 테이블 크기<a class="header-link" href="#3_1" title="Permanent link">&para;</a></h3>
<p>32비트 가상 주소 공간, 4KB 페이지, 4바이트 PTE인 시스템에서:
1. 단일 페이지 테이블의 크기는?
2. 2단계 페이지 테이블을 사용할 때 주소 비트 할당은?</p>
<details>
<summary>정답 보기</summary>


<div class="highlight"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="n">단일</span><span class="w"> </span><span class="n">페이지</span><span class="w"> </span><span class="n">테이블</span><span class="p">:</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">페이지</span><span class="w"> </span><span class="n">수</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="o">^</span><span class="mf">32</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2</span><span class="o">^</span><span class="mf">12</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="o">^</span><span class="mf">20</span><span class="w"> </span><span class="p">(</span><span class="n">약</span><span class="w"> </span><span class="mf">100</span><span class="n">만</span><span class="p">)</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">PTE</span><span class="w"> </span><span class="n">크기</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4</span><span class="n">바이트</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">테이블</span><span class="w"> </span><span class="n">크기</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="o">^</span><span class="mf">20</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4</span><span class="n">MB</span>

<span class="mf">2.</span><span class="w"> </span><span class="mf">2</span><span class="n">단계</span><span class="w"> </span><span class="n">페이지</span><span class="w"> </span><span class="n">테이블</span><span class="p">:</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">총</span><span class="w"> </span><span class="mf">32</span><span class="n">비트</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">오프셋</span><span class="p">(</span><span class="mf">12</span><span class="n">비트</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">페이지</span><span class="w"> </span><span class="n">테이블</span><span class="p">(</span><span class="mf">20</span><span class="n">비트</span><span class="p">)</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="mf">20</span><span class="n">비트를</span><span class="w"> </span><span class="n">두</span><span class="w"> </span><span class="n">레벨로</span><span class="w"> </span><span class="n">분할</span><span class="p">:</span><span class="w"> </span><span class="mf">10</span><span class="n">비트</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">10</span><span class="n">비트</span>

<span class="w">   </span><span class="n">주소</span><span class="w"> </span><span class="n">구조</span><span class="p">:</span><span class="w"> </span><span class="err">[</span><span class="n">p1</span><span class="p">:</span><span class="w"> </span><span class="mf">10</span><span class="n">비트</span><span class="err">][</span><span class="n">p2</span><span class="p">:</span><span class="w"> </span><span class="mf">10</span><span class="n">비트</span><span class="err">][</span><span class="n">offset</span><span class="p">:</span><span class="w"> </span><span class="mf">12</span><span class="n">비트</span><span class="err">]</span>

<span class="w">   </span><span class="n">각</span><span class="w"> </span><span class="n">레벨</span><span class="w"> </span><span class="n">테이블</span><span class="p">:</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">엔트리</span><span class="w"> </span><span class="n">수</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="o">^</span><span class="mf">10</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1024</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">테이블</span><span class="w"> </span><span class="n">크기</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1024</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4</span><span class="n">KB</span><span class="w"> </span><span class="p">(</span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="n">페이지에</span><span class="w"> </span><span class="n">딱</span><span class="w"> </span><span class="n">맞음</span><span class="p">)</span>
</code></pre></div>



</details>

<h3 id="4">문제 4: 다단계 테이블 메모리<a class="header-link" href="#4" title="Permanent link">&para;</a></h3>
<p>프로세스가 다음 영역만 사용할 때, 2단계 페이지 테이블의 총 크기를 계산하시오.</p>
<ul>
<li>코드: 0x00000000 ~ 0x00400000 (4MB)</li>
<li>데이터: 0x10000000 ~ 0x10100000 (1MB)</li>
<li>스택: 0xBFF00000 ~ 0xC0000000 (1MB)</li>
</ul>
<details>
<summary>정답 보기</summary>


<div class="highlight"><pre><span></span><code>페이지 크기 = 4KB, 2단계 테이블 (10비트 + 10비트 + 12비트)

1단계 인덱스 분석:
- 코드 (0x00000000~0x00400000): p1 = 0
- 데이터 (0x10000000~0x10100000): p1 = 64
- 스택 (0xBFF00000~0xC0000000): p1 = 767

필요한 테이블:
- 1단계 테이블: 1개 × 4KB = 4KB
- 2단계 테이블: 3개 × 4KB = 12KB (인덱스 0, 64, 767에 해당)

총 크기 = 4KB + 12KB = 16KB

비교: 단일 테이블이었다면 4MB 필요
절약률: (4MB - 16KB) / 4MB = 99.6% 절약!
</code></pre></div>



</details>

<h3 id="5_1">문제 5: 역 페이지 테이블 설계<a class="header-link" href="#5_1" title="Permanent link">&para;</a></h3>
<p>물리 메모리가 1GB이고 페이지 크기가 8KB인 시스템에서 역 페이지 테이블을 설계하시오.
- 엔트리에 필요한 필드와 크기
- 테이블의 총 크기</p>
<details>
<summary>정답 보기</summary>


<div class="highlight"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="n">프레임</span><span class="w"> </span><span class="n">수</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="n">GB</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">8</span><span class="n">KB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="o">^</span><span class="mf">30</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2</span><span class="o">^</span><span class="mf">13</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="o">^</span><span class="mf">17</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">131</span><span class="p">,</span><span class="mf">072</span><span class="n">개</span>

<span class="mf">2.</span><span class="w"> </span><span class="n">엔트리</span><span class="w"> </span><span class="n">구조</span><span class="p">:</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">PID</span><span class="p">:</span><span class="w"> </span><span class="mf">16</span><span class="n">비트</span><span class="w"> </span><span class="p">(</span><span class="n">최대</span><span class="w"> </span><span class="mf">65536</span><span class="w"> </span><span class="n">프로세스</span><span class="p">)</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">가상</span><span class="w"> </span><span class="n">페이지</span><span class="w"> </span><span class="n">번호</span><span class="p">:</span><span class="w"> </span><span class="mf">51</span><span class="n">비트</span><span class="w"> </span><span class="p">(</span><span class="mf">64</span><span class="n">비트</span><span class="w"> </span><span class="n">주소</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">13</span><span class="n">비트</span><span class="w"> </span><span class="n">오프셋</span><span class="p">)</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">보호</span><span class="w"> </span><span class="n">비트</span><span class="p">:</span><span class="w"> </span><span class="mf">4</span><span class="n">비트</span><span class="w"> </span><span class="p">(</span><span class="n">R</span><span class="o">/</span><span class="n">W</span><span class="o">/</span><span class="n">X</span><span class="o">/</span><span class="nb">Val</span><span class="n">id</span><span class="p">)</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">기타</span><span class="p">:</span><span class="w"> </span><span class="mf">9</span><span class="n">비트</span><span class="w"> </span><span class="p">(</span><span class="n">여유</span><span class="p">)</span>
<span class="w">   </span><span class="n">총</span><span class="p">:</span><span class="w"> </span><span class="mf">80</span><span class="n">비트</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">10</span><span class="n">바이트</span><span class="w"> </span><span class="p">(</span><span class="n">또는</span><span class="w"> </span><span class="n">패딩해서</span><span class="w"> </span><span class="mf">16</span><span class="n">바이트</span><span class="p">)</span>

<span class="mf">3.</span><span class="w"> </span><span class="n">테이블</span><span class="w"> </span><span class="n">크기</span><span class="p">:</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">엔트리</span><span class="w"> </span><span class="n">수</span><span class="p">:</span><span class="w"> </span><span class="mf">131</span><span class="p">,</span><span class="mf">072</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">엔트리</span><span class="w"> </span><span class="n">크기</span><span class="p">:</span><span class="w"> </span><span class="mf">16</span><span class="n">바이트</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">총</span><span class="w"> </span><span class="n">크기</span><span class="p">:</span><span class="w"> </span><span class="mf">131</span><span class="p">,</span><span class="mf">072</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="mf">16</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="n">MB</span>

<span class="w">   </span><span class="n">이는</span><span class="w"> </span><span class="n">물리</span><span class="w"> </span><span class="n">메모리</span><span class="p">(</span><span class="mf">1</span><span class="n">GB</span><span class="p">)</span><span class="n">의</span><span class="w"> </span><span class="mf">0.2</span><span class="err">%</span><span class="n">에</span><span class="w"> </span><span class="n">해당</span>
</code></pre></div>



</details>

<hr />
<h2 id="_5">다음 단계<a class="header-link" href="#_5" title="Permanent link">&para;</a></h2>
<p><a href="./13_Segmentation.md">13_Segmentation.md</a>에서 세그멘트 기반 메모리 관리를 배워봅시다!</p>
<hr />
<h2 id="_6">참고 자료<a class="header-link" href="#_6" title="Permanent link">&para;</a></h2>
<ul>
<li>Silberschatz, "Operating System Concepts" Chapter 9</li>
<li>Intel 64 and IA-32 Architectures Software Developer's Manual</li>
<li>AMD64 Architecture Programmer's Manual</li>
<li>Linux kernel source: <code>arch/x86/mm/pgtable.c</code></li>
</ul>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/ko/OS_Theory/11_Contiguous_Memory_Allocation.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">연속 메모리 할당 ⭐⭐</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">🔗</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/ko/OS_Theory/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">📋</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/ko/OS_Theory/13_Segmentation.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">세그멘테이션 ⭐⭐⭐</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">↑</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'ko';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}