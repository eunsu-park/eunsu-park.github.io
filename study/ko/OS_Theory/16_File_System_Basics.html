{% raw %}
<!DOCTYPE html>
<html lang="ko" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>파일 시스템 기초 ⭐⭐⭐ - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/ko/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/ko/" class="nav-item ">
                    <span class="nav-icon">🏠</span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">💻</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/ko/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" >
                        English
                    </option>
                    
                    <option value="ko" selected>
                        한국어
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">☀️</span>
                    <span class="theme-icon dark">🌙</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/ko/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/ko/OS_Theory/">OS Theory</a>
    <span class="separator">/</span>
    <span class="current">파일 시스템 기초 ⭐⭐⭐</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>파일 시스템 기초 ⭐⭐⭐</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/ko/OS_Theory/15_Page_Replacement.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">페이지 교체 ⭐⭐⭐⭐</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">🔗</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/ko/OS_Theory/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">📋</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/ko/OS_Theory/17_File_System_Implementation.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">파일 시스템 구현 ⭐⭐⭐⭐</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#_2">개요</a></li>
<li><a href="#_3">목차</a></li>
<li><a href="#1">1. 파일의 개념</a><ul>
<li><a href="#11">1.1 파일이란?</a></li>
<li><a href="#12">1.2 파일 유형</a></li>
</ul>
</li>
<li><a href="#2">2. 파일 속성</a><ul>
<li><a href="#21-metadata">2.1 기본 속성 (Metadata)</a></li>
<li><a href="#22-unixlinux-stat">2.2 Unix/Linux stat 구조체</a></li>
<li><a href="#23-ls-l">2.3 ls -l 출력 해석</a></li>
</ul>
</li>
<li><a href="#3">3. 파일 연산과 시스템 콜</a><ul>
<li><a href="#31">3.1 기본 파일 연산</a></li>
<li><a href="#32">3.2 시스템 콜 예제</a></li>
<li><a href="#33-open-file-table">3.3 Open File Table</a></li>
</ul>
</li>
<li><a href="#4">4. 디렉토리 구조</a><ul>
<li><a href="#41">4.1 단일 레벨 디렉토리</a></li>
<li><a href="#42-2">4.2 2단계 디렉토리</a></li>
<li><a href="#43">4.3 트리 구조 디렉토리</a></li>
<li><a href="#44-acyclic-graph">4.4 비순환 그래프 디렉토리 (Acyclic Graph)</a></li>
</ul>
</li>
<li><a href="#5">5. 파일 접근 방법</a><ul>
<li><a href="#51-sequential-access">5.1 순차 접근 (Sequential Access)</a></li>
<li><a href="#52-directrandom-access">5.2 직접 접근 (Direct/Random Access)</a></li>
<li><a href="#53-indexed-access">5.3 인덱스 접근 (Indexed Access)</a></li>
</ul>
</li>
<li><a href="#6">6. 파일 시스템 마운트</a><ul>
<li><a href="#61">6.1 마운트 개념</a></li>
<li><a href="#62">6.2 마운트 명령어</a></li>
</ul>
</li>
<li><a href="#_4">연습 문제</a><ul>
<li><a href="#1_1">문제 1: 파일 속성 해석</a></li>
<li><a href="#2_1">문제 2: 시스템 콜 시퀀스</a></li>
<li><a href="#3-vs">문제 3: 하드 링크 vs 심볼릭 링크</a></li>
<li><a href="#4_1">문제 4: 디렉토리 탐색</a></li>
<li><a href="#5-open-file-table">문제 5: Open File Table</a></li>
</ul>
</li>
<li><a href="#_5">다음 단계</a></li>
<li><a href="#_6">참고 자료</a></li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="_1">파일 시스템 기초 ⭐⭐⭐<a class="header-link" href="#_1" title="Permanent link">&para;</a></h1>
<h2 id="_2">개요<a class="header-link" href="#_2" title="Permanent link">&para;</a></h2>
<p>파일 시스템은 운영체제가 데이터를 디스크에 저장하고 관리하는 방법을 정의합니다. 파일의 개념, 속성, 연산, 디렉토리 구조, 접근 방법 등 핵심 개념을 학습합니다.</p>
<hr />
<h2 id="_3">목차<a class="header-link" href="#_3" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#1-파일의-개념">파일의 개념</a></li>
<li><a href="#2-파일-속성">파일 속성</a></li>
<li><a href="#3-파일-연산과-시스템-콜">파일 연산과 시스템 콜</a></li>
<li><a href="#4-디렉토리-구조">디렉토리 구조</a></li>
<li><a href="#5-파일-접근-방법">파일 접근 방법</a></li>
<li><a href="#6-파일-시스템-마운트">파일 시스템 마운트</a></li>
<li><a href="#연습-문제">연습 문제</a></li>
</ol>
<hr />
<h2 id="1">1. 파일의 개념<a class="header-link" href="#1" title="Permanent link">&para;</a></h2>
<h3 id="11">1.1 파일이란?<a class="header-link" href="#11" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────┐
│                         파일의 정의                                      │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   파일 = 연관된 정보의 이름 붙은 집합                                   │
│          (Named collection of related information)                      │
│                                                                          │
│   운영체제 관점:                                                        │
│   ┌─────────────────────────────────────────────────────────────────┐   │
│   │                                                                  │   │
│   │   디스크 (물리적 저장장치)                                       │   │
│   │   ┌─────┬─────┬─────┬─────┬─────┬─────┬─────┬─────┐            │   │
│   │   │블록0│블록1│블록2│블록3│블록4│블록5│블록6│블록7│            │   │
│   │   └─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┘            │   │
│   │       ↑         ↑     ↑         ↑     ↑     ↑                   │   │
│   │       └────┬────┘     └────┬────┘     └──┬──┘                   │   │
│   │            │               │             │                       │   │
│   │         파일 A          파일 B        파일 C                     │   │
│   │                                                                  │   │
│   └─────────────────────────────────────────────────────────────────┘   │
│                                                                          │
│   사용자 관점:                                                          │
│   ┌─────────────────────────────────────────────────────────────────┐   │
│   │                                                                  │   │
│   │   논리적 저장 단위                                               │   │
│   │                                                                  │   │
│   │   ┌──────────────┐  ┌──────────────┐  ┌──────────────┐          │   │
│   │   │ report.docx  │  │ photo.jpg    │  │ program.exe  │          │   │
│   │   │ (문서)       │  │ (이미지)     │  │ (실행파일)   │          │   │
│   │   └──────────────┘  └──────────────┘  └──────────────┘          │   │
│   │                                                                  │   │
│   └─────────────────────────────────────────────────────────────────┘   │
│                                                                          │
│   파일 시스템: 이 두 관점을 연결하는 추상화 계층                        │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="12">1.2 파일 유형<a class="header-link" href="#12" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────┐
│                          파일 유형                                       │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   ┌───────────────┬──────────────┬─────────────────────────────────┐    │
│   │     유형      │    확장자    │            설명                 │    │
│   ├───────────────┼──────────────┼─────────────────────────────────┤    │
│   │ 실행 파일     │ .exe, .com   │ 기계어 코드                     │    │
│   │               │ .bin, (없음) │                                 │    │
│   ├───────────────┼──────────────┼─────────────────────────────────┤    │
│   │ 오브젝트      │ .o, .obj     │ 컴파일된 목적 코드              │    │
│   ├───────────────┼──────────────┼─────────────────────────────────┤    │
│   │ 소스 코드     │ .c, .py, .js │ 프로그래밍 언어 소스            │    │
│   ├───────────────┼──────────────┼─────────────────────────────────┤    │
│   │ 텍스트        │ .txt, .md    │ 일반 텍스트                     │    │
│   ├───────────────┼──────────────┼─────────────────────────────────┤    │
│   │ 라이브러리    │ .a, .so      │ 정적/동적 라이브러리            │    │
│   │               │ .lib, .dll   │                                 │    │
│   ├───────────────┼──────────────┼─────────────────────────────────┤    │
│   │ 이미지        │ .jpg, .png   │ 그래픽 데이터                   │    │
│   │               │ .gif, .bmp   │                                 │    │
│   ├───────────────┼──────────────┼─────────────────────────────────┤    │
│   │ 압축          │ .zip, .tar   │ 압축된 아카이브                 │    │
│   │               │ .gz, .7z     │                                 │    │
│   └───────────────┴──────────────┴─────────────────────────────────┘    │
│                                                                          │
│   유닉스에서는 확장자가 필수가 아님 (Convention만 존재)                 │
│   내용에 따른 유형 판단: file 명령어                                   │
│                                                                          │
│   $ file /bin/ls                                                        │
│   /bin/ls: ELF 64-bit LSB shared object, x86-64...                     │
│                                                                          │
│   $ file report.pdf                                                     │
│   report.pdf: PDF document, version 1.4                                 │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<hr />
<h2 id="2">2. 파일 속성<a class="header-link" href="#2" title="Permanent link">&para;</a></h2>
<h3 id="21-metadata">2.1 기본 속성 (Metadata)<a class="header-link" href="#21-metadata" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────┐
│                         파일 속성                                        │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   ┌─────────────────┬───────────────────────────────────────────────┐   │
│   │      속성       │                  설명                          │   │
│   ├─────────────────┼───────────────────────────────────────────────┤   │
│   │ 이름 (Name)     │ 사용자가 읽을 수 있는 파일명                  │   │
│   ├─────────────────┼───────────────────────────────────────────────┤   │
│   │ 식별자          │ 파일 시스템 내 고유 번호 (inode 번호)         │   │
│   ├─────────────────┼───────────────────────────────────────────────┤   │
│   │ 유형 (Type)     │ 일반파일, 디렉토리, 심볼릭링크, 디바이스 등   │   │
│   ├─────────────────┼───────────────────────────────────────────────┤   │
│   │ 위치 (Location) │ 디스크에서의 저장 위치 (블록 포인터)          │   │
│   ├─────────────────┼───────────────────────────────────────────────┤   │
│   │ 크기 (Size)     │ 파일의 바이트 수                              │   │
│   ├─────────────────┼───────────────────────────────────────────────┤   │
│   │ 보호 (Protection)│ 접근 권한 (rwxrwxrwx)                        │   │
│   ├─────────────────┼───────────────────────────────────────────────┤   │
│   │ 소유자 (Owner)  │ 파일 소유자 (UID)                             │   │
│   ├─────────────────┼───────────────────────────────────────────────┤   │
│   │ 그룹 (Group)    │ 파일 그룹 (GID)                               │   │
│   ├─────────────────┼───────────────────────────────────────────────┤   │
│   │ 시간 정보       │ 생성, 수정, 접근 시간                         │   │
│   └─────────────────┴───────────────────────────────────────────────┘   │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="22-unixlinux-stat">2.2 Unix/Linux stat 구조체<a class="header-link" href="#22-unixlinux-stat" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sys/stat.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;time.h&gt;</span>

<span class="c1">// stat 구조체 (파일 속성 저장)</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">stat</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">dev_t</span><span class="w">     </span><span class="n">st_dev</span><span class="p">;</span><span class="w">      </span><span class="c1">// 장치 ID</span>
<span class="w">    </span><span class="kt">ino_t</span><span class="w">     </span><span class="n">st_ino</span><span class="p">;</span><span class="w">      </span><span class="c1">// inode 번호</span>
<span class="w">    </span><span class="kt">mode_t</span><span class="w">    </span><span class="n">st_mode</span><span class="p">;</span><span class="w">     </span><span class="c1">// 파일 모드 (유형 + 권한)</span>
<span class="w">    </span><span class="n">nlink_t</span><span class="w">   </span><span class="n">st_nlink</span><span class="p">;</span><span class="w">    </span><span class="c1">// 하드 링크 수</span>
<span class="w">    </span><span class="kt">uid_t</span><span class="w">     </span><span class="n">st_uid</span><span class="p">;</span><span class="w">      </span><span class="c1">// 소유자 UID</span>
<span class="w">    </span><span class="kt">gid_t</span><span class="w">     </span><span class="n">st_gid</span><span class="p">;</span><span class="w">      </span><span class="c1">// 그룹 GID</span>
<span class="w">    </span><span class="kt">dev_t</span><span class="w">     </span><span class="n">st_rdev</span><span class="p">;</span><span class="w">     </span><span class="c1">// 장치 ID (특수 파일)</span>
<span class="w">    </span><span class="kt">off_t</span><span class="w">     </span><span class="n">st_size</span><span class="p">;</span><span class="w">     </span><span class="c1">// 총 크기 (바이트)</span>
<span class="w">    </span><span class="n">blksize_t</span><span class="w"> </span><span class="n">st_blksize</span><span class="p">;</span><span class="w">  </span><span class="c1">// I/O 블록 크기</span>
<span class="w">    </span><span class="n">blkcnt_t</span><span class="w">  </span><span class="n">st_blocks</span><span class="p">;</span><span class="w">   </span><span class="c1">// 할당된 512B 블록 수</span>

<span class="w">    </span><span class="c1">// 시간 정보</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">timespec</span><span class="w"> </span><span class="n">st_atim</span><span class="p">;</span><span class="w">  </span><span class="c1">// 마지막 접근 시간</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">timespec</span><span class="w"> </span><span class="n">st_mtim</span><span class="p">;</span><span class="w">  </span><span class="c1">// 마지막 수정 시간</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">timespec</span><span class="w"> </span><span class="n">st_ctim</span><span class="p">;</span><span class="w">  </span><span class="c1">// 마지막 상태 변경 시간</span>
<span class="p">};</span>

<span class="c1">// 파일 속성 조회 예제</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">print_file_info</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">path</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">stat</span><span class="w"> </span><span class="n">sb</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">stat</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">sb</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">-1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">perror</span><span class="p">(</span><span class="s">&quot;stat&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;파일: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">path</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;inode: %lu</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sb</span><span class="p">.</span><span class="n">st_ino</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;크기: %ld 바이트</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sb</span><span class="p">.</span><span class="n">st_size</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;블록: %ld</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sb</span><span class="p">.</span><span class="n">st_blocks</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;권한: %o</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sb</span><span class="p">.</span><span class="n">st_mode</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mo">0777</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;소유자: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sb</span><span class="p">.</span><span class="n">st_uid</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;링크: %lu</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sb</span><span class="p">.</span><span class="n">st_nlink</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// 파일 유형</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">S_ISREG</span><span class="p">(</span><span class="n">sb</span><span class="p">.</span><span class="n">st_mode</span><span class="p">))</span><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;유형: 일반 파일</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">S_ISDIR</span><span class="p">(</span><span class="n">sb</span><span class="p">.</span><span class="n">st_mode</span><span class="p">))</span><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;유형: 디렉토리</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">S_ISLNK</span><span class="p">(</span><span class="n">sb</span><span class="p">.</span><span class="n">st_mode</span><span class="p">))</span><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;유형: 심볼릭 링크</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">S_ISCHR</span><span class="p">(</span><span class="n">sb</span><span class="p">.</span><span class="n">st_mode</span><span class="p">))</span><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;유형: 문자 장치</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">S_ISBLK</span><span class="p">(</span><span class="n">sb</span><span class="p">.</span><span class="n">st_mode</span><span class="p">))</span><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;유형: 블록 장치</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;수정 시간: %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ctime</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sb</span><span class="p">.</span><span class="n">st_mtime</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="23-ls-l">2.3 ls -l 출력 해석<a class="header-link" href="#23-ls-l" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────┐
│                     ls -l 출력 분석                                      │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   $ ls -l                                                               │
│   -rw-r--r-- 1 user group 4096 Jan 15 10:30 document.txt               │
│   │├──┤├─┤│  │  │     │     │      │     │     └── 파일명             │
│   ││  │ │ │  │  │     │     │      │     └── 시간                     │
│   ││  │ │ │  │  │     │     │      └── 날짜                           │
│   ││  │ │ │  │  │     │     └── 크기 (바이트)                         │
│   ││  │ │ │  │  │     └── 그룹                                        │
│   ││  │ │ │  │  └── 소유자                                            │
│   ││  │ │ │  └── 하드 링크 수                                         │
│   ││  │ │ └── 기타 권한                                               │
│   ││  │ └── 그룹 권한                                                 │
│   ││  └── 소유자 권한                                                 │
│   │└── 파일 유형                                                      │
│   └── - 일반파일, d 디렉토리, l 링크, c 문자장치, b 블록장치         │
│                                                                          │
│   권한:                                                                  │
│   r (4) = 읽기                                                          │
│   w (2) = 쓰기                                                          │
│   x (1) = 실행 (디렉토리는 접근)                                       │
│                                                                          │
│   예: rw-r--r-- = 644 = 소유자: rw, 그룹: r, 기타: r                   │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<hr />
<h2 id="3">3. 파일 연산과 시스템 콜<a class="header-link" href="#3" title="Permanent link">&para;</a></h2>
<h3 id="31">3.1 기본 파일 연산<a class="header-link" href="#31" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────┐
│                        파일 연산 종류                                    │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   ┌─────────────────┬───────────────────────────────────────────────┐   │
│   │     연산        │                  설명                          │   │
│   ├─────────────────┼───────────────────────────────────────────────┤   │
│   │ 생성 (Create)   │ 새 파일 생성, 디렉토리에 엔트리 추가          │   │
│   │ 열기 (Open)     │ 파일 접근 준비, 파일 디스크립터 반환          │   │
│   │ 읽기 (Read)     │ 현재 위치에서 데이터 읽기                     │   │
│   │ 쓰기 (Write)    │ 현재 위치에 데이터 쓰기                       │   │
│   │ 이동 (Seek)     │ 파일 내 현재 위치 변경                        │   │
│   │ 닫기 (Close)    │ 파일 접근 종료, 리소스 해제                   │   │
│   │ 삭제 (Delete)   │ 파일 제거, 디렉토리에서 엔트리 삭제           │   │
│   │ 자르기 (Truncate)│ 파일 크기를 0으로 (내용 삭제)                │   │
│   └─────────────────┴───────────────────────────────────────────────┘   │
│                                                                          │
│   추가 연산:                                                             │
│   - Append: 파일 끝에 데이터 추가                                       │
│   - Rename: 파일명 변경                                                 │
│   - Get/Set Attributes: 속성 조회/변경                                  │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="32">3.2 시스템 콜 예제<a class="header-link" href="#32" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;fcntl.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;errno.h&gt;</span>

<span class="c1">// 파일 생성 및 쓰기</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">create_and_write</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">path</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// O_CREAT: 없으면 생성</span>
<span class="w">    </span><span class="c1">// O_WRONLY: 쓰기 전용</span>
<span class="w">    </span><span class="c1">// O_TRUNC: 기존 내용 삭제</span>
<span class="w">    </span><span class="c1">// 0644: 권한 (rw-r--r--)</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">fd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="n">O_CREAT</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">O_WRONLY</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">O_TRUNC</span><span class="p">,</span><span class="w"> </span><span class="mo">0644</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">fd</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">-1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">perror</span><span class="p">(</span><span class="s">&quot;open&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Hello, File System!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="kt">ssize_t</span><span class="w"> </span><span class="n">written</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">write</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">strlen</span><span class="p">(</span><span class="n">data</span><span class="p">));</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">written</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">-1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">perror</span><span class="p">(</span><span class="s">&quot;write&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%zd 바이트 기록됨</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">written</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// 파일 읽기</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">read_file</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">path</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">fd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="n">O_RDONLY</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">fd</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">-1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">perror</span><span class="p">(</span><span class="s">&quot;open&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">buffer</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span>
<span class="w">    </span><span class="kt">ssize_t</span><span class="w"> </span><span class="n">bytes_read</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// read()는 읽은 바이트 수 반환, 0은 EOF</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">((</span><span class="n">bytes_read</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">read</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">buffer</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">buffer</span><span class="p">[</span><span class="n">bytes_read</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;\0&#39;</span><span class="p">;</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">buffer</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">bytes_read</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">-1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">perror</span><span class="p">(</span><span class="s">&quot;read&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// 파일 위치 이동 (Seek)</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">seek_example</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">path</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">fd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="n">O_RDONLY</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">fd</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">-1</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 파일 끝으로 이동하여 크기 확인</span>
<span class="w">    </span><span class="kt">off_t</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lseek</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">SEEK_END</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;파일 크기: %ld 바이트</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// 처음으로 되돌아가기</span>
<span class="w">    </span><span class="n">lseek</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">SEEK_SET</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// 10바이트 앞으로 이동</span>
<span class="w">    </span><span class="n">lseek</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">SEEK_CUR</span><span class="p">);</span>

<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">buffer</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span>
<span class="w">    </span><span class="n">read</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span>
<span class="w">    </span><span class="n">buffer</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;\0&#39;</span><span class="p">;</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;10바이트 이후 10글자: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">buffer</span><span class="p">);</span>

<span class="w">    </span><span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// 파일 복사 구현</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">copy_file</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">src</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">dst</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">src_fd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">open</span><span class="p">(</span><span class="n">src</span><span class="p">,</span><span class="w"> </span><span class="n">O_RDONLY</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">src_fd</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">-1</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>

<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dst_fd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">open</span><span class="p">(</span><span class="n">dst</span><span class="p">,</span><span class="w"> </span><span class="n">O_WRONLY</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">O_CREAT</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">O_TRUNC</span><span class="p">,</span><span class="w"> </span><span class="mo">0644</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">dst_fd</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">-1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">close</span><span class="p">(</span><span class="n">src_fd</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">buffer</span><span class="p">[</span><span class="mi">4096</span><span class="p">];</span>
<span class="w">    </span><span class="kt">ssize_t</span><span class="w"> </span><span class="n">bytes</span><span class="p">;</span>

<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">((</span><span class="n">bytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">read</span><span class="p">(</span><span class="n">src_fd</span><span class="p">,</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">buffer</span><span class="p">)))</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">ssize_t</span><span class="w"> </span><span class="n">written</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">write</span><span class="p">(</span><span class="n">dst_fd</span><span class="p">,</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="n">bytes</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">written</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">bytes</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">close</span><span class="p">(</span><span class="n">src_fd</span><span class="p">);</span>
<span class="w">            </span><span class="n">close</span><span class="p">(</span><span class="n">dst_fd</span><span class="p">);</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">close</span><span class="p">(</span><span class="n">src_fd</span><span class="p">);</span>
<span class="w">    </span><span class="n">close</span><span class="p">(</span><span class="n">dst_fd</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">create_and_write</span><span class="p">(</span><span class="s">&quot;test.txt&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">read_file</span><span class="p">(</span><span class="s">&quot;test.txt&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">seek_example</span><span class="p">(</span><span class="s">&quot;test.txt&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">copy_file</span><span class="p">(</span><span class="s">&quot;test.txt&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;test_copy.txt&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="33-open-file-table">3.3 Open File Table<a class="header-link" href="#33-open-file-table" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────┐
│                     Open File Table 구조                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   프로세스 A                프로세스 B                                  │
│   ┌──────────────────┐      ┌──────────────────┐                       │
│   │ fd table         │      │ fd table         │                       │
│   ├──────────────────┤      ├──────────────────┤                       │
│   │ 0: stdin         │      │ 0: stdin         │                       │
│   │ 1: stdout        │      │ 1: stdout        │                       │
│   │ 2: stderr        │      │ 2: stderr        │                       │
│   │ 3: ─────────────┐│      │ 3: ─────────────┐│                       │
│   │ 4: ────────────┐││      └─────────────────┼┘                       │
│   └────────────────┼┼┘                        │                        │
│                    ││                         │                        │
│                    ▼▼                         │                        │
│   System-wide Open File Table                 │                        │
│   ┌─────────────────────────────────────────┐ │                        │
│   │ 엔트리 1:                               │ │                        │
│   │   - 파일 위치 (offset): 100             │◀┘                        │
│   │   - 접근 모드: O_RDONLY                 │                          │
│   │   - 참조 카운트: 2                      │                          │
│   │   - inode 포인터: ──────────────────────┼───┐                      │
│   ├─────────────────────────────────────────┤   │                      │
│   │ 엔트리 2:                               │   │                      │
│   │   - 파일 위치 (offset): 500             │   │                      │
│   │   - 접근 모드: O_RDWR                   │   │                      │
│   │   - 참조 카운트: 1                      │   │                      │
│   │   - inode 포인터: ──────────────────────┼───┼───┐                  │
│   └─────────────────────────────────────────┘   │   │                  │
│                                                 │   │                  │
│   In-Memory inode Table                         │   │                  │
│   ┌─────────────────────────────────────────┐   │   │                  │
│   │ inode 1234:                             │◀──┘   │                  │
│   │   - 파일 크기: 4096                     │       │                  │
│   │   - 디스크 블록 위치                    │       │                  │
│   │   - 권한, 소유자 등                     │       │                  │
│   ├─────────────────────────────────────────┤       │                  │
│   │ inode 5678:                             │◀──────┘                  │
│   │   - 파일 크기: 8192                     │                          │
│   │   - ...                                 │                          │
│   └─────────────────────────────────────────┘                          │
│                                                                          │
│   fork() 시: fd table 복사, open file entry 공유 (offset 공유!)        │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<hr />
<h2 id="4">4. 디렉토리 구조<a class="header-link" href="#4" title="Permanent link">&para;</a></h2>
<h3 id="41">4.1 단일 레벨 디렉토리<a class="header-link" href="#41" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────┐
│                    단일 레벨 디렉토리                                    │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   ┌─────────────────────────────────────────────────────────────────┐   │
│   │                         루트 디렉토리                            │   │
│   ├─────────────────────────────────────────────────────────────────┤   │
│   │ cat │ bo │ a │ test │ data │ mail │ cont │ hex │ records │     │   │
│   └──┬──┴──┬─┴──┬─┴───┬──┴───┬──┴───┬──┴───┬──┴──┬──┴────┬────┘     │   │
│      │     │    │     │      │      │      │     │       │           │   │
│      ▼     ▼    ▼     ▼      ▼      ▼      ▼     ▼       ▼           │   │
│     파일  파일  파일  파일   파일   파일   파일  파일    파일         │   │
│                                                                          │
│   문제점:                                                               │
│   - 파일명 충돌: 모든 사용자가 같은 이름 사용 불가                     │
│   - 관리 어려움: 파일 수 증가시 찾기 어려움                            │
│   - 그룹화 불가: 관련 파일을 묶을 수 없음                              │
│                                                                          │
│   초기 운영체제 (CP/M)에서 사용                                         │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="42-2">4.2 2단계 디렉토리<a class="header-link" href="#42-2" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────┐
│                      2단계 디렉토리                                      │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│                    마스터 파일 디렉토리 (MFD)                           │
│   ┌─────────────────────────────────────────────────────────────────┐   │
│   │            user1              user2              user3          │   │
│   └───────────────┬────────────────┬─────────────────┬──────────────┘   │
│                   │                │                 │                  │
│                   ▼                ▼                 ▼                  │
│        사용자 파일 디렉토리 (UFD)                                       │
│   ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐          │
│   │ cat   test  a   │ │ cat   data  b   │ │ hex   mail     │          │
│   └──┬──────┬────┬──┘ └──┬──────┬────┬──┘ └──┬──────┬──────┘          │
│      │      │    │       │      │    │       │      │                  │
│      ▼      ▼    ▼       ▼      ▼    ▼       ▼      ▼                  │
│                                                                          │
│   장점:                                                                  │
│   - 사용자별 독립적 이름 공간                                           │
│   - user1의 cat ≠ user2의 cat                                          │
│                                                                          │
│   단점:                                                                  │
│   - 사용자 간 파일 공유 어려움                                          │
│   - 하위 디렉토리 없음                                                  │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="43">4.3 트리 구조 디렉토리<a class="header-link" href="#43" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────┐
│                     트리 구조 디렉토리                                   │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│                              /                                           │
│                              │                                           │
│           ┌──────────────────┼──────────────────┐                       │
│           │                  │                  │                       │
│          bin               home               etc                       │
│           │                  │                  │                       │
│     ┌─────┴─────┐    ┌───────┼───────┐    ┌────┴────┐                  │
│    ls          cat   │       │       │   passwd   hosts                │
│                    user1   user2   user3                                │
│                      │       │       │                                  │
│                 ┌────┴────┐  │    documents                             │
│               docs     code  data     │                                  │
│                │         │    │    ┌──┴──┐                              │
│            ┌───┼───┐   main.c  │   report  notes                        │
│          a.txt b.txt         file.txt                                   │
│                                                                          │
│   특징:                                                                  │
│   - 임의 깊이의 하위 디렉토리 허용                                      │
│   - 절대 경로: /home/user1/docs/a.txt                                   │
│   - 상대 경로: ./docs/a.txt (현재 디렉토리 기준)                        │
│   - 현재 디렉토리 (.), 상위 디렉토리 (..)                              │
│                                                                          │
│   현재 대부분의 운영체제가 사용                                         │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="44-acyclic-graph">4.4 비순환 그래프 디렉토리 (Acyclic Graph)<a class="header-link" href="#44-acyclic-graph" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────┐
│                   비순환 그래프 디렉토리                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│                              /                                           │
│                              │                                           │
│           ┌──────────────────┼──────────────────┐                       │
│           │                  │                  │                       │
│          home              shared              │                        │
│           │                  │                 │                        │
│     ┌─────┴─────┐           project ◀─────────┘                        │
│   user1       user2          │ ▲                                        │
│     │           │      ┌─────┴─────┐                                    │
│  myproj ───────────────│           │                                    │
│                        │      공유 파일                                  │
│                   ourproj ────┘                                          │
│                                                                          │
│   파일/디렉토리 공유 방법:                                              │
│                                                                          │
│   1. 하드 링크 (Hard Link):                                             │
│      - 같은 inode를 가리키는 다른 이름                                  │
│      - ln target link_name                                              │
│      - 삭제 시 링크 카운트만 감소                                       │
│      - 디렉토리에는 사용 불가 (순환 방지)                               │
│                                                                          │
│   2. 심볼릭 링크 (Symbolic Link):                                       │
│      - 다른 파일의 경로를 저장                                          │
│      - ln -s target link_name                                           │
│      - 원본 삭제 시 끊어진 링크 (dangling link)                         │
│      - 디렉토리에도 사용 가능                                           │
│                                                                          │
│   $ ln /shared/project myproj          # 하드 링크                      │
│   $ ln -s /shared/project myproj       # 심볼릭 링크                    │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<hr />
<h2 id="5">5. 파일 접근 방법<a class="header-link" href="#5" title="Permanent link">&para;</a></h2>
<h3 id="51-sequential-access">5.1 순차 접근 (Sequential Access)<a class="header-link" href="#51-sequential-access" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">┌─────────────────────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w">                        </span><span class="nt">순차</span><span class="w"> </span><span class="nt">접근</span><span class="w">                                         </span><span class="err">│</span>
<span class="err">├─────────────────────────────────────────────────────────────────────────┤</span>
<span class="err">│</span><span class="w">                                                                          </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="nt">파일</span><span class="w">                                                                   </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌───┬───┬───┬───┬───┬───┬───┬───┬───┬───┐</span><span class="w">                            </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="nt">A</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="nt">B</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="nt">C</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="nt">D</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="nt">E</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="nt">F</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="nt">G</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="nt">H</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="nt">I</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="nt">J</span><span class="w"> </span><span class="err">│</span><span class="w">                            </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└───┴───┴───┴───┴───┴───┴───┴───┴───┴───┘</span><span class="w">                            </span><span class="err">│</span>
<span class="err">│</span><span class="w">             </span><span class="err">↑</span><span class="w">                                                            </span><span class="err">│</span>
<span class="err">│</span><span class="w">          </span><span class="nt">현재</span><span class="w"> </span><span class="nt">위치</span><span class="w">                                                       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                                          </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="nt">연산</span><span class="o">:</span><span class="w">                                                                  </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="nt">-</span><span class="w"> </span><span class="nt">read</span><span class="o">():</span><span class="w"> </span><span class="nt">현재</span><span class="w"> </span><span class="nt">위치에서</span><span class="w"> </span><span class="nt">읽고</span><span class="o">,</span><span class="w"> </span><span class="nt">위치</span><span class="w"> </span><span class="nt">전진</span><span class="w">                               </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="nt">-</span><span class="w"> </span><span class="nt">write</span><span class="o">():</span><span class="w"> </span><span class="nt">현재</span><span class="w"> </span><span class="nt">위치에</span><span class="w"> </span><span class="nt">쓰고</span><span class="o">,</span><span class="w"> </span><span class="nt">위치</span><span class="w"> </span><span class="nt">전진</span><span class="w">                                </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="nt">-</span><span class="w"> </span><span class="nt">reset</span><span class="o">():</span><span class="w"> </span><span class="nt">처음으로</span><span class="w"> </span><span class="nt">되돌리기</span><span class="w">                                          </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                                          </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="nt">특징</span><span class="o">:</span><span class="w">                                                                  </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="nt">-</span><span class="w"> </span><span class="nt">테이프</span><span class="w"> </span><span class="nt">기반</span><span class="w"> </span><span class="nt">시스템에서</span><span class="w"> </span><span class="nt">유래</span><span class="w">                                         </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="nt">-</span><span class="w"> </span><span class="nt">편집기</span><span class="o">,</span><span class="w"> </span><span class="nt">컴파일러에서</span><span class="w"> </span><span class="nt">주로</span><span class="w"> </span><span class="nt">사용</span><span class="w">                                      </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="nt">-</span><span class="w"> </span><span class="nt">로그</span><span class="w"> </span><span class="nt">파일</span><span class="w"> </span><span class="nt">처리에</span><span class="w"> </span><span class="nt">적합</span><span class="w">                                               </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                                          </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="nt">예</span><span class="o">:</span><span class="w"> </span><span class="nt">파일</span><span class="w"> </span><span class="nt">끝까지</span><span class="w"> </span><span class="nt">순차</span><span class="w"> </span><span class="nt">읽기</span><span class="w">                                             </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="nt">while</span><span class="w"> </span><span class="o">(</span><span class="nt">read</span><span class="o">(</span><span class="nt">fd</span><span class="o">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nt">buf</span><span class="o">,</span><span class="w"> </span><span class="nt">size</span><span class="o">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">0</span><span class="o">)</span><span class="w"> </span><span class="p">{</span><span class="w">                                    </span><span class="err">│</span>
<span class="err">│</span><span class="w">       </span><span class="err">process(buf)</span><span class="p">;</span><span class="w">                                                      </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="p">}</span><span class="w">                                                                      </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                                          </span><span class="err">│</span>
<span class="err">└─────────────────────────────────────────────────────────────────────────┘</span>
</code></pre></div>

<h3 id="52-directrandom-access">5.2 직접 접근 (Direct/Random Access)<a class="header-link" href="#52-directrandom-access" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">┌─────────────────────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w">                        </span><span class="nt">직접</span><span class="w"> </span><span class="nt">접근</span><span class="w">                                         </span><span class="err">│</span>
<span class="err">├─────────────────────────────────────────────────────────────────────────┤</span>
<span class="err">│</span><span class="w">                                                                          </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="nt">파일</span><span class="w"> </span><span class="o">(</span><span class="nt">논리적</span><span class="w"> </span><span class="nt">블록</span><span class="w"> </span><span class="nt">단위</span><span class="o">)</span><span class="w">                                               </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="nt">블록</span><span class="o">:</span><span class="w">  </span><span class="nt">0</span><span class="w">     </span><span class="nt">1</span><span class="w">     </span><span class="nt">2</span><span class="w">     </span><span class="nt">3</span><span class="w">     </span><span class="nt">4</span><span class="w">     </span><span class="nt">5</span><span class="w">     </span><span class="nt">6</span><span class="w">     </span><span class="nt">7</span><span class="w">     </span><span class="nt">8</span><span class="w">     </span><span class="nt">9</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌─────┬─────┬─────┬─────┬─────┬─────┬─────┬─────┬─────┬─────┐</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┘</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w">           </span><span class="err">↑</span><span class="w">                       </span><span class="err">↑</span><span class="w">                                      </span><span class="err">│</span>
<span class="err">│</span><span class="w">        </span><span class="nt">블록</span><span class="w"> </span><span class="nt">1</span><span class="w">                  </span><span class="nt">블록</span><span class="w"> </span><span class="nt">5</span><span class="w">                                    </span><span class="err">│</span>
<span class="err">│</span><span class="w">         </span><span class="nt">읽기</span><span class="w">                    </span><span class="nt">읽기</span><span class="w">                                     </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                                          </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="nt">연산</span><span class="o">:</span><span class="w">                                                                  </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="nt">-</span><span class="w"> </span><span class="nt">read</span><span class="o">(</span><span class="nt">n</span><span class="o">):</span><span class="w"> </span><span class="nt">블록</span><span class="w"> </span><span class="nt">n</span><span class="w"> </span><span class="nt">읽기</span><span class="w">                                                </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="nt">-</span><span class="w"> </span><span class="nt">write</span><span class="o">(</span><span class="nt">n</span><span class="o">):</span><span class="w"> </span><span class="nt">블록</span><span class="w"> </span><span class="nt">n</span><span class="w"> </span><span class="nt">쓰기</span><span class="w">                                               </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="nt">-</span><span class="w"> </span><span class="nt">seek</span><span class="o">(</span><span class="nt">n</span><span class="o">):</span><span class="w"> </span><span class="nt">블록</span><span class="w"> </span><span class="nt">n으로</span><span class="w"> </span><span class="nt">이동</span><span class="w">                                            </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                                          </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="nt">특징</span><span class="o">:</span><span class="w">                                                                  </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="nt">-</span><span class="w"> </span><span class="nt">디스크</span><span class="w"> </span><span class="nt">기반</span><span class="w"> </span><span class="nt">시스템</span><span class="w">                                                  </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="nt">-</span><span class="w"> </span><span class="nt">데이터베이스에</span><span class="w"> </span><span class="nt">적합</span><span class="w">                                                 </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="nt">-</span><span class="w"> </span><span class="nt">순서</span><span class="w"> </span><span class="nt">없이</span><span class="w"> </span><span class="nt">임의</span><span class="w"> </span><span class="nt">위치</span><span class="w"> </span><span class="nt">접근</span><span class="w">                                            </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                                          </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="nt">예</span><span class="o">:</span><span class="w"> </span><span class="nt">레코드</span><span class="w"> </span><span class="nt">직접</span><span class="w"> </span><span class="nt">접근</span><span class="w">                                                   </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="p">#</span><span class="nn">define</span><span class="w"> </span><span class="nt">RECORD_SIZE</span><span class="w"> </span><span class="nt">100</span><span class="w">                                               </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="nt">lseek</span><span class="o">(</span><span class="nt">fd</span><span class="o">,</span><span class="w"> </span><span class="nt">record_num</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nt">RECORD_SIZE</span><span class="o">,</span><span class="w"> </span><span class="nt">SEEK_SET</span><span class="o">);</span><span class="w">                        </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="nt">read</span><span class="o">(</span><span class="nt">fd</span><span class="o">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nt">record</span><span class="o">,</span><span class="w"> </span><span class="nt">RECORD_SIZE</span><span class="o">);</span><span class="w">                                       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                                          </span><span class="err">│</span>
<span class="err">└─────────────────────────────────────────────────────────────────────────┘</span>
</code></pre></div>

<h3 id="53-indexed-access">5.3 인덱스 접근 (Indexed Access)<a class="header-link" href="#53-indexed-access" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────┐
│                       인덱스 접근                                        │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   인덱스 파일                             데이터 파일                    │
│   ┌────────────────────┐                 ┌─────────────────────────┐    │
│   │ 키      │ 블록 포인터│                 │ 블록 0                  │    │
│   ├─────────┼───────────┤                 ├─────────────────────────┤    │
│   │ &quot;Apple&quot; │     7     │────────────────▶│ 블록 7: Apple 데이터    │    │
│   │ &quot;Banana&quot;│     3     │────────────┐   ├─────────────────────────┤    │
│   │ &quot;Cherry&quot;│     12    │──────────┐ │   │ 블록 3: Banana 데이터   │◀──┤
│   │ &quot;Date&quot;  │     5     │────────┐ │ │   ├─────────────────────────┤    │
│   │  ...    │   ...     │        │ │ │   │ 블록 12: Cherry 데이터  │◀──┘
│   └─────────┴───────────┘        │ │ │   ├─────────────────────────┤
│                                  │ │ │   │ 블록 5: Date 데이터     │◀──┐
│                                  │ │ └──▶│                         │   │
│                                  │ │     └─────────────────────────┘   │
│                                  │ │                                    │
│                                  └─┼────────────────────────────────────┘
│                                    │
│                                    └── (인덱스에서 위치를 찾아 직접 접근)
│
│   특징:                                                                  │
│   - 큰 파일의 빠른 검색                                                 │
│   - 인덱스 자체가 너무 크면 다단계 인덱스                               │
│   - 데이터베이스의 B+트리 인덱스                                        │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<hr />
<h2 id="6">6. 파일 시스템 마운트<a class="header-link" href="#6" title="Permanent link">&para;</a></h2>
<h3 id="61">6.1 마운트 개념<a class="header-link" href="#61" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────────────┐
│                         파일 시스템 마운트                               │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   마운트 전:                                                             │
│                                                                          │
│   루트 파일 시스템 (/)                USB 드라이브                       │
│           /                          독립된 트리                         │
│          ╱│╲                              │                             │
│        bin home etc                      ╱ ╲                            │
│             │                         photo  doc                         │
│           user1                                                          │
│            │                                                             │
│          mnt (빈 디렉토리)                                              │
│                                                                          │
│   마운트 후 (mount /dev/sdb1 /home/user1/mnt):                          │
│                                                                          │
│           /                                                              │
│          ╱│╲                                                            │
│        bin home etc                                                      │
│             │                                                            │
│           user1                                                          │
│            │                                                             │
│          mnt ◀─────────── 마운트 포인트                                 │
│          ╱ ╲                                                            │
│       photo  doc   ← USB 드라이브의 내용이 여기에 보임                  │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="62">6.2 마운트 명령어<a class="header-link" href="#62" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 마운트 상태 확인</span>
$<span class="w"> </span>mount
/dev/sda1<span class="w"> </span>on<span class="w"> </span>/<span class="w"> </span><span class="nb">type</span><span class="w"> </span>ext4<span class="w"> </span><span class="o">(</span>rw,relatime<span class="o">)</span>
/dev/sdb1<span class="w"> </span>on<span class="w"> </span>/mnt/usb<span class="w"> </span><span class="nb">type</span><span class="w"> </span>vfat<span class="w"> </span><span class="o">(</span>rw,user<span class="o">)</span>

<span class="c1"># USB 드라이브 마운트</span>
$<span class="w"> </span>sudo<span class="w"> </span>mount<span class="w"> </span>/dev/sdb1<span class="w"> </span>/mnt/usb

<span class="c1"># 옵션과 함께 마운트</span>
$<span class="w"> </span>sudo<span class="w"> </span>mount<span class="w"> </span>-t<span class="w"> </span>ext4<span class="w"> </span>-o<span class="w"> </span>ro,noexec<span class="w"> </span>/dev/sdc1<span class="w"> </span>/mnt/backup

<span class="c1"># 마운트 옵션:</span>
<span class="c1"># ro: 읽기 전용</span>
<span class="c1"># rw: 읽기/쓰기</span>
<span class="c1"># noexec: 실행 파일 실행 불가</span>
<span class="c1"># nosuid: setuid 무시</span>
<span class="c1"># user: 일반 사용자가 마운트 가능</span>

<span class="c1"># 언마운트</span>
$<span class="w"> </span>sudo<span class="w"> </span>umount<span class="w"> </span>/mnt/usb

<span class="c1"># /etc/fstab - 부팅 시 자동 마운트 설정</span>
<span class="c1"># 장치              마운트포인트     타입    옵션               덤프 패스</span>
/dev/sda1<span class="w">          </span>/<span class="w">               </span>ext4<span class="w">    </span>defaults<span class="w">           </span><span class="m">1</span><span class="w">    </span><span class="m">1</span>
/dev/sda2<span class="w">          </span>/home<span class="w">           </span>ext4<span class="w">    </span>defaults<span class="w">           </span><span class="m">1</span><span class="w">    </span><span class="m">2</span>
/dev/sdb1<span class="w">          </span>/mnt/data<span class="w">       </span>ext4<span class="w">    </span>defaults,nofail<span class="w">    </span><span class="m">0</span><span class="w">    </span><span class="m">2</span>
<span class="nv">UUID</span><span class="o">=</span>xxxx-xxxx<span class="w">     </span>/mnt/usb<span class="w">        </span>vfat<span class="w">    </span>user,noauto<span class="w">        </span><span class="m">0</span><span class="w">    </span><span class="m">0</span>
</code></pre></div>

<hr />
<h2 id="_4">연습 문제<a class="header-link" href="#_4" title="Permanent link">&para;</a></h2>
<h3 id="1_1">문제 1: 파일 속성 해석<a class="header-link" href="#1_1" title="Permanent link">&para;</a></h3>
<p><code>ls -l</code> 출력이 다음과 같을 때 각 필드를 해석하시오.</p>
<div class="highlight"><pre><span></span><code>-rwxr-x--- 2 alice developers 8192 Mar 15 14:30 script.sh
</code></pre></div>

<details>
<summary>정답 보기</summary>


<div class="highlight"><pre><span></span><code>- : 일반 파일 (d면 디렉토리, l이면 링크)
rwx : 소유자(alice) 권한 - 읽기/쓰기/실행
r-x : 그룹(developers) 권한 - 읽기/실행
--- : 기타 사용자 권한 - 없음
2 : 하드 링크 수 (이 파일에 대한 이름이 2개)
alice : 소유자
developers : 소유 그룹
8192 : 파일 크기 (8KB)
Mar 15 14:30 : 마지막 수정 시간
script.sh : 파일 이름

권한 숫자: 750 (7=rwx, 5=r-x, 0=---)
</code></pre></div>



</details>

<h3 id="2_1">문제 2: 시스템 콜 시퀀스<a class="header-link" href="#2_1" title="Permanent link">&para;</a></h3>
<p>파일 <code>/tmp/log.txt</code>에 "Hello World"를 추가(append)하는 시스템 콜 시퀀스를 작성하시오.</p>
<details>
<summary>정답 보기</summary>


<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="n">fd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">open</span><span class="p">(</span><span class="s">&quot;/tmp/log.txt&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">O_WRONLY</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">O_APPEND</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">O_CREAT</span><span class="p">,</span><span class="w"> </span><span class="mo">0644</span><span class="p">);</span>
<span class="c1">// O_APPEND: 항상 파일 끝에 쓰기</span>
<span class="c1">// O_CREAT: 파일이 없으면 생성</span>
<span class="c1">// 0644: 권한 설정</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">fd</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">-1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">perror</span><span class="p">(</span><span class="s">&quot;open failed&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">msg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Hello World</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="kt">ssize_t</span><span class="w"> </span><span class="n">written</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">write</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="n">msg</span><span class="p">,</span><span class="w"> </span><span class="n">strlen</span><span class="p">(</span><span class="n">msg</span><span class="p">));</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">written</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">-1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">perror</span><span class="p">(</span><span class="s">&quot;write failed&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">);</span>
</code></pre></div>



</details>

<h3 id="3-vs">문제 3: 하드 링크 vs 심볼릭 링크<a class="header-link" href="#3-vs" title="Permanent link">&para;</a></h3>
<p>다음 시나리오에서 각 링크 유형의 동작을 설명하시오.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;original&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>file.txt
$<span class="w"> </span>ln<span class="w"> </span>file.txt<span class="w"> </span>hardlink.txt<span class="w">       </span><span class="c1"># 하드 링크</span>
$<span class="w"> </span>ln<span class="w"> </span>-s<span class="w"> </span>file.txt<span class="w"> </span>symlink.txt<span class="w">     </span><span class="c1"># 심볼릭 링크</span>
$<span class="w"> </span>rm<span class="w"> </span>file.txt
$<span class="w"> </span>cat<span class="w"> </span>hardlink.txt
$<span class="w"> </span>cat<span class="w"> </span>symlink.txt
</code></pre></div>

<details>
<summary>정답 보기</summary>


<div class="highlight"><pre><span></span><code>$<span class="w"> </span>cat<span class="w"> </span>hardlink.txt
original
→<span class="w"> </span>하드<span class="w"> </span>링크는<span class="w"> </span>같은<span class="w"> </span>inode를<span class="w"> </span>가리킴
→<span class="w"> </span>file.txt<span class="w"> </span>삭제해도<span class="w"> </span>데이터는<span class="w"> </span>여전히<span class="w"> </span>존재
→<span class="w"> </span>링크<span class="w"> </span>카운트가<span class="w"> </span><span class="m">1</span><span class="w"> </span>감소했을<span class="w"> </span>뿐

$<span class="w"> </span>cat<span class="w"> </span>symlink.txt
cat:<span class="w"> </span>symlink.txt:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
→<span class="w"> </span>심볼릭<span class="w"> </span>링크는<span class="w"> </span><span class="s2">&quot;file.txt&quot;</span>라는<span class="w"> </span>경로를<span class="w"> </span>저장
→<span class="w"> </span>file.txt가<span class="w"> </span>삭제되면<span class="w"> </span>끊어진<span class="w"> </span>링크<span class="w"> </span><span class="o">(</span>dangling<span class="w"> </span>link<span class="o">)</span>
→<span class="w"> </span>가리키는<span class="w"> </span>대상이<span class="w"> </span>없어서<span class="w"> </span>오류

하드<span class="w"> </span>링크<span class="w"> </span>특징:
-<span class="w"> </span>같은<span class="w"> </span>inode<span class="w"> </span>번호<span class="w"> </span>공유
-<span class="w"> </span>원본과<span class="w"> </span>동등한<span class="w"> </span>지위
-<span class="w"> </span>디렉토리에는<span class="w"> </span>사용<span class="w"> </span>불가

심볼릭<span class="w"> </span>링크<span class="w"> </span>특징:
-<span class="w"> </span>별도의<span class="w"> </span>inode<span class="w"> </span><span class="o">(</span>경로<span class="w"> </span>문자열<span class="w"> </span>저장<span class="o">)</span>
-<span class="w"> </span>원본에<span class="w"> </span>의존적
-<span class="w"> </span>디렉토리에도<span class="w"> </span>사용<span class="w"> </span>가능
-<span class="w"> </span>다른<span class="w"> </span>파일<span class="w"> </span>시스템도<span class="w"> </span>가리킬<span class="w"> </span>수<span class="w"> </span>있음
</code></pre></div>



</details>

<h3 id="4_1">문제 4: 디렉토리 탐색<a class="header-link" href="#4_1" title="Permanent link">&para;</a></h3>
<p><code>/home/user/docs/../code/./main.c</code> 경로를 정규화하시오.</p>
<details>
<summary>정답 보기</summary>


<div class="highlight"><pre><span></span><code>/home/user/docs/../code/./main.c

1. /home/user/docs 까지 이동
2. .. 으로 상위로 이동: /home/user
3. code 로 이동: /home/user/code
4. . 은 현재 디렉토리 (무시): /home/user/code
5. main.c 파일: /home/user/code/main.c

정규화된 경로: /home/user/code/main.c

Linux에서 확인:
$ realpath /home/user/docs/../code/./main.c
/home/user/code/main.c
</code></pre></div>



</details>

<h3 id="5-open-file-table">문제 5: Open File Table<a class="header-link" href="#5-open-file-table" title="Permanent link">&para;</a></h3>
<p>프로세스 A가 파일을 열고 fork()로 프로세스 B를 생성합니다. 두 프로세스가 같은 파일에 각각 100바이트를 write()하면 파일의 최종 크기는?</p>
<details>
<summary>정답 보기</summary>


<div class="highlight"><pre><span></span><code><span class="n">fork</span><span class="p">()</span> <span class="err">시</span> <span class="err">자식은</span> <span class="err">부모의</span> <span class="n">fd</span> <span class="n">table을</span> <span class="err">복사합니다</span><span class="p">.</span>
<span class="err">두</span> <span class="err">프로세스의</span> <span class="n">fd는</span> <span class="err">같은</span> <span class="n">open</span> <span class="n">file</span> <span class="n">entry를</span> <span class="err">공유합니다</span><span class="p">.</span>
<span class="err">따라서</span> <span class="err">같은</span> <span class="n">offset을</span> <span class="err">공유합니다!</span>

<span class="err">시나리오</span><span class="p">:</span>
<span class="mi">1</span><span class="p">.</span> <span class="err">부모</span> <span class="n">open</span><span class="p">(),</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="mi">2</span><span class="p">.</span> <span class="n">fork</span><span class="p">(),</span> <span class="err">자식도</span> <span class="err">같은</span> <span class="n">open</span> <span class="n">file</span> <span class="n">entry</span> <span class="err">공유</span>
<span class="mi">3</span><span class="p">.</span> <span class="err">부모</span> <span class="n">write</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">100</span>
<span class="mi">4</span><span class="p">.</span> <span class="err">자식</span> <span class="n">write</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">200</span> <span class="p">(</span><span class="err">이어서</span> <span class="err">쓰기</span><span class="p">)</span>

<span class="err">최종</span> <span class="err">파일</span> <span class="err">크기</span><span class="p">:</span> <span class="mi">200</span> <span class="err">바이트</span>

<span class="err">만약</span> <span class="err">자식이</span> <span class="err">별도로</span> <span class="n">open</span><span class="p">()</span><span class="err">했다면</span><span class="p">:</span>
<span class="o">-</span> <span class="err">별도의</span> <span class="n">open</span> <span class="n">file</span> <span class="n">entry</span> <span class="err">생성</span>
<span class="o">-</span> <span class="err">별도의</span> <span class="n">offset</span>
<span class="o">-</span> <span class="err">둘</span> <span class="err">다</span> <span class="mi">0</span><span class="err">부터</span> <span class="err">시작하면</span> <span class="err">덮어쓰기!</span>
<span class="o">-</span> <span class="err">최종</span> <span class="err">크기</span><span class="p">:</span> <span class="mi">100</span> <span class="err">바이트</span>

<span class="err">주의</span><span class="p">:</span> <span class="err">실제로는</span> <span class="n">write</span><span class="p">()</span><span class="err">의</span> <span class="err">원자성과</span> <span class="err">버퍼링에</span> <span class="err">따라</span>
<span class="err">결과가</span> <span class="err">다를</span> <span class="err">수</span> <span class="err">있음</span><span class="p">.</span> <span class="n">O_APPEND</span> <span class="err">사용</span> <span class="err">권장</span><span class="p">.</span>
</code></pre></div>



</details>

<hr />
<h2 id="_5">다음 단계<a class="header-link" href="#_5" title="Permanent link">&para;</a></h2>
<p><a href="./17_File_System_Implementation.md">17_File_System_Implementation.md</a>에서 파일 시스템의 내부 구현을 배워봅시다!</p>
<hr />
<h2 id="_6">참고 자료<a class="header-link" href="#_6" title="Permanent link">&para;</a></h2>
<ul>
<li>Silberschatz, "Operating System Concepts" Chapter 13</li>
<li>Linux man pages: <code>open(2)</code>, <code>read(2)</code>, <code>write(2)</code>, <code>stat(2)</code></li>
<li>POSIX 파일 시스템 표준</li>
<li>The Linux Programming Interface by Michael Kerrisk</li>
</ul>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/ko/OS_Theory/15_Page_Replacement.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">페이지 교체 ⭐⭐⭐⭐</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">🔗</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/ko/OS_Theory/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">📋</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/ko/OS_Theory/17_File_System_Implementation.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">파일 시스템 구현 ⭐⭐⭐⭐</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">↑</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'ko';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}