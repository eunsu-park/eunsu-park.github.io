{% raw %}
<!DOCTYPE html>
<html lang="ko" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë ˆìŠ¨ 05: í•¨ìˆ˜ì™€ ë¼ì´ë¸ŒëŸ¬ë¦¬(Functions and Libraries) - Study Materials</title>
    <link rel="stylesheet" href="/study/static/css/style.css">
    <link rel="stylesheet" href="/study/static/css/highlight.css">
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });"></script>
    
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/study/ko/" class="logo">Study Materials</a>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="/study/ko/" class="nav-item ">
                    <span class="nav-icon">ğŸ </span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="/study/examples/" class="nav-item ">
                    <span class="nav-icon">ğŸ’»</span>
                    <span class="nav-text">Examples</span>
                </a>
            </nav>

            <div class="sidebar-search">
                <form action="/study/ko/search.html" method="get" id="search-form">
                    <input type="search" name="q" placeholder="Search..." id="search-sidebar-input">
                </form>
            </div>

            <!-- Language Selector -->
            <div class="sidebar-lang">
                <select id="lang-select" class="lang-selector" onchange="switchLanguage(this.value)">
                    
                    <option value="en" >
                        English
                    </option>
                    
                    <option value="ko" selected>
                        í•œêµ­ì–´
                    </option>
                    
                </select>
            </div>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon light">â˜€ï¸</span>
                    <span class="theme-icon dark">ğŸŒ™</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
                    <span></span>
                </button>
                
<nav class="breadcrumb">
    <a href="/study/ko/">Topics</a>
    <span class="separator">/</span>
    <a href="/study/ko/Shell_Script/">Shell Script</a>
    <span class="separator">/</span>
    <span class="current">ë ˆìŠ¨ 05: í•¨ìˆ˜ì™€ ë¼ì´ë¸ŒëŸ¬ë¦¬(Functions and Libraries)</span>
</nav>

            </header>

            <div class="content">
                
<article class="lesson-article">
    <header class="lesson-header">
        <h1>ë ˆìŠ¨ 05: í•¨ìˆ˜ì™€ ë¼ì´ë¸ŒëŸ¬ë¦¬(Functions and Libraries)</h1>
    </header>

    
<div class="lesson-toolbar lesson-toolbar--top">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/ko/Shell_Script/04_Advanced_Control_Flow.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Advanced Control Flow â­â­</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/ko/Shell_Script/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/ko/Shell_Script/06_IO_and_Redirection.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Lesson 06: I/Oì™€ ë¦¬ë‹¤ì´ë ‰ì…˜(Redirection)</span>
        </a>
        
    </div>
</div>


    
    <nav class="toc" id="toc">
        <h2>Table of Contents</h2>
        <div class="toc">
<ul>
<li><a href="#1-return-value-patterns">1. ë°˜í™˜ ê°’ íŒ¨í„´(Return Value Patterns)</a><ul>
<li><a href="#11-echo-echo-capture-pattern">1.1 Echo ìº¡ì²˜ íŒ¨í„´(Echo Capture Pattern)</a></li>
<li><a href="#12-global-variable-pattern">1.2 ì „ì—­ ë³€ìˆ˜ íŒ¨í„´(Global Variable Pattern)</a></li>
<li><a href="#13-nameref-bash-43">1.3 Nameref íŒ¨í„´ (Bash 4.3+)</a></li>
<li><a href="#14-return-status-code-pattern">1.4 ë°˜í™˜ ìƒíƒœ ì½”ë“œ íŒ¨í„´(Return Status Code Pattern)</a></li>
<li><a href="#15-comparison-table">1.5 ë¹„êµ í‘œ(Comparison Table)</a></li>
</ul>
</li>
<li><a href="#2-recursive-functions">2. ì¬ê·€ í•¨ìˆ˜(Recursive Functions)</a><ul>
<li><a href="#21-factorial">2.1 íŒ©í† ë¦¬ì–¼(Factorial)</a></li>
<li><a href="#22-directory-tree-traversal">2.2 ë””ë ‰í† ë¦¬ íŠ¸ë¦¬ íƒìƒ‰(Directory Tree Traversal)</a></li>
<li><a href="#23-fibonacci-with-memoization">2.3 ë©”ëª¨ì´ì œì´ì…˜ì„ í™œìš©í•œ í”¼ë³´ë‚˜ì¹˜(Fibonacci with Memoization)</a></li>
</ul>
</li>
<li><a href="#3-function-libraries">3. í•¨ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬(Function Libraries)</a><ul>
<li><a href="#31-creating-a-library-file">3.1 ë¼ì´ë¸ŒëŸ¬ë¦¬ íŒŒì¼ ìƒì„±(Creating a Library File)</a></li>
<li><a href="#32-sourcing-library-files">3.2 ë¼ì´ë¸ŒëŸ¬ë¦¬ íŒŒì¼ ì†Œì‹±(Sourcing Library Files)</a></li>
<li><a href="#33-library-path-management">3.3 ë¼ì´ë¸ŒëŸ¬ë¦¬ ê²½ë¡œ ê´€ë¦¬(Library Path Management)</a></li>
<li><a href="#34-library-with-initialization">3.4 ì´ˆê¸°í™”ê°€ ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬(Library with Initialization)</a></li>
</ul>
</li>
<li><a href="#4-namespacing">4. ë„¤ì„ìŠ¤í˜ì´ì‹±(Namespacing)</a><ul>
<li><a href="#41-prefixed-function-names">4.1 ì ‘ë‘ì‚¬ í•¨ìˆ˜ ì´ë¦„(Prefixed Function Names)</a></li>
<li><a href="#42-namespace-helper-functions">4.2 ë„¤ì„ìŠ¤í˜ì´ìŠ¤ í—¬í¼ í•¨ìˆ˜(Namespace Helper Functions)</a></li>
</ul>
</li>
<li><a href="#5-callback-patterns">5. ì½œë°± íŒ¨í„´(Callback Patterns)</a><ul>
<li><a href="#51-simple-callback">5.1 ê°„ë‹¨í•œ ì½œë°±(Simple Callback)</a></li>
<li><a href="#52-event-handler-pattern">5.2 ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ íŒ¨í„´(Event Handler Pattern)</a></li>
<li><a href="#53-filter-and-map-pattern">5.3 í•„í„°ì™€ ë§µ íŒ¨í„´(Filter and Map Pattern)</a></li>
</ul>
</li>
<li><a href="#6-variable-scope">6. ë³€ìˆ˜ ìŠ¤ì½”í”„(Variable Scope)</a><ul>
<li><a href="#61-vs-local-vs-global-variables">6.1 ì§€ì—­ ë³€ìˆ˜ vs ì „ì—­ ë³€ìˆ˜(Local vs Global Variables)</a></li>
<li><a href="#62-bash-dynamic-scoping-in-bash">6.2 Bashì˜ ë™ì  ìŠ¤ì½”í•‘(Dynamic Scoping in Bash)</a></li>
<li><a href="#63-namereflocal-nameref">6.3 ì§€ì—­ Nameref(Local Nameref)</a></li>
<li><a href="#64-avoiding-common-pitfalls">6.4 ì¼ë°˜ì ì¸ í•¨ì • í”¼í•˜ê¸°(Avoiding Common Pitfalls)</a></li>
</ul>
</li>
<li><a href="#7-function-best-practices">7. í•¨ìˆ˜ ëª¨ë²” ì‚¬ë¡€(Function Best Practices)</a><ul>
<li><a href="#71-documentation-comments">7.1 ë¬¸ì„œí™” ì£¼ì„(Documentation Comments)</a></li>
<li><a href="#72-input-validation">7.2 ì…ë ¥ ê²€ì¦(Input Validation)</a></li>
<li><a href="#73-error-handling-in-functions">7.3 í•¨ìˆ˜ì—ì„œì˜ ì—ëŸ¬ ì²˜ë¦¬(Error Handling in Functions)</a></li>
<li><a href="#74-function-template">7.4 í•¨ìˆ˜ í…œí”Œë¦¿(Function Template)</a></li>
</ul>
</li>
<li><a href="#practice-problems">ì—°ìŠµ ë¬¸ì œ(Practice Problems)</a><ul>
<li><a href="#1">ë¬¸ì œ 1: ë¬¸ìì—´ ìœ í‹¸ë¦¬í‹° ë¼ì´ë¸ŒëŸ¬ë¦¬</a></li>
<li><a href="#2">ë¬¸ì œ 2: ì¬ê·€ì  íŒŒì¼ ê²€ìƒ‰</a></li>
<li><a href="#3">ë¬¸ì œ 3: ì½œë°±ì„ ì‚¬ìš©í•œ ê³„ì‚°ê¸°</a></li>
<li><a href="#4">ë¬¸ì œ 4: ì„¤ì • ê´€ë¦¬ì</a></li>
<li><a href="#5">ë¬¸ì œ 5: í•¨ìˆ˜ ì„±ëŠ¥ í”„ë¡œíŒŒì¼ëŸ¬</a></li>
</ul>
</li>
</ul>
</div>

    </nav>
    

    <div class="lesson-content markdown-body">
        <h1 id="05-functions-and-libraries">ë ˆìŠ¨ 05: í•¨ìˆ˜ì™€ ë¼ì´ë¸ŒëŸ¬ë¦¬(Functions and Libraries)<a class="header-link" href="#05-functions-and-libraries" title="Permanent link">&para;</a></h1>
<p><strong>ë‚œì´ë„</strong>: â­â­</p>
<p><strong>ì´ì „</strong>: <a href="./04_Advanced_Control_Flow.md">04_Advanced_Control_Flow.md</a> | <strong>ë‹¤ìŒ</strong>: <a href="./06_IO_and_Redirection.md">06_IO_and_Redirection.md</a></p>
<h2 id="1-return-value-patterns">1. ë°˜í™˜ ê°’ íŒ¨í„´(Return Value Patterns)<a class="header-link" href="#1-return-value-patterns" title="Permanent link">&para;</a></h2>
<p>Bash í•¨ìˆ˜ëŠ” ì „í†µì ì¸ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì²˜ëŸ¼ ê°’ì„ ë°˜í™˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëŒ€ì‹  ê²°ê³¼ë¥¼ í˜¸ì¶œìì—ê²Œ ì „ë‹¬í•˜ê¸° ìœ„í•´ ì—¬ëŸ¬ íŒ¨í„´ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
<h3 id="11-echo-echo-capture-pattern">1.1 Echo ìº¡ì²˜ íŒ¨í„´(Echo Capture Pattern)<a class="header-link" href="#11-echo-echo-capture-pattern" title="Permanent link">&para;</a></h3>
<p>ê°€ì¥ ì¼ë°˜ì ì¸ íŒ¨í„´ì€ ê²°ê³¼ë¥¼ <code>echo</code>í•˜ê³  ëª…ë ¹ ì¹˜í™˜ìœ¼ë¡œ ìº¡ì²˜í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤:</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="c1"># Function returns value via echo</span>
add<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">sum</span><span class="o">=</span><span class="k">$((</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">$2</span><span class="w"> </span><span class="k">))</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$sum</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="c1"># Capture the result</span>
<span class="nv">result</span><span class="o">=</span><span class="k">$(</span>add<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="k">)</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Result: </span><span class="nv">$result</span><span class="s2">&quot;</span><span class="w">  </span><span class="c1"># Output: Result: 30</span>
</code></pre></div>

<p><strong>ì¥ì </strong>: ê¹”ë”í•˜ê³  í•¨ìˆ˜í˜• ìŠ¤íƒ€ì¼; ì—¬ëŸ¬ echo ë¬¸ì„ í†µí•´ ì—¬ëŸ¬ ë°˜í™˜ ê°’ ì§€ì›.</p>
<p><strong>ë‹¨ì </strong>: ì„œë¸Œì…¸ ìƒì„±ìœ¼ë¡œ ì¸í•´ ëŠë¦¼; stdoutê³¼ ë°˜í™˜ ê°’ì„ êµ¬ë¶„í•  ìˆ˜ ì—†ìŒ.</p>
<h3 id="12-global-variable-pattern">1.2 ì „ì—­ ë³€ìˆ˜ íŒ¨í„´(Global Variable Pattern)<a class="header-link" href="#12-global-variable-pattern" title="Permanent link">&para;</a></h3>
<p>í•¨ìˆ˜ëŠ” ì „ì—­ ë³€ìˆ˜ë¥¼ ì§ì ‘ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="c1"># Function sets global variable</span>
calculate_stats<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span>-a<span class="w"> </span><span class="nv">numbers</span><span class="o">=(</span><span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span><span class="o">)</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">sum</span><span class="o">=</span><span class="m">0</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">count</span><span class="o">=</span><span class="si">${#</span><span class="nv">numbers</span><span class="p">[@]</span><span class="si">}</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span>num<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">numbers</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="o">((</span><span class="nv">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span>num<span class="o">))</span>
<span class="w">    </span><span class="k">done</span>

<span class="w">    </span><span class="c1"># Set global variables</span>
<span class="w">    </span><span class="nv">STATS_SUM</span><span class="o">=</span><span class="nv">$sum</span>
<span class="w">    </span><span class="nv">STATS_AVG</span><span class="o">=</span><span class="k">$((</span><span class="w"> </span><span class="nv">sum</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nv">count</span><span class="w"> </span><span class="k">))</span>
<span class="w">    </span><span class="nv">STATS_COUNT</span><span class="o">=</span><span class="nv">$count</span>
<span class="o">}</span>

calculate_stats<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">40</span><span class="w"> </span><span class="m">50</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Sum: </span><span class="nv">$STATS_SUM</span><span class="s2">&quot;</span><span class="w">        </span><span class="c1"># Output: Sum: 150</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Average: </span><span class="nv">$STATS_AVG</span><span class="s2">&quot;</span><span class="w">    </span><span class="c1"># Output: Average: 30</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Count: </span><span class="nv">$STATS_COUNT</span><span class="s2">&quot;</span><span class="w">    </span><span class="c1"># Output: Count: 5</span>
</code></pre></div>

<p><strong>ì¥ì </strong>: ë¹ ë¦„; ì—¬ëŸ¬ ê°’ì„ ì‰½ê²Œ ë°˜í™˜; ì„œë¸Œì…¸ ì˜¤ë²„í—¤ë“œ ì—†ìŒ.</p>
<p><strong>ë‹¨ì </strong>: ì „ì—­ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì˜¤ì—¼; ì¶”ë¡ í•˜ê¸° ì–´ë ¤ì›€; ìŠ¤ë ˆë“œ ì•ˆì „í•˜ì§€ ì•ŠìŒ.</p>
<h3 id="13-nameref-bash-43">1.3 Nameref íŒ¨í„´ (Bash 4.3+)<a class="header-link" href="#13-nameref-bash-43" title="Permanent link">&para;</a></h3>
<p><code>declare -n</code>ì„ ì‚¬ìš©í•˜ì—¬ ë³€ìˆ˜ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤:</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="c1"># Function uses nameref to modify caller&#39;s variable</span>
get_user_info<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span>-n<span class="w"> </span><span class="nv">result_ref</span><span class="o">=</span><span class="nv">$1</span><span class="w">  </span><span class="c1"># Create nameref</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">username</span><span class="o">=</span><span class="nv">$2</span>

<span class="w">    </span><span class="c1"># Simulate API call</span>
<span class="w">    </span><span class="nv">result_ref</span><span class="o">=(</span>
<span class="w">        </span><span class="s2">&quot;name=</span><span class="nv">$username</span><span class="s2">&quot;</span>
<span class="w">        </span><span class="s2">&quot;id=12345&quot;</span>
<span class="w">        </span><span class="s2">&quot;email=</span><span class="si">${</span><span class="nv">username</span><span class="si">}</span><span class="s2">@example.com&quot;</span>
<span class="w">    </span><span class="o">)</span>
<span class="o">}</span>

<span class="c1"># Call with variable name (not value)</span>
<span class="nb">declare</span><span class="w"> </span>-a<span class="w"> </span>user_data
get_user_info<span class="w"> </span>user_data<span class="w"> </span><span class="s2">&quot;john&quot;</span>

<span class="k">for</span><span class="w"> </span>field<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">user_data</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$field</span><span class="s2">&quot;</span>
<span class="k">done</span>
<span class="c1"># Output:</span>
<span class="c1"># name=john</span>
<span class="c1"># id=12345</span>
<span class="c1"># email=john@example.com</span>
</code></pre></div>

<p><strong>ì¥ì </strong>: ê¹¨ë—í•œ ë¶„ë¦¬; ì „ì—­ ì˜¤ì—¼ ì—†ìŒ; í˜¸ì¶œìì˜ ë³€ìˆ˜ë¥¼ ì§ì ‘ ìˆ˜ì • ê°€ëŠ¥.</p>
<p><strong>ë‹¨ì </strong>: Bash 4.3+ í•„ìš”; ì•½ê°„ ë³µì¡í•œ êµ¬ë¬¸.</p>
<h3 id="14-return-status-code-pattern">1.4 ë°˜í™˜ ìƒíƒœ ì½”ë“œ íŒ¨í„´(Return Status Code Pattern)<a class="header-link" href="#14-return-status-code-pattern" title="Permanent link">&para;</a></h3>
<p><code>return</code>ì„ ì‚¬ìš©í•˜ì—¬ ì¢…ë£Œ ìƒíƒœ(0-255)ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤:</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="c1"># Function returns status code</span>
is_valid_port<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">port</span><span class="o">=</span><span class="nv">$1</span>

<span class="w">    </span><span class="c1"># Validate port number</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>!<span class="w"> </span><span class="nv">$port</span><span class="w"> </span><span class="o">=</span>~<span class="w"> </span>^<span class="o">[</span><span class="m">0</span>-9<span class="o">]</span>+$<span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="c1"># Invalid: not a number</span>
<span class="w">    </span><span class="k">fi</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">((</span><span class="w"> </span>port<span class="w"> </span>&lt;<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">||</span><span class="w"> </span>port<span class="w"> </span>&gt;<span class="w"> </span><span class="m">65535</span><span class="w"> </span><span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="c1"># Invalid: out of range</span>
<span class="w">    </span><span class="k">fi</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="c1"># Valid</span>
<span class="o">}</span>

<span class="c1"># Test the function</span>
<span class="k">if</span><span class="w"> </span>is_valid_port<span class="w"> </span><span class="m">8080</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Port 8080 is valid&quot;</span>
<span class="k">fi</span>

is_valid_port<span class="w"> </span><span class="s2">&quot;abc&quot;</span>
<span class="k">case</span><span class="w"> </span><span class="nv">$?</span><span class="w"> </span><span class="k">in</span>
<span class="w">    </span><span class="m">0</span><span class="o">)</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Valid port&quot;</span><span class="w"> </span><span class="p">;;</span>
<span class="w">    </span><span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Error: Not a number&quot;</span><span class="w"> </span><span class="p">;;</span>
<span class="w">    </span><span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Error: Out of range&quot;</span><span class="w"> </span><span class="p">;;</span>
<span class="k">esac</span>
<span class="c1"># Output: Error: Not a number</span>
</code></pre></div>

<p><strong>ì¥ì </strong>: í‘œì¤€ Unix ê´€ë¡€; ì„±ê³µ/ì‹¤íŒ¨ í™•ì¸ì— ì í•©.</p>
<p><strong>ë‹¨ì </strong>: ì •ìˆ˜ 0-255ë¡œ ì œí•œë¨; ì¢…ì¢… ë‹¤ë¥¸ íŒ¨í„´ê³¼ ê²°í•©ë¨.</p>
<h3 id="15-comparison-table">1.5 ë¹„êµ í‘œ(Comparison Table)<a class="header-link" href="#15-comparison-table" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>íŒ¨í„´</th>
<th>ì†ë„</th>
<th>ë‹¤ì¤‘ ë°˜í™˜</th>
<th>ë³µì¡ë„</th>
<th>ìµœì  ì‚¬ìš© ì‚¬ë¡€</th>
</tr>
</thead>
<tbody>
<tr>
<td>Echo Capture</td>
<td>Slow</td>
<td>Yes (multiple echoes)</td>
<td>Low</td>
<td>Simple value returns</td>
</tr>
<tr>
<td>Global Variable</td>
<td>Fast</td>
<td>Yes</td>
<td>Medium</td>
<td>Performance-critical code</td>
</tr>
<tr>
<td>Nameref</td>
<td>Fast</td>
<td>Yes</td>
<td>Medium</td>
<td>Clean API design</td>
</tr>
<tr>
<td>Return Status</td>
<td>Fast</td>
<td>No</td>
<td>Low</td>
<td>Success/failure checks</td>
</tr>
</tbody>
</table>
<h2 id="2-recursive-functions">2. ì¬ê·€ í•¨ìˆ˜(Recursive Functions)<a class="header-link" href="#2-recursive-functions" title="Permanent link">&para;</a></h2>
<p>ì¬ê·€ í•¨ìˆ˜ëŠ” ì¬ê·€ì  êµ¬ì¡°ë¥¼ ê°€ì§„ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ìì‹ ì„ í˜¸ì¶œí•©ë‹ˆë‹¤.</p>
<h3 id="21-factorial">2.1 íŒ©í† ë¦¬ì–¼(Factorial)<a class="header-link" href="#21-factorial" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="c1"># Classic recursive factorial</span>
factorial<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">n</span><span class="o">=</span><span class="nv">$1</span>

<span class="w">    </span><span class="c1"># Base case</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">((</span><span class="w"> </span>n<span class="w"> </span>&lt;<span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="m">1</span>
<span class="w">        </span><span class="k">return</span>
<span class="w">    </span><span class="k">fi</span>

<span class="w">    </span><span class="c1"># Recursive case</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">prev</span><span class="o">=</span><span class="k">$(</span>factorial<span class="w"> </span><span class="k">$((</span><span class="nv">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="k">)))</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="k">$((</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">prev</span><span class="w"> </span><span class="k">))</span>
<span class="o">}</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;5! = </span><span class="k">$(</span>factorial<span class="w"> </span><span class="m">5</span><span class="k">)</span><span class="s2">&quot;</span><span class="w">  </span><span class="c1"># Output: 5! = 120</span>
</code></pre></div>

<h3 id="22-directory-tree-traversal">2.2 ë””ë ‰í† ë¦¬ íŠ¸ë¦¬ íƒìƒ‰(Directory Tree Traversal)<a class="header-link" href="#22-directory-tree-traversal" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="c1"># Recursively list all files in directory tree</span>
traverse_directory<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">dir</span><span class="o">=</span><span class="nv">$1</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">indent</span><span class="o">=</span><span class="si">${</span><span class="nv">2</span><span class="k">:-</span><span class="s2">&quot;&quot;</span><span class="si">}</span>

<span class="w">    </span><span class="c1"># Process all items in directory</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span>item<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$dir</span><span class="s2">&quot;</span>/*<span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-d<span class="w"> </span><span class="nv">$item</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">indent</span><span class="si">}</span><span class="s2">[DIR]  </span><span class="k">$(</span>basename<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$item</span><span class="s2">&quot;</span><span class="k">)</span><span class="s2">&quot;</span>
<span class="w">            </span><span class="c1"># Recursive call with increased indent</span>
<span class="w">            </span>traverse_directory<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$item</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$indent</span><span class="s2">  &quot;</span>
<span class="w">        </span><span class="k">else</span>
<span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">indent</span><span class="si">}</span><span class="s2">[FILE] </span><span class="k">$(</span>basename<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$item</span><span class="s2">&quot;</span><span class="k">)</span><span class="s2">&quot;</span>
<span class="w">        </span><span class="k">fi</span>
<span class="w">    </span><span class="k">done</span>
<span class="o">}</span>

<span class="c1"># Usage</span>
traverse_directory<span class="w"> </span><span class="s2">&quot;/tmp/myproject&quot;</span>
</code></pre></div>

<h3 id="23-fibonacci-with-memoization">2.3 ë©”ëª¨ì´ì œì´ì…˜ì„ í™œìš©í•œ í”¼ë³´ë‚˜ì¹˜(Fibonacci with Memoization)<a class="header-link" href="#23-fibonacci-with-memoization" title="Permanent link">&para;</a></h3>
<p>ë©”ëª¨ì´ì œì´ì…˜ ì—†ì´ëŠ” ì¬ê·€ í”¼ë³´ë‚˜ì¹˜ê°€ ë§¤ìš° ëŠë¦½ë‹ˆë‹¤. ë‹¤ìŒì€ ìµœì í™”ëœ ë²„ì „ì…ë‹ˆë‹¤:</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="c1"># Declare associative array for memoization</span>
<span class="nb">declare</span><span class="w"> </span>-A<span class="w"> </span>fib_cache

fibonacci<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">n</span><span class="o">=</span><span class="nv">$1</span>

<span class="w">    </span><span class="c1"># Check cache first</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-n<span class="w"> </span><span class="si">${</span><span class="nv">fib_cache</span><span class="p">[</span><span class="nv">$n</span><span class="p">]</span><span class="si">}</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">fib_cache</span><span class="p">[</span><span class="nv">$n</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">        </span><span class="k">return</span>
<span class="w">    </span><span class="k">fi</span>

<span class="w">    </span><span class="c1"># Base cases</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">((</span><span class="w"> </span>n<span class="w"> </span>&lt;<span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$n</span><span class="s2">&quot;</span>
<span class="w">        </span><span class="k">return</span>
<span class="w">    </span><span class="k">fi</span>

<span class="w">    </span><span class="c1"># Recursive calculation</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">fib1</span><span class="o">=</span><span class="k">$(</span>fibonacci<span class="w"> </span><span class="k">$((</span><span class="nv">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="k">)))</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">fib2</span><span class="o">=</span><span class="k">$(</span>fibonacci<span class="w"> </span><span class="k">$((</span><span class="nv">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">2</span><span class="k">)))</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">result</span><span class="o">=</span><span class="k">$((</span><span class="nv">fib1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">fib2</span><span class="k">))</span>

<span class="w">    </span><span class="c1"># Store in cache</span>
<span class="w">    </span>fib_cache<span class="o">[</span><span class="nv">$n</span><span class="o">]=</span><span class="nv">$result</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$result</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="c1"># Calculate Fibonacci numbers</span>
<span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">{</span><span class="m">0</span>..10<span class="o">}</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;fib(</span><span class="nv">$i</span><span class="s2">) = </span><span class="k">$(</span>fibonacci<span class="w"> </span><span class="nv">$i</span><span class="k">)</span><span class="s2">&quot;</span>
<span class="k">done</span>
</code></pre></div>

<p><strong>ì¶œë ¥</strong>:</p>
<div class="highlight"><pre><span></span><code>fib(0) = 0
fib(1) = 1
fib(2) = 1
fib(3) = 2
fib(4) = 3
fib(5) = 5
fib(6) = 8
fib(7) = 13
fib(8) = 21
fib(9) = 34
fib(10) = 55
</code></pre></div>

<h2 id="3-function-libraries">3. í•¨ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬(Function Libraries)<a class="header-link" href="#3-function-libraries" title="Permanent link">&para;</a></h2>
<p>ì¬ì‚¬ìš© ê°€ëŠ¥í•œ í•¨ìˆ˜ë¥¼ ë³„ë„ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ íŒŒì¼ë¡œ êµ¬ì„±í•˜ì—¬ ìœ ì§€ë³´ìˆ˜ì„±ê³¼ ì¬ì‚¬ìš©ì„±ì„ ë†’ì…ë‹ˆë‹¤.</p>
<h3 id="31-creating-a-library-file">3.1 ë¼ì´ë¸ŒëŸ¬ë¦¬ íŒŒì¼ ìƒì„±(Creating a Library File)<a class="header-link" href="#31-creating-a-library-file" title="Permanent link">&para;</a></h3>
<p><strong>íŒŒì¼: <code>/opt/mylibs/string_utils.sh</code></strong></p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># String utility library</span>

<span class="c1"># Convert string to uppercase</span>
str_upper<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">1</span><span class="p">^^</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="c1"># Convert string to lowercase</span>
str_lower<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">1</span><span class="p">,,</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="c1"># Trim whitespace from both ends</span>
str_trim<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">text</span><span class="o">=</span><span class="nv">$1</span>
<span class="w">    </span><span class="c1"># Remove leading whitespace</span>
<span class="w">    </span><span class="nv">text</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">text</span><span class="p">#</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">text</span><span class="p">%%[![:</span><span class="nv">space</span><span class="p">:]]*</span><span class="si">}</span><span class="s2">&quot;</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="c1"># Remove trailing whitespace</span>
<span class="w">    </span><span class="nv">text</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">text</span><span class="p">%</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">text</span><span class="p">##*[![:</span><span class="nv">space</span><span class="p">:]]</span><span class="si">}</span><span class="s2">&quot;</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$text</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="c1"># Check if string contains substring</span>
str_contains<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">haystack</span><span class="o">=</span><span class="nv">$1</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">needle</span><span class="o">=</span><span class="nv">$2</span>
<span class="w">    </span><span class="o">[[</span><span class="w"> </span><span class="nv">$haystack</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>*<span class="s2">&quot;</span><span class="nv">$needle</span><span class="s2">&quot;</span>*<span class="w"> </span><span class="o">]]</span>
<span class="o">}</span>

<span class="c1"># Repeat string N times</span>
str_repeat<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">string</span><span class="o">=</span><span class="nv">$1</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">count</span><span class="o">=</span><span class="nv">$2</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">result</span><span class="o">=</span><span class="s2">&quot;&quot;</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="o">((</span><span class="nv">i</span><span class="o">=</span><span class="m">0</span><span class="p">;</span><span class="w"> </span>i&lt;count<span class="p">;</span><span class="w"> </span>i++<span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="nv">result</span><span class="o">+=</span><span class="s2">&quot;</span><span class="nv">$string</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="k">done</span>

<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$result</span><span class="s2">&quot;</span>
<span class="o">}</span>
</code></pre></div>

<h3 id="32-sourcing-library-files">3.2 ë¼ì´ë¸ŒëŸ¬ë¦¬ íŒŒì¼ ì†Œì‹±(Sourcing Library Files)<a class="header-link" href="#32-sourcing-library-files" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="c1"># Method 1: Absolute path</span>
<span class="nb">source</span><span class="w"> </span>/opt/mylibs/string_utils.sh

<span class="c1"># Method 2: Relative path</span>
<span class="nb">source</span><span class="w"> </span>./libs/string_utils.sh

<span class="c1"># Method 3: Dot notation (equivalent to source)</span>
.<span class="w"> </span>/opt/mylibs/string_utils.sh

<span class="c1"># Use library functions</span>
<span class="nv">text</span><span class="o">=</span><span class="s2">&quot;  Hello World  &quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Original: [</span><span class="nv">$text</span><span class="s2">]&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Trimmed: [</span><span class="k">$(</span>str_trim<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$text</span><span class="s2">&quot;</span><span class="k">)</span><span class="s2">]&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Upper: </span><span class="k">$(</span>str_upper<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$text</span><span class="s2">&quot;</span><span class="k">)</span><span class="s2">&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Lower: </span><span class="k">$(</span>str_lower<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$text</span><span class="s2">&quot;</span><span class="k">)</span><span class="s2">&quot;</span>

<span class="k">if</span><span class="w"> </span>str_contains<span class="w"> </span><span class="s2">&quot;Hello World&quot;</span><span class="w"> </span><span class="s2">&quot;World&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Contains &#39;World&#39;&quot;</span>
<span class="k">fi</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Repeated: </span><span class="k">$(</span>str_repeat<span class="w"> </span><span class="s2">&quot;=&quot;</span><span class="w"> </span><span class="m">40</span><span class="k">)</span><span class="s2">&quot;</span>
</code></pre></div>

<h3 id="33-library-path-management">3.3 ë¼ì´ë¸ŒëŸ¬ë¦¬ ê²½ë¡œ ê´€ë¦¬(Library Path Management)<a class="header-link" href="#33-library-path-management" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="c1"># Define library path</span>
<span class="nv">LIB_PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">LIB_PATH</span><span class="k">:-</span><span class="p">/opt/mylibs</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="c1"># Function to load a library</span>
load_library<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">lib_name</span><span class="o">=</span><span class="nv">$1</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">lib_file</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$LIB_PATH</span><span class="s2">/</span><span class="si">${</span><span class="nv">lib_name</span><span class="si">}</span><span class="s2">.sh&quot;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>!<span class="w"> </span>-f<span class="w"> </span><span class="nv">$lib_file</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Error: Library &#39;</span><span class="nv">$lib_name</span><span class="s2">&#39; not found at </span><span class="nv">$lib_file</span><span class="s2">&quot;</span><span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="k">fi</span>

<span class="w">    </span><span class="nb">source</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$lib_file</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="c1"># Load multiple libraries</span>
load_library<span class="w"> </span><span class="s2">&quot;string_utils&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
load_library<span class="w"> </span><span class="s2">&quot;file_utils&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
load_library<span class="w"> </span><span class="s2">&quot;log_utils&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>

<span class="c1"># Now use functions from all libraries</span>
</code></pre></div>

<h3 id="34-library-with-initialization">3.4 ì´ˆê¸°í™”ê°€ ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬(Library with Initialization)<a class="header-link" href="#34-library-with-initialization" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># Database utilities library</span>

<span class="c1"># Library-level variables</span>
<span class="nb">declare</span><span class="w"> </span>-g<span class="w"> </span><span class="nv">DB_CONNECTION</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
<span class="nb">declare</span><span class="w"> </span>-g<span class="w"> </span><span class="nv">DB_HOST</span><span class="o">=</span><span class="s2">&quot;localhost&quot;</span>
<span class="nb">declare</span><span class="w"> </span>-g<span class="w"> </span><span class="nv">DB_PORT</span><span class="o">=</span><span class="m">5432</span>

<span class="c1"># Library initialization function</span>
db_init<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nv">DB_HOST</span><span class="o">=</span><span class="si">${</span><span class="nv">1</span><span class="k">:-</span><span class="nv">$DB_HOST</span><span class="si">}</span>
<span class="w">    </span><span class="nv">DB_PORT</span><span class="o">=</span><span class="si">${</span><span class="nv">2</span><span class="k">:-</span><span class="nv">$DB_PORT</span><span class="si">}</span>
<span class="w">    </span><span class="nv">DB_CONNECTION</span><span class="o">=</span><span class="s2">&quot;host=</span><span class="nv">$DB_HOST</span><span class="s2"> port=</span><span class="nv">$DB_PORT</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Database initialized: </span><span class="nv">$DB_CONNECTION</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="c1"># Database functions</span>
db_query<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">query</span><span class="o">=</span><span class="nv">$1</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-z<span class="w"> </span><span class="nv">$DB_CONNECTION</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Error: Database not initialized. Call db_init first.&quot;</span><span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">    </span><span class="c1"># Execute query (simplified)</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Executing: </span><span class="nv">$query</span><span class="s2"> on </span><span class="nv">$DB_CONNECTION</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="c1"># Usage:</span>
<span class="c1"># source db_utils.sh</span>
<span class="c1"># db_init &quot;dbserver&quot; 3306</span>
<span class="c1"># db_query &quot;SELECT * FROM users&quot;</span>
</code></pre></div>

<h2 id="4-namespacing">4. ë„¤ì„ìŠ¤í˜ì´ì‹±(Namespacing)<a class="header-link" href="#4-namespacing" title="Permanent link">&para;</a></h2>
<p>BashëŠ” ë‚´ì¥ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ê°€ ì—†ì§€ë§Œ ëª…ëª… ê·œì¹™ìœ¼ë¡œ ì‹œë®¬ë ˆì´ì…˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h3 id="41-prefixed-function-names">4.1 ì ‘ë‘ì‚¬ í•¨ìˆ˜ ì´ë¦„(Prefixed Function Names)<a class="header-link" href="#41-prefixed-function-names" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="c1"># String utility namespace</span>
stringutil::trim<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">text</span><span class="o">=</span><span class="nv">$1</span>
<span class="w">    </span><span class="nv">text</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">text</span><span class="p">#</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">text</span><span class="p">%%[![:</span><span class="nv">space</span><span class="p">:]]*</span><span class="si">}</span><span class="s2">&quot;</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nv">text</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">text</span><span class="p">%</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">text</span><span class="p">##*[![:</span><span class="nv">space</span><span class="p">:]]</span><span class="si">}</span><span class="s2">&quot;</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$text</span><span class="s2">&quot;</span>
<span class="o">}</span>

stringutil::split<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">string</span><span class="o">=</span><span class="nv">$1</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">delimiter</span><span class="o">=</span><span class="nv">$2</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span>-n<span class="w"> </span><span class="nv">result_array</span><span class="o">=</span><span class="nv">$3</span>

<span class="w">    </span><span class="nv">IFS</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$delimiter</span><span class="s2">&quot;</span><span class="w"> </span><span class="nb">read</span><span class="w"> </span>-ra<span class="w"> </span>result_array<span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$string</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="c1"># File utility namespace</span>
fileutil::exists<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="o">[[</span><span class="w"> </span>-f<span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">]]</span>
<span class="o">}</span>

fileutil::size<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span>stat<span class="w"> </span>-f%z<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="w"> </span><span class="m">2</span>&gt;/dev/null<span class="w"> </span><span class="o">||</span><span class="w"> </span>stat<span class="w"> </span>-c%s<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="w"> </span><span class="m">2</span>&gt;/dev/null
<span class="o">}</span>

<span class="c1"># Math utility namespace</span>
mathutil::max<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">max</span><span class="o">=</span><span class="nv">$1</span>
<span class="w">    </span><span class="nb">shift</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span>num<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="o">((</span><span class="w"> </span>num<span class="w"> </span>&gt;<span class="w"> </span>max<span class="w"> </span><span class="o">))</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nv">max</span><span class="o">=</span><span class="nv">$num</span>
<span class="w">    </span><span class="k">done</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$max</span><span class="s2">&quot;</span>
<span class="o">}</span>

mathutil::min<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">min</span><span class="o">=</span><span class="nv">$1</span>
<span class="w">    </span><span class="nb">shift</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span>num<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="o">((</span><span class="w"> </span>num<span class="w"> </span>&lt;<span class="w"> </span>min<span class="w"> </span><span class="o">))</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nv">min</span><span class="o">=</span><span class="nv">$num</span>
<span class="w">    </span><span class="k">done</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$min</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="c1"># Usage</span>
<span class="nv">text</span><span class="o">=</span><span class="s2">&quot;  Hello  &quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Trimmed: [</span><span class="k">$(</span>stringutil::trim<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$text</span><span class="s2">&quot;</span><span class="k">)</span><span class="s2">]&quot;</span>

<span class="nb">declare</span><span class="w"> </span>-a<span class="w"> </span>parts
stringutil::split<span class="w"> </span><span class="s2">&quot;one,two,three&quot;</span><span class="w"> </span><span class="s2">&quot;,&quot;</span><span class="w"> </span>parts
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Parts: </span><span class="si">${</span><span class="nv">parts</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Max: </span><span class="k">$(</span>mathutil::max<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">15</span><span class="k">)</span><span class="s2">&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Min: </span><span class="k">$(</span>mathutil::min<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">15</span><span class="k">)</span><span class="s2">&quot;</span>
</code></pre></div>

<h3 id="42-namespace-helper-functions">4.2 ë„¤ì„ìŠ¤í˜ì´ìŠ¤ í—¬í¼ í•¨ìˆ˜(Namespace Helper Functions)<a class="header-link" href="#42-namespace-helper-functions" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="c1"># Create namespace-aware function loader</span>
namespace<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">ns</span><span class="o">=</span><span class="nv">$1</span>
<span class="w">    </span><span class="nb">shift</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span>func<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="nb">eval</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">ns</span><span class="si">}</span><span class="s2">::</span><span class="si">${</span><span class="nv">func</span><span class="si">}</span><span class="s2">() { </span><span class="si">${</span><span class="nv">func</span><span class="si">}</span><span class="s2"> \&quot;\$@\&quot;; }&quot;</span>
<span class="w">    </span><span class="k">done</span>
<span class="o">}</span>

<span class="c1"># Define regular functions</span>
add<span class="o">()</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="k">$((</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">$2</span><span class="w"> </span><span class="k">))</span><span class="p">;</span><span class="w"> </span><span class="o">}</span>
subtract<span class="o">()</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="k">$((</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">$2</span><span class="w"> </span><span class="k">))</span><span class="p">;</span><span class="w"> </span><span class="o">}</span>
multiply<span class="o">()</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="k">$((</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">$2</span><span class="w"> </span><span class="k">))</span><span class="p">;</span><span class="w"> </span><span class="o">}</span>

<span class="c1"># Create namespaced versions</span>
namespace<span class="w"> </span>math<span class="w"> </span>add<span class="w"> </span>subtract<span class="w"> </span>multiply

<span class="c1"># Use both versions</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Direct: </span><span class="k">$(</span>add<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">5</span><span class="k">)</span><span class="s2">&quot;</span><span class="w">           </span><span class="c1"># Output: 15</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Namespaced: </span><span class="k">$(</span>math::add<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">5</span><span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span><span class="c1"># Output: 15</span>
</code></pre></div>

<h2 id="5-callback-patterns">5. ì½œë°± íŒ¨í„´(Callback Patterns)<a class="header-link" href="#5-callback-patterns" title="Permanent link">&para;</a></h2>
<p>í•¨ìˆ˜ ì´ë¦„ì„ ì¸ìˆ˜ë¡œ ì „ë‹¬í•˜ì—¬ ìœ ì—°í•˜ê³  ì´ë²¤íŠ¸ ê¸°ë°˜ ì½”ë“œë¥¼ ë§Œë“­ë‹ˆë‹¤.</p>
<h3 id="51-simple-callback">5.1 ê°„ë‹¨í•œ ì½œë°±(Simple Callback)<a class="header-link" href="#51-simple-callback" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="c1"># Process each item with a callback function</span>
process_array<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span>-n<span class="w"> </span><span class="nv">array</span><span class="o">=</span><span class="nv">$1</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">callback</span><span class="o">=</span><span class="nv">$2</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span>item<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">array</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="nv">$callback</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$item</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="k">done</span>
<span class="o">}</span>

<span class="c1"># Callback functions</span>
print_uppercase<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">1</span><span class="p">^^</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="o">}</span>

print_with_prefix<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;&gt;&gt;&gt; </span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="c1"># Usage</span>
<span class="nv">fruits</span><span class="o">=(</span><span class="s2">&quot;apple&quot;</span><span class="w"> </span><span class="s2">&quot;banana&quot;</span><span class="w"> </span><span class="s2">&quot;cherry&quot;</span><span class="o">)</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Uppercase:&quot;</span>
process_array<span class="w"> </span>fruits<span class="w"> </span>print_uppercase

<span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\nWith prefix:&quot;</span>
process_array<span class="w"> </span>fruits<span class="w"> </span>print_with_prefix
</code></pre></div>

<h3 id="52-event-handler-pattern">5.2 ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ íŒ¨í„´(Event Handler Pattern)<a class="header-link" href="#52-event-handler-pattern" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="c1"># Event handler registry</span>
<span class="nb">declare</span><span class="w"> </span>-A<span class="w"> </span>event_handlers

<span class="c1"># Register event handler</span>
on<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">event</span><span class="o">=</span><span class="nv">$1</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">handler</span><span class="o">=</span><span class="nv">$2</span>
<span class="w">    </span>event_handlers<span class="o">[</span><span class="nv">$event</span><span class="o">]</span>+<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$handler</span><span class="s2"> &quot;</span>
<span class="o">}</span>

<span class="c1"># Trigger event</span>
trigger<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">event</span><span class="o">=</span><span class="nv">$1</span>
<span class="w">    </span><span class="nb">shift</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">handlers</span><span class="o">=</span><span class="si">${</span><span class="nv">event_handlers</span><span class="p">[</span><span class="nv">$event</span><span class="p">]</span><span class="si">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-n<span class="w"> </span><span class="nv">$handlers</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span>handler<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nv">$handlers</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">            </span><span class="nv">$handler</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span>
<span class="w">        </span><span class="k">done</span>
<span class="w">    </span><span class="k">fi</span>
<span class="o">}</span>

<span class="c1"># Define event handlers</span>
on_file_created<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;[INFO] File created: </span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="o">}</span>

on_file_validated<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;[INFO] File validated: </span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="o">}</span>

log_event<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;[LOG] </span><span class="k">$(</span>date<span class="k">)</span><span class="s2">: </span><span class="nv">$1</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>events.log
<span class="o">}</span>

<span class="c1"># Register handlers</span>
on<span class="w"> </span><span class="s2">&quot;file.created&quot;</span><span class="w"> </span>on_file_created
on<span class="w"> </span><span class="s2">&quot;file.created&quot;</span><span class="w"> </span>log_event
on<span class="w"> </span><span class="s2">&quot;file.validated&quot;</span><span class="w"> </span>on_file_validated

<span class="c1"># Trigger events</span>
trigger<span class="w"> </span><span class="s2">&quot;file.created&quot;</span><span class="w"> </span><span class="s2">&quot;data.txt&quot;</span>
trigger<span class="w"> </span><span class="s2">&quot;file.validated&quot;</span><span class="w"> </span><span class="s2">&quot;data.txt&quot;</span>
</code></pre></div>

<h3 id="53-filter-and-map-pattern">5.3 í•„í„°ì™€ ë§µ íŒ¨í„´(Filter and Map Pattern)<a class="header-link" href="#53-filter-and-map-pattern" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="c1"># Map function: apply callback to each element</span>
map<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span>-n<span class="w"> </span><span class="nv">input_array</span><span class="o">=</span><span class="nv">$1</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span>-n<span class="w"> </span><span class="nv">output_array</span><span class="o">=</span><span class="nv">$2</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">callback</span><span class="o">=</span><span class="nv">$3</span>

<span class="w">    </span><span class="nv">output_array</span><span class="o">=()</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span>item<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">input_array</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="nv">output_array</span><span class="o">+=(</span><span class="s2">&quot;</span><span class="k">$(</span><span class="nv">$callback</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$item</span><span class="s2">&quot;</span><span class="k">)</span><span class="s2">&quot;</span><span class="o">)</span>
<span class="w">    </span><span class="k">done</span>
<span class="o">}</span>

<span class="c1"># Filter function: keep elements where callback returns 0</span>
filter<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span>-n<span class="w"> </span><span class="nv">input_array</span><span class="o">=</span><span class="nv">$1</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span>-n<span class="w"> </span><span class="nv">output_array</span><span class="o">=</span><span class="nv">$2</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">predicate</span><span class="o">=</span><span class="nv">$3</span>

<span class="w">    </span><span class="nv">output_array</span><span class="o">=()</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span>item<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">input_array</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nv">$predicate</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$item</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">            </span><span class="nv">output_array</span><span class="o">+=(</span><span class="s2">&quot;</span><span class="nv">$item</span><span class="s2">&quot;</span><span class="o">)</span>
<span class="w">        </span><span class="k">fi</span>
<span class="w">    </span><span class="k">done</span>
<span class="o">}</span>

<span class="c1"># Callback functions</span>
double<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="k">$((</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="k">))</span>
<span class="o">}</span>

is_even<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="o">((</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span>%<span class="w"> </span><span class="nv">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">))</span>
<span class="o">}</span>

<span class="c1"># Usage</span>
<span class="nv">numbers</span><span class="o">=(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="o">)</span>

<span class="nb">declare</span><span class="w"> </span>-a<span class="w"> </span>doubled
map<span class="w"> </span>numbers<span class="w"> </span>doubled<span class="w"> </span>double
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Doubled: </span><span class="si">${</span><span class="nv">doubled</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="c1"># Output: Doubled: 2 4 6 8 10 12 14 16 18 20</span>

<span class="nb">declare</span><span class="w"> </span>-a<span class="w"> </span>evens
filter<span class="w"> </span>numbers<span class="w"> </span>evens<span class="w"> </span>is_even
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Evens: </span><span class="si">${</span><span class="nv">evens</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="c1"># Output: Evens: 2 4 6 8 10</span>
</code></pre></div>

<h2 id="6-variable-scope">6. ë³€ìˆ˜ ìŠ¤ì½”í”„(Variable Scope)<a class="header-link" href="#6-variable-scope" title="Permanent link">&para;</a></h2>
<p>ë³€ìˆ˜ ìŠ¤ì½”í”„(Variable Scope)ë¥¼ ì´í•´í•˜ëŠ” ê²ƒì€ ì˜¬ë°”ë¥¸ í•¨ìˆ˜ë¥¼ ì‘ì„±í•˜ëŠ” ë° ì¤‘ìš”í•©ë‹ˆë‹¤.</p>
<h3 id="61-vs-local-vs-global-variables">6.1 ì§€ì—­ ë³€ìˆ˜ vs ì „ì—­ ë³€ìˆ˜(Local vs Global Variables)<a class="header-link" href="#61-vs-local-vs-global-variables" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="c1"># Global variable</span>
<span class="nv">global_var</span><span class="o">=</span><span class="s2">&quot;I am global&quot;</span>

test_scope<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="c1"># Local variable (only visible in this function)</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">local_var</span><span class="o">=</span><span class="s2">&quot;I am local&quot;</span>

<span class="w">    </span><span class="c1"># Modify global variable</span>
<span class="w">    </span><span class="nv">global_var</span><span class="o">=</span><span class="s2">&quot;Modified by function&quot;</span>

<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Inside function:&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;  Local: </span><span class="nv">$local_var</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;  Global: </span><span class="nv">$global_var</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Before function:&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;  Global: </span><span class="nv">$global_var</span><span class="s2">&quot;</span>

test_scope

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;After function:&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;  Global: </span><span class="nv">$global_var</span><span class="s2">&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;  Local: </span><span class="nv">$local_var</span><span class="s2">&quot;</span><span class="w">  </span><span class="c1"># Empty - not accessible here</span>
</code></pre></div>

<p><strong>ì¶œë ¥</strong>:</p>
<div class="highlight"><pre><span></span><code>Before function:
  Global: I am global
Inside function:
  Local: I am local
  Global: Modified by function
After function:
  Global: Modified by function
  Local:
</code></pre></div>

<h3 id="62-bash-dynamic-scoping-in-bash">6.2 Bashì˜ ë™ì  ìŠ¤ì½”í•‘(Dynamic Scoping in Bash)<a class="header-link" href="#62-bash-dynamic-scoping-in-bash" title="Permanent link">&para;</a></h3>
<p>BashëŠ” ë™ì  ìŠ¤ì½”í•‘(Dynamic Scoping)ì„ ì‚¬ìš©í•˜ë©° ë ‰ì‹œì»¬ ìŠ¤ì½”í•‘(Lexical Scoping)ì´ ì•„ë‹™ë‹ˆë‹¤:</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="nv">var</span><span class="o">=</span><span class="s2">&quot;global&quot;</span>

outer<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">var</span><span class="o">=</span><span class="s2">&quot;outer&quot;</span>
<span class="w">    </span>inner
<span class="o">}</span>

inner<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Inner sees: </span><span class="nv">$var</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Direct call:&quot;</span>
inner<span class="w">  </span><span class="c1"># Output: Inner sees: global</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Call via outer:&quot;</span>
outer<span class="w">  </span><span class="c1"># Output: Inner sees: outer</span>
</code></pre></div>

<h3 id="63-namereflocal-nameref">6.3 ì§€ì—­ Nameref(Local Nameref)<a class="header-link" href="#63-namereflocal-nameref" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="c1"># Modify associative array via nameref</span>
update_config<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span>-n<span class="w"> </span><span class="nv">config</span><span class="o">=</span><span class="nv">$1</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">key</span><span class="o">=</span><span class="nv">$2</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">value</span><span class="o">=</span><span class="nv">$3</span>

<span class="w">    </span>config<span class="o">[</span><span class="nv">$key</span><span class="o">]=</span><span class="nv">$value</span>
<span class="o">}</span>

<span class="c1"># Create config</span>
<span class="nb">declare</span><span class="w"> </span>-A<span class="w"> </span><span class="nv">app_config</span><span class="o">=(</span>
<span class="w">    </span><span class="o">[</span>host<span class="o">]=</span><span class="s2">&quot;localhost&quot;</span>
<span class="w">    </span><span class="o">[</span>port<span class="o">]=</span><span class="s2">&quot;8080&quot;</span>
<span class="w">    </span><span class="o">[</span>debug<span class="o">]=</span><span class="s2">&quot;false&quot;</span>
<span class="o">)</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Before: </span><span class="si">${</span><span class="nv">app_config</span><span class="p">[port]</span><span class="si">}</span><span class="s2">&quot;</span>
update_config<span class="w"> </span>app_config<span class="w"> </span><span class="s2">&quot;port&quot;</span><span class="w"> </span><span class="s2">&quot;9090&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;After: </span><span class="si">${</span><span class="nv">app_config</span><span class="p">[port]</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>

<h3 id="64-avoiding-common-pitfalls">6.4 ì¼ë°˜ì ì¸ í•¨ì • í”¼í•˜ê¸°(Avoiding Common Pitfalls)<a class="header-link" href="#64-avoiding-common-pitfalls" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="c1"># WRONG: Variable leaks to global scope</span>
wrong_function<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nv">result</span><span class="o">=</span><span class="k">$((</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">$2</span><span class="w"> </span><span class="k">))</span><span class="w">  </span><span class="c1"># result is global!</span>
<span class="o">}</span>

<span class="c1"># RIGHT: Use local</span>
right_function<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">result</span><span class="o">=</span><span class="k">$((</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">$2</span><span class="w"> </span><span class="k">))</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$result</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="c1"># WRONG: Nameref conflict</span>
wrong_nameref<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span>-n<span class="w"> </span><span class="nv">ref</span><span class="o">=</span><span class="nv">$1</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">ref</span><span class="o">=</span><span class="s2">&quot;something&quot;</span><span class="w">  </span><span class="c1"># Error: ref is already a nameref</span>
<span class="o">}</span>

<span class="c1"># RIGHT: Use different variable names</span>
right_nameref<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span>-n<span class="w"> </span><span class="nv">ref</span><span class="o">=</span><span class="nv">$1</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">value</span><span class="o">=</span><span class="s2">&quot;something&quot;</span>
<span class="w">    </span><span class="nv">ref</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$value</span><span class="s2">&quot;</span>
<span class="o">}</span>
</code></pre></div>

<h2 id="7-function-best-practices">7. í•¨ìˆ˜ ëª¨ë²” ì‚¬ë¡€(Function Best Practices)<a class="header-link" href="#7-function-best-practices" title="Permanent link">&para;</a></h2>
<h3 id="71-documentation-comments">7.1 ë¬¸ì„œí™” ì£¼ì„(Documentation Comments)<a class="header-link" href="#71-documentation-comments" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="c1">#</span>
<span class="c1"># Calculate the greatest common divisor of two numbers</span>
<span class="c1">#</span>
<span class="c1"># Arguments:</span>
<span class="c1">#   $1 - First number (positive integer)</span>
<span class="c1">#   $2 - Second number (positive integer)</span>
<span class="c1">#</span>
<span class="c1"># Returns:</span>
<span class="c1">#   Prints the GCD to stdout</span>
<span class="c1">#</span>
<span class="c1"># Example:</span>
<span class="c1">#   gcd 48 18  # Output: 6</span>
<span class="c1">#</span>
gcd<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">a</span><span class="o">=</span><span class="nv">$1</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">b</span><span class="o">=</span><span class="nv">$2</span>

<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="o">((</span><span class="w"> </span>b<span class="w"> </span>!<span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="nb">local</span><span class="w"> </span><span class="nv">temp</span><span class="o">=</span><span class="nv">$b</span>
<span class="w">        </span><span class="nv">b</span><span class="o">=</span><span class="k">$((</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="k">))</span>
<span class="w">        </span><span class="nv">a</span><span class="o">=</span><span class="nv">$temp</span>
<span class="w">    </span><span class="k">done</span>

<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$a</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="c1">#</span>
<span class="c1"># Parse command-line arguments into an associative array</span>
<span class="c1">#</span>
<span class="c1"># Arguments:</span>
<span class="c1">#   Variable arguments in --key=value or --key value format</span>
<span class="c1">#</span>
<span class="c1"># Outputs:</span>
<span class="c1">#   Sets global associative array ARGS with parsed values</span>
<span class="c1">#</span>
<span class="c1"># Example:</span>
<span class="c1">#   parse_args --host=localhost --port 8080 --verbose</span>
<span class="c1">#   # ARGS[host] = &quot;localhost&quot;</span>
<span class="c1">#   # ARGS[port] = &quot;8080&quot;</span>
<span class="c1">#   # ARGS[verbose] = &quot;true&quot;</span>
<span class="c1">#</span>
parse_args<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">declare</span><span class="w"> </span>-gA<span class="w"> </span>ARGS

<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$#</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="k">in</span>
<span class="w">            </span>--*<span class="o">=</span>*<span class="o">)</span>
<span class="w">                </span><span class="nv">key</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">1</span><span class="p">%%=*</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">                </span><span class="nv">key</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">key</span><span class="p">#--</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">                </span><span class="nv">value</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">1</span><span class="p">#*=</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">                </span>ARGS<span class="o">[</span><span class="nv">$key</span><span class="o">]=</span><span class="s2">&quot;</span><span class="nv">$value</span><span class="s2">&quot;</span>
<span class="w">                </span><span class="nb">shift</span>
<span class="w">                </span><span class="p">;;</span>
<span class="w">            </span>--*<span class="o">)</span>
<span class="w">                </span><span class="nv">key</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">1</span><span class="p">#--</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$2</span><span class="w"> </span>!<span class="o">=</span><span class="w"> </span>--*<span class="w"> </span><span class="o">]]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-n<span class="w"> </span><span class="nv">$2</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">                    </span>ARGS<span class="o">[</span><span class="nv">$key</span><span class="o">]=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span>
<span class="w">                    </span><span class="nb">shift</span><span class="w"> </span><span class="m">2</span>
<span class="w">                </span><span class="k">else</span>
<span class="w">                    </span>ARGS<span class="o">[</span><span class="nv">$key</span><span class="o">]=</span><span class="s2">&quot;true&quot;</span>
<span class="w">                    </span><span class="nb">shift</span>
<span class="w">                </span><span class="k">fi</span>
<span class="w">                </span><span class="p">;;</span>
<span class="w">            </span>*<span class="o">)</span>
<span class="w">                </span><span class="nb">shift</span>
<span class="w">                </span><span class="p">;;</span>
<span class="w">        </span><span class="k">esac</span>
<span class="w">    </span><span class="k">done</span>
<span class="o">}</span>
</code></pre></div>

<h3 id="72-input-validation">7.2 ì…ë ¥ ê²€ì¦(Input Validation)<a class="header-link" href="#72-input-validation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="c1">#</span>
<span class="c1"># Safe division with comprehensive input validation</span>
<span class="c1">#</span>
divide<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">numerator</span><span class="o">=</span><span class="nv">$1</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">denominator</span><span class="o">=</span><span class="nv">$2</span>

<span class="w">    </span><span class="c1"># Check argument count</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">((</span><span class="w"> </span><span class="nv">$#</span><span class="w"> </span>!<span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Error: divide requires exactly 2 arguments&quot;</span><span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="k">fi</span>

<span class="w">    </span><span class="c1"># Validate numerator is a number</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>!<span class="w"> </span><span class="nv">$numerator</span><span class="w"> </span><span class="o">=</span>~<span class="w"> </span>^-?<span class="o">[</span><span class="m">0</span>-9<span class="o">]</span>+<span class="o">(</span><span class="se">\.</span><span class="o">[</span><span class="m">0</span>-9<span class="o">]</span>+<span class="o">)</span>?$<span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Error: numerator must be a number&quot;</span><span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">2</span>
<span class="w">    </span><span class="k">fi</span>

<span class="w">    </span><span class="c1"># Validate denominator is a number</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>!<span class="w"> </span><span class="nv">$denominator</span><span class="w"> </span><span class="o">=</span>~<span class="w"> </span>^-?<span class="o">[</span><span class="m">0</span>-9<span class="o">]</span>+<span class="o">(</span><span class="se">\.</span><span class="o">[</span><span class="m">0</span>-9<span class="o">]</span>+<span class="o">)</span>?$<span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Error: denominator must be a number&quot;</span><span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">2</span>
<span class="w">    </span><span class="k">fi</span>

<span class="w">    </span><span class="c1"># Check for division by zero</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">((</span><span class="w"> </span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$denominator</span><span class="s2"> == 0&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>bc<span class="w"> </span>-l<span class="k">)</span><span class="w"> </span><span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Error: division by zero&quot;</span><span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">3</span>
<span class="w">    </span><span class="k">fi</span>

<span class="w">    </span><span class="c1"># Perform division</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;scale=4; </span><span class="nv">$numerator</span><span class="s2"> / </span><span class="nv">$denominator</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>bc<span class="w"> </span>-l
<span class="o">}</span>

<span class="c1"># Usage</span>
divide<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">2</span><span class="w">      </span><span class="c1"># Output: 5.0000</span>
divide<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">0</span><span class="w">      </span><span class="c1"># Error: division by zero</span>
divide<span class="w"> </span><span class="m">10</span><span class="w">        </span><span class="c1"># Error: divide requires exactly 2 arguments</span>
divide<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="s2">&quot;abc&quot;</span><span class="w">  </span><span class="c1"># Error: denominator must be a number</span>
</code></pre></div>

<h3 id="73-error-handling-in-functions">7.3 í•¨ìˆ˜ì—ì„œì˜ ì—ëŸ¬ ì²˜ë¦¬(Error Handling in Functions)<a class="header-link" href="#73-error-handling-in-functions" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="c1">#</span>
<span class="c1"># Process file with comprehensive error handling</span>
<span class="c1">#</span>
process_file<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">file</span><span class="o">=</span><span class="nv">$1</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span>-n<span class="w"> </span><span class="nv">result</span><span class="o">=</span><span class="nv">$2</span>

<span class="w">    </span><span class="c1"># Input validation</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-z<span class="w"> </span><span class="nv">$file</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Error: file path required&quot;</span><span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="k">fi</span>

<span class="w">    </span><span class="c1"># Check file exists</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>!<span class="w"> </span>-f<span class="w"> </span><span class="nv">$file</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Error: file not found: </span><span class="nv">$file</span><span class="s2">&quot;</span><span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">2</span>
<span class="w">    </span><span class="k">fi</span>

<span class="w">    </span><span class="c1"># Check file is readable</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>!<span class="w"> </span>-r<span class="w"> </span><span class="nv">$file</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Error: file not readable: </span><span class="nv">$file</span><span class="s2">&quot;</span><span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">3</span>
<span class="w">    </span><span class="k">fi</span>

<span class="w">    </span><span class="c1"># Process file (with error handling)</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span>line_count
<span class="w">    </span><span class="k">if</span><span class="w"> </span>!<span class="w"> </span><span class="nv">line_count</span><span class="o">=</span><span class="k">$(</span>wc<span class="w"> </span>-l<span class="w"> </span>&lt;<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$file</span><span class="s2">&quot;</span><span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="k">)</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Error: failed to count lines: </span><span class="nv">$line_count</span><span class="s2">&quot;</span><span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">4</span>
<span class="w">    </span><span class="k">fi</span>

<span class="w">    </span><span class="nb">local</span><span class="w"> </span>word_count
<span class="w">    </span><span class="k">if</span><span class="w"> </span>!<span class="w"> </span><span class="nv">word_count</span><span class="o">=</span><span class="k">$(</span>wc<span class="w"> </span>-w<span class="w"> </span>&lt;<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$file</span><span class="s2">&quot;</span><span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="k">)</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Error: failed to count words: </span><span class="nv">$word_count</span><span class="s2">&quot;</span><span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">5</span>
<span class="w">    </span><span class="k">fi</span>

<span class="w">    </span><span class="c1"># Return results via nameref</span>
<span class="w">    </span><span class="nv">result</span><span class="o">=(</span>
<span class="w">        </span><span class="s2">&quot;file=</span><span class="nv">$file</span><span class="s2">&quot;</span>
<span class="w">        </span><span class="s2">&quot;lines=</span><span class="nv">$line_count</span><span class="s2">&quot;</span>
<span class="w">        </span><span class="s2">&quot;words=</span><span class="nv">$word_count</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="o">)</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="m">0</span>
<span class="o">}</span>

<span class="c1"># Usage with error handling</span>
<span class="nb">declare</span><span class="w"> </span>-a<span class="w"> </span>file_stats

<span class="k">if</span><span class="w"> </span>process_file<span class="w"> </span><span class="s2">&quot;data.txt&quot;</span><span class="w"> </span>file_stats<span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Success:&quot;</span>
<span class="w">    </span><span class="nb">printf</span><span class="w"> </span><span class="s1">&#39;  %s\n&#39;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">file_stats</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">else</span>
<span class="w">    </span><span class="nv">error_code</span><span class="o">=</span><span class="nv">$?</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Failed with error code: </span><span class="nv">$error_code</span><span class="s2">&quot;</span>
<span class="k">fi</span>
</code></pre></div>

<h3 id="74-function-template">7.4 í•¨ìˆ˜ í…œí”Œë¦¿(Function Template)<a class="header-link" href="#74-function-template" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="c1">#</span>
<span class="c1"># Function description</span>
<span class="c1">#</span>
<span class="c1"># Arguments:</span>
<span class="c1">#   $1 - Description of first argument</span>
<span class="c1">#   $2 - Description of second argument</span>
<span class="c1">#   ...</span>
<span class="c1">#</span>
<span class="c1"># Environment Variables:</span>
<span class="c1">#   VAR_NAME - Description (if applicable)</span>
<span class="c1">#</span>
<span class="c1"># Returns:</span>
<span class="c1">#   0 - Success</span>
<span class="c1">#   1 - Error description</span>
<span class="c1">#   2 - Another error description</span>
<span class="c1">#</span>
<span class="c1"># Outputs:</span>
<span class="c1">#   Description of what is printed to stdout</span>
<span class="c1">#</span>
<span class="c1"># Side Effects:</span>
<span class="c1">#   Description of any global state changes</span>
<span class="c1">#</span>
<span class="c1"># Example:</span>
<span class="c1">#   function_name arg1 arg2</span>
<span class="c1">#</span>
function_name<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="c1"># Validate arguments</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">((</span><span class="w"> </span><span class="nv">$#</span><span class="w"> </span>&lt;<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Error: insufficient arguments&quot;</span><span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="k">fi</span>

<span class="w">    </span><span class="c1"># Local variables</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">arg1</span><span class="o">=</span><span class="nv">$1</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">arg2</span><span class="o">=</span><span class="nv">$2</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span>result

<span class="w">    </span><span class="c1"># Input validation</span>
<span class="w">    </span><span class="c1"># ...</span>

<span class="w">    </span><span class="c1"># Main logic</span>
<span class="w">    </span><span class="c1"># ...</span>

<span class="w">    </span><span class="c1"># Return/output results</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$result</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="m">0</span>
<span class="o">}</span>
</code></pre></div>

<h2 id="practice-problems">ì—°ìŠµ ë¬¸ì œ(Practice Problems)<a class="header-link" href="#practice-problems" title="Permanent link">&para;</a></h2>
<h3 id="1">ë¬¸ì œ 1: ë¬¸ìì—´ ìœ í‹¸ë¦¬í‹° ë¼ì´ë¸ŒëŸ¬ë¦¬<a class="header-link" href="#1" title="Permanent link">&para;</a></h3>
<p>ë‹¤ìŒ í•¨ìˆ˜ë“¤ì„ ê°–ì¶˜ ë¬¸ìì—´ ìœ í‹¸ë¦¬í‹° ë¼ì´ë¸ŒëŸ¬ë¦¬(<code>string_lib.sh</code>)ë¥¼ ë§Œë“œì„¸ìš”:
- <code>str_reverse()</code> - ë¬¸ìì—´ ë’¤ì§‘ê¸°
- <code>str_is_palindrome()</code> - ë¬¸ìì—´ì´ íšŒë¬¸ì¸ì§€ í™•ì¸ (trueì¼ ê²½ìš° 0 ë°˜í™˜)
- <code>str_count_words()</code> - ë¬¸ìì—´ì˜ ë‹¨ì–´ ê°œìˆ˜ ì„¸ê¸°
- <code>str_capitalize()</code> - ê° ë‹¨ì–´ì˜ ì²« ê¸€ìë¥¼ ëŒ€ë¬¸ìë¡œ
- <code>str_remove_duplicates()</code> - ì—°ì†ëœ ì¤‘ë³µ ë¬¸ì ì œê±°</p>
<p>ë³„ë„ì˜ ìŠ¤í¬ë¦½íŠ¸ë¡œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”.</p>
<h3 id="2">ë¬¸ì œ 2: ì¬ê·€ì  íŒŒì¼ ê²€ìƒ‰<a class="header-link" href="#2" title="Permanent link">&para;</a></h3>
<p>ë‹¤ìŒ ê¸°ëŠ¥ì„ ê°–ì¶˜ ì¬ê·€ í•¨ìˆ˜ <code>find_files()</code>ë¥¼ ì‘ì„±í•˜ì„¸ìš”:
- ë””ë ‰í† ë¦¬ ê²½ë¡œì™€ íŒŒì¼ íŒ¨í„´(ì˜ˆ: "*.txt")ì„ ë°›ìŒ
- ëª¨ë“  í•˜ìœ„ ë””ë ‰í† ë¦¬ë¥¼ ì¬ê·€ì ìœ¼ë¡œ ê²€ìƒ‰
- namerefë¥¼ í†µí•´ ì¼ì¹˜í•˜ëŠ” íŒŒì¼ ê²½ë¡œ ë°°ì—´ ë°˜í™˜
- ì‹¬ë³¼ë¦­ ë§í¬ë¥¼ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬ (ë¬´í•œ ë£¨í”„ ë°©ì§€)
- ê²€ìƒ‰ëœ ì´ íŒŒì¼ ìˆ˜ì™€ ë°œê²¬ëœ ì¼ì¹˜ í•­ëª© ìˆ˜ ê³„ì‚°</p>
<h3 id="3">ë¬¸ì œ 3: ì½œë°±ì„ ì‚¬ìš©í•œ ê³„ì‚°ê¸°<a class="header-link" href="#3" title="Permanent link">&para;</a></h3>
<p>ë‹¤ìŒ ê¸°ëŠ¥ì„ ê°–ì¶˜ ê³„ì‚°ê¸°ë¥¼ ë§Œë“œì„¸ìš”:
- ê° ì—°ì‚°(+, -, *, /)ì— ëŒ€í•œ ì½œë°± í•¨ìˆ˜ í—ˆìš©
- <code>register_op()</code>ë¥¼ í†µí•œ ì‚¬ìš©ì ì •ì˜ ì—°ì‚° ë“±ë¡ ì§€ì›
- ì…ë ¥ ê²€ì¦ ë° ì˜¤ë¥˜ ì²˜ë¦¬
- ì—°ì‚° íˆìŠ¤í† ë¦¬ ìœ ì§€
- ì˜ˆì œ: <code>calc 10 "+" 5</code> â†’ ë“±ë¡ëœ ë§ì…ˆ ì½œë°± ì‚¬ìš©</p>
<h3 id="4">ë¬¸ì œ 4: ì„¤ì • ê´€ë¦¬ì<a class="header-link" href="#4" title="Permanent link">&para;</a></h3>
<p>ë‹¤ìŒ ê¸°ëŠ¥ì„ ê°–ì¶˜ ì„¤ì • ê´€ë¦¬ ì‹œìŠ¤í…œì„ ë§Œë“œì„¸ìš”:
- <code>config_load()</code> - íŒŒì¼ì—ì„œ ì—°ê´€ ë°°ì—´(Associative Array)ë¡œ ì„¤ì • ë¡œë“œ
- <code>config_get()</code> - ê¸°ë³¸ê°’ í´ë°±ê³¼ í•¨ê»˜ ê°’ ê°€ì ¸ì˜¤ê¸°
- <code>config_set()</code> - ê²€ì¦ ì½œë°±ê³¼ í•¨ê»˜ ê°’ ì„¤ì •
- <code>config_save()</code> - ì„¤ì •ì„ íŒŒì¼ë¡œ ë‹¤ì‹œ ì €ì¥
- <code>config_watch()</code> - íŒŒì¼ ë³€ê²½ ì‹œ ì„¤ì • ë‹¤ì‹œ ë¡œë“œ (ë³€ê²½ ì‹œ ì½œë°±)</p>
<p>ë„¤ì„ìŠ¤í˜ì´ì‹±(config::*)ê³¼ ì ì ˆí•œ ì˜¤ë¥˜ ì²˜ë¦¬ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.</p>
<h3 id="5">ë¬¸ì œ 5: í•¨ìˆ˜ ì„±ëŠ¥ í”„ë¡œíŒŒì¼ëŸ¬<a class="header-link" href="#5" title="Permanent link">&para;</a></h3>
<p>ë‹¤ìŒ ê¸°ëŠ¥ì„ ê°–ì¶˜ í”„ë¡œíŒŒì¼ëŸ¬ë¥¼ ì‘ì„±í•˜ì„¸ìš”:
- ì‹¤í–‰ ì‹œê°„ì„ ì¸¡ì •í•˜ê¸° ìœ„í•´ ëª¨ë“  í•¨ìˆ˜ë¥¼ ë˜í•‘
- ê° í•¨ìˆ˜ì˜ í˜¸ì¶œ íšŸìˆ˜ ì¶”ì 
- ìµœì†Œ/ìµœëŒ€/í‰ê·  ì‹¤í–‰ ì‹œê°„ ê¸°ë¡
- ì„±ëŠ¥ ë³´ê³ ì„œ ìƒì„±
- ì˜ˆì œ: <code>profile my_function arg1 arg2</code></p>
<p><strong>ì´ì „</strong>: <a href="./04_Advanced_Control_Flow.md">04_Advanced_Control_Flow.md</a> | <strong>ë‹¤ìŒ</strong>: <a href="./06_IO_and_Redirection.md">06_IO_and_Redirection.md</a></p>
    </div>

    
<div class="lesson-toolbar lesson-toolbar--bottom">
    <div class="toolbar-nav toolbar-nav--prev">
        
        <a href="/study/ko/Shell_Script/04_Advanced_Control_Flow.html" class="nav-prev">
            <span class="nav-label">Previous</span>
            <span class="nav-title">Advanced Control Flow â­â­</span>
        </a>
        
    </div>
    <div class="toolbar-actions">
        <button class="btn btn-copy-link" data-action="copy-link" title="Copy link">
            <span class="icon">ğŸ”—</span>
            <span class="text">Copy link</span>
        </button>
        <a href="/study/ko/Shell_Script/" class="btn btn-topic-link" title="Back to topic list">
            <span class="icon">ğŸ“‹</span>
            <span class="text">Topic list</span>
        </a>
    </div>
    <div class="toolbar-nav toolbar-nav--next">
        
        <a href="/study/ko/Shell_Script/06_IO_and_Redirection.html" class="nav-next">
            <span class="nav-label">Next</span>
            <span class="nav-title">Lesson 06: I/Oì™€ ë¦¬ë‹¤ì´ë ‰ì…˜(Redirection)</span>
        </a>
        
    </div>
</div>


    <div class="toolbar-keyboard-hint">
        <kbd>&larr;</kbd> <kbd>&rarr;</kbd> to navigate between lessons
    </div>
</article>

<!-- Scroll to top floating button -->
<button class="scroll-to-top" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top">â†‘</button>

            </div>
        </main>
    </div>

    <script src="/study/static/js/app.js"></script>
    <script>
        function switchLanguage(newLang) {
            const path = window.location.pathname;
            const base = '/study';
            const currentLang = 'ko';
            const newPath = path.replace(base + '/' + currentLang + '/', base + '/' + newLang + '/');
            window.location.href = newPath + window.location.search;
        }
    </script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy link - independent feedback per button
        document.querySelectorAll('[data-action="copy-link"]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                navigator.clipboard.writeText(window.location.href);
                var textEl = this.querySelector('.text');
                var originalText = textEl.textContent;
                textEl.textContent = 'Copied!';
                setTimeout(function() { textEl.textContent = originalText; }, 2000);
            });
        });

        // Add copy buttons to code blocks
        document.querySelectorAll('.lesson-content pre').forEach(function(pre) {
            var copyBtn = document.createElement('button');
            copyBtn.className = 'code-copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', function() {
                var code = pre.querySelector('code');
                var text = code ? code.textContent : pre.textContent;
                navigator.clipboard.writeText(text);
                copyBtn.textContent = 'Copied!';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            });
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);
        });

        // Scroll to top button
        var scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', function() {
            scrollBtn.classList.toggle('visible', window.scrollY > 300);
        });
        scrollBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Keyboard shortcuts: left/right arrows for lesson navigation
        document.addEventListener('keydown', function(e) {
            var tag = document.activeElement.tagName;
            if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

            if (e.key === 'ArrowLeft') {
                var prevLink = document.querySelector('.nav-prev');
                if (prevLink) prevLink.click();
            } else if (e.key === 'ArrowRight') {
                var nextLink = document.querySelector('.nav-next');
                if (nextLink) nextLink.click();
            }
        });
    });
</script>

</body>
</html>
{% endraw %}